var __extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}()
  , UTMessageProcessor = function(i) {
    function UTMessageProcessor(t) {
        var e = i.call(this) || this;
        return e.id = t,
        e
    }
    return __extends(UTMessageProcessor, i),
    UTMessageProcessor.prototype.dealloc = function() {
        i.prototype.dealloc.call(this)
    }
    ,
    UTMessageProcessor
}(EAObject)
  , UTMessageChannel = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTMessageChannel(t) {
        var e = i.call(this) || this;
        return e.id = t,
        e.processors = new EAHashTable,
        e
    }
    return __extends(UTMessageChannel, i),
    UTMessageChannel.prototype.dealloc = function() {
        i.prototype.dealloc.call(this)
    }
    ,
    UTMessageChannel.prototype.addProcessor = function(t) {
        this.processors.set(t.id, t)
    }
    ,
    UTMessageChannel.prototype.removeProcessor = function(t) {
        this.processors.remove(t)
    }
    ,
    UTMessageChannel.prototype.transport = function(t) {
        var e = this.processors.get(t.id);
        DebugUtils.Assert(JSUtils.isValid(e), "No processor found for the given message type."),
        e && e.process(t)
    }
    ,
    UTMessageChannel
}(EAObject))
  , UTMessageMediator = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTMessageMediator() {
        var t = e.call(this) || this;
        return t.channels = new EAHashTable,
        t
    }
    return __extends(UTMessageMediator, e),
    UTMessageMediator.prototype.dealloc = function() {
        e.prototype.dealloc.call(this)
    }
    ,
    UTMessageMediator.prototype.processMessage = function(t) {
        var e = this.channels.get(t.id);
        DebugUtils.Assert(JSUtils.isValid(e), "No channel found for the given message type."),
        e && e.transport(t)
    }
    ,
    UTMessageMediator.prototype.registerChannel = function(t) {
        this.channels.set(t.id, t)
    }
    ,
    UTMessageMediator
}(EAObject))
  , EAIntervalController = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(n) {
    function EAIntervalController(t, e, i) {
        var r = n.call(this) || this;
        return r.driftCb = i || null,
        r.interval = t,
        r.intervalCb = e,
        r
    }
    return __extends(EAIntervalController, n),
    EAIntervalController.prototype.dealloc = function() {
        this.stop(),
        this.interval = 0,
        this.expectedTimestamp = 0,
        this.intervalCb = null,
        this.driftCb = null,
        n.prototype.dealloc.call(this)
    }
    ,
    EAIntervalController.prototype.tick = function() {
        var t = Date.now() - this.expectedTimestamp;
        t > this.interval && this.driftCb && this.driftCb(),
        this.expectedTimestamp += this.interval,
        this.timeout = window.setTimeout(this.tick.bind(this), Math.max(0, this.interval - t)),
        this.intervalCb && this.intervalCb()
    }
    ,
    EAIntervalController.prototype.stop = function() {
        clearTimeout(this.timeout),
        this.timeout = 0
    }
    ,
    EAIntervalController.prototype.start = function() {
        this.stop(),
        this.expectedTimestamp = Date.now() + this.interval,
        this.timeout = window.setTimeout(this.tick.bind(this), this.interval)
    }
    ,
    EAIntervalController
}(EAObject))
  , UTMessageQueue = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTMessageQueue() {
        var t = e.call(this) || this;
        return t.queue = [],
        t.mediator = new UTMessageMediator,
        t.interval = null,
        t
    }
    return __extends(UTMessageQueue, e),
    UTMessageQueue.prototype.dealloc = function() {
        this.clearQueue(),
        this.interval = null,
        e.prototype.dealloc.call(this)
    }
    ,
    UTMessageQueue.prototype.clearQueue = function() {
        return this.queue = [],
        this
    }
    ,
    UTMessageQueue.prototype.getMediator = function() {
        return this.mediator
    }
    ,
    UTMessageQueue.prototype.enqueue = function(t) {
        this.queue.push(t),
        this.startInterval()
    }
    ,
    UTMessageQueue.prototype.dequeue = function() {
        return this.queue.shift()
    }
    ,
    UTMessageQueue.prototype.startInterval = function() {
        if (!this.interval) {
            var t = getAppMain().getConfigRepository().getConfigNumber(EAConfigurationRepository.KEY_MESSAGE_QUEUE_INTERVAL);
            this.interval = new EAIntervalController((0 < t ? t : 1) * MS_PER_SECOND,this.process.bind(this)),
            this.interval.start()
        }
    }
    ,
    UTMessageQueue.prototype.stopInterval = function() {
        this.interval && (this.interval.dealloc(),
        this.interval = null)
    }
    ,
    UTMessageQueue.prototype.process = function() {
        var e = this;
        this.queue.forEach(function(t) {
            e.mediator.processMessage(t),
            e.queue.splice(0, 1)
        }),
        0 === this.queue.length && this.stopInterval()
    }
    ,
    UTMessageQueue
}(EAObject))
  , UTStadiumMessageConsumer = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTStadiumMessageConsumer(t) {
        return e.call(this, t) || this
    }
    return __extends(UTStadiumMessageConsumer, e),
    UTStadiumMessageConsumer.prototype.process = function(t) {
        t.id === this.id && getDefaultDispatcher().notify(AppNotification.STADIUM_SAVE_INTERVAL, this)
    }
    ,
    UTStadiumMessageConsumer
}(UTMessageProcessor))
  , UTServerErrorVO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTServerErrorVO(t, e) {
        var i = r.call(this) || this;
        return i.code = t,
        i.reason = e,
        i
    }
    return __extends(UTServerErrorVO, r),
    UTServerErrorVO.prototype.value = function() {
        return this.code
    }
    ,
    UTServerErrorVO.prototype.equals = function(t) {
        return t instanceof UTServerErrorVO && t.code === this.code
    }
    ,
    UTServerErrorVO
}(EAObject))
  , DebugUtils = function() {
    function DebugUtils() {}
    return DebugUtils.Assert = function(t, e) {}
    ,
    DebugUtils.StackTrace = function() {}
    ,
    DebugUtils.Watch = function(t, e) {}
    ,
    DebugUtils
}()
  , UTAnalyticsDAO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTAnalyticsDAO(t) {
        var e = i.call(this) || this;
        return e.authDelegate = t,
        e
    }
    return __extends(UTAnalyticsDAO, i),
    UTAnalyticsDAO.prototype.sendAnalytics = function(t) {
        var r = this
          , n = new EAObservable
          , e = new UTHttpRequest(this.authDelegate);
        e.setRetry(!1);
        var i = {
            data: t,
            type: "COMPANION"
        };
        return e.setPath("/ut/game/" + GAME_NAME + "/appstats"),
        e.setRequestType(HttpRequestMethod.POST),
        e.setRequestBody(i),
        e.observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            i.success = e.success,
            i.status = e.status,
            i.response = {},
            n.notify(i)
        }),
        e.send(),
        n
    }
    ,
    UTAnalyticsDAO
}(EAObject))
  , UTChampionsEventPrizeTiersEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTChampionsEventPrizeTiersEntity(t) {
        var e = i.call(this) || this;
        return e.awardSetId = t.awardSetId,
        e.competitionId = t.competitionId,
        e.eventRewardSet = t.eventRewardSet,
        e.tierEnd = t.tierEnd,
        e.tierLevel = t.tierLevel,
        e.tierType = t.tierType,
        e.tierStart = t.tierStart,
        e
    }
    return __extends(UTChampionsEventPrizeTiersEntity, i),
    UTChampionsEventPrizeTiersEntity
}(EAObject))
  , UTChampionsEventEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTChampionsEventEntity(t) {
        var e = i.call(this) || this;
        return e.currentStageId = t.currentStageId,
        e.currentTime = t.currentTime,
        e.nextStageId = t.nextStageId,
        e.previousStageId = t.previousStageId,
        e.qualifiedToNextStage = t.qualifiedToNextStage,
        e.rewardReady = t.rewardReady,
        e.stages = t.stages,
        e.userProgress = t.userProgress,
        e
    }
    return __extends(UTChampionsEventEntity, i),
    UTChampionsEventEntity.prototype.hasOutStandingRewards = function() {
        return this.rewardReady
    }
    ,
    UTChampionsEventEntity.prototype.hasProgression = function() {
        return 0 < this.stages.length && 0 < this.currentStageId
    }
    ,
    UTChampionsEventEntity.prototype.getCurrentStage = function() {
        var t, e = this, i = null !== (t = this.stages.find(function(t) {
            return 1 === t.stageLevel
        })) && void 0 !== t ? t : null, r = this.stages.find(function(t) {
            return t.stageEventId === e.currentStageId
        });
        return r || i
    }
    ,
    UTChampionsEventEntity
}(EAObject))
  , UTChampionsEventStageEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTChampionsEventStageEntity(t) {
        var e = i.call(this) || this;
        return e.championQualificationPointRequirement = t.championQualificationPointRequirement,
        e.endTime = t.endTime,
        e.maxGames = t.maxGames,
        e.pointsPerLoss = t.pointsPerLoss,
        e.pointsPerWin = t.pointsPerWin,
        e.prizeTiers = t.prizeTiers,
        e.stageEventId = t.stageEventId,
        e.stageLevel = t.stageLevel,
        e.startTime = t.startTime,
        e
    }
    return __extends(UTChampionsEventStageEntity, i),
    UTChampionsEventStageEntity.prototype.getFirstStageTier = function() {
        var e = null;
        return this.prizeTiers.forEach(function(t) {
            e ? t.tierStart < (null == e ? void 0 : e.tierStart) && (e = t) : e = t
        }),
        e
    }
    ,
    UTChampionsEventStageEntity
}(EAObject))
  , UTChampionsEventEntityFactory = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTChampionsEventEntityFactory(t) {
        var e = i.call(this) || this;
        return e.rewardFactory = t,
        e
    }
    return __extends(UTChampionsEventEntityFactory, i),
    UTChampionsEventEntityFactory.prototype.createChampionsEvent = function(t) {
        var e, i, r, n, o = this, s = null !== (i = null === (e = t.stages) || void 0 === e ? void 0 : e.map(function(t) {
            return o.createStageEntity(t)
        })) && void 0 !== i ? i : [], a = {
            currentStageId: t.currentStageId,
            currentTime: t.currentTime,
            nextStageId: t.nextStageId,
            previousStageId: null !== (r = t.previousStageId) && void 0 !== r ? r : -1,
            qualifiedToNextStage: t.qualifiedToNextStage,
            rewardReady: t.rewardReady,
            stages: s,
            userProgress: null !== (n = t.userProgress) && void 0 !== n ? n : []
        };
        return new UTChampionsEventEntity(a)
    }
    ,
    UTChampionsEventEntityFactory.prototype.createStageEntity = function(t) {
        var e = this
          , i = t.prizeTiers.map(function(t) {
            return e.createPrizeTierEntity(t)
        })
          , r = {
            championQualificationPointRequirement: t.championQualificationPointRequirement,
            endTime: t.endTime,
            maxGames: t.maxGames,
            pointsPerLoss: t.pointsPerLoss,
            pointsPerWin: t.pointsPerWin,
            prizeTiers: i,
            stageEventId: t.stageEventId,
            stageLevel: t.stageLevel,
            startTime: t.startTime
        };
        return new UTChampionsEventStageEntity(r)
    }
    ,
    UTChampionsEventEntityFactory.prototype.createPrizeTierEntity = function(t) {
        var e = this.rewardFactory.createRewardSetFromChampionsData(t)
          , i = {
            awardSetId: t.awardSetId,
            competitionId: t.competitionId,
            eventRewardSet: e,
            tierEnd: t.tierEnd,
            tierLevel: t.tierLevel,
            tierType: t.tierType,
            tierStart: t.tierStart
        };
        return new UTChampionsEventPrizeTiersEntity(i)
    }
    ,
    UTChampionsEventEntityFactory
}(EAObject))
  , UTCareerEntryDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTCareerEntryDTO(t) {
        var e = i.call(this) || this;
        return e.endYear = t.e,
        e.goals = t.g,
        e.matches = t.m,
        e.startYear = t.s,
        e.teamId = t.t,
        e
    }
    return __extends(UTCareerEntryDTO, i),
    UTCareerEntryDTO
}(EAObject))
  , UTLegendsBioDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTLegendsBioDTO(t) {
        var e = i.call(this) || this;
        return t ? (e.clubCareer = t.c.map(function(t) {
            return new UTCareerEntryDTO(t)
        }),
        e.nationalCareer = t.n.map(function(t) {
            return new UTCareerEntryDTO(t)
        })) : (e.clubCareer = [],
        e.nationalCareer = []),
        e
    }
    return __extends(UTLegendsBioDTO, i),
    UTLegendsBioDTO
}(EAObject))
  , UTPlayerSubAttributeVO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(n) {
    function UTPlayerSubAttributeVO(t, e, i) {
        void 0 === i && (i = !1);
        var r = n.call(this) || this;
        return r.type = t,
        r.rating = e,
        r.highlight = i,
        r
    }
    return __extends(UTPlayerSubAttributeVO, n),
    UTPlayerSubAttributeVO.prototype.value = function() {
        return this.rating
    }
    ,
    UTPlayerSubAttributeVO.prototype.equals = function(t) {
        return t instanceof UTPlayerSubAttributeVO && this.type === t.type && this.rating === t.rating
    }
    ,
    UTPlayerSubAttributeVO
}(EAObject))
  , UTPlayerTraitsVO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTPlayerTraitsVO(t) {
        var e = i.call(this) || this;
        return e.playerTraits = [],
        e.setPlayerTraits(t),
        e
    }
    return __extends(UTPlayerTraitsVO, i),
    UTPlayerTraitsVO.prototype.getPlayerTraits = function() {
        return this.playerTraits.slice()
    }
    ,
    UTPlayerTraitsVO.prototype.setPlayerTraits = function(t) {
        if (!(t.length < 2 || t.some(isNaN) || 0 === t[0] && 0 === t[1])) {
            var e = UTPlayerTraitsVO.MAX_TRAITS_PER_FIELD;
            for (var i in PlayerTrait)
                if (PlayerTrait.hasOwnProperty(i)) {
                    var r = parseInt(PlayerTrait[i]);
                    if (!JSUtils.isNumber(r) || r <= 0)
                        continue;
                    var n = Math.floor((r - 1) / e)
                      , o = r - e * n;
                    t[n] & 1 << o - 1 && this.playerTraits.push(r)
                }
        }
    }
    ,
    UTPlayerTraitsVO.MAX_TRAITS_PER_FIELD = 30,
    UTPlayerTraitsVO
}(EAObject))
  , UTStaticItemDataDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTStaticItemDataDTO() {
        var t = e.call(this) || this;
        return t.assetId = 0,
        t.assetType = "",
        t.assetYear = -1,
        t.amount = 0,
        t.name = BLANK_STR,
        t.firstName = BLANK_STR,
        t.lastName = BLANK_STR,
        t.knownAs = BLANK_STR,
        t.description = "",
        t.manufacturer = "",
        t.trainedAttribute = -1,
        t.trainPosFrom = "",
        t.trainPosTo = "",
        t.goldBoost = 0,
        t.silverBoost = 0,
        t.bronzeBoost = 0,
        t
    }
    return __extends(UTStaticItemDataDTO, e),
    UTStaticItemDataDTO.prototype.parseDynamicItemData = function(t, e) {
        var i = e;
        this.amount = i.amount || 0
    }
    ,
    UTStaticItemDataDTO.prototype.generateNameData = function(t, e, i) {
        this.firstName = t || BLANK_STR,
        this.lastName = e || BLANK_STR,
        this.knownAs = i || BLANK_STR,
        this.name = this.knownAs === BLANK_STR ? this.lastName : this.knownAs
    }
    ,
    UTStaticItemDataDTO.prototype.getFullName = function() {
        return this.knownAs === BLANK_STR ? this.firstName + " " + this.lastName : this.knownAs
    }
    ,
    UTStaticItemDataDTO.prototype.hasLoanPackDescription = function() {
        return "FreeLoanPackDesc" === this.description
    }
    ,
    UTStaticItemDataDTO
}(EAObject))
  , UTStaticPlayerItemDataDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTStaticPlayerItemDataDTO() {
        return i.call(this) || this
    }
    return __extends(UTStaticPlayerItemDataDTO, i),
    UTStaticPlayerItemDataDTO.prototype.parseDynamicItemData = function(t, e) {
        i.prototype.parseDynamicItemData.call(this, t, e),
        this.generateNameData(e.firstName, e.lastName, e.knownAs)
    }
    ,
    UTStaticPlayerItemDataDTO.prototype.hasNameData = function() {
        return this.firstName !== BLANK_STR || this.lastName !== BLANK_STR || this.knownAs !== BLANK_STR
    }
    ,
    UTStaticPlayerItemDataDTO
}(UTStaticItemDataDTO))
  , UTStaticManagerItemDataDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTStaticManagerItemDataDTO() {
        return i.call(this) || this
    }
    return __extends(UTStaticManagerItemDataDTO, i),
    UTStaticManagerItemDataDTO.prototype.parseDynamicItemData = function(t, e) {
        i.prototype.parseDynamicItemData.call(this, t, e),
        this.firstName = e.firstName || BLANK_STR,
        this.lastName = e.lastName || BLANK_STR,
        this.knownAs = e.commonname || BLANK_STR,
        this.lastName !== BLANK_STR && !JSUtils.isEmpty(this.lastName.trim()) || (this.knownAs = this.firstName),
        this.amount = e.negotiation || 0,
        this.firstName === BLANK_STR && this.lastName === BLANK_STR && this.knownAs === BLANK_STR ? this.name = BLANK_STR : this.name = this.knownAs === BLANK_STR ? this.firstName.charAt(0) + ". " + this.lastName : this.knownAs
    }
    ,
    UTStaticManagerItemDataDTO
}(UTStaticItemDataDTO))
  , UTStaticBadgeItemDataDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTStaticBadgeItemDataDTO() {
        var t = i.call(this) || this;
        return t.name = services.Localization.localize("card.title.badge"),
        t
    }
    return __extends(UTStaticBadgeItemDataDTO, i),
    UTStaticBadgeItemDataDTO.prototype.parseDynamicItemData = function(t, e) {
        i.prototype.parseDynamicItemData.call(this, t, e),
        this.assetId = e.assetId || 0
    }
    ,
    UTStaticBadgeItemDataDTO
}(UTStaticItemDataDTO))
  , UTStaticKitItemDataDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(s) {
    function UTStaticKitItemDataDTO() {
        var t = s.call(this) || this;
        return t.kitType = KitType.HOME,
        t
    }
    return __extends(UTStaticKitItemDataDTO, s),
    UTStaticKitItemDataDTO.prototype.parseDynamicItemData = function(t, e) {
        var i, r;
        s.prototype.parseDynamicItemData.call(this, t, e);
        var n = e
          , o = null !== (i = e.category) && void 0 !== i ? i : 0;
        this.assetYear = null !== (r = n.year) && void 0 !== r ? r : 0,
        this.name = services.Localization.localize("clubtype.kit"),
        o === UTStaticKitItemDataDTO.CATEGORY_KIT_HOME ? (this.description = services.Localization.localize("card.desc.homekit"),
        this.assetType = AssetLocationUtils.IMAGE_TYPE_KIT_HOME,
        this.kitType = KitType.HOME) : o === UTStaticKitItemDataDTO.CATEGORY_KIT_AWAY ? (this.description = services.Localization.localize("card.desc.awaykit"),
        this.assetType = AssetLocationUtils.IMAGE_TYPE_KIT_AWAY,
        this.kitType = KitType.AWAY) : o === UTStaticKitItemDataDTO.CATEGORY_KIT_THIRD ? (this.description = services.Localization.localize("card.desc.thirdkit"),
        this.assetType = AssetLocationUtils.IMAGE_TYPE_KIT_THIRD,
        this.kitType = KitType.THIRD) : (this.description = services.Localization.localize("card.desc.homekit"),
        this.assetType = AssetLocationUtils.IMAGE_TYPE_KIT_HOME,
        this.kitType = KitType.GOALKEEPER),
        0 < this.assetYear && (this.description = services.Localization.localize("card.desc.classickit"))
    }
    ,
    UTStaticKitItemDataDTO.CATEGORY_KIT_HOME = 2,
    UTStaticKitItemDataDTO.CATEGORY_KIT_AWAY = 3,
    UTStaticKitItemDataDTO.CATEGORY_KIT_THIRD = 5,
    UTStaticKitItemDataDTO
}(UTStaticItemDataDTO))
  , UTStaticBallItemDataDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTStaticBallItemDataDTO() {
        return r.call(this) || this
    }
    return __extends(UTStaticBallItemDataDTO, r),
    UTStaticBallItemDataDTO.prototype.parseDynamicItemData = function(t, e) {
        r.prototype.parseDynamicItemData.call(this, t, e);
        var i = e;
        this.assetId = e.assetId || 0,
        this.name = services.Localization.localize("club.edit.ballLabel"),
        this.description = i.name || "BallName_" + this.assetId,
        this.manufacturer = i.manufacturer || ""
    }
    ,
    UTStaticBallItemDataDTO
}(UTStaticItemDataDTO))
  , UTStaticStadiumItemDataDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTStaticStadiumItemDataDTO() {
        return r.call(this) || this
    }
    return __extends(UTStaticStadiumItemDataDTO, r),
    UTStaticStadiumItemDataDTO.prototype.parseDynamicItemData = function(t, e) {
        r.prototype.parseDynamicItemData.call(this, t, e);
        var i = services.Localization;
        this.name = i.localize("club.edit.stadiumLabel"),
        this.assetId = e.stadiumid || e.assetId || 0,
        t.isMyStadium() ? t.definitionId === UTItemEntity.CUSTOM_STADIUM_TIER_1 ? this.description = i.localize("stadium.entity.tier1") : t.definitionId === UTItemEntity.CUSTOM_STADIUM_TIER_2 ? this.description = i.localize("stadium.entity.tier2") : t.definitionId === UTItemEntity.CUSTOM_STADIUM_TIER_3 && (this.description = i.localize("stadium.entity.tier3")) : this.description = i.localize("global.stadiumFull." + APP_YEAR + ".stadium" + this.assetId)
    }
    ,
    UTStaticStadiumItemDataDTO
}(UTStaticItemDataDTO))
  , UTStaticTrainingItemDataDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTStaticTrainingItemDataDTO() {
        return r.call(this) || this
    }
    return __extends(UTStaticTrainingItemDataDTO, r),
    UTStaticTrainingItemDataDTO.prototype.parseDynamicItemData = function(t, e) {
        r.prototype.parseDynamicItemData.call(this, t, e);
        var i = t.subtype;
        t.isPlayerPositionModifier() ? this.name = services.Localization.localize("card.title.position") : t.isManagerLeagueModifier() ? (this.name = services.Localization.localize("card.title.leaguechange"),
        t.leagueId = this.amount) : t.isStyleModifier() ? this.name = services.Localization.localize("card.title.playstyle") : DebugUtils.Assert(!1, "Unknown item subtype: " + i)
    }
    ,
    UTStaticTrainingItemDataDTO
}(UTStaticItemDataDTO))
  , UTStaticHealingItemDataDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTStaticHealingItemDataDTO() {
        return i.call(this) || this
    }
    return __extends(UTStaticHealingItemDataDTO, i),
    UTStaticHealingItemDataDTO.prototype.parseDynamicItemData = function(t, e) {
        i.prototype.parseDynamicItemData.call(this, t, e),
        DebugUtils.Assert(t.subtype === ItemSubType.HEALING_ALL, "Unknown item subtype: " + t.subtype),
        this.name = services.Localization.localize("card.desc.contract.player"),
        this.assetId = 7
    }
    ,
    UTStaticHealingItemDataDTO
}(UTStaticItemDataDTO))
  , UTStaticContractItemDataDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTStaticContractItemDataDTO() {
        return r.call(this) || this
    }
    return __extends(UTStaticContractItemDataDTO, r),
    UTStaticContractItemDataDTO.prototype.parseDynamicItemData = function(t, e) {
        r.prototype.parseDynamicItemData.call(this, t, e);
        var i = t.isManagerContract();
        this.assetId = i ? 1 : 0,
        this.name = services.Localization.localize(i ? "card.desc.contract.manager" : "card.desc.contract.player"),
        e.bronze && (this.bronzeBoost = e.bronze),
        e.silver && (this.silverBoost = e.silver),
        e.gold && (this.goldBoost = e.gold)
    }
    ,
    UTStaticContractItemDataDTO
}(UTStaticItemDataDTO))
  , UTStaticMiscItemDataDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTStaticMiscItemDataDTO() {
        return r.call(this) || this
    }
    return __extends(UTStaticMiscItemDataDTO, r),
    UTStaticMiscItemDataDTO.prototype.parseDynamicItemData = function(t, e) {
        var i;
        r.prototype.parseDynamicItemData.call(this, t, e),
        this.name = t.isPlayerPickItem() && e.name ? e.name : services.Localization.localize("card.title.unlock"),
        this.description = null !== (i = e.description) && void 0 !== i ? i : "",
        t.isFreePack() && (t.isBronzeRating() ? this.assetId = UTStaticMiscItemDataDTO.ASSET_ID_BRONZE_PACK : t.isSilverRating() ? this.assetId = UTStaticMiscItemDataDTO.ASSET_ID_SILVER_PACK : this.assetId = UTStaticMiscItemDataDTO.ASSET_ID_GOLD_PACK)
    }
    ,
    UTStaticMiscItemDataDTO.ASSET_ID_BRONZE_PACK = 0,
    UTStaticMiscItemDataDTO.ASSET_ID_SILVER_PACK = 1,
    UTStaticMiscItemDataDTO.ASSET_ID_GOLD_PACK = 2,
    UTStaticMiscItemDataDTO
}(UTStaticItemDataDTO))
  , UTStaticBannerItemDataDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTStaticBannerItemDataDTO() {
        return i.call(this) || this
    }
    return __extends(UTStaticBannerItemDataDTO, i),
    UTStaticBannerItemDataDTO.prototype.parseDynamicItemData = function(t, e) {
        i.prototype.parseDynamicItemData.call(this, t, e),
        this.assetId = e.assetId || 0,
        this.description = e.description || "",
        this.name = "FUT_BannerName_" + this.assetId
    }
    ,
    UTStaticBannerItemDataDTO
}(UTStaticItemDataDTO))
  , UTStaticCelebrationItemDataDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTStaticCelebrationItemDataDTO() {
        return i.call(this) || this
    }
    return __extends(UTStaticCelebrationItemDataDTO, i),
    UTStaticCelebrationItemDataDTO.prototype.parseDynamicItemData = function(t, e) {
        i.prototype.parseDynamicItemData.call(this, t, e),
        this.assetId = e.cardassetid || 0,
        this.description = e.description || "",
        this.name = "FUT_CelebrationName_" + t.definitionId
    }
    ,
    UTStaticCelebrationItemDataDTO
}(UTStaticItemDataDTO))
  , UTStaticTifoItemDataDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTStaticTifoItemDataDTO() {
        return i.call(this) || this
    }
    return __extends(UTStaticTifoItemDataDTO, i),
    UTStaticTifoItemDataDTO.prototype.parseDynamicItemData = function(t, e) {
        i.prototype.parseDynamicItemData.call(this, t, e),
        this.assetId = e.assetId || 0,
        this.description = e.description || "",
        this.name = "FUT_TifoName_" + this.assetId
    }
    ,
    UTStaticTifoItemDataDTO
}(UTStaticItemDataDTO))
  , UTStaticVanityItemDataDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(a) {
    function UTStaticVanityItemDataDTO() {
        return a.call(this) || this
    }
    return __extends(UTStaticVanityItemDataDTO, a),
    UTStaticVanityItemDataDTO.prototype.parseDynamicItemData = function(t, e) {
        var i, r, n;
        a.prototype.parseDynamicItemData.call(this, t, e);
        var o = e.assetId;
        if (t.subtype === ItemSubType.VANITY_PLAYER_CELEBRATION && (e.cardassetid ? o = e.cardassetid : e.cardAssetId && (o = e.cardAssetId)),
        this.assetId = null != o ? o : 0,
        this.description = null !== (i = e.description) && void 0 !== i ? i : "",
        t.authenticity && (null === (r = e.name) || void 0 === r ? void 0 : r.startsWith("TeamName_"))) {
            if (0 === t.teamId) {
                var s = e.name.match(/TeamName_+(\d+).*?/i);
                t.teamId = s && 2 <= s.length ? Number(s[1]) : 0
            }
            this.name = "global.teamabbr15." + APP_YEAR + ".team" + t.teamId
        } else
            this.name = null !== (n = e.name) && void 0 !== n ? n : ""
    }
    ,
    UTStaticVanityItemDataDTO
}(UTStaticItemDataDTO))
  , UTItemEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(n) {
    function UTItemEntity(t) {
        var e, i, r = n.call(this) || this;
        return r.onDataUpdated = new EAObservable,
        r.id = t && t.id ? t.id : 0,
        r.definitionId = t && t.definitionId ? t.definitionId : 0,
        r.iconId = t && t.iconId ? t.iconId : 0,
        r.type = t && t.type ? t.type : ItemType.PLAYER,
        r._assetId = t && t.assetId ? t.assetId : ItemCardAssetId.NONE,
        r.subtype = t && t.subtype ? t.subtype : ItemSubType.NONE,
        r.lastSalePrice = t && t.lastSalePrice ? t.lastSalePrice : 0,
        r.discardable = null === (e = null == t ? void 0 : t.discardable) || void 0 === e || e,
        r.discardDate = t && t.discardDate ? t.discardDate : 0,
        r.discardValue = t && t.discardValue ? t.discardValue : 0,
        r.continuationId = t && t.continuationId ? t.continuationId : "",
        r.state = t && t.state ? t.state : ItemState.FREE,
        r.untradeable = !t || !JSUtils.isBoolean(t.untradeable) || t.untradeable,
        r.untradeableCount = t && t.untradeableCount ? t.untradeableCount : 0,
        r.concept = !(!t || !JSUtils.isBoolean(t.concept)) && t.concept,
        r.contract = t && JSUtils.isNumber(t.contract) ? t.contract : -1,
        r.teamId = t && JSUtils.isNumber(t.teamId) ? t.teamId : -1,
        r.leagueId = t && JSUtils.isNumber(t.leagueId) ? t.leagueId : -1,
        r.nationId = t && JSUtils.isNumber(t.nationId) ? t.nationId : -1,
        r.loans = t && JSUtils.isNumber(t.loans) ? t.loans : -1,
        r.injuryType = t && t.injuryType ? t.injuryType : PlayerInjury.NONE,
        r.injuryGames = t && t.injuryGames ? t.injuryGames : 0,
        r.preferredPosition = t && JSUtils.isNumber(t.preferredPosition) ? t.preferredPosition : -1,
        r.possiblePositions = t && t.possiblePositions ? t.possiblePositions : [],
        r._attributes = t && t.attributes ? t.attributes : [0, 0, 0, 0, 0, 0],
        r._lifetimeStats = t && t.lifetimeStats ? t.lifetimeStats : [0, 0, 0, 0],
        r._stats = t && t.stats ? t.stats : [0, 0, 0, 0],
        r._skillMoves = t && JSUtils.isNumber(t.skillMoves) ? t.skillMoves : -1,
        r._weakFoot = t && JSUtils.isNumber(t.weakFoot) ? t.weakFoot : -1,
        r._offensiveWorkRate = t && JSUtils.isNumber(t.offensiveWorkRate) ? t.offensiveWorkRate : -1,
        r._defensiveWorkRate = t && JSUtils.isNumber(t.defensiveWorkRate) ? t.defensiveWorkRate : -1,
        r._preferredFoot = t && JSUtils.isNumber(t.preferredFoot) ? t.preferredFoot : -1,
        r._auction = t && t.auction ? t.auction : new UTAuctionEntity,
        r.duplicateId = t && t.duplicateId ? t.duplicateId : 0,
        r.duplicateItemLoans = t && JSUtils.isNumber(t.duplicateItemLoans) ? t.duplicateItemLoans : -1,
        r.playStyle = t && t.playStyle ? t.playStyle : 0,
        r.loyaltyBonus = t && t.loyaltyBonus ? t.loyaltyBonus : 0,
        r.pile = t && t.pile ? t.pile : ItemPile.ANY,
        r.amount = t && t.amount ? t.amount : 0,
        r.stackCount = t && t.stackCount ? t.stackCount : 0,
        r.rareflag = t && t.rareflag ? t.rareflag : ItemRarity.NONE,
        r.groups = t && t.groups ? t.groups : [],
        r.rating = t && t.rating ? t.rating : 0,
        r.hasLevels = !(!t || !JSUtils.isBoolean(t.hasLevels)) && t.hasLevels,
        r.owners = t && t.owners ? t.owners : 0,
        r.timestamp = t && t.timestamp ? t.timestamp : 0,
        r._itemPriceLimits = t && t.itemPriceLimits ? t.itemPriceLimits : null,
        r._staticData = t && t.staticData ? t.staticData : r._generateStaticData(),
        r._metaData = t && t.metaData ? t.metaData : null,
        r._playerTraits = t && t.playerTraits ? t.playerTraits : null,
        r.ballRestricted = !(!t || !JSUtils.isBoolean(t.ballRestricted)) && t.ballRestricted,
        r.bannerRestricted = !t || !JSUtils.isBoolean(t.bannerRestricted) || t.bannerRestricted,
        r.tifoRestricted = !t || !JSUtils.isBoolean(t.tifoRestricted) || t.tifoRestricted,
        r.guidAssetId = null !== (i = null == t ? void 0 : t.guidAssetId) && void 0 !== i ? i : "",
        r.rankId = t && t.rankId ? t.rankId : -1,
        r.authenticity = !(!t || !t.authenticity) && t.authenticity,
        r._keyAttributes = t && t.keyAttributes ? t.keyAttributes : null,
        r.endTime = t && t.endTime ? t.endTime : -1,
        r.startTime = t && t.startTime ? t.startTime : -1,
        r
    }
    return __extends(UTItemEntity, n),
    Object.defineProperty(UTItemEntity.prototype, "databaseId", {
        get: function() {
            return this.definitionId & ItemIdMask.DATABASE
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTItemEntity.prototype, "revisionId", {
        get: function() {
            return this.definitionId & ItemIdMask.REVISION
        },
        enumerable: !1,
        configurable: !0
    }),
    UTItemEntity.prototype.activate = function(t) {
        if (this.clearAuction(),
        this.isBadge())
            this.state = ItemState.ACTIVE_BADGE;
        else if (this.isBall())
            this.state = ItemState.ACTIVE_BALL;
        else if (this.isKit())
            switch (t) {
            case KitActivationSlot.HOME:
                this.state = ItemState.ACTIVE_HOME_KIT;
                break;
            case KitActivationSlot.AWAY:
                this.state = ItemState.ACTIVE_AWAY_KIT
            }
        else
            this.isStadium() && (this.state = ItemState.ACTIVE_STADIUM)
    }
    ,
    UTItemEntity.prototype.clearAuction = function() {
        this._auction = new UTAuctionEntity
    }
    ,
    UTItemEntity.prototype.getAssetId = function() {
        return this._assetId
    }
    ,
    UTItemEntity.prototype.getItemAssetId = function() {
        var t;
        switch (this.subtype) {
        case ItemSubType.VANITY_TINTED_BANNER:
        case ItemSubType.VANITY_TIFO_BASE:
        case ItemSubType.VANITY_POLE_BANNER:
            return this.definitionId
        }
        if (this.authenticity) {
            if (0 < this.teamId)
                return this.teamId;
            var e = null === (t = this.getStaticData().name) || void 0 === t ? void 0 : t.match(/TeamName_+(\d+).*?/i);
            if (e && 2 === e.length)
                return parseInt(e[1], 10);
            DebugUtils.Assert(!1, "Unable to find teamId on authentic item")
        }
        if (this.type == ItemType.BALL)
            return this._assetId;
        switch (this.subtype) {
        case ItemSubType.VANITY_AUDIO_ANTHEM_MUSIC:
            return UTItemEntity.AUDIO_ANTHEM_ASSET;
        case ItemSubType.VANITY_AUDIO_CROWD_CHANT:
            return UTItemEntity.AUDIO_CHANT_ASSET;
        case ItemSubType.VANITY_AUDIO_GOAL_SCORE:
            return UTItemEntity.AUDIO_GOAL_ASSET;
        case ItemSubType.VANITY_AUDIO_CLUB_NICKNAME:
            return UTItemEntity.AUDIO_NICKNAME_ASSET;
        case ItemSubType.VANITY_PLAYER_CELEBRATION:
        case ItemSubType.VANITY_STADIUM_BASE_PITCH_MOW_PATTERN:
            return this.getStaticData().assetId
        }
        return this.definitionId
    }
    ,
    UTItemEntity.prototype._generateStaticData = function() {
        switch (this.type) {
        case ItemType.PLAYER:
            return new UTStaticPlayerItemDataDTO;
        case ItemType.MANAGER:
            return new UTStaticManagerItemDataDTO;
        case ItemType.BADGE:
            return new UTStaticBadgeItemDataDTO;
        case ItemType.KIT:
            return new UTStaticKitItemDataDTO;
        case ItemType.BALL:
            return new UTStaticBallItemDataDTO;
        case ItemType.STADIUM:
            return new UTStaticStadiumItemDataDTO;
        case ItemType.TRAINING:
            return new UTStaticTrainingItemDataDTO;
        case ItemType.HEALTH:
            return new UTStaticHealingItemDataDTO;
        case ItemType.CONTRACT:
            return new UTStaticContractItemDataDTO;
        case ItemType.MISC:
            return new UTStaticMiscItemDataDTO;
        case ItemType.BANNER:
            return new UTStaticBannerItemDataDTO;
        case ItemType.CELEBRATION:
            return new UTStaticCelebrationItemDataDTO;
        case ItemType.TIFO:
            return new UTStaticTifoItemDataDTO;
        case ItemType.VANITY:
            return new UTStaticVanityItemDataDTO;
        default:
            return new UTStaticItemDataDTO
        }
    }
    ,
    UTItemEntity.prototype.update = function(t) {
        this.duplicateId = t.duplicateId,
        this.lastSalePrice = t.lastSalePrice,
        this.owners = t.owners,
        this.pile = t.pile,
        this.stackCount = t.stackCount,
        this.state = t.state,
        this.timestamp = t.timestamp,
        this.untradeableCount = t.untradeableCount,
        0 !== t.id && this.getAuctionData().compareTo(t.getAuctionData()) && (this.id = t.id),
        (this.isPlayer() || this.isManager()) && (this.contract = t.contract,
        this.loans = t.loans),
        this.isPlayer() && (this.loyaltyBonus = t.loyaltyBonus,
        this.injuryType = t.injuryType,
        this.injuryGames = t.injuryGames,
        this.preferredPosition = t.preferredPosition,
        this.playStyle = t.playStyle),
        this.isManager() && (this.leagueId = t.leagueId),
        this.getAuctionData().update(t.getAuctionData())
    }
    ,
    UTItemEntity.prototype.isValid = function() {
        return (0 !== this.id || 0 !== this.definitionId) && 0 < this.stackCount
    }
    ,
    UTItemEntity.prototype.isStack = function() {
        return 1 < this.stackCount
    }
    ,
    UTItemEntity.prototype.isCustomBrick = function() {
        return !1
    }
    ,
    UTItemEntity.prototype.getItemData = function() {
        return this
    }
    ,
    UTItemEntity.prototype.getTier = function() {
        return this.isValid() ? this.isBronzeRating() ? ItemRatingTier.BRONZE : this.isSilverRating() ? ItemRatingTier.SILVER : ItemRatingTier.GOLD : ItemRatingTier.NONE
    }
    ,
    UTItemEntity.prototype.getSearchType = function() {
        switch (this.type) {
        case ItemType.PLAYER:
            return SearchType.PLAYER;
        case ItemType.MANAGER:
            return SearchType.STAFF;
        case ItemType.BADGE:
        case ItemType.KIT:
            return SearchType.CLUB_INFO;
        case ItemType.STADIUM:
            return SearchType.STADIUM;
        case ItemType.BALL:
            return SearchType.BALL;
        case ItemType.CONTRACT:
        case ItemType.HEALTH:
            return SearchType.CONSUMABLES_DEVELOPMENT;
        case ItemType.TRAINING:
            return SearchType.CONSUMABLES_TRAINING;
        case ItemType.VANITY:
            return SearchType.VANITY;
        default:
            return DebugUtils.Assert(!1, "Unexpected item type. Defaulting to search type 'Any'."),
            SearchType.ANY
        }
    }
    ,
    UTItemEntity.prototype.isInjured = function() {
        return this.isPlayer() && 0 < this.injuryGames
    }
    ,
    UTItemEntity.prototype.isSuspended = function() {
        return this.isPlayer() && 0 < this.getCurrentRedCards()
    }
    ,
    UTItemEntity.prototype.getStaticData = function() {
        return this._staticData
    }
    ,
    UTItemEntity.prototype.setStaticData = function(t) {
        this._staticData = t
    }
    ,
    UTItemEntity.prototype.getAuctionData = function() {
        return this._auction
    }
    ,
    UTItemEntity.prototype.setAuctionData = function(t) {
        this._auction = t
    }
    ,
    UTItemEntity.prototype.getSkillMoves = function() {
        return -1 < this._skillMoves ? this._skillMoves + 1 : this._metaData ? this._metaData.skillMoves + 1 : -1
    }
    ,
    UTItemEntity.prototype.getWeakFoot = function() {
        return -1 < this._weakFoot ? this._weakFoot : this._metaData ? this._metaData.weakFoot : -1
    }
    ,
    UTItemEntity.prototype.getOffensiveWorkRate = function() {
        return -1 < this._offensiveWorkRate ? this._offensiveWorkRate : this._metaData ? this._metaData.offensiveWorkRate : -1
    }
    ,
    UTItemEntity.prototype.getDefensiveWorkRate = function() {
        return -1 < this._defensiveWorkRate ? this._defensiveWorkRate : this._metaData ? this._metaData.defensiveWorkRate : -1
    }
    ,
    UTItemEntity.prototype.isLeftFoot = function() {
        return -1 < this._preferredFoot ? 1 !== this._preferredFoot : !!this._metaData && this._metaData.isLeftFoot
    }
    ,
    UTItemEntity.prototype.getPlayerTraits = function() {
        return this._playerTraits ? this._playerTraits : this._metaData ? this._metaData.playerTraits : null
    }
    ,
    UTItemEntity.prototype.getPlayerSubAttributes = function() {
        return this._keyAttributes ? this._keyAttributes : null
    }
    ,
    UTItemEntity.prototype.getMetaData = function() {
        return this._metaData
    }
    ,
    UTItemEntity.prototype.setMetaData = function(t) {
        DebugUtils.Assert(t instanceof UTPlayerMetaDataDTO, "Expected a PlayerMetaData DTO"),
        DebugUtils.Assert(this.isPlayer(), "Cannot assign player meta data to non-player items"),
        this.isPlayer() && t instanceof UTPlayerMetaDataDTO && (this._metaData = t)
    }
    ,
    UTItemEntity.prototype.isRecoverable = function() {
        return this.isValid() && 0 < this.discardDate
    }
    ,
    UTItemEntity.prototype.isDiscardable = function() {
        return this.isValid() && (this.discardable || this.isDuplicate()) && !this.concept
    }
    ,
    UTItemEntity.prototype.isMovable = function() {
        return !this.isDuplicate() && !this.isDuplicateLoanPlayer() && this.type !== ItemType.MISC
    }
    ,
    UTItemEntity.prototype.isDuplicate = function() {
        return !this.isConsumable() && 0 < this.duplicateId
    }
    ,
    UTItemEntity.prototype.isLoaned = function() {
        return 0 <= this.loans
    }
    ,
    UTItemEntity.prototype.isPlayer = function() {
        return this.type === ItemType.PLAYER
    }
    ,
    UTItemEntity.prototype.isChampionsLeagueItem = function() {
        return this.isPlayer() && (this.rareflag === ItemRarity.CHAMPIONS_COMMON || this.rareflag === ItemRarity.CHAMPIONS_RARE || this.rareflag === ItemRarity.CHAMPIONS_MOTM || this.rareflag === ItemRarity.CHAMPIONS_LIVE || this.rareflag === ItemRarity.CHAMPIONS_SBC || this.rareflag === ItemRarity.CHAMPIONS_TOTT)
    }
    ,
    UTItemEntity.prototype.isLeagueHeroItem = function() {
        return this.isPlayer() && (this.rareflag === ItemRarity.LEAGUE_HERO || this.rareflag === ItemRarity.LEAGUE_HERO_CAPTAIN || this.rareflag === ItemRarity.LEAGUE_HERO_SHAPESHIFTER)
    }
    ,
    UTItemEntity.prototype.isSuperFuttiesItem = function() {
        return this.isPlayer() && this.rareflag === ItemRarity.SUPER_FUTTIES
    }
    ,
    UTItemEntity.prototype.isShapeshifterHeroItem = function() {
        return this.isPlayer() && this.rareflag === ItemRarity.LEAGUE_HERO_SHAPESHIFTER
    }
    ,
    UTItemEntity.prototype.isWorldCupItem = function() {
        return this.isPlayer() && (this.rareflag === ItemRarity.WORLD_CUP_HERO || this.rareflag === ItemRarity.WORLD_CUP_ICON)
    }
    ,
    UTItemEntity.prototype.isManager = function() {
        return this.type === ItemType.MANAGER
    }
    ,
    UTItemEntity.prototype.isPlayerBanned = function() {
        return this.isValid() && this.isPlayer() && (this.isSuspended() || this.contract <= 0)
    }
    ,
    UTItemEntity.prototype.isContractExpired = function() {
        return (this.isPlayer() || this.isManager()) && this.contract <= 0
    }
    ,
    UTItemEntity.prototype.isDuplicateLoanPlayer = function() {
        return this.isValid() && this.isPlayer() && this.isDuplicate() && this.isLoaned()
    }
    ,
    UTItemEntity.prototype.isLimitedTimePlayer = function() {
        return this.isPlayer() && -1 != this.startTime && -1 != this.endTime
    }
    ,
    UTItemEntity.prototype.getAttribute = function(t) {
        return this.getBaseAttribute(t)
    }
    ,
    UTItemEntity.prototype.getBaseAttribute = function(t) {
        return this._attributes[t] || 0
    }
    ,
    UTItemEntity.prototype.getAttributes = function() {
        return this.isPlayer() ? this._attributes.slice() : []
    }
    ,
    UTItemEntity.prototype.getStats = function() {
        return this.isPlayer() ? this._stats.slice() : []
    }
    ,
    UTItemEntity.prototype.getGamesPlayed = function() {
        return this.isPlayer() ? this._stats[0] : 0
    }
    ,
    UTItemEntity.prototype.getGoals = function() {
        return this.isPlayer() ? this._stats[1] : 0
    }
    ,
    UTItemEntity.prototype.getYellowCards = function() {
        return this.isPlayer() ? this._stats[2] : 0
    }
    ,
    UTItemEntity.prototype.getRedCards = function() {
        return this.isPlayer() ? this._stats[3] : 0
    }
    ,
    UTItemEntity.prototype.getCurrentRedCards = function() {
        return this.isPlayer() ? this._stats[4] : 0
    }
    ,
    UTItemEntity.prototype.getLifetimeStats = function() {
        return this.isPlayer() ? this._lifetimeStats.slice() : []
    }
    ,
    UTItemEntity.prototype.getLoyaltyRequiredGames = function() {
        return 10
    }
    ,
    UTItemEntity.prototype.getTotalGamesPlayed = function() {
        return this.isPlayer() ? this._lifetimeStats[0] : 0
    }
    ,
    UTItemEntity.prototype.getTotalGoals = function() {
        return this.isPlayer() ? this._lifetimeStats[1] : 0
    }
    ,
    UTItemEntity.prototype.getTotalYellowCards = function() {
        return this.isPlayer() ? this._lifetimeStats[2] : 0
    }
    ,
    UTItemEntity.prototype.getTotalRedCards = function() {
        return this.isPlayer() ? this._lifetimeStats[3] : 0
    }
    ,
    UTItemEntity.prototype.isGK = function() {
        return 0 === this.preferredPosition
    }
    ,
    UTItemEntity.prototype.isContract = function() {
        return this.type === ItemType.CONTRACT
    }
    ,
    UTItemEntity.prototype.isPlayerContract = function() {
        return this.isContract() && this._assetId === ItemCardAssetId.CONTRACT_PLAYER
    }
    ,
    UTItemEntity.prototype.isManagerContract = function() {
        return this.isContract() && this._assetId === ItemCardAssetId.CONTRACT_MANAGER
    }
    ,
    UTItemEntity.prototype.isTraining = function() {
        return this.type === ItemType.TRAINING
    }
    ,
    UTItemEntity.prototype.isPlayerPositionModifier = function() {
        return this.isTraining() && this._assetId === ItemCardAssetId.POSITION_MODIFIER
    }
    ,
    UTItemEntity.prototype.isStyleModifier = function() {
        return this.isTraining() && (this._assetId === ItemCardAssetId.PLAYSTYLE_PLAYER || this._assetId === ItemCardAssetId.PLAYSTYLE_GK)
    }
    ,
    UTItemEntity.prototype.isPlayerStyleModifier = function() {
        return this.isTraining() && this._assetId === ItemCardAssetId.PLAYSTYLE_PLAYER
    }
    ,
    UTItemEntity.prototype.isGKStyleModifier = function() {
        return this.isTraining() && this._assetId === ItemCardAssetId.PLAYSTYLE_GK
    }
    ,
    UTItemEntity.prototype.isManagerLeagueModifier = function() {
        return this.isTraining() && this._assetId === ItemCardAssetId.MANAGER_LEAGUE
    }
    ,
    UTItemEntity.prototype.isManagerConsumable = function() {
        return this.isManagerLeagueModifier() || this.isManagerContract()
    }
    ,
    UTItemEntity.prototype.isHealth = function() {
        return this.type === ItemType.HEALTH
    }
    ,
    UTItemEntity.prototype.isInjuryHealing = function() {
        return this.isHealth() && this._assetId === ItemCardAssetId.HEALING
    }
    ,
    UTItemEntity.prototype.isConsumable = function() {
        return this.isContract() || this.isTraining() || this.isHealth()
    }
    ,
    UTItemEntity.prototype.isClubConsumable = function() {
        return this.isConsumable() && this.pile === ItemPile.CLUB
    }
    ,
    UTItemEntity.prototype.isBadge = function() {
        return this.type === ItemType.BADGE
    }
    ,
    UTItemEntity.prototype.isBall = function() {
        return this.type === ItemType.BALL
    }
    ,
    UTItemEntity.prototype.isKit = function() {
        return this.type === ItemType.KIT
    }
    ,
    UTItemEntity.prototype.isStadium = function() {
        return this.type === ItemType.STADIUM
    }
    ,
    UTItemEntity.prototype.isStadiumTierUnlock = function() {
        return this.type === ItemType.MYSTADIUM_TIER
    }
    ,
    UTItemEntity.prototype.isVanityItem = function() {
        return this.type === ItemType.VANITY
    }
    ,
    UTItemEntity.prototype.isClubItem = function() {
        return this.isBadge() || this.isBall() || this.isKit() || this.isStadium() || this.isVanityItem()
    }
    ,
    UTItemEntity.prototype.isActiveBall = function() {
        return this.isBall() && this.state === ItemState.ACTIVE_BALL
    }
    ,
    UTItemEntity.prototype.isActiveBadge = function() {
        return this.isBadge() && this.state === ItemState.ACTIVE_BADGE
    }
    ,
    UTItemEntity.prototype.isActiveAwayKit = function() {
        return this.isKit() && this.state === ItemState.ACTIVE_AWAY_KIT
    }
    ,
    UTItemEntity.prototype.isActiveHomeKit = function() {
        return this.isKit() && this.state === ItemState.ACTIVE_HOME_KIT
    }
    ,
    UTItemEntity.prototype.isActiveStadium = function() {
        return this.isStadium() && this.state === ItemState.ACTIVE_STADIUM
    }
    ,
    UTItemEntity.prototype.isActiveClubItem = function() {
        return this.isActiveBall() || this.isActiveBadge() || this.isActiveAwayKit() || this.isActiveHomeKit() || this.isActiveStadium()
    }
    ,
    UTItemEntity.prototype.isMiscItem = function() {
        return this.type === ItemType.MISC
    }
    ,
    UTItemEntity.prototype.isFreeCoins = function() {
        return this.isMiscItem() && this.subtype === ItemSubType.FREE_COINS
    }
    ,
    UTItemEntity.prototype.isCoinBoost = function() {
        return this.isMiscItem() && this.subtype === ItemSubType.COIN_BOOST
    }
    ,
    UTItemEntity.prototype.isFreePack = function() {
        return this.isMiscItem() && this.subtype === ItemSubType.FREE_PACK
    }
    ,
    UTItemEntity.prototype.isDraftToken = function() {
        return this.isMiscItem() && this.subtype === ItemSubType.DRAFT_TOKEN
    }
    ,
    UTItemEntity.prototype.isPlayerPickItem = function() {
        return this.isMiscItem() && this.subtype === ItemSubType.PLAYER_PICK_ITEM
    }
    ,
    UTItemEntity.prototype.isCharityItem = function() {
        return this.databaseId === UTItemEntity.DANNY_MILLER_CHARITY_ID || this.databaseId === UTItemEntity.KENTON_CHARITY_ID
    }
    ,
    UTItemEntity.prototype.isCommon = function() {
        return this.rareflag === ItemRarity.NONE
    }
    ,
    UTItemEntity.prototype.isRare = function() {
        return this.rareflag === ItemRarity.RARE
    }
    ,
    UTItemEntity.prototype.isSpecial = function() {
        return !this.isCommon() && !this.isRare()
    }
    ,
    UTItemEntity.prototype.isLegend = function() {
        return this.rareflag === ItemRarity.ICON || this.rareflag === ItemRarity.PRIMEICON || this.rareflag === ItemRarity.WORLD_CUP_ICON
    }
    ,
    UTItemEntity.prototype.isMyStadium = function() {
        return this.definitionId === UTItemEntity.CUSTOM_STADIUM_TIER_1 || this.definitionId === UTItemEntity.CUSTOM_STADIUM_TIER_2 || this.definitionId === UTItemEntity.CUSTOM_STADIUM_TIER_3
    }
    ,
    UTItemEntity.isStoryMode = function(t) {
        return UTItemEntity.isAlex(t) || UTItemEntity.isJim(t) || UTItemEntity.isDanny(t)
    }
    ,
    UTItemEntity.isAlex = function(t) {
        return t >= ALEX_HUNTER_MIN_ID && t <= ALEX_HUNTER_MAX_ID
    }
    ,
    UTItemEntity.isJim = function(t) {
        return t >= JIM_HUNTER_MIN_ID && t <= JIM_HUNTER_MAX_ID
    }
    ,
    UTItemEntity.isDanny = function(t) {
        return t >= DANNY_WILLIAMS_MIN_ID && t <= DANNY_WILLIAMS_MAX_ID
    }
    ,
    UTItemEntity.prototype.isBeckham = function() {
        return this.iconId === UTItemEntity.DAVID_BECKHAM_ICON_ID || this.databaseId === UTItemEntity.DAVID_BECKHAM_ID
    }
    ,
    UTItemEntity.prototype.belongsToGroup = function(t) {
        return -1 < this.groups.indexOf(t)
    }
    ,
    UTItemEntity.prototype.hasRank = function() {
        return 0 <= this.rankId
    }
    ,
    UTItemEntity.prototype.hasQualityTiers = function() {
        return this.hasLevels
    }
    ,
    UTItemEntity.prototype.isBronzeRating = function() {
        return this.rating <= 64
    }
    ,
    UTItemEntity.prototype.isSilverRating = function() {
        return this.rating <= 74 && 64 < this.rating
    }
    ,
    UTItemEntity.prototype.isGoldRating = function() {
        return 74 < this.rating
    }
    ,
    UTItemEntity.prototype.prefersDefensePosition = function() {
        return this.isPlayer() && this.preferredPosition >= PlayerPosition.RWB && this.preferredPosition <= PlayerPosition.LWB
    }
    ,
    UTItemEntity.prototype.prefersMidfieldPosition = function() {
        return this.isPlayer() && this.preferredPosition >= PlayerPosition.RDM && this.preferredPosition <= PlayerPosition.LAM
    }
    ,
    UTItemEntity.prototype.prefersAttackerPosition = function() {
        return this.isPlayer() && this.preferredPosition >= PlayerPosition.RF
    }
    ,
    UTItemEntity.prototype.compareTo = function(t) {
        var e = this.getAuctionData()
          , i = t.getAuctionData();
        return e.isValid() && i.isValid() ? e.compareTo(i) : this.id === t.id
    }
    ,
    UTItemEntity.prototype.compareResourceTo = function(t, e) {
        return e ? this.definitionId === t.definitionId : this.isLegend() && t.isLegend() && 0 < this.iconId && 0 < t.iconId ? this.iconId === t.iconId : this.isBeckham() || t.isBeckham() ? this.isBeckham() && t.isBeckham() : this.databaseId === t.databaseId
    }
    ,
    UTItemEntity.prototype.setItemPriceLimits = function(t) {
        this._itemPriceLimits = t
    }
    ,
    UTItemEntity.prototype.hasPriceLimits = function() {
        return null !== this._itemPriceLimits
    }
    ,
    UTItemEntity.prototype.getPriceLimits = function() {
        return this._itemPriceLimits
    }
    ,
    UTItemEntity.prototype.increaseStackCount = function(t) {
        return void 0 === t && (t = 1),
        this.isClubConsumable() && (this.stackCount = this.stackCount + t,
        this._updateUntradeableState()),
        this.stackCount
    }
    ,
    UTItemEntity.prototype.decreaseStackCount = function(t) {
        if (void 0 === t && (t = 1),
        !this.isClubConsumable())
            return this.stackCount;
        if (this.stackCount >= t) {
            var e = this.stackCount - this.untradeableCount;
            0 < this.untradeableCount && e < t && (this.untradeableCount = this.untradeableCount + (e - t)),
            this.stackCount -= t
        } else
            this.stackCount = 0,
            this.untradeable && (this.untradeableCount = 0);
        return this._updateUntradeableState(),
        this.untradeable && (this.discardValue = 0),
        this.stackCount
    }
    ,
    UTItemEntity.prototype._updateUntradeableState = function() {
        this.untradeable = 0 < this.untradeableCount && this.stackCount <= this.untradeableCount
    }
    ,
    UTItemEntity.prototype.compareDream = function(t) {
        return this.databaseId === t.databaseId && this.concept !== t.concept
    }
    ,
    UTItemEntity.prototype.compareType = function(t) {
        return this.type === t.type
    }
    ,
    UTItemEntity.prototype.canApplyTo = function(t) {
        if (!this.isConsumable() || t.isConsumable())
            return !1;
        this.getStaticData();
        return this.isPlayerStyleModifier() ? t.isPlayer() && !t.isGK() && t.playStyle !== this.subtype : this.isGKStyleModifier() ? t.isGK() && t.playStyle !== this.subtype : this.isManagerLeagueModifier() ? t.isManager() && t.leagueId !== this.leagueId : this.isPlayerContract() ? t.isPlayer() && !t.isLoaned() && t.contract < 99 : this.isManagerContract() ? t.isManager() && t.contract < 99 : this.isPlayerPositionModifier() ? t.isPlayer() && 1 < t.possiblePositions.length : !!this.isInjuryHealing() && (t.isInjured() && this._canApplyToInjury())
    }
    ,
    UTItemEntity.prototype._canApplyToInjury = function() {
        return this.subtype === ItemSubType.HEALING_ALL
    }
    ,
    UTItemEntity.DAVID_BECKHAM_ID = 259431,
    UTItemEntity.DAVID_BECKHAM_ICON_ID = 104,
    UTItemEntity.DANNY_MILLER_CHARITY_ID = 227904,
    UTItemEntity.KENTON_CHARITY_ID = 235430,
    UTItemEntity.CUSTOM_STADIUM_TIER_1 = 6200443,
    UTItemEntity.CUSTOM_STADIUM_TIER_2 = 6200444,
    UTItemEntity.CUSTOM_STADIUM_TIER_3 = 6200445,
    UTItemEntity.AUDIO_ANTHEM_ASSET = 6871e3,
    UTItemEntity.AUDIO_GOAL_ASSET = 6872e3,
    UTItemEntity.AUDIO_NICKNAME_ASSET = 6873e3,
    UTItemEntity.AUDIO_CHANT_ASSET = 6874e3,
    UTItemEntity.DEFAULT_ASSET_ID = 0,
    UTItemEntity.DEFAULT_BALL_ASSET_ID = 1e3,
    UTItemEntity.DEFAULT_MOWPATTERN_ASSET_ID = 1e3,
    UTItemEntity.DEFAULT_BRONZE_ASSET_ID = 20000001,
    UTItemEntity.DEFAULT_SILVER_ASSET_ID = 20000002,
    UTItemEntity.DEFAULT_GOLD_ASSET_ID = 20000003,
    UTItemEntity
}(EAObject))
  , UTCustomBrickItemEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTCustomBrickItemEntity(t) {
        return e.call(this, t) || this
    }
    return __extends(UTCustomBrickItemEntity, e),
    UTCustomBrickItemEntity.prototype.activate = function(t) {}
    ,
    UTCustomBrickItemEntity.prototype.clearAuction = function() {}
    ,
    UTCustomBrickItemEntity.prototype._generateStaticData = function() {
        return new UTStaticItemDataDTO
    }
    ,
    UTCustomBrickItemEntity.prototype.update = function(t) {}
    ,
    UTCustomBrickItemEntity.prototype.isValid = function() {
        return !1
    }
    ,
    UTCustomBrickItemEntity.prototype.isCustomBrick = function() {
        return !0
    }
    ,
    UTCustomBrickItemEntity.prototype.isInjured = function() {
        return !1
    }
    ,
    UTCustomBrickItemEntity.prototype.isSuspended = function() {
        return !1
    }
    ,
    UTCustomBrickItemEntity.prototype.setStaticData = function(t) {}
    ,
    UTCustomBrickItemEntity.prototype.setAuctionData = function(t) {}
    ,
    UTCustomBrickItemEntity.prototype.setMetaData = function(t) {}
    ,
    UTCustomBrickItemEntity.prototype.isMovable = function() {
        return !1
    }
    ,
    UTCustomBrickItemEntity.prototype.getAttribute = function(t) {
        return 0
    }
    ,
    UTCustomBrickItemEntity.prototype.getBaseAttribute = function(t) {
        return 0
    }
    ,
    UTCustomBrickItemEntity.prototype.getAttributes = function() {
        return []
    }
    ,
    UTCustomBrickItemEntity.prototype.getStats = function() {
        return []
    }
    ,
    UTCustomBrickItemEntity.prototype.hasQualityTiers = function() {
        return !1
    }
    ,
    UTCustomBrickItemEntity.prototype.compareTo = function(t) {
        return !1
    }
    ,
    UTCustomBrickItemEntity.prototype.compareResourceTo = function(t, e) {
        return !1
    }
    ,
    UTCustomBrickItemEntity.prototype.setItemPriceLimits = function(t) {}
    ,
    UTCustomBrickItemEntity.prototype.increaseStackCount = function() {
        return 0
    }
    ,
    UTCustomBrickItemEntity.prototype.decreaseStackCount = function() {
        return 0
    }
    ,
    UTCustomBrickItemEntity.prototype._updateUntradeableState = function() {}
    ,
    UTCustomBrickItemEntity.prototype.compareDream = function(t) {
        return !1
    }
    ,
    UTCustomBrickItemEntity.prototype.compareType = function(t) {
        return !1
    }
    ,
    UTCustomBrickItemEntity.prototype.canApplyTo = function(t) {
        return !1
    }
    ,
    UTCustomBrickItemEntity.prototype._canApplyToInjury = function() {
        return !1
    }
    ,
    UTCustomBrickItemEntity
}(UTItemEntity))
  , UTNullItemEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTNullItemEntity() {
        return t.call(this, {
            type: ItemType.NONE
        }) || this
    }
    return __extends(UTNullItemEntity, t),
    UTNullItemEntity.prototype.activate = function(t) {}
    ,
    UTNullItemEntity.prototype.clearAuction = function() {}
    ,
    UTNullItemEntity.prototype._generateStaticData = function() {
        return new UTStaticItemDataDTO
    }
    ,
    UTNullItemEntity.prototype.update = function(t) {}
    ,
    UTNullItemEntity.prototype.isValid = function() {
        return !1
    }
    ,
    UTNullItemEntity.prototype.isInjured = function() {
        return !1
    }
    ,
    UTNullItemEntity.prototype.isSuspended = function() {
        return !1
    }
    ,
    UTNullItemEntity.prototype.setStaticData = function(t) {}
    ,
    UTNullItemEntity.prototype.setAuctionData = function(t) {}
    ,
    UTNullItemEntity.prototype.setMetaData = function(t) {}
    ,
    UTNullItemEntity.prototype.isMovable = function() {
        return !1
    }
    ,
    UTNullItemEntity.prototype.getAttribute = function(t) {
        return 0
    }
    ,
    UTNullItemEntity.prototype.getBaseAttribute = function(t) {
        return 0
    }
    ,
    UTNullItemEntity.prototype.getAttributes = function() {
        return []
    }
    ,
    UTNullItemEntity.prototype.getStats = function() {
        return []
    }
    ,
    UTNullItemEntity.prototype.hasQualityTiers = function() {
        return !1
    }
    ,
    UTNullItemEntity.prototype.compareTo = function(t) {
        return !1
    }
    ,
    UTNullItemEntity.prototype.compareResourceTo = function(t, e) {
        return !1
    }
    ,
    UTNullItemEntity.prototype.setItemPriceLimits = function(t) {}
    ,
    UTNullItemEntity.prototype.increaseStackCount = function() {
        return 0
    }
    ,
    UTNullItemEntity.prototype.decreaseStackCount = function() {
        return 0
    }
    ,
    UTNullItemEntity.prototype._updateUntradeableState = function() {}
    ,
    UTNullItemEntity.prototype.compareDream = function(t) {
        return !1
    }
    ,
    UTNullItemEntity.prototype.compareType = function(t) {
        return !1
    }
    ,
    UTNullItemEntity.prototype.canApplyTo = function(t) {
        return !1
    }
    ,
    UTNullItemEntity.prototype._canApplyToInjury = function() {
        return !1
    }
    ,
    UTNullItemEntity
}(UTItemEntity))
  , UTKeyAttributeRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTKeyAttributeRepository() {
        var t = e.call(this) || this;
        return t.expiryTimestamp = 0,
        t.unsavedTimeSpent = 0,
        t.keyAttributes = new EAHashTable,
        t
    }
    return __extends(UTKeyAttributeRepository, e),
    UTKeyAttributeRepository.prototype.reset = function() {
        this.expiryTimestamp = 0,
        this.unsavedTimeSpent = 0,
        this.keyAttributes.clear()
    }
    ,
    UTKeyAttributeRepository.prototype.values = function() {
        return this.keyAttributes.values()
    }
    ,
    UTKeyAttributeRepository.prototype.isCacheExpired = function() {
        return this.expiryTimestamp < Date.now()
    }
    ,
    UTKeyAttributeRepository.prototype.getKeyAttributes = function(t) {
        return this.keyAttributes.get(t)
    }
    ,
    UTKeyAttributeRepository.prototype.add = function(t) {
        var e = this;
        t.forEach(function(t) {
            return e.setAttributes(t.getKey(), t)
        })
    }
    ,
    UTKeyAttributeRepository.prototype.setAttributes = function(t, e) {
        this.keyAttributes.set(t, e)
    }
    ,
    UTKeyAttributeRepository.prototype.setCacheTimestamp = function(t, e) {
        this.expiryTimestamp = t + (JSUtils.isNumber(e) ? e * MS_PER_SECOND : 6e5)
    }
    ,
    UTKeyAttributeRepository
}(EAHashTable));
NamespaceManager.Register("repositories"),
repositories.KeyAttributes = new UTKeyAttributeRepository;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTItemEntityFactory = function(e) {
    function UTItemEntityFactory() {
        var t = e.call(this) || this;
        return t.auctionFactory = new UTAuctionEntityFactory,
        t
    }
    return __extends(UTItemEntityFactory, e),
    UTItemEntityFactory.prototype.generateTifoTeamId = function(t) {
        return t - 7e6
    }
    ,
    UTItemEntityFactory.prototype.generateSubtype = function(t) {
        switch (t) {
        case ItemType.PLAYER:
            return ItemSubType.PLAYER;
        case ItemType.MANAGER:
            return ItemSubType.MANAGER
        }
        return DebugUtils.Assert(!1, "Unsupported item type for generating sub types: " + t),
        ItemSubType.NONE
    }
    ,
    UTItemEntityFactory.prototype.convertCardAssetIdToItemType = function(t) {
        switch (t) {
        case ItemCardAssetId.CONTRACT_MANAGER:
        case ItemCardAssetId.CONTRACT_PLAYER:
            return ItemType.CONTRACT;
        case ItemCardAssetId.HEALING:
            return ItemType.HEALTH;
        case ItemCardAssetId.MANAGER_LEAGUE:
        case ItemCardAssetId.PLAYSTYLE_GK:
        case ItemCardAssetId.PLAYSTYLE_PLAYER:
        case ItemCardAssetId.POSITION_MODIFIER:
            return ItemType.TRAINING
        }
        return DebugUtils.Assert(!1, "Unknown cardassetid: " + t),
        ItemType.NONE
    }
    ,
    UTItemEntityFactory.prototype.normalizePayload = function(t, e) {
        if (void 0 === e && (e = !0),
        JSUtils.isNumber(t.rareFlag) && (t.rareflag = t.rareFlag,
        delete t.rareFlag),
        JSUtils.isNumber(t.teamid) && (t.teamId = t.teamid,
        delete t.teamid),
        !JSUtils.isBoolean(e) || e) {
            if (t.teamId && (!JSUtils.isNumber(t.leagueId) || t.leagueId <= 0)) {
                var i = repositories.TeamConfig.getTeam(t.teamId);
                t.leagueId = i ? i.league : -1
            }
            if (t.leagueId && (!JSUtils.isNumber(t.nation) || t.nation <= 0)) {
                var r = repositories.TeamConfig.getLeague(t.leagueId);
                t.nation = r ? r.nation : -1
            }
        }
        return t
    }
    ,
    UTItemEntityFactory.prototype.generateItemConstructorOptions = function(t) {
        var e, i, r, n, o = {};
        if (o.id = t.id,
        o.definitionId = t.resourceId,
        o.type = t.itemType,
        o.assetId = t.cardassetid,
        o.subtype = t.cardsubtypeid || this.generateSubtype(t.itemType),
        o.untradeable = t.untradeable,
        o.lastSalePrice = t.lastSalePrice,
        o.discardValue = t.discardValue,
        o.state = t.itemState,
        o.pile = t.pile,
        o.amount = t.amount,
        o.rating = JSUtils.isString(t.rating) ? parseInt(t.rating, 10) : t.rating,
        o.teamId = t.teamId || 0,
        o.leagueId = t.leagueId || 0,
        o.nationId = t.nation || 0,
        o.rareflag = t.rareflag,
        o.groups = t.groups,
        o.owners = t.owners,
        o.timestamp = t.timestamp,
        o.guidAssetId = t.guidAssetId,
        o.rankId = t.rankId,
        o.startTime = t.startTime,
        o.endTime = t.endTime,
        o.discardable = JSUtils.isBoolean(t.undiscardable) ? !t.undiscardable : t.itemType !== ItemType.MISC,
        (o.type === ItemType.KIT || o.type === ItemType.BADGE) && o.nationId < 1 && (o.nationId = 75),
        o.type === ItemType.STADIUM ? (o.ballRestricted = t.ballRestricted,
        o.bannerRestricted = t.bannerRestricted,
        o.tifoRestricted = t.tifoRestricted,
        t.tifoSupportType !== TifoSupportType.PLAYER && t.tifoSupportType !== TifoSupportType.BOTH && (o.tifoRestricted = !0)) : o.type === ItemType.VANITY && (o.authenticity = t.authenticity,
        t.authenticity && (o.subtype === ItemSubType.VANITY_TIFO_BASE ? o.teamId = this.generateTifoTeamId(t.resourceId) : o.subtype === ItemSubType.VANITY_STADIUM_THEME && (o.teamId = t.assetId))),
        o.stackCount = 1,
        o.untradeableCount = o.untradeable ? 1 : 0,
        o.type !== ItemType.PLAYER && o.type !== ItemType.MANAGER || (o.contract = t.contract,
        o.concept = t.dream,
        JSUtils.isNumber(t.loans) && 0 < t.loans && (o.loans = t.loans)),
        o.type === ItemType.PLAYER) {
            o.concept ? o.loyaltyBonus = services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.SQUAD_CONCEPT_LOYALTY_BONUS_ENABLED) ? 1 : 0 : o.loyaltyBonus = t.loyaltyBonus,
            o.injuryType = t.injuryType,
            o.injuryGames = t.injuryGames;
            var s = repositories.Squad.getPositionByUniqueName(t.preferredPosition);
            o.preferredPosition = null !== (e = null == s ? void 0 : s.id) && void 0 !== e ? e : 0,
            o.possiblePositions = null === (i = t.possiblePositions) || void 0 === i ? void 0 : i.map(function(t) {
                var e, i;
                return null !== (i = null === (e = repositories.Squad.getPositionByUniqueName(t)) || void 0 === e ? void 0 : e.id) && void 0 !== i ? i : 0
            });
            var a = t.preferredPosition === PlayerPosition[PlayerPosition.GK];
            if (o.playStyle = t.playStyle || (a ? ItemSubType.TRAINING_PLAYERSTYLE_GOALKEEPER_5 : DEFAULT_PLAYSTYLE_ID),
            o.attributes = t.attributeArray,
            o.lifetimeStats = t.lifetimeStatsArray,
            o.stats = t.statsArray,
            o.rareflag === ItemRarity.ICON || o.rareflag === ItemRarity.PRIMEICON || o.rareflag === ItemRarity.WORLD_CUP_ICON) {
                var l = repositories.PlayerIcon.get(o.definitionId & ItemIdMask.DATABASE);
                l && (o.iconId = l.iconId)
            }
            o.skillMoves = t.skillmoves,
            o.weakFoot = t.weakfootabilitytypecode,
            o.offensiveWorkRate = t.attackingworkrate,
            o.defensiveWorkRate = t.defensiveworkrate,
            o.preferredFoot = t.preferredfoot;
            var c = repositories.PlayerMeta.get(o.definitionId & ItemIdMask.DATABASE);
            if (c) {
                var u = [];
                if (o.metaData = c,
                o.guidAssetId && repositories.KeyAttributes.getKeyAttributes(o.guidAssetId))
                    if ((u = null === (r = repositories.KeyAttributes.getKeyAttributes(o.guidAssetId)) || void 0 === r ? void 0 : r.keyAttributes) && 0 < u.length) {
                        var p = o.metaData.attributes.filter(function(t) {
                            return !(null == u ? void 0 : u.includes(t.type))
                        }).sort(function(t, e) {
                            return e.value() - t.value()
                        })
                          , h = [];
                        u.forEach(function(t) {
                            c.attributes[t] ? h.push(new UTPlayerSubAttributeVO(t,c.attributes[t].rating,!0)) : t === ItemSubAttribute.workrate ? h.push(new UTPlayerSubAttributeVO(t,0,!0)) : t === ItemSubAttribute.weakfoot ? h.push(new UTPlayerSubAttributeVO(t,c.weakFoot,!0)) : t === ItemSubAttribute.skillmove && h.push(new UTPlayerSubAttributeVO(t,c.skillMoves,!0))
                        }),
                        o.keyAttributes = h.concat(p).slice(0, 5)
                    } else
                        o.keyAttributes = this.defaultSubAttributes(u, o.preferredPosition, c);
                else if ((u = null === (n = repositories.KeyAttributes.getKeyAttributes(o.preferredPosition.toString())) || void 0 === n ? void 0 : n.keyAttributes) && 0 < u.length) {
                    p = u.map(function(t) {
                        return new UTPlayerSubAttributeVO(t,c.attributes[t].rating)
                    });
                    o.keyAttributes = p
                }
            }
        }
        return JSUtils.isNumber(t.marketDataMinPrice) && JSUtils.isNumber(t.marketDataMaxPrice) && (o.itemPriceLimits = new UTValueBandVO(t.marketDataMinPrice,t.marketDataMaxPrice)),
        o
    }
    ,
    UTItemEntityFactory.prototype.generateConsumableItemConstructorOptions = function(t) {
        DebugUtils.Assert(JSUtils.isValid(t.item), "Expected item data to exist in consumable item data payload.");
        var e = t.item ? this.generateItemConstructorOptions(t.item) : {};
        return e.discardValue = t.discardValue,
        e.stackCount = t.count,
        e.definitionId = t.resourceId,
        e.untradeableCount = t.untradeableCount,
        e.untradeable = 0 < e.untradeableCount && e.stackCount <= e.untradeableCount,
        e
    }
    ,
    UTItemEntityFactory.prototype.createItem = function(t) {
        if (!t)
            return new UTNullItemEntity;
        if (t.itemType || (t.itemType = t.cardassetid ? this.convertCardAssetIdToItemType(t.cardassetid) : ItemType.PLAYER),
        (t = this.normalizePayload(t)).itemType === ItemType.PLAYER) {
            var e = repositories.Item.getStaticDataByDefId(t.resourceId & ItemIdMask.DATABASE);
            e && (t.firstName = e.firstName,
            t.lastName = e.lastName,
            t.knownAs = e.commonName || BLANK_STR)
        }
        var i = new UTItemEntity(this.generateItemConstructorOptions(t));
        i.getStaticData().parseDynamicItemData(i, t);
        var r = services.Configuration.getItemRarity(i);
        return r && (i.hasLevels = r.levels),
        i
    }
    ,
    UTItemEntityFactory.prototype.createPreviewItem = function(t) {
        var e = this.createItem(t);
        return e.contract = 0 === e.contract && 0 < e.loans ? e.loans : e.contract,
        e
    }
    ,
    UTItemEntityFactory.prototype.createConsumable = function(t) {
        if (!t || !t.item)
            return new UTNullItemEntity;
        t.item.itemType || (t.item.itemType = t.item.cardassetid ? this.convertCardAssetIdToItemType(t.item.cardassetid) : ItemType.PLAYER),
        t.item = this.normalizePayload(t.item);
        var e = new UTItemEntity(this.generateConsumableItemConstructorOptions(t));
        e.getStaticData().parseDynamicItemData(e, t.item);
        var i = services.Configuration.getItemRarity(e);
        return i && (e.hasLevels = i.levels),
        e
    }
    ,
    UTItemEntityFactory.prototype.createVanityItem = function(t) {
        if (!t)
            return new UTNullItemEntity;
        var e = {
            assetId: t.assetId,
            authenticity: t.authenticity,
            id: t.id,
            rareflag: t.rareflag ? t.rareflag : 0,
            rating: t.rating ? t.rating : 0,
            definitionId: t.resourceId,
            subtype: t.cardSubTypeId,
            stackCount: 1,
            type: t.itemType,
            teamId: t.teamId ? t.teamId : 0
        };
        e.type === ItemType.VANITY && (e.authenticity = t.authenticity,
        t.authenticity && (e.subtype === ItemSubType.VANITY_TIFO_BASE ? e.teamId = this.generateTifoTeamId(t.resourceId) : e.subtype === ItemSubType.VANITY_STADIUM_THEME && (e.teamId = t.assetId)));
        var i = new UTItemEntity(e);
        i.getStaticData().parseDynamicItemData(i, t);
        var r = services.Configuration.getItemRarity(i);
        return r && (i.hasLevels = r.levels),
        i
    }
    ,
    UTItemEntityFactory.prototype.createCustomBrickItem = function(t) {
        return t ? (t = this.normalizePayload(t, !1),
        new UTCustomBrickItemEntity(this.generateItemConstructorOptions(t))) : new UTNullItemEntity
    }
    ,
    UTItemEntityFactory.prototype.generateItemsFromItemData = function(t, r) {
        var n = this;
        return t.map(function(t) {
            var e = function(t) {
                return JSUtils.isValid(t.count)
            }(t) ? n.createConsumable(t) : n.createItem(t);
            if (r) {
                var i = JSUtils.find(r, function(t) {
                    return t.itemId === e.id
                });
                i && (e.duplicateId = i.duplicateItemId,
                i.duplicateItemLoans && (e.duplicateItemLoans = i.duplicateItemLoans))
            }
            return e
        }, this)
    }
    ,
    UTItemEntityFactory.prototype.generateItemsFromAuctionData = function(t, n) {
        var o = this;
        return t.map(function(t) {
            var e = o.createItem(t.itemData)
              , i = o.auctionFactory.createFromUtasObject(t);
            if (e.setAuctionData(i),
            0 === e.id && (e.id = "Trade" + i.tradeId),
            !e.isConsumable() && n) {
                var r = JSUtils.find(n, function(t) {
                    return t.itemId === e.id
                });
                r && (e.duplicateId = r.duplicateItemId)
            }
            return e
        }, this)
    }
    ,
    UTItemEntityFactory.prototype.generateItemsFromDiscardData = function(t) {
        var i = this;
        return t.map(function(t) {
            var e = i.generateItemsFromItemData([t.itemData])[0];
            return e.discardDate = t.discardedDate,
            e.continuationId = t.key,
            e
        })
    }
    ,
    UTItemEntityFactory.prototype.defaultSubAttributes = function(t, e, i) {
        var r, n = [];
        if (t = null === (r = repositories.KeyAttributes.getKeyAttributes(e.toString())) || void 0 === r ? void 0 : r.keyAttributes)
            for (var o = 0; o < t.length; o++)
                n.push(new UTPlayerSubAttributeVO(t[o],i.attributes[t[o]].rating,!1));
        return n
    }
    ,
    UTItemEntityFactory
}(EAObject);
NamespaceManager.Register("factories"),
factories.Item = new UTItemEntityFactory;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTRewardSetEntity = function(i) {
    function UTRewardSetEntity(t) {
        var e = i.call(this) || this;
        return e.default = t.default,
        e.hidden = t.hidden,
        e.id = t.id,
        e.rewards = t.rewards,
        e
    }
    return __extends(UTRewardSetEntity, i),
    Object.defineProperty(UTRewardSetEntity.prototype, "awards", {
        get: function() {
            return this.rewards
        },
        enumerable: !1,
        configurable: !0
    }),
    UTRewardSetEntity
}(EAObject)
  , UTRewardFactory = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTRewardFactory(t) {
        var e = i.call(this) || this;
        return e.itemFactory = t,
        e
    }
    return __extends(UTRewardFactory, i),
    UTRewardFactory.prototype.createRewardItem = function(t, e) {
        var i = this.itemFactory.createItem(t);
        return i.loans <= 0 && JSUtils.isNumber(e) && 0 < e && (i.loans = e),
        i.contract <= 0 && (i.contract = 0 < i.loans ? i.loans : 7),
        i.playStyle = i.isGK() ? ItemSubType.TRAINING_PLAYERSTYLE_GOALKEEPER_5 : ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_1,
        i
    }
    ,
    UTRewardFactory.prototype.createRewardFromObjectiveData = function(t) {
        var e = {
            assetId: JSUtils.isNumber(t.assetId) ? t.assetId : t.halId,
            count: t.count,
            tradable: !t.untradeable,
            type: t.awardType,
            value: t.value
        };
        return t.itemDataReduced ? e.item = this.createRewardItem(t.itemDataReduced) : t.itemData && (e.item = this.createRewardItem(t.itemData)),
        t.nameLoc && (e.halId = t.nameLoc),
        new UTRewardVO(e)
    }
    ,
    UTRewardFactory.prototype.createRewardFromCampaignLevelData = function(t) {
        var e = {
            assetId: t.halId,
            count: t.awardCount,
            tradable: !t.untradeable,
            type: t.awardType,
            value: t.awardValue
        };
        return t.itemDataReduced ? e.item = this.createRewardItem(t.itemDataReduced, t.loan) : t.itemData && (e.item = this.createRewardItem(t.itemData, t.loan)),
        new UTRewardVO(e)
    }
    ,
    UTRewardFactory.prototype.createRewardFromLoyaltyData = function(t) {
        var e = RewardType.ITEM;
        switch (t.rewardType) {
        case LoyaltyRewardType.PACKS:
            e = RewardType.PACK;
            break;
        case LoyaltyRewardType.COINS:
            e = RewardType.COIN;
            break;
        case LoyaltyRewardType.ITEMS:
            e = RewardType.ITEM;
            break;
        default:
            DebugUtils.Assert(!1, "Unsupported loyalty reward type.")
        }
        var i = {
            assetId: t.halId,
            count: t.rewardQuantity,
            tradable: !0,
            type: e,
            value: t.rewardValue
        };
        return t.itemData && (i.item = this.createRewardItem(t.itemData)),
        new UTRewardVO(i)
    }
    ,
    UTRewardFactory.prototype.createRewardFromSbcData = function(t) {
        var e = {
            assetId: t.halId,
            count: t.count,
            tradable: !t.isUntradeable,
            type: t.type,
            value: t.value
        };
        return t.itemData && (e.item = this.createRewardItem(t.itemData, t.loan)),
        new UTRewardVO(e)
    }
    ,
    UTRewardFactory.prototype.createRewardFromRewardData = function(t) {
        var e = 0;
        t.assetId ? e = t.assetId : t.halId && (e = t.halId);
        var i = {
            assetId: e,
            count: JSUtils.isNumber(t.awardCount) ? t.awardCount : 1,
            tradable: !JSUtils.isBoolean(t.untradeable) || !t.untradeable,
            type: JSUtils.isString(t.awardType) ? t.awardType : RewardType.ITEM,
            value: JSUtils.isNumber(t.awardValue) ? t.awardValue : 0
        }
          , r = null;
        return t.itemData ? r = t.itemData : t.awardItemData ? r = t.awardItemData : t.itemDataReduced && (r = t.itemDataReduced),
        r && (i.item = this.createRewardItem(r, t.loan)),
        new UTRewardVO(i)
    }
    ,
    UTRewardFactory.prototype.createRewardFromPlayerPickData = function(t) {
        return new UTRewardVO({
            assetId: 0,
            count: 1,
            item: this.itemFactory.createItem(t),
            tradable: !t.untradeable,
            type: RewardType.ITEM,
            value: 0
        })
    }
    ,
    UTRewardFactory.prototype.createRewardSetFromCampaignLevelData = function(t) {
        var e = this;
        return new UTRewardSetEntity({
            default: t.defaultOption,
            hidden: t.hiddenReward,
            id: t.optionId,
            rewards: t.awards ? t.awards.map(function(t) {
                return e.createRewardFromCampaignLevelData(t)
            }) : []
        })
    }
    ,
    UTRewardFactory.prototype.createRewardSetFromRivalsData = function(t) {
        var e = this;
        return new UTRewardSetEntity({
            default: !1,
            hidden: !1,
            id: t.categoryId,
            rewards: t.awards.map(function(t) {
                return e.createRewardFromRewardData(t)
            })
        })
    }
    ,
    UTRewardFactory.prototype.createRewardSetFromChampionsData = function(t) {
        var e = this;
        return new UTRewardSetEntity({
            default: !1,
            hidden: !1,
            id: t.awardSetId,
            rewards: t.awards.map(function(t) {
                return e.createRewardFromRewardData(t)
            })
        })
    }
    ,
    UTRewardFactory.prototype.createRewardSetFromSquadBattlesData = function(t) {
        var e = this;
        return new UTRewardSetEntity({
            default: !1,
            hidden: !1,
            id: t.awardSetId,
            rewards: t.awards.map(function(t) {
                return e.createRewardFromRewardData(t)
            })
        })
    }
    ,
    UTRewardFactory.prototype.createRewardSetFromGameModesData = function(t) {
        var e = this;
        return new UTRewardSetEntity({
            default: !1,
            hidden: !1,
            id: t.awardSetId,
            rewards: t.awards.map(function(t) {
                return e.createRewardFromRewardData(t)
            })
        })
    }
    ,
    UTRewardFactory.prototype.createRewardSetFromRewards = function(t) {
        return new UTRewardSetEntity({
            default: !0,
            hidden: !1,
            id: 1,
            rewards: t
        })
    }
    ,
    UTRewardFactory
}(EAObject))
  , UTSquadBattlesEventTierEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTSquadBattlesEventTierEntity(t) {
        var e = i.call(this) || this;
        return e.awardSetId = t.awardSetId,
        e.competitionId = t.competitionId,
        e.rewardSet = t.eventRewardSet,
        e.end = t.tierEnd,
        e.endPoints = t.tierEndValue,
        e.level = t.tierLevel,
        e.start = t.tierStart,
        e.previousTierStartPoints = t.previousTierStartPoints,
        e.startPoints = t.tierStartValue,
        e.type = t.tierType,
        e
    }
    return __extends(UTSquadBattlesEventTierEntity, i),
    UTSquadBattlesEventTierEntity
}(EAObject))
  , UTSquadBattlesEventEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(n) {
    function UTSquadBattlesEventEntity(t) {
        var e, i = n.call(this) || this;
        if (i.currentTime = t.currentTime,
        i.endTime = t.endTime,
        i.gamesPlayed = t.gamesPlayed,
        i.id = t.sqbtEventId,
        i.isPrizeAvailable = t.isPrizeAvailable,
        i.maxRegularGames = t.maxRegularGames,
        i.rank = t.rank,
        i.score = t.score,
        i.startTime = t.startTime,
        i.prizeTiers = null !== (e = t.prizeTiers) && void 0 !== e ? e : [],
        -1 === t.userTierLevel && 0 < i.score && 0 === i.rank) {
            var r = -1;
            i.prizeTiers.filter(function(t) {
                return t.type === SquadBattlesTierType.POINT_TIERS
            }).forEach(function(t) {
                (-1 === r || r > t.level) && (r = t.level)
            }),
            i.userCurrentTierLevel = r
        } else
            i.userCurrentTierLevel = t.userTierLevel;
        return i
    }
    return __extends(UTSquadBattlesEventEntity, n),
    UTSquadBattlesEventEntity.prototype.isRanked = function() {
        return 0 < this.rank
    }
    ,
    UTSquadBattlesEventEntity.prototype.hasOutStandingRewards = function() {
        return this.isPrizeAvailable
    }
    ,
    UTSquadBattlesEventEntity.prototype.hasProgression = function() {
        return 0 <= this.userCurrentTierLevel || 0 < this.rank
    }
    ,
    UTSquadBattlesEventEntity
}(EAObject))
  , UTGameModesEventRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTGameModesEventRepository() {
        var t = e.call(this) || this;
        return t.currentEventCacheExpiration = 0,
        t
    }
    return __extends(UTGameModesEventRepository, e),
    UTGameModesEventRepository.prototype.reset = function() {
        this.currentEventCacheExpiration = 0
    }
    ,
    UTGameModesEventRepository.prototype.setDirty = function() {
        this.reset()
    }
    ,
    UTGameModesEventRepository.prototype.setCacheTimestamp = function(t, e) {
        var i = 6e5;
        JSUtils.isNumber(e) && (i = Math.max(Math.min(e * MS_PER_SECOND, i), 3e4)),
        this.currentEventCacheExpiration = t + i
    }
    ,
    UTGameModesEventRepository.prototype.isCacheExpired = function() {
        return this.currentEventCacheExpiration < Date.now()
    }
    ,
    UTGameModesEventRepository
}(EAObject))
  , UTChampionsEventRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTChampionsEventRepository() {
        var t = e.call(this) || this;
        return t.currentEvent = null,
        t
    }
    return __extends(UTChampionsEventRepository, e),
    UTChampionsEventRepository.prototype.reset = function() {
        this.currentEvent = null,
        e.prototype.reset.call(this)
    }
    ,
    UTChampionsEventRepository.prototype.setEvent = function(t) {
        this.currentEvent = t
    }
    ,
    UTChampionsEventRepository.prototype.getEvent = function() {
        return this.currentEvent
    }
    ,
    UTChampionsEventRepository
}(UTGameModesEventRepository));
NamespaceManager.Register("repositories"),
repositories.Champions = new UTChampionsEventRepository;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTChampionsDAO = function(n) {
    function UTChampionsDAO(t, e, i) {
        var r = n.call(this) || this;
        return r.authDelegate = t,
        r.requestDelegate = e,
        r.rewardFactory = new UTRewardFactory(new UTItemEntityFactory),
        r.championsEntityFactory = new UTChampionsEventEntityFactory(r.rewardFactory),
        r.championsRepo = i,
        r
    }
    return __extends(UTChampionsDAO, n),
    UTChampionsDAO.prototype.getChampsHub = function() {
        var r = this
          , n = new EAObservable
          , t = new UTHttpRequest(this.authDelegate)
          , e = new UTHttpResponseDTO
          , i = this.championsRepo.getEvent();
        return i && !this.championsRepo.isCacheExpired() ? (e.success = !0,
        e.status = HttpStatusCode.NOT_MODIFIED,
        e.response = {
            event: i
        },
        n.notify(e)) : (t.setPath("/ut/game/" + GAME_NAME + "/champs2/user/hub"),
        this.requestDelegate.send(t).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            e.success && e.response && !JSUtils.isString(e.response) ? (r.championsRepo.setDirty(),
            r.championsRepo.setCacheTimestamp(Date.now()),
            r.championsRepo.setEvent(r.championsEntityFactory.createChampionsEvent(e.response)),
            i.response = {
                event: r.championsRepo.getEvent()
            }) : i.response = {
                event: null
            },
            n.notify(i)
        })),
        n
    }
    ,
    UTChampionsDAO.prototype.checkOutstandingRewards = function() {
        var r = this
          , n = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/champs2/user/rewards"),
        this.requestDelegate.send(t).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            i.response = {
                hasOutstandingRewards: e.success
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTChampionsDAO.prototype.claimRewards = function() {
        var n = this
          , o = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/champs2/user/prize"),
        t.setRequestType(HttpRequestMethod.POST),
        this.requestDelegate.send(t).observe(this, function(t, e) {
            t.unobserve(n);
            var i = new UTHttpResponseDTO;
            if (JSUtils.assignPropertyValues(e, i),
            e.success && JSUtils.isObject(e.response)) {
                var r = e.response.grantedAwards.map(function(t) {
                    return n.rewardFactory.createRewardFromRewardData(t)
                });
                i.response = {
                    rewards: [n.rewardFactory.createRewardSetFromRewards(r)]
                }
            } else
                i.response = {
                    rewards: []
                };
            n.championsRepo.setDirty(),
            o.notify(i)
        }),
        o
    }
    ,
    UTChampionsDAO
}(EAObject)
  , UTClubStatDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTClubStatDTO(t) {
        var e = i.call(this) || this;
        return e.type = t.type,
        e.count = t.count,
        e
    }
    return __extends(UTClubStatDTO, i),
    UTClubStatDTO
}(EAObject))
  , UTChemistryThresholdVO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTChemistryThresholdVO(t, e) {
        var i = r.call(this) || this;
        return i.points = e,
        i.requirement = t,
        i
    }
    return __extends(UTChemistryThresholdVO, r),
    UTChemistryThresholdVO.prototype.value = function() {
        return this.points
    }
    ,
    UTChemistryThresholdVO.prototype.equals = function(t) {
        return t instanceof UTChemistryThresholdVO && this.requirement === t.requirement
    }
    ,
    UTChemistryThresholdVO
}(EAObject))
  , UTChemistryParameterEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTChemistryParameterEntity(t, e) {
        var i = r.call(this) || this;
        return i.abbr = t.abbr,
        i.guidAssetId = t.guid,
        i.id = t.id,
        i.name = t.name,
        i.thresholds = e.data.map(function(t) {
            return new UTChemistryThresholdVO(t.value,t.points)
        }),
        i
    }
    return __extends(UTChemistryParameterEntity, r),
    Object.defineProperty(UTChemistryParameterEntity.prototype, "requirement", {
        get: function() {
            return this.thresholds.reduce(function(t, e) {
                return Math.max(t, e.requirement)
            }, 0)
        },
        enumerable: !1,
        configurable: !0
    }),
    UTChemistryParameterEntity
}(EAObject))
  , UTChemistryParameterFactory = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTChemistryParameterFactory() {
        return t.call(this) || this
    }
    return __extends(UTChemistryParameterFactory, t),
    UTChemistryParameterFactory.prototype.generateParameter = function(t, e) {
        return new UTChemistryParameterEntity(t,e)
    }
    ,
    UTChemistryParameterFactory
}(EAObject))
  , UTLocalizationUtil = function() {
    function UTLocalizationUtil() {}
    return UTLocalizationUtil.nationIdToName = function(t, e) {
        return e.localize("search.nationName.nation" + t)
    }
    ,
    UTLocalizationUtil.nationIdToAbbr12 = function(t, e) {
        return e.localize("search.nationAbbr12.nation" + t)
    }
    ,
    UTLocalizationUtil.nationIdToAbbr3 = function(t, e) {
        return e.localize("nationAbbrvByID_" + t)
    }
    ,
    UTLocalizationUtil.leagueIdToName = function(t, e) {
        return e.localize("global.leagueabbr15." + APP_YEAR + ".league" + t)
    }
    ,
    UTLocalizationUtil.leagueIdToAbbr5 = function(t, e) {
        return e.localize("global.leagueabbr5." + APP_YEAR + ".league" + t)
    }
    ,
    UTLocalizationUtil.teamIdToAbbr15 = function(t, e) {
        return e.localize("global.teamabbr15." + APP_YEAR + ".team" + t)
    }
    ,
    UTLocalizationUtil.teamIdToAbbr3 = function(t, e) {
        return e.localize("global.teamabbr3." + APP_YEAR + ".team" + t)
    }
    ,
    UTLocalizationUtil.formationDbNameToName = function(t, e) {
        return e.localize("global.formation." + t)
    }
    ,
    UTLocalizationUtil.playStyleIdToName = function(t, e) {
        return 0 < t ? e.localize("playstyles.playstyle" + t) : e.localize("playstyles.invalid.playstyle0")
    }
    ,
    UTLocalizationUtil.attributeIdToHalString = function(t, e) {
        var i;
        return void 0 === e && (e = !1),
        null !== (i = (e ? ["Diving", "Handling", "Kicking", "Reflex", "Speed", "Position", "All"] : ["Pace", "Shooting", "Passing", "Dribbling", "Defend", "Heading", "All"])[t]) && void 0 !== i ? i : ""
    }
    ,
    UTLocalizationUtil.positionIdToName = function(t, e) {
        return e.localize("extendedPlayerInfo.positions.position" + t)
    }
    ,
    UTLocalizationUtil.injuryTypeToName = function(t, e) {
        switch (t) {
        case PlayerInjury.ARM:
            return e.localize("card.desc.healing.arm");
        case PlayerInjury.BACK:
            return e.localize("card.desc.healing.back");
        case PlayerInjury.FOOT:
            return e.localize("card.desc.healing.foot");
        case PlayerInjury.HEAD:
            return e.localize("card.desc.healing.head");
        case PlayerInjury.HIP:
            return e.localize("card.desc.healing.hip");
        case PlayerInjury.LEG:
            return e.localize("card.desc.healing.leg");
        case PlayerInjury.NONE:
            return BLANK_STR;
        case PlayerInjury.SHOULDER:
            return e.localize("card.desc.healing.shoulder")
        }
    }
    ,
    UTLocalizationUtil
}()
  , UTLeagueDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTLeagueDTO(t, e) {
        var i = r.call(this) || this;
        return i.id = t.LeagueId,
        i.nation = t.NationId,
        i.name = UTLocalizationUtil.leagueIdToName(i.id, services.Localization),
        i.abbreviation = UTLocalizationUtil.leagueIdToAbbr5(i.id, services.Localization),
        i.sortName = TextUtils.stripSpecialCharacters(i.name).toLowerCase(),
        i.legend = !!JSUtils.isBoolean(e) && e,
        i
    }
    return __extends(UTLeagueDTO, r),
    UTLeagueDTO
}(EAObject))
  , UTNationDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTNationDTO(t) {
        var e = i.call(this) || this;
        return e.id = t,
        e.name = UTLocalizationUtil.nationIdToAbbr12(t, services.Localization),
        e.sortName = TextUtils.stripSpecialCharacters(e.name).toLowerCase(),
        e
    }
    return __extends(UTNationDTO, i),
    UTNationDTO
}(EAObject))
  , UTTeamKitDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(o) {
    function UTTeamKitDTO(t) {
        var e, i, r, n = o.call(this) || this;
        return n.localized = null !== (e = t.L) && void 0 !== e && e,
        n.year = null !== (i = t.Y) && void 0 !== i ? i : 0,
        n.type = null !== (r = t.type) && void 0 !== r ? r : KitType.HOME,
        n
    }
    return __extends(UTTeamKitDTO, o),
    UTTeamKitDTO
}(EAObject))
  , UTTeamDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTTeamDTO(t, e) {
        var i = r.call(this) || this;
        return i.id = t.TeamId,
        i.league = t.LeagueId,
        i.kits = Array.isArray(t.Kit) ? t.Kit.map(function(t) {
            return new UTTeamKitDTO(t)
        }) : [],
        i.name = UTLocalizationUtil.teamIdToAbbr15(t.TeamId, services.Localization),
        i.sortName = TextUtils.stripSpecialCharacters(i.name).toLowerCase(),
        i.legend = !!JSUtils.isBoolean(e) && e,
        i
    }
    return __extends(UTTeamDTO, r),
    UTTeamDTO
}(EAObject))
  , UTChemistryParameterRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTChemistryParameterRepository() {
        var t = e.call(this) || this;
        return t.parameters = new EAHashTable,
        t
    }
    return __extends(UTChemistryParameterRepository, e),
    UTChemistryParameterRepository.prototype.getParameter = function(t) {
        return this.parameters.get(t)
    }
    ,
    UTChemistryParameterRepository.prototype.getParameters = function() {
        return this.parameters.values()
    }
    ,
    UTChemistryParameterRepository.prototype.setParameters = function(t) {
        var e = this;
        t.forEach(function(t) {
            e.parameters.set(t.id, t)
        })
    }
    ,
    UTChemistryParameterRepository
}(EAObject));
NamespaceManager.Register("repositories"),
repositories.Chemistry = new UTChemistryParameterRepository;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTKeyAttributeVO = function(i) {
    function UTKeyAttributeVO(t) {
        var e = i.call(this) || this;
        return e.keyAttributes = t.keyAttributes,
        e.guid = t.guid ? t.guid : "",
        t.position && (e.position = PlayerPosition[t.position]),
        e
    }
    return __extends(UTKeyAttributeVO, i),
    UTKeyAttributeVO.prototype.value = function() {
        return this.keyAttributes
    }
    ,
    UTKeyAttributeVO.prototype.equals = function(t) {
        return t instanceof UTKeyAttributeVO && this.guid === t.guid && this.keyAttributes === t.keyAttributes
    }
    ,
    UTKeyAttributeVO.prototype.getKey = function() {
        return 0 < this.guid.length && JSUtils.isNumber(this.position) ? this.guid + "-" + this.position.toString() : 0 === this.guid.length && JSUtils.isNumber(this.position) ? this.position.toString() : this.guid
    }
    ,
    UTKeyAttributeVO
}(EAObject)
  , UTObjectiveUpdateEntryVO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTObjectiveUpdateEntryVO(t) {
        var e = i.call(this) || this;
        return e.categoryId = t.categoryId,
        e.groupCompositeId = t.groupCompositeId,
        e.groupId = t.groupId,
        e.groupState = t.groupState,
        e.groupType = t.groupType,
        e.objectiveId = t.objectiveId,
        e.objectiveProgress = t.objectiveProgress,
        e.objectiveState = t.objectiveState,
        e
    }
    return __extends(UTObjectiveUpdateEntryVO, i),
    UTObjectiveUpdateEntryVO.prototype.value = function() {
        return JSON.stringify(this)
    }
    ,
    UTObjectiveUpdateEntryVO.prototype.equals = function(t) {
        return t instanceof UTObjectiveUpdateEntryVO && t.categoryId === this.categoryId && t.groupId === this.groupId && t.groupState === this.groupState && t.groupType === this.groupType && t.objectiveId === this.objectiveId && t.objectiveProgress === this.objectiveProgress && t.objectiveState === this.objectiveState
    }
    ,
    UTObjectiveUpdateEntryVO
}(EAObject))
  , UTObjectivesUpdateFactory = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTObjectivesUpdateFactory() {
        return t.call(this) || this
    }
    return __extends(UTObjectivesUpdateFactory, t),
    UTObjectivesUpdateFactory.prototype.createCompositeGroupId = function(t, e) {
        return t + "-" + e
    }
    ,
    UTObjectivesUpdateFactory.prototype.generateUpdateEntries = function(t, i) {
        var r = this
          , n = [];
        return t.forEach(function(t) {
            var e = {
                categoryId: t.categoryId,
                groupId: -1,
                groupState: -1,
                groupType: i,
                objectiveId: -1,
                objectiveState: -1,
                objectiveProgress: -1
            };
            t.scmpGroupProgressList.forEach(function(t) {
                e.groupId = t.groupId,
                e.groupState = t.state,
                t.groupType && (e.groupType = t.groupType),
                t.objectiveProgressList.forEach(function(t) {
                    e.objectiveId = t.objectiveId,
                    e.objectiveState = t.state,
                    e.objectiveProgress = JSUtils.isNumber(t.progressCount) ? t.progressCount : -1,
                    n.push(JSON.parse(JSON.stringify(e)))
                }, r)
            }, r)
        }, this),
        n.map(function(t) {
            return new UTObjectiveUpdateEntryVO({
                categoryId: t.categoryId,
                groupCompositeId: r.createCompositeGroupId(t.groupType, t.groupId),
                groupId: t.groupId,
                groupState: t.groupState,
                groupType: t.groupType,
                objectiveId: t.objectiveId,
                objectiveProgress: t.objectiveProgress,
                objectiveState: t.objectiveState
            })
        })
    }
    ,
    UTObjectivesUpdateFactory.prototype.createObjectivesUpdate = function(t) {
        var e = t && t.scmpCategoryProgressList ? this.generateUpdateEntries(t.scmpCategoryProgressList, ObjectiveGroupType.SEASONAL) : []
          , i = t && t.learningGroupProgressList ? this.generateUpdateEntries(t.learningGroupProgressList, ObjectiveGroupType.LEARNING) : [];
        return new UTObjectivesUpdateVO({
            experienceGained: JSUtils.isNumber(t.autoRedeemedXp) ? t.autoRedeemedXp : 0,
            refreshGroups: t.needsGroupsRefresh || !!t.newDailyObjectives,
            unclaimedRewards: t.needsAutoClaim,
            updates: e.concat(i)
        })
    }
    ,
    UTObjectivesUpdateFactory
}(EAObject))
  , UTItemRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTItemRepository() {
        var t = r.call(this) || this;
        return t.expiryTimestamp = 0,
        t.endOfList = !1,
        t.count = -1,
        t
    }
    return __extends(UTItemRepository, r),
    UTItemRepository.prototype.isCacheExpired = function() {
        return this.expiryTimestamp < Date.now()
    }
    ,
    UTItemRepository.prototype.reset = function() {
        this.clear(),
        this.resetCount(),
        this.endOfList = !1,
        this.expiryTimestamp = 0
    }
    ,
    UTItemRepository.prototype.isCountSet = function() {
        return -1 < this.count
    }
    ,
    UTItemRepository.prototype.resetCount = function() {
        this.count = -1
    }
    ,
    UTItemRepository.prototype.set = function(t, e) {
        var i = r.prototype.set.call(this, t, e);
        return this.isCountSet() && (this.endOfList ? this.count = this.length : i || this.resetCount()),
        i
    }
    ,
    UTItemRepository.prototype.remove = function(t) {
        var e = r.prototype.remove.call(this, t);
        return this.isCountSet() && (this.endOfList ? this.count = this.length : e && this.resetCount()),
        e
    }
    ,
    UTItemRepository.prototype.checkVanitySearchCategory = function(t, e) {
        switch (e) {
        case SearchCategory.VANITY_AUDIO_ANTHEM_MUSIC:
            return t.subtype === ItemSubType.VANITY_AUDIO_ANTHEM_MUSIC;
        case SearchCategory.VANITY_AUDIO_CLUB_NICKNAME:
            return t.subtype === ItemSubType.VANITY_AUDIO_CLUB_NICKNAME;
        case SearchCategory.VANITY_AUDIO_CROWD_CHANT:
            return t.subtype === ItemSubType.VANITY_AUDIO_CROWD_CHANT;
        case SearchCategory.VANITY_AUDIO_GOAL_SCORE:
            return t.subtype === ItemSubType.VANITY_AUDIO_GOAL_SCORE;
        case SearchCategory.VANITY_CROWD_CARDS:
            return t.subtype === ItemSubType.VANITY_CROWD_CARDS;
        case SearchCategory.VANITY_PLAYER_CELEBRATION:
            return t.subtype === ItemSubType.VANITY_PLAYER_CELEBRATION;
        case SearchCategory.VANITY_POLE_BANNER:
            return t.subtype === ItemSubType.VANITY_POLE_BANNER;
        case SearchCategory.VANITY_PYROTECHNICS_CONFETTI_CANNON:
            return t.subtype === ItemSubType.VANITY_PYROTECHNICS_CONFETTI_CANNON;
        case SearchCategory.VANITY_PYROTECHNICS_FIREWORKS_CANNON:
            return t.subtype === ItemSubType.VANITY_PYROTECHNICS_FIREWORKS_CANNON;
        case SearchCategory.VANITY_PYROTECHNICS_FLAME_CANNON:
            return t.subtype === ItemSubType.VANITY_PYROTECHNICS_FLAME_CANNON;
        case SearchCategory.VANITY_PYROTECHNICS_SPARKLER_CANNON:
            return t.subtype === ItemSubType.VANITY_PYROTECHNICS_SPARKLER_CANNON;
        case SearchCategory.VANITY_STADIUM_BASE_PITCH_GOAL_PACKAGE:
            return t.subtype === ItemSubType.VANITY_STADIUM_BASE_PITCH_GOAL_PACKAGE;
        case SearchCategory.VANITY_STADIUM_BASE_PITCH_LINE_COLOR:
            return t.subtype === ItemSubType.VANITY_STADIUM_BASE_PITCH_LINE_COLOR;
        case SearchCategory.VANITY_STADIUM_BASE_PITCH_MOW_PATTERN:
            return t.subtype === ItemSubType.VANITY_STADIUM_BASE_PITCH_MOW_PATTERN;
        case SearchCategory.VANITY_STADIUM_BASE_PITCH_PROP:
            return t.subtype === ItemSubType.VANITY_STADIUM_BASE_PITCH_PROP;
        case SearchCategory.VANITY_STADIUM_BASE_SEAT_COLOR:
            return t.subtype === ItemSubType.VANITY_STADIUM_BASE_SEAT_COLOR;
        case SearchCategory.VANITY_STADIUM_BASE_STRUCTURE_COLOR:
            return t.subtype === ItemSubType.VANITY_STADIUM_BASE_STRUCTURE_COLOR;
        case SearchCategory.VANITY_STADIUM_THEME:
            return t.subtype === ItemSubType.VANITY_STADIUM_THEME;
        case SearchCategory.VANITY_TIFO_ANIMATED:
            return t.subtype === ItemSubType.VANITY_TIFO_ANIMATED;
        case SearchCategory.VANITY_TIFO_BASE:
            return t.subtype === ItemSubType.VANITY_TIFO_BASE;
        case SearchCategory.VANITY_TIFO_BIG:
            return t.subtype === ItemSubType.VANITY_TIFO_BIG;
        case SearchCategory.VANITY_TIFO_MOVING:
            return t.subtype === ItemSubType.VANITY_TIFO_MOVING;
        case SearchCategory.VANITY_TINTED_BANNER:
            return t.subtype === ItemSubType.VANITY_TINTED_BANNER;
        case SearchCategory.VANITY_VIP_AREA:
            return t.subtype === ItemSubType.VANITY_VIP_AREA
        }
        return !1
    }
    ,
    UTItemRepository.prototype.checkSearchTypes = function(t, e) {
        switch (e.type) {
        case SearchType.BALL:
            return t.isBall();
        case SearchType.CLUB_INFO:
            return e.category === SearchCategory.BADGE ? t.isBadge() : e.category === SearchCategory.KIT ? t.isKit() : t.isBadge() || t.isKit();
        case SearchType.CONSUMABLES_DEVELOPMENT:
        case SearchType.CONSUMABLES_TRAINING:
            return t.isConsumable();
        case SearchType.PLAYER:
            return t.isPlayer();
        case SearchType.STADIUM:
            return t.isStadium();
        case SearchType.STAFF:
            return t.isManager();
        case SearchType.VANITY:
            return e.category !== SearchCategory.ANY ? this.checkVanitySearchCategory(t, e.category) : t.isVanityItem();
        default:
            return !0
        }
    }
    ,
    UTItemRepository.prototype.search = function(r) {
        var n = this;
        return this.values().filter(function(t) {
            if (!n.checkSearchTypes(t, r))
                return !1;
            if (r.untradeables === SearchUntradeables.ONLY && !t.untradeable || r.untradeables === SearchUntradeables.EXCLUDE && t.untradeable)
                return !1;
            if ((r.type === SearchType.BALL || r.type === SearchType.CLUB_INFO || r.type === SearchType.PLAYER || r.type === SearchType.STADIUM || r.type === SearchType.VANITY) && 0 < r.rarities.length && r.rarities.indexOf(t.rareflag) < 0)
                return !1;
            if (r.type === SearchType.PLAYER) {
                var e = repositories.Squad.getPositionByUniqueName(r.position);
                if (e && r.position !== SearchType.ANY && e.id !== t.preferredPosition)
                    return !1;
                if (-1 !== r.zone) {
                    var i = JSUtils.find(POSITION_ZONE_LOOKUP, function(t) {
                        return t.value === r.zone
                    });
                    if (i && (i.minPosId > t.preferredPosition || i.maxPosId < t.preferredPosition))
                        return !1
                }
                if (-1 !== r.playStyle && t.playStyle !== r.playStyle)
                    return !1;
                if (0 < r.excludeDefIds.length && -1 < r.excludeDefIds.indexOf(t.definitionId) || 0 < r.defId.length && r.defId.indexOf(t.databaseId) < 0)
                    return !1
            } else if (r.type === SearchType.STAFF && r.category !== SearchCategory.ANY && t.isManager() && r.category !== SearchCategory.MANAGER)
                return !1;
            if (r.type !== SearchType.CONSUMABLES_DEVELOPMENT && r.type !== SearchType.CONSUMABLES_TRAINING) {
                if (r.level === SearchLevel.SPECIAL && !t.isSpecial() || r.level === SearchLevel.BRONZE && (!t.hasQualityTiers() || t.getTier() !== ItemRatingTier.BRONZE) || r.level === SearchLevel.SILVER && (!t.hasQualityTiers() || t.getTier() !== ItemRatingTier.SILVER) || r.level === SearchLevel.GOLD && (!t.hasQualityTiers() || t.getTier() !== ItemRatingTier.GOLD))
                    return !1;
                if (-1 !== r.nation && r.nation !== t.nationId || -1 !== r.league && r.league !== t.leagueId || -1 !== r.club && r.club !== t.teamId)
                    return !1
            } else if (r.type === SearchType.CONSUMABLES_DEVELOPMENT || r.type === SearchType.CONSUMABLES_TRAINING) {
                if (r.level !== SearchType.ANY && (t.getTier() === ItemRatingTier.BRONZE && r.level !== SearchLevel.BRONZE || t.getTier() === ItemRatingTier.SILVER && r.level !== SearchLevel.SILVER || t.getTier() === ItemRatingTier.GOLD && r.level !== SearchLevel.GOLD))
                    return !1;
                switch (r.category) {
                case SearchCategory.CONTRACT:
                    return t.isContract();
                case SearchCategory.PLAYSTYLE:
                    return t.isStyleModifier();
                case SearchCategory.MANAGER_LEAGUE:
                    return t.isManagerLeagueModifier();
                case SearchCategory.POSITION:
                    return t.isPlayerPositionModifier();
                case SearchCategory.HEALING:
                    return t.isInjuryHealing();
                default:
                    return t.isConsumable()
                }
            }
            return !0
        })
    }
    ,
    UTItemRepository.prototype.setCacheTimestamp = function(t, e) {
        this.expiryTimestamp = t + (JSUtils.isNumber(e) ? e * MS_PER_SECOND : 3e5)
    }
    ,
    UTItemRepository
}(EAHashTable))
  , UTDiscardedRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTDiscardedRepository() {
        var t = e.call(this) || this;
        return t.cacheSize = 10,
        t.pages = [],
        t.endTimestamp = 0,
        t.restoresLeft = 0,
        t
    }
    return __extends(UTDiscardedRepository, e),
    UTDiscardedRepository.prototype.reset = function() {
        this.pages = [],
        this.endTimestamp = 0,
        this.restoresLeft = 0
    }
    ,
    UTDiscardedRepository.prototype.getEODFromTimestamp = function(t) {
        var e = new Date(t);
        return e.setHours(23, 59, 59, 999),
        e.getTime()
    }
    ,
    UTDiscardedRepository.prototype.getPageCacheObject = function(e, i) {
        var r = this;
        return JSUtils.find(this.pages, function(t) {
            return t.startTimestamp === r.getEODFromTimestamp(e) && t.paginationIndex === i
        })
    }
    ,
    UTDiscardedRepository.prototype.removeItem = function(e, t) {
        var i = this.getEODFromTimestamp(t)
          , r = this.pages.find(function(t) {
            return t.startTimestamp === i
        });
        if (r) {
            var n = r.items.filter(function(t) {
                return t.id !== e
            });
            this.setPageCache(r.startTimestamp, r.paginationIndex, n, Date.now() * MS_PER_SECOND, r.hasMore)
        }
    }
    ,
    UTDiscardedRepository.prototype.setPageCache = function(t, e, i, r, n) {
        var o = this.getPageCacheObject(t, e)
          , s = r + 5 * SECONDS_PER_MINUTE;
        o ? this.pages.splice(this.pages.indexOf(o), 1) : this.pages.length === this.cacheSize && this.pages.shift(),
        this.pages.push({
            startTimestamp: this.getEODFromTimestamp(t),
            paginationIndex: e,
            items: i,
            cacheTimestamp: s,
            hasMore: n
        })
    }
    ,
    UTDiscardedRepository.prototype.getPageCache = function(t, e) {
        var i = this.getPageCacheObject(t, e);
        return i ? i.items : []
    }
    ,
    UTDiscardedRepository.prototype.getAllPagesItemsForDay = function(e) {
        var i = this
          , r = [];
        return this.pages.filter(function(t) {
            return t.startTimestamp === i.getEODFromTimestamp(e)
        }).map(function(t) {
            return r = r.concat(t.items)
        }),
        r
    }
    ,
    UTDiscardedRepository.prototype.getPageCacheHasMore = function(t, e) {
        var i = this.getPageCacheObject(t, e);
        return !!i && i.hasMore
    }
    ,
    UTDiscardedRepository.prototype.isDiscardedCacheExpired = function(t, e) {
        var i = this.getPageCacheObject(t, e)
          , r = Math.round(Date.now() / MS_PER_SECOND)
          , n = this.endTimestamp < r
          , o = !i || i.cacheTimestamp < r;
        return n || o
    }
    ,
    UTDiscardedRepository
}(EAObject))
  , UTLtpEventVO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(n) {
    function UTLtpEventVO(t, e, i) {
        var r = n.call(this) || this;
        return r.needsLtpEventAutoClaim = t,
        r.ltpEventEndTime = e,
        r.ltpEventAwardCount = i,
        r
    }
    return __extends(UTLtpEventVO, n),
    UTLtpEventVO.prototype.hasAutoClaimRewards = function() {
        return this.needsLtpEventAutoClaim
    }
    ,
    UTLtpEventVO.prototype.hasOutstandingRewards = function() {
        return 0 < this.ltpEventAwardCount
    }
    ,
    UTLtpEventVO.prototype.getLtpEventEndTime = function() {
        return this.ltpEventEndTime
    }
    ,
    UTLtpEventVO.prototype.getLtpEventAwardCount = function() {
        return this.ltpEventAwardCount
    }
    ,
    UTLtpEventVO.prototype.setNeedsLtpEventAutoClaim = function(t) {
        this.needsLtpEventAutoClaim = t
    }
    ,
    UTLtpEventVO.prototype.setLtpEventEndTime = function(t) {
        this.ltpEventEndTime = t
    }
    ,
    UTLtpEventVO.prototype.setLtpAwardCount = function(t) {
        this.ltpEventAwardCount = t
    }
    ,
    UTLtpEventVO
}(EAObject))
  , UTLtpEventRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTLtpEventRepository() {
        var t = e.call(this) || this;
        return t.event = null,
        t
    }
    return __extends(UTLtpEventRepository, e),
    UTLtpEventRepository.prototype.setEvent = function(t) {
        this.event = t
    }
    ,
    UTLtpEventRepository.prototype.getEvent = function() {
        return this.event
    }
    ,
    UTLtpEventRepository
}(EAObject));
NamespaceManager.Register("repositories"),
repositories.LtpEvent = new UTLtpEventRepository;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTLtpEventDAO = function(r) {
    function UTLtpEventDAO(t, e) {
        var i = r.call(this) || this;
        return i.authDelegate = t,
        i.requestDelegate = e,
        i.rewardFactory = new UTRewardFactory(new UTItemEntityFactory),
        i
    }
    return __extends(UTLtpEventDAO, r),
    UTLtpEventDAO.prototype.getCurrentEvent = function() {
        return repositories.LtpEvent.getEvent()
    }
    ,
    UTLtpEventDAO.prototype.claimLtpEventRewards = function() {
        var o = this
          , s = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/ltp/event/rewards"),
        t.requestType = HttpRequestMethod.POST,
        this.requestDelegate.send(t).observe(this, function(t, e) {
            t.unobserve(o);
            var i = new UTHttpResponseDTO;
            if (JSUtils.assignPropertyValues(e, i),
            e.success && e.response && JSUtils.isObject(e.response)) {
                var r = o.getCurrentEvent()
                  , n = e.response.grantedAwards.map(function(t) {
                    return o.rewardFactory.createRewardFromRewardData(t)
                });
                null == r || r.setNeedsLtpEventAutoClaim(!1),
                i.response = {
                    rewards: [o.rewardFactory.createRewardSetFromRewards(n)],
                    lastTierAchieved: e.response.lastTierAchieved
                }
            } else
                i.response = {
                    rewards: [],
                    lastTierAchieved: 0
                };
            s.notify(i)
        }),
        s
    }
    ,
    UTLtpEventDAO
}(EAObject)
  , UTArubaTextFieldDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTArubaTextFieldDTO(t, e) {
        var i = r.call(this) || this;
        return i.text = t,
        i.colour = e,
        i
    }
    return __extends(UTArubaTextFieldDTO, r),
    UTArubaTextFieldDTO
}(EAObject))
  , UTArubaMessageEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTArubaMessageEntity(t, e) {
        var i = r.call(this) || this;
        return i.countdowns = new EAHashTable,
        i.duration = t.displayTime * MS_PER_SECOND || 5,
        i.goToLink = t.tmtLink ? t.tmtLink.toLowerCase() : RedirectId.NONE,
        i.id = t.messageId,
        i.images = new EAHashTable,
        i.priority = t.priority,
        i.screen = t.screen,
        i.textFields = new EAHashTable,
        i.trackingTag = t.trackingTag,
        i.generateFields(t, e),
        i
    }
    return __extends(UTArubaMessageEntity, r),
    Object.defineProperty(UTArubaMessageEntity.prototype, "title", {
        get: function() {
            var t = this.textFields.get(ArubaTextFieldEnum.TITLE);
            return t ? t.text : ""
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTArubaMessageEntity.prototype, "titleColor", {
        get: function() {
            var t = this.textFields.get(ArubaTextFieldEnum.TITLE);
            return t ? t.colour : ""
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTArubaMessageEntity.prototype, "titleCountdown", {
        get: function() {
            return this.countdowns.get(ArubaTextFieldEnum.TITLE) || -1
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTArubaMessageEntity.prototype, "subtitle", {
        get: function() {
            var t = this.textFields.get(ArubaTextFieldEnum.SUBTITLE);
            return t ? t.text : ""
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTArubaMessageEntity.prototype, "subtitleColor", {
        get: function() {
            var t = this.textFields.get(ArubaTextFieldEnum.SUBTITLE);
            return t ? t.colour : ""
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTArubaMessageEntity.prototype, "subtitleCountdown", {
        get: function() {
            return this.countdowns.get(ArubaTextFieldEnum.SUBTITLE) || -1
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTArubaMessageEntity.prototype, "info", {
        get: function() {
            var t = this.textFields.get(ArubaTextFieldEnum.INFO);
            return t ? t.text : ""
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTArubaMessageEntity.prototype, "infoColor", {
        get: function() {
            var t = this.textFields.get(ArubaTextFieldEnum.INFO);
            return t ? t.colour : ""
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTArubaMessageEntity.prototype, "infoCountdown", {
        get: function() {
            return this.countdowns.get(ArubaTextFieldEnum.SUBTITLE) || -1
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTArubaMessageEntity.prototype, "body", {
        get: function() {
            var t = this.textFields.get(ArubaTextFieldEnum.BODY);
            return t ? t.text : ""
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTArubaMessageEntity.prototype, "bodyColor", {
        get: function() {
            var t = this.textFields.get(ArubaTextFieldEnum.BODY);
            return t ? t.colour : ""
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTArubaMessageEntity.prototype, "bodyCountdown", {
        get: function() {
            return this.countdowns.get(ArubaTextFieldEnum.BODY) || -1
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTArubaMessageEntity.prototype, "bodyImagePath", {
        get: function() {
            return this.images.get(ArubaImageFieldEnum.BODY) || ""
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTArubaMessageEntity.prototype, "backgroundImagePath", {
        get: function() {
            return this.images.get(ArubaImageFieldEnum.BACKGROUND) || ""
        },
        enumerable: !1,
        configurable: !0
    }),
    UTArubaMessageEntity.prototype.generateFields = function(t, i) {
        var r = this;
        JSUtils.valToArray(t.renders).forEach(function(t) {
            var e;
            t.value && 0 !== t.value.length && ("TEXT" === t.type ? (t.name === ArubaTextFieldEnum.TITLE ? r.textFields.set(ArubaTextFieldEnum.TITLE, new UTArubaTextFieldDTO(r.replacePersonaKeys(t.value, i),t.attributes && t.attributes.colour ? r.convertToHex(t.attributes.colour) : "")) : t.name === ArubaTextFieldEnum.BODY ? r.textFields.set(ArubaTextFieldEnum.BODY, new UTArubaTextFieldDTO(TextUtils.nltobr(r.replacePersonaKeys(t.value, i)),t.attributes && t.attributes.colour ? r.convertToHex(t.attributes.colour) : "")) : t.name === ArubaTextFieldEnum.SUBTITLE ? r.textFields.set(ArubaTextFieldEnum.SUBTITLE, new UTArubaTextFieldDTO(TextUtils.nltobr(r.replacePersonaKeys(t.value, i)),t.attributes && t.attributes.colour ? r.convertToHex(t.attributes.colour) : "")) : t.name === ArubaTextFieldEnum.INFO && r.textFields.set(ArubaTextFieldEnum.INFO, new UTArubaTextFieldDTO(TextUtils.nltobr(r.replacePersonaKeys(t.value, i)),t.attributes && t.attributes.colour ? r.convertToHex(t.attributes.colour) : "")),
            t.attributes && !JSUtils.isEmpty(t.attributes.countdownTime) && -1 < t.value.indexOf(ArubaPlaceholderEnum.COUNTDOWN) && r.countdowns.set(t.name, r.generateCountdownTimestamp(null !== (e = t.attributes.countdownTime) && void 0 !== e ? e : ""))) : "IMAGE" === t.type && (t.name === ArubaImageFieldEnum.BODY ? r.images.set(ArubaImageFieldEnum.BODY, t.value) : t.name === ArubaImageFieldEnum.BACKGROUND && r.images.set(ArubaImageFieldEnum.BACKGROUND, t.value)))
        })
    }
    ,
    UTArubaMessageEntity.prototype.replacePersonaKeys = function(t, e) {
        var i = e.getCurrentClub()
          , r = i ? i.name : "";
        return t.split(ArubaPlaceholderEnum.FUT_CLUB_NAME).join(r).split(ArubaPlaceholderEnum.GAMERTAG).join(e.name)
    }
    ,
    UTArubaMessageEntity.prototype.convertToHex = function(t) {
        return 0 === t.indexOf("#") && /^[0-9a-fA-F]+$/.test(t.slice(1, 7)) ? t : "#" + JSUtils.baseToBase(10, 16, t)
    }
    ,
    UTArubaMessageEntity.prototype.generateCountdownTimestamp = function(t) {
        return JSUtils.isEmpty(t) ? 0 : new Date(parseInt(t.substr(0, 4), 10),parseInt(t.substr(4, 2), 10) - 1,parseInt(t.substr(6, 2)),parseInt(t.substr(9, 2)),parseInt(t.substr(11, 2)),parseInt(t.substr(13, 2))).getTime()
    }
    ,
    UTArubaMessageEntity.prototype.hasCountdowns = function() {
        return 0 < this.countdowns.length
    }
    ,
    UTArubaMessageEntity
}(EAObject))
  , UTDailyGiftEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTDailyGiftEntity(t) {
        var e = i.call(this) || this;
        return e.id = t.id,
        e.rewardType = t.rewardType,
        e.rewardValue = t.rewardValue,
        e.isValid = !JSUtils.isEmpty(e.rewardType) && 0 < e.rewardValue,
        e
    }
    return __extends(UTDailyGiftEntity, i),
    UTDailyGiftEntity
}(EAObject))
  , UTMessagesDAO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTMessagesDAO(t) {
        var e = i.call(this) || this;
        return e.authDelegate = t,
        e
    }
    return __extends(UTMessagesDAO, i),
    UTMessagesDAO.prototype.getLiveMessageScreenName = function() {
        return isAndroid() ? ArubaScreenEnum.ANDROID_LIVE : isIOS() ? ArubaScreenEnum.IOS_LIVE : isWeb() ? ArubaScreenEnum.WEB_LIVE : ArubaScreenEnum.COMPANION_LIVE
    }
    ,
    UTMessagesDAO.prototype.getArubaMessages = function(t) {
        var r = this
          , n = new EAObservable
          , e = new UTHttpRequest(this.authDelegate)
          , i = this.authDelegate.getUtasSession().user
          , o = i ? i.getSelectedPersona() : null;
        return DebugUtils.Assert(JSUtils.isValid(o), "No valid persona found when retrieving live messages."),
        e.setPath("/ut/game/" + GAME_NAME + "/livemessage/template"),
        e.setUrlVariables({
            screen: t
        }),
        services.UTUtasRequestQueue.send(e).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            e.success && JSUtils.isObject(e.response) ? i.response = {
                messages: o && e.response.messageList ? e.response.messageList.map(function(t) {
                    return new UTArubaMessageEntity(t,o)
                }) : [],
                promos: e.response.promoUpdate ? e.response.promoUpdate : []
            } : i.response = {
                messages: [],
                promos: []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTMessagesDAO.prototype.getLiveMessages = function() {
        return this.getArubaMessages(this.getLiveMessageScreenName())
    }
    ,
    UTMessagesDAO.prototype.getStoreMessages = function() {
        return this.getArubaMessages(ArubaScreenEnum.STORE_FEATURED)
    }
    ,
    UTMessagesDAO.prototype.readLiveMessage = function(t) {
        var r = this
          , n = new EAObservable
          , e = new UTHttpRequest(this.authDelegate);
        return e.setPath("/ut/game/" + GAME_NAME + "/livemessage"),
        e.setRequestType(HttpRequestMethod.PUT),
        e.setUrlVariables({
            screen: this.getLiveMessageScreenName()
        }),
        e.setRequestBody({
            idList: [t]
        }),
        services.UTUtasRequestQueue.send(e).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            n.notify(i)
        }),
        n
    }
    ,
    UTMessagesDAO.prototype.getHubMessages = function(i) {
        var r = this
          , n = new EAObservable
          , o = new UTHttpResponseDTO
          , t = new UTHttpRequest(this.authDelegate)
          , e = this.authDelegate.getUtasSession().user
          , s = e ? e.getSelectedPersona() : null;
        if (DebugUtils.Assert(JSUtils.isValid(s), "No valid persona found when retrieving Aruba hub messages."),
        !s)
            return o.success = !1,
            o.status = HttpStatusCode.BAD_REQUEST,
            n.notify(o),
            n;
        var a = {
            nucPersId: s.id,
            screen: isWeb() ? ArubaScreenEnum.WEB_HUB : ArubaScreenEnum.COMPANION_HUB
        };
        return t.setPath("/ut/game/" + GAME_NAME + "/message/list/template"),
        t.setUrlVariables(a),
        services.UTUtasRequestQueue.send(t).observe(this, function(t, e) {
            t.unobserve(r),
            JSUtils.assignPropertyValues(e, o),
            e.success && JSUtils.isObject(e.response) ? o.response = {
                messages: s && e.response.messageList ? e.response.messageList.slice(0, i).map(function(t) {
                    return new UTArubaMessageEntity(t,s)
                }) : []
            } : o.response = {
                messages: []
            },
            n.notify(o)
        }),
        n
    }
    ,
    UTMessagesDAO.prototype.getDailyGift = function() {
        var r = this
          , n = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/activeMessage"),
        services.UTUtasRequestQueue.send(t).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            e.success && JSUtils.isObject(e.response) && JSUtils.isValid(e.response.activeMessage[0]) ? i.response = {
                dailyGift: new UTDailyGiftEntity(e.response.activeMessage[0])
            } : i.response = {
                dailyGift: null
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTMessagesDAO.prototype.claimDailyGift = function(t) {
        var r = this
          , n = new EAObservable
          , e = new UTHttpRequest(this.authDelegate);
        return e.setPath("/ut/game/" + GAME_NAME + "/activeMessage/" + t),
        e.setRequestType(HttpRequestMethod.DELETE),
        services.UTUtasRequestQueue.send(e).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            n.notify(i)
        }),
        n
    }
    ,
    UTMessagesDAO
}(EAObject))
  , UTMyStadiumSlotEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTMyStadiumSlotEntity(t) {
        var e = i.call(this) || this;
        return e.onDataUpdated = new EAObservable,
        e._locked = t.locked,
        e._item = t.item,
        e._modified = !1,
        e.active = t.active,
        e.emptiable = t.emptiable,
        e.globalId = t.globalId,
        e.home = t.home,
        e.id = t.id,
        e.name = t.name,
        e.sortOrder = t.sortOrder,
        e.stadiumArea = t.category,
        e.validSubTypes = t.vanityTypes,
        e.updateItemState(),
        e
    }
    return __extends(UTMyStadiumSlotEntity, i),
    Object.defineProperty(UTMyStadiumSlotEntity.prototype, "modified", {
        get: function() {
            return this._modified
        },
        set: function(t) {
            this._modified = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTMyStadiumSlotEntity.prototype, "locked", {
        get: function() {
            return this._locked
        },
        set: function(t) {
            this._locked !== t && (this._modified = !0),
            this._locked = t;
            var e = {
                id: this.id
            };
            e.locked = this.locked,
            this.onDataUpdated.notify(this, e)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTMyStadiumSlotEntity.prototype, "item", {
        get: function() {
            return this._item
        },
        set: function(t) {
            this._item !== t && (this._modified = !0),
            this._item = t;
            var e = {
                id: this.id,
                item: this.item
            };
            this.onDataUpdated.notify(this, e)
        },
        enumerable: !1,
        configurable: !0
    }),
    UTMyStadiumSlotEntity.prototype.updateItemState = function() {
        this.item.isValid() && (this.validSubTypes.includes(ItemSubType.BADGE) ? this.item.state = ItemState.ACTIVE_BADGE : this.validSubTypes.includes(ItemSubType.BALL) ? this.item.state = ItemState.ACTIVE_BALL : this.validSubTypes.includes(ItemSubType.KIT) ? this.item.state = this.home ? ItemState.ACTIVE_HOME_KIT : ItemState.ACTIVE_AWAY_KIT : this.validSubTypes.includes(ItemSubType.STADIUM) && (this.item.state = ItemState.ACTIVE_STADIUM))
    }
    ,
    UTMyStadiumSlotEntity
}(EAObject))
  , UTMyStadiumTierEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTMyStadiumTierEntity(t) {
        var e = i.call(this) || this;
        return e.onDataUpdated = new EAObservable,
        e.slots = new EAHashTable,
        e.id = t.id,
        t.slots.forEach(function(t) {
            return e.slots.set(t.id, t)
        }),
        e.setupObservers(),
        e
    }
    return __extends(UTMyStadiumTierEntity, i),
    UTMyStadiumTierEntity.prototype.setupObservers = function() {
        var e = this;
        this.slots.forEach(function(t) {
            t.onDataUpdated.observe(e, e._eMyStadiumSlotUpdated)
        })
    }
    ,
    UTMyStadiumTierEntity.prototype.isTierInProgress = function() {
        return 0 < this.slots.filter(function(t) {
            return t.locked
        }).length
    }
    ,
    UTMyStadiumTierEntity.prototype.getSlotsByCategory = function(e) {
        return this.slots.filter(function(t) {
            return t.stadiumArea === e
        })
    }
    ,
    UTMyStadiumTierEntity.prototype.getSlotById = function(t) {
        return this.slots.get(t)
    }
    ,
    UTMyStadiumTierEntity.prototype.getSlotsBySubtype = function(e) {
        return this.slots.filter(function(t) {
            return t.validSubTypes.includes(e)
        })
    }
    ,
    UTMyStadiumTierEntity.prototype.setSlotLock = function(t, e) {
        var i = this.getSlotById(t);
        i && (i.locked = e)
    }
    ,
    UTMyStadiumTierEntity.prototype.setSlotItem = function(t, e) {
        var i = this.getSlotById(t);
        i && (i.item = e)
    }
    ,
    UTMyStadiumTierEntity.prototype.getSlotsModifiedData = function() {
        return this.slots.filter(function(t) {
            return t.modified
        })
    }
    ,
    UTMyStadiumTierEntity.prototype.clearSlotsModifiedData = function() {
        this.slots.forEach(function(t) {
            return t.modified = !1
        })
    }
    ,
    UTMyStadiumTierEntity.prototype._eMyStadiumSlotUpdated = function(t, e, i) {
        var r = {
            id: this.id,
            slots: []
        }
          , n = {
            id: e.id
        };
        i.locked && (n.locked = i.locked),
        i.item && (n.item = i.item),
        r.slots = [n],
        this.onDataUpdated.notify(this, r)
    }
    ,
    UTMyStadiumTierEntity
}(EAObject))
  , UTMyStadiumEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTMyStadiumEntity(t, e) {
        var i = r.call(this) || this;
        return i.onDataUpdated = new EAObservable,
        i.tiers = new EAHashTable,
        i.name = t.name,
        i.lastUsedTierLevel = t.lastUsedTierLevel,
        i.id = t.stadiumId,
        i.user = t.user ? t.user : null,
        i.stadiumDAO = e,
        t.tiers.forEach(function(t) {
            i.tiers.set(t.id, t),
            t.onDataUpdated.observe(i, i._eMyStadiumTierUpdated)
        }),
        i
    }
    return __extends(UTMyStadiumEntity, r),
    UTMyStadiumEntity.prototype.getTier = function(t) {
        return this.tiers.get(t)
    }
    ,
    UTMyStadiumEntity.prototype.getStadiumLastTierId = function() {
        return this.tiers && 0 < this.tiers.length ? this.tiers.values()[this.tiers.length - 1].id : 0
    }
    ,
    UTMyStadiumEntity.prototype.getStadiumInProgressTier = function() {
        var t = this.tiers.find(function(t) {
            return t.isTierInProgress()
        });
        return t ? t.id : this.getStadiumLastTierId()
    }
    ,
    UTMyStadiumEntity.prototype.getTierSlotById = function(t, e) {
        var i = this.getTier(t);
        return i ? i.getSlotById(e) : null
    }
    ,
    UTMyStadiumEntity.prototype.getActiveClubItemIds = function() {
        function zy(t) {
            return t.filter(function(t) {
                return t.item.isValid()
            }).map(function(t) {
                return t.item.id
            })
        }
        var t = this.getTier(1);
        if (t) {
            var e = t.getSlotsBySubtype(ItemSubType.BADGE)
              , i = t.getSlotsBySubtype(ItemSubType.BALL)
              , r = t.getSlotsBySubtype(ItemSubType.KIT)
              , n = t.getSlotsBySubtype(ItemSubType.STADIUM);
            return zy(e).concat(zy(i), zy(r), zy(n))
        }
        return []
    }
    ,
    UTMyStadiumEntity.prototype.getSlotsBySubtype = function(t) {
        for (var e = [], i = 1; i <= this.lastUsedTierLevel; i++) {
            var r = this.getTier(i);
            r && (e = e.concat(r.getSlotsBySubtype(t)))
        }
        return e
    }
    ,
    UTMyStadiumEntity.prototype.canUseSubtype = function(t) {
        var e = !1;
        return this.getSlotsBySubtype(t).forEach(function(t) {
            t.locked || (e = !0)
        }),
        e
    }
    ,
    UTMyStadiumEntity.prototype.canAssignVanityItem = function(t) {
        return this.canUseSubtype(t.subtype)
    }
    ,
    UTMyStadiumEntity.prototype.getTierUnlockForSubType = function(t) {
        for (var e = this.tiers.keys().map(function(t) {
            return t
        }), i = Math.max.apply(Math, e), r = 1; r <= i; r++) {
            var n = this.getTier(r);
            if (n)
                if (0 < n.getSlotsBySubtype(t).length)
                    return n.id
        }
        return -1
    }
    ,
    UTMyStadiumEntity.prototype.getAreaSlots = function(t, e) {
        for (var i = [], r = 1; r <= e; r++) {
            var n = this.getTier(r);
            if (n) {
                var o = n.getSlotsByCategory(t);
                i = i.concat(o)
            }
        }
        return i
    }
    ,
    UTMyStadiumEntity.prototype.getModifiedData = function() {
        var r = {
            tiers: []
        };
        return this.tiers.forEach(function(t) {
            var e, i = t.getSlotsModifiedData();
            0 < i.length && (null === (e = r.tiers) || void 0 === e || e.push({
                id: t.id,
                slots: i
            }))
        }),
        r
    }
    ,
    UTMyStadiumEntity.prototype.clearModifiedFlag = function() {
        this.tiers.forEach(function(t) {
            return t.clearSlotsModifiedData()
        })
    }
    ,
    UTMyStadiumEntity.prototype.isStadiumModified = function() {
        var t = this.getModifiedData();
        return 0 < (t.tiers ? t.tiers : []).length
    }
    ,
    UTMyStadiumEntity.prototype.setName = function(t) {
        this.name = t,
        this.onDataUpdated.notify({
            name: this.name
        })
    }
    ,
    UTMyStadiumEntity.prototype.setLastUsedTierLevel = function(t) {
        this.lastUsedTierLevel = t,
        this.onDataUpdated.notify({
            lastUsedTierLevel: this.lastUsedTierLevel
        })
    }
    ,
    UTMyStadiumEntity.prototype.setSlotLock = function(t, e, i) {
        var r = this.getTier(e);
        r && r.setSlotLock(t, i)
    }
    ,
    UTMyStadiumEntity.prototype.setSlot = function(t, e, i) {
        var r, n, o = this.getTierSlotById(e, t);
        if (o) {
            var s = this.lastUsedTierLevel
              , a = o.item;
            if (o.item = i || new UTNullItemEntity,
            o.updateItemState(),
            a.isActiveClubItem() && (a.state = ItemState.FREE),
            o.item.isMyStadium()) {
                switch (o.item.definitionId) {
                case UTItemEntity.CUSTOM_STADIUM_TIER_1:
                    s = 1;
                    break;
                case UTItemEntity.CUSTOM_STADIUM_TIER_2:
                    s = 2;
                    break;
                case UTItemEntity.CUSTOM_STADIUM_TIER_3:
                    s = 3
                }
                this.lastUsedTierLevel = s
            }
            var l = null === (n = null === (r = this.user) || void 0 === r ? void 0 : r.getSelectedPersona()) || void 0 === n ? void 0 : n.getCurrentClub();
            return l && i.isValid() && i.isBadge() && l.setAssetId(i.teamId),
            getDefaultDispatcher().notify(AppNotification.ITEM_ACTIVATE, this, {
                itemIds: [Number(i.id)]
            }),
            !0
        }
        return !1
    }
    ,
    UTMyStadiumEntity.prototype.saveStadium = function() {
        var i = this
          , t = this.getModifiedData();
        if (!t.tiers || 0 === t.tiers.length) {
            var e = new EAObservable
              , r = new UTHttpResponseDTO;
            return r.status = HttpStatusCode.BAD_REQUEST,
            r.response = {
                objectiveUpdates: null
            },
            e.notify(r),
            e
        }
        var n = this.stadiumDAO.saveStadium(t.tiers).observe(this, function(t, e) {
            t.unobserve(i),
            e.success ? (i.clearModifiedFlag(),
            JSUtils.isObject(e.response) && e.response.objectiveUpdates && getDefaultDispatcher().notify(AppNotification.OBJECTIVE_UPDATE, i, e.response.objectiveUpdates)) : getDefaultDispatcher().notify(AppNotification.STADIUM_SAVE_FAILED, i),
            n.notify(e)
        });
        return n
    }
    ,
    UTMyStadiumEntity.prototype._eMyStadiumTierUpdated = function(t, e, i) {
        var r = {
            tiers: []
        };
        r.tiers.push({
            slots: i.slots,
            id: i.id
        }),
        this.onDataUpdated.notify(r)
    }
    ,
    UTMyStadiumEntity
}(EAObject))
  , UTMyStadiumFactory = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTMyStadiumFactory(t) {
        var e = i.call(this) || this;
        return e.stadiumDAO = t,
        e
    }
    return __extends(UTMyStadiumFactory, i),
    UTMyStadiumFactory.prototype.generateSlot = function(t) {
        var e = {
            active: t.activeSlot,
            category: t.stadiumArea,
            emptiable: !!t.emptiable && t.emptiable,
            globalId: t.clientSlotId,
            home: t.home,
            id: t.slotId,
            item: factories.Item.createVanityItem(t.itemData),
            locked: t.locked,
            name: t.slotName,
            sortOrder: t.sortOrder,
            vanityTypes: t.vanityTypes
        };
        return new UTMyStadiumSlotEntity(e)
    }
    ,
    UTMyStadiumFactory.prototype.processSlotEntities = function(t) {
        var e = this;
        return t.map(function(t) {
            return e.generateSlot(t)
        })
    }
    ,
    UTMyStadiumFactory.prototype.processStadiumTier = function(t) {
        var e = {
            id: t.tier,
            defId: t.stadiumDefinitionId,
            slots: this.processSlotEntities(t.slots)
        };
        return new UTMyStadiumTierEntity(e)
    }
    ,
    UTMyStadiumFactory.prototype.createStadium = function(t, e) {
        var i = this
          , r = {
            name: t.name,
            lastUsedTierLevel: t.lastUsedTierLevel,
            stadiumId: t.stadiumId,
            tiers: t.tiers.map(function(t) {
                return i.processStadiumTier(t)
            })
        };
        return e && (r.user = e),
        new UTMyStadiumEntity(r,this.stadiumDAO)
    }
    ,
    UTMyStadiumFactory
}(EAObject))
  , UTMyStadiumDAO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTMyStadiumDAO(t) {
        var e = i.call(this) || this;
        return e.authDelegate = t,
        e.stadiumFactory = new UTMyStadiumFactory(e),
        e.updateFactory = new UTObjectivesUpdateFactory,
        e
    }
    return __extends(UTMyStadiumDAO, i),
    UTMyStadiumDAO.prototype.getStadium = function() {
        var o = this
          , s = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/stadium"),
        services.UTUtasRequestQueue.send(t).observe(this, function(t, e) {
            t.unobserve(o);
            var i = new UTHttpResponseDTO;
            if (JSUtils.assignPropertyValues(e, i),
            e.success && JSUtils.isObject(e.response)) {
                var r = o.authDelegate.getUtasSession().user
                  , n = r ? o.stadiumFactory.createStadium(e.response, r) : o.stadiumFactory.createStadium(e.response);
                i.response = {
                    stadium: n
                }
            } else
                i.response = {
                    stadium: null
                };
            s.notify(i)
        }),
        s
    }
    ,
    UTMyStadiumDAO.prototype.saveStadium = function(t) {
        var n = this
          , o = new EAObservable
          , e = new UTHttpRequest(this.authDelegate);
        return e.setPath("/ut/game/" + GAME_NAME + "/stadium"),
        e.setRequestType(HttpRequestMethod.POST),
        e.setRequestBody({
            tiers: t.map(function(t) {
                return {
                    tier: t.id,
                    slots: t.slots.map(function(t) {
                        var e;
                        return {
                            slotId: t.id,
                            itemId: (null === (e = t.item) || void 0 === e ? void 0 : e.isValid()) ? t.item.id : null
                        }
                    })
                }
            })
        }),
        services.UTUtasRequestQueue.send(e).observe(this, function(t, e) {
            t.unobserve(n);
            var i = new UTHttpResponseDTO;
            if (JSUtils.assignPropertyValues(e, i),
            e.success && JSUtils.isObject(e.response)) {
                var r = e.response.dynamicObjectivesUpdates;
                i.response = {
                    objectiveUpdates: r ? n.updateFactory.createObjectivesUpdate(r) : null
                }
            } else
                i.response = {
                    objectiveUpdates: null
                };
            o.notify(i)
        }),
        o
    }
    ,
    UTMyStadiumDAO
}(EAObject))
  , UTCampaignEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTCampaignEntity(t) {
        var e = i.call(this) || this;
        return e.title = t.title,
        e.startTime = t.startTime,
        e.endTime = t.endTime,
        e.nextCampaignStartTime = JSUtils.isNumber(t.nextCampaignStartTime) ? t.nextCampaignStartTime : 0,
        e.hasPreviousCampaign = t.hasPreviousCampaign,
        e.needsAutoClaim = t.needsAutoClaim,
        e.needsMilestonesAutoClaim = !!JSUtils.isBoolean(t.needsMilestonesAutoClaim) && t.needsMilestonesAutoClaim,
        e.remainingRewards = JSUtils.isNumber(t.remainingRewards) ? t.remainingRewards : 0,
        e.levels = new EAHashTable,
        e.xp = t.userXp,
        e
    }
    return __extends(UTCampaignEntity, i),
    UTCampaignEntity.prototype.getTimeRemaining = function() {
        return Math.max(0, this.endTime - Math.floor(Date.now() / MS_PER_SECOND))
    }
    ,
    UTCampaignEntity.prototype.setLevels = function(t) {
        var e = this;
        t.forEach(function(t) {
            return e.levels.set(t.id, t)
        })
    }
    ,
    UTCampaignEntity.prototype.getLevels = function() {
        return this.levels.values()
    }
    ,
    UTCampaignEntity.prototype.getLevelById = function(t) {
        return this.levels.get(t)
    }
    ,
    UTCampaignEntity.prototype.hasLevels = function() {
        return 0 < this.levels.length
    }
    ,
    UTCampaignEntity.prototype.isLastCampaign = function() {
        return this.nextCampaignStartTime === MAX_JAVA_INT
    }
    ,
    UTCampaignEntity.prototype.inProgress = function() {
        var t = Math.floor(Date.now() / MS_PER_SECOND);
        return this.startTime <= t && this.endTime > t
    }
    ,
    UTCampaignEntity.prototype.hasStarted = function() {
        return this.startTime <= Math.floor(Date.now() / MS_PER_SECOND)
    }
    ,
    UTCampaignEntity.prototype.hasEnded = function() {
        return this.endTime <= Math.floor(Date.now() / MS_PER_SECOND)
    }
    ,
    UTCampaignEntity.prototype.hasOutstandingRewards = function() {
        return this.needsAutoClaim
    }
    ,
    UTCampaignEntity.prototype.hasOutstandingMilestoneRewards = function() {
        return this.needsMilestonesAutoClaim
    }
    ,
    UTCampaignEntity.prototype.hasUnclaimedRewards = function() {
        var e = this;
        return this.needsAutoClaim || JSUtils.isValid(JSUtils.find(this.getLevels(), function(t) {
            return t.isClaimable(e.xp)
        }))
    }
    ,
    UTCampaignEntity.prototype.hasNextCampaignStarted = function() {
        return this.hasEnded() && this.nextCampaignStartTime <= Math.floor(Date.now() / MS_PER_SECOND)
    }
    ,
    UTCampaignEntity
}(EAObject))
  , UTCampaignGroupEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTCampaignGroupEntity(t) {
        var e = i.call(this) || this;
        return e.compositeId = t.compositeId,
        e.endTime = t.endTime,
        e.groupIdsToUnlock = t.lockedBy,
        e.id = t.id,
        e.objectives = new EAHashTable,
        e.objectivesCompleted = t.objectivesCompleted,
        e.objectivesNumber = t.objectivesCount,
        e.onDataUpdated = new EAObservable,
        e.priority = t.priority,
        e.rewards = t.rewardSet,
        e.startTime = t.startTime,
        e._state = t.state,
        e.subtitle = t.subtitle,
        e.title = t.title,
        e.type = t.type,
        e.visibilityTime = t.visibilityTime,
        e.subGroupType = t.subGroupType ? t.subGroupType : 0,
        e.subGroupTypeAttribute = t.subGroupTypeAttribute ? t.subGroupTypeAttribute : 0,
        e
    }
    return __extends(UTCampaignGroupEntity, i),
    Object.defineProperty(UTCampaignGroupEntity.prototype, "state", {
        get: function() {
            return this._state
        },
        set: function(t) {
            this._state !== t && (this._state = t,
            this.onDataUpdated.notify(this, {
                state: this._state
            }))
        },
        enumerable: !1,
        configurable: !0
    }),
    UTCampaignGroupEntity.prototype.addObjectives = function(t) {
        var i = this
          , r = {
            objectives: []
        };
        t.forEach(function(t) {
            var e = i.objectives.get(t.id);
            e ? (e.onDataUpdated.unobserve(i),
            e.update(t),
            e.onDataUpdated.observe(i, i.onObjectiveUpdated),
            r.objectives && r.objectives.push({
                id: e.id,
                progress: e.progress,
                state: e.state
            })) : (i.objectives.set(t.id, t),
            t.onDataUpdated.observe(i, i.onObjectiveUpdated),
            r.objectives && r.objectives.push({
                id: t.id
            }))
        }),
        r.objectives && 0 < r.objectives.length && this.onDataUpdated.notify(this, r)
    }
    ,
    UTCampaignGroupEntity.prototype.hasObjectives = function() {
        return 0 < this.objectives.length
    }
    ,
    UTCampaignGroupEntity.prototype.getObjectiveById = function(t) {
        return this.objectives.get(t)
    }
    ,
    UTCampaignGroupEntity.prototype.getObjectives = function() {
        return this.objectives.values()
    }
    ,
    UTCampaignGroupEntity.prototype.getNumberOfCompletedObjectives = function() {
        return 0 < this.objectives.length ? this.objectives.filter(function(t) {
            return t.isClaimable() || t.isRedeemed()
        }).length : this.objectivesCompleted
    }
    ,
    UTCampaignGroupEntity.prototype.getProgress = function() {
        var t = this.getNumberOfCompletedObjectives()
          , e = Math.round(t / this.objectivesNumber * 100);
        return JSUtils.isNumber(e) ? e : 0
    }
    ,
    UTCampaignGroupEntity.prototype.getTimeRemaining = function() {
        return Math.max(0, this.endTime - Math.round(Date.now() / MS_PER_SECOND))
    }
    ,
    UTCampaignGroupEntity.prototype.getTimeUntilStart = function() {
        return Math.max(0, this.startTime - Math.round(Date.now() / MS_PER_SECOND))
    }
    ,
    UTCampaignGroupEntity.prototype.hasExpired = function() {
        return !this.isMilestone() && this.getTimeRemaining() <= 0
    }
    ,
    UTCampaignGroupEntity.prototype.isNotStarted = function() {
        return this.state === ObjectiveGroupStateEnum.UNDEFINED
    }
    ,
    UTCampaignGroupEntity.prototype.isInProgress = function() {
        return this.state === ObjectiveGroupStateEnum.IN_PROGRESS
    }
    ,
    UTCampaignGroupEntity.prototype.isRedeemed = function() {
        return this.state === ObjectiveGroupStateEnum.REWARDED
    }
    ,
    UTCampaignGroupEntity.prototype.isCompleted = function() {
        return this.state === ObjectiveGroupStateEnum.COMPLETED
    }
    ,
    UTCampaignGroupEntity.prototype.isRedeemFailure = function() {
        return this.state === ObjectiveGroupStateEnum.REDEEM_FAILURE
    }
    ,
    UTCampaignGroupEntity.prototype.hasUnclaimedObjectiveRewards = function() {
        return null !== this.objectives.find(function(t) {
            return !t.isRedeemed()
        })
    }
    ,
    UTCampaignGroupEntity.prototype.isClaimable = function() {
        return (this.isCompleted() || this.isRedeemFailure()) && !this.hasUnclaimedObjectiveRewards()
    }
    ,
    UTCampaignGroupEntity.prototype.isLockedBehindStartTime = function() {
        return 0 === this.visibilityTime && this.startTime > Math.round(Date.now() / MS_PER_SECOND)
    }
    ,
    UTCampaignGroupEntity.prototype.isComingSoon = function() {
        var t = Math.round(Date.now() / MS_PER_SECOND);
        return 0 < this.visibilityTime && t > this.visibilityTime && t < this.startTime
    }
    ,
    UTCampaignGroupEntity.prototype.isFoundation = function() {
        return this.type === ObjectiveGroupType.LEARNING
    }
    ,
    UTCampaignGroupEntity.prototype.isMilestone = function() {
        return this.type === ObjectiveGroupType.MILESTONE
    }
    ,
    UTCampaignGroupEntity.prototype.isExpiringMilestone = function() {
        return this.type === ObjectiveGroupType.EXPIRING_MILESTONE
    }
    ,
    UTCampaignGroupEntity.prototype.update = function(t) {
        if (this.id === t.id && this.type === t.type) {
            var e = {};
            this._state !== t.state && (this._state = t.state,
            e.state = this._state),
            this.objectivesCompleted !== t.objectivesCompleted && (this.objectivesCompleted = t.objectivesCompleted,
            e.objectivesCompleted = this.objectivesCompleted),
            0 < Object.keys(e).length && this.onDataUpdated.notify(this, e)
        }
    }
    ,
    UTCampaignGroupEntity.prototype.onObjectiveUpdated = function(t, e, i) {
        var r = {
            objectives: [{
                id: e.id
            }]
        };
        if (r.objectives) {
            var n = r.objectives[0];
            i.progress && (n.progress = i.progress),
            i.state && (n.state = i.state)
        }
        this.onDataUpdated.notify(this, r)
    }
    ,
    UTCampaignGroupEntity
}(EAObject))
  , UTCampaignCategoryEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTCampaignCategoryEntity(t, e) {
        var i = r.call(this) || this;
        return i.groups = new EAHashTable,
        i.id = t.id,
        i.name = t.name,
        i.objectiveDao = e || null,
        i.priority = t.priority,
        t.groups.forEach(function(t) {
            return i.groups.set(t.compositeId, t)
        }),
        i
    }
    return __extends(UTCampaignCategoryEntity, r),
    UTCampaignCategoryEntity.prototype.claimGroupRewards = function(t) {
        var i = this;
        if (DebugUtils.Assert(JSUtils.isValid(this.objectiveDao), "A data access object is required to claim group rewards."),
        !this.objectiveDao) {
            var e = new EAObservable
              , r = new UTHttpResponseDTO;
            return e.notify(r),
            e
        }
        var n, o = this.getGroup(t);
        if (DebugUtils.Assert(JSUtils.isValid(o), "Unable to find group for composite ID: " + t),
        !o) {
            e = new EAObservable;
            return (r = new UTHttpResponseDTO).status = HttpStatusCode.BAD_REQUEST,
            e.notify(r),
            e
        }
        switch (o.type) {
        case ObjectiveGroupType.WORLD:
            n = this.objectiveDao.claimWorldGroupRewards(o.id);
            break;
        case ObjectiveGroupType.MILESTONE:
        case ObjectiveGroupType.EXPIRING_MILESTONE:
            n = this.objectiveDao.claimLearningGroupRewards(o.id);
            break;
        default:
            n = this.objectiveDao.claimSeasonalGroupRewards(o.id)
        }
        return n.observe(this, function(t, e) {
            t.unobserve(i),
            o.state = e.success ? ObjectiveGroupStateEnum.REWARDED : ObjectiveGroupStateEnum.REDEEM_FAILURE
        }),
        n
    }
    ,
    UTCampaignCategoryEntity.prototype.claimObjectiveRewards = function(t, e) {
        var i = this;
        if (DebugUtils.Assert(JSUtils.isValid(this.objectiveDao), "A data access object is required to claim objective rewards."),
        !this.objectiveDao) {
            var r = new EAObservable
              , n = new UTHttpResponseDTO;
            return r.notify(n),
            r
        }
        var o = this.getGroup(t);
        if (DebugUtils.Assert(JSUtils.isValid(o), "Unable to find group for composite ID: " + t),
        !o) {
            r = new EAObservable;
            return (n = new UTHttpResponseDTO).status = HttpStatusCode.BAD_REQUEST,
            r.notify(n),
            r
        }
        var s, a = o.getObjectiveById(e);
        switch (DebugUtils.Assert(JSUtils.isValid(a), "Unable to find objective for ID: " + e),
        o.type) {
        case ObjectiveGroupType.WORLD:
            s = this.objectiveDao.claimWorldObjectiveRewards(o.id, e);
            break;
        case ObjectiveGroupType.MILESTONE:
        case ObjectiveGroupType.EXPIRING_MILESTONE:
            s = this.objectiveDao.claimLearningObjectiveRewards(o.id, e);
            break;
        default:
            s = this.objectiveDao.claimSeasonalObjectiveRewards(o.id, e)
        }
        return s.observe(this, function(t, e) {
            t.unobserve(i),
            e.success && a && (a.state = ObjectiveProgressState.REDEEMED)
        }),
        s
    }
    ,
    UTCampaignCategoryEntity.prototype.getGroup = function(t) {
        return this.groups.get(t)
    }
    ,
    UTCampaignCategoryEntity.prototype.getGroups = function() {
        return this.groups.values()
    }
    ,
    UTCampaignCategoryEntity.prototype.getGroupsByType = function(e) {
        return this.groups.values().filter(function(t) {
            return t.type === e
        })
    }
    ,
    UTCampaignCategoryEntity.prototype.getLockingGroups = function(t) {
        var r = this.getGroup(t);
        if (DebugUtils.Assert(JSUtils.isValid(r), "Unable to find group with composite ID: " + t),
        !r)
            return [];
        var n = r.subGroupType === ObjectiveSubGroupType.STADIUM;
        return this.groups.filter(function(t) {
            var e = 0 <= r.groupIdsToUnlock.indexOf(t.id)
              , i = n ? t.isRedeemed() : !(t.isNotStarted() || t.isInProgress());
            return e && !i
        })
    }
    ,
    UTCampaignCategoryEntity.prototype.isFoundation = function() {
        return JSUtils.isValid(this.groups.find(function(t) {
            return t.isFoundation()
        }))
    }
    ,
    UTCampaignCategoryEntity.prototype.isMilestone = function() {
        return JSUtils.isValid(this.groups.find(function(t) {
            return t.isMilestone()
        }))
    }
    ,
    UTCampaignCategoryEntity.prototype.isExpiringMilestone = function() {
        return JSUtils.isValid(this.groups.find(function(t) {
            return t.isExpiringMilestone()
        }))
    }
    ,
    UTCampaignCategoryEntity.prototype.isGroupLockedBehindGroups = function(t) {
        return 0 < this.getLockingGroups(t).length
    }
    ,
    UTCampaignCategoryEntity.prototype.hasUnclaimedGroupReward = function() {
        return JSUtils.isValid(this.groups.find(function(t) {
            return t.isClaimable()
        }))
    }
    ,
    UTCampaignCategoryEntity.prototype.hasUnclaimedExpiredGroup = function() {
        return JSUtils.isValid(this.groups.find(function(t) {
            return !t.isMilestone() && t.hasExpired() && t.isClaimable()
        }))
    }
    ,
    UTCampaignCategoryEntity
}(EAObject))
  , UTCampaignObjectiveEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTCampaignObjectiveEntity(t) {
        var e = i.call(this) || this;
        return e.companion = t.companion,
        e.description = t.description,
        e.id = t.id,
        e.link = t.redirectLink,
        e.multiplier = t.multiplier || 1,
        e.onDataUpdated = new EAObservable,
        e._state = t.state,
        e._progress = t.progress,
        e.rewards = t.rewards,
        e.title = t.name,
        e
    }
    return __extends(UTCampaignObjectiveEntity, i),
    Object.defineProperty(UTCampaignObjectiveEntity.prototype, "progress", {
        get: function() {
            return this._progress
        },
        set: function(t) {
            this._progress !== t && (this._progress = t,
            this.onDataUpdated.notify(this, {
                progress: this._progress
            }))
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTCampaignObjectiveEntity.prototype, "currentProgress", {
        get: function() {
            return this.progress
        },
        set: function(t) {
            this.progress = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTCampaignObjectiveEntity.prototype, "state", {
        get: function() {
            return this._state
        },
        set: function(t) {
            this._state !== t && (this._state = t,
            this.onDataUpdated.notify(this, {
                state: this._state
            }))
        },
        enumerable: !1,
        configurable: !0
    }),
    UTCampaignObjectiveEntity.prototype.getProgressPercentage = function() {
        var t = Math.round(this.currentProgress / this.multiplier * 100);
        return JSUtils.isNumber(t) ? t : 0
    }
    ,
    UTCampaignObjectiveEntity.prototype.isNotStarted = function() {
        return this.state === ObjectiveProgressState.INVALID
    }
    ,
    UTCampaignObjectiveEntity.prototype.isInProgress = function() {
        return this.state === ObjectiveProgressState.IN_PROGRESS
    }
    ,
    UTCampaignObjectiveEntity.prototype.isXpRedeemed = function() {
        return this.state === ObjectiveProgressState.XP_REDEEMED
    }
    ,
    UTCampaignObjectiveEntity.prototype.isCompleted = function() {
        return this.state === ObjectiveProgressState.COMPLETED
    }
    ,
    UTCampaignObjectiveEntity.prototype.isRedeemed = function() {
        return this.state === ObjectiveProgressState.REDEEMED
    }
    ,
    UTCampaignObjectiveEntity.prototype.isClaimable = function() {
        return this.isXpRedeemed() || this.isCompleted()
    }
    ,
    UTCampaignObjectiveEntity.prototype.hasRedirectLink = function() {
        return this.companion && (this.link === RedirectId.AUCTION_SEARCH || this.link === RedirectId.SBC || this.link === RedirectId.SBC_SQUAD || this.link === RedirectId.SQUAD || this.link === RedirectId.TRADE_PILE)
    }
    ,
    UTCampaignObjectiveEntity.prototype.update = function(t) {
        if (this.id === t.id) {
            var e = {};
            this._progress !== t.progress && (this._progress = t.progress,
            e.progress = this._progress),
            this._state !== t.state && (this._state = t.state,
            e.state = this._state),
            0 < Object.keys(e).length && this.onDataUpdated.notify(this, e)
        }
    }
    ,
    UTCampaignObjectiveEntity
}(EAObject))
  , UTCampaignLevelEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTCampaignLevelEntity(t, e) {
        var i = r.call(this) || this;
        return i.chosenOption = JSUtils.isNumber(t.chosenOption) ? t.chosenOption : -1,
        i.defaultRewardIndex = i.findDefaultRewardIndex(e),
        i.id = t.levelId,
        i.rewardOptions = e,
        i.state = t.state ? t.state : ObjectiveMilestoneState.UNKNOWN,
        i.title = services.Localization.localize("scmp.campaign.level.title", [i.id.toString()]),
        i.xp = t.xpThreshold,
        i
    }
    return __extends(UTCampaignLevelEntity, r),
    UTCampaignLevelEntity.prototype.findDefaultRewardIndex = function(t) {
        var e = JSUtils.find(t, function(t) {
            return t.default
        });
        if (e) {
            var i = t.indexOf(e);
            return 0 < i ? i : 0
        }
        return 0
    }
    ,
    UTCampaignLevelEntity.prototype.areRewardsVisible = function() {
        return !JSUtils.isValid(JSUtils.find(this.rewardOptions, function(t) {
            return t.hidden
        }))
    }
    ,
    UTCampaignLevelEntity.prototype.isClaimable = function(t) {
        return t >= this.xp && this.state !== ObjectiveMilestoneState.REWARDED
    }
    ,
    UTCampaignLevelEntity
}(EAObject))
  , UTWorldFactionEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTWorldFactionEntity(t) {
        var e = i.call(this) || this;
        return e.displayOrder = t.displayOrder,
        e.assetPath = t.assetPath,
        e.description = t.description,
        e.id = t.id,
        e.name = t.name,
        e.rewardSet = t.rewards,
        e.score = JSUtils.isNumber(t.score) ? t.score : -1,
        e
    }
    return __extends(UTWorldFactionEntity, i),
    UTWorldFactionEntity
}(EAObject))
  , UTWorldMilestoneEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTWorldMilestoneEntity(t) {
        var e = i.call(this) || this;
        return e.experience = t.experience,
        e.id = t.id,
        e.rewardSet = t.rewards,
        e.state = t.state,
        e
    }
    return __extends(UTWorldMilestoneEntity, i),
    UTWorldMilestoneEntity.prototype.hasVisibleRewards = function() {
        return !this.rewardSet.hidden
    }
    ,
    UTWorldMilestoneEntity.prototype.hasClaimedRewards = function() {
        return this.state === ObjectiveMilestoneState.REWARDED
    }
    ,
    UTWorldMilestoneEntity
}(EAObject))
  , UTWorldCampaignEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTWorldCampaignEntity(t, e) {
        var i = r.call(this) || this;
        return i.assetPath = t.assetPath,
        i.description = t.description,
        i.endTime = t.endTime,
        i._experience = JSUtils.isNumber(t.experience) ? t.experience : 0,
        i.factionId = JSUtils.isNumber(t.factionId) ? t.factionId : -1,
        i.factions = new EAHashTable,
        i.id = t.id,
        i.milestones = new EAHashTable,
        i.name = t.name,
        i.objectiveDao = e || null,
        i.onDataUpdated = new EAObservable,
        i.progressType = t.progressType,
        i.rewardingTime = t.rewardingTime,
        i.score = JSUtils.isNumber(t.score) ? t.score : -1,
        i.startTime = t.startTime,
        i.type = t.type,
        t.factions && t.factions.forEach(function(t) {
            return i.factions.set(t.id, t)
        }),
        t.milestones && t.milestones.forEach(function(t) {
            return i.milestones.set(t.id, t)
        }),
        i
    }
    return __extends(UTWorldCampaignEntity, r),
    UTWorldCampaignEntity.prototype.joinFaction = function(i) {
        var r = this;
        if (DebugUtils.Assert(JSUtils.isValid(this.objectiveDao), "No data access object found while attempting to join a faction."),
        !this.objectiveDao) {
            var t = new EAObservable
              , e = new UTHttpResponseDTO;
            return e.response = {
                rewardsGranted: []
            },
            t.notify(e),
            t
        }
        DebugUtils.Assert(this.type === WorldCampaignType.FACTION, "Cannot join a faction on a non-faction campaign."),
        DebugUtils.Assert(JSUtils.isValid(this.getFactionById(i)), "Unable to find faction for ID: " + i);
        var n = this.objectiveDao.joinWorldFaction(i);
        return n.observe(this, function(t, e) {
            t.unobserve(r),
            e.success && e.response && !JSUtils.isString(e.response) && (r.factionId = i,
            0 < e.response.factionScores.length && e.response.factionScores.forEach(function(t) {
                var e = r.getFactionById(t.id);
                e && (e.score = t.score)
            }),
            r.onDataUpdated.notify(r, {
                selectedFactionId: r.factionId
            }))
        }),
        n
    }
    ,
    UTWorldCampaignEntity.prototype.claimMilestoneRewards = function(t) {
        var i = this;
        if (DebugUtils.Assert(JSUtils.isValid(this.objectiveDao), "A data access object is required to claim milestone rewards."),
        !this.objectiveDao) {
            var e = new EAObservable
              , r = new UTHttpResponseDTO;
            return r.response = {
                milestoneId: 0,
                rewards: []
            },
            e.notify(r),
            e
        }
        DebugUtils.Assert(this.type === WorldCampaignType.MILESTONE, "Cannot claim milestone rewards on a non-milestone campaign.");
        var n = this.getMilestoneById(t);
        DebugUtils.Assert(JSUtils.isValid(n), "Unable to find milestone for ID: " + t),
        DebugUtils.Assert(!!n && this.score >= n.experience, "Cannot claim rewards for a locked milestone.");
        var o = this.objectiveDao.claimWorldMilestoneRewards(t);
        return o.observe(this, function(t, e) {
            t.unobserve(i),
            n && (n.state = e.success ? ObjectiveMilestoneState.REWARDED : ObjectiveMilestoneState.REWARD_FAILED)
        }),
        o
    }
    ,
    Object.defineProperty(UTWorldCampaignEntity.prototype, "experience", {
        get: function() {
            return this._experience
        },
        enumerable: !1,
        configurable: !0
    }),
    UTWorldCampaignEntity.prototype.getSelectedFaction = function() {
        return this.factions.get(this.factionId)
    }
    ,
    UTWorldCampaignEntity.prototype.getFactionById = function(t) {
        return this.factions.get(t)
    }
    ,
    UTWorldCampaignEntity.prototype.getFactions = function() {
        return this.factions.values()
    }
    ,
    UTWorldCampaignEntity.prototype.getMilestoneById = function(t) {
        return this.milestones.get(t)
    }
    ,
    UTWorldCampaignEntity.prototype.getMilestones = function() {
        return this.milestones.values()
    }
    ,
    UTWorldCampaignEntity.prototype.getTimeRemaining = function() {
        var t = Math.round(Date.now() / MS_PER_SECOND);
        return t < this.endTime ? this.endTime - t : 0
    }
    ,
    UTWorldCampaignEntity.prototype.getTimeUntilStart = function() {
        var t = Math.round(Date.now() / MS_PER_SECOND);
        return t < this.startTime ? this.startTime - t : 0
    }
    ,
    UTWorldCampaignEntity.prototype.getTimeUntilRewardsGranted = function() {
        var t = Math.round(Date.now() / MS_PER_SECOND);
        return t < this.rewardingTime ? this.rewardingTime - t : 0
    }
    ,
    UTWorldCampaignEntity.prototype.canClaimMilestoneRewards = function(t) {
        var e = this.getMilestoneById(t);
        return !!e && (e.hasClaimedRewards() && this.score >= e.experience)
    }
    ,
    UTWorldCampaignEntity.prototype.update = function(t) {
        var e = {};
        this._experience !== t.experience && (this._experience = t.experience,
        e.experience = this._experience),
        this.factionId !== t.factionId && (this.factionId = t.factionId,
        e.selectedFactionId = this.factionId),
        this.score !== t.score && (this.score = t.score,
        e.score = this.score),
        0 < Object.keys(e).length && this.onDataUpdated.notify(this, e)
    }
    ,
    UTWorldCampaignEntity
}(EAObject))
  , UTObjectivesFactory = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTObjectivesFactory(t) {
        var e = i.call(this) || this;
        return e.rewardFactory = t,
        e
    }
    return __extends(UTObjectivesFactory, i),
    UTObjectivesFactory.generateCompositeGroupId = function(t, e) {
        return t + "-" + e
    }
    ,
    UTObjectivesFactory.prototype.createGroup = function(t, e) {
        var i = this
          , r = this.rewardFactory.createRewardSetFromRewards(e.awardsList ? e.awardsList.map(function(t) {
            return i.rewardFactory.createRewardFromObjectiveData(t)
        }) : []);
        return new UTCampaignGroupEntity({
            categoryIds: [t],
            compositeId: UTObjectivesFactory.generateCompositeGroupId(e.groupType, e.groupId),
            endTime: e.endTime ? e.endTime : 0,
            id: e.groupId,
            lockedBy: e.groupIdsToUnlock ? e.groupIdsToUnlock : [],
            objectivesCompleted: e.objectivesCompleted ? e.objectivesCompleted : 0,
            objectivesCount: e.objectivesNumber ? e.objectivesNumber : 0,
            priority: e.priority,
            rewardSet: r,
            startTime: e.startTime ? e.startTime : 0,
            state: e.groupState,
            subtitle: e.subTitle,
            title: e.title,
            type: e.groupType,
            visibilityTime: e.visibilityTime ? e.visibilityTime : 0,
            subGroupType: e.subGroupType ? e.subGroupType : 0,
            subGroupTypeAttribute: e.subGroupTypeAttribute ? e.subGroupTypeAttribute : 0
        })
    }
    ,
    UTObjectivesFactory.prototype.createCampaign = function(t) {
        return new UTCampaignEntity(t)
    }
    ,
    UTObjectivesFactory.prototype.createLevel = function(t) {
        var e = this
          , i = JSUtils.valToArray(t.rewardOptionList).map(function(t) {
            return e.rewardFactory.createRewardSetFromCampaignLevelData(t)
        });
        return new UTCampaignLevelEntity(t,i)
    }
    ,
    UTObjectivesFactory.prototype.createCategory = function(e, t) {
        var i = this
          , r = JSUtils.valToArray(e.groupsList).map(function(t) {
            return i.createGroup(e.categoryId, t)
        });
        return new UTCampaignCategoryEntity({
            groups: r,
            id: e.categoryId,
            name: e.name,
            priority: e.priority
        },t)
    }
    ,
    UTObjectivesFactory.prototype.createObjective = function(t) {
        var e = this
          , i = this.rewardFactory.createRewardSetFromRewards(t.awards.map(function(t) {
            return e.rewardFactory.createRewardFromObjectiveData(t)
        }))
          , r = t.state ? ObjectiveProgressState[t.state] : ObjectiveProgressState.INVALID;
        return JSUtils.isNumber(r) || (r = ObjectiveProgressState.INVALID),
        new UTCampaignObjectiveEntity({
            companion: t.isWeb,
            description: t.description,
            id: t.objectiveId,
            multiplier: t.multiplier || 1,
            name: t.name,
            priority: t.priority,
            progress: JSUtils.isNumber(t.currentProgress) ? t.currentProgress : 0,
            redirectLink: t.takeMeThereLink.toLowerCase(),
            rewards: i,
            state: r
        })
    }
    ,
    UTObjectivesFactory.prototype.generateWorldFaction = function(t, e, i) {
        var r = this
          , n = {
            assetPath: e,
            description: t.subTitle,
            id: t.factionId,
            displayOrder: i,
            name: t.title,
            rewards: this.rewardFactory.createRewardSetFromRewards(t.winningRewards.map(function(t) {
                return r.rewardFactory.createRewardFromObjectiveData(t)
            }))
        };
        return JSUtils.isNumber(t.factionScore) && (n.score = t.factionScore),
        new UTWorldFactionEntity(n)
    }
    ,
    UTObjectivesFactory.prototype.generateWorldCampaignFromFactionData = function(i, t) {
        var r = this
          , e = {
            assetPath: i.campaignBg,
            description: i.subTitle,
            endTime: i.endTime,
            factions: i.factions.map(function(t, e) {
                return r.generateWorldFaction(t, i.campaignBg, e + 1)
            }),
            id: i.campaignId,
            name: i.title,
            progressType: i.progressType,
            rewardingTime: i.rewardingTime,
            startTime: i.startTime,
            type: i.subType
        };
        return i.chosenFactionId && (e.factionId = i.chosenFactionId),
        i.userXp && (e.experience = i.userXp),
        new UTWorldCampaignEntity(e,t)
    }
    ,
    UTObjectivesFactory.prototype.generateWorldMilestone = function(t) {
        var e = this
          , i = {
            experience: t.xpThreshold,
            id: t.milestoneId,
            rewards: this.rewardFactory.createRewardSetFromRewards(t.awards.map(function(t) {
                return e.rewardFactory.createRewardFromCampaignLevelData(t)
            })),
            state: t.state ? t.state : ObjectiveMilestoneState.NOT_REWARDED
        };
        return new UTWorldMilestoneEntity(i)
    }
    ,
    UTObjectivesFactory.prototype.generateWorldCampaignFromMilestoneData = function(t, e) {
        var i = this
          , r = {
            assetPath: t.campaignBg,
            description: t.subTitle,
            endTime: t.endTime,
            experience: t.userXp,
            id: t.campaignId,
            milestones: t.milestones.map(function(t) {
                return i.generateWorldMilestone(t)
            }),
            name: t.title,
            progressType: t.progressType,
            rewardingTime: t.rewardingTime,
            startTime: t.startTime,
            type: t.subType
        };
        return JSUtils.isNumber(t.campaignScore) && (r.score = t.campaignScore),
        new UTWorldCampaignEntity(r,e)
    }
    ,
    UTObjectivesFactory
}(EAObject))
  , UTObjectivesDAO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTObjectivesDAO(t) {
        var e = i.call(this) || this;
        return e.authDelegate = t,
        e.rewardFactory = new UTRewardFactory(new UTItemEntityFactory),
        e.factory = new UTObjectivesFactory(e.rewardFactory),
        e
    }
    return __extends(UTObjectivesDAO, i),
    UTObjectivesDAO.prototype.getActiveCampaign = function() {
        var r = this
          , n = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/scmp/campaign/active"),
        services.UTUtasRequestQueue.send(t).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            e.success && JSUtils.isObject(e.response) ? i.response = {
                campaign: r.factory.createCampaign(e.response)
            } : i.response = {
                campaign: null
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTObjectivesDAO.prototype.isFactionWorldCampaign = function(t) {
        return Array.isArray(t.factions)
    }
    ,
    UTObjectivesDAO.prototype.isMilestoneWorldCampaign = function(t) {
        return Array.isArray(t.milestones)
    }
    ,
    UTObjectivesDAO.prototype.getActiveWorldCampaign = function() {
        var n = this
          , o = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/scmp/world/campaign/active"),
        services.UTUtasRequestQueue.send(t).observe(this, function(t, e) {
            var i;
            t.unobserve(n);
            var r = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, r),
            r.response = {
                campaign: null,
                needsAutoClaim: !1
            },
            e.success && JSUtils.isObject(e.response) && (n.isFactionWorldCampaign(e.response) ? r.response.campaign = n.factory.generateWorldCampaignFromFactionData(e.response, n) : n.isMilestoneWorldCampaign(e.response) && (r.response.campaign = n.factory.generateWorldCampaignFromMilestoneData(e.response, n)),
            r.response.needsAutoClaim = null !== (i = e.response.needsWorldAutoclaim) && void 0 !== i && i),
            o.notify(r)
        }),
        o
    }
    ,
    UTObjectivesDAO.prototype.getCampaignDetails = function(t) {
        var r = this
          , n = new EAObservable
          , e = new UTHttpRequest(this.authDelegate);
        return e.setPath("/ut/game/" + GAME_NAME + "/scmp/campaign"),
        e.setUrlVariables({
            type: t
        }),
        services.UTUtasRequestQueue.send(e).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            i.response = {
                levels: e.response && JSUtils.isObject(e.response) ? JSUtils.valToArray(e.response.scmpChosenRewardDtos).map(function(t) {
                    return r.factory.createLevel(t)
                }) : []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTObjectivesDAO.prototype.getCategories = function() {
        var r = this
          , n = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/scmp/campaign/categories"),
        services.UTUtasRequestQueue.send(t).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            i.response = {
                categories: Array.isArray(e.response) ? e.response.map(function(t) {
                    return r.factory.createCategory(t, r)
                }) : []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTObjectivesDAO.prototype.getGroupObjectives = function(t, e, i) {
        var r = this
          , n = new EAObservable
          , o = new UTHttpRequest(this.authDelegate);
        return e === ObjectiveGroupType.WORLD && o.setUrlVariables({
            campaignType: ObjectiveGroupType[e]
        }),
        o.setPath("/ut/game/" + GAME_NAME + "/scmp/campaign/category/" + t + "/group/" + i),
        services.UTUtasRequestQueue.send(o).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            e.success && JSUtils.isObject(e.response) && e.response.objectives ? i.response = {
                objectives: e.response.objectives.map(function(t) {
                    return r.factory.createObjective(t)
                })
            } : i.response = {
                objectives: []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTObjectivesDAO.prototype.getLearningGroupObjectives = function(t, e) {
        var r = this
          , n = new EAObservable
          , i = new UTHttpRequest(this.authDelegate);
        return i.setPath("/ut/game/" + GAME_NAME + "/scmp/learning/category/" + t + "/group/" + e),
        services.UTUtasRequestQueue.send(i).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            e.success && JSUtils.isObject(e.response) && Array.isArray(e.response.objectives) ? i.response = {
                objectives: e.response.objectives.map(function(t) {
                    return r.factory.createObjective(t)
                })
            } : i.response = {
                objectives: []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTObjectivesDAO.prototype.claimSeasonalCampaignLevelRewards = function(t, e) {
        var r = this
          , n = new EAObservable
          , i = new UTHttpRequest(this.authDelegate);
        return i.setPath("/ut/game/" + GAME_NAME + "/scmp/campaign/level/" + t + "/reward/" + e),
        i.setRequestType(HttpRequestMethod.PUT),
        services.UTUtasRequestQueue.send(i).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            JSUtils.isObject(e.response) && Array.isArray(e.response.awardsList) && (i.response = {
                rewards: e.response.awardsList.map(function(t) {
                    return r.rewardFactory.createRewardFromCampaignLevelData(t)
                })
            }),
            n.notify(i)
        }),
        n
    }
    ,
    UTObjectivesDAO.prototype.claimSeasonalGroupRewards = function(t) {
        var r = this
          , n = new EAObservable
          , e = new UTHttpRequest(this.authDelegate);
        return e.setPath("/ut/game/" + GAME_NAME + "/scmp/campaign/group/" + t + "/rewards"),
        e.setRequestType(HttpRequestMethod.PUT),
        services.UTUtasRequestQueue.send(e).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            JSUtils.isObject(e.response) && Array.isArray(e.response.groupRewards) ? i.response = {
                rewards: e.response.groupRewards.map(function(t) {
                    return r.rewardFactory.createRewardFromObjectiveData(t)
                })
            } : i.response = {
                rewards: []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTObjectivesDAO.prototype.claimLearningGroupRewards = function(t) {
        var r = this
          , n = new EAObservable
          , e = new UTHttpRequest(this.authDelegate);
        return e.setPath("/ut/game/" + GAME_NAME + "/scmp/learning/group/" + t + "/rewards"),
        e.setRequestType(HttpRequestMethod.PUT),
        services.UTUtasRequestQueue.send(e).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            JSUtils.isObject(e.response) && Array.isArray(e.response.groupRewards) ? i.response = {
                rewards: e.response.groupRewards.map(function(t) {
                    return r.rewardFactory.createRewardFromObjectiveData(t)
                })
            } : i.response = {
                rewards: []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTObjectivesDAO.prototype.claimSeasonalObjectiveRewards = function(t, e) {
        var r = this
          , n = new EAObservable
          , i = new UTHttpRequest(this.authDelegate);
        return i.setPath("/ut/game/" + GAME_NAME + "/scmp/campaign/group/" + t + "/objective/" + e + "/rewards"),
        i.setRequestType(HttpRequestMethod.PUT),
        services.UTUtasRequestQueue.send(i).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            JSUtils.isObject(e.response) && Array.isArray(e.response.awards) ? i.response = {
                rewards: e.response.awards.map(function(t) {
                    return r.rewardFactory.createRewardFromObjectiveData(t)
                })
            } : i.response = {
                rewards: []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTObjectivesDAO.prototype.claimLearningObjectiveRewards = function(t, e) {
        var r = this
          , n = new EAObservable
          , i = new UTHttpRequest(this.authDelegate);
        return i.setPath("/ut/game/" + GAME_NAME + "/scmp/learning/group/" + t + "/objective/" + e + "/rewards"),
        i.setRequestType(HttpRequestMethod.PUT),
        services.UTUtasRequestQueue.send(i).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            JSUtils.isObject(e.response) && Array.isArray(e.response.awards) ? i.response = {
                rewards: e.response.awards.map(function(t) {
                    return r.rewardFactory.createRewardFromObjectiveData(t)
                })
            } : i.response = {
                rewards: []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTObjectivesDAO.prototype.claimExpiredLearningObjectiveRewards = function() {
        var r = this
          , n = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/scmp/learning/campaign/rewards/all"),
        t.setRequestType(HttpRequestMethod.PUT),
        services.UTUtasRequestQueue.send(t).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            JSUtils.isObject(e.response) && Array.isArray(e.response.awardsList) ? i.response = {
                rewards: e.response.awardsList.map(function(t) {
                    return r.rewardFactory.createRewardFromObjectiveData(t)
                })
            } : i.response = {
                rewards: []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTObjectivesDAO.prototype.claimExpiredSeasonRewards = function() {
        var r = this
          , n = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/scmp/campaign/rewards/all"),
        t.setRequestType(HttpRequestMethod.PUT),
        services.UTUtasRequestQueue.send(t).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            JSUtils.isObject(e.response) && Array.isArray(e.response.awardsList) ? i.response = {
                rewards: e.response.awardsList.map(function(t) {
                    return r.rewardFactory.createRewardFromObjectiveData(t)
                })
            } : i.response = {
                rewards: []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTObjectivesDAO.prototype.joinWorldFaction = function(t) {
        var r = this
          , n = new EAObservable
          , e = new UTHttpRequest(this.authDelegate);
        return e.setPath("/ut/game/" + GAME_NAME + "/scmp/world/campaign/join/" + t),
        e.setRequestType(HttpRequestMethod.POST),
        services.UTUtasRequestQueue.send(e).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            e.success && JSUtils.isObject(e.response) ? i.response = {
                factionScores: e.response.factions ? e.response.factions.map(function(t) {
                    return {
                        id: t.factionId,
                        score: t.factionScore
                    }
                }) : [],
                rewardsGranted: e.response.rewardsReceived ? e.response.rewardsReceived.map(function(t) {
                    return r.rewardFactory.createRewardFromObjectiveData(t)
                }) : []
            } : i.response = {
                factionScores: [],
                rewardsGranted: []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTObjectivesDAO.prototype.claimExpiredWorldRewards = function() {
        var r = this
          , n = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/scmp/world/campaign/rewards/all"),
        t.setRequestType(HttpRequestMethod.PUT),
        services.UTUtasRequestQueue.send(t).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            JSUtils.isObject(e.response) && Array.isArray(e.response.worldAwardsList) ? i.response = {
                rewards: e.response.worldAwardsList.map(function(t) {
                    return r.rewardFactory.createRewardFromObjectiveData(t)
                })
            } : i.response = {
                rewards: []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTObjectivesDAO.prototype.claimWorldMilestoneRewards = function(r) {
        var n = this
          , o = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/scmp/world/campaign/milestone/" + r + "/reward"),
        t.setRequestType(HttpRequestMethod.PUT),
        services.UTUtasRequestQueue.send(t).observe(this, function(t, e) {
            t.unobserve(n);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            e.success && JSUtils.isObject(e.response) ? i.response = {
                milestoneId: e.response.milestoneId,
                rewards: e.response.awardsList.map(function(t) {
                    return n.rewardFactory.createRewardFromObjectiveData(t)
                })
            } : i.response = {
                milestoneId: r,
                rewards: []
            },
            o.notify(i)
        }),
        o
    }
    ,
    UTObjectivesDAO.prototype.claimWorldGroupRewards = function(t) {
        var r = this
          , n = new EAObservable
          , e = new UTHttpRequest(this.authDelegate);
        return e.setPath("/ut/game/" + GAME_NAME + "/scmp/world/group/" + t + "/rewards"),
        e.setRequestType(HttpRequestMethod.PUT),
        services.UTUtasRequestQueue.send(e).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            e.success && JSUtils.isObject(e.response) ? i.response = {
                rewards: e.response.groupRewards.map(function(t) {
                    return r.rewardFactory.createRewardFromObjectiveData(t)
                })
            } : i.response = {
                rewards: []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTObjectivesDAO.prototype.claimWorldObjectiveRewards = function(t, e) {
        var r = this
          , n = new EAObservable
          , i = new UTHttpRequest(this.authDelegate);
        return i.setPath("/ut/game/" + GAME_NAME + "/scmp/world/group/" + t + "/objective/" + e + "/rewards"),
        i.setRequestType(HttpRequestMethod.PUT),
        services.UTUtasRequestQueue.send(i).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            e.success && JSUtils.isObject(e.response) ? i.response = {
                rewards: e.response.awards.map(function(t) {
                    return r.rewardFactory.createRewardFromObjectiveData(t)
                })
            } : i.response = {
                rewards: []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTObjectivesDAO
}(EAObject))
  , UTOnboardingDAO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTOnboardingDAO(t) {
        var e = i.call(this) || this;
        return e.authDelegate = t,
        e.rewardFactory = new UTRewardFactory(new UTItemEntityFactory),
        e
    }
    return __extends(UTOnboardingDAO, i),
    UTOnboardingDAO.prototype.responseIsValid = function(t, e) {
        return t && JSUtils.isValid(e) && !JSUtils.isString(e)
    }
    ,
    UTOnboardingDAO.prototype.getHistorical = function() {
        var r = this
          , n = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/user/historical"),
        services.UTUtasRequestQueue.send(t).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            r.responseIsValid(e.success, e.response) ? i.response = {
                name: e.response.clubName,
                abbr: e.response.clubAbbr,
                rewards: e.response.returningUserRewards ? e.response.returningUserRewards.map(function(t) {
                    return r.rewardFactory.createRewardFromLoyaltyData(t)
                }) : []
            } : i.response = {
                name: "",
                abbr: "",
                rewards: []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTOnboardingDAO.prototype.createClub = function(t, e) {
        var i = this
          , r = new EAObservable
          , n = new UTHttpRequest(this.authDelegate);
        return n.setPath("/ut/game/" + GAME_NAME + "/user"),
        n.setRequestType(HttpRequestMethod.POST),
        n.setRequestBody({
            clubName: t,
            clubAbbr: e,
            purchased: !0
        }),
        services.UTUtasRequestQueue.send(n).observe(this, function(t, e) {
            t.unobserve(i),
            r.notify(e)
        }),
        r
    }
    ,
    UTOnboardingDAO.prototype.getState = function() {
        var i = this
          , r = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/clientdata/onboarding"),
        services.UTUtasRequestQueue.send(t).observe(this, function(t, e) {
            t.unobserve(i),
            r.notify(e)
        }),
        r
    }
    ,
    UTOnboardingDAO.prototype.setState = function(t) {
        var i = this
          , r = new EAObservable
          , e = new UTHttpRequest(this.authDelegate);
        return e.setPath(NaN + GAME_NAME + "/clientdata/onboarding"),
        e.setRequestType(HttpRequestMethod.PUT),
        e.setRequestBody({
            entries: [{
                key: 0,
                value: t
            }]
        }),
        services.UTUtasRequestQueue.send(e).observe(this, function(t, e) {
            t.unobserve(i),
            r.notify(e)
        }),
        r
    }
    ,
    UTOnboardingDAO.prototype.selectCountry = function(r) {
        var n = this
          , o = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/user/action/ONBOARDING_COUNTRY_" + r + "_SELECTED"),
        t.setRequestType(HttpRequestMethod.POST),
        services.UTUtasRequestQueue.send(t).observe(this, function(t, e) {
            t.unobserve(n);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            i.response = {
                countryId: r
            },
            o.notify(i)
        }),
        o
    }
    ,
    UTOnboardingDAO.prototype.getBadges = function() {
        var r = this
          , n = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/onboarding/badges"),
        services.UTUtasRequestQueue.send(t).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            i.response = {
                badges: r.responseIsValid(e.success, e.response) ? factories.Item.generateItemsFromItemData(e.response.badgeItemDataList) : []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTOnboardingDAO.prototype.selectBadge = function(t) {
        var r = this
          , n = new EAObservable
          , e = new UTHttpRequest(this.authDelegate);
        return e.setPath("/ut/game/" + GAME_NAME + "/onboarding/badge/" + t),
        e.setRequestType(HttpRequestMethod.POST),
        services.UTUtasRequestQueue.send(e).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            i.response = {
                badgeId: r.responseIsValid(e.success, e.response) ? e.response.badgeId : 0
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTOnboardingDAO.prototype.getKits = function() {
        var r = this
          , n = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/onboarding/kits"),
        services.UTUtasRequestQueue.send(t).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            i.response = {
                homeKits: r.responseIsValid(e.success, e.response) ? factories.Item.generateItemsFromItemData(e.response.homeItemDataList) : [],
                awayKits: r.responseIsValid(e.success, e.response) ? factories.Item.generateItemsFromItemData(e.response.awayItemDataList) : []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTOnboardingDAO.prototype.selectKits = function(t, e) {
        var r = this
          , n = new EAObservable
          , i = new UTHttpRequest(this.authDelegate);
        return i.setPath("/ut/game/" + GAME_NAME + "/onboarding/kits"),
        i.setRequestType(HttpRequestMethod.POST),
        i.setRequestBody({
            homeKitId: t,
            awayKitId: e
        }),
        services.UTUtasRequestQueue.send(i).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            i.response = {
                awayKitId: r.responseIsValid(e.success, e.response) ? e.response.awayKitId : 0,
                homeKitId: r.responseIsValid(e.success, e.response) ? e.response.homeKitId : 0
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTOnboardingDAO.prototype.getLoanPlayers = function() {
        var r = this
          , n = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/loan/players"),
        services.UTUtasRequestQueue.send(t).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            i.response = {
                items: r.responseIsValid(e.success, e.response) ? e.response.loans.map(function(t) {
                    return factories.Item.createItem(t.itemData)
                }) : []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTOnboardingDAO.prototype.grantLoanPlayer = function(t) {
        var r = this
          , n = new EAObservable
          , e = new UTHttpRequest(this.authDelegate);
        return e.setPath("/ut/game/" + GAME_NAME + "/loan/player/" + t.toString()),
        e.setRequestType(HttpRequestMethod.PUT),
        services.UTUtasRequestQueue.send(e).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            i.response = {
                item: r.responseIsValid(e.success, e.response) ? factories.Item.createItem(e.response) : null
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTOnboardingDAO
}(EAObject))
  , UTPlayerHealthEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTPlayerHealthEntity(t) {
        var e, i = r.call(this) || this;
        return i.currentServerTime = JSUtils.isNumber(t.currentServerTime) ? t.currentServerTime : 0,
        i.enabled = null !== (e = t.userOptIn) && void 0 !== e && e,
        i.stats = new EAHashTable,
        t.stats.forEach(function(t) {
            t.checkRollover(i.currentServerTime),
            i.stats.set(t.id, t)
        }),
        i
    }
    return __extends(UTPlayerHealthEntity, r),
    UTPlayerHealthEntity.prototype.getStatById = function(t) {
        return this.stats.get(t)
    }
    ,
    UTPlayerHealthEntity.prototype.getCurrentPeriodValue = function(t) {
        var e = this.getStatById(t);
        return e ? e.currentPeriodValue : 0
    }
    ,
    UTPlayerHealthEntity.prototype.updateCurrentPeriodValue = function(t, e) {
        var i = this.getStatById(t);
        i && (i.currentPeriodValue += e)
    }
    ,
    UTPlayerHealthEntity.prototype.setLimit = function(t, e) {
        var i = this.getStatById(t);
        i && (i.limit = e)
    }
    ,
    UTPlayerHealthEntity.prototype.getCurrentTotalTimeSpent = function() {
        var t = this.getStatById(PlayerHealthStatId.TIME_SPENT_WEB_APP)
          , e = this.getStatById(PlayerHealthStatId.TIME_SPENT_COMP_APP)
          , i = this.getStatById(PlayerHealthStatId.TIME_SPENT_CONSOLE);
        return (t ? t.currentPeriodValue : 0) + (e ? e.currentPeriodValue : 0) + (i ? i.currentPeriodValue : 0)
    }
    ,
    UTPlayerHealthEntity.prototype.getTotalTimeSpentWeeklyAvg = function() {
        var t = this.getStatById(PlayerHealthStatId.TIME_SPENT_WEB_APP)
          , e = this.getStatById(PlayerHealthStatId.TIME_SPENT_COMP_APP)
          , i = this.getStatById(PlayerHealthStatId.TIME_SPENT_CONSOLE);
        return (t ? t.weeklyAverage : 0) + (e ? e.weeklyAverage : 0) + (i ? i.weeklyAverage : 0)
    }
    ,
    UTPlayerHealthEntity.prototype.getTotalTimeSpentPercentChange = function() {
        var t = this.getTotalTimeSpentWeeklyAvg();
        return 0 < t ? Math.round(100 * (this.getCurrentTotalTimeSpent() / t - 1)) : 0
    }
    ,
    UTPlayerHealthEntity
}(EAObject))
  , UTPlayerHealthStatEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTPlayerHealthStatEntity(t) {
        var e = i.call(this) || this;
        return e.id = t.id,
        e.previousPeriodsValue = JSUtils.isNumber(t.previousPeriodsValue) ? t.previousPeriodsValue : 0,
        e.currentPeriodValue = JSUtils.isNumber(t.currentPeriodValue) ? t.currentPeriodValue : 0,
        e.limit = JSUtils.isNumber(t.limit) ? t.limit : UTPlayerHealthStatEntity.DEFAULT_LIMIT,
        e.totalRolloverPeriods = JSUtils.isNumber(t.totalRolloverPeriods) ? t.totalRolloverPeriods : 0,
        e.nextRolloverTime = JSUtils.isNumber(t.nextRolloverTime) ? t.nextRolloverTime : 0,
        e
    }
    return __extends(UTPlayerHealthStatEntity, i),
    Object.defineProperty(UTPlayerHealthStatEntity.prototype, "weeklyAverage", {
        get: function() {
            return 0 < this.totalRolloverPeriods ? Math.round(this.previousPeriodsValue / this.totalRolloverPeriods) : 0
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTPlayerHealthStatEntity.prototype, "percentChange", {
        get: function() {
            return 0 < this.weeklyAverage ? Math.round(100 * (this.currentPeriodValue / this.weeklyAverage - 1)) : 0
        },
        enumerable: !1,
        configurable: !0
    }),
    UTPlayerHealthStatEntity.prototype.isLimitReached = function() {
        return 0 <= this.limit && this.currentPeriodValue >= this.limit
    }
    ,
    UTPlayerHealthStatEntity.prototype.rollover = function(t) {
        this.totalRolloverPeriods += t,
        this.previousPeriodsValue += this.currentPeriodValue,
        this.currentPeriodValue = 0
    }
    ,
    UTPlayerHealthStatEntity.prototype.checkRollover = function(t) {
        if (0 < t && 0 < this.nextRolloverTime && this.nextRolloverTime < t) {
            var e = t - this.nextRolloverTime
              , i = Math.ceil(e / (SECONDS_PER_WEEK * MS_PER_SECOND));
            this.rollover(i)
        }
    }
    ,
    UTPlayerHealthStatEntity.DEFAULT_LIMIT = -1,
    UTPlayerHealthStatEntity.MAXIMUM_LIMIT = 99999,
    UTPlayerHealthStatEntity
}(EAObject))
  , UTPlayerHealthFactory = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTPlayerHealthFactory() {
        return t.call(this) || this
    }
    return __extends(UTPlayerHealthFactory, t),
    UTPlayerHealthFactory.prototype.createPlayerHealthEntity = function(t) {
        var e = this
          , i = {
            stats: t.playerHealthStats.map(function(t) {
                return e.createPlayerHealthStatEntity(t)
            }),
            userOptIn: t.userOptIn,
            currentServerTime: t.crtServerTime
        };
        return new UTPlayerHealthEntity(i)
    }
    ,
    UTPlayerHealthFactory.prototype.createPlayerHealthStatEntity = function(t) {
        var e = {
            id: t.id,
            currentPeriodValue: t.current,
            previousPeriodsValue: t.previous,
            limit: t.limit,
            totalRolloverPeriods: t.total,
            nextRolloverTime: t.nextRolloverTime
        };
        return new UTPlayerHealthStatEntity(e)
    }
    ,
    UTPlayerHealthFactory
}(EAObject))
  , UTPlayerHealthDAO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTPlayerHealthDAO(t) {
        var e = i.call(this) || this;
        return e.authDelegate = t,
        e.playerHealthFactory = new UTPlayerHealthFactory,
        e
    }
    return __extends(UTPlayerHealthDAO, i),
    UTPlayerHealthDAO.prototype.read = function() {
        var r = this
          , n = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/playStats"),
        t.setRequestType(HttpRequestMethod.GET),
        services.UTUtasRequestQueue.send(t).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            e.success && JSUtils.isObject(e.response) ? i.response = {
                playerHealth: r.playerHealthFactory.createPlayerHealthEntity(e.response)
            } : i.response = {
                playerHealth: null
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTPlayerHealthDAO.prototype.write = function(t, e) {
        var r = this
          , n = new EAObservable
          , i = new UTHttpRequest(this.authDelegate)
          , o = [{
            id: t,
            value: e
        }];
        return i.setPath("/ut/game/" + GAME_NAME + "/playStats"),
        i.setRequestType(HttpRequestMethod.PUT),
        i.setRequestBody(o),
        services.UTUtasRequestQueue.send(i).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            n.notify(i)
        }),
        n
    }
    ,
    UTPlayerHealthDAO
}(EAObject))
  , UTRivalsEventEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTRivalsEventEntity(t) {
        var e = i.call(this) || this;
        return e.currentTime = t.currentTime,
        e.division = t.division,
        e.numDivisions = t.numDivisions,
        e.nextLBRefreshTimeStamp = t.nextLBRefreshTimeStamp,
        e.season = t.season,
        e.user = t.user,
        t.championsStageLevel && (e.championsStageLevel = t.championsStageLevel),
        t.seasonEndDetails && (e.seasonEndDetails = t.seasonEndDetails),
        t.tiers && (e.tiers = t.tiers),
        e
    }
    return __extends(UTRivalsEventEntity, i),
    UTRivalsEventEntity.prototype.hasOutStandingRewards = function() {
        return this.isSeasonPrizeAvailable() || this.isWeeklyPrizeAvailable()
    }
    ,
    UTRivalsEventEntity.prototype.isSeasonPrizeAvailable = function() {
        return this.user.seasonPrizeAvailable
    }
    ,
    UTRivalsEventEntity.prototype.isWeeklyPrizeAvailable = function() {
        return this.user.weeklyPrizeAvailable
    }
    ,
    UTRivalsEventEntity.prototype.setPrizeClaimedFlag = function(t) {
        t === GameModesPrizeType.SEASONAL ? this.setSeasonPrizeClaimed() : t === GameModesPrizeType.WEEKLY && this.setWeeklyPrizeClaimed()
    }
    ,
    UTRivalsEventEntity.prototype.setSeasonPrizeClaimed = function() {
        this.user.seasonPrizeAvailable = !1
    }
    ,
    UTRivalsEventEntity.prototype.setWeeklyPrizeClaimed = function() {
        this.user.weeklyPrizeAvailable = !1
    }
    ,
    UTRivalsEventEntity.prototype.hasProgression = function() {
        return 0 < this.user.matchesPlayed
    }
    ,
    UTRivalsEventEntity.prototype.getUserCurrentRank = function() {
        var e = this
          , i = null;
        return this.division.stages.filter(function(t) {
            return t.type === RivalsStageType.REWARD
        }).forEach(function(t) {
            e.user.stageId >= t.id && (i = t)
        }),
        i
    }
    ,
    UTRivalsEventEntity.prototype.getWinStreak = function() {
        return this.user.winStreak ? this.season.winStreakNumStages : 0
    }
    ,
    UTRivalsEventEntity.prototype.getDivisionTimeRemaining = function() {
        for (var t = 0, e = Math.round(Date.now() / MS_PER_SECOND), i = 0, r = this.season.rewardTimeStamps; i < r.length; i++) {
            var n = r[i];
            if (e < n) {
                t = n;
                break
            }
        }
        return Math.max(0, t - e)
    }
    ,
    UTRivalsEventEntity.prototype.getSeasonTimeRemaining = function() {
        var t = Math.round(Date.now() / MS_PER_SECOND);
        return Math.max(0, this.season.endTime - t)
    }
    ,
    UTRivalsEventEntity
}(EAObject))
  , UTRivalsEventPrizeTierEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTRivalsEventPrizeTierEntity(t) {
        var e = i.call(this) || this;
        return e.competitionId = t.competitionId,
        e.rewardSet = t.eventRewardSets,
        e.level = t.tierLevel,
        e.subLevel = t.tierSubLevel,
        e.type = t.tierType,
        e
    }
    return __extends(UTRivalsEventPrizeTierEntity, i),
    UTRivalsEventPrizeTierEntity
}(EAObject))
  , UTRivalsEventStageEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTRivalsEventStageEntity(t) {
        var e = i.call(this) || this;
        return e.demotionThreshold = t.demotionThreshold,
        e.id = t.stageId,
        e.rank = t.rank,
        e.type = t.stageType,
        t.prizeTiers && (e.prizeTiers = t.prizeTiers),
        e
    }
    return __extends(UTRivalsEventStageEntity, i),
    UTRivalsEventStageEntity
}(EAObject))
  , UTRivalsEventEliteTierEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTRivalsEventEliteTierEntity(t) {
        var e = i.call(this) || this;
        return e.competitionId = t.competitionId,
        e.tierEnd = t.tierEnd,
        e.tierLevel = t.tierLevel,
        e.tierStart = t.tierStart,
        e.tierStartValue = t.tierStartValue,
        e.tierSubLevel = t.tierSubLevel,
        e
    }
    return __extends(UTRivalsEventEliteTierEntity, i),
    UTRivalsEventEliteTierEntity
}(EAObject))
  , __assign = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
this && this.__assign || function() {
    return (__assign = Object.assign || function(t) {
        for (var e, i = 1, r = arguments.length; i < r; i++)
            for (var n in e = arguments[i])
                Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
        return t
    }
    ).apply(this, arguments)
}
)
  , UTRivalsEventEntityFactory = function(i) {
    function UTRivalsEventEntityFactory(t) {
        var e = i.call(this) || this;
        return e.rewardFactory = t,
        e
    }
    return __extends(UTRivalsEventEntityFactory, i),
    UTRivalsEventEntityFactory.prototype.createRivalsEventEntity = function(t) {
        var e, i, r = this, n = null !== (i = null === (e = t.division.prizes.prizeTiers) || void 0 === e ? void 0 : e.map(function(t) {
            return r.createRivalsPrizeTierEntity(t)
        })) && void 0 !== i ? i : [], o = t.division.stages.filter(function(t) {
            return t.stageType === RivalsStageType.REWARD
        }).length, s = t.division.stages.map(function(t) {
            var e = r.createRivalsStageEntity(t, o);
            return e.type === RivalsStageType.REWARD && o--,
            e
        }), a = {
            user: __assign({}, t.user),
            division: {
                championsPointsWin: t.division.championsPointsWin,
                championsPointsLoss: t.division.championsPointsLoss,
                championsPointsDraw: t.division.championsPointsDraw,
                divisionId: t.division.divisionId,
                divisionType: t.division.divisionType,
                nextDivisionLocalizedName: t.division.nextDivisionLocalizedName,
                localizedName: t.division.localizedName,
                prizeTiers: n,
                stages: s
            },
            currentTime: t.currentTime,
            numDivisions: t.numDivisions,
            nextLBRefreshTimeStamp: t.nextLBRefreshTimeStamp,
            season: t.season
        };
        if (t.tiers) {
            var l = t.tiers.map(function(t) {
                return r.createRivalsTierEntity(t)
            });
            a.tiers = l
        }
        return t.championsStageLevel && (a.championsStageLevel = t.championsStageLevel),
        t.seasonEndDetails && (a.seasonEndDetails = t.seasonEndDetails),
        new UTRivalsEventEntity(a)
    }
    ,
    UTRivalsEventEntityFactory.prototype.createRivalsPrizeTierEntity = function(t) {
        var e = this
          , i = t.categoryAwardsList.map(function(t) {
            return e.rewardFactory.createRewardSetFromGameModesData(t)
        })
          , r = {
            competitionId: t.competitionId,
            eventRewardSets: i,
            tierLevel: t.tierLevel,
            tierSubLevel: t.tierSubLevel,
            tierType: t.tierType
        };
        return new UTRivalsEventPrizeTierEntity(r)
    }
    ,
    UTRivalsEventEntityFactory.prototype.createRivalsStageEntity = function(t, e) {
        var i, r, n, o = this;
        if (t.stageType === RivalsStageType.REWARD && t.prizes) {
            var s = null !== (r = null === (i = t.prizes.prizeTiers) || void 0 === i ? void 0 : i.map(function(t) {
                return o.createRivalsPrizeTierEntity(t)
            })) && void 0 !== r ? r : [];
            n = __assign(__assign({}, t), {
                prizeTiers: s,
                stageType: t.stageType,
                rank: e
            })
        } else
            n = __assign(__assign({}, t), {
                stageType: t.stageType,
                rank: e
            });
        return new UTRivalsEventStageEntity(n)
    }
    ,
    UTRivalsEventEntityFactory.prototype.createRivalsTierEntity = function(t) {
        return new UTRivalsEventEliteTierEntity(t)
    }
    ,
    UTRivalsEventEntityFactory
}(EAObject)
  , UTRivalsEventRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTRivalsEventRepository() {
        var t = e.call(this) || this;
        return t.currentEvent = null,
        t
    }
    return __extends(UTRivalsEventRepository, e),
    UTRivalsEventRepository.prototype.reset = function() {
        this.currentEvent = null,
        e.prototype.reset.call(this)
    }
    ,
    UTRivalsEventRepository.prototype.setEvent = function(t) {
        this.currentEvent = t
    }
    ,
    UTRivalsEventRepository.prototype.getEvent = function() {
        return this.currentEvent
    }
    ,
    UTRivalsEventRepository
}(UTGameModesEventRepository));
NamespaceManager.Register("repositories"),
repositories.Rivals = new UTRivalsEventRepository;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTRivalsDAO = function(n) {
    function UTRivalsDAO(t, e, i) {
        var r = n.call(this) || this;
        return r.authDelegate = t,
        r.requestDelegate = e,
        r.rewardFactory = new UTRewardFactory(new UTItemEntityFactory),
        r.rivalsEntityFactory = new UTRivalsEventEntityFactory(r.rewardFactory),
        r.rivalsRepo = i,
        r
    }
    return __extends(UTRivalsDAO, n),
    UTRivalsDAO.prototype.getRivalsHub = function() {
        var r = this
          , n = new EAObservable
          , t = new UTHttpRequest(this.authDelegate)
          , e = new UTHttpResponseDTO
          , i = this.rivalsRepo.getEvent();
        return i && !this.rivalsRepo.isCacheExpired() ? (e.success = !0,
        e.status = HttpStatusCode.NOT_MODIFIED,
        e.response = {
            event: i
        },
        n.notify(e)) : (t.setPath("/ut/game/" + GAME_NAME + "/rivals/v2/user/hub"),
        this.requestDelegate.send(t).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            e.success && e.response && !JSUtils.isString(e.response) ? (r.rivalsRepo.setDirty(),
            r.rivalsRepo.setCacheTimestamp(Date.now(), e.response.season.endTime),
            r.rivalsRepo.setEvent(r.rivalsEntityFactory.createRivalsEventEntity(e.response)),
            i.response = {
                event: r.rivalsRepo.getEvent()
            }) : i.response = {
                event: null
            },
            n.notify(i)
        })),
        n
    }
    ,
    UTRivalsDAO.prototype.getPrizeDetails = function(t) {
        var n = this
          , o = new EAObservable
          , e = new UTHttpRequest(this.authDelegate);
        return e.setPath("/ut/game/" + GAME_NAME + "/rivals/v2/" + t + "/user/prizeDetails"),
        this.requestDelegate.send(e).observe(this, function(t, e) {
            t.unobserve(n);
            var i = new UTHttpResponseDTO;
            if (JSUtils.assignPropertyValues(e, i),
            JSUtils.isObject(e.response) && JSUtils.isObject(e.response.prizes)) {
                var r = e.response.prizes.prizeTiers.reduce(function(t, e) {
                    return t = t.concat(e.categoryAwardsList.map(function(t) {
                        return n.rewardFactory.createRewardSetFromRivalsData(t)
                    }))
                }, []);
                i.response = {
                    unclaimedRewards: r
                }
            } else
                i.response = {
                    unclaimedRewards: []
                };
            o.notify(i)
        }),
        o
    }
    ,
    UTRivalsDAO.prototype.claimById = function(t, o) {
        var s = this
          , a = new EAObservable
          , e = new UTHttpRequest(this.authDelegate);
        return e.setPath("/ut/game/" + GAME_NAME + "/rivals/v2/" + o + "/reward/" + t),
        e.setRequestType(HttpRequestMethod.PUT),
        this.requestDelegate.send(e).observe(this, function(t, e) {
            var i, r;
            t.unobserve(s);
            var n = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, n),
            e.success && JSUtils.isObject(e.response) && e.response.awardedPrizes ? (n.response = {
                rewards: e.response.awardedPrizes.map(function(t) {
                    return s.rewardFactory.createRewardFromRewardData(t)
                })
            },
            null === (i = s.rivalsRepo.getEvent()) || void 0 === i || i.setPrizeClaimedFlag(o)) : n.response = {
                rewards: []
            },
            (null === (r = s.rivalsRepo.getEvent()) || void 0 === r ? void 0 : r.hasOutStandingRewards()) || s.rivalsRepo.setDirty(),
            a.notify(n)
        }),
        a
    }
    ,
    UTRivalsDAO
}(EAObject)
  , UTShowOffSquadDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTShowOffSquadDTO(t, e) {
        var i = r.call(this) || this;
        return i.squad = t,
        i.id = e.showoffid,
        i.url = getAppMain().getConfigRepository().getConfigString(EAConfigurationRepository.KEY_SHOW_OFF_URL) + e.url,
        i.timestamp = e.timestamp,
        i.viewcount = e.viewcount,
        i.persona = e.persona,
        i.platform = e.platform,
        i.clubName = JSUtils.isValid(i.squad) ? e.data.squad[0].clubName : "",
        i.clubAbbr = JSUtils.isValid(i.squad) ? e.data.squad[0].clubAbbr : "",
        i.estDate = JSUtils.isValid(i.squad) && JSUtils.isNumber(Number(e.data.squad[0].estDate)) ? Number(e.data.squad[0].estDate) : 0,
        i
    }
    return __extends(UTShowOffSquadDTO, r),
    UTShowOffSquadDTO
}(EAObject))
  , UTSBCEligibilityDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTSBCEligibilityDTO(t) {
        var i = e.call(this) || this;
        return i.kvPairs = new EAHashTable,
        i.count = -1,
        i.scope = -1,
        t.forEach(function(t) {
            switch (t.eligibilityKey) {
            case SBCEligibilityKey.SCOPE:
                JSUtils.isNumber(t.eligibilityValue) && (i.scope = t.eligibilityValue);
                break;
            case SBCEligibilityKey.PLAYER_COUNT:
            case SBCEligibilityKey.PLAYER_COUNT_COMBINED:
                JSUtils.isNumber(t.eligibilityValue) && (i.count = t.eligibilityValue);
                break;
            case SBCEligibilityKey.TEAM_STAR_RATING:
                JSUtils.isNumber(t.eligibilityValue) && i.kvPairs.set(t.eligibilityKey, [t.eligibilityValue / 2]);
                break;
            case SBCEligibilityKey.ALL_PLAYERS_CHEMISTRY_POINTS:
            case SBCEligibilityKey.CHEMISTRY_POINTS:
            case SBCEligibilityKey.TEAM_RATING:
            case SBCEligibilityKey.NATION_ID:
            case SBCEligibilityKey.LEAGUE_ID:
            case SBCEligibilityKey.CLUB_ID:
            case SBCEligibilityKey.PLAYER_LEVEL:
            case SBCEligibilityKey.PLAYER_RARITY:
            case SBCEligibilityKey.PLAYER_RARITY_GROUP:
            case SBCEligibilityKey.PLAYER_QUALITY:
            case SBCEligibilityKey.SAME_NATION_COUNT:
            case SBCEligibilityKey.SAME_LEAGUE_COUNT:
            case SBCEligibilityKey.SAME_CLUB_COUNT:
            case SBCEligibilityKey.NATION_COUNT:
            case SBCEligibilityKey.LEAGUE_COUNT:
            case SBCEligibilityKey.CLUB_COUNT:
            case SBCEligibilityKey.LEGEND_COUNT:
            case SBCEligibilityKey.PLAYER_MAX_OVR:
            case SBCEligibilityKey.PLAYER_MIN_OVR:
            case SBCEligibilityKey.PLAYER_EXACT_OVR:
            case SBCEligibilityKey.FIRST_OWNER_PLAYERS_COUNT:
            case SBCEligibilityKey.PLAYER_TRADABILITY:
                var e = i.kvPairs.get(t.eligibilityKey);
                e ? e.push(t.eligibilityValue) : i.kvPairs.set(t.eligibilityKey, JSUtils.valToArray(t.eligibilityValue));
                break;
            default:
                DebugUtils.Assert(!1, "Reached default case: " + t.eligibilityKey)
            }
        }, i),
        i
    }
    return __extends(UTSBCEligibilityDTO, e),
    Object.defineProperty(UTSBCEligibilityDTO.prototype, "isCombinedRequirement", {
        get: function() {
            return 1 < this.kvPairs.length
        },
        enumerable: !1,
        configurable: !0
    }),
    UTSBCEligibilityDTO.prototype.keys = function() {
        return this.kvPairs.keys()
    }
    ,
    UTSBCEligibilityDTO.prototype.getValue = function(t) {
        var e = this.kvPairs.get(t);
        return e || [-1]
    }
    ,
    UTSBCEligibilityDTO.prototype.getFirstKey = function() {
        return 0 < this.kvPairs.length ? parseInt(this.kvPairs.keys()[0], 10) : (DebugUtils.Assert(!1, "UTSBCEligibilityDTO::getFirstKey. Requirement is empty or invalid."),
        -1)
    }
    ,
    UTSBCEligibilityDTO.prototype.getFirstValue = function(t) {
        var e = this.kvPairs.get(t);
        return e ? e[0] : -1
    }
    ,
    UTSBCEligibilityDTO.prototype.buildString = function() {
        var r = this
          , n = services.Localization
          , o = this.count
          , t = this.getFirstKey()
          , s = "scope" + this.scope
          , e = "sbc.requirements."
          , i = 1 === o ? e + "player." + s : e + "players." + s
          , a = ""
          , l = this.getValue(t);
        function combineValueStrings(t) {
            return t.map(function(t, e, i) {
                return e < i.length - 1 ? t + " " + n.localize("label.general.or").toUpperCase() : t
            }).join(" ")
        }
        if (this.isCombinedRequirement) {
            d = n.localize(i + ".val", [o.toString()]);
            var c = [];
            this.kvPairs.keys().forEach(function(t) {
                var e = Number(t);
                switch (l = r.getValue(e),
                e) {
                case SBCEligibilityKey.ALL_PLAYERS_CHEMISTRY_POINTS:
                    c.push(combineValueStrings(l.map(function(t) {
                        return n.localize("sbc.requirements.team.player-chemistry-points." + s, [t.toString()])
                    })));
                    break;
                case SBCEligibilityKey.CHEMISTRY_POINTS:
                    c.push(combineValueStrings(l.map(function(t) {
                        return n.localize("sbc.requirements.team.chemistry-points." + s, [t.toString()])
                    })));
                    break;
                case SBCEligibilityKey.NATION_ID:
                    c.push(combineValueStrings(l.map(function(t) {
                        return UTLocalizationUtil.nationIdToName(t, n)
                    })));
                    break;
                case SBCEligibilityKey.LEAGUE_ID:
                    c.push(combineValueStrings(l.map(function(t) {
                        return UTLocalizationUtil.leagueIdToName(t, n)
                    })));
                    break;
                case SBCEligibilityKey.CLUB_ID:
                    c.push(combineValueStrings(l.map(function(t) {
                        return UTLocalizationUtil.teamIdToAbbr15(t, n)
                    })));
                    break;
                case SBCEligibilityKey.PLAYER_MIN_OVR:
                    c.push(combineValueStrings(l.map(function(t) {
                        return n.localize("sbc.requirements.rating.min.val", [t.toString()])
                    })));
                    break;
                case SBCEligibilityKey.PLAYER_MAX_OVR:
                    c.push(combineValueStrings(l.map(function(t) {
                        return n.localize("sbc.requirements.rating.max.val", [t.toString()])
                    })));
                    break;
                case SBCEligibilityKey.PLAYER_EXACT_OVR:
                    c.push(combineValueStrings(l.map(function(t) {
                        return n.localize("sbc.requirements.rating.exact.val", [t.toString()])
                    })));
                    break;
                case SBCEligibilityKey.PLAYER_TRADABILITY:
                    var i = l.map(function(t) {
                        var e = "sbc.requirements." + (1 === t ? "untradable" : "tradable") + "." + s;
                        return n.localize(e, [o.toString()])
                    });
                    c.push(combineValueStrings(i));
                    break;
                default:
                    DebugUtils.Assert(!1, "Reached default case for eligibility string: " + t)
                }
            }, this),
            a = d + " " + c.join(" + ")
        } else
            switch (t) {
            case SBCEligibilityKey.ALL_PLAYERS_CHEMISTRY_POINTS:
                a = n.localize(e + "team.player-chemistry-points." + s, l.map(function(t) {
                    return t.toString()
                }));
                break;
            case SBCEligibilityKey.CHEMISTRY_POINTS:
                a = n.localize(e + "team.chemistry-points." + s, l.map(function(t) {
                    return t.toString()
                }));
                break;
            case SBCEligibilityKey.TEAM_STAR_RATING:
                a = n.localize(e + "team.rating." + s, l.map(function(t) {
                    return t.toString()
                }));
                break;
            case SBCEligibilityKey.TEAM_RATING:
                a = n.localize(e + "team.rating1to100." + s, l.map(function(t) {
                    return t.toString()
                }));
                break;
            case SBCEligibilityKey.PLAYER_QUALITY:
                var u = l[0];
                a = (a = n.localize("sbc.requirements.playerQuality")) + " " + n.localize(e + s),
                u === SBCEligibilityQualityType.BRONZE ? a += " " + n.localize("packtype.bronze") : u === SBCEligibilityQualityType.SILVER ? a += " " + n.localize("packtype.silver") : a += " " + n.localize("packtype.gold");
                break;
            case SBCEligibilityKey.PLAYER_LEVEL:
                a = n.localize(e + "rare." + s, [o.toString()]) + " " + combineValueStrings(l.map(function(t) {
                    return n.localize("search.cardLevels.cardLevel" + t)
                }));
                break;
            case SBCEligibilityKey.SAME_NATION_COUNT:
                a = n.localize(i, [l.toString(), n.localize(e + "subType.nation")]);
                break;
            case SBCEligibilityKey.SAME_LEAGUE_COUNT:
                a = n.localize(i, [l.toString(), n.localize(e + "subType.league")]);
                break;
            case SBCEligibilityKey.SAME_CLUB_COUNT:
                a = n.localize(i, [l.toString(), n.localize(e + "subType.club")]);
                break;
            case SBCEligibilityKey.NATION_COUNT:
                a = n.localize(e + "nations." + s, l.map(function(t) {
                    return t.toString()
                }));
                break;
            case SBCEligibilityKey.LEAGUE_COUNT:
                a = n.localize(e + "leagues." + s, l.map(function(t) {
                    return t.toString()
                }));
                break;
            case SBCEligibilityKey.CLUB_COUNT:
                a = n.localize(e + "clubs." + s, l.map(function(t) {
                    return t.toString()
                }));
                break;
            case SBCEligibilityKey.NATION_ID:
                a = (d = n.localize(i + ".val", [o.toString()])) + " " + combineValueStrings(l.map(function(t) {
                    return UTLocalizationUtil.nationIdToName(t, n)
                }));
                break;
            case SBCEligibilityKey.LEAGUE_ID:
                a = (d = n.localize(i + ".val", [o.toString()])) + " " + combineValueStrings(l.map(function(t) {
                    return UTLocalizationUtil.leagueIdToName(t, n)
                }));
                break;
            case SBCEligibilityKey.CLUB_ID:
                a = (d = n.localize(i + ".val", [o.toString()])) + " " + combineValueStrings(l.map(function(t) {
                    return UTLocalizationUtil.teamIdToAbbr15(t, n)
                }));
                break;
            case SBCEligibilityKey.LEGEND_COUNT:
                var p = 1 === l[0] ? "legend." : "legends.";
                a = n.localize(e + p + s, l.map(function(t) {
                    return t.toString()
                }));
                break;
            case SBCEligibilityKey.PLAYER_RARITY:
                var h = combineValueStrings(l.map(function(t) {
                    return n.localize("item.raretype" + t)
                }));
                a = (d = n.localize(e + "rare." + s, [o.toString()])) + " " + h;
                break;
            case SBCEligibilityKey.PLAYER_RARITY_GROUP:
                var d;
                a = (d = n.localize(e + "rare." + s, [o.toString()])) + " " + combineValueStrings(l.map(function(t) {
                    return n.localize("Player_Group_" + t)
                }));
                break;
            case SBCEligibilityKey.PLAYER_MAX_OVR:
                a = n.localize(e + "rating.max." + s, [o.toString(), l[0].toString()]);
                break;
            case SBCEligibilityKey.PLAYER_MIN_OVR:
                a = n.localize(e + "rating.min." + s, [o.toString(), l[0].toString()]);
                break;
            case SBCEligibilityKey.PLAYER_EXACT_OVR:
                a = n.localize(e + "rating.exact." + s, [o.toString(), l[0].toString()]);
                break;
            case SBCEligibilityKey.FIRST_OWNER_PLAYERS_COUNT:
                a = n.localize(e + "firstowner." + s, [l[0].toString()]);
                break;
            case SBCEligibilityKey.PLAYER_TRADABILITY:
                var _ = 1 === l[0] ? "untradable" : "tradable";
                a = n.localize(e + _ + "." + s, [o.toString()]);
                break;
            default:
                DebugUtils.Assert(!1, "Reached default case building eligibility string: " + t)
            }
        return a
    }
    ,
    UTSBCEligibilityDTO
}(EAObject))
  , UTSBCChallengeEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTSBCChallengeEntity(t) {
        var e = i.call(this) || this;
        return e.onDataChange = new EAObservable,
        e.onSave = new EAObservable,
        e.awards = t.rewards,
        e.endTime = t.endTime,
        e.id = t.id,
        e.name = t.name,
        e.description = t.description,
        e.notExpirable = 0 === e.endTime,
        e.priority = t.priority,
        e.repeatable = t.repeatable,
        e.setId = t.setId,
        e.assetId = t.assetId,
        e.formation = t.formation || "",
        e.type = t.type,
        e.status = t.status,
        e.timesCompleted = t.timesCompleted,
        e.eligibilityOperation = t.eligibilityOperation,
        e.eligibilityRequirements = t.requirements,
        e.squad = null,
        1 < e.awards.length && e.awards.sort(function(t, e) {
            return t.getPriority() < e.getPriority() ? -1 : t.getPriority() > e.getPriority() ? 1 : 0
        }),
        e
    }
    return __extends(UTSBCChallengeEntity, i),
    UTSBCChallengeEntity.prototype.reset = function() {
        this.status = SBCChallengeStatus.NOT_STARTED,
        this.squad = null,
        this.onDataChange.notify({
            status: this.status,
            squad: this.squad
        })
    }
    ,
    UTSBCChallengeEntity.prototype.hasNotStarted = function() {
        return this.status === SBCChallengeStatus.NOT_STARTED
    }
    ,
    UTSBCChallengeEntity.prototype.isInProgress = function() {
        return this.status === SBCChallengeStatus.IN_PROGRESS
    }
    ,
    UTSBCChallengeEntity.prototype.isCompleted = function() {
        return this.status === SBCChallengeStatus.COMPLETED
    }
    ,
    UTSBCChallengeEntity.prototype.isBrickChallenge = function() {
        return this.type === SBCChallengeType.BRICK || this.type === SBCChallengeType.CUSTOM_BRICK
    }
    ,
    UTSBCChallengeEntity.prototype.hasExpired = function(t) {
        if (this.notExpirable)
            return !1;
        var e = this.endTime - Math.round(Date.now() / 1e3);
        return t && (e += services.Configuration.getFeatureSetting(UTServerSettingsRepository.KEY.SBC_GRACE_PERIOD_MINUTES) * SECONDS_PER_MINUTE),
        e < 0
    }
    ,
    UTSBCChallengeEntity.prototype.getApplicableSlotsForCombinedReq = function(r) {
        var n = this
          , o = [];
        return r.keys().forEach(function(t) {
            if (n.squad) {
                var e = parseInt(t, 10)
                  , i = r.getFirstValue(e);
                switch (e) {
                case SBCEligibilityKey.ALL_PLAYERS_CHEMISTRY_POINTS:
                    o = o.concat(n.getSlotIndiciesByChemPoints(i));
                    break;
                case SBCEligibilityKey.NATION_ID:
                    o = o.concat(n.getSlotIndicesByNation(i));
                    break;
                case SBCEligibilityKey.LEAGUE_ID:
                    o = o.concat(n.getSlotIndicesByLeague(i));
                    break;
                case SBCEligibilityKey.CLUB_ID:
                    o = o.concat(n.getSlotIndicesByClub(i));
                    break;
                case SBCEligibilityKey.PLAYER_MIN_OVR:
                    o = o.concat(n.getSlotIndicesByMinRating(i));
                    break;
                case SBCEligibilityKey.PLAYER_MAX_OVR:
                    o = o.concat(n.getSlotIndicesByMaxRating(i));
                    break;
                case SBCEligibilityKey.PLAYER_EXACT_OVR:
                    o = o.concat(n.getSlotIndicesByExactRating(i));
                    break;
                case SBCEligibilityKey.PLAYER_TRADABILITY:
                    o = o.concat(n.getSlotIndicesByTradableState(0 === i));
                    break;
                default:
                    DebugUtils.Assert(!1, "Reached invalid combined case: " + t)
                }
            }
        }, this),
        o
    }
    ,
    UTSBCChallengeEntity.prototype.hasMultipleValues = function(t, e) {
        return 1 < t.getValue(e).length
    }
    ,
    UTSBCChallengeEntity.prototype.isRequirementMet = function(t) {
        var e, i, r, n = this, o = t.keys().length, s = 0, a = 0, l = null;
        if (!this.squad || this.eligibilityRequirements.indexOf(t) < 0)
            return !1;
        if (t.isCombinedRequirement) {
            a = t.count;
            var c = {};
            this.getApplicableSlotsForCombinedReq(t).forEach(function(t) {
                c[t] ? (c[t] += 1,
                c[t] === o && s++) : c[t] = 1
            }, t)
        } else {
            if (1 !== o)
                return DebugUtils.Assert(!1, "Requirement is empty or invalid."),
                !1;
            var u = t.getFirstKey()
              , p = this.hasMultipleValues(t, u) ? t.getValue(u) : t.getFirstValue(u);
            switch (a = p,
            u) {
            case SBCEligibilityKey.ALL_PLAYERS_CHEMISTRY_POINTS:
                s = this.getNumberOfPlayersWithChemPoints(p, t.scope),
                a = UTSquadEntity.FIELD_PLAYERS - this.squad.simpleBrickIndices.length;
                break;
            case SBCEligibilityKey.CHEMISTRY_POINTS:
                s = this.squad.getChemistry();
                break;
            case SBCEligibilityKey.TEAM_STAR_RATING:
                s = this.squad.getStarRating();
                break;
            case SBCEligibilityKey.TEAM_RATING:
                s = this.squad.getRating();
                break;
            case SBCEligibilityKey.PLAYER_QUALITY:
                var h = this.getPlayersPerQualityTier().keys().map(function(t) {
                    return parseInt(t, 10)
                });
                if (s = -1,
                0 === h.length)
                    break;
                t.scope === SBCEligibilityScope.GREATER ? s = Math.min.apply(Math, h) : t.scope === SBCEligibilityScope.LOWER ? s = Math.max.apply(Math, h) : 1 === h.length && (s = h[0]);
                break;
            case SBCEligibilityKey.PLAYER_LEVEL:
                a = t.count,
                s = this.getNumberOfPlayersByQualityTier(p);
                break;
            case SBCEligibilityKey.SAME_NATION_COUNT:
                l = this.getPlayersPerNation();
                break;
            case SBCEligibilityKey.SAME_LEAGUE_COUNT:
                l = this.getPlayersPerLeague();
                break;
            case SBCEligibilityKey.SAME_CLUB_COUNT:
                l = this.getPlayersPerClub();
                break;
            case SBCEligibilityKey.NATION_COUNT:
                s = this.getPopularNationalities().length;
                break;
            case SBCEligibilityKey.LEAGUE_COUNT:
                s = this.getPopularLeagues().length;
                break;
            case SBCEligibilityKey.CLUB_COUNT:
                s = this.getPopularClubs().length;
                break;
            case SBCEligibilityKey.NATION_ID:
                a = t.count,
                s = this.getNumberOfPlayersByNation(p);
                break;
            case SBCEligibilityKey.LEAGUE_ID:
                a = t.count,
                Array.isArray(p) ? s += p.reduce(function(t, e) {
                    return t + n.getNumberOfPlayersByLeague(e)
                }, 0) : s = this.getNumberOfPlayersByLeague(p);
                break;
            case SBCEligibilityKey.CLUB_ID:
                a = t.count,
                s = this.getNumberOfPlayersByClub(p);
                break;
            case SBCEligibilityKey.LEGEND_COUNT:
                s = this.squad.getNumberOfLegends();
                break;
            case SBCEligibilityKey.PLAYER_RARITY:
                a = t.count,
                s = this.getNumberOfPlayersByRarity(p);
                break;
            case SBCEligibilityKey.PLAYER_RARITY_GROUP:
                a = t.count,
                s = this.getNumberOfPlayersByGroup(p);
                break;
            case SBCEligibilityKey.PLAYER_EXACT_OVR:
            case SBCEligibilityKey.PLAYER_MAX_OVR:
            case SBCEligibilityKey.PLAYER_MIN_OVR:
                a = t.count,
                s = this.getNumberOfPlayersByOVR(u, t.getFirstValue(u));
                break;
            case SBCEligibilityKey.FIRST_OWNER_PLAYERS_COUNT:
                s = this.getNumberOfFirstOwnedPlayers(p);
                break;
            case SBCEligibilityKey.PLAYER_TRADABILITY:
                a = t.count,
                s = this.getNumberOfPlayersByTradability(Array.isArray(p) ? 0 === p[0] : 0 === p);
                break;
            default:
                DebugUtils.Assert(!1, "Reached default case: " + u)
            }
        }
        return t.scope === SBCEligibilityScope.GREATER ? (l && (s = Math.max.apply(Math, (e = []).concat.apply(e, l.values()))),
        a <= s) : t.scope === SBCEligibilityScope.LOWER ? (l && (s = Math.max.apply(Math, (i = []).concat.apply(i, l.values()))),
        s <= a) : (l && (s = Math.max.apply(Math, (r = []).concat.apply(r, l.values()))),
        s === a)
    }
    ,
    UTSBCChallengeEntity.prototype.meetsRequirements = function() {
        if (this.squad && !this.squad.isSquadFull())
            return !1;
        for (var t = this.eligibilityRequirements.length; 0 < t--; ) {
            var e = this.isRequirementMet(this.eligibilityRequirements[t]);
            if (!e && this.eligibilityOperation === SBCEligibilityOperation.AND)
                return !1;
            if (e && this.eligibilityOperation === SBCEligibilityOperation.OR)
                return !0
        }
        return !0
    }
    ,
    UTSBCChallengeEntity.prototype.canSubmit = function() {
        return !(this.hasExpired(!0) || !this.meetsRequirements() || !this.squad) && this.squad.isSBCSquadEligible()
    }
    ,
    UTSBCChallengeEntity.prototype.hasUntradeableItems = function() {
        return !!this.squad && JSUtils.isValid(JSUtils.find(this.squad.getNonBrickSlots(), function(t) {
            return t.getItem().untradeable
        }))
    }
    ,
    UTSBCChallengeEntity.prototype.getRequirementCounter = function(t) {
        var e = 0;
        if (!this.isInProgress() || !this.squad || this.eligibilityRequirements.indexOf(t) < 0)
            return -1;
        if (t.isCombinedRequirement)
            return -1;
        var i = t.getFirstKey()
          , r = this.hasMultipleValues(t, i) ? t.getValue(i) : t.getFirstValue(i);
        switch (i) {
        case SBCEligibilityKey.ALL_PLAYERS_CHEMISTRY_POINTS:
            e += this.getNumberOfPlayersWithChemPoints(r, t.scope);
            break;
        case SBCEligibilityKey.NATION_COUNT:
            e += this.getPopularNationalities().length;
            break;
        case SBCEligibilityKey.LEAGUE_COUNT:
            e += this.getPopularLeagues().length;
            break;
        case SBCEligibilityKey.CLUB_COUNT:
            e += this.getPopularClubs().length;
            break;
        case SBCEligibilityKey.NATION_ID:
            e += this.getNumberOfPlayersByNation(r);
            break;
        case SBCEligibilityKey.LEAGUE_ID:
            e += this.getNumberOfPlayersByLeague(Array.isArray(r) ? r[0] : r);
            break;
        case SBCEligibilityKey.CLUB_ID:
            e += this.getNumberOfPlayersByClub(r);
            break;
        case SBCEligibilityKey.PLAYER_LEVEL:
            e += this.getNumberOfPlayersByQualityTier(r);
            break;
        case SBCEligibilityKey.PLAYER_RARITY:
            e += this.getNumberOfPlayersByRarity(r);
            break;
        case SBCEligibilityKey.PLAYER_RARITY_GROUP:
            e += this.getNumberOfPlayersByGroup(r);
            break;
        case SBCEligibilityKey.FIRST_OWNER_PLAYERS_COUNT:
            e += this.getNumberOfFirstOwnedPlayers(r);
            break;
        case SBCEligibilityKey.PLAYER_TRADABILITY:
            e += this.getNumberOfPlayersByTradability(Array.isArray(r) ? 0 === r[0] : 0 === r);
            break;
        default:
            return -1
        }
        return e
    }
    ,
    UTSBCChallengeEntity.prototype.getNumberOfRequirementsMet = function() {
        var e = this
          , i = 0;
        return this.squad && this.squad.isSquadFull() && i++,
        this.eligibilityRequirements.forEach(function(t) {
            e.isRequirementMet(t) && i++
        }, this),
        i
    }
    ,
    UTSBCChallengeEntity.prototype.getPlayersForCounters = function(t) {
        return void 0 === t && (t = !1),
        this.squad ? this.squad.getNonBrickSlots(t).filter(function(t) {
            return t.isValid()
        }) : []
    }
    ,
    UTSBCChallengeEntity.prototype.qualityCounter = function(t) {
        void 0 === t && (t = !1);
        var i = {};
        return this.getPlayersForCounters(t).forEach(function(t) {
            var e = t.getItem().getTier();
            i[e] ? i[e].push(t.getIndex()) : i[e] = [t.getIndex()]
        }, this),
        i
    }
    ,
    UTSBCChallengeEntity.prototype.leagueCounter = function(t) {
        void 0 === t && (t = !1);
        var i = {};
        return this.getPlayersForCounters(t).forEach(function(t) {
            var e = t.getItem().leagueId;
            i[e] ? i[e].push(t.getIndex()) : i[e] = [t.getIndex()]
        }, this),
        i
    }
    ,
    UTSBCChallengeEntity.prototype.clubCounter = function(t) {
        void 0 === t && (t = !1);
        var i = {};
        return this.getPlayersForCounters(t).forEach(function(t) {
            var e = t.getItem().teamId;
            i[e] ? i[e].push(t.getIndex()) : i[e] = [t.getIndex()]
        }, this),
        i
    }
    ,
    UTSBCChallengeEntity.prototype.nationCounter = function(t) {
        void 0 === t && (t = !1);
        var i = {};
        return this.getPlayersForCounters(t).forEach(function(t) {
            var e = t.getItem().nationId;
            i[e] ? i[e].push(t.getIndex()) : i[e] = [t.getIndex()]
        }, this),
        i
    }
    ,
    UTSBCChallengeEntity.prototype.playerCountHelper = function(t, i) {
        var r = this;
        return Array.isArray(t) ? t.reduce(function(t, e) {
            return t + i.call(r, e)
        }, 0) : i.call(this, t)
    }
    ,
    UTSBCChallengeEntity.prototype.getPlayersPerQualityTier = function() {
        var i = this.qualityCounter();
        return new EAHashTable(Object.keys(i).reduce(function(t, e) {
            return t[e] = i[e].length,
            t
        }, {}))
    }
    ,
    UTSBCChallengeEntity.prototype.getNumberOfPlayersByRarity = function(t, e) {
        if (void 0 === e && (e = !1),
        !this.squad)
            return 0;
        var r = this.squad;
        return this.playerCountHelper(t, function(i) {
            return r.getNonBrickSlots(e).reduce(function(t, e) {
                return e.isValid() && e.getItem().rareflag === i ? ++t : t
            }, 0)
        })
    }
    ,
    UTSBCChallengeEntity.prototype.getNumberOfPlayersByGroup = function(t, e) {
        if (void 0 === e && (e = !1),
        !this.squad)
            return 0;
        var r = this.squad;
        return this.playerCountHelper(t, function(i) {
            return r.getNonBrickSlots(e).reduce(function(t, e) {
                return e.isValid() && e.getItem().belongsToGroup(i) ? ++t : t
            }, 0)
        })
    }
    ,
    UTSBCChallengeEntity.prototype.getNumberOfFirstOwnedPlayers = function(t, e) {
        if (void 0 === e && (e = !1),
        !this.squad)
            return 0;
        var i = this.squad;
        return this.playerCountHelper(t, function(t) {
            return i.getNonBrickSlots(e).reduce(function(t, e) {
                return e.isValid() && 1 === e.item.owners ? ++t : t
            }, 0)
        })
    }
    ,
    UTSBCChallengeEntity.prototype.getNumberOfPlayersByTradability = function(e) {
        return this.getPlayersForCounters(!1).filter(function(t) {
            return t.isValid() && t.item.untradeable !== e
        }).length
    }
    ,
    UTSBCChallengeEntity.prototype.getNumberOfPlayersByQualityTier = function(t, e) {
        if (void 0 === e && (e = !1),
        !this.squad)
            return 0;
        var r = this.squad;
        return this.playerCountHelper(t, function(i) {
            return r.getNonBrickSlots(e).reduce(function(t, e) {
                return e.isValid() && e.getItem().getTier() === i ? ++t : t
            }, 0)
        })
    }
    ,
    UTSBCChallengeEntity.prototype.getNumberOfPlayersByOVR = function(r, t, e) {
        if (void 0 === e && (e = !1),
        !this.squad)
            return 0;
        var n = this.squad;
        return this.playerCountHelper(t, function(i) {
            return n.getNonBrickSlots(e).reduce(function(t, e) {
                switch (r) {
                case SBCEligibilityKey.PLAYER_MIN_OVR:
                    return e.isValid() && e.getItem().rating >= i ? ++t : t;
                case SBCEligibilityKey.PLAYER_MAX_OVR:
                    return e.isValid() && e.getItem().rating <= i ? ++t : t;
                case SBCEligibilityKey.PLAYER_EXACT_OVR:
                    return e.isValid() && e.getItem().rating === i ? ++t : t;
                default:
                    return 0
                }
            }, 0)
        })
    }
    ,
    UTSBCChallengeEntity.prototype.getPlayersPerLeague = function() {
        var i = this.leagueCounter();
        return new EAHashTable(Object.keys(i).reduce(function(t, e) {
            return t[e] = i[e].length,
            t
        }, {}))
    }
    ,
    UTSBCChallengeEntity.prototype.getPopularLeagues = function() {
        return Object.keys(this.leagueCounter())
    }
    ,
    UTSBCChallengeEntity.prototype.getSlotIndicesByLeague = function(t, e) {
        return void 0 === e && (e = !1),
        this.leagueCounter(e)[t] || []
    }
    ,
    UTSBCChallengeEntity.prototype.getNumberOfPlayersByLeague = function(t, e) {
        if (void 0 === e && (e = !1),
        !this.squad)
            return 0;
        var r = this.squad;
        return this.playerCountHelper(t, function(i) {
            return r.getNonBrickSlots(e).reduce(function(t, e) {
                return e.isValid() && e.getItem().leagueId === i ? ++t : t
            }, 0)
        })
    }
    ,
    UTSBCChallengeEntity.prototype.getPopularClubs = function() {
        return Object.keys(this.clubCounter())
    }
    ,
    UTSBCChallengeEntity.prototype.getPlayersPerClub = function() {
        var i = this.clubCounter();
        return new EAHashTable(Object.keys(i).reduce(function(t, e) {
            return t[e] = i[e].length,
            t
        }, {}))
    }
    ,
    UTSBCChallengeEntity.prototype.getSlotIndicesByClub = function(t, e) {
        return void 0 === e && (e = !1),
        this.clubCounter(e)[t] || []
    }
    ,
    UTSBCChallengeEntity.prototype.getSlotIndicesByTradableState = function(e) {
        return this.getPlayersForCounters(!1).filter(function(t) {
            return t.isValid() && t.item.untradeable !== e
        }).map(function(t) {
            return t.index
        })
    }
    ,
    UTSBCChallengeEntity.prototype.getNumberOfPlayersByClub = function(t, e) {
        if (void 0 === e && (e = !1),
        !this.squad)
            return 0;
        var r = this.squad;
        return this.playerCountHelper(t, function(i) {
            return r.getNonBrickSlots(e).reduce(function(t, e) {
                return e.isValid() && e.getItem().teamId === i ? ++t : t
            }, 0)
        })
    }
    ,
    UTSBCChallengeEntity.prototype.getPopularNationalities = function() {
        return Object.keys(this.nationCounter())
    }
    ,
    UTSBCChallengeEntity.prototype.getPlayersPerNation = function() {
        var i = this.nationCounter();
        return new EAHashTable(Object.keys(i).reduce(function(t, e) {
            return t[e] = i[e].length,
            t
        }, {}))
    }
    ,
    UTSBCChallengeEntity.prototype.getSlotIndicesByNation = function(t, e) {
        return void 0 === e && (e = !1),
        this.nationCounter(e)[t] || []
    }
    ,
    UTSBCChallengeEntity.prototype.getSlotIndicesByMinRating = function(e) {
        return this.getPlayersForCounters(!1).filter(function(t) {
            return t.item.rating >= e
        }).map(function(t) {
            return t.index
        })
    }
    ,
    UTSBCChallengeEntity.prototype.getSlotIndicesByMaxRating = function(e) {
        return this.getPlayersForCounters(!1).filter(function(t) {
            return t.item.rating <= e
        }).map(function(t) {
            return t.index
        })
    }
    ,
    UTSBCChallengeEntity.prototype.getSlotIndicesByExactRating = function(e) {
        return this.getPlayersForCounters(!1).filter(function(t) {
            return t.item.rating === e
        }).map(function(t) {
            return t.index
        })
    }
    ,
    UTSBCChallengeEntity.prototype.getSlotIndiciesByChemPoints = function(e) {
        return this.getPlayersForCounters(!1).filter(function(t) {
            return t.chemistry === e
        }).map(function(t) {
            return t.index
        })
    }
    ,
    UTSBCChallengeEntity.prototype.getNumberOfPlayersByNation = function(t, e) {
        if (void 0 === e && (e = !1),
        !this.squad)
            return 0;
        var r = this.squad;
        return this.playerCountHelper(t, function(i) {
            return r.getNonBrickSlots(e).reduce(function(t, e) {
                return e.isValid() && e.getItem().nationId === i ? ++t : t
            }, 0)
        })
    }
    ,
    UTSBCChallengeEntity.prototype.getNumberOfPlayersWithChemPoints = function(t, r) {
        if (!this.squad)
            return 0;
        var e = this.squad;
        return this.playerCountHelper(t, function(i) {
            return e.getSBCSlots().reduce(function(t, e) {
                switch (r) {
                case SBCEligibilityScope.GREATER:
                    return e.chemistry >= i ? ++t : t;
                case SBCEligibilityScope.LOWER:
                    return e.chemistry <= i ? ++t : t;
                case SBCEligibilityScope.EXACT:
                    return e.chemistry === i ? ++t : t;
                default:
                    return 0
                }
            }, 0)
        })
    }
    ,
    UTSBCChallengeEntity.prototype.update = function(t) {
        this.eligibilityOperation = t.eligibilityOperation,
        this.assetId = t.assetId,
        this.status = t.status,
        this.timesCompleted = t.timesCompleted,
        this.squad && t.squad ? this.squad.update(t.squad) : this.squad = t.squad,
        this.onDataChange.notify({
            eligibilityOperation: this.eligibilityOperation,
            assetId: this.assetId,
            statut: this.status,
            timesCompleted: this.timesCompleted,
            squad: this.squad
        })
    }
    ,
    UTSBCChallengeEntity
}(EAObject))
  , UTSBCSetEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(o) {
    function UTSBCSetEntity(t) {
        var e, i, r, n = o.call(this) || this;
        return n.challenges = new EAHashTable,
        n.id = t.id,
        n.name = t.name,
        n.description = t.description,
        n.endTime = t.endTime,
        n.notExpirable = 0 === n.endTime,
        n.priority = t.priority,
        n.assetId = t.assetId,
        n.challengesCount = t.challengeCount,
        n.challengesCompletedCount = t.challengesCompleted,
        n.timesCompleted = t.timesCompleted,
        n.isFeatured = t.featured,
        n.isFavourite = t.favourite,
        n.hidden = t.hidden,
        n.previewImageId = t.previewImageId,
        n.tutorial = t.tutorial,
        n.awards = t.rewards,
        n.refreshInterval = null !== (e = t.refreshInterval) && void 0 !== e ? e : 0,
        n.repeatabilityMode = t.repeatabilityMode,
        n.repeats = null !== (i = t.repeats) && void 0 !== i ? i : 0,
        n.startTime = null !== (r = t.startTime) && void 0 !== r ? r : 0,
        n.isSingleChallenge = 1 === t.challengeCount,
        1 < n.awards.length && n.awards.sort(function(t, e) {
            return t.getPriority() < e.getPriority() ? -1 : t.getPriority() > e.getPriority() ? 1 : 0
        }),
        n
    }
    return __extends(UTSBCSetEntity, o),
    Object.defineProperty(UTSBCSetEntity.prototype, "isRepeatable", {
        get: function() {
            return this.repeatabilityMode !== SBCRepeatabilityMode.NON_REPEATABLE
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTSBCSetEntity.prototype, "isLimitedRepeatable", {
        get: function() {
            return this.repeatabilityMode === SBCRepeatabilityMode.LIMITED || this.repeatabilityMode === SBCRepeatabilityMode.REFRESH
        },
        enumerable: !1,
        configurable: !0
    }),
    UTSBCSetEntity.prototype.challengesComplete = function() {
        return this.challengesCount === this.challengesCompletedCount
    }
    ,
    UTSBCSetEntity.prototype.isComplete = function() {
        return (!this.isRepeatable || this.isLimitedRepeatable && 0 === this.getRepeatsRemaining()) && this.challengesComplete()
    }
    ,
    UTSBCSetEntity.prototype.isDisplayable = function() {
        return !this.hasExpired()
    }
    ,
    UTSBCSetEntity.prototype.getTimeRemaining = function() {
        return this.endTime - Math.floor(Date.now() / MS_PER_SECOND)
    }
    ,
    UTSBCSetEntity.prototype.hasExpired = function(t) {
        if (this.notExpirable)
            return !1;
        var e = this.getTimeRemaining();
        return t && (e += services.Configuration.getFeatureSetting(UTServerSettingsRepository.KEY.SBC_GRACE_PERIOD_MINUTES) * SECONDS_PER_MINUTE),
        e < 0
    }
    ,
    UTSBCSetEntity.prototype.getChallenge = function(t) {
        return this.challenges.get(t)
    }
    ,
    UTSBCSetEntity.prototype.getChallenges = function() {
        return this.challenges.values()
    }
    ,
    UTSBCSetEntity.prototype.getPreviewImageId = function() {
        return this.previewImageId
    }
    ,
    UTSBCSetEntity.prototype.setChallenges = function(t) {
        for (var e = 0, i = t; e < i.length; e++) {
            var r = i[e]
              , n = this.getChallenge(r.id);
            n ? n.update(r) : this.challenges.set(r.id, r)
        }
    }
    ,
    UTSBCSetEntity.prototype.getTimeSinceStart = function() {
        return Math.floor(Date.now() / MS_PER_SECOND) - this.startTime
    }
    ,
    UTSBCSetEntity.prototype.getTimeSinceRefreshPeriodStart = function() {
        return 0 < this.refreshInterval ? this.getTimeSinceStart() % this.refreshInterval : 0
    }
    ,
    UTSBCSetEntity.prototype.getRefreshPeriodStartTime = function() {
        return Math.floor(Date.now() / MS_PER_SECOND) - this.getTimeSinceRefreshPeriodStart()
    }
    ,
    UTSBCSetEntity.prototype.getRefreshPeriodEndTime = function() {
        return this.getRefreshPeriodStartTime() + this.refreshInterval
    }
    ,
    UTSBCSetEntity.prototype.getRefreshTimeRemaining = function() {
        return this.repeatabilityMode === SBCRepeatabilityMode.REFRESH ? this.refreshInterval - this.getTimeSinceRefreshPeriodStart() : 0
    }
    ,
    UTSBCSetEntity.prototype.getRepeatsRemaining = function() {
        return this.isLimitedRepeatable ? this.repeats - this.timesCompleted : 0
    }
    ,
    UTSBCSetEntity
}(EAObject))
  , UTSBCFactory = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTSBCFactory(t) {
        var e = i.call(this) || this;
        return e.rewardFactory = t,
        e
    }
    return __extends(UTSBCFactory, i),
    UTSBCFactory.prototype.createCategory = function(t) {
        return new UTSBCCategoryDTO(t.categoryId,t.priority,t.name,SBCCategoryType.SERVER)
    }
    ,
    UTSBCFactory.prototype.createSet = function(t) {
        var e, i = this, r = JSUtils.isNumber(t.endTime) && 0 < t.endTime ? t.endTime + Math.round(Date.now() / 1e3) : 0, n = {
            assetId: JSUtils.isEmpty(t.setImageId) ? t.trophyId : t.setImageId,
            challengeCount: t.challengesCount,
            challengesCompleted: t.challengesCompletedCount,
            description: t.description,
            endTime: r,
            favourite: t.taggedByUser,
            featured: t.taggedByProduction,
            hidden: t.hidden,
            id: t.setId,
            name: t.name,
            previewImageId: t.rewardPreviewImageId ? t.rewardPreviewImageId : "",
            priority: t.priority,
            repeatabilityMode: t.repeatabilityMode,
            rewards: t.awards ? t.awards.map(function(t) {
                return i.rewardFactory.createRewardFromSbcData(t)
            }) : [],
            timesCompleted: null !== (e = t.timesCompletedInInterval) && void 0 !== e ? e : t.timesCompleted,
            tutorial: t.tutorial
        };
        return t.repeats && (n.repeats = t.repeats),
        t.repeatRefreshInterval && (n.refreshInterval = t.repeatRefreshInterval),
        t.startTime && (n.startTime = t.startTime),
        new UTSBCSetEntity(n)
    }
    ,
    UTSBCFactory.prototype.createChallenge = function(t) {
        var e = this
          , i = JSUtils.isNumber(t.endTime) && 0 < t.endTime ? t.endTime + Math.round(Date.now() / 1e3) : 0
          , r = {
            assetId: JSUtils.isEmpty(t.challengeImageId) ? t.trophyId : t.challengeImageId,
            description: t.description,
            eligibilityOperation: t.elgOperation ? t.elgOperation : SBCEligibilityOperation.AND,
            endTime: i,
            formation: t.formation ? t.formation : "",
            id: t.challengeId,
            name: t.name,
            priority: t.priority,
            repeatable: t.repeatable,
            requirements: this.createRequirements(t.elgReq),
            rewards: t.awards ? t.awards.map(function(t) {
                return e.rewardFactory.createRewardFromSbcData(t)
            }) : [],
            setId: t.setId,
            status: t.status,
            timesCompleted: t.timesCompleted,
            type: t.type
        };
        return new UTSBCChallengeEntity(r)
    }
    ,
    UTSBCFactory.prototype.createSetsFromCategories = function(t) {
        var r = this
          , e = []
          , n = [];
        return t.forEach(function(t) {
            var i = r.createCategory(t);
            e.push(i),
            t.sets.forEach(function(t) {
                var e = r.createSet(t);
                i.setIds.push(e.id),
                n.push(e)
            }, r)
        }, this),
        {
            categories: e,
            sets: n
        }
    }
    ,
    UTSBCFactory.prototype.createSetChallenges = function(t) {
        var e = this;
        return t.map(function(t) {
            return e.createChallenge(t)
        }, this)
    }
    ,
    UTSBCFactory.prototype.createRequirements = function(t) {
        var i = new EAHashTable;
        return t.forEach(function(t) {
            if (i.has(t.eligibilitySlot)) {
                var e = i.get(t.eligibilitySlot);
                e && e.push(t)
            } else
                i.set(t.eligibilitySlot, [t])
        }),
        i.values().map(function(t) {
            return new UTSBCEligibilityDTO(t)
        })
    }
    ,
    UTSBCFactory
}(EAObject))
  , UTSBCCategoryDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(o) {
    function UTSBCCategoryDTO(t, e, i, r) {
        var n = o.call(this) || this;
        return n.id = t,
        n.priority = e,
        n.name = i,
        n.setIds = [],
        n.displayable = !1,
        n.isAll = r === SBCCategoryType.CUSTOM_ALL,
        n.isFavourite = r === SBCCategoryType.CUSTOM_FAVOURITE,
        n.type = r,
        n
    }
    return __extends(UTSBCCategoryDTO, o),
    UTSBCCategoryDTO
}(EAObject))
  , UTSquadBuildingChallengeDAO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(n) {
    function UTSquadBuildingChallengeDAO(t) {
        var e = n.call(this) || this
          , i = new UTItemEntityFactory
          , r = new UTRewardFactory(i);
        return e.authDelegate = t,
        e.factory = new UTSBCFactory(r),
        e.updateFactory = new UTObjectivesUpdateFactory,
        e
    }
    return __extends(UTSquadBuildingChallengeDAO, n),
    UTSquadBuildingChallengeDAO.prototype.getSets = function() {
        var r = this
          , n = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/sbs/sets"),
        services.UTUtasRequestQueue.send(t).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            e.success && e.response && !JSUtils.isString(e.response) ? i.response = r.factory.createSetsFromCategories(e.response.categories) : i.response = {
                categories: [],
                sets: []
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTSquadBuildingChallengeDAO.prototype.getChallengesForSet = function(t) {
        var r = this
          , n = new EAObservable
          , e = new UTHttpRequest(this.authDelegate);
        return e.setPath("/ut/game/" + GAME_NAME + "/sbs/setId/" + t + "/challenges"),
        services.UTUtasRequestQueue.send(e).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            e.success && e.response && !JSUtils.isString(e.response) && (i.response = {
                challenges: r.factory.createSetChallenges(e.response.challenges)
            }),
            n.notify(i)
        }),
        n
    }
    ,
    UTSquadBuildingChallengeDAO.prototype.loadChallenge = function(t, e) {
        var r = this
          , n = new EAObservable
          , i = new UTHttpRequest(this.authDelegate);
        return e ? i.setPath("/ut/game/" + GAME_NAME + "/sbs/challenge/" + t + "/squad") : (i.setPath("/ut/game/" + GAME_NAME + "/sbs/challenge/" + t),
        i.setRequestType(HttpRequestMethod.POST)),
        services.UTUtasRequestQueue.send(i).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            e.success && e.response && !JSUtils.isString(e.response) ? i.response = {
                squad: factories.Squad.createSBCSquad(e.response.squad, r.factory, e.response.playerRequirements)
            } : i.response = {
                squad: null
            },
            n.notify(i)
        }),
        n
    }
    ,
    UTSquadBuildingChallengeDAO.prototype.saveChallenge = function(t, e) {
        var i = this
          , r = new EAObservable
          , n = new UTHttpRequest(this.authDelegate);
        return n.setPath("/ut/game/" + GAME_NAME + "/sbs/challenge/" + t + "/squad"),
        n.setRequestType(HttpRequestMethod.PUT),
        n.setRequestBody({
            players: e.getPlayers().map(function(t) {
                var e = t.getItem();
                return {
                    index: t.getIndex(),
                    itemData: {
                        id: e.id,
                        dream: e.concept
                    }
                }
            })
        }),
        services.UTUtasRequestQueue.send(n).observe(this, function(t, e) {
            t.unobserve(i),
            r.notify(e)
        }),
        r
    }
    ,
    UTSquadBuildingChallengeDAO.prototype.submitChallenge = function(t, e) {
        var r = this;
        void 0 === e && (e = !1);
        var n = new EAObservable
          , i = new UTHttpRequest(this.authDelegate);
        return i.setPath("/ut/game/" + GAME_NAME + "/sbs/challenge/" + t),
        i.setRequestType(HttpRequestMethod.PUT),
        i.setUrlVariables({
            skipUserSquadValidation: e
        }),
        services.UTUtasRequestQueue.send(i).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            e.success && e.response && !JSUtils.isString(e.response) && (e.response.squads ? (i.status = HttpStatusCode.CONFLICT,
            i.success = !1,
            i.response = {
                itemViolations: e.response.squads.reduce(function(t, e) {
                    var i = e.playerList.filter(function(t) {
                        return 0 < t
                    });
                    return 0 < i.length && t.push({
                        name: e.squad,
                        itemIds: i
                    }),
                    t
                }, [])
            }) : i.response = {
                challengeId: e.response.challengeId,
                credits: e.response.credits ? e.response.credits : 0,
                grantedChallengeAwards: e.response.grantedChallengeAwards ? e.response.grantedChallengeAwards : [],
                objectiveUpdates: e.response.dynamicObjectivesUpdates ? r.updateFactory.createObjectivesUpdate(e.response.dynamicObjectivesUpdates) : null,
                preOrderPacks: e.response.preOrderPacks ? e.response.preOrderPacks : 0,
                recoveredPacks: e.response.recoveredPacks ? e.response.recoveredPacks : 0,
                setId: e.response.setId
            }),
            n.notify(i)
        }),
        n
    }
    ,
    UTSquadBuildingChallengeDAO.prototype.setFavouriteTag = function(t, e) {
        var i = this
          , r = new EAObservable
          , n = new UTHttpRequest(this.authDelegate);
        return n.setPath("/ut/game/" + GAME_NAME + "/sbs/sets/tag"),
        n.setRequestType(HttpRequestMethod.PUT),
        n.setRequestBody({
            sets: [{
                setId: t,
                tagged: e
            }]
        }),
        services.UTUtasRequestQueue.send(n).observe(this, function(t, e) {
            t.unobserve(i),
            r.notify(e)
        }),
        r
    }
    ,
    UTSquadBuildingChallengeDAO
}(EAObject))
  , UTStoreRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTStoreRepository() {
        var t = e.call(this) || this;
        return t.catalogArticles = new EAHashTable,
        t.expiryTimestamp = 0,
        t.myPacks = new EAIterator([]),
        t
    }
    return __extends(UTStoreRepository, e),
    UTStoreRepository.prototype.reset = function() {
        this.catalogArticles.clear(),
        this.expiryTimestamp = 0,
        this.myPacks.resetCollection([])
    }
    ,
    UTStoreRepository.prototype.values = function() {
        return this.myPacks.values().concat(this.catalogArticles.values())
    }
    ,
    UTStoreRepository.prototype.isEmpty = function() {
        return this.catalogArticles.length < 1 && this.catalogArticles.length < 1
    }
    ,
    UTStoreRepository.prototype.setDirty = function() {
        this.reset()
    }
    ,
    UTStoreRepository.prototype.setCacheTimestamp = function(t, e) {
        void 0 === e && (e = 5 * SECONDS_PER_MINUTE),
        this.expiryTimestamp = t + e * MS_PER_SECOND
    }
    ,
    UTStoreRepository.prototype.isCacheExpired = function() {
        return this.expiryTimestamp < Date.now()
    }
    ,
    UTStoreRepository.prototype.setArticles = function(t) {
        var e = this;
        t.forEach(function(t) {
            return e.setArticle(t.id, t)
        })
    }
    ,
    UTStoreRepository.prototype.getArticle = function(e) {
        var t = this.myPacks.values().find(function(t) {
            return t.id.toString() === e
        });
        return t || this.catalogArticles.get(e)
    }
    ,
    UTStoreRepository.prototype.setArticle = function(t, e) {
        e instanceof UTStoreItemPackEntity && e.isMyPack ? this.myPacks.add(e) : this.catalogArticles.set(t, e)
    }
    ,
    UTStoreRepository
}(EAObject));
NamespaceManager.Register("repositories"),
repositories.Store = new UTStoreRepository;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTStoreXrayItemPackEntity = function(r) {
    function UTStoreXrayItemPackEntity(t, e) {
        var i = r.call(this, t, e) || this;
        return i.isDuplicateChecked = !1,
        i.duplicateIds = [],
        i.itemCollection = [],
        i.previewItem = t.previewItem,
        i.previewCreateTime = t.previewCreateTime,
        i.previewExpireTime = t.previewExpireTime,
        i.wasRefreshed = t.wasRefreshed,
        i
    }
    return __extends(UTStoreXrayItemPackEntity, r),
    UTStoreXrayItemPackEntity.prototype.isPreviewed = function() {
        return this.isPreviewExpired() && this.resetPack(),
        !(this.isPreviewExpired() || this.previewItem instanceof UTNullItemEntity)
    }
    ,
    UTStoreXrayItemPackEntity.prototype.isPreviewExpired = function() {
        return Date.now() / MS_PER_SECOND > this.previewExpireTime
    }
    ,
    UTStoreXrayItemPackEntity.prototype.shouldRequestServerPreview = function() {
        return (this.isPreviewExpired() || this.isArticleExpired()) && this.resetPack(),
        0 === this.itemCollection.length
    }
    ,
    UTStoreXrayItemPackEntity.prototype.isCollectionCached = function() {
        return !this.shouldRequestServerPreview()
    }
    ,
    UTStoreXrayItemPackEntity.prototype.resetPack = function() {
        this.isDuplicateChecked = !1,
        this.duplicateIds = [],
        this.itemCollection = [],
        this.previewItem = new UTNullItemEntity,
        this.previewCreateTime = 0,
        this.previewExpireTime = 0,
        this.wasRefreshed = !1
    }
    ,
    UTStoreXrayItemPackEntity.prototype.setDuplicateCollection = function(t) {
        this.duplicateIds = t
    }
    ,
    UTStoreXrayItemPackEntity.prototype.setPreviewCollection = function(t) {
        this.itemCollection = t
    }
    ,
    UTStoreXrayItemPackEntity.prototype.getPreviewItem = function() {
        return this.previewItem
    }
    ,
    UTStoreXrayItemPackEntity.prototype.isRefreshed = function() {
        return this.wasRefreshed
    }
    ,
    UTStoreXrayItemPackEntity.prototype.getPreviewCollection = function() {
        var t = new EAObservable
          , e = new UTHttpResponseDTO;
        return this.shouldRequestServerPreview() ? this.previewPack() : (e.success = !0,
        e.status = HttpStatusCode.NOT_MODIFIED,
        e.response = {
            items: this.itemCollection,
            previewItem: this.previewItem,
            previewCreateTime: this.previewCreateTime,
            previewExpireTime: this.previewExpireTime,
            wasRefreshed: !1
        },
        t.notify(e),
        t)
    }
    ,
    UTStoreXrayItemPackEntity.prototype.previewPack = function() {
        var n = this
          , t = this.storeDAO.previewArticle(this.id, this.isPreviewed());
        return t.observe(this, function(t, e) {
            var i, r;
            t.unobserve(n),
            e.success && e.response && !JSUtils.isString(e.response) ? (n.previewItem = e.response.previewItem,
            n.previewCreateTime = e.response.previewCreateTime,
            n.previewExpireTime = e.response.previewExpireTime,
            n.setPreviewCollection(null !== (i = e.response.items) && void 0 !== i ? i : []),
            n.wasRefreshed = e.response.wasRefreshed) : (null === (r = e.error) || void 0 === r ? void 0 : r.code) === UtasErrorCode.SERVICE_IS_DISABLED && (repositories.Store.setDirty(),
            n.setPreviewCollection([]),
            services.Store.setStorePreviewsEnabled(!1))
        }),
        t
    }
    ,
    UTStoreXrayItemPackEntity.prototype.getPreviewDuplicates = function() {
        var t = new EAObservable
          , e = new UTHttpResponseDTO;
        return this.isDuplicateChecked ? (e.success = !0,
        e.status = HttpStatusCode.NOT_MODIFIED,
        e.response = {
            duplicateIds: this.duplicateIds
        },
        t.notify(e),
        t) : this.duplicateCheckPack()
    }
    ,
    UTStoreXrayItemPackEntity.prototype.duplicateCheckPack = function() {
        var r = this
          , t = this.storeDAO.duplicateCheckPreview(this.id);
        return t.observe(this, function(t, e) {
            var i;
            t.unobserve(r),
            e.success && e.response && !JSUtils.isString(e.response) ? (r.isDuplicateChecked = !0,
            r.setDuplicateCollection(e.response.duplicateIds)) : (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && (repositories.Store.setDirty(),
            r.setDuplicateCollection([]),
            r.isDuplicateChecked = !1,
            services.Store.setStoreDuplicateChecksEnabled(!1))
        }),
        t
    }
    ,
    UTStoreXrayItemPackEntity
}(UTStoreItemPackEntity)
  , UTStoreArticleFactory = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
__assign = this && this.__assign || function() {
    return (__assign = Object.assign || function(t) {
        for (var e, i = 1, r = arguments.length; i < r; i++)
            for (var n in e = arguments[i])
                Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
        return t
    }
    ).apply(this, arguments)
}
,
function(i) {
    function UTStoreArticleFactory(t) {
        var e = i.call(this) || this;
        return e.storeDAO = t,
        e
    }
    return __extends(UTStoreArticleFactory, i),
    UTStoreArticleFactory.prototype.generateStoreArticleOptions = function(t) {
        var e, i, r, n, o, s, a = {
            assetId: t.assetId,
            categoryList: {
                categoryId: null !== (i = null === (e = t.categoryList) || void 0 === e ? void 0 : e.categoryId) && void 0 !== i ? i : 0,
                orderInCategory: null !== (n = null === (r = t.categoryList) || void 0 === r ? void 0 : r.orderInCategory) && void 0 !== n ? n : 0
            },
            dealType: t.dealType,
            displayGroup: {
                priority: t.displayGroup.priority,
                value: t.displayGroup.value
            },
            displayGroupAssetId: t.displayGroupAssetId,
            displayGroupUseDefaultImage: t.displayGroupUseDefaultImage,
            globalAvailableQuantity: null !== (o = t.globalAvailableQuantity) && void 0 !== o ? o : -1,
            id: t.id,
            packType: t.packType,
            quantity: t.quantity,
            saleType: t.saleType,
            sortPriority: t.sortPriority,
            state: t.state,
            userAvailableQuantity: null !== (s = t.purchaseLimit) && void 0 !== s ? s : -1
        };
        return t.guidAssetId && (a.guidAssetId = t.guidAssetId),
        a
    }
    ,
    UTStoreArticleFactory.prototype.generateStorePurchasableArticleOptions = function(t) {
        var e, i, r, n, o = this.generateStoreArticleOptions(t);
        return __assign(__assign({}, o), {
            currencies: null !== (e = t.currencies) && void 0 !== e ? e : [],
            dealType: null !== (i = t.dealType) && void 0 !== i ? i : PurchaseDealType.REGULAR,
            end: null !== (r = t.end) && void 0 !== r ? r : 0,
            start: null !== (n = t.start) && void 0 !== n ? n : 0,
            tradable: !JSUtils.isBoolean(t.untradeable) || !t.untradeable
        })
    }
    ,
    UTStoreArticleFactory.prototype.generateStoreItemPackOptions = function(t) {
        var e, i, r, n, o, s, a = this.generateStorePurchasableArticleOptions(t), l = __assign(__assign({}, a), {
            packContentInfo: {
                contentType: null !== (i = null === (e = t.packContentInfo) || void 0 === e ? void 0 : e.contentType) && void 0 !== i ? i : PurchaseArticleContentType.UNKNOWN,
                itemQuantity: null !== (n = null === (r = t.packContentInfo) || void 0 === r ? void 0 : r.itemQuantity) && void 0 !== n ? n : 0,
                rareQuantity: null !== (s = null === (o = t.packContentInfo) || void 0 === o ? void 0 : o.rareQuantity) && void 0 !== s ? s : 0
            }
        });
        return t.packOdds && (l.packOdds = t.packOdds),
        l
    }
    ,
    UTStoreArticleFactory.prototype.generateStoreXrayItemPackOptions = function(t) {
        var e, i, r, n = this.generateStoreItemPackOptions(t);
        return __assign(__assign({}, n), {
            previewCreateTime: null !== (e = t.previewCreateTime) && void 0 !== e ? e : 0,
            previewExpireTime: null !== (i = t.previewExpireTime) && void 0 !== i ? i : 0,
            previewItem: factories.Item.createPreviewItem(t.previewItem),
            wasRefreshed: null !== (r = t.wasRefreshed) && void 0 !== r && r
        })
    }
    ,
    UTStoreArticleFactory.prototype.generateStorePointsPackOptions = function(t) {
        var e, i, r, n, o, s, a = this.generateStoreArticleOptions(t), l = __assign(__assign({}, a), {
            firstPartyStoreId: null !== (e = t.firstPartyStoreId) && void 0 !== e ? e : 0,
            points: null !== (i = t.points) && void 0 !== i ? i : 0,
            productId: t.productId
        });
        return t.extPrice && (l.extPrice = {
            originalPrice: {
                groupName: null !== (n = null === (r = t.extPrice) || void 0 === r ? void 0 : r.originalPrice.groupName) && void 0 !== n ? n : "",
                productId: null !== (s = null === (o = t.extPrice) || void 0 === o ? void 0 : o.originalPrice.productId) && void 0 !== s ? s : ""
            }
        },
        t.extPrice.finalPrice && (l.extPrice.finalPrice = {
            groupName: t.extPrice.finalPrice.groupName,
            productId: t.extPrice.finalPrice.productId
        })),
        l
    }
    ,
    UTStoreArticleFactory.prototype.generateStoreBundleOptions = function(t) {
        var e, i, r, n = this.generateStorePurchasableArticleOptions(t);
        return __assign(__assign({}, n), {
            assetId: null !== (e = t.assetId) && void 0 !== e ? e : 0,
            bundleItems: this.createBundleItemEntities(null !== (i = t.bundleItems) && void 0 !== i ? i : []),
            dealType: null !== (r = t.dealType) && void 0 !== r ? r : PurchaseDealType.REGULAR,
            tradable: !JSUtils.isBoolean(t.untradeable) || !t.untradeable
        })
    }
    ,
    UTStoreArticleFactory.prototype.createStoreItemPack = function(t) {
        return new UTStoreItemPackEntity(this.generateStoreItemPackOptions(t),this.storeDAO)
    }
    ,
    UTStoreArticleFactory.prototype.createStoreXrayItemPack = function(t) {
        return new UTStoreXrayItemPackEntity(this.generateStoreXrayItemPackOptions(t),this.storeDAO)
    }
    ,
    UTStoreArticleFactory.prototype.createStorePointsPack = function(t) {
        return new UTStorePointsPackEntity(this.generateStorePointsPackOptions(t),this.storeDAO)
    }
    ,
    UTStoreArticleFactory.prototype.createStoreBundle = function(t) {
        return new UTStoreBundleEntity(this.generateStoreBundleOptions(t),this.storeDAO)
    }
    ,
    UTStoreArticleFactory.prototype.createStoreArticles = function(t, i) {
        var r = this
          , n = [];
        return t.forEach(function(t) {
            Array.isArray(t.categoryList) && (t.categoryList = t.categoryList[0]);
            var e = t.packType;
            e === PurchasePackType.CARDPACK ? !function(t) {
                var e;
                return (null === (e = t.isPreviewable) || void 0 === e || e) && t.packType === PurchasePackType.CARDPACK && t.displayGroup.value !== PurchaseDisplayGroup.MYPACKS && i
            }(t) ? n.push(r.createStoreItemPack(t)) : n.push(r.createStoreXrayItemPack(t)) : e === PurchasePackType.POINTSPACK ? n.push(r.createStorePointsPack(t)) : e === PurchasePackType.VANITYBUNDLE ? n.push(r.createStoreBundle(t)) : DebugUtils.Assert(!1, "Unsupported " + e + " PurchasePackType found in UTStoreArticleFactory.createStoreArticles")
        }),
        n
    }
    ,
    UTStoreArticleFactory.prototype.createBundleItemEntities = function(t) {
        var e = [];
        return t.forEach(function(t) {
            e.push(factories.Item.createVanityItem(t))
        }),
        e
    }
    ,
    UTStoreArticleFactory
}(EAObject))
  , UTPersonaClubDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTPersonaClubDTO(t) {
        var e = i.call(this) || this;
        return e.abbr = t.clubAbbr,
        e.name = t.clubName,
        e.established = t.established,
        e.lastAccessTime = t.lastAccessTime,
        e.assetId = t.assetId,
        e.sku = t.sku,
        e.platform = FUTDataUtils.mapSkuToPlatform(e.sku),
        e.year = t.year,
        e.isXbox = e.platform === GamePlatform.XBL,
        e.isPlaystation = e.platform === GamePlatform.PSN,
        e.isPC = e.platform === GamePlatform.PC,
        e.isStadia = e.platform === GamePlatform.STADIA,
        e.isSwitch = e.platform === GamePlatform.SWI,
        e
    }
    return __extends(UTPersonaClubDTO, i),
    UTPersonaClubDTO.prototype.setAssetId = function(t) {
        this.assetId = t
    }
    ,
    UTPersonaClubDTO
}(EAObject))
  , UTPersonaEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTPersonaEntity(t) {
        var e, a = i.call(this) || this;
        a._sku = GameSku.UNKNOWN,
        a.id = t.personaId,
        a.name = t.personaName,
        a.isReturningUser = 1 === t.returningUser,
        a.isAccessTrial = t.trial,
        a.isFreeTrial = t.trialFree,
        a.isNewTrial = (a.isAccessTrial || a.isFreeTrial) && !a.isReturningUser,
        a.state = null !== (e = t.userState) && void 0 !== e ? e : PersonaUserState.NONE,
        a.clubs = new EAHashTable;
        var l = 0;
        return t.userClubList.forEach(function(t) {
            var e = APP_YEAR
              , i = e - 1
              , r = parseInt(t.year, 10);
            if ((r === e || r === i) && (a.isReturningUser || r !== i)) {
                var n = GameSku.UNKNOWN;
                if (JSUtils.isValid(t.skuAccessList)) {
                    for (var o in t.skuAccessList)
                        if (t.skuAccessList.hasOwnProperty(o) && t.skuAccessList[o] === t.lastAccessTime) {
                            n = o;
                            break
                        }
                    var s = new UTPersonaClubDTO({
                        clubAbbr: t.clubAbbr,
                        clubName: t.clubName,
                        established: t.established,
                        lastAccessTime: t.lastAccessTime,
                        assetId: t.assetId,
                        platform: t.platform,
                        sku: n,
                        year: r
                    });
                    a.clubs.set(s.sku, s),
                    (s.year === APP_YEAR || !a.hasClubForCurrentYear) && s.lastAccessTime > l && (l = s.lastAccessTime,
                    a.sku = s.sku)
                }
            }
        }, a),
        DebugUtils.Assert(a.sku !== GameSku.UNKNOWN, "This account has no sku."),
        a.hasOriginAccess = !1,
        a.loyaltyRewards = [],
        a
    }
    return __extends(UTPersonaEntity, i),
    Object.defineProperty(UTPersonaEntity.prototype, "sku", {
        get: function() {
            return this._sku
        },
        set: function(t) {
            this.clubs.has(t) && (this._sku = t)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTPersonaEntity.prototype, "hasFUT", {
        get: function() {
            return 0 < this.clubs.length
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTPersonaEntity.prototype, "hasClubForCurrentYear", {
        get: function() {
            return JSUtils.isValid(this.clubs.find(function(t) {
                return t.year === APP_YEAR
            }))
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTPersonaEntity.prototype, "hasFullAccess", {
        get: function() {
            return !this.isAccessTrial && !this.isFreeTrial && this.hasClubForCurrentYear
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTPersonaEntity.prototype, "isEligibleForMobileStart", {
        get: function() {
            return !!this.isReturningUser && (!this.hasClubForCurrentYear || (this.sku === GameSku.PREV_XBO && !this.clubs.has(GameSku.XBO) && !this.clubs.has(GameSku.XBX) || this.sku === GameSku.PREV_PS4 && !this.clubs.has(GameSku.PS4) && !this.clubs.has(GameSku.PS5) || this.sku === GameSku.PREV_PC && !this.clubs.has(GameSku.PC) || this.sku === GameSku.PREV_STEAM && !this.clubs.has(GameSku.STEAM) || this.sku === GameSku.PREV_STADIA && !this.clubs.has(GameSku.STADIA)))
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTPersonaEntity.prototype, "platform", {
        get: function() {
            var t = this.clubs.get(this.sku);
            return t ? t.platform : GamePlatform.NONE
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTPersonaEntity.prototype, "isXbox", {
        get: function() {
            var t = this.clubs.get(this.sku);
            return !!t && t.isXbox
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTPersonaEntity.prototype, "isPlaystation", {
        get: function() {
            var t = this.clubs.get(this.sku);
            return !!t && t.isPlaystation
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTPersonaEntity.prototype, "isPC", {
        get: function() {
            var t = this.clubs.get(this.sku);
            return !!t && t.isPC
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTPersonaEntity.prototype, "isStadia", {
        get: function() {
            var t = this.clubs.get(this.sku);
            return !!t && t.isStadia
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTPersonaEntity.prototype, "isSwitch", {
        get: function() {
            var t = this.clubs.get(this.sku);
            return !!t && t.isSwitch
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTPersonaEntity.prototype, "isG5", {
        get: function() {
            var t = this.clubs.get(this.sku);
            return t && (t.isPlaystation && t.sku === GameSku.PS5 || t.isXbox && t.sku === GameSku.XBX) || !1
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTPersonaEntity.prototype, "lastAccessTime", {
        get: function() {
            var t = this.clubs.get(this.sku);
            return t ? t.lastAccessTime : 0
        },
        enumerable: !1,
        configurable: !0
    }),
    UTPersonaEntity.prototype.getValidClubs = function() {
        var r = this;
        return this.clubs.filter(function(t) {
            var e = APP_YEAR - 1
              , i = !r.hasClubForCurrentYear && r.isReturningUser && r.state !== PersonaUserState.RETURNING_USER_EXPIRED && t.year === e;
            return t.year === APP_YEAR || i
        }, this)
    }
    ,
    UTPersonaEntity.prototype.getCurrentClub = function() {
        return this.clubs.get(this.sku)
    }
    ,
    UTPersonaEntity.prototype.createClub = function(t, e) {
        var u = this
          , p = new EAObservable;
        return this.hasClubForCurrentYear || !this.isReturningUser || this.state === PersonaUserState.RETURNING_USER_EXPIRED ? p.notify({
            success: !1,
            status: HttpStatusCode.FORBIDDEN,
            data: null
        }) : accessobjects.Onboarding.createClub(t, e).observe(this, function(t, e) {
            if (t.unobserve(u),
            e.success && e.response && !JSUtils.isString(e.response)) {
                var i = e.response
                  , r = FUTDataUtils.mapSkuToCurrentYear(u.sku)
                  , n = JSUtils.find(i.login.actives, function(t) {
                    return JSUtils.isValid(t.header) && "Badge" === t.header
                })
                  , o = n ? n.assetId : -1
                  , s = new UTPersonaClubDTO({
                    clubAbbr: i.login.clubAbbr,
                    clubName: i.login.clubName,
                    established: parseInt(i.login.established, 10),
                    lastAccessTime: parseInt(i.login.established, 10),
                    assetId: o,
                    platform: u.platform,
                    sku: r,
                    year: APP_YEAR
                });
                u.clubs.set(s.sku, s),
                u.sku = s.sku;
                var a = i.starterPack.map(function(t) {
                    return factories.Item.createItem(t)
                })
                  , l = a.filter(function(t) {
                    return t.isPlayer()
                })
                  , c = null;
                0 < l.length ? l.forEach(function(t) {
                    (!c || c.rating < t.rating) && (c = t)
                }) : a.forEach(function(t) {
                    (!c || c.discardValue < t.discardValue) && (c = t)
                }),
                p.notify({
                    success: !0,
                    status: e.status,
                    data: {
                        items: a,
                        highestRated: c
                    }
                })
            } else
                p.notify({
                    success: !1,
                    status: e.status,
                    data: null
                })
        }),
        p
    }
    ,
    UTPersonaEntity.prototype.setLoyaltyRewards = function(t) {
        this.loyaltyRewards = t
    }
    ,
    UTPersonaEntity.prototype.getLoyaltyRewards = function() {
        return this.loyaltyRewards
    }
    ,
    UTPersonaEntity
}(EAObject))
  , UTUserFactory = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTUserFactory() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(UTUserFactory, t),
    UTUserFactory.prototype.personaHasSupportedClubYear = function(t) {
        var e = 1 === t.returningUser ? [APP_YEAR, APP_YEAR - 1] : [APP_YEAR];
        return 0 < t.userClubList.filter(function(t) {
            return e.includes(Number(t.year))
        }).length
    }
    ,
    UTUserFactory.prototype.generatePersonaEntity = function(t) {
        return new UTPersonaEntity(t)
    }
    ,
    UTUserFactory.prototype.generatePersonaEntities = function(t) {
        return t.filter(this.personaHasSupportedClubYear).map(this.generatePersonaEntity)
    }
    ,
    UTUserFactory
}(EAObject))
  , UTWorldCupDAO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTWorldCupDAO(t, e) {
        var i = r.call(this) || this;
        return i.authDelegate = t,
        i.requestDelegate = e,
        i
    }
    return __extends(UTWorldCupDAO, r),
    UTWorldCupDAO.prototype.getPacks = function() {
        var i = this
          , r = new EAObservable
          , n = new UTHttpResponseDTO
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/worldcup/starterpack/list"),
        this.requestDelegate.send(t).observe(this, function(t, e) {
            t.unobserve(i),
            JSUtils.assignPropertyValues(e, n),
            JSUtils.isObject(e.response) && (n.response = {
                packs: e.response.wceStarterPacks
            }),
            r.notify(n)
        }),
        r
    }
    ,
    UTWorldCupDAO.prototype.selectNationStarterPack = function(t) {
        var r = this
          , n = new EAObservable
          , o = new UTHttpResponseDTO
          , e = new UTHttpRequest(this.authDelegate);
        return e.setPath("/ut/game/" + GAME_NAME + "/worldcup/starterpack/" + t),
        e.requestType = HttpRequestMethod.POST,
        this.requestDelegate.send(e).observe(this, function(t, e) {
            if (t.unobserve(r),
            JSUtils.assignPropertyValues(e, o),
            JSUtils.isObject(e.response) && Array.isArray(e.response.itemList)) {
                var i = factories.Item.generateItemsFromItemData(e.response.itemList);
                o.response = {
                    items: i
                }
            } else
                o.response = {
                    items: []
                };
            n.notify(o)
        }),
        n
    }
    ,
    UTWorldCupDAO
}(EAObject))
  , EALocaleVO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(s) {
    function EALocaleVO(t, e, i, r, n) {
        var o = s.call(this) || this;
        return o.direction = n,
        o.language = e,
        o.name = r,
        o.region = t,
        o.variant = i,
        o
    }
    return __extends(EALocaleVO, s),
    EALocaleVO.prototype.value = function() {
        return this.toString()
    }
    ,
    EALocaleVO.prototype.equals = function(t) {
        return t instanceof EALocaleVO && this.language === t.language && this.region === t.region && this.variant === t.variant
    }
    ,
    EALocaleVO.prototype.toString = function() {
        return this.variant !== LanguageVariantEnum.NONE ? this.language + "_" + this.variant + "_" + this.region : this.language + "_" + this.region
    }
    ,
    EALocaleVO.prototype.toBCPString = function(t) {
        return void 0 === t && (t = !1),
        t && this.variant !== LanguageVariantEnum.NONE ? this.language + "-" + this.variant + "-" + this.region : this.language + "-" + this.region
    }
    ,
    EALocaleVO.prototype.toEAFIFAString = function() {
        var t = this.language
          , e = this.region;
        return t === LanguageEnum.JAPANESE && (t = "jp"),
        t === LanguageEnum.CZECH && (t = "cz"),
        t === LanguageEnum.NORWEGIAN_BOKMAL && (t = LanguageEnum.NORWEGIAN),
        e === RegionEnum.TAIWAN && (e = RegionEnum.HONGKONG),
        t + "-" + e
    }
    ,
    EALocaleVO.prototype.toEANetworkString = function() {
        return this.language + "_" + this.region
    }
    ,
    EALocaleVO.prototype.isValid = function() {
        return this.language !== LanguageEnum.UNKNOWN && this.region !== RegionEnum.UNKNOWN
    }
    ,
    EALocaleVO.prototype.isRTL = function() {
        return this.direction === LanguageDirectionEnum.RTL
    }
    ,
    EALocaleVO.prototype.usesLatinAlphabet = function() {
        return this.language !== LanguageEnum.JAPANESE && this.language !== LanguageEnum.KOREAN && this.language !== LanguageEnum.CHINESE && this.language !== LanguageEnum.ARABIC && this.language !== LanguageEnum.RUSSIAN
    }
    ,
    EALocaleVO
}(EAObject))
  , EALocaleFactory = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function EALocaleFactory() {
        return t.call(this) || this
    }
    return __extends(EALocaleFactory, t),
    EALocaleFactory.prototype.stringToLanguage = function(t) {
        switch (t) {
        case LanguageEnum.FRENCH:
            return LanguageEnum.FRENCH;
        case LanguageEnum.ITALIAN:
            return LanguageEnum.ITALIAN;
        case LanguageEnum.GERMAN:
            return LanguageEnum.GERMAN;
        case LanguageEnum.SPANISH:
            return LanguageEnum.SPANISH;
        case LanguageEnum.DUTCH:
            return LanguageEnum.DUTCH;
        case LanguageEnum.PORTUGUESE:
            return LanguageEnum.PORTUGUESE;
        case LanguageEnum.POLISH:
            return LanguageEnum.POLISH;
        case LanguageEnum.ARABIC:
            return LanguageEnum.ARABIC;
        case LanguageEnum.RUSSIAN:
            return LanguageEnum.RUSSIAN;
        case LanguageEnum.TURKISH:
            return LanguageEnum.TURKISH;
        case LanguageEnum.JAPANESE:
            return LanguageEnum.JAPANESE;
        case LanguageEnum.KOREAN:
            return LanguageEnum.KOREAN;
        case LanguageEnum.CHINESE:
            return LanguageEnum.CHINESE;
        case LanguageEnum.SWEDISH:
            return LanguageEnum.SWEDISH;
        case LanguageEnum.NORWEGIAN:
        case LanguageEnum.NORWEGIAN_BOKMAL:
        case LanguageEnum.NORWEGIAN_NYNORSK:
            return LanguageEnum.NORWEGIAN_BOKMAL;
        case LanguageEnum.DANISH:
            return LanguageEnum.DANISH;
        case LanguageEnum.CZECH:
            return LanguageEnum.CZECH;
        default:
            return LanguageEnum.ENGLISH
        }
    }
    ,
    EALocaleFactory.prototype.stringToLanguageVariant = function(t) {
        switch (t) {
        case LanguageVariantEnum.CHINESE_SIMPLIFIED:
            return LanguageVariantEnum.CHINESE_SIMPLIFIED;
        case LanguageVariantEnum.CHINESE_TRADITIONAL:
            return LanguageVariantEnum.CHINESE_TRADITIONAL;
        default:
            return LanguageVariantEnum.NONE
        }
    }
    ,
    EALocaleFactory.prototype.stringToRegion = function(t, e) {
        switch (t) {
        case RegionEnum.FRANCE:
            return RegionEnum.FRANCE;
        case RegionEnum.ITALY:
            return RegionEnum.ITALY;
        case RegionEnum.GERMANY:
            return RegionEnum.GERMANY;
        case RegionEnum.SPAIN:
            return RegionEnum.SPAIN;
        case RegionEnum.MEXICO:
            return RegionEnum.MEXICO;
        case RegionEnum.NETHERLANDS:
            return RegionEnum.NETHERLANDS;
        case RegionEnum.BRAZIL:
            return RegionEnum.BRAZIL;
        case RegionEnum.POLAND:
            return RegionEnum.POLAND;
        case RegionEnum.SAUDI_ARABIA:
            return RegionEnum.SAUDI_ARABIA;
        case RegionEnum.RUSSIA:
            return RegionEnum.RUSSIA;
        case RegionEnum.TURKEY:
            return RegionEnum.TURKEY;
        case RegionEnum.JAPAN:
            return RegionEnum.JAPAN;
        case RegionEnum.KOREA:
            return RegionEnum.KOREA;
        case RegionEnum.HONGKONG:
        case RegionEnum.TAIWAN:
            return RegionEnum.HONGKONG;
        case RegionEnum.CHINA:
            return RegionEnum.CHINA;
        case RegionEnum.SWEDEN:
            return RegionEnum.SWEDEN;
        case RegionEnum.NORWAY:
            return RegionEnum.NORWAY;
        case RegionEnum.DENMARK:
            return RegionEnum.DENMARK;
        case RegionEnum.CZECH:
            return RegionEnum.CZECH;
        case RegionEnum.PORTUGAL:
            return RegionEnum.PORTUGAL;
        default:
            if (e) {
                var i = e === LanguageEnum.CHINESE ? LanguageVariantEnum.CHINESE_SIMPLIFIED : LanguageVariantEnum.NONE;
                return this.getRegionFromLanguage(e, i)
            }
            return RegionEnum.USA
        }
    }
    ,
    EALocaleFactory.prototype.getVariantFromRegion = function(t) {
        switch (t) {
        case RegionEnum.HONGKONG:
        case RegionEnum.TAIWAN:
            return LanguageVariantEnum.CHINESE_TRADITIONAL;
        case RegionEnum.CHINA:
            return LanguageVariantEnum.CHINESE_SIMPLIFIED;
        default:
            return LanguageVariantEnum.NONE
        }
    }
    ,
    EALocaleFactory.prototype.getRegionFromLanguage = function(t, e) {
        switch (t) {
        case LanguageEnum.ENGLISH:
            return RegionEnum.USA;
        case LanguageEnum.FRENCH:
            return RegionEnum.FRANCE;
        case LanguageEnum.ITALIAN:
            return RegionEnum.ITALY;
        case LanguageEnum.GERMAN:
            return RegionEnum.GERMANY;
        case LanguageEnum.SPANISH:
            return RegionEnum.SPAIN;
        case LanguageEnum.DUTCH:
            return RegionEnum.NETHERLANDS;
        case LanguageEnum.PORTUGUESE:
            return RegionEnum.PORTUGAL;
        case LanguageEnum.POLISH:
            return RegionEnum.POLAND;
        case LanguageEnum.ARABIC:
            return RegionEnum.SAUDI_ARABIA;
        case LanguageEnum.RUSSIAN:
            return RegionEnum.RUSSIA;
        case LanguageEnum.TURKISH:
            return RegionEnum.TURKEY;
        case LanguageEnum.JAPANESE:
            return RegionEnum.JAPAN;
        case LanguageEnum.KOREAN:
            return RegionEnum.KOREA;
        case LanguageEnum.SWEDISH:
            return RegionEnum.SWEDEN;
        case LanguageEnum.NORWEGIAN:
        case LanguageEnum.NORWEGIAN_BOKMAL:
        case LanguageEnum.NORWEGIAN_NYNORSK:
            return RegionEnum.NORWAY;
        case LanguageEnum.DANISH:
            return RegionEnum.DENMARK;
        case LanguageEnum.CZECH:
            return RegionEnum.CZECH;
        case LanguageEnum.CHINESE:
            return e === LanguageVariantEnum.CHINESE_TRADITIONAL ? RegionEnum.HONGKONG : RegionEnum.CHINA;
        default:
            return RegionEnum.USA
        }
    }
    ,
    EALocaleFactory.prototype.getLanguageName = function(t, e, i) {
        switch (e) {
        case LanguageEnum.ENGLISH:
            return "English";
        case LanguageEnum.FRENCH:
            return "Français";
        case LanguageEnum.ITALIAN:
            return "Italiano";
        case LanguageEnum.GERMAN:
            return "Deutsch";
        case LanguageEnum.SPANISH:
            return t === RegionEnum.MEXICO ? "Español (América Latina)" : "Español";
        case LanguageEnum.DUTCH:
            return "Nederlands";
        case LanguageEnum.PORTUGUESE:
            return t === RegionEnum.PORTUGAL ? "Português" : "Português do Brasil";
        case LanguageEnum.POLISH:
            return "Polski";
        case LanguageEnum.ARABIC:
            return "العَرَبِيَّة";
        case LanguageEnum.RUSSIAN:
            return "Русский";
        case LanguageEnum.TURKISH:
            return "Türkçe";
        case LanguageEnum.JAPANESE:
            return "日本語";
        case LanguageEnum.KOREAN:
            return "한국어";
        case LanguageEnum.SWEDISH:
            return "Svenska";
        case LanguageEnum.NORWEGIAN_BOKMAL:
            return "Norsk";
        case LanguageEnum.DANISH:
            return "Dansk";
        case LanguageEnum.CZECH:
            return "Čeština";
        case LanguageEnum.CHINESE:
            return i === LanguageVariantEnum.CHINESE_TRADITIONAL ? "繁體中文" : "简体中文";
        default:
            return ""
        }
    }
    ,
    EALocaleFactory.prototype.getLanguageDirection = function(t) {
        switch (t) {
        case LanguageEnum.ARABIC:
            return LanguageDirectionEnum.RTL;
        default:
            return LanguageDirectionEnum.LTR
        }
    }
    ,
    EALocaleFactory.prototype.createLocale = function(t, e, i) {
        var r = this.stringToLanguage(t.toLowerCase())
          , n = this.stringToRegion(e.toUpperCase(), r)
          , o = i ? this.stringToLanguageVariant(i) : this.getVariantFromRegion(n);
        return new EALocaleVO(n,r,o,this.getLanguageName(n, r, o),this.getLanguageDirection(r))
    }
    ,
    EALocaleFactory.prototype.createLocaleFromLanguage = function(t, e) {
        var i = this.stringToLanguage(t.toLowerCase())
          , r = e || i !== LanguageEnum.CHINESE ? this.stringToLanguageVariant(e) : this.stringToLanguageVariant(LanguageVariantEnum.CHINESE_SIMPLIFIED)
          , n = this.getRegionFromLanguage(i, r);
        return new EALocaleVO(n,i,r,this.getLanguageName(n, i, r),this.getLanguageDirection(i))
    }
    ,
    EALocaleFactory
}(EAObject))
  , EALocalizationRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function EALocalizationRepository() {
        return t.call(this) || this
    }
    return __extends(EALocalizationRepository, t),
    EALocalizationRepository
}(EAHashTable))
  , EALocalizationService = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function EALocalizationService(t) {
        var e = i.call(this) || this;
        return e.configDAO = t,
        e.factory = new EALocaleFactory,
        e.locale = e.factory.createLocale(LanguageEnum.ENGLISH, RegionEnum.USA),
        e.localizationEnabled = !0,
        e.repository = new EALocalizationRepository,
        e.rtlLanguages = [LanguageEnum.ARABIC],
        e.storeLocRetrieved = !1,
        e.supportedLanguages = [LanguageEnum.ENGLISH, LanguageEnum.FRENCH, LanguageEnum.ITALIAN, LanguageEnum.GERMAN, LanguageEnum.SPANISH, LanguageEnum.DUTCH, LanguageEnum.PORTUGUESE, LanguageEnum.ARABIC, LanguageEnum.TURKISH, LanguageEnum.POLISH, LanguageEnum.RUSSIAN, LanguageEnum.JAPANESE, LanguageEnum.KOREAN, LanguageEnum.CHINESE, LanguageEnum.SWEDISH, LanguageEnum.NORWEGIAN_BOKMAL, LanguageEnum.DANISH, LanguageEnum.CZECH],
        e
    }
    return __extends(EALocalizationService, i),
    Object.defineProperty(EALocalizationService.prototype, "storeLocLoaded", {
        get: function() {
            return this.storeLocRetrieved
        },
        enumerable: !1,
        configurable: !0
    }),
    EALocalizationService.prototype.setLocale = function(t, e, i) {
        this.locale = this.factory.createLocale(t, e, i)
    }
    ,
    EALocalizationService.prototype.setLocaleFromLanguage = function(t, e) {
        this.locale = this.factory.createLocaleFromLanguage(t, e)
    }
    ,
    EALocalizationService.prototype.setLocaleFromString = function(t) {
        var e = 0 < t.indexOf("_") ? t.split("_") : t.split("-");
        2 < e.length ? this.setLocale(e[0], e[2], e[1]) : 2 === e.length ? this.setLocale(e[0], e[1]) : this.setLocaleFromLanguage(e[0])
    }
    ,
    EALocalizationService.prototype.getSupportedLocales = function() {
        return [this.factory.createLocale(LanguageEnum.ENGLISH, RegionEnum.USA), this.factory.createLocale(LanguageEnum.FRENCH, RegionEnum.FRANCE), this.factory.createLocale(LanguageEnum.ITALIAN, RegionEnum.ITALY), this.factory.createLocale(LanguageEnum.GERMAN, RegionEnum.GERMANY), this.factory.createLocale(LanguageEnum.SPANISH, RegionEnum.SPAIN), this.factory.createLocale(LanguageEnum.DUTCH, RegionEnum.NETHERLANDS), this.factory.createLocale(LanguageEnum.PORTUGUESE, RegionEnum.PORTUGAL), this.factory.createLocale(LanguageEnum.PORTUGUESE, RegionEnum.BRAZIL), this.factory.createLocale(LanguageEnum.POLISH, RegionEnum.POLAND), this.factory.createLocale(LanguageEnum.ARABIC, RegionEnum.SAUDI_ARABIA), this.factory.createLocale(LanguageEnum.RUSSIAN, RegionEnum.RUSSIA), this.factory.createLocale(LanguageEnum.TURKISH, RegionEnum.TURKEY), this.factory.createLocale(LanguageEnum.SPANISH, RegionEnum.MEXICO), this.factory.createLocale(LanguageEnum.JAPANESE, RegionEnum.JAPAN), this.factory.createLocale(LanguageEnum.KOREAN, RegionEnum.KOREA), this.factory.createLocale(LanguageEnum.CHINESE, RegionEnum.CHINA, LanguageVariantEnum.CHINESE_SIMPLIFIED), this.factory.createLocale(LanguageEnum.CHINESE, RegionEnum.HONGKONG, LanguageVariantEnum.CHINESE_TRADITIONAL), this.factory.createLocale(LanguageEnum.SWEDISH, RegionEnum.SWEDEN), this.factory.createLocale(LanguageEnum.NORWEGIAN_BOKMAL, RegionEnum.NORWAY), this.factory.createLocale(LanguageEnum.DANISH, RegionEnum.DENMARK), this.factory.createLocale(LanguageEnum.CZECH, RegionEnum.CZECH)]
    }
    ,
    EALocalizationService.prototype.isLanguageSupported = function(t) {
        return 0 <= this.supportedLanguages.indexOf(t.toLowerCase())
    }
    ,
    EALocalizationService.prototype.addLocalizationStrings = function(t) {
        for (var e in t)
            t.hasOwnProperty(e) && this.repository.set(e, t[e])
    }
    ,
    EALocalizationService.prototype.localize = function(t, e) {
        var i = this.repository.get(t);
        return i ? (Array.isArray(e) && 0 < e.length && e.forEach(function(t, e) {
            i = i && i.replace("%" + (e + 1).toString(), t)
        }),
        i) : "*" + t
    }
    ,
    EALocalizationService.prototype.localizeNumber = function(t) {
        return this.locale.language === LanguageEnum.ARABIC ? t.toLocaleString(LanguageEnum.ENGLISH + "-" + RegionEnum.USA) : this.locale.language === LanguageEnum.RUSSIAN && t < 1e4 ? t.toLocaleString(this.locale.toBCPString(), {
            useGrouping: !1
        }) : t.toLocaleString(this.locale.toBCPString())
    }
    ,
    EALocalizationService.prototype.localizeDate = function(t) {
        return this.localize("date.mmddyyyy", [TextUtils.formatToTwoDigits(t.getMonth() + 1), TextUtils.formatToTwoDigits(t.getDate()), t.getFullYear().toString()])
    }
    ,
    EALocalizationService.prototype.localizeEstablishedDate = function(t) {
        if (t.valueOf() < 12411612e5)
            return this.localize("controlbar.FUTFounder");
        var e = this.localize(MONTH_NAMES[t.getMonth()])
          , i = t.getFullYear().toString();
        return this.localize("controlbar.clubinfo.established", [this.localize("date.mmyy", [e, i])])
    }
    ,
    EALocalizationService.prototype.localizeTimeRemaining = function(t) {
        DebugUtils.Assert(0 <= t, "Expected argument to be a positive integer.");
        var e = Math.floor(t / SECONDS_PER_DAY)
          , i = Math.floor(t / SECONDS_PER_HOUR)
          , r = Math.floor(t / SECONDS_PER_MINUTE)
          , n = Math.floor(t - (e * SECONDS_PER_DAY + i * SECONDS_PER_HOUR + r * SECONDS_PER_MINUTE));
        return 0 < e ? (i = Math.floor((t - e * SECONDS_PER_DAY) / SECONDS_PER_HOUR),
        this.localize("timespan.dayshours", [this.localizeNumber(e), i.toString()])) : 0 < i ? (r = Math.floor((t - i * SECONDS_PER_HOUR) / SECONDS_PER_MINUTE),
        this.localize("timespan.hoursminutes", [i.toString(), r.toString()])) : 0 < r ? this.localize("timespan.minutesseconds", [r.toString(), n.toString()]) : 1 === n ? "1 " + this.localize("timespan.second") : this.localize("timespan.seconds", [n.toString()])
    }
    ,
    EALocalizationService.prototype.localizePromoTimeRemaining = function(t) {
        if (DebugUtils.Assert(0 <= t, "Expected argument to be a positive integer."),
        t < 0)
            return this.localize("timespan.listview.seconds");
        var e = Math.floor(t / SECONDS_PER_DAY)
          , i = Math.floor(t / SECONDS_PER_HOUR)
          , r = Math.floor(t / SECONDS_PER_MINUTE);
        return 0 < e ? (i = Math.floor((t - e * SECONDS_PER_DAY) / SECONDS_PER_HOUR),
        this.localize("timespan.dayshours", [e.toString(), i.toString()])) : 0 < i ? (r = Math.floor((t - i * SECONDS_PER_HOUR) / SECONDS_PER_MINUTE),
        this.localize("timespan.hoursminutes", [i.toString(), r.toString()])) : 0 < r ? 1 === r ? "1 " + this.localize("timespan.minute") : this.localize("timespan.minutes", [r.toString()]) : this.localize("timespan.listview.seconds")
    }
    ,
    EALocalizationService.prototype.localizeAuctionTimeRemaining = function(t) {
        DebugUtils.Assert(0 <= t, "Expected argument to be a positive integer.");
        var e = Math.floor(t / SECONDS_PER_DAY)
          , i = Math.floor(t / SECONDS_PER_HOUR)
          , r = Math.floor(t / SECONDS_PER_MINUTE);
        return t = Math.floor(t - (e * SECONDS_PER_DAY + i * SECONDS_PER_HOUR + r * SECONDS_PER_MINUTE)),
        0 < e ? 1 === e ? "1 " + this.localize("timespan.day") : this.localize("timespan.days", [e.toString()]) : 0 < i ? 1 === i ? "1 " + this.localize("timespan.hour") : this.localize("timespan.hours", [i.toString()]) : 0 < r ? 1 === r ? "1 " + this.localize("timespan.minute") : this.localize("timespan.minutes", [r.toString()]) : 30 < t ? this.localize("timespan.listview.seconds") : 15 < t ? this.localize("timespan.listview.underseconds", ["30"]) : 5 < t ? this.localize("timespan.listview.underseconds", ["15"]) : this.localize("timespan.listview.underseconds", ["5"])
    }
    ,
    EALocalizationService.prototype.addObfuscatedLocalizationStrings = function(t) {
        function n1(t) {
            return decodeURIComponent(atob(t).split("").map(function(t) {
                return "%" + ("00" + t.charCodeAt(0).toString(16)).slice(-2)
            }).join(""))
        }
        for (var e in t)
            t.hasOwnProperty(e) && this.repository.set(n1(e), n1(t[e]))
    }
    ,
    EALocalizationService.prototype.requestLocalization = function() {
        var i = this
          , r = new EAObservable
          , n = new UTServiceResponseDTO;
        return services.Module.set(3221229568),
        this.configDAO.getLocalization(this.locale).observe(this, function(t, e) {
            t.unobserve(i),
            n.success = e.success,
            n.status = e.status,
            n.error = e.error,
            e.success && e.response && !JSUtils.isString(e.response) && i.addLocalizationStrings(e.response),
            r.notify(n)
        }),
        r
    }
    ,
    EALocalizationService.prototype.requestStoreLocalization = function() {
        var i = this
          , r = new EAObservable
          , n = new UTServiceResponseDTO;
        return this.configDAO.getStoreLocalization().observe(this, function(t, e) {
            t.unobserve(i),
            n.success = e.success,
            n.status = e.status,
            n.error = e.error,
            e.success && e.response && !JSUtils.isString(e.response) && (function(t) {
                return DOMKit.HTMLCollectionToArray(t.getElementsByTagName("trans-unit")).reduce(function(t, e) {
                    var i = e.attributes.resname;
                    if (i && i.value) {
                        var r = e.getElementsByTagName("source")[0];
                        t.push({
                            key: i.value,
                            value: r.textContent || ""
                        })
                    }
                    return t
                }, [])
            }(e.response).forEach(function(t) {
                i.repository.set(t.key, t.value)
            }),
            i.storeLocRetrieved = !0);
            r.notify(n)
        }),
        r
    }
    ,
    EALocalizationService
}(EAObject))
  , UTNimbleMTXItemRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTNimbleMTXItemRepository(t) {
        var e = i.call(this) || this;
        return e.catalogItems = new EAHashTable,
        t && e.add(t),
        e
    }
    return __extends(UTNimbleMTXItemRepository, i),
    UTNimbleMTXItemRepository.prototype.reset = function() {
        this.catalogItems.clear()
    }
    ,
    UTNimbleMTXItemRepository.prototype.add = function(t) {
        var e = this;
        Array.isArray(t) ? t.forEach(function(t) {
            return e.catalogItems.set(t.sku, t)
        }) : this.catalogItems.set(t.sku, t)
    }
    ,
    UTNimbleMTXItemRepository.prototype.get = function(t) {
        return this.catalogItems.get(t)
    }
    ,
    UTNimbleMTXItemRepository.prototype.values = function() {
        return this.catalogItems.values()
    }
    ,
    UTNimbleMTXItemRepository.prototype.isEmpty = function() {
        return this.catalogItems.length < 1
    }
    ,
    UTNimbleMTXItemRepository
}(EAObject))
  , UTMTXService = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTMTXService(t) {
        var e = i.call(this) || this;
        return e.transactions = new EAHashTable,
        e.nimbleMTXDisableFlag = !1,
        e.mtxRepository = new UTNimbleMTXItemRepository,
        e.configService = t,
        e
    }
    return __extends(UTMTXService, i),
    UTMTXService.prototype.reset = function() {
        this.transactions.clear(),
        this.nimbleMTXDisableFlag = !1,
        this.mtxRepository.reset()
    }
    ,
    UTMTXService.prototype.hasUnverifiedTransactions = function() {
        return 0 < this.transactions.length
    }
    ,
    UTMTXService.prototype.isNimbleMTXEnabled = function() {
        return !this.nimbleMTXDisableFlag
    }
    ,
    UTMTXService.prototype.isMobileMTXEnabled = function() {
        return this.configService.checkFeatureEnabled(UTServerSettingsRepository.KEY.COMMERCE_ENABLED)
    }
    ,
    UTMTXService.prototype.setMobileMTXEnabled = function(t) {
        this.configService.setFeatureEnabled(UTServerSettingsRepository.KEY.COMMERCE_ENABLED, t)
    }
    ,
    UTMTXService.prototype.isMTXEnabled = function() {
        return this.configService.checkFeatureEnabled(UTServerSettingsRepository.KEY.MTX_ENABLED)
    }
    ,
    UTMTXService.prototype.setMTXEnabled = function(t) {
        this.configService.setFeatureEnabled(UTServerSettingsRepository.KEY.MTX_ENABLED, t)
    }
    ,
    UTMTXService.prototype.isEntitlementRecoveryEnabled = function() {
        return this.configService.checkFeatureEnabled(UTServerSettingsRepository.KEY.COMMERCE_RECOVERY_ENABLED)
    }
    ,
    UTMTXService.prototype.getEntitlementRecoveryDelay = function() {
        return this.configService.getFeatureSetting(UTServerSettingsRepository.KEY.COMMERCE_RECOVERY_DELAY) * MS_PER_SECOND
    }
    ,
    UTMTXService.prototype.disableNimbleMTX = function() {
        this.nimbleMTXDisableFlag = !0
    }
    ,
    UTMTXService.prototype.storeNimbleMTXItems = function(t) {
        this.mtxRepository.reset(),
        this.mtxRepository.add(t)
    }
    ,
    UTMTXService.prototype.getNimbleMTXItems = function() {
        return this.mtxRepository.values()
    }
    ,
    UTMTXService.prototype.hasNimbleMTXItems = function() {
        return !this.mtxRepository.isEmpty()
    }
    ,
    UTMTXService.prototype.beginTransaction = function(t) {
        var e = new EAObservable
          , i = new UTServiceResponseDTO;
        return window.plugins.cordovaNimble.startMTXPurchase(t, function() {
            i.success = !0,
            e.notify(i)
        }, function() {
            e.notify(i)
        }),
        e
    }
    ,
    UTMTXService.prototype.verifyTransaction = function(r) {
        var n = this
          , o = new EAObservable
          , s = new UTServiceResponseDTO;
        return s.data = {
            verified: !1
        },
        this.transactions.set(r.id, r),
        this.isMobileMTXEnabled() ? accessobjects.FirstPartyStore.verifyAndRecordPurchase(r).observe(this, function(t, e) {
            var i;
            t.unobserve(n),
            s.success = e.success,
            s.status = e.status,
            s.data = {
                verified: e.success || e.status === HttpStatusCode.CONFLICT
            },
            s.error = e.error,
            (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && n.setMobileMTXEnabled(!1),
            s.data.verified && n.transactions.remove(r.id),
            o.notify(s)
        }) : (s.status = UtasErrorCode.SERVICE_IS_DISABLED,
        o.notify(s)),
        o
    }
    ,
    UTMTXService.prototype.verifyStoredTransactions = function() {
        var t = new EAObservable
          , e = new UTServiceResponseDTO;
        if (!this.hasUnverifiedTransactions())
            return DebugUtils.Assert(!1, "No transactions to verify."),
            t.notify(e),
            t;
        var i = this.transactions.values()[0];
        return this.verifyTransaction(i)
    }
    ,
    UTMTXService.prototype.consumeEntitlements = function(t, e) {
        var r = this
          , n = new EAObservable
          , o = new UTServiceResponseDTO;
        return accessobjects.FirstPartyStore.consumeEntitlements(t, e).observe(this, function(t, e) {
            var i;
            t.unobserve(r),
            o.success = e.success,
            o.status = e.status,
            o.data = JSUtils.isObject(e.response) ? e.response : {
                entitlementAwarded: !1
            },
            o.error = e.error,
            (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && (isWeb() ? r.setMTXEnabled(!1) : r.setMobileMTXEnabled(!1)),
            n.notify(o)
        }),
        n
    }
    ,
    UTMTXService
}(EAObject))
  , UINotificationDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UINotificationDTO(t, e) {
        var i = r.call(this) || this;
        return i.message = t,
        i.type = e,
        i
    }
    return __extends(UINotificationDTO, r),
    UINotificationDTO
}(EAObject));
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
NamespaceManager.Register("services");
var EANotificationService = function(e) {
    function EANotificationService() {
        var t = e.call(this) || this;
        return t.display = new EAObservable,
        t.notificationTimer = 0,
        t.notificationQueue = [],
        t
    }
    return __extends(EANotificationService, e),
    EANotificationService.prototype.clearAll = function() {
        window.clearInterval(this.notificationTimer),
        this.notificationTimer = 0,
        this.notificationQueue.length = 0
    }
    ,
    EANotificationService.prototype.queue = function() {
        for (var i = this, t = [], e = 0; e < arguments.length; e++)
            t[e] = arguments[e];
        t.forEach(function(t) {
            if (Array.isArray(t)) {
                var e = new UINotificationDTO(t[0],t[1]);
                i.notificationQueue.push(e)
            } else
                t instanceof UINotificationDTO && i.notificationQueue.push(t)
        }),
        this.notificationTimer <= 0 && this.pushNotification()
    }
    ,
    EANotificationService.prototype.pushNotification = function() {
        var t = this;
        if (0 < this.notificationQueue.length) {
            this.notificationTimer <= 0 && (this.notificationTimer = window.setInterval(function() {
                return t.pushNotification()
            }, 2 * MS_PER_SECOND));
            var e = this.notificationQueue.shift();
            this.display.notify(e)
        } else
            0 === this.notificationQueue.length && (window.clearInterval(this.notificationTimer),
            this.notificationTimer = 0)
    }
    ,
    EANotificationService
}(EAObject);
services.Notification = new EANotificationService;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTOnboardingService = function(t) {
    function UTOnboardingService() {
        return t.call(this) || this
    }
    return __extends(UTOnboardingService, t),
    UTOnboardingService.prototype.getCountries = function() {
        var t = new EAObservable
          , e = new UTServiceResponseDTO;
        return e.success = !0,
        e.status = HttpStatusCode.OK,
        e.data = {
            countries: [Country.ENGLAND, Country.BRAZIL, Country.FRANCE, Country.ARGENTINA, Country.GERMANY, Country.ITALY, Country.SPAIN, Country.PORTUGAL, Country.NETHERLANDS]
        },
        t.notify(e),
        t
    }
    ,
    UTOnboardingService.prototype.selectCountry = function(t) {
        var i = this
          , r = new EAObservable
          , n = new UTServiceResponseDTO
          , e = FUTDataUtils.mapNationIdToOnboardingCountryId(t);
        return 0 === e ? (DebugUtils.Assert(!1, "Encountered an unsupported nation ID."),
        n.success = !1,
        n.status = HttpStatusCode.BAD_REQUEST,
        r.notify(n)) : accessobjects.Onboarding.selectCountry(e).observe(this, function(t, e) {
            t.unobserve(i),
            n.success = e.success,
            n.status = e.status,
            n.error = e.error,
            JSUtils.isObject(e.response) && (n.data = {
                countryId: e.response.countryId
            }),
            r.notify(n)
        }),
        r
    }
    ,
    UTOnboardingService.prototype.getBadges = function() {
        var n = this
          , o = new EAObservable;
        return accessobjects.Onboarding.getBadges().observe(this, function(t, e) {
            t.unobserve(n);
            var i = new UTServiceResponseDTO
              , r = JSUtils.isObject(e.response) ? e.response.badges : [];
            i.success = e.success,
            i.status = e.status,
            i.data = {
                badges: r
            },
            i.error = e.error,
            o.notify(i)
        }),
        o
    }
    ,
    UTOnboardingService.prototype.selectBadge = function(i) {
        var r = this
          , n = new EAObservable
          , o = new UTServiceResponseDTO;
        return i.isBadge() ? accessobjects.Onboarding.selectBadge(i.definitionId).observe(this, function(t, e) {
            t.unobserve(r),
            e.success && (i.state = ItemState.ACTIVE_BADGE,
            i.pile = ItemPile.CLUB,
            repositories.Item.add(i)),
            o.success = e.success,
            o.status = e.status,
            o.error = e.error,
            JSUtils.isObject(e.response) && (o.data = {
                badgeId: e.response.badgeId
            }),
            n.notify(o)
        }) : (DebugUtils.Assert(!1, "Expected a badge item when selecting a badge."),
        o.success = !1,
        o.status = HttpStatusCode.BAD_REQUEST,
        n.notify(o)),
        n
    }
    ,
    UTOnboardingService.prototype.getKits = function() {
        var r = this
          , n = new EAObservable;
        return accessobjects.Onboarding.getKits().observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTServiceResponseDTO;
            i.success = e.success,
            i.status = e.status,
            i.error = e.error,
            JSUtils.isObject(e.response) && (i.data = {
                homeKits: e.response.homeKits || [],
                awayKits: e.response.awayKits || []
            }),
            n.notify(i)
        }),
        n
    }
    ,
    UTOnboardingService.prototype.selectKits = function(i, r) {
        var n = this
          , o = new EAObservable
          , s = new UTServiceResponseDTO;
        return i.isKit() && r.isKit() ? accessobjects.Onboarding.selectKits(i.definitionId, r.definitionId).observe(this, function(t, e) {
            t.unobserve(n),
            e.success && (i.state = ItemState.ACTIVE_HOME_KIT,
            i.pile = ItemPile.CLUB,
            r.state = ItemState.ACTIVE_AWAY_KIT,
            r.pile = ItemPile.CLUB,
            repositories.Item.add([i, r])),
            s.success = e.success,
            s.status = e.status,
            s.error = e.error,
            JSUtils.isObject(e.response) && (s.data = {
                awayKitId: e.response.awayKitId,
                homeKitId: e.response.homeKitId
            }),
            o.notify(s)
        }) : (DebugUtils.Assert(i.isKit(), "Expected a kit item when selecting a home kit."),
        DebugUtils.Assert(r.isKit(), "Expected a kit item when selecting an away kit."),
        s.success = !1,
        s.status = HttpStatusCode.BAD_REQUEST,
        o.notify(s)),
        o
    }
    ,
    UTOnboardingService.prototype.getLoanPlayers = function() {
        var r = this
          , n = new EAObservable
          , o = new UTServiceResponseDTO;
        return accessobjects.Onboarding.getLoanPlayers().observe(this, function(t, e) {
            t.unobserve(r);
            var i = JSUtils.isObject(e.response) ? e.response.items : [];
            o.success = e.success,
            o.status = e.status,
            o.data = {
                items: i
            },
            o.error = e.error,
            n.notify(o)
        }),
        n
    }
    ,
    UTOnboardingService.prototype.grantLoanPlayer = function(t) {
        var r = this
          , n = new EAObservable
          , o = new UTServiceResponseDTO;
        return t.isLoaned() ? accessobjects.Onboarding.grantLoanPlayer(t.definitionId).observe(this, function(t, e) {
            t.unobserve(r);
            var i = JSUtils.isObject(e.response) ? e.response.item : null;
            o.data = {
                item: i
            },
            o.success = e.success,
            o.status = e.status,
            o.error = e.error,
            n.notify(o)
        }) : (o.success = !1,
        o.status = HttpStatusCode.BAD_REQUEST,
        n.notify(o)),
        n
    }
    ,
    UTOnboardingService.prototype.createClub = function() {
        function y4(t, e) {
            t.unobserve(s),
            l.success = e.success,
            l.status = e.status,
            e.success && (l.data = e.data),
            a.notify(l)
        }
        var s = this
          , a = new EAObservable
          , l = new UTServiceResponseDTO;
        return accessobjects.Onboarding.getHistorical().observe(this, function(t, e) {
            var i, r;
            if (t.unobserve(s),
            e.success && JSUtils.isObject(e.response)) {
                var n = e.response
                  , o = null === (r = null === (i = services.Authentication.getUtasSession()) || void 0 === i ? void 0 : i.user) || void 0 === r ? void 0 : r.getSelectedPersona();
                o ? (o.setLoyaltyRewards(n.rewards),
                o.createClub(n.name, n.abbr).observe(s, y4)) : (l.success = !1,
                l.status = HttpStatusCode.BAD_REQUEST,
                a.notify(l))
            } else
                l.success = e.success,
                l.status = e.status,
                a.notify(l)
        }),
        a
    }
    ,
    UTOnboardingService
}(EAObject);
services.Onboarding = new UTOnboardingService;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
NamespaceManager.Register("services");
var EAURLService = function(e) {
    function EAURLService() {
        var t = e.call(this) || this;
        return t.deeplinks = new EAHashTable,
        t.deepLinkURL = "",
        t
    }
    return __extends(EAURLService, e),
    EAURLService.prototype.registerDeepLinkID = function(t, e) {
        this.deeplinks.set(t, e)
    }
    ,
    EAURLService.prototype.findValidDeepLinkID = function(t) {
        var e = this
          , i = JSUtils.find(t, function(t) {
            return e.isValidDeepLinkID(t)
        });
        return null != i ? i : DeepLinkSection.NONE
    }
    ,
    EAURLService.prototype.setDeepLinkURL = function(t, e) {
        if (!JSUtils.isEmpty(t)) {
            var i = decodeURIComponent(t).trim();
            0 !== i.indexOf(EAURLService.DEEP_LINK_PROTOCOL) && (i = EAURLService.DEEP_LINK_PROTOCOL + EAURLService.DEEP_LINK_FEATURE_FUT + "/" + t,
            e && (i += "/" + e)),
            this.deepLinkURL = i
        }
    }
    ,
    EAURLService.prototype.getDeepLinkURL = function() {
        return this.deepLinkURL
    }
    ,
    EAURLService.prototype.clearDeepLinkURL = function() {
        this.deepLinkURL = ""
    }
    ,
    EAURLService.prototype.hasDeepLinkURL = function() {
        return !JSUtils.isEmpty(this.deepLinkURL)
    }
    ,
    EAURLService.prototype.processDeepLinkURL = function() {
        if (!this.hasDeepLinkURL())
            return !1;
        var t = this.process(this.getDeepLinkURL());
        return t && this.clearDeepLinkURL(),
        t
    }
    ,
    EAURLService.prototype.process = function(t) {
        var e;
        if (0 === (t = decodeURIComponent(t).trim()).indexOf(EAURLService.DEEP_LINK_PROTOCOL)) {
            if (!this.checkAuth())
                return !1;
            var i = t.substr(EAURLService.DEEP_LINK_PROTOCOL.length).split("/").filter(function(t) {
                return 0 < t.length
            })
              , r = i.shift()
              , n = null !== (e = i.shift()) && void 0 !== e ? e : "";
            if (r !== EAURLService.DEEP_LINK_FEATURE_FUT || !this.isValidDeepLinkID(n))
                return DebugUtils.Assert(!1, "[services.URL::process] Unable to process unknown deep link: " + t),
                !1;
            var o = this.deeplinks.get(n);
            o && o(i)
        } else {
            if (!(0 === t.indexOf(EAURLService.SECURE_LINK_PROTOCOL) || 0 === t.indexOf(EAURLService.INSECURE_LINK_PROTOCOL) || isAndroid() && t.indexOf(EAURLService.GOOGLE_PLAY_PROTOCOL) || isIOS() && t.indexOf(EAURLService.APPLE_STORE_PROTOCOL)))
                return DebugUtils.Assert(!1, "Unable to process unknown or unsupported URL structure: " + t),
                !1;
            isAndroid() || isIOS() ? cordova.InAppBrowser.open(t, "_system") : window.open(t, "_system")
        }
        return !0
    }
    ,
    EAURLService.prototype.isValidDeepLinkID = function(t) {
        return this.deeplinks.has(t)
    }
    ,
    EAURLService.prototype.checkAuth = function() {
        var t = services.Authentication.getUtasSession()
          , e = t.user
          , i = null == e ? void 0 : e.getSelectedPersona();
        return t.isAuthenticated() ? e ? i && i.hasFUT ? !i.isNewTrial || (getAppMain().getRootViewController().showGettingStartedView(GettingStartedTypes.FIFA),
        !1) : (getAppMain().getRootViewController().showGettingStartedView(GettingStartedTypes.FUT),
        !1) : (getAppMain().getRootViewController().showGettingStartedView(GettingStartedTypes.FIFA),
        !1) : (t.state === AuthenticationState.UNAUTHENTICATED && t.statusCode === UtasErrorCode.LOGGED_IN_ON_CONSOLE && getAppMain().getRootViewController().showLoggedOnConsoleView(),
        !1)
    }
    ,
    EAURLService.SECURE_LINK_PROTOCOL = "https://",
    EAURLService.INSECURE_LINK_PROTOCOL = "http://",
    EAURLService.GOOGLE_PLAY_PROTOCOL = "market://",
    EAURLService.APPLE_STORE_PROTOCOL = "itms-apps://",
    EAURLService.DEEP_LINK_PROTOCOL = "easfc://",
    EAURLService.DEEP_LINK_FEATURE_FUT = "fut",
    EAURLService
}(EAObject);
services.URL = new EAURLService;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTChampionsService = function(r) {
    function UTChampionsService(t, e) {
        var i = r.call(this) || this;
        return i.championsDao = t,
        i.configService = e,
        i.events = new EAHashTable,
        i
    }
    return __extends(UTChampionsService, r),
    UTChampionsService.prototype.reset = function() {
        this.events.clear()
    }
    ,
    UTChampionsService.prototype.requestChampsHub = function() {
        var r = this
          , n = new EAObservable
          , o = new UTServiceResponseDTO;
        return this.configService.checkFeatureEnabled(UTServerSettingsRepository.KEY.CHAMPIONS_ENABLED) ? this.championsDao.getChampsHub().observe(this, function(t, e) {
            var i;
            t.unobserve(r),
            o.success = e.success,
            o.status = e.status,
            o.error = e.error,
            o.success && JSUtils.isObject(e.response) ? o.data = e.response : o.data = null,
            (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && r.configService.setFeatureEnabled(UTServerSettingsRepository.KEY.CHAMPIONS_ENABLED, !1),
            n.notify(o)
        }) : (o.status = UtasErrorCode.SERVICE_IS_DISABLED,
        o.data = {
            event: null
        },
        n.notify(o)),
        n
    }
    ,
    UTChampionsService.prototype.checkOutstandingRewards = function() {
        return this.championsDao.checkOutstandingRewards()
    }
    ,
    UTChampionsService.prototype.claimRewards = function() {
        return this.championsDao.claimRewards()
    }
    ,
    UTChampionsService
}(EAObject)
  , UTClubService = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTClubService(t) {
        var e = i.call(this) || this;
        return e.clubDao = t,
        e
    }
    return __extends(UTClubService, i),
    UTClubService.prototype.init = function() {
        i.prototype.init.call(this),
        getDefaultDispatcher().addObserver(AppNotification.ITEM_MOVE, this, this.onItemMoved)
    }
    ,
    UTClubService.prototype.dealloc = function() {
        i.prototype.dealloc.call(this),
        getDefaultDispatcher().removeObserver(AppNotification.ITEM_MOVE, this)
    }
    ,
    UTClubService.prototype.getStats = function() {
        return this.clubDao.getStats()
    }
    ,
    UTClubService.prototype.getContractBonus = function() {
        return this.clubDao.getContractBonus()
    }
    ,
    UTClubService.prototype.search = function(t) {
        return t.type === SearchType.CONSUMABLES_DEVELOPMENT || t.type === SearchType.CONSUMABLES_TRAINING ? this.clubDao.getConsumableItems(t) : this.clubDao.getClubItems(t)
    }
    ,
    UTClubService.prototype.onItemMoved = function(t, e, i) {
        i.sourcePile !== ItemPile.CLUB && i.destinationPile !== ItemPile.CLUB || (this.clubDao.resetStatsCache(),
        i.itemIds.find(function(t) {
            return repositories.Item.getClub().getItem(ItemType.MANAGER, ItemSubType.MANAGER, t)
        }) && this.clubDao.resetManagerBonusCache())
    }
    ,
    UTClubService
}(EAObject))
  , UTLeaderboardOptionDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTLeaderboardOptionDTO(t) {
        var e = i.call(this) || this;
        return e.display = t.display,
        e.groupId = "",
        e.id = t.id,
        e
    }
    return __extends(UTLeaderboardOptionDTO, i),
    UTLeaderboardOptionDTO
}(EAObject))
  , UTLeaderboardEntryDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTLeaderboardEntryDTO(t) {
        var e = i.call(this) || this;
        return e.badge = t.badge,
        e.category = "",
        e.clubName = t.clubName,
        e.est = t.est,
        e.persona = t.persona,
        e.platform = FUTDataUtils.mapSkuToPlatform(t.sku ? t.sku : GameSku.UNKNOWN),
        e.rank = t.rank,
        e.score = t.score.value,
        e.teamId = t.teamId,
        e.view = "",
        e
    }
    return __extends(UTLeaderboardEntryDTO, i),
    UTLeaderboardEntryDTO
}(EAObject))
  , UTLeaderboardPermutationDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTLeaderboardPermutationDTO() {
        var t = e.call(this) || this;
        return t.category = "competitor",
        t.period = "alltime",
        t.view = "top100",
        t.platform = "local",
        t
    }
    return __extends(UTLeaderboardPermutationDTO, e),
    UTLeaderboardPermutationDTO
}(EAObject))
  , UTLeaderboardsDAO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTLeaderboardsDAO(t, e) {
        var i = r.call(this) || this;
        return i.authDelegate = t,
        i.leaderboardEntries = new UTLeaderboardEntryRepository,
        i.requestDelegate = e,
        i
    }
    return __extends(UTLeaderboardsDAO, r),
    UTLeaderboardsDAO.prototype.getOptions = function() {
        var o = this
          , s = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/leaderboards/options"),
        this.requestDelegate.send(t).observe(this, function(t, e) {
            t.unobserve(o);
            var i = new UTHttpResponseDTO
              , r = new UTLeaderboardPermutationDTO
              , n = [];
            JSUtils.assignPropertyValues(e, i),
            e.success && JSUtils.isObject(e.response) && (e.response.selection && (r.category = e.response.selection.category,
            r.period = e.response.selection.period,
            r.view = e.response.selection.view),
            0 < e.response.options.length && (n = e.response.options.map(function(i) {
                var r = [];
                return i[i.id].forEach(function(t) {
                    var e = new UTLeaderboardOptionDTO(t);
                    e.groupId = i.id,
                    r.push(e)
                }),
                r
            }))),
            i.response = {
                options: JSUtils.flattenArray(n),
                selection: r
            },
            s.notify(i)
        }),
        s
    }
    ,
    UTLeaderboardsDAO.prototype.getLeaderboardByPermutation = function(r) {
        var n = this
          , o = new EAObservable
          , s = new UTHttpResponseDTO;
        if (!this.leaderboardEntries.isEmpty(r) && !this.leaderboardEntries.isCacheExpired(r))
            return s.success = !0,
            s.status = HttpStatusCode.NOT_MODIFIED,
            s.response = {
                entries: this.leaderboardEntries.getEntriesByPermutation(r)
            },
            o.notify(s),
            o;
        var t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/leaderboards/period/" + r.period + "/category/" + r.category + "/view/" + r.view),
        t.setUrlVariables({
            platform: r.platform
        }),
        this.requestDelegate.send(t).observe(this, function(t, e) {
            t.unobserve(n);
            var i = [];
            JSUtils.assignPropertyValues(e, s),
            e.success && JSUtils.isObject(e.response) && Array.isArray(e.response.entries) && 0 < e.response.entries.length && (i = e.response.entries.map(function(t) {
                var e = new UTLeaderboardEntryDTO(t);
                return e.category = r.category,
                e.view = r.view,
                e
            }).sort(function(t, e) {
                return JSUtils.sortCompare(t.rank, e.rank)
            }),
            n.leaderboardEntries.setEntriesByPermutation(r, i),
            n.leaderboardEntries.setCacheTimestamp(r, Date.now())),
            s.response = {
                entries: i
            },
            o.notify(s)
        }),
        o
    }
    ,
    UTLeaderboardsDAO
}(EAObject))
  , UTLeaderboardEntryRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTLeaderboardEntryRepository() {
        var t = e.call(this) || this;
        return t.expiryTimestamps = new EAHashTable,
        t
    }
    return __extends(UTLeaderboardEntryRepository, e),
    UTLeaderboardEntryRepository.prototype.generateUniqueIdFromPermutation = function(t) {
        return t.category + ":" + t.view + ":" + t.period + ":" + t.platform
    }
    ,
    UTLeaderboardEntryRepository.prototype.reset = function() {
        this.clear(),
        this.expiryTimestamps.clear()
    }
    ,
    UTLeaderboardEntryRepository.prototype.setEntriesByPermutation = function(t, e) {
        this.set(this.generateUniqueIdFromPermutation(t), e)
    }
    ,
    UTLeaderboardEntryRepository.prototype.getEntriesByPermutation = function(t) {
        var e = this.get(this.generateUniqueIdFromPermutation(t));
        return Array.isArray(e) ? e : []
    }
    ,
    UTLeaderboardEntryRepository.prototype.isEmpty = function(t) {
        if (t) {
            var e = this.get(this.generateUniqueIdFromPermutation(t));
            return !Array.isArray(e) || e.length < 1
        }
        return this.values().length < 1
    }
    ,
    UTLeaderboardEntryRepository.prototype.isCacheExpired = function(t) {
        var e = this.expiryTimestamps.get(this.generateUniqueIdFromPermutation(t));
        return !e || e < Date.now()
    }
    ,
    UTLeaderboardEntryRepository.prototype.setCacheTimestamp = function(t, e, i) {
        this.expiryTimestamps.set(this.generateUniqueIdFromPermutation(t), e + (JSUtils.isNumber(i) ? i * MS_PER_SECOND : 3e5))
    }
    ,
    UTLeaderboardEntryRepository
}(EAHashTable))
  , UTLeaderboardsService = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTLeaderboardsService(t) {
        var e = i.call(this) || this;
        return e.leaderboardsDao = t,
        e
    }
    return __extends(UTLeaderboardsService, i),
    UTLeaderboardsService.prototype.requestOptions = function() {
        return this.leaderboardsDao.getOptions()
    }
    ,
    UTLeaderboardsService.prototype.requestLeaderboardByPermutation = function(t) {
        return this.leaderboardsDao.getLeaderboardByPermutation(t)
    }
    ,
    UTLeaderboardsService
}(EAObject))
  , UTLtpEventService = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTLtpEventService(t) {
        var e = i.call(this) || this;
        return e.ltpEventDao = t,
        e
    }
    return __extends(UTLtpEventService, i),
    UTLtpEventService.prototype.getCurrentEvent = function() {
        return this.ltpEventDao.getCurrentEvent()
    }
    ,
    UTLtpEventService.prototype.claimLtpEventRewards = function() {
        var n = this
          , o = new EAObservable
          , s = new UTServiceResponseDTO;
        return this.ltpEventDao.claimLtpEventRewards().observe(this, function(t, e) {
            t.unobserve(n);
            var i = []
              , r = 0;
            e.success && e.response && !JSUtils.isString(e.response) && (i = e.response.rewards,
            r = e.response.lastTierAchieved),
            s.success = e.success,
            s.status = e.status,
            s.error = e.error,
            s.success && JSUtils.isObject(e.response) ? s.data = {
                rewards: i,
                lastTierAchieved: r
            } : s.data = null,
            o.notify(s)
        }),
        o
    }
    ,
    UTLtpEventService
}(EAObject))
  , UTMessagesRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTMessagesRepository() {
        var t = e.call(this) || this;
        return t.cacheExpiration = {
            dailyGift: 0,
            hubMessages: 0,
            liveMessages: 0,
            storeMessages: 0
        },
        t.dailyGift = null,
        t.hubMessages = [],
        t
    }
    return __extends(UTMessagesRepository, e),
    UTMessagesRepository.prototype.reset = function() {
        this.resetDailyGift(),
        this.cacheExpiration.dailyGift = 0,
        this.cacheExpiration.liveMessages = 0,
        this.cacheExpiration.hubMessages = 0,
        this.cacheExpiration.storeMessages = 0,
        this.hubMessages = [],
        this.storeMessages = []
    }
    ,
    UTMessagesRepository.prototype.getDailyGift = function() {
        return this.dailyGift
    }
    ,
    UTMessagesRepository.prototype.setDailyGift = function(t) {
        this.dailyGift = t
    }
    ,
    UTMessagesRepository.prototype.getHubMessages = function() {
        return this.hubMessages
    }
    ,
    UTMessagesRepository.prototype.setHubMessages = function(t) {
        this.hubMessages = t.slice()
    }
    ,
    UTMessagesRepository.prototype.getStoreMessages = function() {
        return this.storeMessages
    }
    ,
    UTMessagesRepository.prototype.setStoreMessages = function(t) {
        this.storeMessages = t.slice()
    }
    ,
    UTMessagesRepository.prototype.resetDailyGift = function() {
        this.dailyGift = null
    }
    ,
    UTMessagesRepository.prototype.isDailyGiftExpired = function() {
        return this.cacheExpiration.dailyGift < Date.now()
    }
    ,
    UTMessagesRepository.prototype.isLiveMessagesExpired = function() {
        return this.cacheExpiration.liveMessages < Date.now()
    }
    ,
    UTMessagesRepository.prototype.isHubMessagesExpired = function() {
        return this.cacheExpiration.hubMessages < Date.now()
    }
    ,
    UTMessagesRepository.prototype.isStoreMessagesExpired = function() {
        return this.cacheExpiration.storeMessages < Date.now()
    }
    ,
    UTMessagesRepository.prototype.setHubMessagesCacheExpiration = function(t) {
        this.cacheExpiration.hubMessages = t
    }
    ,
    UTMessagesRepository.prototype.setStoreMessagesCacheExpiration = function(t) {
        this.cacheExpiration.storeMessages = t
    }
    ,
    UTMessagesRepository.prototype.setLiveMessagesCacheExpiration = function(t) {
        this.cacheExpiration.liveMessages = t
    }
    ,
    UTMessagesRepository.prototype.setDailyGiftCacheExpiration = function(t) {
        this.cacheExpiration.dailyGift = t
    }
    ,
    UTMessagesRepository
}(EAObject))
  , UTMessagesService = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTMessagesService(t) {
        var e = i.call(this) || this;
        return e.messagesRepository = new UTMessagesRepository,
        e.messagesDAO = t,
        e
    }
    return __extends(UTMessagesService, i),
    UTMessagesService.prototype.reset = function() {
        this.messagesRepository.reset()
    }
    ,
    UTMessagesService.prototype.setDailyGiftFromPayload = function(t) {
        this.messagesRepository.setDailyGift(new UTDailyGiftEntity(t)),
        this.messagesRepository.setDailyGiftCacheExpiration(Date.now() + 36e5)
    }
    ,
    UTMessagesService.prototype.getLiveMessages = function() {
        var n = this
          , o = new EAObservable
          , s = new UTServiceResponseDTO;
        return s.data = {
            messages: [],
            promoCoins: !1,
            promoItems: !1
        },
        services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.LIVE_MESSAGING_ENABLED) ? this.messagesRepository.isLiveMessagesExpired() ? this.messagesDAO.getLiveMessages().observe(this, function(t, e) {
            var i;
            if (t.unobserve(n),
            s.success = e.success,
            s.status = e.status,
            s.error = e.error,
            e.success && JSUtils.isObject(e.response) && e.response.promos) {
                var r = e.response.promos;
                s.data = {
                    promoCoins: -1 !== r.indexOf(RewardType.COIN),
                    promoItems: -1 !== r.indexOf(RewardType.ITEM),
                    messages: e.response.messages
                },
                n.messagesRepository.setLiveMessagesCacheExpiration(Date.now() + 3e5)
            } else
                (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && services.Configuration.setFeatureEnabled(UTServerSettingsRepository.KEY.LIVE_MESSAGING_ENABLED, !1);
            o.notify(s)
        }) : (s.success = !0,
        s.status = HttpStatusCode.NOT_MODIFIED,
        o.notify(s)) : (s.status = UtasErrorCode.SERVICE_IS_DISABLED,
        o.notify(s)),
        o
    }
    ,
    UTMessagesService.prototype.readLiveMessage = function(t) {
        var r = this
          , n = new EAObservable
          , o = new UTServiceResponseDTO;
        return services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.LIVE_MESSAGING_ENABLED) ? this.messagesDAO.readLiveMessage(t).observe(this, function(t, e) {
            var i;
            t.unobserve(r),
            o.success = e.success,
            o.status = e.status,
            o.error = e.error,
            (null === (i = o.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && services.Configuration.setFeatureEnabled(UTServerSettingsRepository.KEY.LIVE_MESSAGING_ENABLED, !1),
            n.notify(o)
        }) : (o.status = UtasErrorCode.SERVICE_IS_DISABLED,
        n.notify(o)),
        n
    }
    ,
    UTMessagesService.prototype.getHubMessages = function(t) {
        var i = this
          , r = new EAObservable
          , n = new UTServiceResponseDTO;
        return this.messagesRepository.isHubMessagesExpired() ? this.messagesDAO.getHubMessages(t).observe(this, function(t, e) {
            t.unobserve(i),
            n.success = e.success,
            n.status = e.status,
            n.error = e.error,
            e.success && JSUtils.isObject(e.response) && e.response.messages && (n.data = {
                messages: e.response.messages
            },
            i.messagesRepository.setHubMessages(e.response.messages),
            i.messagesRepository.setHubMessagesCacheExpiration(Date.now() + 3e5)),
            r.notify(n)
        }) : (n.success = !0,
        n.status = HttpStatusCode.NOT_MODIFIED,
        n.data = {
            messages: this.messagesRepository.getHubMessages()
        },
        r.notify(n)),
        r
    }
    ,
    UTMessagesService.prototype.getStoreMessages = function() {
        var i = this
          , r = new EAObservable
          , n = new UTServiceResponseDTO;
        return this.messagesRepository.isStoreMessagesExpired() ? this.messagesDAO.getStoreMessages().observe(this, function(t, e) {
            t.unobserve(i),
            n.success = e.success,
            n.status = e.status,
            n.error = e.error,
            e.success && JSUtils.isObject(e.response) && e.response.messages && (n.data = {
                messages: e.response.messages
            },
            i.messagesRepository.setStoreMessages(e.response.messages),
            i.messagesRepository.setStoreMessagesCacheExpiration(Date.now() + 3e5)),
            r.notify(n)
        }) : (n.success = !0,
        n.status = HttpStatusCode.NOT_MODIFIED,
        n.data = {
            messages: this.messagesRepository.getStoreMessages()
        },
        r.notify(n)),
        r
    }
    ,
    UTMessagesService.prototype.getDailyGift = function() {
        var i = this
          , r = new EAObservable
          , n = new UTServiceResponseDTO
          , t = this.messagesRepository.getDailyGift();
        return t && t.isValid || !this.messagesRepository.isDailyGiftExpired() ? (n.success = !0,
        n.status = HttpStatusCode.NOT_MODIFIED,
        n.data = {
            dailyGift: t
        },
        r.notify(n)) : this.messagesDAO.getDailyGift().observe(this, function(t, e) {
            t.unobserve(i),
            n.success = e.success,
            n.status = e.status,
            n.error = e.error,
            e.success && JSUtils.isObject(e.response) && e.response.dailyGift ? (n.data = {
                dailyGift: e.response.dailyGift
            },
            i.messagesRepository.setDailyGift(e.response.dailyGift)) : n.data = {
                dailyGift: null
            },
            i.messagesRepository.setDailyGiftCacheExpiration(Date.now() + (n.status ? 36e5 : 6e5)),
            r.notify(n)
        }),
        r
    }
    ,
    UTMessagesService.prototype.claimDailyGift = function() {
        var r = this
          , n = new EAObservable
          , o = new UTServiceResponseDTO
          , s = this.messagesRepository.getDailyGift();
        return s && s.isValid ? this.messagesDAO.claimDailyGift(s.id).observe(this, function(t, e) {
            var i;
            t.unobserve(r),
            o.success = e.success,
            o.status = e.status,
            o.error = e.error,
            e.success && (s.rewardType === RewardType.COIN ? services.User.requestCurrencies() : s.rewardType === RewardType.PACK && (null === (i = services.User.getUser()) || void 0 === i || i.incrementNumUnopenedPacks()),
            r.messagesRepository.resetDailyGift()),
            n.notify(o)
        }) : (o.success = !1,
        o.status = HttpStatusCode.BAD_REQUEST,
        n.notify(o)),
        n
    }
    ,
    UTMessagesService
}(EAObject))
  , Encoding = function() {
    function Encoding() {}
    return Encoding.stringLength = function(t) {
        if (!t)
            return 0;
        for (var e = 0, i = 0; i < t.length; ++i) {
            var r = t.charCodeAt(i);
            55296 <= r && r <= 57343 && (r = 65536 + ((1023 & r) << 10) | 1023 & t.charCodeAt(++i)),
            r <= 127 ? ++e : e += r <= 2047 ? 2 : r <= 65535 ? 3 : 4
        }
        return e
    }
    ,
    Encoding.stringToUtf8 = function(t, e) {
        if (0 === e || !t)
            return [];
        for (var i = new Array(e), r = 0, n = e, o = 0; o < t.length; ++o) {
            var s = t.charCodeAt(o);
            if (55296 <= s && s <= 57343)
                s = 65536 + ((1023 & s) << 10) | 1023 & t.charCodeAt(++o);
            if (s <= 127) {
                if (n <= r)
                    break;
                i[r++] = s
            } else if (s <= 2047) {
                if (n <= r + 1)
                    break;
                i[r++] = 192 | s >> 6,
                i[r++] = 128 | 63 & s
            } else if (s <= 65535) {
                if (n <= r + 2)
                    break;
                i[r++] = 224 | s >> 12,
                i[r++] = 128 | s >> 6 & 63,
                i[r++] = 128 | 63 & s
            } else {
                if (n <= r + 3)
                    break;
                i[r++] = 240 | s >> 18,
                i[r++] = 128 | s >> 12 & 63,
                i[r++] = 128 | s >> 6 & 63,
                i[r++] = 128 | 63 & s
            }
        }
        return i
    }
    ,
    Encoding.utf8ToString = function(t) {
        if (!t || 0 === t.length)
            return "";
        for (var e = t.length, i = "", r = 0; r < e; ) {
            var n = t[r++];
            if (128 & n) {
                var o = 63 & t[r++];
                if (192 != (224 & n)) {
                    var s = 63 & t[r++];
                    if ((n = 224 == (240 & n) ? (15 & n) << 12 | o << 6 | s : (7 & n) << 18 | o << 12 | s << 6 | 63 & t[r++]) < 65536)
                        i += String.fromCharCode(n);
                    else {
                        var a = n - 65536;
                        i += String.fromCharCode(55296 | a >> 10, 56320 | 1023 & a)
                    }
                } else
                    i += String.fromCharCode((31 & n) << 6 | o)
            } else
                i += String.fromCharCode(n)
        }
        return i
    }
    ,
    Encoding.hexToBuffer = function(t) {
        var e = [];
        if (!t)
            return e;
        for (var i = 0; i < t.length; i += 2)
            e.push(parseInt(t.substr(i, 2), 16));
        return e
    }
    ,
    Encoding.bufferToHex = function(t) {
        if (!t || 0 === t.length)
            return "";
        for (var e = new Uint8Array(t.length), i = 0; i < t.length; i++) {
            var r = t[i];
            e[i] = r
        }
        return Array.prototype.map.call(new Uint8Array(e), function(t) {
            return ("00" + t.toString(16)).slice(-2)
        }).join("")
    }
    ,
    Encoding.intToBuffer = function(t) {
        return t ? [t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, 255 & t] : [0, 0, 0, 0]
    }
    ,
    Encoding.encodeBase64 = function(t) {
        if (!t || 0 === t.length)
            return "";
        for (var e = new Uint8Array(t.length), i = 0; i < t.length; i++) {
            var r = t[i];
            e[i] = r
        }
        for (var n, o, s, a, l, c, u, p = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", h = "", d = 0; d < e.length; )
            a = (n = e[d++]) >> 2,
            l = (3 & n) << 4 | (o = e[d++]) >> 4,
            c = (15 & o) << 2 | (s = e[d++]) >> 6,
            u = 63 & s,
            isNaN(o) ? c = u = 64 : isNaN(s) && (u = 64),
            h += p.charAt(a) + p.charAt(l) + p.charAt(c) + p.charAt(u);
        return h
    }
    ,
    Encoding.decodeBase64 = function(t) {
        if (!t)
            return [];
        var e, i, r, n, o, s, a = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", l = [], c = 0, u = new RegExp("[^" + a.replace(/[[\]\\\-^$]/g, "\\$&") + "]","g");
        for (t = t.replace(u, ""); c < t.length; )
            e = a.indexOf(t.charAt(c++)) << 2 | (n = -1 === (n = a.indexOf(t.charAt(c++) || "=")) ? 64 : n) >> 4,
            i = (15 & n) << 4 | (o = -1 === (o = a.indexOf(t.charAt(c++) || "=")) ? 64 : o) >> 2,
            r = (3 & o) << 6 | (s = -1 === (s = a.indexOf(t.charAt(c++) || "=")) ? 64 : s),
            l.push(e),
            64 !== o && l.push(i),
            64 !== s && l.push(r);
        return l
    }
    ,
    Encoding
}()
  , UTMyStadiumRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTMyStadiumRepository() {
        var t = e.call(this) || this;
        return t.stadiumObject = null,
        t.expiryTimestamp = 0,
        t
    }
    return __extends(UTMyStadiumRepository, e),
    UTMyStadiumRepository.prototype.reset = function() {
        this.stadiumObject = null,
        this.expiryTimestamp = 0
    }
    ,
    UTMyStadiumRepository.prototype.set = function(t) {
        this.stadiumObject = t
    }
    ,
    UTMyStadiumRepository.prototype.getFullStadium = function() {
        return this.stadiumObject
    }
    ,
    UTMyStadiumRepository.prototype.setCacheTimestamp = function(t, e) {
        this.expiryTimestamp = t + (JSUtils.isNumber(e) ? e * MS_PER_SECOND : 5 * SECONDS_PER_MINUTE * MS_PER_SECOND)
    }
    ,
    UTMyStadiumRepository.prototype.isCacheExpired = function() {
        return this.expiryTimestamp < Date.now()
    }
    ,
    UTMyStadiumRepository
}(EAObject))
  , UTMyStadiumService = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTMyStadiumService(t) {
        var e = i.call(this) || this;
        return e.stadiumDAO = t,
        e.stadiumRepository = new UTMyStadiumRepository,
        e
    }
    return __extends(UTMyStadiumService, i),
    UTMyStadiumService.prototype.reset = function() {
        this.stadiumRepository.reset()
    }
    ,
    UTMyStadiumService.prototype.isCacheExpired = function() {
        return this.stadiumRepository.isCacheExpired()
    }
    ,
    UTMyStadiumService.prototype.getStadium = function() {
        var n = this
          , o = new EAObservable
          , s = new UTServiceResponseDTO
          , t = this.stadiumRepository.getFullStadium();
        s.data = {
            stadium: null
        };
        function uba(t, e) {
            if (t.unobserve(n),
            s.success = e.success,
            s.status = e.status,
            s.error = e.error,
            e.success && e.response && !JSUtils.isString(e.response) && e.response.stadium) {
                s.data = {
                    stadium: e.response.stadium
                };
                var i = services.Configuration.getFeatureSetting(UTServerSettingsRepository.KEY.MYSTADIUM_CACHE_TIMEOUT)
                  , r = 0 < i ? i : void 0;
                n.stadiumRepository.set(e.response.stadium),
                n.stadiumRepository.setCacheTimestamp(Date.now(), r)
            }
            o.notify(s)
        }
        return this.stadiumRepository.isCacheExpired() ? t && t.isStadiumModified() ? t.saveStadium().observe(this, function(t, e) {
            t.unobserve(n),
            e.success && n.stadiumDAO.getStadium().observe(n, uba),
            DebugUtils.Assert(e.success, "Failed to save dirty stadium!")
        }) : this.stadiumDAO.getStadium().observe(this, uba) : (s.success = !0,
        s.status = 200,
        s.data.stadium = this.stadiumRepository.getFullStadium(),
        o.notify(s)),
        o
    }
    ,
    UTMyStadiumService.prototype.saveStadium = function() {
        var n = this
          , o = new EAObservable
          , s = new UTServiceResponseDTO;
        return this.getStadium().observe(this, function(t, e) {
            var i;
            if (t.unobserve(n),
            s.error = e.error,
            e.success && (null === (i = e.data) || void 0 === i ? void 0 : i.stadium)) {
                var r = e.data.stadium;
                r.isStadiumModified() ? r.saveStadium().observe(n, function(t, e) {
                    t.unobserve(n),
                    s.success = e.success,
                    s.status = e.status,
                    o.notify(s)
                }) : (s.success = !0,
                s.status = HttpStatusCode.NOT_MODIFIED,
                o.notify(s))
            } else
                s.success = !1,
                s.status = e.status,
                o.notify(s),
                getDefaultDispatcher().notify(AppNotification.STADIUM_SAVE_FAILED, n)
        }),
        o
    }
    ,
    UTMyStadiumService
}(EAObject))
  , UTObjectivesRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTObjectivesRepository() {
        var t = e.call(this) || this;
        return t.activeCampaign = null,
        t.activeWorldCampaign = null,
        t.campaignCacheExpiration = 0,
        t.categories = new EAHashTable,
        t.objectivesCacheExpiration = 0,
        t.worldCampaignCacheExpiration = 0,
        t
    }
    return __extends(UTObjectivesRepository, e),
    UTObjectivesRepository.prototype.reset = function() {
        this.activeCampaign = null,
        this.activeWorldCampaign = null,
        this.campaignCacheExpiration = 0,
        this.categories.clear(),
        this.objectivesCacheExpiration = 0,
        this.worldCampaignCacheExpiration = 0
    }
    ,
    UTObjectivesRepository.prototype.setCampaignCacheTimestamp = function(t, e) {
        var i = 6e5;
        JSUtils.isNumber(e) && (i = Math.max(Math.min(e * MS_PER_SECOND, i), 3e4)),
        this.campaignCacheExpiration = t + i
    }
    ,
    UTObjectivesRepository.prototype.setWorldCampaignCacheTimestamp = function(t, e) {
        var i = 6e5;
        JSUtils.isNumber(e) && (i = Math.max(Math.min(e * MS_PER_SECOND, i), 3e4)),
        this.worldCampaignCacheExpiration = t + i
    }
    ,
    UTObjectivesRepository.prototype.isCampaignCacheExpired = function() {
        return this.campaignCacheExpiration < Date.now()
    }
    ,
    UTObjectivesRepository.prototype.isWorldCampaignCacheExpired = function() {
        return this.worldCampaignCacheExpiration < Date.now()
    }
    ,
    UTObjectivesRepository.prototype.setObjectivesCacheTimestamp = function(t, e) {
        var i = 3e5;
        JSUtils.isNumber(e) && (i = Math.max(Math.min(e * MS_PER_SECOND, i), 3e4)),
        this.objectivesCacheExpiration = t + i
    }
    ,
    UTObjectivesRepository.prototype.isObjectivesCacheExpired = function() {
        return this.objectivesCacheExpiration < Date.now()
    }
    ,
    UTObjectivesRepository.prototype.setActiveCampaign = function(t) {
        this.activeCampaign = t
    }
    ,
    UTObjectivesRepository.prototype.getActiveCampaign = function() {
        return this.activeCampaign
    }
    ,
    UTObjectivesRepository.prototype.setActiveWorldCampaign = function(t) {
        this.activeWorldCampaign && t && t.id === this.activeWorldCampaign.id ? this.activeWorldCampaign.update(t) : (this.activeWorldCampaign && this.activeWorldCampaign.onDataUpdated.clearObservers(),
        this.activeWorldCampaign = t)
    }
    ,
    UTObjectivesRepository.prototype.getActiveWorldCampaign = function() {
        return this.activeWorldCampaign
    }
    ,
    UTObjectivesRepository.prototype.setCategories = function(t) {
        var e = this;
        this.categories.clear(),
        t.forEach(function(t) {
            return e.categories.set(t.id, t)
        })
    }
    ,
    UTObjectivesRepository.prototype.getCategories = function() {
        return this.categories.values()
    }
    ,
    UTObjectivesRepository.prototype.getCategoryById = function(t) {
        return this.categories.get(t)
    }
    ,
    UTObjectivesRepository
}(EAObject))
  , UTObjectivesService = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTObjectivesService(t) {
        var e = i.call(this) || this;
        return e.objectivesDAO = t,
        e.objectivesRepository = new UTObjectivesRepository,
        e.updateGroupIds = [],
        e
    }
    return __extends(UTObjectivesService, i),
    UTObjectivesService.prototype.init = function() {
        i.prototype.init.call(this),
        getDefaultDispatcher().addObserver(AppNotification.OBJECTIVE_UPDATE, this, this.update)
    }
    ,
    UTObjectivesService.prototype.dealloc = function() {
        i.prototype.dealloc.call(this),
        getDefaultDispatcher().removeObserver(AppNotification.OBJECTIVE_UPDATE, this)
    }
    ,
    UTObjectivesService.prototype.reset = function() {
        this.objectivesRepository.reset(),
        this.updateGroupIds = []
    }
    ,
    UTObjectivesService.prototype.flushCategoryCache = function() {
        this.objectivesRepository.setObjectivesCacheTimestamp(0)
    }
    ,
    UTObjectivesService.prototype.isFeatureEnabled = function() {
        return services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.OBJECTIVES_ENABLED)
    }
    ,
    UTObjectivesService.prototype.isWorldCampaignsEnabled = function() {
        return services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.WORLD_CAMPAIGNS_ENABLED)
    }
    ,
    UTObjectivesService.prototype.isCampaignCacheExpired = function() {
        return this.objectivesRepository.isCampaignCacheExpired()
    }
    ,
    UTObjectivesService.prototype.isObjectivesCacheExpired = function() {
        return this.objectivesRepository.isObjectivesCacheExpired()
    }
    ,
    UTObjectivesService.prototype.requestActiveCampaign = function() {
        var n = this
          , o = new EAObservable
          , s = new UTServiceResponseDTO;
        return s.data = {
            campaign: null
        },
        this.isFeatureEnabled() ? this.isCampaignCacheExpired() ? this.objectivesDAO.getActiveCampaign().observe(this, function(t, e) {
            var i;
            t.unobserve(n);
            var r = Date.now();
            s.success = e.success,
            s.status = e.status,
            s.error = e.error,
            e.success && JSUtils.isObject(e.response) && e.response.campaign ? (s.data = e.response,
            n.objectivesRepository.reset(),
            n.objectivesRepository.setCampaignCacheTimestamp(r, e.response.campaign.endTime),
            n.objectivesRepository.setActiveCampaign(e.response.campaign)) : (n.objectivesRepository.setCampaignCacheTimestamp(r, 30),
            (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && services.Configuration.setFeatureEnabled(UTServerSettingsRepository.KEY.OBJECTIVES_ENABLED, !1)),
            o.notify(s)
        }) : (s.success = !0,
        s.status = HttpStatusCode.NOT_MODIFIED,
        s.data.campaign = this.objectivesRepository.getActiveCampaign(),
        o.notify(s)) : (s.status = UtasErrorCode.SERVICE_IS_DISABLED,
        o.notify(s)),
        o
    }
    ,
    UTObjectivesService.prototype.requestActiveWorldCampaign = function() {
        var n = this
          , o = new EAObservable
          , s = new UTServiceResponseDTO;
        return s.data = {
            campaign: null,
            needsAutoClaim: !1
        },
        this.isFeatureEnabled() && this.isWorldCampaignsEnabled() ? this.objectivesRepository.isWorldCampaignCacheExpired() ? this.objectivesDAO.getActiveWorldCampaign().observe(this, function(t, e) {
            var i;
            t.unobserve(n);
            var r = Date.now();
            s.success = e.success,
            s.status = e.status,
            s.error = e.error,
            e.success && e.response && !JSUtils.isString(e.response) && s.data ? (n.objectivesRepository.setWorldCampaignCacheTimestamp(r, 0 < e.maxAge ? e.maxAge : void 0),
            n.objectivesRepository.setActiveWorldCampaign(e.response.campaign),
            s.data.needsAutoClaim = e.response.needsAutoClaim,
            s.data.campaign = n.objectivesRepository.getActiveWorldCampaign()) : (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && services.Configuration.setFeatureEnabled(UTServerSettingsRepository.KEY.WORLD_CAMPAIGNS_ENABLED, !1),
            o.notify(s)
        }) : (s.success = !0,
        s.status = HttpStatusCode.NOT_MODIFIED,
        s.data.campaign = this.objectivesRepository.getActiveWorldCampaign(),
        o.notify(s)) : (s.status = UtasErrorCode.SERVICE_IS_DISABLED,
        o.notify(s)),
        o
    }
    ,
    UTObjectivesService.prototype.requestCampaignDetails = function(r) {
        var n = this
          , o = new EAObservable
          , s = new UTServiceResponseDTO
          , a = this.objectivesRepository.getActiveCampaign();
        if (s.data = {
            campaign: null
        },
        !this.isFeatureEnabled())
            return s.status = UtasErrorCode.SERVICE_IS_DISABLED,
            o.notify(s),
            o;
        if (!this.isCampaignCacheExpired() && r === ObjectiveCampaignIteration.ACTIVE && a && a.hasLevels())
            return s.success = !0,
            s.status = HttpStatusCode.NOT_MODIFIED,
            s.data.campaign = a,
            o.notify(s),
            o;
        function Pca(t, e) {
            var i;
            t.unobserve(n),
            s.success = e.success,
            s.status = e.status,
            s.error = e.error,
            e.success && e.response && !JSUtils.isString(e.response) ? (a = n.objectivesRepository.getActiveCampaign()) && r === ObjectiveCampaignIteration.ACTIVE && (a.setLevels(e.response.levels),
            s.data = {
                campaign: a
            }) : (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && services.Configuration.setFeatureEnabled(UTServerSettingsRepository.KEY.OBJECTIVES_ENABLED, !1),
            o.notify(s)
        }
        return this.isCampaignCacheExpired() && r === ObjectiveCampaignIteration.ACTIVE ? this.requestActiveCampaign().observe(this, function(t, e) {
            t.unobserve(n),
            n.objectivesDAO.getCampaignDetails(r).observe(n, Pca)
        }) : this.objectivesDAO.getCampaignDetails(r).observe(this, Pca),
        o
    }
    ,
    UTObjectivesService.prototype.requestCategories = function() {
        var n = this
          , o = new EAObservable
          , s = new UTServiceResponseDTO;
        return s.data = {
            categories: []
        },
        this.isFeatureEnabled() ? !this.isObjectivesCacheExpired() && 0 < this.objectivesRepository.getCategories().length ? (s.success = !0,
        s.status = HttpStatusCode.NOT_MODIFIED,
        s.data.categories = this.objectivesRepository.getCategories(),
        o.notify(s)) : this.objectivesDAO.getCategories().observe(this, function(t, e) {
            var i;
            t.unobserve(n);
            var r = Date.now();
            s.success = e.success,
            s.status = e.status,
            s.error = e.error,
            e.success && e.response && !JSUtils.isString(e.response) ? (s.data = e.response,
            n.objectivesRepository.setObjectivesCacheTimestamp(r),
            n.objectivesRepository.setCategories(e.response.categories)) : (n.objectivesRepository.setObjectivesCacheTimestamp(r, 30),
            (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && services.Configuration.setFeatureEnabled(UTServerSettingsRepository.KEY.OBJECTIVES_ENABLED, !1)),
            o.notify(s)
        }) : (s.status = UtasErrorCode.SERVICE_IS_DISABLED,
        o.notify(s)),
        o
    }
    ,
    UTObjectivesService.prototype.requestCategoryById = function(i) {
        var r = this
          , n = new EAObservable
          , o = new UTServiceResponseDTO;
        if (o.data = {
            category: null
        },
        !this.isObjectivesCacheExpired()) {
            var t = this.objectivesRepository.getCategoryById(i);
            if (t)
                return o.success = !0,
                o.status = HttpStatusCode.NOT_MODIFIED,
                o.data.category = t,
                n.notify(o),
                n
        }
        return this.requestCategories().observe(this, function(t, e) {
            t.unobserve(r),
            o.success = e.success,
            o.status = e.status,
            o.error = e.error,
            e.success && (o.data = {
                category: r.objectivesRepository.getCategoryById(i)
            }),
            n.notify(o)
        }),
        n
    }
    ,
    UTObjectivesService.prototype.requestGroup = function(r, n) {
        var o = this
          , s = new EAObservable
          , a = new UTServiceResponseDTO
          , t = r.getGroup(n);
        if (DebugUtils.Assert(JSUtils.isValid(t), "Unable to find group with composite ID " + n),
        a.data = {
            group: null
        },
        !this.isFeatureEnabled())
            return a.status = UtasErrorCode.SERVICE_IS_DISABLED,
            s.notify(a),
            s;
        if (!t)
            return a.status = HttpStatusCode.BAD_REQUEST,
            s.notify(a),
            s;
        if (!this.isObjectivesCacheExpired() && t.hasObjectives())
            return a.success = !0,
            a.status = HttpStatusCode.NOT_MODIFIED,
            a.data.group = t,
            s.notify(a),
            s;
        function nda(t, e) {
            if (t.unobserve(o),
            a.success = e.success,
            a.status = e.status,
            a.error = e.error,
            e.success && e.response && !JSUtils.isString(e.response)) {
                var i = r ? r.getGroup(n) : null;
                i && (i.addObjectives(e.response.objectives),
                a.data = {
                    group: i
                })
            }
            s.notify(a)
        }
        return t.isMilestone() || t.isExpiringMilestone() ? this.objectivesDAO.getLearningGroupObjectives(r.id, t.id).observe(this, nda) : this.objectivesDAO.getGroupObjectives(r.id, t.type, t.id).observe(this, nda),
        s
    }
    ,
    UTObjectivesService.prototype.claimLevelReward = function(n, t) {
        var o = this
          , s = new EAObservable
          , a = new UTServiceResponseDTO;
        return a.data = {
            rewards: [],
            level: null
        },
        this.isFeatureEnabled() ? this.objectivesDAO.claimSeasonalCampaignLevelRewards(n, t).observe(this, function(t, e) {
            if (t.unobserve(o),
            a.success = e.success,
            a.status = e.status,
            a.error = e.error,
            a.data = {
                rewards: e.response && !JSUtils.isString(e.response) ? e.response.rewards : [],
                level: null
            },
            e.success) {
                var i = o.objectivesRepository.getActiveCampaign();
                if (i) {
                    i.remainingRewards--;
                    var r = i.getLevelById(n);
                    r && (r.state = ObjectiveMilestoneState.REWARDED,
                    a.data.level = r)
                }
            }
            s.notify(a)
        }) : (a.status = UtasErrorCode.SERVICE_IS_DISABLED,
        s.notify(a)),
        s
    }
    ,
    UTObjectivesService.prototype.claimExpiredRewards = function() {
        var r = this
          , n = new EAObservable
          , o = new UTServiceResponseDTO;
        return this.isFeatureEnabled() ? this.objectivesDAO.claimExpiredSeasonRewards().observe(this, function(t, e) {
            t.unobserve(r);
            var i = e.response && !JSUtils.isString(e.response) ? e.response.rewards : [];
            o.success = e.success,
            o.status = e.status,
            o.error = e.error,
            o.data = {
                rewards: i
            },
            e.success ? (r.reset(),
            n.notify(o),
            getDefaultDispatcher().notify(AppNotification.OBJECTIVE_CAMPAIGN_REWARDS_CLAIM, r, {
                type: ObjectiveCampaignType.SEASON,
                rewards: i
            })) : n.notify(o)
        }) : (o.status = UtasErrorCode.SERVICE_IS_DISABLED,
        n.notify(o)),
        n
    }
    ,
    UTObjectivesService.prototype.claimExpiredWorldRewards = function() {
        var r = this
          , n = new EAObservable
          , o = new UTServiceResponseDTO;
        return this.isFeatureEnabled() ? this.objectivesDAO.claimExpiredWorldRewards().observe(this, function(t, e) {
            t.unobserve(r);
            var i = e.response && !JSUtils.isString(e.response) ? e.response.rewards : [];
            o.success = e.success,
            o.status = e.status,
            o.error = e.error,
            o.data = {
                rewards: i
            },
            e.success ? (r.reset(),
            n.notify(o),
            getDefaultDispatcher().notify(AppNotification.OBJECTIVE_CAMPAIGN_REWARDS_CLAIM, r, {
                type: ObjectiveCampaignType.WORLD,
                rewards: i
            })) : n.notify(o)
        }) : (o.status = UtasErrorCode.SERVICE_IS_DISABLED,
        n.notify(o)),
        n
    }
    ,
    UTObjectivesService.prototype.claimExpiredLearningRewards = function() {
        var r = this
          , n = new EAObservable
          , o = new UTServiceResponseDTO;
        return this.isFeatureEnabled() ? this.objectivesDAO.claimExpiredLearningObjectiveRewards().observe(this, function(t, e) {
            t.unobserve(r);
            var i = e.response && JSUtils.isObject(e.response) ? e.response.rewards : [];
            o.success = e.success,
            o.status = e.status,
            o.error = e.error,
            o.data = {
                rewards: i
            },
            e.success ? (r.reset(),
            n.notify(o),
            getDefaultDispatcher().notify(AppNotification.OBJECTIVE_CAMPAIGN_REWARDS_CLAIM, r, {
                type: ObjectiveCampaignType.LEARNING,
                rewards: i
            })) : n.notify(o)
        }) : (o.status = UtasErrorCode.SERVICE_IS_DISABLED,
        n.notify(o)),
        n
    }
    ,
    UTObjectivesService.prototype.triggerUpdates = function(t) {
        var o = this
          , s = t.slice()
          , a = s.shift()
          , l = function(t, e) {
            if (t.unobserve(o),
            e.success && JSUtils.isObject(e.data)) {
                var i = e.data.category;
                DebugUtils.Assert(JSUtils.isValid(i), "No objective category retrieved when attempting to parse updates."),
                DebugUtils.Assert(JSUtils.isValid(a), "No update entry found when parsing objective updates."),
                i && a && o.requestGroup(i, a.groupCompositeId).observe(o, function(t, e) {
                    t.unobserve(o);
                    var i = e.data && !JSUtils.isString(e.data) ? e.data.group : null;
                    if (a && i) {
                        var r = i.getObjectiveById(a.objectiveId)
                          , n = o.updateGroupIds.indexOf(a.groupId);
                        r && (r.state = a.objectiveState,
                        r.currentProgress = a.objectiveProgress,
                        (r.isClaimable() || r.isRedeemed()) && getDefaultDispatcher().notify(AppNotification.OBJECTIVE_COMPLETE, o, {
                            name: r.title
                        })),
                        0 <= n && (o.updateGroupIds.splice(n, 1),
                        i.state = a.groupState,
                        (i.isClaimable() || i.isRedeemed()) && getDefaultDispatcher().notify(AppNotification.OBJECTIVE_GROUP_COMPLETE, o, {
                            name: i.title
                        }))
                    }
                    (a = s.shift()) && o.requestCategoryById(a.categoryId).observe(o, l)
                })
            }
        };
        a && this.requestCategoryById(a.categoryId).observe(this, l)
    }
    ,
    UTObjectivesService.prototype.update = function(t, e, i) {
        var r = this;
        if (0 < i.experienceGained) {
            var n = this.objectivesRepository.getActiveCampaign();
            n && (n.xp += i.experienceGained)
        }
        0 < i.updates.length && (i.updates.forEach(function(t) {
            r.updateGroupIds.indexOf(t.groupId) < 0 && r.updateGroupIds.push(t.groupId)
        }),
        this.triggerUpdates(i.updates))
    }
    ,
    UTObjectivesService
}(EAObject))
  , UTPlayerHealthRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTPlayerHealthRepository() {
        var t = e.call(this) || this;
        return t.expiryTimestamp = 0,
        t.unsavedTimeSpent = 0,
        t
    }
    return __extends(UTPlayerHealthRepository, e),
    UTPlayerHealthRepository.prototype.reset = function() {
        this.playerHealth = null,
        this.expiryTimestamp = 0,
        this.unsavedTimeSpent = 0
    }
    ,
    UTPlayerHealthRepository.prototype.setPlayerHealth = function(t) {
        this.playerHealth = t
    }
    ,
    UTPlayerHealthRepository.prototype.getPlayerHealth = function() {
        return this.playerHealth
    }
    ,
    UTPlayerHealthRepository.prototype.setCacheTimestamp = function(t, e) {
        JSUtils.isNumber(e) || (e = 10 * SECONDS_PER_MINUTE),
        this.expiryTimestamp = t + e * MS_PER_SECOND
    }
    ,
    UTPlayerHealthRepository.prototype.isCacheExpired = function() {
        return this.expiryTimestamp < Date.now()
    }
    ,
    UTPlayerHealthRepository.prototype.getUnsavedTimeSpent = function() {
        return this.unsavedTimeSpent
    }
    ,
    UTPlayerHealthRepository.prototype.setUnsavedTimeSpent = function(t) {
        this.unsavedTimeSpent = t
    }
    ,
    UTPlayerHealthRepository
}(EAObject))
  , UTPlayerHealthService = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTPlayerHealthService(t) {
        var e = i.call(this) || this;
        return e.playerHealthDAO = t,
        e.playerHealthRepository = new UTPlayerHealthRepository,
        e
    }
    return __extends(UTPlayerHealthService, i),
    UTPlayerHealthService.prototype.init = function() {
        i.prototype.init.call(this),
        getDefaultDispatcher().addObserver(AppNotification.PLAYER_HEALTH_UPDATE, this, this.update)
    }
    ,
    UTPlayerHealthService.prototype.dealloc = function() {
        i.prototype.dealloc.call(this),
        getDefaultDispatcher().removeObserver(AppNotification.PLAYER_HEALTH_UPDATE, this)
    }
    ,
    UTPlayerHealthService.prototype.reset = function() {
        this.playerHealthRepository.reset()
    }
    ,
    UTPlayerHealthService.prototype.isPlayerHealthCacheExpired = function() {
        return this.playerHealthRepository.isCacheExpired()
    }
    ,
    UTPlayerHealthService.prototype.isEnabledByUser = function() {
        var t, e;
        return null !== (e = null === (t = this.playerHealthRepository.getPlayerHealth()) || void 0 === t ? void 0 : t.enabled) && void 0 !== e && e
    }
    ,
    UTPlayerHealthService.prototype.isFeatureEnabled = function() {
        return services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.PLAYER_HEALTH_ENABLED) && services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.PLAYER_HEALTH_ENABLED_PER_SKU)
    }
    ,
    UTPlayerHealthService.prototype.isTrackingEnabled = function() {
        return this.isFeatureEnabled() && this.isEnabledByUser()
    }
    ,
    UTPlayerHealthService.prototype.setFeatureEnabled = function(t) {
        services.Configuration.setFeatureEnabled(UTServerSettingsRepository.KEY.PLAYER_HEALTH_ENABLED, t),
        services.Configuration.setFeatureEnabled(UTServerSettingsRepository.KEY.PLAYER_HEALTH_ENABLED_PER_SKU, t)
    }
    ,
    UTPlayerHealthService.prototype.readPlayerHealth = function() {
        var n = this
          , o = new EAObservable
          , s = new UTServiceResponseDTO;
        return s.data = {
            playerHealth: null
        },
        this.isFeatureEnabled() ? this.isPlayerHealthCacheExpired() ? this.playerHealthDAO.read().observe(this, function(t, e) {
            var i;
            t.unobserve(n);
            var r = Date.now();
            s.success = e.success,
            s.status = e.status,
            s.error = e.error,
            e.success && JSUtils.isObject(e.response) && e.response.playerHealth ? (s.data = e.response,
            n.playerHealthRepository.reset(),
            n.playerHealthRepository.setCacheTimestamp(r),
            n.playerHealthRepository.setPlayerHealth(e.response.playerHealth)) : (n.playerHealthRepository.setCacheTimestamp(r, 30),
            (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && n.setFeatureEnabled(!1)),
            o.notify(s)
        }) : (s.success = !0,
        s.status = HttpStatusCode.NOT_MODIFIED,
        s.data.playerHealth = this.playerHealthRepository.getPlayerHealth(),
        o.notify(s)) : (s.status = UtasErrorCode.SERVICE_IS_DISABLED,
        o.notify(s)),
        o
    }
    ,
    UTPlayerHealthService.prototype.updatePlayerHealthStatLimit = function(r, n) {
        var o = this
          , s = new EAObservable
          , a = new UTServiceResponseDTO;
        return this.isFeatureEnabled() ? this.playerHealthDAO.write(r, n).observe(this, function(t, e) {
            if (t.unobserve(o),
            a.success = e.success,
            a.status = e.status,
            a.error = e.error,
            e.success) {
                var i = o.playerHealthRepository.getPlayerHealth();
                i && i.setLimit(r, n)
            }
            s.notify(a)
        }) : (a.status = UtasErrorCode.SERVICE_IS_DISABLED,
        s.notify(a)),
        s
    }
    ,
    UTPlayerHealthService.prototype.updatePlayerHealthOptin = function(r) {
        var n = this
          , o = new EAObservable
          , s = new UTServiceResponseDTO;
        return this.isFeatureEnabled() ? this.playerHealthDAO.write("userOptIn", Number(r)).observe(this, function(t, e) {
            if (t.unobserve(n),
            s.success = e.success,
            s.status = e.status,
            s.error = e.error,
            e.success) {
                var i = n.playerHealthRepository.getPlayerHealth();
                i && (i.enabled = r)
            }
            o.notify(s)
        }) : (s.status = UtasErrorCode.SERVICE_IS_DISABLED,
        o.notify(s)),
        o
    }
    ,
    UTPlayerHealthService.prototype.update = function(t, e, i) {
        var r = this.playerHealthRepository.getPlayerHealth();
        r && r.updateCurrentPeriodValue(i.id, i.value)
    }
    ,
    UTPlayerHealthService.prototype.trackTimeSpent = function(t) {
        var e = this.playerHealthRepository.getUnsavedTimeSpent();
        this.playerHealthRepository.setUnsavedTimeSpent(e + t);
        var i = this.playerHealthRepository.getPlayerHealth();
        i && (isWeb() ? i.updateCurrentPeriodValue(PlayerHealthStatId.TIME_SPENT_WEB_APP, t) : (isIOS() || isAndroid()) && i.updateCurrentPeriodValue(PlayerHealthStatId.TIME_SPENT_COMP_APP, t))
    }
    ,
    UTPlayerHealthService.prototype.persistTimeSpent = function() {
        var i = this
          , r = new EAObservable
          , n = new UTServiceResponseDTO
          , t = this.playerHealthRepository.getUnsavedTimeSpent();
        if (!this.isFeatureEnabled())
            return n.status = UtasErrorCode.SERVICE_IS_DISABLED,
            r.notify(n),
            r;
        if (t <= 0)
            return n.success = !0,
            n.status = HttpStatusCode.OK,
            r.notify(n),
            r;
        var e = isWeb() ? PlayerHealthStatId.TIME_SPENT_WEB_APP : PlayerHealthStatId.TIME_SPENT_COMP_APP;
        return 0 < t && this.playerHealthDAO.write(e, t).observe(this, function(t, e) {
            t.unobserve(i),
            n.success = e.success,
            n.status = e.status,
            n.error = e.error,
            e.success && i.playerHealthRepository.setUnsavedTimeSpent(0),
            r.notify(n)
        }),
        r
    }
    ,
    UTPlayerHealthService.prototype.storeUnsavedTimeSpent = function() {
        var t = this.playerHealthRepository.getUnsavedTimeSpent();
        0 < t && (services.UserSettings.setItem(UserSettingsKey.PLAYER_HEALTH_TIME_SPENT, t),
        this.playerHealthRepository.setUnsavedTimeSpent(0))
    }
    ,
    UTPlayerHealthService.prototype.trackUnsavedTimeSpent = function() {
        var t = services.UserSettings.getItem(UserSettingsKey.PLAYER_HEALTH_TIME_SPENT, "0");
        if ("0" !== t) {
            services.UserSettings.removeItem(UserSettingsKey.PLAYER_HEALTH_TIME_SPENT);
            var e = JSUtils.parseNumber(t, services.Localization.locale.toBCPString())
              , i = this.playerHealthRepository.getUnsavedTimeSpent();
            this.playerHealthRepository.setUnsavedTimeSpent(i + e)
        }
    }
    ,
    UTPlayerHealthService.prototype.storeLimitIgnoredTimestamp = function(t) {
        t === PlayerHealthStatId.PACKS_OPENED ? services.UserSettings.setItem(UserSettingsKey.PLAYER_HEALTH_PACKS_LIMIT_IGNORED, Date.now()) : t === PlayerHealthStatId.POINTS_PURCHASED && services.UserSettings.setItem(UserSettingsKey.PLAYER_HEALTH_POINTS_LIMIT_IGNORED, Date.now())
    }
    ,
    UTPlayerHealthService.prototype.retrieveLimitIgnoredTimestamp = function(t) {
        var e = "";
        return t === PlayerHealthStatId.PACKS_OPENED ? e = services.UserSettings.getItem(UserSettingsKey.PLAYER_HEALTH_PACKS_LIMIT_IGNORED, "0") : t === PlayerHealthStatId.POINTS_PURCHASED && (e = services.UserSettings.getItem(UserSettingsKey.PLAYER_HEALTH_POINTS_LIMIT_IGNORED, "0")),
        JSUtils.parseNumber(e, services.Localization.locale.toBCPString())
    }
    ,
    UTPlayerHealthService.prototype.isIgnoreLimitPeriodExpired = function(t) {
        return Date.now() - this.retrieveLimitIgnoredTimestamp(t) > SECONDS_PER_HOUR * MS_PER_SECOND
    }
    ,
    UTPlayerHealthService
}(EAObject))
  , UTRivalRewardsRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTRivalRewardsRepository() {
        var t = e.call(this) || this;
        return t.expiryTimestamp = 0,
        t.weeklyRewards = new EAHashTable,
        t.seasonalRewards = new EAHashTable,
        t
    }
    return __extends(UTRivalRewardsRepository, e),
    UTRivalRewardsRepository.prototype.reset = function() {
        this.weeklyRewards.clear(),
        this.seasonalRewards.clear(),
        this.expiryTimestamp = 0
    }
    ,
    UTRivalRewardsRepository.prototype.setWeeklyRewards = function(t, e) {
        return this.weeklyRewards.set(t, e)
    }
    ,
    UTRivalRewardsRepository.prototype.addWeeklyRewards = function(t) {
        var e = this;
        Array.isArray(t) ? t.forEach(function(t) {
            return e.weeklyRewards.set(t.id, t)
        }) : this.weeklyRewards.set(t.id, t)
    }
    ,
    UTRivalRewardsRepository.prototype.getWeeklyRewards = function() {
        return this.weeklyRewards.values()
    }
    ,
    UTRivalRewardsRepository.prototype.getWeeklyRewardById = function(t) {
        return this.weeklyRewards.get(t)
    }
    ,
    UTRivalRewardsRepository.prototype.isWeeklyRewardsEmpty = function() {
        return 0 === this.weeklyRewards.length
    }
    ,
    UTRivalRewardsRepository.prototype.setSeasonalRewards = function(t, e) {
        return this.seasonalRewards.set(t, e)
    }
    ,
    UTRivalRewardsRepository.prototype.addSeasonalRewards = function(t) {
        var e = this;
        Array.isArray(t) ? t.forEach(function(t) {
            return e.seasonalRewards.set(t.id, t)
        }) : this.seasonalRewards.set(t.id, t)
    }
    ,
    UTRivalRewardsRepository.prototype.getSeasonalRewards = function() {
        return this.seasonalRewards.values()
    }
    ,
    UTRivalRewardsRepository.prototype.getSeasonalRewardById = function(t) {
        return this.seasonalRewards.get(t)
    }
    ,
    UTRivalRewardsRepository.prototype.isSeasonalRewardsEmpty = function() {
        return 0 === this.seasonalRewards.length
    }
    ,
    UTRivalRewardsRepository.prototype.isCacheExpired = function() {
        return this.expiryTimestamp < Date.now()
    }
    ,
    UTRivalRewardsRepository.prototype.setCacheTimestamp = function(t, e) {
        this.expiryTimestamp = t + (JSUtils.isNumber(e) ? e * MS_PER_SECOND : 36e5)
    }
    ,
    UTRivalRewardsRepository
}(EAObject))
  , UTRivalsService = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTRivalsService(t) {
        var e = i.call(this) || this;
        return e.rivalsDao = t,
        e.rivalsRepository = new UTRivalRewardsRepository,
        e
    }
    return __extends(UTRivalsService, i),
    UTRivalsService.prototype.reset = function() {
        this.rivalsRepository.reset()
    }
    ,
    UTRivalsService.prototype.getWeeklyRewardsInfo = function() {
        return this.getRewardsInfo(GameModesPrizeType.WEEKLY)
    }
    ,
    UTRivalsService.prototype.getSeasonalRewardsInfo = function() {
        return this.getRewardsInfo(GameModesPrizeType.SEASONAL)
    }
    ,
    UTRivalsService.prototype.getRewardsInfo = function(i) {
        var r = this
          , n = new EAObservable
          , o = new UTServiceResponseDTO;
        return (i !== GameModesPrizeType.SEASONAL || this.rivalsRepository.isSeasonalRewardsEmpty()) && (i !== GameModesPrizeType.WEEKLY || this.rivalsRepository.isWeeklyRewardsEmpty()) || this.rivalsRepository.isCacheExpired() ? this.rivalsDao.getPrizeDetails(i).observe(this, function(t, e) {
            t.unobserve(r),
            o.success = e.success,
            o.status = e.status,
            o.error = e.error,
            o.success && JSUtils.isObject(e.response) ? (o.data = {
                unclaimedRewards: e.response.unclaimedRewards.slice()
            },
            i === GameModesPrizeType.SEASONAL ? r.rivalsRepository.addSeasonalRewards(e.response.unclaimedRewards) : r.rivalsRepository.addWeeklyRewards(e.response.unclaimedRewards),
            r.rivalsRepository.setCacheTimestamp(Date.now(), 0 < e.maxAge ? e.maxAge : void 0)) : o.data = {
                unclaimedRewards: []
            },
            n.notify(o)
        }) : (o.success = !0,
        o.status = HttpStatusCode.OK,
        o.data = {
            unclaimedRewards: i === GameModesPrizeType.SEASONAL ? this.rivalsRepository.getSeasonalRewards() : this.rivalsRepository.getWeeklyRewards()
        },
        n.notify(o)),
        n
    }
    ,
    UTRivalsService.prototype.getRivalsHub = function() {
        var i = this
          , r = new EAObservable
          , n = new UTServiceResponseDTO;
        return this.rivalsDao.getRivalsHub().observe(this, function(t, e) {
            t.unobserve(i),
            n.success = e.success,
            n.status = e.status,
            n.error = e.error,
            n.success && JSUtils.isObject(e.response) ? n.data = e.response : n.data = null,
            r.notify(n)
        }),
        r
    }
    ,
    UTRivalsService.prototype.claimWeeklyRivalsRewardsById = function(t) {
        return this.claimById(t, GameModesPrizeType.WEEKLY)
    }
    ,
    UTRivalsService.prototype.claimSeasonalRivalsRewardsById = function(t) {
        return this.claimById(t, GameModesPrizeType.SEASONAL)
    }
    ,
    UTRivalsService.prototype.claimById = function(t, e) {
        var i = this
          , r = new EAObservable
          , n = new UTServiceResponseDTO;
        return this.rivalsDao.claimById(t, e).observe(this, function(t, e) {
            t.unobserve(i),
            n.success = e.success,
            n.status = e.status,
            n.error = e.error,
            n.success && JSUtils.isObject(e.response) ? (n.data = {
                rewards: e.response.rewards
            },
            i.reset()) : n.data = {
                rewards: []
            },
            r.notify(n)
        }),
        r
    }
    ,
    UTRivalsService
}(EAObject))
  , UTSBCRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTSBCRepository() {
        var t = e.call(this) || this;
        return t.ALL_CATEGORY = "All",
        t.FAVOURITE_CATEGORY = "Favourite",
        t.cacheExpiration = 0,
        t.categories = new EAHashTable,
        t.sets = new EAHashTable,
        t
    }
    return __extends(UTSBCRepository, e),
    UTSBCRepository.prototype.reset = function() {
        this.cacheExpiration = 0,
        this.categories.clear(),
        this.sets.clear()
    }
    ,
    UTSBCRepository.prototype.setCacheTimestamp = function(t) {
        this.cacheExpiration = t
    }
    ,
    UTSBCRepository.prototype.isCacheExpired = function() {
        return 0 === this.cacheExpiration || this.cacheExpiration < Math.round(Date.now() / 1e3)
    }
    ,
    UTSBCRepository.prototype.setCategories = function(t) {
        var e = this;
        t.forEach(function(t) {
            return e.categories.set(t.id, t)
        }),
        this.categories.set(this.ALL_CATEGORY, new UTSBCCategoryDTO(-2,-2,services.Localization.localize("sbc.categories.all"),SBCCategoryType.CUSTOM_ALL)),
        this.categories.set(this.FAVOURITE_CATEGORY, new UTSBCCategoryDTO(-1,-1,services.Localization.localize("sbc.categories.favourites"),SBCCategoryType.CUSTOM_FAVOURITE))
    }
    ,
    UTSBCRepository.prototype.setSBCSets = function(t) {
        var e = this
          , i = this.categories.get(this.ALL_CATEGORY)
          , r = this.categories.get(this.FAVOURITE_CATEGORY);
        i && (i.setIds = []),
        r && (r.setIds = []),
        i && r && t.forEach(function(t) {
            e.sets.set(t.id, t),
            i.setIds.push(t.id),
            t.isFavourite && !t.isComplete() && r.setIds.push(t.id)
        })
    }
    ,
    UTSBCRepository.prototype.addFavouriteSet = function(t) {
        var e = this.categories.get(this.FAVOURITE_CATEGORY);
        DebugUtils.Assert(JSUtils.isValid(e), "Unable to find SBC favourites category."),
        e && e.setIds.indexOf(t) < 0 && e.setIds.push(t)
    }
    ,
    UTSBCRepository.prototype.removeFavouriteSet = function(t) {
        var e = this.categories.get(this.FAVOURITE_CATEGORY)
          , i = e ? e.setIds.indexOf(t) : -1;
        DebugUtils.Assert(JSUtils.isValid(e), "Unable to find SBC favourites category."),
        e && 0 <= i && e.setIds.splice(i, 1)
    }
    ,
    UTSBCRepository.prototype.getCategories = function() {
        var r = this;
        this.categories.forEach(function(t) {
            t.displayable = !1;
            for (var e = 0; e < t.setIds.length; e++) {
                var i = r.sets.get(t.setIds[e]);
                if (i && i.isDisplayable()) {
                    t.displayable = !0;
                    break
                }
            }
        });
        var t = this.categories.get(this.FAVOURITE_CATEGORY);
        return t && (t.displayable = !0),
        this.categories.values().sort(function(t, e) {
            return JSUtils.sortCompare(t.priority, e.priority)
        })
    }
    ,
    UTSBCRepository.prototype.getSets = function() {
        return this.sets.values()
    }
    ,
    UTSBCRepository.prototype.getSetById = function(t) {
        return this.sets.get(t)
    }
    ,
    UTSBCRepository
}(EAObject))
  , UTSBCService = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTSBCService(t, e) {
        var i = r.call(this) || this;
        return i.repository = new UTSBCRepository,
        i.sbcDAO = t,
        i.itemRepository = e,
        i
    }
    return __extends(UTSBCService, r),
    UTSBCService.prototype.init = function() {
        r.prototype.init.call(this),
        getDefaultDispatcher().addObserver(AppNotification.ITEM_MOVE, this, this.nItemMoved),
        getDefaultDispatcher().addObserver(AppNotification.ITEM_DISCARD, this, this.nItemDiscarded)
    }
    ,
    UTSBCService.prototype.dealloc = function() {
        r.prototype.dealloc.call(this),
        getDefaultDispatcher().removeObserver(AppNotification.ITEM_MOVE, this),
        getDefaultDispatcher().removeObserver(AppNotification.ITEM_DISCARD, this)
    }
    ,
    UTSBCService.prototype.reset = function() {
        this.repository.reset()
    }
    ,
    UTSBCService.prototype.isCacheExpired = function() {
        return this.repository.isCacheExpired()
    }
    ,
    UTSBCService.prototype.getCachedSBCSquads = function() {
        return this.repository.getSets().reduce(function(e, t) {
            var i = t.getChallenges();
            return 0 < i.length && i.forEach(function(t) {
                t.squad && e.push(t.squad)
            }),
            e
        }, [])
    }
    ,
    UTSBCService.prototype.requestSets = function() {
        var r = this
          , n = new EAObservable
          , o = new UTServiceResponseDTO;
        return o.data = {
            categories: [],
            sets: []
        },
        services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.SBC_ENABLED) ? this.isCacheExpired() ? this.sbcDAO.getSets().observe(this, function(t, e) {
            var i;
            t.unobserve(r),
            o.success = e.success,
            o.status = e.status,
            o.error = e.error,
            e.success && JSUtils.isObject(e.response) ? (r.repository.setCategories(e.response.categories),
            r.repository.setSBCSets(e.response.sets),
            r.repository.setCacheTimestamp(Math.round(Date.now() / MS_PER_SECOND) + 300)) : (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && services.Configuration.setFeatureEnabled(UTServerSettingsRepository.KEY.SBC_ENABLED, !1),
            o.data = {
                categories: r.repository.getCategories(),
                sets: r.repository.getSets()
            },
            n.notify(o)
        }) : (o.success = !0,
        o.status = HttpStatusCode.NOT_MODIFIED,
        o.data.categories = this.repository.getCategories(),
        o.data.sets = this.repository.getSets(),
        n.notify(o)) : (o.status = UtasErrorCode.SERVICE_IS_DISABLED,
        o.success = !1,
        n.notify(o)),
        n
    }
    ,
    UTSBCService.prototype.loadChallenge = function(o) {
        var s = this
          , a = new EAObservable
          , l = new UTServiceResponseDTO;
        return services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.SBC_ENABLED) ? !this.repository.isCacheExpired() && JSUtils.isValid(o.squad) ? (l.success = !0,
        l.status = HttpStatusCode.OK,
        l.data = {
            squad: o.squad
        },
        a.notify(l)) : this.sbcDAO.loadChallenge(o.id, o.isInProgress()).observe(this, function(t, e) {
            var i;
            if (t.unobserve(s),
            l.success = e.success,
            l.status = e.status,
            l.error = e.error,
            l.data = {
                squad: null
            },
            l.success && JSUtils.isObject(e.response)) {
                var r = e.response.squad;
                l.data.squad = r,
                o.squad = r;
                var n = {
                    squad: o.squad
                };
                o.hasNotStarted() && (o.status = SBCChallengeStatus.IN_PROGRESS),
                o.onDataChange.notify(n)
            } else
                (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && services.Configuration.setFeatureEnabled(UTServerSettingsRepository.KEY.SBC_ENABLED, !1);
            a.notify(l)
        }) : (l.status = UtasErrorCode.SERVICE_IS_DISABLED,
        a.notify(l)),
        a
    }
    ,
    UTSBCService.prototype.saveChallenge = function(r) {
        var n = this
          , o = new EAObservable
          , s = new UTServiceResponseDTO;
        return services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.SBC_ENABLED) ? r.squad ? this.sbcDAO.saveChallenge(r.id, r.squad).observe(this, function(t, e) {
            var i;
            t.unobserve(n),
            s.success = e.success,
            s.status = e.status,
            s.error = e.error,
            s.data = e.response,
            s.success ? r.onSave.notify() : (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && services.Configuration.setFeatureEnabled(UTServerSettingsRepository.KEY.SBC_ENABLED, !1),
            o.notify(s)
        }) : (s.status = HttpStatusCode.BAD_REQUEST,
        s.success = !1,
        o.notify(s)) : (s.status = UtasErrorCode.SERVICE_IS_DISABLED,
        o.notify(s)),
        o
    }
    ,
    UTSBCService.prototype.submitChallenge = function(o, s, i) {
        var a = this
          , l = new EAObservable
          , c = new UTServiceResponseDTO;
        if (!services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.SBC_ENABLED))
            return c.status = UtasErrorCode.SERVICE_IS_DISABLED,
            l.notify(c),
            l;
        if (!o.squad)
            return c.status = HttpStatusCode.BAD_REQUEST,
            c.success = !1,
            l.notify(c),
            l;
        function kia(t, e) {
            if (t.unobserve(a),
            c.success = e.success,
            c.status = e.status,
            c.error = e.error,
            c.success && JSUtils.isObject(e.response)) {
                var i = e.response;
                c.data = {
                    challengeId: i.challengeId,
                    credits: i.credits || 0,
                    grantedChallengeAwards: i.grantedChallengeAwards || [],
                    objectiveUpdates: i.objectiveUpdates || null,
                    preOrderPacks: i.preOrderPacks || 0,
                    recoveredPacks: i.recoveredPacks || 0,
                    setId: i.setId,
                    setCompleted: !1
                },
                o.timesCompleted++,
                o.status = SBCChallengeStatus.COMPLETED,
                o.onDataChange.notify({
                    status: o.status,
                    timesCompleted: o.timesCompleted
                }),
                s.challengesCompletedCount++,
                c.data.setCompleted = s.challengesComplete(),
                c.data.setCompleted && (s.timesCompleted++,
                s.isRepeatable && !s.isComplete() ? (s.challengesCompletedCount = 0,
                s.getChallenges().forEach(function(t) {
                    return t.reset()
                })) : s.isFavourite && a.toggleFavouriteTag(s));
                var r = u.getFieldPlayers().map(function(t) {
                    return t.item
                });
                repositories.Item.remove(r),
                services.Squad.resetSquadsCache(),
                i.objectiveUpdates && getDefaultDispatcher().notify(AppNotification.OBJECTIVE_UPDATE, a, i.objectiveUpdates),
                s && s.repeatabilityMode !== SBCRepeatabilityMode.NON_REPEATABLE && 1 === s.timesCompleted && a.repository.reset()
            } else {
                var n = e.response;
                c.data = n
            }
            l.notify(c)
        }
        var u = o.squad;
        return this.saveChallenge(o).observe(this, function(t, e) {
            t.unobserve(a),
            e.success ? a.sbcDAO.submitChallenge(o.id, !!i).observe(a, kia) : (c.success = e.success,
            c.status = e.status,
            c.error = e.error,
            l.notify(c))
        }),
        l
    }
    ,
    UTSBCService.prototype.toggleFavouriteTag = function(r) {
        var n = this
          , o = new EAObservable
          , s = new UTServiceResponseDTO;
        return r instanceof UTSBCSetEntity ? this.sbcDAO.setFavouriteTag(r.id, !r.isFavourite).observe(this, function(t, e) {
            var i;
            t.unobserve(n),
            e.success ? (r.isFavourite = !r.isFavourite,
            r.isFavourite ? n.repository.addFavouriteSet(r.id) : n.repository.removeFavouriteSet(r.id)) : (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && services.Configuration.setFeatureEnabled(UTServerSettingsRepository.KEY.SBC_ENABLED, !1),
            s.success = e.success,
            s.status = e.status,
            s.error = e.error,
            s.data = {
                setId: r.id,
                isFavourite: r.isFavourite
            },
            o.notify(s)
        }) : (DebugUtils.Assert(!1, "Expected a valid SBC set entity when toggling favourite state."),
        s.success = !1,
        s.status = HttpStatusCode.BAD_REQUEST,
        s.data = {
            setId: 0,
            isFavourite: !1
        },
        o.notify(s)),
        o
    }
    ,
    UTSBCService.prototype.toggleFavouriteTagById = function(t) {
        var e = this.repository.getSetById(t);
        if (e)
            return this.toggleFavouriteTag(e);
        var i = new EAObservable
          , r = new UTServiceResponseDTO;
        return r.success = !1,
        r.status = HttpStatusCode.BAD_REQUEST,
        r.data = null,
        i.notify(r),
        i
    }
    ,
    UTSBCService.prototype.requestChallengesForSet = function(n) {
        var o = this
          , s = new EAObservable
          , a = new UTServiceResponseDTO;
        if (a.data = {
            challenges: []
        },
        !services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.SBC_ENABLED))
            return a.status = UtasErrorCode.SERVICE_IS_DISABLED,
            s.notify(a),
            s;
        var t = n.getChallenges();
        return 0 < t.length && !this.isCacheExpired() ? (a.success = !0,
        a.status = HttpStatusCode.NOT_MODIFIED,
        a.data.challenges = t,
        s.notify(a)) : this.sbcDAO.getChallengesForSet(n.id).observe(this, function(t, e) {
            var i;
            if (t.unobserve(o),
            a.success = e.success,
            a.status = e.status,
            a.error = e.error,
            a.data = {
                challenges: []
            },
            e.success && JSUtils.isObject(e.response)) {
                var r = o.repository.getSetById(n.id);
                a.data.challenges = e.response.challenges,
                null == r || r.setChallenges(a.data.challenges)
            } else
                (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && services.Configuration.setFeatureEnabled(UTServerSettingsRepository.KEY.SBC_ENABLED, !1);
            s.notify(a)
        }),
        s
    }
    ,
    UTSBCService.prototype.nItemMoved = function(t, e, i) {
        var r = this;
        if (i.itemIds && 0 < i.itemIds.length)
            if (i.destinationPile === ItemPile.CLUB) {
                var n = i.itemIds.reduce(function(t, e) {
                    var i = r.itemRepository.getClub().getItem(ItemType.PLAYER, ItemSubType.PLAYER, e);
                    return i && i.isValid() && t.push(i),
                    t
                }, []);
                this.replaceItemsInSquads(n)
            } else
                this.removeItemsById(i.itemIds)
    }
    ,
    UTSBCService.prototype.nItemDiscarded = function(t, e, i) {
        i.itemIds && 0 < i.itemIds.length && this.removeItemsById(i.itemIds)
    }
    ,
    UTSBCService.prototype.replaceItemsInSquads = function(t) {
        var e = this
          , r = this.getCachedSBCSquads();
        t.forEach(function(i) {
            r.forEach(function(t) {
                var e = t.containsDreamItem(i);
                0 <= e && t.addItemToSlot(e, i)
            }, e)
        }, this)
    }
    ,
    UTSBCService.prototype.removeItemsById = function(t) {
        var i = this.getCachedSBCSquads();
        t.forEach(function(e) {
            return i.forEach(function(t) {
                return t.removePlayerById(e)
            })
        })
    }
    ,
    UTSBCService
}(EAObject))
  , UTSquadBattlesEntityFactory = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
__assign = this && this.__assign || function() {
    return (__assign = Object.assign || function(t) {
        for (var e, i = 1, r = arguments.length; i < r; i++)
            for (var n in e = arguments[i])
                Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
        return t
    }
    ).apply(this, arguments)
}
,
function(i) {
    function UTSquadBattlesEntityFactory(t) {
        var e = i.call(this) || this;
        return e.rewardFactory = t,
        e
    }
    return __extends(UTSquadBattlesEntityFactory, i),
    UTSquadBattlesEntityFactory.prototype.createSquadBattlesEventEntity = function(t) {
        var e, i, r = this, n = null !== (i = null === (e = t.prizeTiers) || void 0 === e ? void 0 : e.map(function(e, t, i) {
            return r.createSquadBattlesTierEntity(e, i.find(function(t) {
                return t.tierType === SquadBattlesTierType.POINT_TIERS && t.tierLevel === e.tierLevel - 1
            }), i.find(function(t) {
                return t.tierType === SquadBattlesTierType.POINT_TIERS && t.tierLevel === e.tierLevel + 1
            }))
        })) && void 0 !== i ? i : [], o = __assign(__assign({}, t), {
            prizeTiers: n
        });
        return new UTSquadBattlesEventEntity(o)
    }
    ,
    UTSquadBattlesEntityFactory.prototype.createSquadBattlesTierEntity = function(t, e, i) {
        var r, n, o = this.rewardFactory.createRewardSetFromSquadBattlesData(t), s = {
            awardSetId: t.awardSetId,
            competitionId: t.competitionId,
            eventRewardSet: o,
            tierEnd: t.tierEnd,
            tierEndValue: e && (null == e ? void 0 : e.tierStartValue) ? (null == e ? void 0 : e.tierStartValue) - 1 : -1,
            tierLevel: t.tierLevel,
            tierStart: t.tierStart,
            previousTierStartPoints: null !== (r = null == i ? void 0 : i.tierStartValue) && void 0 !== r ? r : 0,
            tierStartValue: null !== (n = t.tierStartValue) && void 0 !== n ? n : -1,
            tierType: t.tierType
        };
        return new UTSquadBattlesEventTierEntity(s)
    }
    ,
    UTSquadBattlesEntityFactory
}(EAObject))
  , UTSquadBattlesEventRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTSquadBattlesEventRepository() {
        var t = e.call(this) || this;
        return t.currentEvent = null,
        t
    }
    return __extends(UTSquadBattlesEventRepository, e),
    UTSquadBattlesEventRepository.prototype.reset = function() {
        this.currentEvent = null,
        e.prototype.reset.call(this)
    }
    ,
    UTSquadBattlesEventRepository.prototype.setEvent = function(t) {
        this.currentEvent = t
    }
    ,
    UTSquadBattlesEventRepository.prototype.getEvent = function() {
        return this.currentEvent
    }
    ,
    UTSquadBattlesEventRepository
}(UTGameModesEventRepository));
NamespaceManager.Register("repositories"),
repositories.SquadBattles = new UTSquadBattlesEventRepository;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSquadBattlesDAO = function(n) {
    function UTSquadBattlesDAO(t, e, i) {
        var r = n.call(this) || this;
        return r.authDelegate = t,
        r.requestDelegate = e,
        r.rewardFactory = new UTRewardFactory(new UTItemEntityFactory),
        r.squadBattlesEntityFactory = new UTSquadBattlesEntityFactory(r.rewardFactory),
        r.squadBattlesRepo = i,
        r
    }
    return __extends(UTSquadBattlesDAO, n),
    UTSquadBattlesDAO.prototype.getHub = function(t) {
        var r = this
          , n = new EAObservable
          , e = new UTHttpRequest(this.authDelegate)
          , i = new UTHttpResponseDTO
          , o = this.squadBattlesRepo.getEvent();
        return !t && o && (null == o ? void 0 : o.prizeTiers.length) <= 1 && this.squadBattlesRepo.setDirty(),
        o && !this.squadBattlesRepo.isCacheExpired() ? (i.success = !0,
        i.status = HttpStatusCode.NOT_MODIFIED,
        i.response = {
            event: o
        },
        n.notify(i)) : (e.setPath("/ut/game/" + GAME_NAME + "/sqbt/user/hub"),
        t && e.setUrlVariables({
            scope: "mini"
        }),
        this.requestDelegate.send(e).observe(this, function(t, e) {
            t.unobserve(r);
            var i = new UTHttpResponseDTO;
            JSUtils.assignPropertyValues(e, i),
            e.success && e.response && !JSUtils.isString(e.response) ? (r.squadBattlesRepo.setDirty(),
            r.squadBattlesRepo.setCacheTimestamp(Date.now(), e.response.endTime),
            r.squadBattlesRepo.setEvent(r.squadBattlesEntityFactory.createSquadBattlesEventEntity(e.response)),
            i.response = {
                event: r.squadBattlesRepo.getEvent()
            }) : i.response = {
                event: null
            },
            n.notify(i)
        })),
        n
    }
    ,
    UTSquadBattlesDAO.prototype.claimRewards = function() {
        var n = this
          , o = new EAObservable
          , t = new UTHttpRequest(this.authDelegate);
        return t.setPath("/ut/game/" + GAME_NAME + "/sqbt/user/prize"),
        t.setRequestType(HttpRequestMethod.POST),
        this.requestDelegate.send(t).observe(this, function(t, e) {
            t.unobserve(n);
            var i = new UTHttpResponseDTO;
            if (JSUtils.assignPropertyValues(e, i),
            e.success && JSUtils.isObject(e.response) && e.response.awardedPrizes) {
                var r = e.response.awardedPrizes.reduce(function(t, e) {
                    return t.concat(e.awards.map(function(t) {
                        return n.rewardFactory.createRewardFromRewardData(t)
                    }))
                }, []);
                i.response = {
                    allClaimed: 0 === e.response.prizesInError.length,
                    rewards: [n.rewardFactory.createRewardSetFromRewards(r)]
                }
            } else
                i.response = {
                    allClaimed: !0,
                    rewards: []
                };
            n.squadBattlesRepo.setDirty(),
            o.notify(i)
        }),
        o
    }
    ,
    UTSquadBattlesDAO
}(EAObject)
  , UTSquadBattlesService = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTSquadBattlesService(t) {
        var e = i.call(this) || this;
        return e.squadBattlesDao = t,
        e
    }
    return __extends(UTSquadBattlesService, i),
    UTSquadBattlesService.prototype.reset = function() {
        repositories.SquadBattles.setDirty()
    }
    ,
    UTSquadBattlesService.prototype.requestCurrentEventReducedScope = function() {
        return this.requestCurrentEvent(!0)
    }
    ,
    UTSquadBattlesService.prototype.requestCurrentEventFullScope = function() {
        return this.requestCurrentEvent(!1)
    }
    ,
    UTSquadBattlesService.prototype.requestCurrentEvent = function(t) {
        var i = this
          , r = new EAObservable
          , n = new UTServiceResponseDTO;
        return n.data = {
            event: null
        },
        this.squadBattlesDao.getHub(t).observe(this, function(t, e) {
            t.unobserve(i),
            n.success = e.success,
            n.status = e.status,
            n.error = e.error,
            JSUtils.isObject(e.response) && (n.data = e.response),
            r.notify(n)
        }),
        r
    }
    ,
    UTSquadBattlesService.prototype.claimRewards = function() {
        return this.squadBattlesDao.claimRewards()
    }
    ,
    UTSquadBattlesService
}(EAObject))
  , UTTOTWSquadRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTTOTWSquadRepository() {
        var t = e.call(this) || this;
        return t.cacheTimestamp = 0,
        t.squadCollection = new EAIterator([]),
        t
    }
    return __extends(UTTOTWSquadRepository, e),
    UTTOTWSquadRepository.prototype.reset = function() {
        this.cacheTimestamp = 0,
        this.squadCollection.resetCollection([])
    }
    ,
    UTTOTWSquadRepository.prototype.setSquadList = function(t) {
        this.squadCollection.resetCollection(t)
    }
    ,
    UTTOTWSquadRepository.prototype.getSquadList = function() {
        return this.squadCollection.values()
    }
    ,
    UTTOTWSquadRepository.prototype.isCacheExpired = function() {
        return this.cacheTimestamp < Date.now()
    }
    ,
    UTTOTWSquadRepository.prototype.setCacheTimestamp = function(t, e) {
        this.cacheTimestamp = t + (JSUtils.isNumber(e) ? e * MS_PER_SECOND : 36e6)
    }
    ,
    UTTOTWSquadRepository
}(EAObject))
  , UTSquadService = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTSquadService(t) {
        var e = i.call(this) || this;
        return e.activeSquad = 0,
        e.squadDao = t,
        e.totwRepository = new UTTOTWSquadRepository,
        e.unauthenticatedShowOffId = "",
        getDefaultDispatcher().addObserver(AppNotification.ITEM_MOVE, e, e.nItemTransfered),
        e
    }
    return __extends(UTSquadService, i),
    UTSquadService.prototype.dealloc = function() {
        i.prototype.dealloc.call(this),
        getDefaultDispatcher().removeObserver(AppNotification.ITEM_MOVE, this)
    }
    ,
    UTSquadService.prototype.reset = function() {
        this.activeSquad = 0,
        repositories.Squad.reset(),
        this.totwRepository.reset()
    }
    ,
    UTSquadService.prototype.resetSquadsCache = function() {
        repositories.Squad.setDirty()
    }
    ,
    UTSquadService.prototype.getMaxSquads = function() {
        return services.Configuration.maxAllowedSquads
    }
    ,
    UTSquadService.prototype.setMaxSquads = function(t) {
        services.Configuration.maxAllowedSquads = t
    }
    ,
    UTSquadService.prototype.getActiveSquadId = function() {
        return this.activeSquad
    }
    ,
    UTSquadService.prototype.setActiveSquadId = function(e) {
        var t, i = null === (t = services.User.getUser()) || void 0 === t ? void 0 : t.selectedPersona;
        i && repositories.Squad.getSquads(i).forEach(function(t) {
            return t.setActive(t.getId() === e)
        }),
        this.activeSquad = e
    }
    ,
    UTSquadService.prototype.hasExternalShowOffSquad = function() {
        return !JSUtils.isEmpty(this.unauthenticatedShowOffId)
    }
    ,
    UTSquadService.prototype.requestSquadList = function() {
        var t, r = this, n = new EAObservable, o = new UTServiceResponseDTO, s = null === (t = services.User.getUser()) || void 0 === t ? void 0 : t.selectedPersona;
        if (!JSUtils.isNumber(s))
            return o.status = HttpStatusCode.UNAUTHORIZED,
            n.notify(o),
            n;
        if (repositories.Squad.isSquadListCacheExpired())
            return this.squadDao.getSquadList().observe(this, function(t, e) {
                t.unobserve(r),
                o.success = e.success,
                o.status = e.status,
                o.error = e.error,
                e.success && JSUtils.isObject(e.response) && (e.response.squads.forEach(function(t) {
                    return repositories.Squad.set(s, t)
                }),
                repositories.Squad.setSquadListCacheTimestamp(Date.now(), 0 < e.maxAge ? e.maxAge : void 0),
                r.setActiveSquadId(e.response.activeSquadId));
                var i = repositories.Squad.getSquads(s);
                o.data = {
                    activeSquadId: r.activeSquad,
                    listFull: i.length >= r.getMaxSquads(),
                    squads: i
                },
                n.notify(o)
            }),
            n;
        var e = repositories.Squad.getSquads(s);
        return o.success = !0,
        o.status = HttpStatusCode.NOT_MODIFIED,
        o.data = {
            activeSquadId: this.activeSquad,
            listFull: e.length >= this.getMaxSquads(),
            squads: e
        },
        n.notify(o),
        n
    }
    ,
    UTSquadService.prototype.requestSquadById = function(t, r) {
        var e, n = this, o = new EAObservable, s = new UTServiceResponseDTO;
        if (JSUtils.isNumber(r) || (r = null === (e = services.User.getUser()) || void 0 === e ? void 0 : e.selectedPersona),
        !JSUtils.isNumber(r))
            return s.status = HttpStatusCode.UNAUTHORIZED,
            o.notify(s),
            o;
        var i = repositories.Squad.getSquadById(r, t);
        return i && !i.isCacheExpired() ? (s.success = !0,
        s.status = HttpStatusCode.NOT_MODIFIED,
        s.data = {
            squad: i
        },
        o.notify(s)) : this.squadDao.getSquadById(t, r).observe(this, function(t, e) {
            if (t.unobserve(n),
            s.success = e.success,
            s.status = e.status,
            s.error = e.error,
            e.success && JSUtils.isObject(e.response) && JSUtils.isNumber(r)) {
                DebugUtils.Assert(JSUtils.isValid(e.response.squad), "Expected a squad entity."),
                e.response.squad && (repositories.Squad.set(r, e.response.squad),
                r <= 0 && n.setActiveSquadId(e.response.squad.getId()));
                var i = e.response.squad ? repositories.Squad.getSquadById(r, e.response.squad.getId()) : null;
                null == i || i.setCacheTimestamp(Date.now()),
                s.data = {
                    squad: i
                }
            } else
                s.data = {
                    squad: null
                };
            o.notify(s)
        }),
        o
    }
    ,
    UTSquadService.prototype.create = function(t, e, i, r) {
        var o = this
          , s = new EAObservable
          , a = new UTServiceResponseDTO;
        return this.squadDao.create(t, e, i, r).observe(this, function(t, e) {
            var i;
            if (t.unobserve(o),
            a.status = e.status,
            a.success = e.success,
            a.error = e.error,
            e.success && JSUtils.isObject(e.response)) {
                var r = null === (i = services.User.getUser()) || void 0 === i ? void 0 : i.selectedPersona
                  , n = e.response.squad;
                a.data = {
                    squad: e.response.squad
                },
                r && n && repositories.Squad.set(r, n),
                null == n || n.setCacheTimestamp(0),
                getDefaultDispatcher().notify(AppNotification.SQUAD_CREATE, o, a.data)
            } else
                a.data = {
                    squad: null
                };
            s.notify(a)
        }),
        s
    }
    ,
    UTSquadService.prototype.copy = function(t, e) {
        var o = this
          , s = new EAObservable
          , a = new UTServiceResponseDTO;
        return this.squadDao.copy(t, e).observe(this, function(t, e) {
            var i;
            if (t.unobserve(o),
            a.status = e.status,
            a.success = e.success,
            a.error = e.error,
            e.success && JSUtils.isObject(e.response)) {
                var r = null === (i = services.User.getUser()) || void 0 === i ? void 0 : i.selectedPersona
                  , n = e.response.squad;
                a.data = {
                    squad: n
                },
                r && n && repositories.Squad.set(r, n),
                null == n || n.setCacheTimestamp(0),
                getDefaultDispatcher().notify(AppNotification.SQUAD_CREATE, o, a.data)
            } else
                a.data = {
                    squad: null
                };
            s.notify(a)
        }),
        s
    }
    ,
    UTSquadService.prototype.duplicate = function(c) {
        var u = this
          , p = new EAObservable;
        return services.Squad.requestSquadList().observe(this, function(t, e) {
            var i, r, n, o;
            t.unobserve(u);
            var s = null !== (r = null === (i = e.data) || void 0 === i ? void 0 : i.squads) && void 0 !== r ? r : []
              , a = c.getPlayers().map(function(t) {
                return t.getItem()
            })
              , l = c.getName();
            TextUtils.squadNameExists(l, s) && (l = TextUtils.createSquadNameCopy(l, s)),
            u.create(l, null !== (o = null === (n = c.getFormation()) || void 0 === n ? void 0 : n.getName()) && void 0 !== o ? o : "", a, !0).observe(u, function(t, e) {
                t.unobserve(u),
                p.notify(e)
            })
        }),
        p
    }
    ,
    UTSquadService.prototype.rename = function(i, n) {
        var o = this
          , s = new EAObservable
          , a = new UTServiceResponseDTO;
        return this.squadDao.rename(i, n).observe(this, function(t, e) {
            t.unobserve(o),
            a.status = e.status,
            a.success = e.success,
            a.error = e.error,
            e.success ? o.requestSquadById(i).observe(o, function(t, e) {
                var i, r;
                t.unobserve(o),
                e.success && JSUtils.isObject(e.data) ? (null === (i = e.data.squad) || void 0 === i || i.setName(n, []),
                a.data = {
                    squad: e.data.squad
                }) : a.data = {
                    squad: null
                },
                s.notify(a),
                (null === (r = e.data) || void 0 === r ? void 0 : r.squad) && getDefaultDispatcher().notify(AppNotification.SQUAD_SAVE, o, {
                    squad: e.data.squad
                })
            }) : s.notify(a)
        }),
        s
    }
    ,
    UTSquadService.prototype.remove = function(n) {
        var o = this
          , s = new EAObservable
          , a = new UTServiceResponseDTO;
        return this.squadDao.remove(n).observe(this, function(t, e) {
            var i;
            if (t.unobserve(o),
            a.success = e.success,
            a.status = e.status,
            a.error = e.error,
            a.data = {
                id: n
            },
            e.success) {
                var r = null === (i = services.User.getUser()) || void 0 === i ? void 0 : i.selectedPersona;
                r && repositories.Squad.removeSquad(r, n),
                repositories.Squad.setDirty(),
                s.notify(a),
                getDefaultDispatcher().notify(AppNotification.SQUAD_DELETE, o, a)
            } else
                s.notify(a)
        }),
        s
    }
    ,
    UTSquadService.prototype.addShowOff = function(r) {
        function gna(t, e) {
            if (t.unobserve(l),
            u.success = e.success,
            u.status = e.status,
            u.error = e.error,
            e.success && JSUtils.isObject(e.response)) {
                var a = e.response;
                l.requestSquadById(r).observe(l, function(t, e) {
                    var i, r, n;
                    if (t.unobserve(l),
                    e.success && JSUtils.isObject(e.data) && e.data.squad) {
                        var o = null !== (n = null === (r = null === (i = services.User.getUser()) || void 0 === i ? void 0 : i.getSelectedPersona()) || void 0 === r ? void 0 : r.sku) && void 0 !== n ? n : ""
                          , s = new UTShowOffSquadDTO(e.data.squad,a);
                        u.data = {
                            url: s.url + ":" + o
                        }
                    }
                    c.notify(u)
                })
            } else
                c.notify(u)
        }
        function hna(t, e) {
            t.unobserve(l),
            e.success ? l.squadDao.createShowOffSquad(r).observe(l, gna) : (u.status = e.status,
            c.notify(u))
        }
        var l = this
          , c = new EAObservable
          , u = new UTServiceResponseDTO;
        return this.squadDao.getShowOffSquads().observe(this, function(t, e) {
            if (t.unobserve(l),
            e.success && JSUtils.isObject(e.response))
                if (10 <= e.response.showOffSquads.length) {
                    var i = e.response.showOffSquads.map(function(t) {
                        return t.id
                    });
                    l.deleteShowOff(Math.min.apply(Math, i)).observe(l, hna)
                } else
                    l.squadDao.createShowOffSquad(r).observe(l, gna);
            else
                u.status = e.status,
                c.notify(u)
        }),
        c
    }
    ,
    UTSquadService.prototype.deleteShowOff = function(t) {
        var i = this
          , r = new EAObservable
          , n = new UTServiceResponseDTO;
        return this.squadDao.deleteShowOffSquad(t).observe(this, function(t, e) {
            t.unobserve(i),
            n.success = e.success,
            n.status = e.status,
            n.error = e.error,
            r.notify(n)
        }),
        r
    }
    ,
    UTSquadService.prototype.loadShowOffSquad = function() {
        var n = this
          , o = new EAObservable
          , s = new UTServiceResponseDTO
          , t = decodeURIComponent(this.unauthenticatedShowOffId).split(":");
        if (s.data = {
            showOff: null
        },
        !this.hasExternalShowOffSquad() || 2 !== t.length)
            return s.status = HttpStatusCode.BAD_REQUEST,
            o.notify(s),
            o;
        function Lna(t) {
            n.squadDao.getShowOffSquad(t, e).observe(n, function(t, e) {
                t.unobserve(n),
                n.unauthenticatedShowOffId = "",
                s.success = e.success,
                s.status = e.status,
                s.error = e.error,
                s.data = {
                    showOff: JSUtils.isObject(e.response) ? e.response.showOff : null
                },
                o.notify(s)
            })
        }
        var e = t[0]
          , a = t[1]
          , i = services.Authentication.getServerShardBySKU(a);
        return i ? Lna(i) : services.Authentication.requestServerShards().observe(this, function(t, e) {
            if (t.unobserve(n),
            e.success && JSUtils.isObject(e.data) && 0 < e.data.shards.length) {
                for (var i in e.data.shards) {
                    var r = e.data.shards[i];
                    if (r.supportsSKU(a))
                        return void Lna(r)
                }
                n.unauthenticatedShowOffId = "",
                o.notify(s)
            } else
                n.unauthenticatedShowOffId = "",
                s.status = e.status,
                o.notify(s)
        }),
        o
    }
    ,
    UTSquadService.prototype.setActiveSquad = function(t) {
        var i = this
          , r = new EAObservable
          , n = new UTServiceResponseDTO;
        return this.squadDao.getSquadById(t, -1).observe(this, function(t, e) {
            t.unobserve(i),
            n.success = e.success,
            n.status = e.status,
            n.error = e.error,
            e.success && JSUtils.isObject(e.response) && e.response.squad && i.setActiveSquadId(e.response.squad.getId()),
            r.notify(n)
        }),
        r
    }
    ,
    UTSquadService.prototype.requestSquadByType = function(t) {
        var e, r = this, n = new EAObservable, o = new UTServiceResponseDTO, s = null === (e = services.User.getUser()) || void 0 === e ? void 0 : e.selectedPersona;
        if (!JSUtils.isNumber(s))
            return o.status = HttpStatusCode.UNAUTHORIZED,
            o.data = {
                squad: null
            },
            n.notify(o),
            n;
        if ("active" === t) {
            var i = repositories.Squad.getSquadById(s, this.activeSquad);
            i && !i.isCacheExpired() ? (o.success = !0,
            o.status = HttpStatusCode.NOT_MODIFIED,
            o.data = {
                squad: i
            },
            n.notify(o)) : this.squadDao.getSquadByType(t).observe(this, function(t, e) {
                if (t.unobserve(r),
                o.success = e.success,
                o.status = e.status,
                o.error = e.error,
                e.success && JSUtils.isNumber(s) && JSUtils.isObject(e.response))
                    if (DebugUtils.Assert(JSUtils.isValid(e.response.squad), "Expected a squad entity."),
                    e.response.squad) {
                        repositories.Squad.set(s, e.response.squad);
                        var i = repositories.Squad.getSquadById(s, e.response.squad.getId());
                        null == i || i.setCacheTimestamp(Date.now()),
                        o.data = {
                            squad: i
                        }
                    } else
                        o.data = {
                            squad: null
                        };
                else
                    o.data = {
                        squad: null
                    };
                n.notify(o)
            })
        } else
            o.status = HttpStatusCode.BAD_REQUEST,
            n.notify(o);
        return n
    }
    ,
    UTSquadService.prototype.requestTOTWHistory = function() {
        var i = this
          , r = new EAObservable
          , n = new UTServiceResponseDTO;
        return this.totwRepository.isCacheExpired() ? this.squadDao.getTOTWHistory().observe(this, function(t, e) {
            t.unobserve(i),
            n.success = e.success,
            n.status = e.status,
            n.error = e.error,
            e.success && JSUtils.isObject(e.response) && (services.Configuration.setFeatureEnabled(UTServerSettingsRepository.KEY.TOTW_HISTORY_ENABLED, !0),
            n.data = {
                squads: e.response.squads
            },
            i.totwRepository.setSquadList(e.response.squads),
            i.totwRepository.setCacheTimestamp(Date.now(), 0 < e.maxAge ? e.maxAge : void 0)),
            r.notify(n)
        }) : (n.success = !0,
        n.status = HttpStatusCode.NOT_MODIFIED,
        n.data = {
            squads: this.totwRepository.getSquadList()
        },
        r.notify(n)),
        r
    }
    ,
    UTSquadService.prototype.requestTOTWSquad = function(t) {
        var i = this
          , r = new EAObservable
          , n = new UTServiceResponseDTO;
        return this.squadDao.getTOTWSquad(t).observe(this, function(t, e) {
            t.unobserve(i),
            n.success = e.success,
            n.status = e.status,
            n.error = e.error,
            e.success && JSUtils.isObject(e.response) ? n.data = {
                squad: e.response.squad
            } : n.data = {
                squad: null
            },
            r.notify(n)
        }),
        r
    }
    ,
    UTSquadService.prototype.removeItemsFromSquads = function(r) {
        function uoa(t, e) {
            (e.isPlayer() || e.isManager()) && t.forEach(function(t) {
                t.containsItem(e, !0) && t.removeItem(e)
            })
        }
        var n = this;
        this.requestSquadList().observe(this, function(t, e) {
            if (t.unobserve(n),
            e.success && JSUtils.isObject(e.data)) {
                var i = e.data.squads;
                Array.isArray(r) ? r.forEach(function(t) {
                    return uoa(i, t)
                }) : uoa(i, r)
            }
        })
    }
    ,
    UTSquadService.prototype.removePlayerByIdFromSquads = function(e) {
        var t, i = null === (t = services.User.getUser()) || void 0 === t ? void 0 : t.selectedPersona;
        i && repositories.Squad.getSquads(i).forEach(function(t) {
            return t.removePlayerById(e)
        })
    }
    ,
    UTSquadService.prototype.nItemTransfered = function(t, e, i) {
        if (i.destinationPile === ItemPile.TRANSFER) {
            var r = i.itemIds[0];
            this.removePlayerByIdFromSquads(r)
        }
    }
    ,
    UTSquadService
}(EAObject))
  , UTStoreService = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(s) {
    function UTStoreService(t, e, i, r, n) {
        var o = s.call(this) || this;
        return o.storeDao = t,
        o.userService = e,
        o.configService = i,
        o.mtxService = r,
        o.locService = n,
        o
    }
    return __extends(UTStoreService, s),
    UTStoreService.prototype.reset = function() {}
    ,
    UTStoreService.prototype.getPacks = function(t, e, i) {
        var r = this
          , n = this.storeDao.getPacks(t, e, i);
        return n.observe(this, function(t, e) {
            var i;
            t.unobserve(r),
            (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && r.setStoreEnabled(!1),
            JSUtils.isObject(e.response) && (JSUtils.isBoolean(e.response.duplicatesEnabled) && r.setStoreDuplicateChecksEnabled(e.response.duplicatesEnabled),
            JSUtils.isBoolean(e.response.previewsEnabled) && r.setStorePreviewsEnabled(e.response.previewsEnabled))
        }),
        n
    }
    ,
    UTStoreService.prototype.getCategories = function() {
        var r = this
          , t = this.storeDao.getStoreCategories();
        return t.observe(this, function(t, e) {
            var i;
            t.unobserve(r),
            (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && r.configService.setFeatureEnabled(UTServerSettingsRepository.KEY.STORE_ENABLED, !1)
        }),
        t
    }
    ,
    UTStoreService.prototype.hasMobileMTXSupport = function() {
        var t, e, i, r = null === (e = null === (t = this.userService) || void 0 === t ? void 0 : t.getUser()) || void 0 === e ? void 0 : e.getSelectedPersona();
        return !(!isAndroid() || null === (i = null == r ? void 0 : r.isPC) || void 0 === i || !i)
    }
    ,
    UTStoreService.prototype.hasMobileMTXAccess = function() {
        return isIOS() ? this.isMobileMTXEnabled() && !this.isOriginAccess() : this.isMobileMTXEnabled()
    }
    ,
    UTStoreService.prototype.isMobileMTXEnabled = function() {
        var t, e;
        return !!this.hasMobileMTXSupport() && ((null === (t = this.mtxService) || void 0 === t ? void 0 : t.isNimbleMTXEnabled()) && (null === (e = this.mtxService) || void 0 === e ? void 0 : e.isMobileMTXEnabled()))
    }
    ,
    UTStoreService.prototype.isOriginAccess = function() {
        var t, e, i, r = null === (e = null === (t = this.userService) || void 0 === t ? void 0 : t.getUser()) || void 0 === e ? void 0 : e.getSelectedPersona();
        return null !== (i = null == r ? void 0 : r.hasOriginAccess) && void 0 !== i && i
    }
    ,
    UTStoreService.prototype.isStoreEnabled = function() {
        return !(!this.configService.checkFeatureEnabled(UTServerSettingsRepository.KEY.STORE_ENABLED) || !this.locService.storeLocLoaded)
    }
    ,
    UTStoreService.prototype.setStoreEnabled = function(t) {
        this.configService.setFeatureEnabled(UTServerSettingsRepository.KEY.STORE_ENABLED, t)
    }
    ,
    UTStoreService.prototype.isStorePreviewsEnabled = function() {
        return !!this.configService.checkFeatureEnabled(UTServerSettingsRepository.KEY.STORE_PREVIEWS_ENABLED)
    }
    ,
    UTStoreService.prototype.setStorePreviewsEnabled = function(t) {
        this.configService.setFeatureEnabled(UTServerSettingsRepository.KEY.STORE_PREVIEWS_ENABLED, t)
    }
    ,
    UTStoreService.prototype.isStoreDuplicateChecksEnabled = function() {
        return !!this.configService.checkFeatureEnabled(UTServerSettingsRepository.KEY.STORE_DUPLICATE_CHECKS_ENABLED)
    }
    ,
    UTStoreService.prototype.setStoreDuplicateChecksEnabled = function(t) {
        this.configService.setFeatureEnabled(UTServerSettingsRepository.KEY.STORE_DUPLICATE_CHECKS_ENABLED, t)
    }
    ,
    UTStoreService.prototype.isCoinsEnabled = function() {
        return this.configService.checkFeatureEnabled(UTServerSettingsRepository.KEY.CURRENCY_COINS_ENABLED)
    }
    ,
    UTStoreService.prototype.setCoinsEnabled = function(t) {
        this.configService.setFeatureEnabled(UTServerSettingsRepository.KEY.CURRENCY_COINS_ENABLED, t)
    }
    ,
    UTStoreService.prototype.hasPointsSpendingAccess = function() {
        var t, e = this.userService.getUser();
        return (null === (t = null == e ? void 0 : e.getSelectedPersona()) || void 0 === t ? void 0 : t.isPC) ? !(null == e ? void 0 : e.hasUnrecoveredFIFAPointsTransaction) && this.mtxService.isMTXEnabled() && this.isPointsEnabled() : this.isPointsEnabled()
    }
    ,
    UTStoreService.prototype.isPointsEnabled = function() {
        return this.configService.checkFeatureEnabled(UTServerSettingsRepository.KEY.CURRENCY_POINTS_ENABLED)
    }
    ,
    UTStoreService.prototype.setPointsEnabled = function(t) {
        this.configService.setFeatureEnabled(UTServerSettingsRepository.KEY.CURRENCY_POINTS_ENABLED, t)
    }
    ,
    UTStoreService.prototype.isPackOddsEnabled = function() {
        return this.configService.checkFeatureEnabled(UTServerSettingsRepository.KEY.PACK_ODDS_ENABLED)
    }
    ,
    UTStoreService.prototype.setPackOddsEnabled = function(t) {
        this.configService.setFeatureEnabled(UTServerSettingsRepository.KEY.PACK_ODDS_ENABLED, t)
    }
    ,
    UTStoreService
}(EAObject))
  , UTScreenLoadDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTScreenLoadDTO() {
        var t = e.call(this) || this;
        return t.originScreen = "",
        t.destinationScreen = "",
        t.originTimestamp = 0,
        t.destinationTimestamp = 0,
        t.apiCalls = [],
        t.apiReturns = [],
        t
    }
    return __extends(UTScreenLoadDTO, e),
    UTScreenLoadDTO
}(EAObject));
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
NamespaceManager.Register("services");
var UTMetricsService = function(e) {
    function UTMetricsService() {
        var t = e.call(this) || this;
        return t.requestMetrics = [],
        t.screenLoadStats = [],
        t.startTimestamp = 0,
        t
    }
    return __extends(UTMetricsService, e),
    UTMetricsService.prototype.reset = function() {
        this.screenLoadStats = []
    }
    ,
    UTMetricsService.prototype.startSession = function() {
        this.requestMetrics = [],
        this.startTimestamp = Date.now()
    }
    ,
    UTMetricsService.prototype.getSessionDuration = function() {
        return Math.ceil((Date.now() - this.startTimestamp) / MS_PER_SECOND)
    }
    ,
    UTMetricsService.prototype.addRequestMetrics = function(t) {
        this.requestMetrics.push(t)
    }
    ,
    UTMetricsService.prototype.getRequestCount = function() {
        return this.requestMetrics.length
    }
    ,
    UTMetricsService.prototype.getRequestData = function() {
        return this.requestMetrics.map(function(t) {
            return {
                requestType: t.destinationMethod,
                timestamp: t.timestamp,
                url: t.destinationURL
            }
        })
    }
    ,
    UTMetricsService.prototype.getRequestsPerSecond = function() {
        return this.getRequestCount() / this.getSessionDuration()
    }
    ,
    UTMetricsService.prototype.getRequestCountByDestination = function(e) {
        return this.requestMetrics.filter(function(t) {
            return t.destination === e
        }).length
    }
    ,
    UTMetricsService.prototype.getTotalDataSent = function() {
        return this.requestMetrics.reduce(function(t, e) {
            return t + e.payloadSentSize
        }, 0)
    }
    ,
    UTMetricsService.prototype.getDataSentByDestination = function(e) {
        return this.requestMetrics.filter(function(t) {
            return t.destination === e
        }).reduce(function(t, e) {
            return t + e.payloadSentSize
        }, 0)
    }
    ,
    UTMetricsService.prototype.getTotalDataReceived = function() {
        return this.requestMetrics.reduce(function(t, e) {
            return t + e.payloadReceivedSize
        }, 0)
    }
    ,
    UTMetricsService.prototype.getDataReceivedByDestination = function(e) {
        return this.requestMetrics.filter(function(t) {
            return t.destination === e
        }).reduce(function(t, e) {
            return t + e.payloadReceivedSize
        }, 0)
    }
    ,
    UTMetricsService.prototype.getLastRequestTimeByDestination = function(e) {
        var t = this.requestMetrics.filter(function(t) {
            return t.destination === e
        })
          , i = t[t.length - 1];
        return i ? i.timestamp : 0
    }
    ,
    UTMetricsService.prototype.getStartTime = function() {
        return new Date(this.startTimestamp).toLocaleTimeString()
    }
    ,
    UTMetricsService.prototype.getLastServerCallTime = function() {
        var t = this.requestMetrics[this.requestMetrics.length - 1];
        return t ? new Date(t.timestamp).toLocaleTimeString() : "00:00:00"
    }
    ,
    UTMetricsService.prototype.getListByAPI = function() {
        var e = {};
        return this.requestMetrics.forEach(function(t) {
            e.hasOwnProperty(t.destinationURL) || (e[t.destinationURL] = []),
            e[t.destinationURL].push(t)
        }),
        e
    }
    ,
    UTMetricsService.prototype.getTotalRPUPS = function() {
        return this.calculateRPUPS(this.getRequestCount())
    }
    ,
    UTMetricsService.prototype.getRPUPSByDestination = function(t) {
        return this.calculateRPUPS(this.getRequestCountByDestination(t))
    }
    ,
    UTMetricsService.prototype.getRPUPSPerAPI = function(t) {
        return this.calculateRPUPS(t.length)
    }
    ,
    UTMetricsService.prototype.calculateRPUPS = function(t) {
        return t / ((this.requestMetrics[this.requestMetrics.length - 1].timestamp - this.startTimestamp) / MS_PER_SECOND)
    }
    ,
    UTMetricsService.prototype.registerOriginScreen = function(t, e) {
        var i = new UTScreenLoadDTO;
        i.originScreen = t,
        i.originTimestamp = e,
        this.screenLoadStats.push(i)
    }
    ,
    UTMetricsService.prototype.registerHttpRequest = function(n) {
        var o = this
          , t = this.screenLoadStats.length - 1
          , e = {
            url: n.getUrl(),
            timestamp: Date.now()
        };
        if (0 <= t) {
            this.screenLoadStats[t].apiCalls.push(e)
        } else {
            var i = new UTScreenLoadDTO;
            i.originScreen = "Orphaned Request",
            i.originTimestamp = Date.now(),
            i.apiCalls.push(e),
            this.screenLoadStats.push(i)
        }
        n.observe(this, function(t, e) {
            t.unobserve(o);
            var i = {
                url: 0 < t.getUrl().length ? n.getUrl() : n.getResponseUrl(),
                timestamp: Date.now()
            }
              , r = o.screenLoadStats.length - 1;
            0 <= r && o.screenLoadStats[r].apiReturns.push(i)
        })
    }
    ,
    UTMetricsService.prototype.registerDestinationScreen = function(t, e) {
        var i = this.screenLoadStats.length - 1;
        if (0 <= i) {
            var r = this.screenLoadStats[i];
            r.destinationScreen = t,
            r.destinationTimestamp = e
        }
    }
    ,
    UTMetricsService.prototype.getScreenLoadData = function() {
        var n = "[" + new Date + "]\n";
        return this.screenLoadStats.forEach(function(t) {
            var e = t.originScreen + ", " + t.destinationScreen + ", " + (t.destinationTimestamp - t.originTimestamp) / 1e3 + "s";
            n += e + "\n";
            for (var i = 0; i < t.apiCalls.length; i++)
                if (t.apiReturns[i] && t.apiCalls[i]) {
                    var r = (t.apiReturns[i].timestamp - t.apiCalls[i].timestamp) / 1e3;
                    n += e + ", " + t.apiReturns[i].url + ", " + r + "s\n"
                } else
                    console.warn("[WARN] Mismatch between api calls and returns!"),
                    console.log("Calls made: ", t.apiCalls),
                    console.log("Calls completed: ", t.apiReturns)
        }),
        this.reset(),
        n
    }
    ,
    UTMetricsService
}(EAObject);
services.Metrics = new UTMetricsService;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
NamespaceManager.Register("services");
var UTUtasRequestQueueService = function(e) {
    function UTUtasRequestQueueService() {
        var t = e.call(this) || this;
        return t.currentRequests = [],
        t.queue = [],
        t
    }
    return __extends(UTUtasRequestQueueService, e),
    Object.defineProperty(UTUtasRequestQueueService.prototype, "maxConcurrentRequests", {
        get: function() {
            var t = UTServerSettingsRepository.KEY.MAX_CONCURRENT_REQUESTS
              , e = services.Configuration.getFeatureSetting(t);
            return 0 < e ? e : 5
        },
        enumerable: !1,
        configurable: !0
    }),
    UTUtasRequestQueueService.prototype.send = function(e) {
        var t = new UTRequestMetricsVO
          , i = this.currentRequests.concat(this.queue.map(function(t) {
            return t.request
        })).find(function(t) {
            return t.compare(e)
        });
        return i || (t.destination = e.getBaseUrl(),
        t.destinationURL = e.getUrl(),
        t.destinationMethod = e.requestType,
        this.queue.push({
            request: e,
            metrics: t
        }),
        this.currentRequests.length < this.maxConcurrentRequests && this.next(),
        e)
    }
    ,
    UTUtasRequestQueueService.prototype.next = function() {
        var i = this;
        if (!(this.queue.length < 1)) {
            var r = this.queue.shift();
            r && (r.metrics.timestamp = Date.now(),
            r.request.observe(this, function(t, e) {
                return i.onRequestFinished(t, e, r.metrics)
            }),
            r.request.send(),
            this.currentRequests.push(r.request))
        }
    }
    ,
    UTUtasRequestQueueService.prototype.onRequestFinished = function(t, e, i) {
        var r, n = "";
        t.unobserve(this),
        n = JSUtils.isObject(e.response) ? JSON.stringify(e.response) : null !== (r = e.response) && void 0 !== r ? r : "",
        i.payloadSentSize = t.getRequestBody().length,
        i.payloadReceivedSize = n.length,
        services.Metrics.addRequestMetrics(i),
        this.currentRequests.splice(this.currentRequests.indexOf(t), 1),
        this.next()
    }
    ,
    UTUtasRequestQueueService
}(EAObject);
services.UTUtasRequestQueue = new UTUtasRequestQueueService;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPopupDTO = function(n) {
    function UTPopupDTO(t, e, i) {
        var r = n.call(this) || this;
        return r.title = t,
        r.message = e,
        r.buttonOptions = i.map(function(t) {
            var e;
            return {
                labelEnum: t.labelEnum,
                negativeActionFlag: null !== (e = t.negativeActionFlag) && void 0 !== e && e
            }
        }),
        r
    }
    return __extends(UTPopupDTO, n),
    UTPopupDTO
}(EAObject)
  , UTTargetActionView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTTargetActionView() {
        var t = e.call(this) || this;
        return t._targets = new EAHashTable,
        t
    }
    return __extends(UTTargetActionView, e),
    UTTargetActionView.prototype.dealloc = function() {
        e.prototype.dealloc.call(this),
        this._targets.clear()
    }
    ,
    UTTargetActionView.prototype.addTarget = function(t, e, i) {
        if (!(0 <= this.getActions(t, i).indexOf(e))) {
            var r = this._targets.get(i);
            r ? r.push(Object.freeze({
                target: t,
                action: e
            })) : this._targets.set(i, [Object.freeze({
                target: t,
                action: e
            })])
        }
    }
    ,
    UTTargetActionView.prototype.removeTarget = function(e, i, t) {
        var r = this._targets.get(t);
        if (r) {
            var n = r.filter(function(t) {
                return !(t.target === e && t.action === i)
            });
            this._targets.set(t, n)
        }
    }
    ,
    UTTargetActionView.prototype.getActions = function(i, t) {
        var e = this._targets.get(t);
        return e ? e.reduce(function(t, e) {
            return e.target === i && t.push(e.action),
            t
        }, []) : []
    }
    ,
    UTTargetActionView.prototype._triggerActions = function(e, i) {
        var r = this
          , t = this._targets.get(e);
        t && t.forEach(function(t) {
            return t.action.call(t.target, r, e, i)
        }, this)
    }
    ,
    UTTargetActionView
}(UTView))
  , UTModalContainerView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTModalContainerView() {
        return e.call(this) || this
    }
    return __extends(UTModalContainerView, e),
    UTModalContainerView.prototype.init = function() {
        e.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTModalContainerView.prototype._touchMoved = function(t) {
        this.getRootElement().contains(t.target) ? e.prototype._touchMoved.call(this, t) : (t.preventDefault(),
        t.stopPropagation())
    }
    ,
    UTModalContainerView.prototype._tapDetected = function(t) {
        t.target === this.getRootElement() ? this._triggerActions(UTModalContainerView.Event.SHIELDPRESS) : e.prototype._tapDetected.call(this, t)
    }
    ,
    UTModalContainerView.Event = {
        SHIELDPRESS: "UTModalContainerView.Event.SHIELDPRESS"
    },
    UTModalContainerView
}(UTTargetActionView));
UTModalContainerView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("view-modal-container"),
        this.__root = t,
        this._generated = !0
    }
}
,
UTModalContainerView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTModalContainerView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTControl = function(n) {
    function UTControl() {
        return n.call(this) || this
    }
    return __extends(UTControl, n),
    UTControl.prototype.blur = function() {
        var t = this.getRootElement();
        t === document.activeElement && t.blur()
    }
    ,
    UTControl.prototype.focus = function() {
        var t = this.getRootElement();
        t !== document.activeElement && t.focus()
    }
    ,
    UTControl.prototype._evaluateEventString = function(t) {
        for (var e in EventType)
            if (EventType.hasOwnProperty(e) && t === EventType[e])
                return !0;
        return !1
    }
    ,
    UTControl.prototype.addTarget = function(t, e, i) {
        var r = this._evaluateEventString(i);
        DebugUtils.Assert(r, "Invalid assignment; expected EventType value."),
        r && n.prototype.addTarget.call(this, t, e, i)
    }
    ,
    UTControl.prototype.removeTarget = function(t, e, i) {
        var r = this._evaluateEventString(i);
        DebugUtils.Assert(r, "Invalid assignment; expected EventType value."),
        r && n.prototype.removeTarget.call(this, t, e, i)
    }
    ,
    UTControl.prototype.getActions = function(t, e) {
        var i = this._evaluateEventString(e);
        return DebugUtils.Assert(i, "Invalid assignment; expected EventType value."),
        i ? n.prototype.getActions.call(this, t, e) : []
    }
    ,
    UTControl.prototype._triggerActions = function(t, e) {
        var i = this._evaluateEventString(t);
        DebugUtils.Assert(i, "Invalid assignment; expected EventType value."),
        i && n.prototype._triggerActions.call(this, t, e)
    }
    ,
    UTControl
}(UTTargetActionView)
  , UTButtonControl = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTButtonControl() {
        return i.call(this) || this
    }
    return __extends(UTButtonControl, i),
    UTButtonControl.prototype.init = function() {
        i.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTButtonControl.prototype.setInteractionState = function(t) {
        var e = this._interactionState;
        i.prototype.setInteractionState.call(this, t),
        this._interactionState !== e && (this.getRootElement().disabled = !this._interactionState,
        this.toggleClass(enums.UIState.DISABLED, !this._interactionState),
        this._interactionState || this.removeClass([enums.UIState.ACTIVE, enums.UIState.HOVER].join(" ")))
    }
    ,
    UTButtonControl.prototype.setText = function(t) {
        this.getRootElement().textContent = t
    }
    ,
    UTButtonControl.prototype._touchStarted = function(t) {
        i.prototype._touchStarted.call(this, t),
        this.addClass(enums.UIState.ACTIVE)
    }
    ,
    UTButtonControl.prototype._touchMoved = function(t) {
        i.prototype._touchMoved.call(this, t),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTButtonControl.prototype._touchEnded = function(t) {
        i.prototype._touchEnded.call(this, t),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTButtonControl.prototype._touchCancelled = function(t) {
        i.prototype._touchCancelled.call(this, t),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTButtonControl.prototype._mouseLeave = function(t) {
        i.prototype._mouseLeave.call(this, t),
        this.removeClass(enums.UIState.ACTIVE),
        this.removeClass(enums.UIState.HOVER)
    }
    ,
    UTButtonControl.prototype._mouseEnter = function(t) {
        i.prototype._mouseEnter.call(this, t),
        this.addClass(enums.UIState.HOVER)
    }
    ,
    UTButtonControl.prototype._tapDetected = function(t) {
        i.prototype._tapDetected.call(this, t),
        this._triggerActions(EventType.TAP)
    }
    ,
    UTButtonControl
}(UTControl))
  , UTImageButtonControl = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTImageButtonControl() {
        return t.call(this) || this
    }
    return __extends(UTImageButtonControl, t),
    UTImageButtonControl
}(UTButtonControl));
UTImageButtonControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("button");
        t.classList.add("ut-image-button-control"),
        this.__root = t,
        this._generated = !0
    }
}
,
UTImageButtonControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTImageButtonControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSheetView = function(e) {
    function UTSheetView() {
        return e.call(this) || this
    }
    return __extends(UTSheetView, e),
    UTSheetView.prototype.init = function() {
        e.prototype.init.call(this),
        this._exitBtn.init(),
        this._exitBtn.addTarget(this, this._exitTapped, EventType.TAP),
        this.setInteractionState(!0)
    }
    ,
    UTSheetView.prototype.addSheetSubview = function(t) {
        this.__sheetContent.appendChild(t.getRootElement())
    }
    ,
    UTSheetView.prototype.setSheetTitle = function(t) {
        this.__sheetTitle.textContent = t
    }
    ,
    UTSheetView.prototype.setStyle = function(t) {
        this.removeClass("medium-detent"),
        "medium" == t && this.addClass("medium-detent")
    }
    ,
    UTSheetView.prototype._exitTapped = function() {
        this._triggerActions(UTSheetView.Event.EXITPRESS)
    }
    ,
    UTSheetView.prototype._touchMoved = function(t) {
        this.getRootElement().contains(t.target) ? e.prototype._touchMoved.call(this, t) : (t.preventDefault(),
        t.stopPropagation())
    }
    ,
    UTSheetView.prototype._tapDetected = function(t) {
        t.target === this.getRootElement() ? this._triggerActions(UTSheetView.Event.SHIELDPRESS) : e.prototype._tapDetected.call(this, t)
    }
    ,
    UTSheetView.Event = {
        SHIELDPRESS: "UTSheetView.Event.SHIELDPRESS",
        EXITPRESS: "UTSheetView.Event.EXITPRESS"
    },
    UTSheetView
}(UTTargetActionView);
UTSheetView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-sheet-view");
        var e = document.createElement("div");
        e.classList.add("ut-sheet-container");
        var i = document.createElement("div");
        i.classList.add("ut-sheet-view-header"),
        this.__sheetTitle = document.createElement("h2"),
        i.appendChild(this.__sheetTitle),
        this._exitBtn = new UTImageButtonControl,
        this._exitBtn.getRootElement().classList.add("exit-btn"),
        i.appendChild(this._exitBtn.getRootElement()),
        e.appendChild(i),
        this.__sheetContent = document.createElement("div"),
        this.__sheetContent.classList.add("ut-sheet-content"),
        e.appendChild(this.__sheetContent),
        t.appendChild(e),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSheetView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__sheetTitle = null,
    this._exitBtn.destroy(),
    this.__sheetContent = null
}
,
UTSheetView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPresentationController = function(r) {
    function UTPresentationController(t, e) {
        var i = r.call(this) || this;
        return i.isPresenting = !1,
        i.presentedView = null,
        i.presentingViewController = e,
        i.presentedViewController = t,
        i.controllerQueue = [],
        i.queuePresentation = !1,
        i
    }
    return __extends(UTPresentationController, r),
    Object.defineProperty(UTPresentationController.prototype, "queueLength", {
        get: function() {
            return this.controllerQueue.length
        },
        enumerable: !1,
        configurable: !0
    }),
    UTPresentationController.prototype.dealloc = function() {
        r.prototype.dealloc.call(this),
        this.controllerQueue = [],
        this.presentedView = null,
        this.isPresenting = !1
    }
    ,
    UTPresentationController.prototype.getPresentedViewController = function() {
        return this.presentedViewController
    }
    ,
    UTPresentationController.prototype.insertView = function(t, e) {
        this.presentedView = t,
        this.presentedView.getSuperview() !== e && (e.addSubview(this.presentedView),
        e.layoutSubviews())
    }
    ,
    UTPresentationController.prototype.applyModalDisplayDimensions = function() {
        var t = this.presentedViewController.getView().getRootElement()
          , e = this.presentedViewController.modalDisplayDimensions;
        e.width && (t.style.width = e.width),
        e.height && (t.style.height = e.height),
        e.maxHeight && (t.style.maxHeight = e.maxHeight),
        e.maxWidth && (t.style.maxWidth = e.maxWidth),
        e.minHeight && (t.style.minHeight = e.minHeight),
        e.minWidth && (t.style.minWidth = e.minWidth)
    }
    ,
    UTPresentationController.prototype.presentInFullScreen = function() {
        var t = this.presentedViewController.getView()
          , e = t.getRootElement();
        e.style.position = "fixed",
        e.style.top = "0",
        e.style.left = "0",
        e.style.right = "0",
        e.style.bottom = "0",
        e.style.zIndex = "10";
        var i = getAppMain().getRootViewController().getView();
        this.insertView(t, i)
    }
    ,
    UTPresentationController.prototype.presentInContainerContext = function() {
        var t = this.presentedViewController.getView()
          , e = t.getRootElement();
        e.style.position = "absolute",
        e.style.top = "0",
        e.style.left = "0",
        e.style.right = "0",
        e.style.bottom = "0",
        e.style.zIndex = "10",
        this.insertView(t, this.presentingViewController.getView())
    }
    ,
    UTPresentationController.prototype.presentInFormModal = function() {
        var t = new UTModalContainerView;
        t.init(),
        t.addClass("form-modal"),
        t.addSubview(this.presentedViewController.getView()),
        t.layoutSubviews(),
        this.presentedViewController.modalCanDismissFromShield && t.addTarget(this.presentingViewController, function(t, e, i) {
            this.dismissViewController(!0)
        }, UTModalContainerView.Event.SHIELDPRESS),
        this.applyModalDisplayDimensions();
        var e = getAppMain().getRootViewController().getView();
        this.insertView(t, e)
    }
    ,
    UTPresentationController.prototype.presentInPageModal = function() {
        var t = new UTModalContainerView;
        t.init(),
        t.addClass("page-modal"),
        t.addSubview(this.presentedViewController.getView()),
        t.layoutSubviews(),
        this.presentedViewController.modalCanDismissFromShield && t.addTarget(this.presentingViewController, function(t, e, i) {
            this.dismissViewController(!0)
        }, UTModalContainerView.Event.SHIELDPRESS),
        this.applyModalDisplayDimensions();
        var e = getAppMain().getRootViewController().getView();
        this.insertView(t, e)
    }
    ,
    UTPresentationController.prototype.presentInSheetModal = function() {
        throw new Error("Method not implemented.")
    }
    ,
    UTPresentationController.prototype.present = function(t, e) {
        var i = this;
        if (!this.isPresenting) {
            function Vua() {
                i.presentationDidEnd(),
                i.presentingViewController.didPresent(i.presentedViewController),
                e && e()
            }
            switch (this.isPresenting = !0,
            this.presentingViewController.willPresent(this.presentedViewController),
            this.presentationWillBegin(),
            this.presentingViewController.addChildViewController(this.presentedViewController),
            this.presentedViewController.viewWillAppear(),
            this.presentedViewController.modalDisplayStyle) {
            case "fullscreen":
                this.presentInFullScreen();
                break;
            case "fill":
                this.presentInContainerContext();
                break;
            case "form":
                this.presentInFormModal(),
                this.registerBackButtonEvents();
                break;
            case "page":
                this.presentInPageModal(),
                this.registerBackButtonEvents();
                break;
            case "sheet":
                this.presentInSheetModal(),
                this.registerBackButtonEvents();
                break;
            default:
                DebugUtils.Assert(!1, "View controller does not have a supported modal display style.")
            }
            this.presentedViewController.viewDidAppear(),
            t ? this.presentedViewController.getView().perform(enums.UIAnimation.FADE_IN, Vua) : Vua.call(this)
        }
    }
    ,
    UTPresentationController.prototype.queue = function(t, e, i) {
        this.queuePresentation && this.controllerQueue.push({
            presented: t,
            animated: e,
            callback: i
        })
    }
    ,
    UTPresentationController.prototype.dismiss = function(t, e) {
        var i = this;
        if (this.isPresenting) {
            this.presentingViewController.willDismiss(this.presentedViewController),
            this.dismissalWillBegin(),
            this.unregisterBackButtonEvents(),
            this.presentedViewController.viewWillDisappear(),
            this.presentedView && this.presentedView.removeFromSuperview(t, function() {
                if (i.presentedView instanceof UTModalContainerView ? i.presentedView.dealloc() : i.presentedView && i.presentedView.getRootElement().removeAttribute("style"),
                i.presentingViewController.viewDidDisappear(),
                i.dismissalDidEnd(),
                i.presentingViewController.didDismiss(i.presentedViewController),
                i.presentedView = null,
                i.isPresenting = !1,
                i.presentingViewController.removeChildViewController(i.presentedViewController),
                e && e(),
                i.queuePresentation && 0 < i.controllerQueue.length) {
                    var t = i.controllerQueue.shift();
                    t && requestAnimationFrame(function() {
                        i.presentedViewController = t.presented,
                        i.present(t.animated, t.callback)
                    })
                }
            })
        }
    }
    ,
    UTPresentationController.prototype.presentationWillBegin = function() {}
    ,
    UTPresentationController.prototype.presentationDidEnd = function() {}
    ,
    UTPresentationController.prototype.dismissalWillBegin = function() {}
    ,
    UTPresentationController.prototype.dismissalDidEnd = function() {}
    ,
    UTPresentationController.prototype.registerBackButtonEvents = function() {
        var t = getBackButtonEventController();
        t && t.registerDelegate(this, UTBackButtonEventController.PRIORITY.POPUP)
    }
    ,
    UTPresentationController.prototype.unregisterBackButtonEvents = function() {
        var t = getBackButtonEventController();
        t && t.unregisterDelegate(this, UTBackButtonEventController.PRIORITY.POPUP)
    }
    ,
    UTPresentationController.prototype.handleBackButtonEvent = function(t) {
        this.isPresenting && this.presentedViewController.onBackButton() && this.presentingViewController.dismissViewController()
    }
    ,
    UTPresentationController
}(EAObject)
  , UTSheetPresentationController = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTSheetPresentationController(t, e) {
        return i.call(this, t, e) || this
    }
    return __extends(UTSheetPresentationController, i),
    UTSheetPresentationController.prototype.presentInSheetModal = function() {
        var t = new UTSheetView;
        t.init(),
        t.setStyle("medium"),
        t.addSheetSubview(this.presentedViewController.getView()),
        t.setSheetTitle(this.presentedViewController.modalSheetTitle),
        t.layoutSubviews(),
        this.presentedViewController.modalCanDismissFromShield && t.addTarget(this.presentingViewController, function(t, e, i) {
            this.dismissViewController(!0)
        }, UTSheetView.Event.SHIELDPRESS),
        t.addTarget(this.presentingViewController, function(t, e, i) {
            this.dismissViewController(!0)
        }, UTSheetView.Event.EXITPRESS);
        var e = getAppMain().getRootViewController().getView();
        this.insertView(t, e)
    }
    ,
    UTSheetPresentationController
}(UTPresentationController))
  , UTViewController = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTViewController() {
        var t = e.call(this) || this;
        return t._view = null,
        t._parentViewController = null,
        t._childViewControllers = [],
        t._presentationController = null,
        t.tabBarItem = null,
        t.isLoading = !1,
        t.hasLoaded = !1,
        t.initialized = !1,
        t.modalDisplayStyle = "fill",
        t.modalDisplayDimensions = {},
        t.modalCanDismissFromShield = !0,
        t
    }
    return __extends(UTViewController, e),
    UTViewController.prototype.init = function() {
        this.initialized || (e.prototype.init.call(this),
        this.initialized = !0)
    }
    ,
    UTViewController.prototype.dealloc = function() {
        this.tabBarItem && (this.tabBarItem = null),
        this._presentationController && (this._presentationController.queuePresentation = !1,
        this.dismissViewController()),
        this.removeFromParentViewController(),
        this._childViewControllers.forEach(function(t) {
            t.willMove(this),
            t._parentViewController = null,
            t.didMove(this)
        }, this),
        this._childViewControllers = [],
        this._view && (this._view.dealloc(),
        this._view = null),
        e.prototype.dealloc.call(this)
    }
    ,
    UTViewController.prototype._getTelemetryId = function() {
        return null
    }
    ,
    UTViewController.prototype.getParentViewController = function() {
        return this._parentViewController
    }
    ,
    UTViewController.prototype.getNavigationController = function() {
        for (var t = this.getParentViewController(); null !== t; ) {
            if (t instanceof UTNavigationController)
                return t;
            t = t.getParentViewController()
        }
        return null
    }
    ,
    UTViewController.prototype.getRootNavigationController = function() {
        for (var t = this.getNavigationController(), e = null; null !== t; )
            t = (e = t).getNavigationController();
        return e
    }
    ,
    UTViewController.prototype._getViewInstanceFromData = function() {
        return new UTView
    }
    ,
    UTViewController.prototype.getView = function() {
        return this._view || (this.isLoading = !0,
        this.hasLoaded || (this._view = this._getViewInstanceFromData(),
        this._view.setEventDelegate(this),
        this._view.init()),
        this.isLoading = !1,
        this.viewDidLoad()),
        this.hasLoaded || this.isLoading || (this.hasLoaded = !0),
        this._view
    }
    ,
    UTViewController.prototype.setView = function(t) {
        if (t !== this._view) {
            if (this._view) {
                var e = this._view;
                e.removeFromSuperview(),
                e.dealloc()
            }
            this._view = t
        }
    }
    ,
    UTViewController.prototype.isViewDisplayed = function() {
        var t = this.getView()
          , r = function(t, e) {
            var i = t.parentNode;
            return !!i && (i === e || r(i, e))
        };
        return !!t && r(t.getRootElement(), document.getElementsByTagName("body")[0])
    }
    ,
    UTViewController.prototype._getPresentationControllerInstance = function(t) {
        return "sheet" == t.modalDisplayStyle ? new UTSheetPresentationController(t,this) : new UTPresentationController(t,this)
    }
    ,
    UTViewController.prototype.addChildViewController = function(t) {
        t.willMove(this),
        this._childViewControllers.push(t),
        t._parentViewController = this,
        t.setEventDelegate(this),
        t.didMove(this)
    }
    ,
    UTViewController.prototype.removeChildViewController = function(t) {
        var e = this._childViewControllers.indexOf(t);
        if (0 <= e) {
            t.willMove(this);
            var i = this.getView()
              , r = t.getView();
            i && r && r.isSubview(i) && r.removeFromSuperview(),
            t.removeEventDelegate(this),
            t._parentViewController === this && (t._parentViewController = null),
            this._childViewControllers.splice(e, 1),
            t.didMove(this)
        }
    }
    ,
    UTViewController.prototype.removeFromParentViewController = function() {
        var t = this.getParentViewController();
        t && t.removeChildViewController(this)
    }
    ,
    UTViewController.prototype.presentViewController = function(t, e, i) {
        var r = this;
        if (!this._presentationController || this._presentationController.getPresentedViewController() !== t) {
            function gwa() {
                r._presentationController = r._getPresentationControllerInstance(t),
                r._presentationController.present(!!e, i)
            }
            this._presentationController ? this._presentationController.queuePresentation ? this._presentationController.queue(t, !!e, i) : this.dismissViewController(!!e, gwa.bind(this)) : gwa.call(this)
        }
    }
    ,
    UTViewController.prototype.dismissViewController = function(t, e) {
        var i = this;
        DebugUtils.Assert(JSUtils.isValid(this._presentationController), "Performed a dismiss when no view controller is being presented.");
        this._presentationController && this._presentationController.dismiss(!!t, function() {
            !i._presentationController || i._presentationController.queuePresentation && 0 !== i._presentationController.queueLength || (i._presentationController.dealloc(),
            i._presentationController = null),
            e && e()
        }
        .bind(this))
    }
    ,
    UTViewController.prototype.decorateLinks = function(t) {
        var e = this;
        DOMKit.findElements(t, "a").forEach(function(t) {
            "a" !== t.nodeName && "A" !== t.nodeName || (t.addEventListener(EventType.TOUCHEND, e._linkHandler, !1),
            t.addEventListener(EventType.CLICK, e._linkHandler, !1))
        }, this)
    }
    ,
    UTViewController.prototype.stripLinks = function(t) {
        var e = this;
        DOMKit.findElements(t, "a").forEach(function(t) {
            "a" !== t.nodeName && "A" !== t.nodeName || (t.removeEventListener(EventType.TOUCHEND, e._linkHandler, !1),
            t.removeEventListener(EventType.CLICK, e._linkHandler, !1))
        }, this)
    }
    ,
    UTViewController.prototype._linkHandler = function(t) {
        t.preventDefault();
        var e = t.target instanceof HTMLElement ? t.target.getAttribute("href") : null;
        e && (isWeb() ? window.open(e, "_blank") : cordova.InAppBrowser.open(e, "_system"))
    }
    ,
    UTViewController.prototype.getPresentedViewController = function() {
        return this._presentationController ? this._presentationController.getPresentedViewController() : null
    }
    ,
    UTViewController.prototype.getNavigationTitle = function() {
        return ""
    }
    ,
    UTViewController.prototype.getToolbarItems = function() {
        var t = this.getNavigationController();
        return t ? t.getToolbarItems() : []
    }
    ,
    UTViewController.prototype.getNavigationItem = function() {
        return null
    }
    ,
    UTViewController.prototype.onBackButton = function() {
        return !0
    }
    ,
    UTViewController.prototype.onPause = function() {}
    ,
    UTViewController.prototype.onResume = function() {}
    ,
    UTViewController.prototype.willMove = function(t) {}
    ,
    UTViewController.prototype.didMove = function(t) {}
    ,
    UTViewController.prototype.willPresent = function(t) {}
    ,
    UTViewController.prototype.didPresent = function(t) {}
    ,
    UTViewController.prototype.willDismiss = function(t) {}
    ,
    UTViewController.prototype.didDismiss = function(t) {}
    ,
    UTViewController.prototype.viewDidLoad = function() {}
    ,
    UTViewController.prototype.viewWillAppear = function() {
        var t = this.getPresentedViewController();
        t && "fill" === t.modalDisplayStyle && t.viewWillAppear()
    }
    ,
    UTViewController.prototype.viewWillDisappear = function() {
        var t = getDefaultDispatcher()
          , e = this.getPresentedViewController();
        e && "fill" === e.modalDisplayStyle && e.viewWillDisappear(),
        t.removeObserver(AppNotification.APP_PAUSE, this),
        t.removeObserver(AppNotification.APP_RESUME, this)
    }
    ,
    UTViewController.prototype.viewDidAppear = function() {
        var t = getDefaultDispatcher()
          , e = this._getTelemetryId()
          , i = this.getPresentedViewController();
        JSUtils.isString(e) && services.PIN.sendData(PINEventType.PAGE_VIEW, {
            type: PIN_PAGEVIEW_EVT_TYPE,
            pgid: e
        }),
        i && "fill" === i.modalDisplayStyle && i.viewDidAppear(),
        t.addObserver(AppNotification.APP_PAUSE, this, this.onPause),
        t.addObserver(AppNotification.APP_RESUME, this, this.onResume)
    }
    ,
    UTViewController.prototype.viewDidDisappear = function() {
        var t = this.getPresentedViewController();
        t && "fill" === t.modalDisplayStyle && t.viewDidDisappear()
    }
    ,
    UTViewController
}(EAResponder))
  , BasePopupViewController = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function BasePopupViewController() {
        var t = e.call(this) || this;
        return t.onExit = new EAObservable,
        t
    }
    return __extends(BasePopupViewController, e),
    BasePopupViewController.prototype.init = function() {
        e.prototype.init.call(this),
        getKeyboardEventController().registerDelegate(this, KeyboardEventPriority.POPUP)
    }
    ,
    BasePopupViewController.prototype.dealloc = function() {
        this.onExit.dealloc(),
        getKeyboardEventController().unregisterDelegate(this, KeyboardEventPriority.POPUP),
        e.prototype.dealloc.call(this)
    }
    ,
    BasePopupViewController.prototype.onBackButton = function() {
        return this.closePopup(),
        !1
    }
    ,
    BasePopupViewController.prototype.closePopup = function() {
        this.onExit.notify()
    }
    ,
    BasePopupViewController.prototype.handleKeyUpEvent = function(t) {
        t.key !== KeyboardKey.ESCAPE && t.key !== KeyboardKey.MS_ESCAPE || this.onExit.notify(enums.UIDialogOptions.CANCEL)
    }
    ,
    BasePopupViewController
}(UTViewController))
  , UTGroupButtonControl = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTGroupButtonControl() {
        return t.call(this) || this
    }
    return __extends(UTGroupButtonControl, t),
    UTGroupButtonControl.prototype.setText = function(t) {
        this.__text.textContent = t
    }
    ,
    UTGroupButtonControl.prototype.setSubtext = function(t) {
        this.__subtext.textContent = t
    }
    ,
    UTGroupButtonControl.prototype.displayCurrencyIcon = function(t) {
        DOMKit.toggleClass(this.__subtext, "currency-coins", t)
    }
    ,
    UTGroupButtonControl
}(UTButtonControl));
UTGroupButtonControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("button");
        this.__text = document.createElement("span"),
        this.__text.classList.add("btn-text"),
        t.appendChild(this.__text),
        this.__subtext = document.createElement("span"),
        this.__subtext.classList.add("btn-subtext"),
        t.appendChild(this.__subtext),
        this.__root = t,
        this._generated = !0
    }
}
,
UTGroupButtonControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__text = null,
    this.__subtext = null
}
,
UTGroupButtonControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var EADialogView = function(i) {
    function EADialogView(t) {
        var e = i.call(this) || this;
        return e.dialogOptions = t.buttons.map(function(t) {
            return e.createOption(t.label, t.negativeActionFlag)
        }),
        t.type && e.setType(t.type),
        t.title && e.setTitle(t.title),
        t.message && e.setMessage(t.message),
        e.layoutSubviews(),
        e
    }
    return __extends(EADialogView, i),
    EADialogView.prototype.dealloc = function() {
        this.dialogOptions.forEach(function(t) {
            return t.dealloc()
        }),
        this.dialogOptions = [],
        i.prototype.dealloc.call(this)
    }
    ,
    EADialogView.prototype.getContent = function() {
        return this.__msg
    }
    ,
    EADialogView.prototype.setTitle = function(t) {
        this.__title.textContent = t
    }
    ,
    EADialogView.prototype.setMessage = function(t) {
        this.__msg.innerHTML = t
    }
    ,
    EADialogView.prototype.setType = function(t) {
        this.addClass(t)
    }
    ,
    EADialogView.prototype.createOption = function(t, e) {
        void 0 === e && (e = !1);
        var i = new UTGroupButtonControl;
        return i.init(),
        i.setText(t),
        e && i.addClass("negative"),
        i.addTarget(this, this.handleButtonEvent, EventType.TAP),
        this.addSubview(i, this.__btnContainer),
        i
    }
    ,
    EADialogView.prototype.handleButtonEvent = function(t, e, i) {
        this._triggerActions(EADialogView.Event.OPTION_SELECTED, {
            index: this.dialogOptions.indexOf(t)
        })
    }
    ,
    EADialogView.Event = {
        OPTION_SELECTED: "EADialogView.OPTION_SELECTED"
    },
    EADialogView.Type = {
        ALERT: "ea-dialog-view-type--alert",
        MESSAGE: "ea-dialog-view-type--message",
        ROTATE: "ea-dialog-view-type--rotate",
        SAVE_FAILED: "ea-dialog-view-type--save-failed",
        STANDARD: "ea-dialog-view-type--standard"
    },
    EADialogView
}(UTTargetActionView);
EADialogView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("section");
        t.classList.add("ea-dialog-view");
        var e = document.createElement("header");
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ea-dialog-view--title"),
        e.appendChild(this.__title),
        t.appendChild(e);
        var i = document.createElement("div");
        i.classList.add("ea-dialog-view--body"),
        this.__msg = document.createElement("p"),
        this.__msg.classList.add("ea-dialog-view--msg"),
        i.appendChild(this.__msg),
        this.__btnContainer = document.createElement("div"),
        this.__btnContainer.classList.add("ut-button-group"),
        i.appendChild(this.__btnContainer),
        t.appendChild(i),
        this.__root = t,
        this._generated = !0
    }
}
,
EADialogView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this.__msg = null,
    this.__btnContainer = null
}
,
EADialogView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var EADialogViewController = function(i) {
    function EADialogViewController(t) {
        var e = i.call(this) || this;
        return e.message = t.message,
        e.options = t.dialogOptions ? t.dialogOptions : [],
        e.title = t.title,
        e.type = t.type ? t.type : EADialogView.Type.STANDARD,
        e
    }
    return __extends(EADialogViewController, i),
    EADialogViewController.prototype._getViewInstanceFromData = function() {
        return new EADialogView({
            buttons: this.options.map(function(t) {
                var e;
                return {
                    label: utils.PopupManager.getLocalizedDialogOption(t.labelEnum),
                    negativeActionFlag: null !== (e = t.negativeActionFlag) && void 0 !== e && e
                }
            }),
            message: this.message,
            title: this.title,
            type: this.type
        })
    }
    ,
    EADialogViewController.prototype.viewDidAppear = function() {
        i.prototype.viewDidAppear.call(this);
        var t = this.getView();
        t.addTarget(this, this.onOptionSelected, EADialogView.Event.OPTION_SELECTED),
        this.decorateLinks(t.getContent())
    }
    ,
    EADialogViewController.prototype.viewWillDisappear = function() {
        i.prototype.viewWillDisappear.call(this);
        var t = this.getView();
        t.removeTarget(this, this.onOptionSelected, EADialogView.Event.OPTION_SELECTED),
        this.stripLinks(t.getContent())
    }
    ,
    EADialogViewController.prototype.handleKeyUpEvent = function(t) {
        var e, i, r;
        this.options.length < 1 || (t.key === KeyboardKey.ESCAPE || t.key === KeyboardKey.MS_ESCAPE ? (r = null === (e = this.options.find(function(t) {
            return t.negativeActionFlag
        })) || void 0 === e ? void 0 : e.labelEnum,
        this.onExit.notify(JSUtils.isNumber(r) ? r : enums.UIDialogOptions.CANCEL)) : t.key === KeyboardKey.ENTER && (r = null === (i = this.options.find(function(t) {
            return !t.negativeActionFlag
        })) || void 0 === i ? void 0 : i.labelEnum,
        this.onExit.notify(JSUtils.isNumber(r) ? r : enums.UIDialogOptions.OK)))
    }
    ,
    EADialogViewController.prototype.onOptionSelected = function(t, e, i) {
        this.onExit.notify(this.options[i.index].labelEnum)
    }
    ,
    EADialogViewController
}(BasePopupViewController);
NamespaceManager.Register("utils"),
utils.PopupManager = {},
utils.PopupManager.displayingNativePopup = !1,
utils.PopupManager.showAlert = function showAlert(t, i, e) {
    var r = services.Localization
      , n = new EADialogViewController({
        dialogOptions: t.buttonOptions.slice(0, 1),
        message: r.localize(t.message, e),
        title: r.localize(t.title),
        type: EADialogView.Type.ALERT
    });
    n.init(),
    n.modalDisplayDimensions.minWidth = "300px",
    gPopupClickShield.setActivePopup(n),
    n.onExit.observe(this, function(t, e) {
        i && i()
    })
}
,
utils.PopupManager.showConfirmation = function showConfirmation(t, e, i, r) {
    JSUtils.isFunction(r) || (r = function() {}
    );
    var n = services.Localization
      , o = new EADialogViewController({
        dialogOptions: t.buttonOptions,
        message: n.localize(t.message, e),
        title: n.localize(t.title),
        type: EADialogView.Type.MESSAGE
    });
    o.init(),
    o.modalDisplayDimensions.minWidth = "300px",
    gPopupClickShield.setActivePopup(o),
    o.onExit.observe(this, function(t, e) {
        e !== enums.UIDialogOptions.CANCEL && e !== enums.UIDialogOptions.NO && i ? i() : r && r()
    })
}
,
utils.PopupManager.showNoInternetConnectionPopup = function showNoInternetConnectionPopup() {
    var t = getAppMain().getLoginController()
      , e = t ? t.logout.bind(t, PINLogoutReasonId.ERROR) : null;
    utils.PopupManager.showAlert(utils.PopupManager.Alerts.NO_INTERNET_CONNECTION, e)
}
,
utils.PopupManager.getLocalizedDialogOption = function getLocalizedDialogOption(t) {
    var e = "";
    switch (t) {
    case enums.UIDialogOptions.RETRY:
        e = "easfcdown.retry";
        break;
    case enums.UIDialogOptions.OK:
        e = "common.dialog.ok";
        break;
    case enums.UIDialogOptions.CANCEL:
        e = "common.dialog.cancel";
        break;
    case enums.UIDialogOptions.YES:
        e = "popup.yes";
        break;
    case enums.UIDialogOptions.NO:
        e = "popup.no";
        break;
    case enums.UIDialogOptions.SIGN_OUT:
        e = "more.signout.button";
        break;
    case enums.UIDialogOptions.TAKE_ME:
        e = "popup.takeMeThere";
        break;
    case enums.UIDialogOptions.ENABLE:
        e = "common.dialog.enable";
        break;
    case enums.UIDialogOptions.DISABLE:
        e = "common.dialog.disable"
    }
    return services.Localization.localize(e)
}
,
utils.PopupManager.Alerts = {},
utils.PopupManager.CONFIRM_DENY = [{
    labelEnum: enums.UIDialogOptions.OK
}, {
    labelEnum: enums.UIDialogOptions.CANCEL,
    negativeActionFlag: !0
}],
utils.PopupManager.SIGN_OUT = [{
    labelEnum: enums.UIDialogOptions.SIGN_OUT
}, {
    labelEnum: enums.UIDialogOptions.CANCEL,
    negativeActionFlag: !0
}],
utils.PopupManager.Alerts.ORIGIN_UNAVAILABLE = new UTPopupDTO("popup.originUnavailableTitle","popup.originUnavailable",[{
    labelEnum: enums.UIDialogOptions.RETRY
}]),
utils.PopupManager.Alerts.ACCOUNT_BANNED = new UTPopupDTO("error.banneduser.header","error.banneduser.body",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.BID_TOO_LOW = new UTPopupDTO("popup.errorLowBidTitle","popup.bidTooLow",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.CANT_UNWATCH_ACTIVE_BID = new UTPopupDTO("popup.cantUnwatchCardPlayerBidTitle","popup.cantUnwatchCardPlayerBidText",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.WATCH_LIST_FULL = new UTPopupDTO("popup.watchlist.full.title","popup.watchlist.full.message",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.TRANSFER_LIST_FULL = new UTPopupDTO("popup.error.tradetoken.SellItemTradePileFullTitle","popup.error.tradetoken.SellItemTradePileFull",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.DESTINATION_FULL = new UTPopupDTO("popup.error.tradetoken.DestinationFullTitle","popup.error.item.DestinationFull",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.DUPLICATE_SQUAD_NAME = new UTPopupDTO("popup.error.duplicateSquadNameTitle","popup.error.duplicateSquadName",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.CANNOT_DELETE_SQUAD = new UTPopupDTO("popup.cannotdeletesquad.title","popup.cannotdeletesquad.message",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.DID_CREATE_EXCEEDED = new UTPopupDTO("popup.error.DID.CreateExceededHeader","popup.error.DID.CreateExceededBody",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.DID_LOGIN_EXCEEDED = new UTPopupDTO("popup.error.DID.LoginExceededHeader","popup.error.DID.LoginExceededBody",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.DEVICE_SUSPENDED = new UTPopupDTO("popup.error.DeviceSuspendedHeader","popup.error.DeviceSuspendedBody",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.GEOIP_DENIED = new UTPopupDTO("popup.error.geoipblacklist.title","popup.error.geoipblacklist",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.NO_INTERNET_CONNECTION = new UTPopupDTO("popup.error.NoInternetConnectionTitle","popup.error.NoInternetConnection",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.LOW_MEMORY = new UTPopupDTO("popup.warningLowMemoryTitle","popup.warningLowMemory",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.SERVER_DOWN = new UTPopupDTO("popup.error.serverdownTitle","popup.error.serverdown",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.DUPLICATE_ITEM = new UTPopupDTO("popup.error.item.DuplicatedItemTypeTitle","popup.error.squadManagement.DuplicateItem",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.SERVICE_IS_DISABLED = new UTPopupDTO("popup.error.ServiceIsDisabledTitle","popup.error.ServiceIsDisabled",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.ALL_NEED_TO_BE_CLAIMED = new UTPopupDTO("popup.error.autoassign.cannotAutoAssign","popup.error.autoassign.allFreePack",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.HIT_MAX_LISTING = new UTPopupDTO("popup.error.list.forbidden.title","popup.error.list.forbidden.message",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.TRADING_DISABLED = new UTPopupDTO("popup.error.auctioninfo.tradingdisabled.title","popup.error.auctioninfo.tradingdisabled",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.SBC_GRACE_PERIOD = new UTPopupDTO("popup.sbcgraceperiod.title","popup.sbcgraceperiod.message",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.SBC_INELIGIBLE_SQUAD = new UTPopupDTO("popup.sbcineligiblesquad.title","popup.sbcineligiblesquad.message",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.SBC_UNTRADEABLE_NOT_ALLOWED = new UTPopupDTO("popup.sbcineligiblesquad.title","popup.sbcUntradeableNotAllowed.message",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.SQUAD_BUILDER_NO_RESULTS = new UTPopupDTO("popup.title.noSquadBuilderResults","popup.error.squad.builder.noresults",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.ONBOARDING_INTRO = new UTPopupDTO("onboarding.popup.loanswap.title","onboarding.popup.loanswap.body",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Alerts.SAVE_TACTICS = new UTPopupDTO("tactics.popup.savetutorial.title","tactics.popup.savetutorial.body",[{
    labelEnum: enums.UIDialogOptions.OK
}]),
utils.PopupManager.Confirmations = {},
utils.PopupManager.Confirmations.CONFIRM_COPY_SQUAD = new UTPopupDTO("manage.copy.message.title","manage.copy.message",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.CONFIRM_RELIST_ALL = new UTPopupDTO("popup.tradepile.relistAllTitle","popup.tradepile.relistAllPriceBandingText",[{
    labelEnum: enums.UIDialogOptions.CANCEL,
    negativeActionFlag: !0
}, {
    labelEnum: enums.UIDialogOptions.YES
}]),
utils.PopupManager.Confirmations.BID_WHEN_HIGHEST_BIDDER = new UTPopupDTO("popup.confirmHighestBidderTitle","popup.confirmHighestBidder",[{
    labelEnum: enums.UIDialogOptions.CANCEL,
    negativeActionFlag: !0
}, {
    labelEnum: enums.UIDialogOptions.YES
}]),
utils.PopupManager.Confirmations.CONFIRM_BID = new UTPopupDTO("popup.bidConfirmationTitle","popup.bidConfirmationText",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.CONFIRM_BUY_NOW = new UTPopupDTO("popup.buyNowConfirmationTitle","popup.buyNowConfirmationText",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.UNASSIGNED_ENTITLEMENT = new UTPopupDTO("popup.error.unassignedItemsEntitlementTitle","popup.error.fifacredits.unassignedItemsEntitlement",[{
    labelEnum: enums.UIDialogOptions.CANCEL,
    negativeActionFlag: !0
}, {
    labelEnum: enums.UIDialogOptions.TAKE_ME
}]),
utils.PopupManager.Confirmations.NEW_ITEMS_FULL = new UTPopupDTO("popup.newItemsFullTitle","popup.newItemsFullText",[{
    labelEnum: enums.UIDialogOptions.CANCEL,
    negativeActionFlag: !0
}, {
    labelEnum: enums.UIDialogOptions.TAKE_ME
}]),
utils.PopupManager.Confirmations.CONFIRM_DISCARD = new UTPopupDTO("infopanel.label.discard","popup.confirmItemDiscard",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.CONFIRM_DISCARD_ALL = new UTPopupDTO("infopanel.label.discardall","popup.confirmDiscardAll",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.DELETE_SQUAD = new UTPopupDTO("popup.deletesquad.title","popup.deletesquad.message",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.UPDATE_FUT = new UTPopupDTO("popup.updateFUTTitle","popup.update.FUTText",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.BUY_BUNDLE_COINS = new UTPopupDTO("store.confirmation.questionTitleBundle","popup.confirmPurchase",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.BUY_BUNDLE_POINTS = new UTPopupDTO("store.confirmation.questionTitleBundle","popup.confirmPointsPurchase",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.BUY_ITEM_COINS = new UTPopupDTO("store.confirmation.questionTitleItem","popup.confirmPurchase",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.BUY_ITEM_POINTS = new UTPopupDTO("store.confirmation.questionTitleItem","popup.confirmPointsPurchase",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.BUY_PACK_COINS = new UTPopupDTO("store.confirmation.questionTitlePack","popup.confirmPurchase",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.BUY_PACK_POINTS = new UTPopupDTO("store.confirmation.questionTitlePack","popup.confirmPointsPurchase",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.SEND_ALL_TO_TRANSFER_LIST = new UTPopupDTO("popup.confirmation.sendAllToTransferListTitle","popup.confirmation.sendAllToTransferList",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.SEND_TO_CLUB = new UTPopupDTO("infopanel.label.club","popup.confirmSendToClub",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.SEND_TO_TRANSFER_LIST = new UTPopupDTO("infopanel.label.sendTradePile","popup.confirmSendToTransferList",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.APPLY_CONSUMABLE = new UTPopupDTO("panel.applyitem.button","popup.confirmApplyConsumable",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.SUBMIT_CHALLENGE = new UTPopupDTO("sbc.overlay.btn.submitChallenge","sbc.popup.submitChallenge.message",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.SIGN_OUT = new UTPopupDTO("more.signout.title","more.signout.body",utils.PopupManager.SIGN_OUT),
utils.PopupManager.Confirmations.CHANGE_PERSONA = new UTPopupDTO("personaselector.title","personaselector.message",utils.PopupManager.CONFIRM_DENY),
utils.PopupManager.Confirmations.CLEAR_SQUAD = new UTPopupDTO("clearSquad.title","clearSquad.message",utils.PopupManager.CONFIRM_DENY);
var NetworkErrorManager = {
    queue: [],
    handlingError: !1,
    checkCriticalStatus: function(t) {
        return t === UtasErrorCode.LOGGED_IN_ON_CONSOLE || t === UtasErrorCode.LOGGED_IN_ON_CONSOLE_LEGACY || t === UtasErrorCode.ACCOUNT_BANNED || t === UtasErrorCode.CAPTCHA_REQUIRED || t === HttpStatusCode.UNAUTHORIZED || t === UtasErrorCode.UNRECOVERABLE || t === HttpStatusCode.SERVER_ERROR
    },
    generateDefaultErrorMessage: function(t) {
        switch (t) {
        case HttpStatusCode.NOT_FOUND:
            return {
                title: "popup.error.serviceNotFoundTitle",
                message: "popup.error.serviceNotFound"
            };
        case UtasErrorCode.LOGGED_IN_ON_CONSOLE:
        case UtasErrorCode.LOGGED_IN_ON_CONSOLE_LEGACY:
            return {
                title: "signedontoanotherdevice.title",
                message: "rpcErrorResponses.general.CARDHOUSE_ERR_ALREADY_LOGGEDIN_ON_CONSOLE"
            };
        case UtasErrorCode.ACCOUNT_BANNED:
            return {
                title: "error.banneduser.header",
                message: "error.banneduser.body"
            };
        case UtasErrorCode.CAPTCHA_REQUIRED:
            return {
                title: "popup.error.captcharequiredTitle",
                message: "popup.error.captcharequired"
            };
        case HttpStatusCode.NO_CONTENT:
        case HttpStatusCode.BAD_REQUEST:
        case UtasErrorCode.UT_BAD_REQUEST:
            return {
                title: "popup.error.invalidrequestTitle",
                message: "popup.error.invalidrequest"
            };
        case UtasErrorCode.PROFANITY:
            return {
                title: "popup.error.profanityTitle",
                message: "popup.error.profanity"
            };
        case UtasErrorCode.NO_CARD_EXISTS:
            return {
                title: "popup.error.NoSuchCardTitle",
                message: "popup.error.NoSuchCard"
            };
        case HttpStatusCode.SERVER_ERROR:
            return {
                title: "popup.error.serverdownTitle",
                message: "popup.error.serverdown"
            };
        case HttpStatusCode.SERVICE_UNAVAILABLE_ERROR:
        case UtasErrorCode.SERVICE_IS_DISABLED:
            return {
                title: "popup.error.ServiceIsDisabledTitle",
                message: "popup.error.ServiceIsDisabled"
            };
        case HttpStatusCode.RATE_LIMIT:
            return {
                title: "popup.error.RateLimitHeader",
                message: "popup.error.RateLimitBody"
            };
        case HttpStatusCode.UNAUTHORIZED:
            return {
                title: "popup.error.unauthorized.title",
                message: "popup.error.unauthorized.body"
            };
        case UtasErrorCode.UNRECOVERABLE:
            return {
                title: "popup.error.cannotcontinueTitle",
                message: "popup.error.cannotcontinue"
            };
        case HttpStatusCode.UNKNOWN:
            return {
                title: "popup.error.networkerrorTitle",
                message: "popup.error.networkerrorNotCritical"
            };
        case UtasErrorCode.SOME_ITEMS_NOT_FREE:
            return {
                title: "popup.error.activesquad.itemsNotFreeTitle",
                message: "popup.error.activesquad.itemsNotFreeMsg"
            };
        default:
            return {
                title: "popup.title.genericError",
                message: "popup.body.genericError"
            }
        }
    },
    handleStatus: function(t) {
        if (NetworkErrorManager.handlingError)
            NetworkErrorManager.queue.push(t);
        else {
            NetworkErrorManager.handlingError = !0;
            var e = void 0;
            if (NetworkErrorManager.checkCriticalStatus(t)) {
                gClickShield.reset();
                var i = getAppMain().getLoginController();
                e = i.logout.bind(i, PINLogoutReasonId.ERROR),
                services.PIN.sendData(PINEventType.ERROR, {
                    custom: {
                        utas_metrics: {
                            endpoints: services.Metrics.getRequestData(),
                            rpups: services.Metrics.getRequestsPerSecond(),
                            sdur: services.Metrics.getSessionDuration()
                        }
                    },
                    sid: services.Authentication.getUtasSession().id,
                    type: "disconnect",
                    errid: "server_error",
                    server_type: "utas"
                }),
                NetworkErrorManager.queue = [],
                services.PlayerHealth.storeUnsavedTimeSpent()
            }
            var r = NetworkErrorManager.generateDefaultErrorMessage(t)
              , n = new UTPopupDTO(r.title,r.message,[{
                labelEnum: enums.UIDialogOptions.OK
            }]);
            if (utils.PopupManager.showAlert(n, e),
            NetworkErrorManager.handlingError = !1,
            0 < NetworkErrorManager.queue.length) {
                var o = NetworkErrorManager.queue.shift();
                JSUtils.isNumber(o) && NetworkErrorManager.handle(o)
            }
        }
    }
}
  , UTTelemetryRateUtility = function() {
    function UTTelemetryRateUtility(t, e) {
        this.rate = t,
        this.mandatorySections = e,
        this.isEnabled = void 0,
        this.verbose = !0
    }
    return UTTelemetryRateUtility.prototype.isPageTracked = function(t) {
        return this.mandatorySections[t] || this.isSampled()
    }
    ,
    UTTelemetryRateUtility.prototype.isEventTracked = function() {
        return this.isSampled()
    }
    ,
    UTTelemetryRateUtility.prototype.isSampled = function() {
        return 1 === this.rate ? this.isEnabled = !0 : (void 0 === this.isEnabled && (this.isEnabled = this.rate > Math.random()),
        this.isEnabled)
    }
    ,
    UTTelemetryRateUtility
}()
  , EAImagePreloader = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function EAImagePreloader() {
        var t = e.call(this) || this;
        return t.preloadedImages = new EAHashTable,
        t
    }
    return __extends(EAImagePreloader, e),
    EAImagePreloader.prototype.dealloc = function() {
        e.prototype.dealloc.call(this),
        this.preloadedImages.clear()
    }
    ,
    EAImagePreloader.prototype.preloadImages = function(t) {
        var i = this
          , e = JSUtils.valToArray(t)
          , r = new EAObservable
          , n = e.length
          , o = function(t) {
            var e;
            --n <= 0 && r.notify(),
            null === (e = t.target) || void 0 === e || e.removeEventListener("load", o, !1)
        };
        return e.forEach(function(t) {
            if (i.preloadedImages.has(t))
                n--;
            else {
                var e = new Image;
                e.addEventListener("load", o, !1),
                e.src = t,
                i.preloadedImages.set(t, e)
            }
        }, this),
        r
    }
    ,
    EAImagePreloader
}(EAObject));
NamespaceManager.Register("utils"),
utils.AD = new function ADUtil() {}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTDataProviderEntryDTO = function(n) {
    function UTDataProviderEntryDTO(t, e, i) {
        var r = n.call(this) || this;
        return r.id = t,
        r.label = i,
        r.value = e,
        r
    }
    return __extends(UTDataProviderEntryDTO, n),
    UTDataProviderEntryDTO
}(EAObject)
  , UTDataProviderFactory = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(n) {
    function UTDataProviderFactory(t, e, i) {
        var r = n.call(this) || this;
        return r.locDelegate = t,
        r.squadRepo = e,
        r.teamConfigRepo = i,
        r
    }
    return __extends(UTDataProviderFactory, n),
    UTDataProviderFactory.prototype.sortByName = function(t, e) {
        var i = this.locDelegate.locale;
        return i.usesLatinAlphabet() ? JSUtils.sortCompare(t.sortName, e.sortName) : t.name.localeCompare(e.name, i.toBCPString(), {
            sensitivity: "accent"
        })
    }
    ,
    UTDataProviderFactory.prototype.getSearchPileDP = function() {
        return [new UTDataProviderEntryDTO(0,ItemSearchFeature.CLUB,this.locDelegate.localize("search.searchmode.club")), new UTDataProviderEntryDTO(1,ItemSearchFeature.CONCEPT,this.locDelegate.localize("search.searchmode.database"))]
    }
    ,
    UTDataProviderFactory.prototype.getVanityCategoryDP = function(t) {
        var e = [new UTDataProviderEntryDTO(0,SearchCategoryGroup.CLUB,this.locDelegate.localize("search.filters.clubSection")), new UTDataProviderEntryDTO(1,SearchCategoryGroup.STADIUM,this.locDelegate.localize("search.filters.stadium")), new UTDataProviderEntryDTO(2,SearchCategoryGroup.STANDS,this.locDelegate.localize("search.filters.stands")), new UTDataProviderEntryDTO(3,SearchCategoryGroup.PITCH,this.locDelegate.localize("search.filters.pitch"))];
        return t || e.push(new UTDataProviderEntryDTO(4,SearchCategoryGroup.TROPHIES,this.locDelegate.localize("search.filters.trophies"))),
        e
    }
    ,
    UTDataProviderFactory.prototype.createItemSubTypeEntry = function(t) {
        var e = SearchCategory.ANY
          , i = "";
        switch (t) {
        case ItemSubType.KIT:
            e = SearchCategory.KIT,
            i = this.locDelegate.localize("search.filters.kits");
            break;
        case ItemSubType.BALL:
            e = SearchCategory.BALL,
            i = this.locDelegate.localize("search.filters.balls");
            break;
        case ItemSubType.BADGE:
            e = SearchCategory.BADGE,
            i = this.locDelegate.localize("search.filters.badges");
            break;
        case ItemSubType.STADIUM:
            e = SearchCategory.STADIUM,
            i = this.locDelegate.localize("search.filters.stadiums");
            break;
        case ItemSubType.VANITY_TIFO_BASE:
            e = SearchCategory.VANITY_TIFO_BASE,
            i = this.locDelegate.localize("search.filters.tifos");
            break;
        case ItemSubType.VANITY_TIFO_ANIMATED:
            e = SearchCategory.VANITY_TIFO_ANIMATED,
            i = this.locDelegate.localize("search.filters.tifosAnimated");
            break;
        case ItemSubType.VANITY_TIFO_MOVING:
            e = SearchCategory.VANITY_TIFO_MOVING,
            i = this.locDelegate.localize("search.filters.tifosMoving");
            break;
        case ItemSubType.VANITY_TIFO_BIG:
            e = SearchCategory.VANITY_TIFO_BIG,
            i = this.locDelegate.localize("search.filters.tifosBig");
            break;
        case ItemSubType.VANITY_STADIUM_THEME:
            e = SearchCategory.VANITY_STADIUM_THEME,
            i = this.locDelegate.localize("search.filters.stadiumThemes");
            break;
        case ItemSubType.VANITY_STADIUM_BASE_PITCH_MOW_PATTERN:
            e = SearchCategory.VANITY_STADIUM_BASE_PITCH_MOW_PATTERN,
            i = this.locDelegate.localize("search.filters.mowPatterns");
            break;
        case ItemSubType.VANITY_STADIUM_BASE_PITCH_LINE_COLOR:
            e = SearchCategory.VANITY_STADIUM_BASE_PITCH_LINE_COLOR,
            i = this.locDelegate.localize("search.filters.lineColors");
            break;
        case ItemSubType.VANITY_STADIUM_BASE_PITCH_GOAL_PACKAGE:
            e = SearchCategory.VANITY_STADIUM_BASE_PITCH_GOAL_PACKAGE,
            i = this.locDelegate.localize("search.filters.goalColors");
            break;
        case ItemSubType.VANITY_STADIUM_BASE_PITCH_PROP:
            e = SearchCategory.VANITY_STADIUM_BASE_PITCH_PROP,
            i = this.locDelegate.localize("search.filters.props");
            break;
        case ItemSubType.VANITY_STADIUM_BASE_STRUCTURE_COLOR:
            e = SearchCategory.VANITY_STADIUM_BASE_STRUCTURE_COLOR,
            i = this.locDelegate.localize("search.filters.structureColors");
            break;
        case ItemSubType.VANITY_STADIUM_BASE_SEAT_COLOR:
            e = SearchCategory.VANITY_STADIUM_BASE_SEAT_COLOR,
            i = this.locDelegate.localize("search.filters.seatColors");
            break;
        case ItemSubType.VANITY_PYROTECHNICS_FLAME_CANNON:
            e = SearchCategory.VANITY_PYROTECHNICS_FLAME_CANNON,
            i = this.locDelegate.localize("search.filters.pyroFlames");
            break;
        case ItemSubType.VANITY_PYROTECHNICS_CONFETTI_CANNON:
            e = SearchCategory.VANITY_PYROTECHNICS_CONFETTI_CANNON,
            i = this.locDelegate.localize("search.filters.pyroConfetti");
            break;
        case ItemSubType.VANITY_PYROTECHNICS_SPARKLER_CANNON:
            e = SearchCategory.VANITY_PYROTECHNICS_SPARKLER_CANNON,
            i = this.locDelegate.localize("search.filters.pyroSparkles");
            break;
        case ItemSubType.VANITY_PYROTECHNICS_FIREWORKS_CANNON:
            e = SearchCategory.VANITY_PYROTECHNICS_FIREWORKS_CANNON,
            i = this.locDelegate.localize("search.filters.pyroFireworks");
            break;
        case ItemSubType.VANITY_AUDIO_ANTHEM_MUSIC:
            e = SearchCategory.VANITY_AUDIO_ANTHEM_MUSIC,
            i = this.locDelegate.localize("search.filters.anthems");
            break;
        case ItemSubType.VANITY_AUDIO_GOAL_SCORE:
            e = SearchCategory.VANITY_AUDIO_GOAL_SCORE,
            i = this.locDelegate.localize("search.filters.goalSound");
            break;
        case ItemSubType.VANITY_AUDIO_CLUB_NICKNAME:
            e = SearchCategory.VANITY_AUDIO_CLUB_NICKNAME,
            i = this.locDelegate.localize("search.filters.nicknames");
            break;
        case ItemSubType.VANITY_AUDIO_CROWD_CHANT:
            e = SearchCategory.VANITY_AUDIO_CROWD_CHANT,
            i = this.locDelegate.localize("search.filters.chants");
            break;
        case ItemSubType.VANITY_PLAYER_CELEBRATION:
            e = SearchCategory.VANITY_PLAYER_CELEBRATION,
            i = this.locDelegate.localize("search.filters.celebrations");
            break;
        case ItemSubType.VANITY_TINTED_BANNER:
            e = SearchCategory.VANITY_TINTED_BANNER,
            i = this.locDelegate.localize("search.filters.tintedBanners");
            break;
        case ItemSubType.VANITY_POLE_BANNER:
            e = SearchCategory.VANITY_POLE_BANNER,
            i = this.locDelegate.localize("search.filters.poleBanners");
            break;
        case ItemSubType.VANITY_CROWD_CARDS:
            e = SearchCategory.VANITY_CROWD_CARDS,
            i = this.locDelegate.localize("search.filters.crowdCards");
            break;
        case ItemSubType.VANITY_VIP_AREA:
            e = SearchCategory.VANITY_VIP_AREA,
            i = this.locDelegate.localize("search.filters.vipArea");
            break;
        default:
            DebugUtils.Assert(!1, "Unexpected ItemSubType value received.")
        }
        return new UTDataProviderEntryDTO(t,e,i)
    }
    ,
    UTDataProviderFactory.prototype.getDynamicSubTypesDP = function(t) {
        var e = this;
        return t.map(function(t) {
            return e.createItemSubTypeEntry(t)
        })
    }
    ,
    UTDataProviderFactory.prototype.getClubVanityTypesDP = function() {
        return this.getDynamicSubTypesDP([ItemSubType.KIT, ItemSubType.BALL, ItemSubType.BADGE, ItemSubType.VANITY_PLAYER_CELEBRATION, ItemSubType.VANITY_AUDIO_ANTHEM_MUSIC, ItemSubType.VANITY_AUDIO_CLUB_NICKNAME, ItemSubType.VANITY_AUDIO_GOAL_SCORE, ItemSubType.VANITY_AUDIO_CROWD_CHANT])
    }
    ,
    UTDataProviderFactory.prototype.getPitchVanityTypesDP = function(t) {
        var e = this.getDynamicSubTypesDP([ItemSubType.VANITY_STADIUM_BASE_PITCH_LINE_COLOR, ItemSubType.VANITY_STADIUM_BASE_PITCH_GOAL_PACKAGE, ItemSubType.VANITY_PYROTECHNICS_FLAME_CANNON, ItemSubType.VANITY_PYROTECHNICS_CONFETTI_CANNON, ItemSubType.VANITY_PYROTECHNICS_SPARKLER_CANNON, ItemSubType.VANITY_PYROTECHNICS_FIREWORKS_CANNON]);
        return t || e.push(this.createItemSubTypeEntry(ItemSubType.VANITY_STADIUM_BASE_PITCH_MOW_PATTERN)),
        e
    }
    ,
    UTDataProviderFactory.prototype.getTrophiesVanityTypesDP = function() {
        return [this.createItemSubTypeEntry(ItemSubType.VANITY_STADIUM_BASE_PITCH_PROP)]
    }
    ,
    UTDataProviderFactory.prototype.getStandsVanityTypesDP = function(t) {
        var e = this.getDynamicSubTypesDP([ItemSubType.VANITY_TIFO_BASE, ItemSubType.VANITY_TIFO_BIG, ItemSubType.VANITY_TIFO_MOVING, ItemSubType.VANITY_TINTED_BANNER, ItemSubType.VANITY_POLE_BANNER, ItemSubType.VANITY_CROWD_CARDS]);
        return t || e.push(this.createItemSubTypeEntry(ItemSubType.VANITY_TIFO_ANIMATED)),
        e
    }
    ,
    UTDataProviderFactory.prototype.getStadiumVanityTypesDP = function() {
        return this.getDynamicSubTypesDP([ItemSubType.STADIUM, ItemSubType.VANITY_STADIUM_THEME, ItemSubType.VANITY_STADIUM_BASE_STRUCTURE_COLOR, ItemSubType.VANITY_STADIUM_BASE_SEAT_COLOR, ItemSubType.VANITY_VIP_AREA])
    }
    ,
    UTDataProviderFactory.prototype.getTeamDP = function(e) {
        var t = this.teamConfigRepo.getTeams();
        JSUtils.isNumber(e) && 0 <= e && (t = t.filter(function(t) {
            return t.league === e
        }));
        var i = t.sort(this.sortByName.bind(this)).map(function(t) {
            return new UTDataProviderEntryDTO(t.id,t.id.toString(),t.name)
        });
        return [new UTDataProviderEntryDTO(-1,"-1",this.locDelegate.localize("roles.defaultRole"))].concat(i)
    }
    ,
    UTDataProviderFactory.prototype.getCustomTeamDP = function(t) {
        var e = this.teamConfigRepo.getCustomTeams().map(function(t) {
            return new UTDataProviderEntryDTO(t.id,t.id.toString(),t.name)
        });
        return t && e.unshift(new UTDataProviderEntryDTO(-1,"-1",this.locDelegate.localize("roles.defaultRole"))),
        e
    }
    ,
    UTDataProviderFactory.prototype.getLeagueDP = function(t) {
        var s = this
          , a = ["ENG 1", "ENG 2", "ENG 3", "ENG 4", "FRA 1", "FRA 2", "ITA 1", "ITA 2", "GER 1", "GER 2", "GER 3", "ESP 1", "ESP 2"]
          , l = ["AUT 1", "CZE 1"]
          , e = this.teamConfigRepo.getLeagues().sort(function(t, e) {
            var i = 0 <= a.indexOf(t.abbreviation)
              , r = 0 <= a.indexOf(e.abbreviation)
              , n = 0 <= l.indexOf(t.abbreviation)
              , o = 0 <= l.indexOf(e.abbreviation);
            return i != r ? i ? -1 : 1 : n != o ? n ? 1 : -1 : i && r ? a.indexOf(t.abbreviation) - a.indexOf(e.abbreviation) : n && o ? l.indexOf(t.abbreviation) - l.indexOf(e.abbreviation) : s.sortByName(t, e)
        });
        t && (e = e.filter(function(t) {
            return t.id !== REWARDS_LEAGUE_ID
        }));
        var i = e.map(function(t) {
            return new UTDataProviderEntryDTO(t.id,t.id.toString(),t.name + " (" + t.abbreviation + ")")
        });
        return [new UTDataProviderEntryDTO(-1,"-1",this.locDelegate.localize("roles.defaultRole"))].concat(i)
    }
    ,
    UTDataProviderFactory.prototype.getNationDP = function() {
        var e = this
          , t = TOP_NINE_NATIONS.map(function(t) {
            return new UTDataProviderEntryDTO(t,t.toString(),UTLocalizationUtil.nationIdToName(t, e.locDelegate))
        })
          , i = this.teamConfigRepo.getNations().sort(this.sortByName.bind(this)).map(function(t) {
            return new UTDataProviderEntryDTO(t.id,t.id.toString(),t.name)
        });
        return [new UTDataProviderEntryDTO(-1,"-1",this.locDelegate.localize("roles.defaultRole"))].concat(t, i)
    }
    ,
    UTDataProviderFactory.prototype.getPositionModifierDP = function() {
        return [new UTDataProviderEntryDTO(-1,"any",this.locDelegate.localize("roles.defaultRole")), new UTDataProviderEntryDTO(ItemSubType.TRAINING_PLAYER_POS,"ALL",this.locDelegate.localize("posmods.all"))]
    }
    ,
    UTDataProviderFactory.prototype.getPlayerPositionDP = function(t) {
        var l = this
          , e = [];
        t || e.push(new UTDataProviderEntryDTO(-1,"any",this.locDelegate.localize("roles.defaultRole"))),
        e = e.concat([new UTDataProviderEntryDTO(ZONE_DEFENDER_VALUE,ZONE_DEFENDER_VALUE,this.locDelegate.localize("search.positions.zone130")), new UTDataProviderEntryDTO(ZONE_MIDFIELDER_VALUE,ZONE_MIDFIELDER_VALUE,this.locDelegate.localize("search.positions.zone131")), new UTDataProviderEntryDTO(ZONE_ATTACKER_VALUE,ZONE_ATTACKER_VALUE,this.locDelegate.localize("search.positions.zone132"))]),
        t && e.push(new UTDataProviderEntryDTO(ZONE_NO_GK_VALUE,ZONE_NO_GK_VALUE,this.locDelegate.localize("roles.defaultRole")));
        var i = SEARCHABLE_POSITIONS.map(function(t) {
            var e, i, r, n = l.squadRepo.getPosition(t), o = null !== (e = null == n ? void 0 : n.id) && void 0 !== e ? e : -1, s = null !== (i = null == n ? void 0 : n.typeName) && void 0 !== i ? i : BLANK_STR, a = UTLocalizationUtil.positionIdToName(null !== (r = null == n ? void 0 : n.typeId) && void 0 !== r ? r : -1, l.locDelegate);
            return DebugUtils.Assert(JSUtils.isValid(n), "Missing searchable position ID: " + t),
            new UTDataProviderEntryDTO(o,s,a)
        });
        return e.concat(i)
    }
    ,
    UTDataProviderFactory.prototype.getPlayStyleDP = function(t) {
        function MAa(t) {
            return new UTDataProviderEntryDTO(t,t.toString(),UTLocalizationUtil.playStyleIdToName(t, e.locDelegate))
        }
        var e = this
          , i = [new UTDataProviderEntryDTO(-1,"-1",this.locDelegate.localize("roles.defaultRole"))];
        return JSUtils.isBoolean(t) && t || (i = i.concat(MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_1), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_2), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_3), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_4), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_5), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_6), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_7), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_8), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_9), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_10), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_11), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_12), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_13), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_14), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_15), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_16), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_17), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_18), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_19))),
        JSUtils.isBoolean(t) && !t || (i = i.concat(MAa(ItemSubType.TRAINING_PLAYERSTYLE_GOALKEEPER_1), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GOALKEEPER_2), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GOALKEEPER_3), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GOALKEEPER_4), MAa(ItemSubType.TRAINING_PLAYERSTYLE_GOALKEEPER_5))),
        i
    }
    ,
    UTDataProviderFactory.prototype.getItemLevelDP = function() {
        return [new UTDataProviderEntryDTO(-1,SearchLevel.ANY,this.locDelegate.localize("roles.defaultRole")), new UTDataProviderEntryDTO(0,SearchLevel.BRONZE,this.locDelegate.localize("search.cardLevels.cardLevel1")), new UTDataProviderEntryDTO(1,SearchLevel.SILVER,this.locDelegate.localize("search.cardLevels.cardLevel2")), new UTDataProviderEntryDTO(2,SearchLevel.GOLD,this.locDelegate.localize("search.cardLevels.cardLevel3"))]
    }
    ,
    UTDataProviderFactory.prototype.getRareItemLevelDP = function() {
        return this.getItemLevelDP().concat(new UTDataProviderEntryDTO(3,SearchLevel.SPECIAL,services.Localization.localize("search.cardLevels.cardLevel4")))
    }
    ,
    UTDataProviderFactory.prototype.getItemRarityDP = function(o) {
        var t = []
          , e = repositories.Rarity.values().filter(function(e) {
            var t = !0
              , i = 0 < o.itemSubTypes.filter(function(t) {
                return e.itemSubTypes.includes(t)
            }).length
              , r = 0 < o.itemTypes.filter(function(t) {
                return e.itemTypes.includes(t)
            }).length
              , n = !o.tradableOnly || e.tradeable;
            return o.quality !== SearchLevel.ANY && (t = o.quality === SearchLevel.SPECIAL ? e.id > ItemRarity.LOCK : !0 === e.levels),
            n && e.searchable && e.id !== ItemRarity.LOCK && e.id !== ItemRarity.DEFAULT && (r || i) && t
        }).sort(function(t, e) {
            return t.id <= ItemRarity.RARE && e.id > ItemRarity.RARE ? -1 : e.id <= ItemRarity.RARE && t.id > ItemRarity.RARE ? 1 : services.Localization.localize("item.raretype" + t.id).localeCompare(services.Localization.localize("item.raretype" + e.id))
        });
        return t.push(new UTDataProviderEntryDTO(-1,-1,services.Localization.localize("roles.defaultRole"))),
        t.concat(e.map(function(t) {
            return new UTDataProviderEntryDTO(t.id,t.id,services.Localization.localize("item.raretype" + t.id))
        }))
    }
    ,
    UTDataProviderFactory.prototype.getFormationDP = function() {
        return this.squadRepo.getFormations().map(function(t) {
            return new UTDataProviderEntryDTO(t.getId(),t.getName(),t.getDisplayName())
        })
    }
    ,
    UTDataProviderFactory.prototype.getStaffTypeDP = function() {
        return [new UTDataProviderEntryDTO(-1,SearchCategory.ANY,this.locDelegate.localize("roles.defaultRole")), new UTDataProviderEntryDTO(0,SearchCategory.MANAGER,this.locDelegate.localize("roles.manager"))]
    }
    ,
    UTDataProviderFactory.prototype.getConsumableTypeDP = function() {
        return [new UTDataProviderEntryDTO(2,SearchCategory.POSITION,this.locDelegate.localize("trainingtype.position")), new UTDataProviderEntryDTO(3,SearchCategory.PLAYSTYLE,this.locDelegate.localize("trainingtype.playStyle")), new UTDataProviderEntryDTO(4,SearchCategory.MANAGER_LEAGUE,this.locDelegate.localize("trainingtype.managerLeague")), new UTDataProviderEntryDTO(5,SearchCategory.CONTRACT,this.locDelegate.localize("devtype.contract")), new UTDataProviderEntryDTO(7,SearchCategory.HEALING,this.locDelegate.localize("devtype.healing"))]
    }
    ,
    UTDataProviderFactory.prototype.getVanityAuthenticityDP = function() {
        return [new UTDataProviderEntryDTO(-1,"any",this.locDelegate.localize("roles.defaultRole")), new UTDataProviderEntryDTO(0,"inauthentic",this.locDelegate.localize("authenticity.no")), new UTDataProviderEntryDTO(1,"authentic",this.locDelegate.localize("authenticity.yes"))]
    }
    ,
    UTDataProviderFactory.prototype.getVanityColorDP = function() {
        return [new UTDataProviderEntryDTO(ItemColor.INVALID,"any",this.locDelegate.localize("roles.defaultRole")), new UTDataProviderEntryDTO(ItemColor.RED,ItemColor[ItemColor.RED],this.locDelegate.localize("color.red")), new UTDataProviderEntryDTO(ItemColor.BROWN,ItemColor[ItemColor.BROWN],this.locDelegate.localize("color.brown")), new UTDataProviderEntryDTO(ItemColor.ORANGE,ItemColor[ItemColor.ORANGE],this.locDelegate.localize("color.orange")), new UTDataProviderEntryDTO(ItemColor.YELLOW,ItemColor[ItemColor.YELLOW],this.locDelegate.localize("color.yellow")), new UTDataProviderEntryDTO(ItemColor.GREEN,ItemColor[ItemColor.GREEN],this.locDelegate.localize("color.green")), new UTDataProviderEntryDTO(ItemColor.BLUE,ItemColor[ItemColor.BLUE],this.locDelegate.localize("color.blue")), new UTDataProviderEntryDTO(ItemColor.PURPLE,ItemColor[ItemColor.PURPLE],this.locDelegate.localize("color.purple")), new UTDataProviderEntryDTO(ItemColor.VIOLET,ItemColor[ItemColor.VIOLET],this.locDelegate.localize("color.violet")), new UTDataProviderEntryDTO(ItemColor.PINK,ItemColor[ItemColor.PINK],this.locDelegate.localize("color.pink")), new UTDataProviderEntryDTO(ItemColor.WHITE,ItemColor[ItemColor.WHITE],this.locDelegate.localize("color.white")), new UTDataProviderEntryDTO(ItemColor.GRAY,ItemColor[ItemColor.GRAY],this.locDelegate.localize("color.gray")), new UTDataProviderEntryDTO(ItemColor.BLACK,ItemColor[ItemColor.BLACK],this.locDelegate.localize("color.black"))]
    }
    ,
    UTDataProviderFactory.prototype.getSortTypeDP = function() {
        return [new UTDataProviderEntryDTO(SearchSortID.VALUE_DESC,SearchSortOrder.DESCENDING,this.locDelegate.localize("search.sort.highestValue")), new UTDataProviderEntryDTO(SearchSortID.VALUE_ASC,SearchSortOrder.ASCENDING,this.locDelegate.localize("search.sort.lowestValue")), new UTDataProviderEntryDTO(SearchSortID.RATING_DESC,SearchSortOrder.DESCENDING,this.locDelegate.localize("search.sort.highestRating")), new UTDataProviderEntryDTO(SearchSortID.RATING_ASC,SearchSortOrder.ASCENDING,this.locDelegate.localize("search.sort.lowestRating")), new UTDataProviderEntryDTO(SearchSortID.RECENCY_DESC,SearchSortOrder.DESCENDING,this.locDelegate.localize("search.sort.mostRecent"))]
    }
    ,
    UTDataProviderFactory.prototype.getStaffSortTypeDP = function() {
        return [new UTDataProviderEntryDTO(SearchSortID.VALUE_DESC,SearchSortOrder.DESCENDING,this.locDelegate.localize("search.sort.highestValue")), new UTDataProviderEntryDTO(SearchSortID.VALUE_ASC,SearchSortOrder.ASCENDING,this.locDelegate.localize("search.sort.lowestValue")), new UTDataProviderEntryDTO(SearchSortID.RECENCY_DESC,SearchSortOrder.DESCENDING,this.locDelegate.localize("search.sort.mostRecent"))]
    }
    ,
    UTDataProviderFactory.prototype.getTacticBuildUpStyleDP = function() {
        return [new UTDataProviderEntryDTO(0,TacticBuildUpPlayStyle.SLOW_BUILD_UP,this.locDelegate.localize("tactics.mentality.style.buildup.0")), new UTDataProviderEntryDTO(1,TacticBuildUpPlayStyle.BALANCED,this.locDelegate.localize("tactics.mentality.style.buildup.3")), new UTDataProviderEntryDTO(2,TacticBuildUpPlayStyle.LONG_BALL,this.locDelegate.localize("tactics.mentality.style.buildup.2")), new UTDataProviderEntryDTO(3,TacticBuildUpPlayStyle.FAST_BUILD_UP,this.locDelegate.localize("tactics.mentality.style.buildup.1"))]
    }
    ,
    UTDataProviderFactory.prototype.getTacticChanceCreationStyleDP = function() {
        return [new UTDataProviderEntryDTO(0,TacticChanceCreationStyle.POSSESSION,this.locDelegate.localize("tactics.mentality.style.chancecreation.0")), new UTDataProviderEntryDTO(1,TacticChanceCreationStyle.BALANCED,this.locDelegate.localize("tactics.mentality.style.chancecreation.1")), new UTDataProviderEntryDTO(2,TacticChanceCreationStyle.DIRECT_PASSING,this.locDelegate.localize("tactics.mentality.style.chancecreation.2")), new UTDataProviderEntryDTO(3,TacticChanceCreationStyle.FORWARD_RUNS,this.locDelegate.localize("tactics.mentality.style.chancecreation.3"))]
    }
    ,
    UTDataProviderFactory.prototype.getTacticDefensiveStyleDP = function() {
        return [new UTDataProviderEntryDTO(0,SquadMentalityDefensiveStyle.DROP_BACK,this.locDelegate.localize("tactics.mentality.style.defensive.0")), new UTDataProviderEntryDTO(1,SquadMentalityDefensiveStyle.BALANCED,this.locDelegate.localize("tactics.mentality.style.defensive.1")), new UTDataProviderEntryDTO(2,SquadMentalityDefensiveStyle.PRESSURE_ON_HEAVY_TOUCH,this.locDelegate.localize("tactics.mentality.style.defensive.2")), new UTDataProviderEntryDTO(3,SquadMentalityDefensiveStyle.PRESS_AFTER_POSSESSION_LOSS,this.locDelegate.localize("tactics.mentality.style.defensive.3")), new UTDataProviderEntryDTO(4,SquadMentalityDefensiveStyle.CONSTANT_PRESSURE,this.locDelegate.localize("tactics.mentality.style.defensive.4"))]
    }
    ,
    UTDataProviderFactory.prototype.getUndoDiscardDateFilterDP = function() {
        for (var t = [], e = 0; e < 7; e++) {
            var i = new Date;
            i.setDate(i.getDate() - e),
            i.setHours(23, 59, 59),
            t.push(new UTDataProviderEntryDTO(e,i.getTime(),this.locDelegate.localize("undoDiscard.option.date", [this.locDelegate.localize(MONTH_NAMES[i.getMonth()]), i.getDate().toString()])))
        }
        return t
    }
    ,
    UTDataProviderFactory.prototype.getObjectiveGroupSortDP = function() {
        return [new UTDataProviderEntryDTO(0,ObjectiveSortOption.NONE,this.locDelegate.localize("scmp.sort.none")), new UTDataProviderEntryDTO(1,ObjectiveSortOption.RECENT,this.locDelegate.localize("scmp.sort.recent")), new UTDataProviderEntryDTO(2,ObjectiveSortOption.EXPIRY,this.locDelegate.localize("scmp.sort.expiry"))]
    }
    ,
    UTDataProviderFactory.prototype.getObjectiveGroupFilterDP = function() {
        return [new UTDataProviderEntryDTO(0,ObjectiveFilterOption.NONE,this.locDelegate.localize("scmp.filter.none")), new UTDataProviderEntryDTO(1,ObjectiveFilterOption.LOCKED,this.locDelegate.localize("scmp.filter.locked")), new UTDataProviderEntryDTO(2,ObjectiveFilterOption.LOCKED_COMPLETE,this.locDelegate.localize("scmp.filter.lockedcomplete"))]
    }
    ,
    UTDataProviderFactory.prototype.getLeaderboardPlatformFilterDP = function() {
        return [new UTLeaderboardOptionDTO({
            id: "local",
            image: "",
            display: "leaderboard.filters.local",
            default: !0
        }), new UTLeaderboardOptionDTO({
            id: "global",
            image: "",
            display: "leaderboard.filters.global",
            default: !1
        })]
    }
    ,
    UTDataProviderFactory
}(EAObject))
  , UTNimbleMTXItemEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTNimbleMTXItemEntity(t, e) {
        var i = r.call(this) || this;
        return i.id = t,
        i.points = 0,
        i.priceFormatted = "",
        i.sku = e.toString(),
        i.title = "",
        i.isBestValue = !1,
        i.isMostPopular = !1,
        i
    }
    return __extends(UTNimbleMTXItemEntity, r),
    UTNimbleMTXItemEntity.prototype.getLocalImageAssetId = function() {
        return 12e3 <= this.points ? 6 : this.points < 12e3 && 5900 <= this.points ? 5 : this.points < 5900 && 2800 <= this.points ? 4 : this.points < 2800 && 1600 <= this.points ? 3 : this.points < 1600 && 1050 <= this.points ? 2 : this.points < 1050 && 500 <= this.points ? 1 : 0
    }
    ,
    UTNimbleMTXItemEntity
}(EAObject))
  , UTNimbleMTXItemFactory = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTNimbleMTXItemFactory() {
        return t.call(this) || this
    }
    return __extends(UTNimbleMTXItemFactory, t),
    UTNimbleMTXItemFactory.prototype.generateMTXItem = function(t) {
        var e = new UTNimbleMTXItemEntity(t.id,t.sku);
        return e.title = isAndroid() ? t.title.replace(/ *\([^)]*\) */g, " ").trim() : t.title,
        e.priceFormatted = t.priceFormatted,
        e
    }
    ,
    UTNimbleMTXItemFactory.prototype.generateMTXItemArray = function(t) {
        var e = this;
        return t.map(function(t) {
            return e.generateMTXItem(t)
        })
    }
    ,
    UTNimbleMTXItemFactory
}(EAObject))
  , UTSquadSlotEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTSquadSlotEntity(t, e) {
        var i = r.call(this) || this;
        return i._chemistry = 0,
        i._potentialChemistry = 0,
        i._item = factories.Item.createItem(),
        i.onDataUpdated = new EAObservable,
        i.index = t,
        i.position = e,
        i.requirement = null,
        i
    }
    return __extends(UTSquadSlotEntity, r),
    Object.defineProperty(UTSquadSlotEntity.prototype, "chemistry", {
        get: function() {
            return this._chemistry
        },
        set: function(t) {
            this._chemistry = Math.min(Math.max(t, 0), UTSquadSlotEntity.SLOT_MAX_CHEMISTRY)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTSquadSlotEntity.prototype, "potentialChemistry", {
        get: function() {
            return this._potentialChemistry
        },
        set: function(t) {
            this._potentialChemistry = Math.min(Math.max(t, 0), UTSquadSlotEntity.SLOT_MAX_CHEMISTRY)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTSquadSlotEntity.prototype, "item", {
        get: function() {
            return this._item
        },
        set: function(t) {
            this._item && this._item.onDataUpdated.unobserve(this),
            this._item = t,
            this._item.onDataUpdated.observe(this, this._eItemDataUpdated)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTSquadSlotEntity.prototype, "generalPosition", {
        get: function() {
            return this.position ? this.position.typeId : -1
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTSquadSlotEntity.prototype, "uniquePosition", {
        get: function() {
            return this.position ? this.position.id : -1
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTSquadSlotEntity.prototype, "generalPositionName", {
        get: function() {
            return this.position ? this.position.typeName : ""
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTSquadSlotEntity.prototype, "uniquePositionName", {
        get: function() {
            return this.position ? this.position.name : ""
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTSquadSlotEntity.prototype, "inPreferredPosition", {
        get: function() {
            return this._item.isManager() || this.position instanceof UTSquadPositionDTO && this._item && (this._item.isValid() && this._item.preferredPosition === this.generalPosition || this._item.isCustomBrick())
        },
        enumerable: !1,
        configurable: !0
    }),
    UTSquadSlotEntity.prototype.getIndex = function() {
        return this.index
    }
    ,
    UTSquadSlotEntity.prototype.getItem = function() {
        return this.item
    }
    ,
    UTSquadSlotEntity.prototype.setItem = function(t) {
        this.item = t
    }
    ,
    UTSquadSlotEntity.prototype.getKitNumber = function() {
        return this.kitNumber
    }
    ,
    UTSquadSlotEntity.prototype.setKitNumber = function(t) {
        this.kitNumber = t
    }
    ,
    UTSquadSlotEntity.prototype.getChemistry = function() {
        return this.chemistry
    }
    ,
    UTSquadSlotEntity.prototype.setChemistry = function(t) {
        this.chemistry = t
    }
    ,
    UTSquadSlotEntity.prototype.setPosition = function(t) {
        this.position = t
    }
    ,
    UTSquadSlotEntity.prototype.getGeneralPosition = function() {
        return this.generalPosition
    }
    ,
    UTSquadSlotEntity.prototype.getUniquePosition = function() {
        return this.uniquePosition
    }
    ,
    UTSquadSlotEntity.prototype.getGeneralPositionName = function() {
        return this.generalPositionName
    }
    ,
    UTSquadSlotEntity.prototype.getUniquePositionName = function() {
        return this.uniquePositionName
    }
    ,
    UTSquadSlotEntity.prototype.getRequirement = function() {
        return this.requirement
    }
    ,
    UTSquadSlotEntity.prototype.setRequirement = function(t) {
        this.requirement = t
    }
    ,
    UTSquadSlotEntity.prototype.isRegularBrick = function() {
        return !!this.requirement && this.requirement.isRegularBrickType()
    }
    ,
    UTSquadSlotEntity.prototype.isCustomBrick = function() {
        return !!this.requirement && this.requirement.isCustomBrickType()
    }
    ,
    UTSquadSlotEntity.prototype.isBrick = function() {
        return this.isRegularBrick() || this.isCustomBrick()
    }
    ,
    UTSquadSlotEntity.prototype.isValid = function() {
        return !!this._item && this._item.isValid()
    }
    ,
    UTSquadSlotEntity.prototype._eItemDataUpdated = function(t, e, i) {
        this.onDataUpdated.notify(this, {
            item: e
        })
    }
    ,
    UTSquadSlotEntity.SLOT_MAX_CHEMISTRY = 3,
    UTSquadSlotEntity
}(EAObject))
  , UTNullSquadSlotEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTNullSquadSlotEntity() {
        return t.call(this, -1, null) || this
    }
    return __extends(UTNullSquadSlotEntity, t),
    Object.defineProperty(UTNullSquadSlotEntity.prototype, "chemistry", {
        get: function() {
            return this._chemistry
        },
        set: function(t) {},
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTNullSquadSlotEntity.prototype, "item", {
        get: function() {
            return this._item
        },
        set: function(t) {},
        enumerable: !1,
        configurable: !0
    }),
    UTNullSquadSlotEntity.prototype.setPosition = function(t) {}
    ,
    UTNullSquadSlotEntity.prototype.setRequirement = function(t) {}
    ,
    UTNullSquadSlotEntity
}(UTSquadSlotEntity))
  , UTSBCPlayerRequirementDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTSBCPlayerRequirementDTO(t, e) {
        var i = r.call(this) || this;
        return i.index = t.index,
        i.playerType = t.playerType,
        i.elgReq = e,
        i
    }
    return __extends(UTSBCPlayerRequirementDTO, r),
    UTSBCPlayerRequirementDTO.prototype.isRegularBrickType = function() {
        return this.playerType === SBCPlayerRequirementType.BRICK
    }
    ,
    UTSBCPlayerRequirementDTO.prototype.isCustomBrickType = function() {
        return this.playerType === SBCPlayerRequirementType.CUSTOM_BRICK
    }
    ,
    UTSBCPlayerRequirementDTO
}(EAObject))
  , UTSquadPositionDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTSquadPositionDTO(t, e) {
        var i = r.call(this) || this;
        return i.id = t.uniqueId,
        i.typeId = t.typeId,
        i.name = t.uniqueName,
        i.typeName = t.typeName,
        i.bonusLookup = e,
        i
    }
    return __extends(UTSquadPositionDTO, r),
    UTSquadPositionDTO.prototype.getId = function() {
        return this.id
    }
    ,
    UTSquadPositionDTO.prototype.getTypeId = function() {
        return this.typeId
    }
    ,
    UTSquadPositionDTO.prototype.getName = function() {
        return this.name
    }
    ,
    UTSquadPositionDTO.prototype.getTypeName = function() {
        return this.typeName
    }
    ,
    UTSquadPositionDTO.prototype.getBonus = function(t) {
        return this.bonusLookup[t] || 0
    }
    ,
    UTSquadPositionDTO
}(EAObject))
  , UTSquadFormationDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(n) {
    function UTSquadFormationDTO(t, e, i) {
        var r = n.call(this) || this;
        return r.displayName = services.Localization.localize("global.formation." + t.name),
        r.generalPositions = t.generalPositionSlots,
        r.id = t.id,
        r.name = t.name,
        r.positions = i,
        r.teamBonus = e,
        r.uniquePositions = t.uniquePositionSlots,
        r
    }
    return __extends(UTSquadFormationDTO, n),
    UTSquadFormationDTO.prototype.getId = function() {
        return this.id
    }
    ,
    UTSquadFormationDTO.prototype.getName = function() {
        return this.name
    }
    ,
    UTSquadFormationDTO.prototype.getDisplayName = function() {
        return this.displayName
    }
    ,
    UTSquadFormationDTO.prototype.getPositions = function() {
        return this.positions
    }
    ,
    UTSquadFormationDTO.prototype.getPosition = function(t) {
        return this.positions[t] || null
    }
    ,
    UTSquadFormationDTO.prototype.getTeamBonus = function(t) {
        return this.teamBonus[t] || 0
    }
    ,
    UTSquadFormationDTO
}(EAObject))
  , UTSquadParameterChemistryVO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(n) {
    function UTSquadParameterChemistryVO(t) {
        var e = n.call(this) || this
          , i = e.calculatePoints(t.contributions, t.thresholds)
          , r = e.calculatePoints(t.contributions + t.missed, t.thresholds);
        return e.contributions = t.contributions,
        e.contributionThresholds = t.thresholds.map(function(t) {
            return t.requirement
        }).sort(function(t, e) {
            return t - e
        }),
        e.metaId = t.metaId,
        e.missed = t.missed,
        e.points = i,
        e.missedPoints = r - i,
        e.typeId = t.typeId,
        e
    }
    return __extends(UTSquadParameterChemistryVO, n),
    Object.defineProperty(UTSquadParameterChemistryVO.prototype, "potentialContributions", {
        get: function() {
            return this.contributions + this.missed
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTSquadParameterChemistryVO.prototype, "potentialPoints", {
        get: function() {
            return this.points + this.missedPoints
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTSquadParameterChemistryVO.prototype, "currentThresholdIndex", {
        get: function() {
            return this.calculateThresholdIndex(this.contributions)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTSquadParameterChemistryVO.prototype, "potentialThresholdIndex", {
        get: function() {
            return this.calculateThresholdIndex(this.potentialContributions)
        },
        enumerable: !1,
        configurable: !0
    }),
    UTSquadParameterChemistryVO.prototype.calculateThresholdIndex = function(t) {
        for (var e = 0; e < this.contributionThresholds.length; e++)
            if (t < this.contributionThresholds[e])
                return e;
        return this.contributionThresholds.length - 1
    }
    ,
    UTSquadParameterChemistryVO.prototype.calculatePoints = function(i, t) {
        return t.reduce(function(t, e) {
            return i >= e.requirement ? t += e.points : t
        }, 0)
    }
    ,
    UTSquadParameterChemistryVO.prototype.getThresholdContributionCount = function(t) {
        var e;
        return this.contributionThresholds[t] - (null !== (e = this.contributionThresholds[t - 1]) && void 0 !== e ? e : 0)
    }
    ,
    UTSquadParameterChemistryVO.prototype.getThresholdContributions = function(t) {
        var e, i = null !== (e = this.contributionThresholds[t - 1]) && void 0 !== e ? e : 0;
        return Math.max(this.contributions - i, 0)
    }
    ,
    UTSquadParameterChemistryVO.prototype.getThresholdPotentialContributions = function(t) {
        var e, i = null !== (e = this.contributionThresholds[t - 1]) && void 0 !== e ? e : 0;
        return Math.max(this.potentialContributions - i, 0)
    }
    ,
    UTSquadParameterChemistryVO.prototype.equals = function(t) {
        return t instanceof UTSquadParameterChemistryVO && this.contributions === t.contributions
    }
    ,
    UTSquadParameterChemistryVO.prototype.value = function() {
        return this.contributions
    }
    ,
    UTSquadParameterChemistryVO
}(EAObject))
  , UTSquadSlotChemistryVO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTSquadSlotChemistryVO(t) {
        var e = i.call(this) || this;
        return e.missed = t.missed,
        e.parameters = t.parameters.slice(),
        e.points = t.points,
        e
    }
    return __extends(UTSquadSlotChemistryVO, i),
    Object.defineProperty(UTSquadSlotChemistryVO.prototype, "potentialPoints", {
        get: function() {
            return this.points + this.missed
        },
        enumerable: !1,
        configurable: !0
    }),
    UTSquadSlotChemistryVO.prototype.getPointsByParameter = function(e) {
        var t, i = JSUtils.find(this.parameters, function(t) {
            return t.id === e
        });
        return null !== (t = null == i ? void 0 : i.points) && void 0 !== t ? t : 0
    }
    ,
    UTSquadSlotChemistryVO.prototype.equals = function(t) {
        return t instanceof UTSquadSlotChemistryVO && this.points === t.points && this.missed === t.missed
    }
    ,
    UTSquadSlotChemistryVO.prototype.value = function() {
        return this.points
    }
    ,
    UTSquadSlotChemistryVO
}(EAObject))
  , UTSquadChemistryVO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTSquadChemistryVO(t) {
        var e = i.call(this) || this;
        return DebugUtils.Assert(11 === t.slots.length, "Unexpected number of slot chemistry data objects. Found: " + t.slots.length + ". Expected: 11."),
        e.parameters = t.parameters.map(function(t) {
            return new UTSquadParameterChemistryVO(t)
        }),
        e.slots = t.slots.map(function(t) {
            return new UTSquadSlotChemistryVO(t)
        }),
        e.chemistry = e.slots.reduce(function(t, e) {
            return t + e.points
        }, 0),
        e.missed = e.slots.reduce(function(t, e) {
            return t + e.missed
        }, 0),
        e
    }
    return __extends(UTSquadChemistryVO, i),
    Object.defineProperty(UTSquadChemistryVO.prototype, "potentialChemistry", {
        get: function() {
            return this.chemistry + this.missed
        },
        enumerable: !1,
        configurable: !0
    }),
    UTSquadChemistryVO.prototype.getSlotChemistry = function(t) {
        var e;
        return null !== (e = this.slots[t]) && void 0 !== e ? e : new UTSquadSlotChemistryVO({
            missed: 0,
            parameters: [],
            points: 0
        })
    }
    ,
    UTSquadChemistryVO.prototype.getParameterChemistry = function() {
        return this.parameters.slice()
    }
    ,
    UTSquadChemistryVO.prototype.getParameterChemistryByType = function(e) {
        return this.parameters.filter(function(t) {
            return t.typeId === e
        })
    }
    ,
    UTSquadChemistryVO.prototype.equals = function(t) {
        return t instanceof UTSquadChemistryVO && this.chemistry === t.chemistry
    }
    ,
    UTSquadChemistryVO.prototype.value = function() {
        return this.chemistry
    }
    ,
    UTSquadChemistryVO
}(EAObject))
  , UTSquadChemCalculatorUtils = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTSquadChemCalculatorUtils(t) {
        var e = i.call(this) || this;
        return e.paramRepo = t,
        e
    }
    return __extends(UTSquadChemCalculatorUtils, i),
    UTSquadChemCalculatorUtils.prototype.isRestrictedLeague = function(t) {
        return t === UTSquadChemCalculatorUtils.LEGENDS_LEAGUE_ID
    }
    ,
    UTSquadChemCalculatorUtils.prototype.isRestrictedClub = function(t) {
        return t === UTSquadChemCalculatorUtils.LEGENDS_CLUB_ID || t === UTSquadChemCalculatorUtils.LEAGUE_HERO_CLUB_ID
    }
    ,
    UTSquadChemCalculatorUtils.prototype.getContribution = function(t, e) {
        switch (t) {
        case ChemistryParamId.CLUB:
            return e.isLeagueHeroItem() || e.isLegend() || e.isManager() ? 0 : 1;
        case ChemistryParamId.LEAGUE:
            return e.isLeagueHeroItem() ? 2 : e.isLegend() ? 0 : 1;
        case ChemistryParamId.NATION:
            return e.isLegend() ? 2 : 1
        }
    }
    ,
    UTSquadChemCalculatorUtils.prototype.addContributions = function(t, e, i, r, n) {
        var o, s;
        if (!(i <= 0)) {
            var a = t.get(i);
            a || (a = {
                metaId: i,
                missed: 0,
                contributions: 0,
                thresholds: null !== (s = null === (o = this.paramRepo.getParameter(e)) || void 0 === o ? void 0 : o.thresholds) && void 0 !== s ? s : [],
                typeId: e
            },
            t.set(i, a)),
            n ? a.contributions += r : a.missed += r
        }
    }
    ,
    UTSquadChemCalculatorUtils.prototype.canContribute = function(t) {
        return t.isValid() || t.isCustomBrick()
    }
    ,
    UTSquadChemCalculatorUtils.prototype.calculate = function(_, t, e) {
        var y = this
          , i = t.slice(0, UTSquadChemCalculatorUtils.FIELD_PLAYERS)
          , f = new EAHashTable
          , m = new EAHashTable
          , T = new EAHashTable
          , g = this.paramRepo.getParameter(ChemistryParamId.CLUB)
          , v = this.paramRepo.getParameter(ChemistryParamId.LEAGUE)
          , E = this.paramRepo.getParameter(ChemistryParamId.NATION)
          , S = {
            parameters: [],
            slots: []
        }
          , b = UTSquadChemCalculatorUtils.SLOT_MAX_CHEMISTRY;
        return DebugUtils.Assert(11 === i.length, "Unexpected number of player items. Found: " + i.length + ". Expected: 11."),
        i.concat(e).forEach(function(t, e) {
            var i, r;
            if (y.canContribute(t)) {
                var n = null !== (r = null === (i = _.getPosition(e)) || void 0 === i ? void 0 : i.typeId) && void 0 !== r ? r : -1
                  , o = t.preferredPosition === n
                  , s = y.getContribution(ChemistryParamId.CLUB, t)
                  , a = y.getContribution(ChemistryParamId.LEAGUE, t)
                  , l = y.getContribution(ChemistryParamId.NATION, t);
                y.isRestrictedClub(t.teamId) || y.addContributions(f, ChemistryParamId.CLUB, t.teamId, s, o),
                y.isRestrictedLeague(t.leagueId) || y.addContributions(m, ChemistryParamId.LEAGUE, t.leagueId, a, o),
                y.addContributions(T, ChemistryParamId.NATION, t.nationId, l, o)
            }
        }),
        i.forEach(function(t, e) {
            var i, r, n = null !== (r = null === (i = _.getPosition(e)) || void 0 === i ? void 0 : i.typeId) && void 0 !== r ? r : -1, o = t.preferredPosition === n, s = t.isLegend() || t.isCharityItem() || t.isLeagueHeroItem(), a = {
                missed: 0,
                parameters: [],
                points: 0
            };
            if (y.canContribute(t)) {
                if (s && o && (a.points = b),
                g) {
                    var l = f.get(t.teamId)
                      , c = {
                        id: ChemistryParamId.CLUB,
                        points: 0
                    };
                    l && 0 < l.contributions && (l.contributions > g.requirement && (l.contributions = g.requirement),
                    g.thresholds.forEach(function(t) {
                        l.contributions >= t.requirement && (o ? (a.points += t.points,
                        c.points += t.points) : a.missed += t.points)
                    })),
                    a.parameters.push(c)
                }
                if (v) {
                    var u = m.get(t.leagueId)
                      , p = {
                        id: ChemistryParamId.LEAGUE,
                        points: 0
                    };
                    u && 0 < u.contributions && (u.contributions > v.requirement && (u.contributions = v.requirement),
                    v.thresholds.forEach(function(t) {
                        u.contributions >= t.requirement && (o ? (a.points += t.points,
                        p.points += t.points) : a.missed += t.points)
                    })),
                    a.parameters.push(p)
                }
                if (E) {
                    var h = T.get(t.nationId)
                      , d = {
                        id: ChemistryParamId.NATION,
                        points: 0
                    };
                    h && 0 < h.contributions && (h.contributions > E.requirement && (h.contributions = E.requirement),
                    E.thresholds.forEach(function(t) {
                        h.contributions >= t.requirement && (o ? (a.points += t.points,
                        d.points += t.points) : a.missed += t.points)
                    })),
                    a.parameters.push(d)
                }
                a.points > b ? (a.points = b,
                a.missed = 0) : a.points + a.missed > b && (a.missed = b - a.points),
                S.slots.push(a)
            } else
                S.slots.push(a)
        }),
        S.parameters = f.values().concat(m.values(), T.values()),
        new UTSquadChemistryVO(S)
    }
    ,
    UTSquadChemCalculatorUtils.FIELD_PLAYERS = 11,
    UTSquadChemCalculatorUtils.SLOT_MAX_CHEMISTRY = 3,
    UTSquadChemCalculatorUtils.LEGENDS_LEAGUE_ID = 2118,
    UTSquadChemCalculatorUtils.LEGENDS_CLUB_ID = 112658,
    UTSquadChemCalculatorUtils.LEAGUE_HERO_CLUB_ID = 114605,
    UTSquadChemCalculatorUtils
}(EAObject))
  , UTSquadEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(n) {
    function UTSquadEntity(t, e, i) {
        var r = n.call(this) || this;
        return r.onDataUpdated = new EAObservable,
        r.chemCalculator = i,
        r._owner = t.owner ? t.owner : 0,
        r._id = JSUtils.isNumber(t.id) ? t.id : -1,
        r._captain = t.captain ? t.captain : 0,
        r._name = t.name ? t.name : "",
        r._formation = t.formation ? t.formation : null,
        r._rating = t.rating ? t.rating : 0,
        r._chemistry = t.chemistry ? t.chemistry : 0,
        r._manager = t.manager ? t.manager : new UTNullSquadSlotEntity,
        r._players = t.players ? t.players : [],
        r._type = t.type ? t.type : SquadType.REGULAR,
        r._valid = !!t.valid && t.valid,
        r._isActive = !1,
        r._isTOTW = !1,
        r._isSBC = !1,
        r._isShowOff = !1,
        r._timestamp = 0,
        r._modified = !1,
        r.simpleBrickIndices = t.simpleBrickIndices ? t.simpleBrickIndices : [],
        r.customBrickIndices = t.customBrickIndices ? t.customBrickIndices : [],
        r._squadSaveDelegate = null,
        r._squadDAO = e,
        r._mentalities = new EAHashTable,
        r.calculateChemistry(),
        JSUtils.isNumber(t.chemistry) && (r._chemistry = t.chemistry),
        r._players.forEach(function(t) {
            t.onDataUpdated.observe(r, r._eSlotDataUpdated),
            t.item.concept && t.index < UTSquadEntity.FIELD_PLAYERS && r._type === SquadType.REGULAR && (r._type = SquadType.CONCEPT)
        }, r),
        r._manager.onDataUpdated.observe(r, r._eSlotDataUpdated),
        r
    }
    return __extends(UTSquadEntity, n),
    UTSquadEntity.prototype.getSlotChemistry = function(t) {
        return this.getSlot(t).chemistry
    }
    ,
    UTSquadEntity.prototype.save = function() {
        var i = this
          , r = new EAObservable;
        return this._squadSaveDelegate ? this._squadSaveDelegate.save(this).observe(this, function(t, e) {
            t.unobserve(i),
            r.notify(e),
            e.success && (i.setCacheTimestamp(Date.now()),
            i._modified = !1,
            getDefaultDispatcher().notify(AppNotification.SQUAD_SAVE, i, {
                squad: i
            }))
        }) : this._squadDAO.save(this).observe(this, function(t, e) {
            t.unobserve(i),
            r.notify(e),
            e.success && (i.setCacheTimestamp(Date.now()),
            i._modified = !1,
            getDefaultDispatcher().notify(AppNotification.SQUAD_SAVE, i, {
                squad: i
            }))
        }),
        r
    }
    ,
    UTSquadEntity.getZoneForPosition = function(t) {
        return t < 1 ? PlayerZoneEnum.GOALKEEPERS : t < 9 ? PlayerZoneEnum.DEFENDERS : t < 19 ? PlayerZoneEnum.MIDFIELDERS : t <= 27 ? PlayerZoneEnum.ATTACKERS : null
    }
    ,
    UTSquadEntity.prototype.setCacheTimestamp = function(t) {
        this._timestamp = t
    }
    ,
    UTSquadEntity.prototype.getOwner = function() {
        return this._owner
    }
    ,
    UTSquadEntity.prototype.getId = function() {
        return this._id
    }
    ,
    UTSquadEntity.prototype.getCaptain = function() {
        return this._captain
    }
    ,
    UTSquadEntity.prototype.getManager = function() {
        return this._manager
    }
    ,
    UTSquadEntity.prototype.getPlayer = function(t) {
        return DebugUtils.Assert(this._isValidPlayerSlot(t), "[Squad::getPlayer] Invalid slot value provided."),
        this.getSlot(t)
    }
    ,
    UTSquadEntity.prototype.getPlayers = function() {
        return this._players
    }
    ,
    UTSquadEntity.prototype.getFieldPlayers = function() {
        return this._players.slice(0, UTSquadEntity.FIELD_PLAYERS)
    }
    ,
    UTSquadEntity.prototype.getSubPlayers = function() {
        return this._players.slice(UTSquadEntity.FIELD_PLAYERS, UTSquadEntity.FIELD_PLAYERS + UTSquadEntity.SUB_PLAYERS)
    }
    ,
    UTSquadEntity.prototype.getReservePlayers = function() {
        return this._players.slice(UTSquadEntity.FIELD_PLAYERS + UTSquadEntity.SUB_PLAYERS, UTSquadEntity.TOTAL_PLAYERS)
    }
    ,
    UTSquadEntity.prototype.getSubAndReservePlayers = function() {
        return this._players.slice(UTSquadEntity.FIELD_PLAYERS, UTSquadEntity.TOTAL_PLAYERS)
    }
    ,
    UTSquadEntity.prototype.getFieldAndSubPlayers = function() {
        return this._players.slice(0, UTSquadEntity.FIELD_PLAYERS + UTSquadEntity.SUB_PLAYERS)
    }
    ,
    UTSquadEntity.prototype.getPlayersByZone = function() {
        var i = {};
        return this._players.forEach(function(t) {
            var e = UTSquadEntity.getZoneForPosition(t.uniquePosition);
            e && (i.hasOwnProperty(e) || (i[e] = []),
            i[e].push(t))
        }, this),
        i
    }
    ,
    UTSquadEntity.prototype.getSlot = function(t) {
        return JSUtils.isNumber(t) ? this._getSlotByIndex(t) : t instanceof UTItemEntity ? this._getSlotByItem(t) : new UTNullSquadSlotEntity
    }
    ,
    UTSquadEntity.prototype._getSlotByIndex = function(t) {
        return t === UTSquadEntity.MANAGER_SLOT_INDEX ? this._manager : this._isValidPlayerSlot(t) ? this._players[t] : new UTNullSquadSlotEntity
    }
    ,
    UTSquadEntity.prototype._getSlotByItem = function(e) {
        return this._manager.item.id === e.id && e.isValid() ? this._manager : (e.isValid() ? JSUtils.find(this._players, function(t) {
            return t.item.id === e.id
        }) : JSUtils.find(this._players, function(t) {
            return t.item === e
        })) || new UTNullSquadSlotEntity
    }
    ,
    UTSquadEntity.prototype._getPlayerSlotByItemId = function(e) {
        var t = JSUtils.find(this._players, function(t) {
            return t.item.id === e
        });
        return t || new UTNullSquadSlotEntity
    }
    ,
    UTSquadEntity.prototype.getSlots = function() {
        var t = this._filterBrickIndices(this._players);
        return this._manager && !this.isSBC() && (t = t.concat(this._manager)),
        t
    }
    ,
    UTSquadEntity.prototype.getType = function() {
        return this._type
    }
    ,
    UTSquadEntity.prototype.getName = function() {
        return this._name
    }
    ,
    UTSquadEntity.prototype.setName = function(t, e) {
        this._name = TextUtils.createSquadName(t, e),
        this._modified = !0,
        this.onDataUpdated.notify({
            name: this._name
        })
    }
    ,
    UTSquadEntity.prototype.getFormation = function() {
        return this._formation
    }
    ,
    UTSquadEntity.prototype.setFormation = function(t) {
        var n = this;
        if (!this._formation || this._formation.id !== t.id) {
            this._formation = t,
            this.getFieldPlayers().forEach(function(t) {
                var e, i, r = null === (e = n._formation) || void 0 === e ? void 0 : e.getPosition(t.index);
                DebugUtils.Assert(JSUtils.isValid(r), "Invalid slot index for formation: " + t.index + " " + (null === (i = n._formation) || void 0 === i ? void 0 : i.displayName)),
                r && t.setPosition(r)
            }, this),
            this.updateChemistry();
            var e = this._mentalities.get(SquadMentalityType.BALANCED);
            DebugUtils.Assert(JSUtils.isValid(e), "Could not find balanced tactics mentality."),
            e && e.setFormation(t),
            this._modified = !0,
            this.onDataUpdated.notify({
                slots: this._players.slice(0, UTSquadEntity.FIELD_PLAYERS),
                chemistry: this.getChemistry(),
                formation: this._formation
            })
        }
    }
    ,
    UTSquadEntity.prototype.getStarRating = function() {
        for (var t = this._rating, e = 0; e < STAR_RATING_THRESHOLDS.length; e++)
            if (t <= STAR_RATING_THRESHOLDS[e])
                return e / 2;
        return 5
    }
    ,
    UTSquadEntity.prototype.getRating = function() {
        return this._rating
    }
    ,
    UTSquadEntity.prototype.getChemistry = function() {
        return this._chemistry
    }
    ,
    UTSquadEntity.prototype.getParameterChemistry = function() {
        var t, e;
        return null !== (e = null === (t = this.chemistryVO) || void 0 === t ? void 0 : t.getParameterChemistry()) && void 0 !== e ? e : []
    }
    ,
    UTSquadEntity.prototype.getSortedParameterChemistry = function() {
        return this.getParameterChemistry().sort(function(t, e) {
            return e.points - t.points || e.contributions - t.contributions || e.potentialPoints - t.potentialPoints || e.potentialContributions - t.potentialContributions
        })
    }
    ,
    UTSquadEntity.prototype.getParameterChemistryByType = function(t) {
        var e, i;
        return null !== (i = null === (e = this.chemistryVO) || void 0 === e ? void 0 : e.getParameterChemistryByType(t)) && void 0 !== i ? i : []
    }
    ,
    UTSquadEntity.prototype.setActive = function(t) {
        this._isActive !== t && (this._isActive = t,
        this.onDataUpdated.notify({
            active: this._isActive
        }))
    }
    ,
    UTSquadEntity.prototype.setTOTW = function(t) {
        this._isTOTW = t
    }
    ,
    UTSquadEntity.prototype.setSBC = function(t) {
        this._isSBC = t
    }
    ,
    UTSquadEntity.prototype.setShowOff = function(t) {
        this._isShowOff = t
    }
    ,
    UTSquadEntity.prototype.setSaveDelegate = function(t) {
        this._squadSaveDelegate = t
    }
    ,
    UTSquadEntity.prototype.getNumberOfLegends = function() {
        return this.getNonBrickSlots().reduce(function(t, e) {
            return e.item.isLegend() ? ++t : t
        }, 0)
    }
    ,
    UTSquadEntity.prototype.replaceConceptItem = function(e) {
        var t = JSUtils.find(this.getPlayers(), function(t) {
            return t.item.compareDream(e)
        });
        t && this._addItemToSlot(t, e)
    }
    ,
    UTSquadEntity.prototype._calculateRating = function() {
        var t = this.isSBC() ? this.getFieldPlayers() : this.getFieldAndSubPlayers()
          , e = services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.SQUAD_RATING_FLOAT_CALCULATION_ENABLED)
          , r = 0
          , n = UTSquadEntity.FIELD_PLAYERS;
        if (t.forEach(function(t, e) {
            var i = t.item;
            i.isValid() && (r += i.rating,
            UTSquadEntity.FIELD_PLAYERS <= e && n++)
        }),
        e) {
            var o = r
              , s = o;
            0 < n && (o /= n),
            o = Math.min(o, 99),
            t.forEach(function(t, e) {
                var i = t.item;
                if (i.isValid()) {
                    if (i.rating <= o)
                        return;
                    s += e < UTSquadEntity.FIELD_PLAYERS ? i.rating - o : .5 * (i.rating - o)
                }
            }),
            r = Math.round(s)
        } else {
            var a = Math.min(Math.floor(r / n), 99);
            t.forEach(function(t, e) {
                var i = t.item;
                if (i.isValid()) {
                    if (i.rating <= a)
                        return;
                    r += e < UTSquadEntity.FIELD_PLAYERS ? i.rating - a : Math.floor(.5 * (i.rating - a))
                }
            })
        }
        this._rating = Math.min(Math.max(Math.floor(r / n), 0), 99)
    }
    ,
    UTSquadEntity.prototype.updateChemistry = function() {
        this.calculateChemistry()
    }
    ,
    UTSquadEntity.prototype.calculateChemistry = function() {
        if (DebugUtils.Assert(JSUtils.isValid(this._formation), "Formation not set - unable to calculate chemistry"),
        this._formation) {
            var t = this.getFieldPlayers()
              , i = this.chemCalculator.calculate(this._formation, t.map(function(t) {
                return t.item
            }), this.getManager().item);
            this.chemistryVO = i,
            this._chemistry = i.chemistry,
            t.forEach(function(t) {
                var e = i.getSlotChemistry(t.index);
                t.chemistry = e.points,
                t.potentialChemistry = e.potentialPoints,
                t.clubChemistryPoints = e.getPointsByParameter(ChemistryParamId.CLUB),
                t.leagueChemistryPoints = e.getPointsByParameter(ChemistryParamId.LEAGUE),
                t.nationChemistryPoints = e.getPointsByParameter(ChemistryParamId.NATION)
            })
        }
    }
    ,
    UTSquadEntity.prototype.isCacheExpired = function() {
        return Date.now() > this._timestamp + 3e5
    }
    ,
    UTSquadEntity.prototype.isModified = function() {
        return this._modified
    }
    ,
    UTSquadEntity.prototype.isDream = function() {
        return this._type === SquadType.CONCEPT
    }
    ,
    UTSquadEntity.prototype.isValid = function() {
        return this._valid
    }
    ,
    UTSquadEntity.prototype.isActive = function() {
        return this._isActive
    }
    ,
    UTSquadEntity.prototype.isTOTW = function() {
        return this._isTOTW
    }
    ,
    UTSquadEntity.prototype.isSBC = function() {
        return this._isSBC
    }
    ,
    UTSquadEntity.prototype.isShowOff = function() {
        return this._isShowOff
    }
    ,
    UTSquadEntity.prototype.isStartingElevenComplete = function() {
        return this._slotsHaveValidPlayers(0, UTSquadEntity.FIELD_PLAYERS)
    }
    ,
    UTSquadEntity.prototype.areSubsComplete = function() {
        return this._slotsHaveValidPlayers(UTSquadEntity.FIELD_PLAYERS, UTSquadEntity.FIELD_PLAYERS + UTSquadEntity.SUB_PLAYERS)
    }
    ,
    UTSquadEntity.prototype.areReservesComplete = function() {
        return this._slotsHaveValidPlayers(UTSquadEntity.FIELD_PLAYERS + UTSquadEntity.SUB_PLAYERS, UTSquadEntity.MANAGER_SLOT_INDEX)
    }
    ,
    UTSquadEntity.prototype.isValidForTOTW = function() {
        return this._slotsHaveValidPlayers(0, UTSquadEntity.FIELD_PLAYERS + UTSquadEntity.SUB_PLAYERS)
    }
    ,
    UTSquadEntity.prototype.isSquadFull = function() {
        var t = JSUtils.find(this.getNonBrickSlots(), function(t) {
            return !t.isValid()
        });
        return !JSUtils.isValid(t)
    }
    ,
    UTSquadEntity.prototype.isSquadEmpty = function() {
        var t = JSUtils.find(this._players, function(t) {
            return t.isValid()
        });
        return !JSUtils.isValid(t)
    }
    ,
    UTSquadEntity.prototype.isSquadLoaded = function() {
        if (this._manager.item instanceof UTNullItemEntity)
            return !1;
        var t = JSUtils.find(this._players, function(t) {
            return !(t.item instanceof UTNullItemEntity)
        });
        return JSUtils.isValid(t)
    }
    ,
    UTSquadEntity.prototype._slotsHaveValidPlayers = function(t, e) {
        for (var i = t; i < e; ++i)
            if (!this._getSlotByIndex(i).isValid())
                return !1;
        return !0
    }
    ,
    UTSquadEntity.prototype._isValidPlayerSlot = function(t) {
        return 0 <= t && t < UTSquadEntity.MANAGER_SLOT_INDEX
    }
    ,
    UTSquadEntity.prototype._isValidSlotIndex = function(t) {
        return 0 <= t && t <= UTSquadEntity.MANAGER_SLOT_INDEX
    }
    ,
    UTSquadEntity.prototype.containsDreamItem = function(t) {
        if (this.isDream() && 0 !== t.databaseId)
            for (var e = this._players.length, i = 0; i < e; i++) {
                var r = this._players[i];
                if (r.item.compareDream(t))
                    return r.index
            }
        return -1
    }
    ,
    UTSquadEntity.prototype.containsVariationOfCard = function(t) {
        if (0 !== t.databaseId)
            for (var e = this._players.length, i = 0; i < e; i++) {
                if (this._players[i].item.compareResourceTo(t))
                    return !0
            }
        return !1
    }
    ,
    UTSquadEntity.prototype.containsItem = function(t, e) {
        if (!t.isValid())
            return !1;
        if (t.definitionId === this._manager.item.definitionId)
            return !0;
        for (var i = this._players.length; 0 < i--; ) {
            var r = this._players[i].item;
            if (t.compareResourceTo(r, e) && (t.concept || t.pile === r.pile || r.concept) && (!e || t.isLoaned() === r.isLoaned()))
                return !0
        }
        return !1
    }
    ,
    UTSquadEntity.prototype.hasManager = function() {
        return this._manager.isValid()
    }
    ,
    UTSquadEntity.prototype.swapPlayersByIndex = function(t, e) {
        DebugUtils.Assert(this._isValidPlayerSlot(t), "Invalid slot index provided for first parameter."),
        DebugUtils.Assert(this._isValidPlayerSlot(e), "Invalid slot index provided for second parameter.");
        var i = this.getSlot(t)
          , r = this.getSlot(e)
          , n = i.item
          , o = r.item
          , s = i.kitNumber
          , a = r.kitNumber;
        i.item = o,
        r.item = n,
        i.kitNumber = a,
        r.kitNumber = s,
        this.updateChemistry(),
        this._calculateRating(),
        this.isSBC() && this._updateType(),
        this._modified = !0,
        this.onDataUpdated.notify({
            slots: [i, r],
            chemistry: this.getChemistry(),
            rating: this.getRating(),
            type: this.getType()
        })
    }
    ,
    UTSquadEntity.prototype._addItemToSlot = function(t, e) {
        var i = t.item
          , r = t.index;
        return t.item = e,
        (r < UTSquadEntity.FIELD_PLAYERS || e.isManager()) && this.updateChemistry(),
        r < UTSquadEntity.FIELD_PLAYERS + UTSquadEntity.SUB_PLAYERS && this._calculateRating(),
        this._updateType(),
        i
    }
    ,
    UTSquadEntity.prototype.addItemToSlot = function(t, e) {
        var i = null;
        if (DebugUtils.Assert(this._isValidSlotIndex(t), "Invalid squad slot index: " + t),
        this._isValidSlotIndex(t)) {
            var r = this.getSlot(t);
            i = this._addItemToSlot(r, e),
            this._modified = !0,
            this.onDataUpdated.notify({
                slots: [r],
                chemistry: this.getChemistry(),
                rating: this.getRating(),
                type: this.getType()
            })
        }
        return i
    }
    ,
    UTSquadEntity.prototype._emptySlot = function(t) {
        var e = t.item.isManager() ? new UTItemEntity({
            type: ItemType.MANAGER
        }) : new UTItemEntity;
        e.playStyle = DEFAULT_PLAYSTYLE_ID,
        t.item = e
    }
    ,
    UTSquadEntity.prototype._removeItemFromSlot = function(t) {
        this._emptySlot(t);
        var e = t.index;
        (e < UTSquadEntity.FIELD_PLAYERS || t.item.isManager()) && this.updateChemistry(),
        e < UTSquadEntity.FIELD_PLAYERS + UTSquadEntity.SUB_PLAYERS && this._calculateRating(),
        this._updateType()
    }
    ,
    UTSquadEntity.prototype.removeItemFromSlot = function(t) {
        if (this._isValidSlotIndex(t)) {
            var e = this.getSlot(t);
            this._removeItemFromSlot(e),
            this._modified = !0,
            this.onDataUpdated.notify({
                slots: [e],
                chemistry: this.getChemistry(),
                rating: this.getRating(),
                type: this.getType()
            })
        }
    }
    ,
    UTSquadEntity.prototype.removeItem = function(t) {
        var e = this.getSlot(t);
        e.isValid() && (this._removeItemFromSlot(e),
        this._modified = !0,
        this.onDataUpdated.notify({
            slots: [e],
            chemistry: this.getChemistry(),
            rating: this.getRating(),
            type: this.getType()
        }))
    }
    ,
    UTSquadEntity.prototype.removePlayerById = function(t) {
        var e = this._getPlayerSlotByItemId(t);
        e.isValid() && (this._removeItemFromSlot(e),
        this._modified = !0,
        this.onDataUpdated.notify({
            slots: [e],
            chemistry: this.getChemistry(),
            rating: this.getRating(),
            type: this.getType()
        }))
    }
    ,
    UTSquadEntity.prototype.update = function(t) {
        var e = this
          , i = this.isSquadLoaded();
        this._chemistry = t.getChemistry(),
        this._rating = t.getRating(),
        this._name = t.getName(),
        this._formation = t.getFormation(),
        this._type = t.getType(),
        this._valid = t.isValid(),
        this._captain = t.getCaptain(),
        t.isSquadLoaded() && (this._manager && this._manager.onDataUpdated.unobserve(this),
        this._manager = t.getManager(),
        this._manager.onDataUpdated.observe(this, this._eSlotDataUpdated),
        0 < this._players.length && this._players.forEach(function(t) {
            return t.onDataUpdated.unobserve(e)
        }, this),
        this._players = t.getPlayers(),
        0 < this._players.length && (this.calculateChemistry(),
        this._players.forEach(function(t) {
            return t.onDataUpdated.observe(e, e._eSlotDataUpdated)
        }))),
        i && (this._modified = !0,
        this.onDataUpdated.notify({
            chemistry: this.getChemistry(),
            formation: this.getFormation(),
            name: this.getName(),
            rating: this.getRating(),
            slots: this.getPlayers().concat(this.getManager()),
            type: this.getType()
        }))
    }
    ,
    UTSquadEntity.prototype.setPlayers = function(t, e) {
        var i = this;
        void 0 === e && (e = !1);
        var r = null
          , n = [];
        t = t.slice(0, UTSquadEntity.TOTAL_PLAYERS),
        e && t.forEach(function(t, e) {
            r = i.getSlot(e),
            t && t.isPlayer() && !r.isBrick() && (i._emptySlot(r),
            n.push(r))
        }, this),
        t.forEach(function(t, e) {
            r = i.getSlot(e),
            t && t.isPlayer() && !r.isBrick() && !i.containsVariationOfCard(t) && (i._addItemToSlot(r, t),
            n.includes(r) || n.push(r))
        }, this),
        0 < n.length && (this._modified = !0,
        this.onDataUpdated.notify({
            slots: n,
            chemistry: this.getChemistry(),
            rating: this.getRating(),
            type: this.getType()
        }))
    }
    ,
    UTSquadEntity.prototype.removeAllItems = function(t) {
        var e = this;
        void 0 === t && (t = !1);
        var i = [];
        this.getNonBrickSlots(!0).forEach(function(t) {
            t.isValid() && (e._removeItemFromSlot(t),
            i.push(t))
        }, this);
        var r = 0 < i.length;
        return !t && this.hasManager() && (this._removeItemFromSlot(this._manager),
        i.push(this._manager),
        r = !0),
        r && (this._modified = !0,
        this.onDataUpdated.notify({
            slots: i,
            chemistry: this.getChemistry(),
            rating: this.getRating(),
            type: this.getType()
        })),
        r
    }
    ,
    UTSquadEntity.prototype._updateType = function() {
        var t = SquadType.REGULAR
          , e = this.isSBC() ? this.getFieldPlayers() : this.getPlayers();
        JSUtils.isValid(JSUtils.find(e, function(t) {
            return t.item.concept
        })) && (t = SquadType.CONCEPT),
        this._type = t
    }
    ,
    UTSquadEntity.prototype._filterBrickIndices = function(t) {
        var e = this.getAllBrickIndices();
        return t.filter(function(t) {
            return -1 === e.indexOf(t.index)
        })
    }
    ,
    UTSquadEntity.prototype._filterSimpleBrickIndices = function(t) {
        var e = this;
        return t.filter(function(t) {
            return -1 === e.simpleBrickIndices.indexOf(t.index)
        }, this)
    }
    ,
    UTSquadEntity.prototype.getAllBrickIndices = function() {
        return this.simpleBrickIndices.concat(this.customBrickIndices).sort(function(t, e) {
            return t - e
        })
    }
    ,
    UTSquadEntity.prototype.isSBCSquadEligible = function() {
        var t = JSUtils.find(this.getNonBrickSlots(), function(t) {
            var e = t.item;
            return e.isLoaned() || e.concept || e.isWorldCupItem() || UTItemEntity.isStoryMode(e.definitionId)
        });
        return !JSUtils.isValid(t)
    }
    ,
    UTSquadEntity.prototype.getSBCSlots = function(t) {
        return void 0 === t && (t = !1),
        t ? this._players : this._filterSimpleBrickIndices(this._players)
    }
    ,
    UTSquadEntity.prototype.getNonBrickSlots = function(t) {
        void 0 === t && (t = !1);
        var e = t ? this._players : this.getFieldPlayers();
        return 0 === this.getAllBrickIndices().length ? e : this._filterBrickIndices(e)
    }
    ,
    UTSquadEntity.prototype.getNumOfRequiredPlayers = function() {
        return UTSquadEntity.FIELD_PLAYERS - this.getAllBrickIndices().length
    }
    ,
    UTSquadEntity.prototype.setTacticMentality = function(t) {
        var e = t.getSquadId() === this.getId();
        if (DebugUtils.Assert(e, "Attempted to assign an invalid tactic mentality to the squad."),
        e) {
            var i = this._mentalities.get(t.getId());
            i && i.onDataUpdated.unobserve(this),
            this._mentalities.set(t.getId(), t),
            t.onDataUpdated.observe(this, this._eMentalityDataUpdated)
        }
    }
    ,
    UTSquadEntity.prototype.getTacticMentalities = function() {
        return this._mentalities.values()
    }
    ,
    UTSquadEntity.prototype.getTacticMentalityById = function(t) {
        return this._mentalities.get(t)
    }
    ,
    UTSquadEntity.prototype.getTacticSlotsByMentalityId = function(t) {
        var r = this
          , e = this._mentalities.get(t);
        if (DebugUtils.Assert(JSUtils.isValid(e), "Could not find a mentality for ID: " + t),
        e) {
            var n = e.getFormation();
            if (DebugUtils.Assert(JSUtils.isValid(n), "Could not find a formation for ID: " + t),
            n)
                return e.getPositions().map(function(t, e) {
                    var i = new UTSquadSlotEntity(e,n.getPosition(e));
                    return i.item = r._players[t].item,
                    i
                }, this)
        }
        return []
    }
    ,
    UTSquadEntity.prototype.saveTactics = function() {
        var i = this;
        if (this.isSBC() || this.isTOTW() || this.isShowOff())
            return null;
        var r = this.getTacticMentalities()
          , t = this._squadDAO.saveTacticMentalities(this.getId(), r);
        return t.observe(this, function(t, e) {
            t.unobserve(i),
            e.success && r.forEach(function(t) {
                t.isModified() && (t.setModified(!1),
                t.setCustomized(!0))
            })
        }),
        t
    }
    ,
    UTSquadEntity.prototype.hasModifiedTactics = function() {
        return 0 < this.getTacticMentalities().filter(function(t) {
            return t.isModified()
        }).length
    }
    ,
    UTSquadEntity.prototype._eMentalityDataUpdated = function(t, e, i) {
        var r = this
          , n = {};
        if (n.tactics = {
            mentality: e
        },
        i.buildUpPlayStyle && (n.tactics.buildUpPlayStyle = i.buildUpPlayStyle),
        i.chanceCreationStyle && (n.tactics.chanceCreationStyle = i.chanceCreationStyle),
        i.offensiveWidth && (n.tactics.offensiveWidth = i.offensiveWidth),
        i.offensivePlayersInBox && (n.tactics.offensivePlayersInBox = i.offensivePlayersInBox),
        i.cornerPlayersInBox && (n.tactics.cornerPlayersInBox = i.cornerPlayersInBox),
        i.freeKickPlayersInBox && (n.tactics.freeKickPlayersInBox = i.freeKickPlayersInBox),
        i.defensiveStyle && (n.tactics.defensiveStyle = i.defensiveStyle),
        i.defensiveWidth && (n.tactics.defensiveWidth = i.defensiveWidth),
        i.defensiveDepth && (n.tactics.defensiveDepth = i.defensiveDepth),
        i.instructions && (n.tactics.instructions = i.instructions),
        i.formation && (n.tactics.formation = i.formation),
        e.id === SquadMentalityType.BALANCED) {
            var o = e.getFormation();
            o && this._formation && this._formation.id !== o.id && (this._modified = !0,
            this._formation = o,
            this._mentalities.forEach(function(t) {
                return t.setDefaultFormation(o)
            }),
            this._players.forEach(function(t) {
                var e, i = null === (e = r._formation) || void 0 === e ? void 0 : e.getPosition(t.index);
                i && t.setPosition(i)
            }, this),
            this.updateChemistry(),
            n.formation = this._formation),
            i.positionIds && this.swapPlayersByIndex(i.positionIds[0], i.positionIds[1])
        }
        this.onDataUpdated.notify(n)
    }
    ,
    UTSquadEntity.prototype._eSlotDataUpdated = function(t, e, i) {
        var r = e.index;
        (r < UTSquadEntity.FIELD_PLAYERS || r === UTSquadEntity.MANAGER_SLOT_INDEX) && this.updateChemistry(),
        r < UTSquadEntity.FIELD_PLAYERS + UTSquadEntity.SUB_PLAYERS && this._calculateRating(),
        this._updateType(),
        this._modified = !0,
        this.onDataUpdated.notify({
            slots: [e],
            chemistry: this.getChemistry(),
            rating: this.getRating(),
            type: this.getType()
        })
    }
    ,
    UTSquadEntity.TOTAL_PLAYERS_AND_MANAGER = 24,
    UTSquadEntity.TOTAL_PLAYERS = 23,
    UTSquadEntity.FIELD_PLAYERS = 11,
    UTSquadEntity.TOTAL_MAX_CHEM = 33,
    UTSquadEntity.SUB_PLAYERS = 7,
    UTSquadEntity.RESERVE_PLAYERS = 5,
    UTSquadEntity.MANAGER_SLOT_INDEX = 23,
    UTSquadEntity.NATION_BONUS = 1,
    UTSquadEntity.LEAGUE_BONUS = 1,
    UTSquadEntity.CLUB_BONUS = 1,
    UTSquadEntity
}(EAObject))
  , UTPlayerInstructionsVO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTPlayerInstructionsVO(t) {
        var e = i.call(this) || this;
        return e.positionId = t,
        e.instructions = [],
        e
    }
    return __extends(UTPlayerInstructionsVO, i),
    UTPlayerInstructionsVO.prototype.getPositionId = function() {
        return this.positionId
    }
    ,
    UTPlayerInstructionsVO.prototype.getInstructions = function() {
        return this.instructions
    }
    ,
    UTPlayerInstructionsVO.prototype.setInstructions = function(t) {
        var e = Array.isArray(t) && !t.some(isNaN);
        DebugUtils.Assert(e, "Unable to assign instructions. Expected a numeric array."),
        e && (this.instructions = t.slice())
    }
    ,
    UTPlayerInstructionsVO.prototype.setInstructionsFromBitwiseIntegers = function(t) {
        var e = JSUtils.isNumber(t[0])
          , i = JSUtils.isNumber(t[1]);
        if (this.instructions = [],
        DebugUtils.Assert(e, "Expected a 32-bit integer when assigning instructions to UTPlayerInstructionsVO."),
        DebugUtils.Assert(i, "Expected a 32-bit integer when assigning instructions to UTPlayerInstructionsVO."),
        e && i && (0 !== t[0] || 0 !== t[1]))
            for (var r in TacticPlayerInstruction)
                if (TacticPlayerInstruction.hasOwnProperty(r)) {
                    var n = Number(TacticPlayerInstruction[r]);
                    if (!JSUtils.isNumber(n) || n <= 0)
                        continue;
                    var o = Math.floor((n - 1) / 30)
                      , s = n - 30 * o;
                    t[o] & 1 << s - 1 && this.instructions.push(n)
                }
    }
    ,
    UTPlayerInstructionsVO.prototype.toBitwiseIntegers = function() {
        var r = this
          , n = [0, 0];
        return this.instructions.forEach(function(t) {
            if (DebugUtils.Assert(0 < t, "Encountered an invalid instruction for position ID: " + r.positionId),
            !(t <= 0)) {
                var e = Math.floor((t - 1) / 30)
                  , i = t - 30 * e;
                n[e] |= 1 << i - 1
            }
        }),
        n
    }
    ,
    UTPlayerInstructionsVO.prototype.value = function() {
        return {
            positionId: this.positionId,
            instructions: this.instructions
        }
    }
    ,
    UTPlayerInstructionsVO.prototype.equals = function(t) {
        if (!(t instanceof UTPlayerInstructionsVO))
            return !1;
        var e = this.getInstructions()
          , i = t.getInstructions();
        if (e.length !== i.length)
            return !1;
        for (var r = 0, n = e.length; r < n; r++)
            if (e[r] !== i[r])
                return !1;
        return this.getPositionId() === t.getPositionId()
    }
    ,
    UTPlayerInstructionsVO
}(EAObject))
  , UTPlayerInstructionGroupEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTPlayerInstructionGroupEntity(t) {
        var e = i.call(this) || this;
        return e.id = t,
        e._instructions = [],
        e._selectedInstruction = TacticPlayerInstruction.NO_INSTRUCTION,
        e
    }
    return __extends(UTPlayerInstructionGroupEntity, i),
    UTPlayerInstructionGroupEntity.prototype.getId = function() {
        return this.id
    }
    ,
    UTPlayerInstructionGroupEntity.prototype.addInstruction = function(t) {
        var e = JSUtils.isNumber(t)
          , i = this._instructions.indexOf(t) < 0;
        DebugUtils.Assert(e, "Expected a numeric instruction ID."),
        DebugUtils.Assert(i, "Instruction is already assigned to the group. Ignoring request."),
        e && i && this._instructions.push(t)
    }
    ,
    UTPlayerInstructionGroupEntity.prototype.setSelectedInstruction = function(e, t) {
        DebugUtils.Assert(Array.isArray(e) && !e.some(isNaN), "Expected an array of numbers to search against."),
        DebugUtils.Assert(JSUtils.isNumber(t), "Expected a numeric instruction ID.");
        var i = JSUtils.find(this._instructions, function(t) {
            return 0 <= e.indexOf(t)
        });
        JSUtils.isNumber(i) ? this._selectedInstruction = i : 0 <= this._instructions.indexOf(t) && (this._selectedInstruction = t)
    }
    ,
    UTPlayerInstructionGroupEntity.prototype.getInstructions = function() {
        return this._instructions
    }
    ,
    UTPlayerInstructionGroupEntity.prototype.getSelectedInstruction = function() {
        return this._selectedInstruction
    }
    ,
    UTPlayerInstructionGroupEntity
}(EAObject))
  , UTSquadMentalityEntity = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(_) {
    function UTSquadMentalityEntity(t, e) {
        var i, r, n, o, s, a, l, c, u, p, h, d = _.call(this) || this;
        return d.id = t.id,
        d.onDataUpdated = new EAObservable,
        d.buildUpPlayStyle = null !== (i = t.buildUpPlayStyle) && void 0 !== i ? i : TacticBuildUpPlayStyle.BALANCED,
        d.chanceCreationStyle = null !== (r = t.chanceCreationStyle) && void 0 !== r ? r : TacticChanceCreationStyle.BALANCED,
        d.cornerPlayersInBox = null !== (n = t.cornerPlayersInBox) && void 0 !== n ? n : 3,
        d.customized = null !== (o = t.customized) && void 0 !== o && o,
        d.defensiveDepth = null !== (s = t.defensiveDepth) && void 0 !== s ? s : 5,
        d.defensiveStyle = null !== (a = t.defensiveStyle) && void 0 !== a ? a : SquadMentalityDefensiveStyle.BALANCED,
        d.defensiveWidth = null !== (l = t.defensiveWidth) && void 0 !== l ? l : 5,
        d.formation = null !== (c = t.formation) && void 0 !== c ? c : null,
        d.freeKickPlayersInBox = null !== (u = t.freeKickPlayersInBox) && void 0 !== u ? u : 3,
        d.instructions = new EAHashTable,
        d.modified = null !== (p = t.modified) && void 0 !== p && p,
        d._offensivePlayersInBox = null !== (h = t.offensivePlayersInBox) && void 0 !== h ? h : 5,
        d._offensiveWidth = t.offensiveWidth ? t.offensiveWidth : 5,
        d._positions = t.positions ? t.positions : [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
        d._squadDAO = e,
        d._squadId = t.squadId,
        t.instructions && t.instructions.forEach(function(t) {
            return d.instructions.set(t.getPositionId(), t)
        }),
        d
    }
    return __extends(UTSquadMentalityEntity, _),
    UTSquadMentalityEntity.prototype.getId = function() {
        return this.id
    }
    ,
    UTSquadMentalityEntity.prototype.getSquadId = function() {
        return this._squadId
    }
    ,
    UTSquadMentalityEntity.prototype.getFormation = function() {
        return this.formation
    }
    ,
    UTSquadMentalityEntity.prototype.setFormation = function(t) {
        this.formation && this.formation.getId() === t.getId() || (this.formation = t,
        this._resetInstructions(),
        this._resetPositions(),
        this.modified = !0,
        this.onDataUpdated.notify(this, {
            formation: this.formation,
            instructions: this.instructions.values(),
            positions: this._positions
        }))
    }
    ,
    UTSquadMentalityEntity.prototype.setDefaultFormation = function(t) {
        this.isCustomized() || this.isModified() || this.getId() === SquadMentalityType.BALANCED || (this.formation = t)
    }
    ,
    UTSquadMentalityEntity.prototype.getPositions = function() {
        return this._positions.slice()
    }
    ,
    UTSquadMentalityEntity.prototype.swapPositionsByIndex = function(t, e) {
        var i = JSUtils.isNumber(t) && 0 <= t && t <= 10
          , r = JSUtils.isNumber(e) && 0 <= e && e <= 10;
        if (DebugUtils.Assert(i && r, "Expected a numeric index representing a slot position."),
        i && r) {
            if (this.id !== SquadMentalityType.BALANCED) {
                var n = this._positions[t]
                  , o = this._positions[e];
                this._positions[t] = o,
                this._positions[e] = n
            }
            this.modified = !0,
            this.onDataUpdated.notify(this, {
                positions: this._positions,
                positionIds: [t, e]
            })
        }
    }
    ,
    UTSquadMentalityEntity.prototype._resetPositions = function() {
        this._positions = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    }
    ,
    UTSquadMentalityEntity.prototype.setBuildUpPlayStyle = function(t) {
        t !== this.buildUpPlayStyle && (this.buildUpPlayStyle = t,
        this.modified = !0,
        this.onDataUpdated.notify(this, {
            buildUpPlayStyle: this.buildUpPlayStyle
        }))
    }
    ,
    UTSquadMentalityEntity.prototype.setChanceCreationStyle = function(t) {
        t !== this.chanceCreationStyle && (this.chanceCreationStyle = t,
        this.modified = !0,
        this.onDataUpdated.notify(this, {
            chanceCreationStyle: this.chanceCreationStyle
        }))
    }
    ,
    UTSquadMentalityEntity.prototype.getBuildUpPlayStyle = function() {
        return this.buildUpPlayStyle
    }
    ,
    UTSquadMentalityEntity.prototype.getChanceCreationStyle = function() {
        return this.chanceCreationStyle
    }
    ,
    UTSquadMentalityEntity.prototype.setOffensiveWidth = function(t) {
        if (JSUtils.isNumber(t)) {
            var e = Math.min(Math.max(Math.round(t), UTSquadMentalityEntity.MIN_OFFENSIVE_WIDTH), UTSquadMentalityEntity.MAX_OFFENSIVE_WIDTH);
            this._offensiveWidth !== e && (this._offensiveWidth = e,
            this.modified = !0,
            this.onDataUpdated.notify(this, {
                offensiveWidth: this._offensiveWidth
            }))
        }
    }
    ,
    UTSquadMentalityEntity.prototype.getOffensiveWidth = function() {
        return this._offensiveWidth
    }
    ,
    UTSquadMentalityEntity.prototype.setOffensivePlayersInBox = function(t) {
        if (JSUtils.isNumber(t)) {
            var e = Math.min(Math.max(Math.round(t), UTSquadMentalityEntity.MIN_OFFENSIVE_PLAYERS_IN_BOX), UTSquadMentalityEntity.MAX_OFFENSIVE_PLAYERS_IN_BOX);
            this._offensivePlayersInBox !== e && (this._offensivePlayersInBox = e,
            this.modified = !0,
            this.onDataUpdated.notify(this, {
                offensivePlayersInBox: this._offensivePlayersInBox
            }))
        }
    }
    ,
    UTSquadMentalityEntity.prototype.getOffensivePlayersInBox = function() {
        return this._offensivePlayersInBox
    }
    ,
    UTSquadMentalityEntity.prototype.setCornerPlayersInBox = function(t) {
        if (JSUtils.isNumber(t)) {
            var e = Math.min(Math.max(Math.round(t), UTSquadMentalityEntity.MIN_FREEKICK_PLAYERS_IN_BOX), UTSquadMentalityEntity.MAX_FREEKICK_PLAYERS_IN_BOX);
            this.cornerPlayersInBox !== e && (this.cornerPlayersInBox = e,
            this.modified = !0,
            this.onDataUpdated.notify(this, {
                cornerPlayersInBox: this.cornerPlayersInBox
            }))
        }
    }
    ,
    UTSquadMentalityEntity.prototype.getCornerPlayersInBox = function() {
        return this.cornerPlayersInBox
    }
    ,
    UTSquadMentalityEntity.prototype.setFreeKickPlayersInBox = function(t) {
        if (JSUtils.isNumber(t)) {
            var e = Math.min(Math.max(Math.round(t), UTSquadMentalityEntity.MIN_CORNER_PLAYERS_IN_BOX), UTSquadMentalityEntity.MAX_CORNER_PLAYERS_IN_BOX);
            this.freeKickPlayersInBox !== e && (this.freeKickPlayersInBox = e,
            this.modified = !0,
            this.onDataUpdated.notify(this, {
                freeKickPlayersInBox: this.freeKickPlayersInBox
            }))
        }
    }
    ,
    UTSquadMentalityEntity.prototype.getFreeKickPlayersInBox = function() {
        return this.freeKickPlayersInBox
    }
    ,
    UTSquadMentalityEntity.prototype.setDefensiveStyle = function(t) {
        JSUtils.isNumber(t) && t !== this.defensiveStyle && t >= SquadMentalityDefensiveStyle.DROP_BACK && t <= SquadMentalityDefensiveStyle.CONSTANT_PRESSURE && (this.defensiveStyle = t,
        this.modified = !0,
        this.onDataUpdated.notify(this, {
            defensiveStyle: this.defensiveStyle
        }))
    }
    ,
    UTSquadMentalityEntity.prototype.getDefensiveStyle = function() {
        return this.defensiveStyle
    }
    ,
    UTSquadMentalityEntity.prototype.setDefensiveWidth = function(t) {
        if (JSUtils.isNumber(t)) {
            var e = Math.min(Math.max(Math.round(t), UTSquadMentalityEntity.MIN_DEFENSIVE_WIDTH), UTSquadMentalityEntity.MAX_DEFENSIVE_WIDTH);
            this.defensiveWidth !== e && (this.defensiveWidth = e,
            this.modified = !0,
            this.onDataUpdated.notify(this, {
                defensiveWidth: this.defensiveWidth
            }))
        }
    }
    ,
    UTSquadMentalityEntity.prototype.getDefensiveWidth = function() {
        return this.defensiveWidth
    }
    ,
    UTSquadMentalityEntity.prototype.setDefensiveDepth = function(t) {
        if (JSUtils.isNumber(t)) {
            var e = Math.min(Math.max(Math.round(t), UTSquadMentalityEntity.MIN_DEFENSIVE_DEPTH), UTSquadMentalityEntity.MAX_DEFENSIVE_DEPTH);
            this.defensiveDepth !== e && (this.defensiveDepth = e,
            this.modified = !0,
            this.onDataUpdated.notify(this, {
                defensiveDepth: this.defensiveDepth
            }))
        }
    }
    ,
    UTSquadMentalityEntity.prototype.getDefensiveDepth = function() {
        return this.defensiveDepth
    }
    ,
    UTSquadMentalityEntity.prototype.setInstructionsByPositionId = function(t, e) {
        var i = this.instructions.get(t)
          , r = !1;
        i || (i = new UTPlayerInstructionsVO(t),
        this.instructions.set(t, i),
        r = !0);
        var n = i.getInstructions();
        if (!(r = r || n.length !== e.length))
            for (var o = 0, s = n.length; o < s; o++)
                if (n[o] !== e[o]) {
                    r = !0;
                    break
                }
        r && (i.setInstructions(e),
        this.modified = !0,
        this.onDataUpdated.notify(this, {
            instructions: [i]
        }))
    }
    ,
    UTSquadMentalityEntity.prototype.getInstructionsByPositionId = function(t) {
        var e = this.instructions.get(t);
        return DebugUtils.Assert(JSUtils.isValid(e), "Cannot find player instructions for position ID: " + t),
        e ? e.getInstructions() : []
    }
    ,
    UTSquadMentalityEntity.prototype.getInstructionGroupsByPositionId = function(t) {
        var e, i = this.getInstructionsByPositionId(t), r = [PlayerPosition.SW, PlayerPosition.RWB, PlayerPosition.RB, PlayerPosition.RCB, PlayerPosition.CB, PlayerPosition.LCB, PlayerPosition.LB, PlayerPosition.LWB], n = 4 === (this.formation ? this.formation.positions.reduce(function(t, e) {
            return 0 <= r.indexOf(e.id) ? ++t : t
        }, 0) : 0), o = [];
        switch (t) {
        case PlayerPosition.GK:
            (e = new UTPlayerInstructionGroupEntity(28)).addInstruction(TacticPlayerInstruction.GK_SAVE_ON_CROSSES_COMES_FOR_CROSSES),
            e.addInstruction(TacticPlayerInstruction.GK_SAVE_ON_CROSSES_NORMAL),
            e.addInstruction(TacticPlayerInstruction.GK_SAVE_ON_CROSSES_CAUTIOUS_WITH_CROSSES),
            e.setSelectedInstruction(i, TacticPlayerInstruction.GK_SAVE_ON_CROSSES_NORMAL),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(29)).addInstruction(TacticPlayerInstruction.GK_OUTSIDE_BOX_SWEEPER),
            e.addInstruction(TacticPlayerInstruction.GK_OUTSIDE_BOX_NORMAL),
            e.setSelectedInstruction(i, TacticPlayerInstruction.GK_OUTSIDE_BOX_NORMAL),
            o.push(e);
            break;
        case PlayerPosition.SW:
        case PlayerPosition.RCB:
        case PlayerPosition.CB:
        case PlayerPosition.LCB:
            (e = new UTPlayerInstructionGroupEntity(0)).addInstruction(TacticPlayerInstruction.JOIN_THE_ATTACK),
            e.addInstruction(TacticPlayerInstruction.STAY_BACK_WHILE_ATTACKING),
            e.addInstruction(TacticPlayerInstruction.PLAY_AS_STRIKER),
            e.addInstruction(TacticPlayerInstruction.OVERLAP_RUN),
            e.setSelectedInstruction(i, TacticPlayerInstruction.STAY_BACK_WHILE_ATTACKING),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(18)).addInstruction(TacticPlayerInstruction.INTERCEPTION_AGGRESSIVE),
            e.addInstruction(TacticPlayerInstruction.INTERCEPTION_NORMAL),
            e.addInstruction(TacticPlayerInstruction.INTERCEPTION_LOW),
            e.setSelectedInstruction(i, TacticPlayerInstruction.INTERCEPTION_NORMAL),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(30)).addInstruction(TacticPlayerInstruction.STEP_UP),
            e.addInstruction(TacticPlayerInstruction.STICK_TO_POSITION),
            e.setSelectedInstruction(i, TacticPlayerInstruction.STICK_TO_POSITION),
            o.push(e);
            break;
        case PlayerPosition.RWB:
        case PlayerPosition.RB:
        case PlayerPosition.LB:
        case PlayerPosition.LWB:
            (e = new UTPlayerInstructionGroupEntity(1)).addInstruction(TacticPlayerInstruction.JOIN_THE_ATTACK),
            e.addInstruction(TacticPlayerInstruction.VARIED_ATTACK),
            e.addInstruction(TacticPlayerInstruction.STAY_BACK_WHILE_ATTACKING),
            e.setSelectedInstruction(i, TacticPlayerInstruction.VARIED_ATTACK),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(19)).addInstruction(TacticPlayerInstruction.INTERCEPTION_AGGRESSIVE),
            e.addInstruction(TacticPlayerInstruction.INTERCEPTION_NORMAL),
            e.addInstruction(TacticPlayerInstruction.INTERCEPTION_LOW),
            e.setSelectedInstruction(i, TacticPlayerInstruction.INTERCEPTION_NORMAL),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(25)).addInstruction(TacticPlayerInstruction.INVERTED_RUN),
            e.addInstruction(TacticPlayerInstruction.MIXED_ATTACK),
            e.addInstruction(TacticPlayerInstruction.OVERLAP_RUN),
            e.setSelectedInstruction(i, TacticPlayerInstruction.MIXED_ATTACK),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(30)).addInstruction(TacticPlayerInstruction.STEP_UP),
            e.addInstruction(TacticPlayerInstruction.STICK_TO_POSITION),
            e.setSelectedInstruction(i, TacticPlayerInstruction.STICK_TO_POSITION),
            o.push(e);
            break;
        case PlayerPosition.RDM:
        case PlayerPosition.CDM:
        case PlayerPosition.LDM:
            (e = new UTPlayerInstructionGroupEntity(2)).addInstruction(TacticPlayerInstruction.CUT_PASSING_LANES),
            e.addInstruction(TacticPlayerInstruction.VARIED_DEFENSE),
            e.addInstruction(TacticPlayerInstruction.MAN_MARK),
            e.setSelectedInstruction(i, TacticPlayerInstruction.VARIED_DEFENSE),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(3)).addInstruction(TacticPlayerInstruction.STAY_BACK_WHILE_ATTACKING),
            e.addInstruction(TacticPlayerInstruction.VARIED_ATTACK),
            e.addInstruction(TacticPlayerInstruction.GET_FORWARD),
            n && e.addInstruction(TacticPlayerInstruction.DROP_BACK_BETWEEN_DEFENDERS),
            e.setSelectedInstruction(i, TacticPlayerInstruction.VARIED_ATTACK),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(20)).addInstruction(TacticPlayerInstruction.INTERCEPTION_AGGRESSIVE),
            e.addInstruction(TacticPlayerInstruction.INTERCEPTION_NORMAL),
            e.addInstruction(TacticPlayerInstruction.INTERCEPTION_LOW),
            e.setSelectedInstruction(i, TacticPlayerInstruction.INTERCEPTION_NORMAL),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(26)).addInstruction(TacticPlayerInstruction.ALWAYS_COVER_CENTER),
            e.addInstruction(TacticPlayerInstruction.COVER_WING),
            e.setSelectedInstruction(i, TacticPlayerInstruction.COVER_WING),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(9)).addInstruction(TacticPlayerInstruction.FREE_ROAM),
            e.addInstruction(TacticPlayerInstruction.STICK_TO_POSITION),
            e.addInstruction(TacticPlayerInstruction.DRIFT_WIDE),
            e.setSelectedInstruction(i, TacticPlayerInstruction.STICK_TO_POSITION),
            o.push(e);
            break;
        case PlayerPosition.RCM:
        case PlayerPosition.CM:
        case PlayerPosition.LCM:
            (e = new UTPlayerInstructionGroupEntity(4)).addInstruction(TacticPlayerInstruction.STAY_BACK_WHILE_ATTACKING),
            e.addInstruction(TacticPlayerInstruction.VARIED_ATTACK),
            e.addInstruction(TacticPlayerInstruction.GET_FORWARD),
            n && e.addInstruction(TacticPlayerInstruction.DROP_BACK_BETWEEN_DEFENDERS),
            e.setSelectedInstruction(i, TacticPlayerInstruction.VARIED_ATTACK),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(5)).addInstruction(TacticPlayerInstruction.GET_INTO_THE_BOX_FOR_CROSS),
            e.addInstruction(TacticPlayerInstruction.MIXED_ATTACK_FOR_CROSS),
            e.addInstruction(TacticPlayerInstruction.STAY_ON_EDGE_OF_BOX_FOR_CROSS),
            e.setSelectedInstruction(i, TacticPlayerInstruction.MIXED_ATTACK_FOR_CROSS),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(21)).addInstruction(TacticPlayerInstruction.INTERCEPTION_AGGRESSIVE),
            e.addInstruction(TacticPlayerInstruction.INTERCEPTION_NORMAL),
            e.addInstruction(TacticPlayerInstruction.INTERCEPTION_LOW),
            e.setSelectedInstruction(i, TacticPlayerInstruction.INTERCEPTION_NORMAL),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(6)).addInstruction(TacticPlayerInstruction.FREE_ROAM),
            e.addInstruction(TacticPlayerInstruction.STICK_TO_POSITION),
            e.addInstruction(TacticPlayerInstruction.DRIFT_WIDE),
            e.setSelectedInstruction(i, TacticPlayerInstruction.STICK_TO_POSITION),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(27)).addInstruction(TacticPlayerInstruction.ALWAYS_COVER_CENTER),
            e.addInstruction(TacticPlayerInstruction.COVER_WING),
            e.setSelectedInstruction(i, TacticPlayerInstruction.COVER_WING),
            o.push(e);
            break;
        case PlayerPosition.RAM:
        case PlayerPosition.CAM:
        case PlayerPosition.LAM:
            (e = new UTPlayerInstructionGroupEntity(7)).addInstruction(TacticPlayerInstruction.COME_BACK_ON_DEFENSE),
            e.addInstruction(TacticPlayerInstruction.MIXED_DEFENSE),
            e.addInstruction(TacticPlayerInstruction.STAY_FORWARD),
            e.setSelectedInstruction(i, TacticPlayerInstruction.MIXED_DEFENSE),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(8)).addInstruction(TacticPlayerInstruction.GET_INTO_THE_BOX_FOR_CROSS),
            e.addInstruction(TacticPlayerInstruction.MIXED_ATTACK_FOR_CROSS),
            e.addInstruction(TacticPlayerInstruction.STAY_ON_EDGE_OF_BOX_FOR_CROSS),
            e.setSelectedInstruction(i, TacticPlayerInstruction.MIXED_ATTACK_FOR_CROSS),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(9)).addInstruction(TacticPlayerInstruction.FREE_ROAM),
            e.addInstruction(TacticPlayerInstruction.STICK_TO_POSITION),
            e.addInstruction(TacticPlayerInstruction.DRIFT_WIDE),
            e.setSelectedInstruction(i, TacticPlayerInstruction.STICK_TO_POSITION),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(22)).addInstruction(TacticPlayerInstruction.INTERCEPTION_AGGRESSIVE),
            e.addInstruction(TacticPlayerInstruction.INTERCEPTION_NORMAL),
            e.addInstruction(TacticPlayerInstruction.INTERCEPTION_LOW),
            e.setSelectedInstruction(i, TacticPlayerInstruction.INTERCEPTION_NORMAL),
            o.push(e);
            break;
        case PlayerPosition.RM:
        case PlayerPosition.LM:
        case PlayerPosition.RW:
        case PlayerPosition.LW:
            var s = !!this.formation && JSUtils.isValid(this.formation.getPosition(PlayerPosition.RW))
              , a = !!this.formation && JSUtils.isValid(this.formation.getPosition(PlayerPosition.LW))
              , l = t === PlayerPosition.RW || t === PlayerPosition.LW || t === PlayerPosition.RM && !s || t === PlayerPosition.LM && !a;
            l && ((e = new UTPlayerInstructionGroupEntity(10)).addInstruction(TacticPlayerInstruction.COME_BACK_ON_DEFENSE),
            e.addInstruction(TacticPlayerInstruction.MIXED_DEFENSE),
            e.addInstruction(TacticPlayerInstruction.STAY_FORWARD),
            e.setSelectedInstruction(i, TacticPlayerInstruction.MIXED_DEFENSE),
            o.push(e)),
            (e = new UTPlayerInstructionGroupEntity(11)).addInstruction(TacticPlayerInstruction.CUT_INSIDE),
            e.addInstruction(TacticPlayerInstruction.VARIED_WIDTH),
            e.addInstruction(TacticPlayerInstruction.STAY_WIDE),
            l && e.addInstruction(TacticPlayerInstruction.FREE_ROAM),
            e.setSelectedInstruction(i, TacticPlayerInstruction.VARIED_WIDTH),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(12)).addInstruction(TacticPlayerInstruction.GET_IN_BEHIND),
            e.addInstruction(TacticPlayerInstruction.MIXED_SUPPORT),
            e.addInstruction(TacticPlayerInstruction.COME_SHORT),
            l && e.addInstruction(TacticPlayerInstruction.TARGET_MAN),
            e.setSelectedInstruction(i, TacticPlayerInstruction.MIXED_SUPPORT),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(13)).addInstruction(TacticPlayerInstruction.GET_INTO_THE_BOX_FOR_CROSS),
            e.addInstruction(TacticPlayerInstruction.MIXED_ATTACK_FOR_CROSS),
            e.addInstruction(TacticPlayerInstruction.STAY_ON_EDGE_OF_BOX_FOR_CROSS),
            e.setSelectedInstruction(i, TacticPlayerInstruction.MIXED_ATTACK_FOR_CROSS),
            o.push(e),
            (t === PlayerPosition.RM && s || t === PlayerPosition.LM && a) && ((e = new UTPlayerInstructionGroupEntity(14)).addInstruction(TacticPlayerInstruction.FREE_ROAM),
            e.addInstruction(TacticPlayerInstruction.STICK_TO_POSITION),
            e.setSelectedInstruction(i, TacticPlayerInstruction.STICK_TO_POSITION),
            o.push(e)),
            (e = new UTPlayerInstructionGroupEntity(23)).addInstruction(TacticPlayerInstruction.INTERCEPTION_AGGRESSIVE),
            e.addInstruction(TacticPlayerInstruction.INTERCEPTION_NORMAL),
            e.addInstruction(TacticPlayerInstruction.INTERCEPTION_LOW),
            e.setSelectedInstruction(i, TacticPlayerInstruction.INTERCEPTION_NORMAL),
            o.push(e);
            break;
        case PlayerPosition.RF:
        case PlayerPosition.CF:
        case PlayerPosition.LF:
        case PlayerPosition.RS:
        case PlayerPosition.ST:
        case PlayerPosition.LS:
            (e = new UTPlayerInstructionGroupEntity(16)).addInstruction(TacticPlayerInstruction.DRIFT_WIDE),
            e.addInstruction(TacticPlayerInstruction.VARIED_WIDTH),
            e.addInstruction(TacticPlayerInstruction.STAY_CENTRAL),
            e.setSelectedInstruction(i, TacticPlayerInstruction.VARIED_WIDTH),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(17)).addInstruction(TacticPlayerInstruction.GET_IN_BEHIND),
            e.addInstruction(TacticPlayerInstruction.MIXED_ATTACK),
            e.addInstruction(TacticPlayerInstruction.TARGET_MAN),
            e.addInstruction(TacticPlayerInstruction.FALSE_9),
            e.setSelectedInstruction(i, TacticPlayerInstruction.MIXED_ATTACK),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(24)).addInstruction(TacticPlayerInstruction.INTERCEPTION_AGGRESSIVE),
            e.addInstruction(TacticPlayerInstruction.INTERCEPTION_NORMAL),
            e.addInstruction(TacticPlayerInstruction.INTERCEPTION_LOW),
            e.setSelectedInstruction(i, TacticPlayerInstruction.INTERCEPTION_NORMAL),
            o.push(e),
            (e = new UTPlayerInstructionGroupEntity(15)).addInstruction(TacticPlayerInstruction.COME_BACK_ON_DEFENSE),
            e.addInstruction(TacticPlayerInstruction.MIXED_DEFENSE),
            e.addInstruction(TacticPlayerInstruction.STAY_FORWARD),
            e.setSelectedInstruction(i, TacticPlayerInstruction.MIXED_DEFENSE),
            o.push(e)
        }
        return o
    }
    ,
    UTSquadMentalityEntity.prototype.setModified = function(t) {
        this.modified = t
    }
    ,
    UTSquadMentalityEntity.prototype.setCustomized = function(t) {
        this.customized = t
    }
    ,
    UTSquadMentalityEntity.prototype.isModified = function() {
        return this.modified
    }
    ,
    UTSquadMentalityEntity.prototype.isCustomized = function() {
        return this.customized
    }
    ,
    UTSquadMentalityEntity.prototype.toUtasObject = function() {
        var t, e, i, r, n, o = this;
        switch (this.getId()) {
        case SquadMentalityType.ATTACKING:
            n = "ATTACKING";
            break;
        case SquadMentalityType.BALANCED:
            n = "BALANCED";
            break;
        case SquadMentalityType.DEFENSIVE:
            n = "DEFENSIVE";
            break;
        case SquadMentalityType.ULTRA_ATTACKING:
            n = "ULTRA_ATTACKING";
            break;
        case SquadMentalityType.ULTRA_DEFENSIVE:
            n = "ULTRA_DEFENSIVE";
            break;
        default:
            n = "INVALID"
        }
        DebugUtils.Assert("INVALID" !== n, "Invalid mentality ID. Expected a SquadMentalityType value.");
        var s = []
          , a = null !== (e = null === (t = this.formation) || void 0 === t ? void 0 : t.positions) && void 0 !== e ? e : []
          , l = a.length;
        return a.forEach(function(t, e) {
            var i = o.instructions.get(t.id);
            if (DebugUtils.Assert(JSUtils.isValid(i), "Unable to find player instructions for formation position: " + e),
            i) {
                var r = i.toBitwiseIntegers();
                s.push({
                    index: e,
                    value: r[0]
                }),
                s.push({
                    index: e + l,
                    value: r[1]
                })
            }
        }, this),
        {
            squadId: this.getSquadId(),
            tactic: n,
            formation: null !== (r = null === (i = this.formation) || void 0 === i ? void 0 : i.name) && void 0 !== r ? r : "",
            positions: this._positions.map(function(t, e) {
                return {
                    index: e,
                    value: t
                }
            }),
            instructions: s,
            styles: [{
                index: SquadMentalityStyle.BUILD_UP_PLAY,
                value: this.buildUpPlayStyle
            }, {
                index: SquadMentalityStyle.CHANCE_CREATION,
                value: this.chanceCreationStyle
            }, {
                index: SquadMentalityStyle.OFFENSIVE_WIDTH,
                value: this._offensiveWidth
            }, {
                index: SquadMentalityStyle.OFFENSIVE_PLAYERS_IN_BOX,
                value: this._offensivePlayersInBox
            }, {
                index: SquadMentalityStyle.DEFENSIVE_STYLE,
                value: this.defensiveStyle
            }, {
                index: SquadMentalityStyle.DEFENSIVE_WIDTH,
                value: this.defensiveWidth
            }, {
                index: SquadMentalityStyle.DEFENSIVE_DEPTH,
                value: this.defensiveDepth
            }, {
                index: SquadMentalityStyle.CORNER_PLAYERS_IN_BOX,
                value: this.cornerPlayersInBox
            }, {
                index: SquadMentalityStyle.FREE_KICK_PLAYERS_IN_BOX,
                value: this.freeKickPlayersInBox
            }]
        }
    }
    ,
    UTSquadMentalityEntity.prototype.save = function() {
        var i = this
          , t = this._squadDAO.saveTacticMentalities(this.getSquadId(), [this]);
        return t.observe(this, function(t, e) {
            t.unobserve(i),
            e.success && (i.modified = !1,
            i.customized = !0)
        }),
        t
    }
    ,
    UTSquadMentalityEntity.prototype._resetInstructions = function() {
        var e = this;
        this.instructions.clear(),
        this.formation && this.formation.positions.forEach(function(t) {
            return e.instructions.set(t.id, new UTPlayerInstructionsVO(t.id))
        })
    }
    ,
    UTSquadMentalityEntity.prototype.resetInstructions = function() {
        this._resetInstructions(),
        this.modified = !0,
        this.onDataUpdated.notify(this, {
            instructions: this.instructions.values()
        })
    }
    ,
    UTSquadMentalityEntity.MIN_OFFENSIVE_WIDTH = 1,
    UTSquadMentalityEntity.MAX_OFFENSIVE_WIDTH = 100,
    UTSquadMentalityEntity.MIN_OFFENSIVE_PLAYERS_IN_BOX = 1,
    UTSquadMentalityEntity.MAX_OFFENSIVE_PLAYERS_IN_BOX = 10,
    UTSquadMentalityEntity.MIN_CORNER_PLAYERS_IN_BOX = 1,
    UTSquadMentalityEntity.MAX_CORNER_PLAYERS_IN_BOX = 5,
    UTSquadMentalityEntity.MIN_FREEKICK_PLAYERS_IN_BOX = 1,
    UTSquadMentalityEntity.MAX_FREEKICK_PLAYERS_IN_BOX = 5,
    UTSquadMentalityEntity.MIN_DEFENSIVE_WIDTH = 1,
    UTSquadMentalityEntity.MAX_DEFENSIVE_WIDTH = 100,
    UTSquadMentalityEntity.MIN_DEFENSIVE_DEPTH = 1,
    UTSquadMentalityEntity.MAX_DEFENSIVE_DEPTH = 100,
    UTSquadMentalityEntity
}(EAObject))
  , UTSquadMentalityEntityFactory = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTSquadMentalityEntityFactory(t) {
        var e = i.call(this) || this;
        return e.squadDAO = t,
        e
    }
    return __extends(UTSquadMentalityEntityFactory, i),
    UTSquadMentalityEntityFactory.prototype.createDefaultMentality = function(t, e) {
        var i = e.getFormation();
        DebugUtils.Assert(JSUtils.isValid(i), "No squad formation found when creating default mentality.");
        var r = {
            formation: i,
            id: t,
            instructions: [],
            squadId: e.getId()
        };
        switch (t) {
        case SquadMentalityType.ULTRA_DEFENSIVE:
            r.buildUpPlayStyle = TacticBuildUpPlayStyle.LONG_BALL,
            r.chanceCreationStyle = TacticChanceCreationStyle.DIRECT_PASSING,
            r.defensiveStyle = SquadMentalityDefensiveStyle.DROP_BACK,
            r.offensivePlayersInBox = 3,
            r.defensiveDepth = 3,
            r.cornerPlayersInBox = 1,
            r.freeKickPlayersInBox = 1;
            break;
        case SquadMentalityType.DEFENSIVE:
            r.buildUpPlayStyle = TacticBuildUpPlayStyle.SLOW_BUILD_UP,
            r.chanceCreationStyle = TacticChanceCreationStyle.POSSESSION,
            r.defensiveStyle = SquadMentalityDefensiveStyle.DROP_BACK,
            r.offensivePlayersInBox = 4,
            r.defensiveDepth = 4,
            r.cornerPlayersInBox = 2,
            r.freeKickPlayersInBox = 2;
            break;
        case SquadMentalityType.ATTACKING:
            r.buildUpPlayStyle = TacticBuildUpPlayStyle.FAST_BUILD_UP,
            r.chanceCreationStyle = TacticChanceCreationStyle.FORWARD_RUNS,
            r.defensiveStyle = SquadMentalityDefensiveStyle.PRESS_AFTER_POSSESSION_LOSS,
            r.offensivePlayersInBox = 6,
            r.defensiveDepth = 6,
            r.cornerPlayersInBox = 4,
            r.freeKickPlayersInBox = 4;
            break;
        case SquadMentalityType.ULTRA_ATTACKING:
            r.buildUpPlayStyle = TacticBuildUpPlayStyle.FAST_BUILD_UP,
            r.chanceCreationStyle = TacticChanceCreationStyle.FORWARD_RUNS,
            r.defensiveStyle = SquadMentalityDefensiveStyle.CONSTANT_PRESSURE,
            r.offensivePlayersInBox = 7,
            r.defensiveDepth = 7,
            r.cornerPlayersInBox = 5,
            r.freeKickPlayersInBox = 5
        }
        return i && (r.instructions = i.getPositions().map(function(t) {
            return new UTPlayerInstructionsVO(t.getId())
        })),
        new UTSquadMentalityEntity(r,this.squadDAO)
    }
    ,
    UTSquadMentalityEntityFactory.prototype.createMentality = function(t, e) {
        DebugUtils.Assert(t.squadId === e.getId(), "Associating squad/mentality with mismatched squad IDs.");
        var i = JSUtils.isNumber(SquadMentalityType[t.tactic]) ? SquadMentalityType[t.tactic] : SquadMentalityType.BALANCED
          , n = {
            customized: !0,
            formation: repositories.Squad.getFormation(t.formation),
            id: i,
            instructions: [],
            squadId: t.squadId
        };
        i !== SquadMentalityType.BALANCED && (n.positions = []),
        t.styles.forEach(function(t) {
            switch (t.index) {
            case SquadMentalityStyle.BUILD_UP_PLAY:
                n.buildUpPlayStyle = t.value;
                break;
            case SquadMentalityStyle.CHANCE_CREATION:
                n.chanceCreationStyle = t.value;
                break;
            case SquadMentalityStyle.OFFENSIVE_WIDTH:
                n.offensiveWidth = t.value;
                break;
            case SquadMentalityStyle.OFFENSIVE_PLAYERS_IN_BOX:
                n.offensivePlayersInBox = t.value;
                break;
            case SquadMentalityStyle.DEFENSIVE_STYLE:
                n.defensiveStyle = t.value;
                break;
            case SquadMentalityStyle.DEFENSIVE_WIDTH:
                n.defensiveWidth = t.value;
                break;
            case SquadMentalityStyle.DEFENSIVE_DEPTH:
                n.defensiveDepth = t.value;
                break;
            case SquadMentalityStyle.CORNER_PLAYERS_IN_BOX:
                n.cornerPlayersInBox = t.value;
                break;
            case SquadMentalityStyle.FREE_KICK_PLAYERS_IN_BOX:
                n.freeKickPlayersInBox = t.value
            }
        });
        var o = [];
        return t.instructions.forEach(function(t, e) {
            var i = e >= UTSquadEntity.FIELD_PLAYERS ? e - UTSquadEntity.FIELD_PLAYERS : e;
            o[i] || (o[i] = []),
            o[i].push(t.value)
        }),
        n.formation && n.formation.getPositions().forEach(function(t, e) {
            var i = t.getId()
              , r = JSUtils.find(n.instructions, function(t) {
                return t.getPositionId() === i
            });
            r || (r = new UTPlayerInstructionsVO(i),
            n.instructions.push(r)),
            r.setInstructionsFromBitwiseIntegers(o[e] || [])
        }),
        n.positions && t.positions.forEach(function(t) {
            n.positions[t.index] = t.value
        }),
        new UTSquadMentalityEntity(n,this.squadDAO)
    }
    ,
    UTSquadMentalityEntityFactory
}(EAObject))
  , UTSquadEntityFactory = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTSquadEntityFactory(t, e) {
        var i = r.call(this) || this;
        return i.mentalityFactory = new UTSquadMentalityEntityFactory(t),
        i.chemRepo = e,
        i.squadDAO = t,
        i
    }
    return __extends(UTSquadEntityFactory, r),
    UTSquadEntityFactory.prototype.generateSquadConstructorOptions = function(t) {
        var e = {
            captain: t.captain,
            chemistry: t.chemistry,
            formation: repositories.Squad.getFormation(t.formation),
            id: t.id,
            name: t.squadName || t.clubName,
            owner: t.personaId,
            players: [],
            rating: JSUtils.isNumber(t.starRating) ? t.starRating : t.rating,
            valid: t.valid
        };
        JSUtils.isEmpty(t.squadType) || (e.type = t.squadType);
        for (var i = 0; i <= UTSquadEntity.MANAGER_SLOT_INDEX; i++) {
            var r = new UTSquadSlotEntity(i,e.formation ? e.formation.getPosition(i) : null)
              , n = 0
              , o = null;
            if (i === UTSquadEntity.MANAGER_SLOT_INDEX && t.manager)
                o = factories.Item.createItem(Array.isArray(t.manager) ? t.manager[0] : t.manager);
            else if (t.players[i]) {
                var s = t.players[i];
                o = factories.Item.createItem(s.itemData),
                n = s.kitNumber || 0
            } else
                o = factories.Item.createItem();
            r.setItem(o),
            r.setKitNumber(n),
            i === UTSquadEntity.MANAGER_SLOT_INDEX ? (o.type = ItemType.MANAGER,
            e.manager = r) : (o.type = ItemType.PLAYER,
            e.players.push(r))
        }
        return e
    }
    ,
    UTSquadEntityFactory.prototype.generateSBCSquadConstructorOptions = function(t, e, i) {
        for (var r = {
            id: t.id,
            formation: repositories.Squad.getFormation(t.formation),
            chemistry: t.chemistry,
            rating: t.rating,
            players: [],
            simpleBrickIndices: [],
            customBrickIndices: []
        }, n = 0; n < UTSquadEntity.MANAGER_SLOT_INDEX; n++) {
            var o = new UTSquadSlotEntity(n,r.formation ? r.formation.getPosition(n) : null)
              , s = n < UTSquadEntity.FIELD_PLAYERS
              , a = !1
              , l = null;
            if (Array.isArray(i) && s) {
                var c = i[n];
                r.simpleBrickIndices && c.playerType === SBCPlayerRequirementType.BRICK ? r.simpleBrickIndices.push(c.index) : r.customBrickIndices && c.playerType === SBCPlayerRequirementType.CUSTOM_BRICK && (r.customBrickIndices.push(c.index),
                a = !0),
                o.setRequirement(new UTSBCPlayerRequirementDTO(c,a ? e.createRequirements(c.elgReq) : []))
            }
            (l = a && t.players[n] ? factories.Item.createCustomBrickItem(t.players[n].itemData) : t.players[n] ? factories.Item.createItem(t.players[n].itemData) : factories.Item.createItem()).type = ItemType.PLAYER,
            o.setItem(l),
            r.players.push(o)
        }
        return r
    }
    ,
    UTSquadEntityFactory.prototype.generateTOTWSquadConstructorOptions = function(t) {
        for (var e = {
            id: t.id,
            formation: repositories.Squad.getFormation(t.formation),
            name: t.name,
            rating: t.rating,
            players: [],
            simpleBrickIndices: [],
            customBrickIndices: []
        }, i = 0; i < UTSquadEntity.MANAGER_SLOT_INDEX; i++) {
            var r = new UTSquadSlotEntity(i,e.formation ? e.formation.getPosition(i) : null)
              , n = new UTItemEntity;
            n.type = ItemType.PLAYER,
            r.setItem(n),
            e.players.push(r)
        }
        return e
    }
    ,
    UTSquadEntityFactory.prototype.createSquad = function(t) {
        var e = this
          , i = new UTSquadEntity(this.generateSquadConstructorOptions(t),this.squadDAO,new UTSquadChemCalculatorUtils(this.chemRepo));
        return t.tactics && t.tactics.forEach(function(t) {
            i.setTacticMentality(e.mentalityFactory.createMentality(t, i))
        }, this),
        [SquadMentalityType.ULTRA_DEFENSIVE, SquadMentalityType.DEFENSIVE, SquadMentalityType.BALANCED, SquadMentalityType.ATTACKING, SquadMentalityType.ULTRA_ATTACKING].forEach(function(t) {
            i.getTacticMentalityById(t) || i.setTacticMentality(e.mentalityFactory.createDefaultMentality(t, i))
        }),
        i
    }
    ,
    UTSquadEntityFactory.prototype.createSBCSquad = function(t, e, i) {
        var r = new UTSquadEntity(this.generateSBCSquadConstructorOptions(t, e, i),this.squadDAO,new UTSquadChemCalculatorUtils(this.chemRepo));
        return r.setSBC(!0),
        r
    }
    ,
    UTSquadEntityFactory.prototype.createTOTWPartial = function(t) {
        var e = new UTSquadEntity(this.generateTOTWSquadConstructorOptions(t),this.squadDAO,new UTSquadChemCalculatorUtils(this.chemRepo));
        return e.setTOTW(!0),
        e
    }
    ,
    UTSquadEntityFactory.prototype.createTOTWSquad = function(t) {
        var e = new UTSquadEntity(this.generateSquadConstructorOptions(t),this.squadDAO,new UTSquadChemCalculatorUtils(this.chemRepo));
        return e.setTOTW(!0),
        e
    }
    ,
    UTSquadEntityFactory
}(EAObject))
  , UTClubRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTClubRepository() {
        var t = e.call(this) || this;
        return t.activeItemIds = new EAHashTable,
        t.bonusCacheTimestamp = 0,
        t.clubContractBonus = 0,
        t.clubStats = new EAHashTable,
        t.consumables = new UTItemRepository,
        t.items = new UTItemRepository,
        t.statsCacheTimestamp = 0,
        t
    }
    return __extends(UTClubRepository, e),
    UTClubRepository.prototype.reset = function() {
        this.activeItemIds.clear(),
        this.bonusCacheTimestamp = 0,
        this.clubContractBonus = 0,
        this.clubStats.clear(),
        this.items.clear(),
        this.statsCacheTimestamp = 0
    }
    ,
    UTClubRepository.prototype.resetStatsCacheTimestamp = function() {
        this.statsCacheTimestamp = 0
    }
    ,
    UTClubRepository.prototype.resetBonusCacheTimestamp = function() {
        this.bonusCacheTimestamp = 0
    }
    ,
    UTClubRepository.prototype.setConsumableCacheStatus = function(t) {
        this.consumables.endOfList = t
    }
    ,
    UTClubRepository.prototype.getActiveItemByState = function(t) {
        var e, i = null !== (e = this.activeItemIds.get(t)) && void 0 !== e ? e : 0;
        return this.items.get(i)
    }
    ,
    UTClubRepository.prototype.setActiveItem = function(t) {
        if (t.isActiveClubItem()) {
            var e = this.getActiveItemByState(t.state);
            e && e.id !== t.id && (e.state = ItemState.FREE),
            this.activeItemIds.set(t.state, t.id)
        }
    }
    ,
    UTClubRepository.prototype.addClubItem = function(t) {
        this.items.set(t.id, t),
        this.setActiveItem(t)
    }
    ,
    UTClubRepository.prototype.removeClubItem = function(t) {
        t.isActiveClubItem() ? DebugUtils.Assert(!1, "Can't remove an active club item from the club repository.") : this.items.remove(t.id)
    }
    ,
    UTClubRepository.prototype.addConsumable = function(t) {
        var e = this.consumables.get(t.definitionId);
        e ? e.increaseStackCount() : this.consumables.set(t.definitionId, t)
    }
    ,
    UTClubRepository.prototype.removeConsumable = function(t) {
        var e = this.consumables.get(t);
        e && 0 === e.stackCount && this.consumables.remove(t)
    }
    ,
    UTClubRepository.prototype.addItem = function(t) {
        if (t.isPlayer()) {
            var e = this.items.get(t.id);
            e ? e.update(t) : this.items.set(t.id, t)
        } else
            t.isConsumable() ? this.addConsumable(t) : this.addClubItem(t)
    }
    ,
    UTClubRepository.prototype.add = function(t) {
        Array.isArray(t) ? t.forEach(this.addItem, this) : this.addItem(t)
    }
    ,
    UTClubRepository.prototype.createConsumables = function(t) {
        function COa(t) {
            var e = i.consumables.get(t.definitionId);
            e ? e.update(t) : i.consumables.set(t.definitionId, t)
        }
        var i = this;
        Array.isArray(t) ? t.forEach(COa, this) : COa(t)
    }
    ,
    UTClubRepository.prototype.removeItem = function(t) {
        var e = t.isActiveClubItem();
        DebugUtils.Assert(!e, "Cannot remove an active club item from the club repository."),
        (t.isPlayer() || t.isManager()) && this.items.remove(t.id),
        t.isConsumable() ? this.removeConsumable(t.definitionId) : e || this.removeClubItem(t)
    }
    ,
    UTClubRepository.prototype.remove = function(t) {
        Array.isArray(t) ? t.forEach(this.removeItem, this) : this.removeItem(t)
    }
    ,
    UTClubRepository.prototype.update = function(t) {
        t.isPlayer() && this.items.has(t.id) && this.items.set(t.id, t)
    }
    ,
    UTClubRepository.prototype.getItem = function(t, e, i) {
        switch (t) {
        case ItemType.CONTRACT:
        case ItemType.TRAINING:
        case ItemType.HEALTH:
            return this.consumables.get(i);
        default:
            return this.items.get(i)
        }
    }
    ,
    UTClubRepository.prototype.hasStats = function() {
        return !this.isStatsCacheExpired() && 0 < this.clubStats.length
    }
    ,
    Object.defineProperty(UTClubRepository.prototype, "managerContractBonus", {
        get: function() {
            return this.clubContractBonus
        },
        set: function(t) {
            this.clubContractBonus = t,
            this.bonusCacheTimestamp = Date.now()
        },
        enumerable: !1,
        configurable: !0
    }),
    UTClubRepository.prototype.getStats = function() {
        return this.clubStats.values()
    }
    ,
    UTClubRepository.prototype.setStats = function(t) {
        var e = this;
        t.forEach(function(t) {
            return e.clubStats.set(t.type, t)
        }),
        this.statsCacheTimestamp = Date.now()
    }
    ,
    UTClubRepository.prototype.search = function(t) {
        return t.type === SearchType.CONSUMABLES_DEVELOPMENT || t.type === SearchType.CONSUMABLES_TRAINING ? this.consumables.search(t) : this.items.search(t)
    }
    ,
    UTClubRepository.prototype.mapCriteriaToClubType = function(t) {
        switch (t.type) {
        case SearchType.BALL:
            return ClubItemTypeEnum.BALLS;
        case SearchType.CLUB_INFO:
            return t.category === SearchCategory.KIT ? ClubItemTypeEnum.KITS : ClubItemTypeEnum.BADGES;
        case SearchType.PLAYER:
            return ClubItemTypeEnum.PLAYERS;
        case SearchType.STADIUM:
            return ClubItemTypeEnum.STADIA;
        case SearchType.STAFF:
            return ClubItemTypeEnum.STAFF;
        case SearchType.VANITY:
            return ClubItemTypeEnum.VANITY;
        default:
            return null
        }
    }
    ,
    UTClubRepository.prototype.hasAllItems = function(t) {
        var e;
        if (t.cacheable) {
            if (t.type === SearchType.CONSUMABLES_DEVELOPMENT || t.type === SearchType.CONSUMABLES_TRAINING)
                return this.consumables.endOfList;
            var i = this.mapCriteriaToClubType(t)
              , r = i && null !== (e = this.getStats().find(function(t) {
                return t.type === i
            })) && void 0 !== e ? e : null
              , n = new UTSearchCriteriaDTO;
            n.type = t.type,
            n.category = t.type === SearchType.CLUB_INFO ? t.category : SearchCategory.ANY,
            n.subtypes = [],
            n.count = 999;
            var o = this.items.search(n);
            return !!r && o.length >= r.count
        }
        return !1
    }
    ,
    UTClubRepository.prototype.isStatsCacheExpired = function() {
        var t = 10 * SECONDS_PER_MINUTE * MS_PER_SECOND;
        return Date.now() > this.statsCacheTimestamp + t
    }
    ,
    UTClubRepository.prototype.isBonusCacheExpired = function() {
        var t = 10 * SECONDS_PER_MINUTE * MS_PER_SECOND;
        return Date.now() > this.bonusCacheTimestamp + t
    }
    ,
    UTClubRepository
}(EAObject))
  , UTStaticPlayerDataDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTStaticPlayerDataDTO(t) {
        var e = i.call(this) || this;
        return e.id = t.id,
        e.firstName = t.f,
        e.lastName = t.l,
        e.commonName = t.c || null,
        e.rating = t.r,
        e.nationId = t.n,
        e
    }
    return __extends(UTStaticPlayerDataDTO, i),
    Object.defineProperty(UTStaticPlayerDataDTO.prototype, "name", {
        get: function() {
            return this.commonName ? this.commonName : this.firstName + " " + this.lastName
        },
        enumerable: !1,
        configurable: !0
    }),
    UTStaticPlayerDataDTO
}(EAObject))
  , UTItemDomainRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTItemDomainRepository() {
        var t = e.call(this) || this;
        return t.cachedDurationIndex = 0,
        t.club = new UTClubRepository,
        t.inbox = new UTItemRepository,
        t.pileSizes = new EAHashTable,
        t.staticData = new EAHashTable,
        t.transfer = new UTItemRepository,
        t.unassigned = new UTItemRepository,
        t.pileSizes.set(ItemPile.PURCHASED, 5),
        t.pileSizes.set(ItemPile.TRANSFER, 30),
        t.pileSizes.set(ItemPile.INBOX, 30),
        t
    }
    return __extends(UTItemDomainRepository, e),
    UTItemDomainRepository.prototype.reset = function() {
        this.unassigned.reset(),
        this.transfer.reset(),
        this.inbox.reset(),
        this.club.reset()
    }
    ,
    UTItemDomainRepository.prototype.setCacheTimestamp = function(t, e, i) {
        switch (t) {
        case ItemPile.PURCHASED:
            this.unassigned.setCacheTimestamp(e, i);
            break;
        case ItemPile.TRANSFER:
            this.transfer.setCacheTimestamp(e, i);
            break;
        case ItemPile.INBOX:
            this.inbox.setCacheTimestamp(e, i)
        }
    }
    ,
    UTItemDomainRepository.prototype.setDirty = function(t) {
        t ? this.setCacheTimestamp(t, 0, 0) : (this.unassigned.setCacheTimestamp(0, 0),
        this.transfer.setCacheTimestamp(0, 0),
        this.inbox.setCacheTimestamp(0, 0))
    }
    ,
    UTItemDomainRepository.prototype.isDirty = function(t) {
        switch (t) {
        case ItemPile.PURCHASED:
            return this.unassigned.isCacheExpired();
        case ItemPile.TRANSFER:
            return this.transfer.isCacheExpired();
        case ItemPile.INBOX:
            return this.inbox.isCacheExpired()
        }
        return !0
    }
    ,
    UTItemDomainRepository.prototype.getClub = function() {
        return this.club
    }
    ,
    UTItemDomainRepository.prototype.setPileSize = function(t, e) {
        this.pileSizes.set(t, e)
    }
    ,
    UTItemDomainRepository.prototype.getPileSize = function(t) {
        var e = this.pileSizes.get(t);
        return DebugUtils.Assert(JSUtils.isNumber(e), "Unsupported pile requested when retrieving pile size."),
        e || 0
    }
    ,
    UTItemDomainRepository.prototype.isPileFull = function(t) {
        var e = 0
          , i = this.pileSizes.get(t);
        switch (t) {
        case ItemPile.PURCHASED:
            e = this.unassigned.length;
            break;
        case ItemPile.TRANSFER:
            e = this.transfer.length;
            break;
        case ItemPile.INBOX:
            e = this.inbox.length;
            break;
        case ItemPile.CLUB:
            return !1
        }
        return (i || 0) <= e
    }
    ,
    UTItemDomainRepository.prototype.numItemsInCache = function(t) {
        switch (t) {
        case ItemPile.PURCHASED:
            return this.unassigned.length;
        case ItemPile.TRANSFER:
            return this.transfer.length;
        case ItemPile.INBOX:
            return this.inbox.length
        }
        return DebugUtils.Assert(!1, "Unsupported item pile: " + t),
        0
    }
    ,
    UTItemDomainRepository.prototype.hasStaticData = function() {
        return 0 < this.staticData.length
    }
    ,
    UTItemDomainRepository.prototype.setStaticData = function(t) {
        var i = this;
        this.staticData.clear(),
        t.forEach(function(t) {
            var e = new UTStaticPlayerDataDTO(t);
            i.staticData.set(e.id, e)
        })
    }
    ,
    UTItemDomainRepository.prototype.getStaticDataByDefId = function(t) {
        return this.staticData.get(t)
    }
    ,
    UTItemDomainRepository.prototype.getStaticData = function() {
        return this.staticData.values()
    }
    ,
    UTItemDomainRepository.prototype.getWatchedItems = function() {
        return this.inbox.values()
    }
    ,
    UTItemDomainRepository.prototype.setWatchedItems = function(t) {
        var e = this;
        this.inbox.clear(),
        t.forEach(function(t) {
            return e.inbox.set(t.id, t)
        }, this),
        this.inbox.endOfList = !0
    }
    ,
    UTItemDomainRepository.prototype.getTransferItems = function() {
        return this.transfer.values()
    }
    ,
    UTItemDomainRepository.prototype.setTransferItems = function(t) {
        var e = this;
        this.transfer.clear(),
        t.forEach(function(t) {
            return e.transfer.set(t.id, t)
        }, this),
        this.transfer.endOfList = !0
    }
    ,
    UTItemDomainRepository.prototype.getUnassignedItems = function() {
        return this.unassigned.values()
    }
    ,
    UTItemDomainRepository.prototype.setUnassignedItems = function(t) {
        var e = this;
        this.unassigned.clear(),
        t.forEach(function(t) {
            return e.unassigned.set(t.id, t)
        }, this),
        this.unassigned.endOfList = !0
    }
    ,
    UTItemDomainRepository.prototype.addItem = function(t) {
        var e = t.getAuctionData();
        if (!e.watched || e.tradeOwner || this.isPileFull(ItemPile.INBOX)) {
            if (this.isPileFull(t.pile))
                return !1;
            switch (t.pile) {
            case ItemPile.PURCHASED:
                this.unassigned.set(t.id, t);
                break;
            case ItemPile.TRANSFER:
                this.transfer.set(t.id, t);
                break;
            case ItemPile.INBOX:
                this.inbox.set(t.id, t);
                break;
            case ItemPile.CLUB:
                this.club.add(t)
            }
            return !0
        }
        return this.inbox.set(t.id, t),
        !0
    }
    ,
    UTItemDomainRepository.prototype.add = function(t) {
        var e = this
          , i = [];
        return Array.isArray(t) ? t.forEach(function(t) {
            e.addItem(t) && i.push(t)
        }, this) : this.addItem(t) && i.push(t),
        i
    }
    ,
    UTItemDomainRepository.prototype.removeItem = function(t) {
        var e = t.getAuctionData();
        if (!e.watched || e.tradeOwner)
            switch (t.pile) {
            case ItemPile.PURCHASED:
                this.unassigned.remove(t.id),
                e.isWon() && this.inbox.remove(t.id);
                break;
            case ItemPile.TRANSFER:
                this.transfer.remove(t.id);
                break;
            case ItemPile.INBOX:
                this.inbox.remove(t.id);
                break;
            case ItemPile.CLUB:
                this.club.remove(t)
            }
        else
            this.inbox.remove(t.id)
    }
    ,
    UTItemDomainRepository.prototype.remove = function(t) {
        Array.isArray(t) ? t.forEach(this.removeItem, this) : this.removeItem(t)
    }
    ,
    UTItemDomainRepository.prototype.updateItem = function(t) {
        switch (t.pile) {
        case ItemPile.CLUB:
            this.club.update(t);
            break;
        default:
            DebugUtils.Assert(!1, "This pile does not support updating items.")
        }
    }
    ,
    UTItemDomainRepository.prototype.update = function(t) {
        Array.isArray(t) ? t.forEach(this.updateItem, this) : this.updateItem(t)
    }
    ,
    UTItemDomainRepository
}(EAObject));
NamespaceManager.Register("repositories"),
repositories.Item = new UTItemDomainRepository;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPlayStyleDTO = function(i) {
    function UTPlayStyleDTO(t) {
        var e = i.call(this) || this;
        return e.statBonus = t.statBonus,
        e.style = t.style,
        e.styleId = t.styleId,
        e.styleType = t.styleType,
        e
    }
    return __extends(UTPlayStyleDTO, i),
    UTPlayStyleDTO
}(EAObject)
  , UTPlayStyleRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTPlayStyleRepository() {
        var t = e.call(this) || this;
        return t.playstyles = new EAHashTable,
        t
    }
    return __extends(UTPlayStyleRepository, e),
    UTPlayStyleRepository.prototype.setPlayStyles = function(t) {
        var i = this;
        t.forEach(function(t) {
            var e = new UTPlayStyleDTO(t);
            i.playstyles.set(e.styleId, e)
        }, this)
    }
    ,
    UTPlayStyleRepository.prototype.getPlayStyles = function() {
        return this.playstyles.values()
    }
    ,
    UTPlayStyleRepository.prototype.getPlayStyleById = function(t) {
        return this.playstyles.get(t)
    }
    ,
    UTPlayStyleRepository.prototype.getPlayStyleBonusById = function(t, e) {
        var i = this.getPlayStyleById(t);
        return i ? e ? i.statBonus.slice(6) : i.statBonus.slice(0, 6) : [0, 0, 0, 0, 0, 0]
    }
    ,
    UTPlayStyleRepository
}(EAObject));
NamespaceManager.Register("repositories"),
repositories.PlayStyle = new UTPlayStyleRepository;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTItemRarityRepository = function(e) {
    function UTItemRarityRepository() {
        var t = e.call(this) || this;
        return t.expiryTimestamp = 0,
        t
    }
    return __extends(UTItemRarityRepository, e),
    UTItemRarityRepository.prototype.reset = function() {
        this.clear(),
        this.expiryTimestamp = 0
    }
    ,
    UTItemRarityRepository.prototype.add = function(t) {
        var e = this;
        Array.isArray(t) ? t.forEach(function(t) {
            return e.set(t.id, t)
        }) : this.set(t.id, t)
    }
    ,
    UTItemRarityRepository.prototype.getRarity = function(t) {
        var e = this.get(t);
        return e || new UTItemRarityDTO
    }
    ,
    UTItemRarityRepository.prototype.isCacheExpired = function() {
        return this.expiryTimestamp < Date.now()
    }
    ,
    UTItemRarityRepository.prototype.isEmpty = function() {
        return this.length < 1
    }
    ,
    UTItemRarityRepository.prototype.setCacheTimestamp = function(t, e) {
        this.expiryTimestamp = t + (JSUtils.isNumber(e) ? e * MS_PER_SECOND : 36e5)
    }
    ,
    UTItemRarityRepository
}(EAHashTable);
NamespaceManager.Register("repositories"),
repositories.Rarity = new UTItemRarityRepository;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTImageAssetRepository = function(e) {
    function UTImageAssetRepository() {
        var t = e.call(this) || this;
        return t.expiryTimestamp = 0,
        t
    }
    return __extends(UTImageAssetRepository, e),
    UTImageAssetRepository.prototype.reset = function() {
        this.clear(),
        this.expiryTimestamp = 0
    }
    ,
    UTImageAssetRepository.prototype.assetExists = function(t) {
        var e = this.get(t);
        return null != e && e
    }
    ,
    UTImageAssetRepository.prototype.isEmpty = function() {
        return this.length < 1
    }
    ,
    UTImageAssetRepository.prototype.setCacheTimestamp = function(t, e) {
        this.expiryTimestamp = t + (JSUtils.isNumber(e) ? e * MS_PER_SECOND : 36e5)
    }
    ,
    UTImageAssetRepository.prototype.isCacheExpired = function() {
        return this.expiryTimestamp < Date.now()
    }
    ,
    UTImageAssetRepository
}(EAHashTable);
NamespaceManager.Register("repositories"),
repositories.ImageAsset = new UTImageAssetRepository;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSquadRepository = function(e) {
    function UTSquadRepository() {
        var t = e.call(this) || this;
        return t.formations = new EAHashTable,
        t.positions = new EAHashTable,
        t.squads = new EAHashTable,
        t.squadListCacheExpiration = 0,
        t
    }
    return __extends(UTSquadRepository, e),
    UTSquadRepository.prototype.reset = function() {
        this.squadListCacheExpiration = 0,
        this.squads.clear(),
        this.formations.clear(),
        this.positions.clear()
    }
    ,
    UTSquadRepository.prototype.setDirty = function() {
        this.squads.clear(),
        this.squadListCacheExpiration = 0
    }
    ,
    UTSquadRepository.prototype.set = function(t, e) {
        var i = e.getId()
          , r = this.squads.get(t);
        if (r)
            if (r.has(i)) {
                var n = r.get(i);
                n && (n.update(e),
                n.setCacheTimestamp(0))
            } else
                r.set(i, e);
        else {
            var o = {};
            o[i] = e,
            this.squads.set(t, new EAHashTable(o))
        }
    }
    ,
    UTSquadRepository.prototype.getSquadById = function(t, e) {
        var i = this.squads.get(t);
        return i ? i.get(e) : null
    }
    ,
    UTSquadRepository.prototype.getSquads = function(t) {
        var e = this.squads.get(t);
        return e ? e.values() : []
    }
    ,
    UTSquadRepository.prototype.removeSquads = function(t) {
        var e = this.squads.get(t);
        e && e.clear()
    }
    ,
    UTSquadRepository.prototype.removeSquad = function(t, e) {
        var i = this.squads.get(t);
        i && i.remove(e)
    }
    ,
    UTSquadRepository.prototype.getFormation = function(t) {
        return this.formations.get(t)
    }
    ,
    UTSquadRepository.prototype.getFormations = function() {
        return this.formations.values()
    }
    ,
    UTSquadRepository.prototype.getPosition = function(t) {
        return this.positions.get(t)
    }
    ,
    UTSquadRepository.prototype.getPositionByUniqueName = function(e) {
        return JSUtils.find(this.positions.values(), function(t) {
            return t.getName() === e
        })
    }
    ,
    UTSquadRepository.prototype.setSquadDataLookup = function(r) {
        var n = this;
        r.formationData.forEach(function(i) {
            var t = i.uniquePositionSlots.map(function(t, e) {
                i.generalPositionSlots[e];
                return new UTSquadPositionDTO(r.positionData[t],[])
            })
              , e = new UTSquadFormationDTO(i,[],t);
            n.formations.set(e.getName(), e)
        }, this),
        r.positionData.forEach(function(t) {
            var e = new UTSquadPositionDTO(t,[]);
            n.positions.set(t.uniqueId, e)
        }, this)
    }
    ,
    UTSquadRepository.prototype.isSquadListCacheExpired = function() {
        return this.squadListCacheExpiration < Date.now()
    }
    ,
    UTSquadRepository.prototype.setSquadListCacheTimestamp = function(t, e) {
        this.squadListCacheExpiration = t + (JSUtils.isNumber(e) ? e * MS_PER_SECOND : 6e5)
    }
    ,
    UTSquadRepository
}(EAObject);
NamespaceManager.Register("repositories"),
repositories.Squad = new UTSquadRepository;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTLeagueRepository = function(i) {
    function UTLeagueRepository(t) {
        var e = i.call(this) || this;
        return t && e.add(t),
        e
    }
    return __extends(UTLeagueRepository, i),
    UTLeagueRepository.prototype.set = function(t, e) {
        return i.prototype.set.call(this, t, e)
    }
    ,
    UTLeagueRepository.prototype.add = function(t) {
        var e = this;
        Array.isArray(t) ? t.forEach(function(t) {
            return e.set(t.id, t)
        }, this) : this.set(t.id, t)
    }
    ,
    UTLeagueRepository.prototype.get = function(t) {
        return i.prototype.get.call(this, t)
    }
    ,
    UTLeagueRepository
}(EAHashTable)
  , UTNationRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTNationRepository(t) {
        var e = i.call(this) || this;
        return t && e.add(t),
        e
    }
    return __extends(UTNationRepository, i),
    UTNationRepository.prototype.set = function(t, e) {
        return i.prototype.set.call(this, t, e)
    }
    ,
    UTNationRepository.prototype.add = function(t) {
        var e = this;
        Array.isArray(t) ? t.forEach(function(t) {
            return e.set(t.id, t)
        }, this) : this.set(t.id, t)
    }
    ,
    UTNationRepository.prototype.get = function(t) {
        return i.prototype.get.call(this, t)
    }
    ,
    UTNationRepository
}(EAHashTable))
  , UTTeamRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTTeamRepository(t) {
        var e = i.call(this) || this;
        return t && e.add(t),
        e
    }
    return __extends(UTTeamRepository, i),
    UTTeamRepository.prototype.set = function(t, e) {
        return i.prototype.set.call(this, t, e)
    }
    ,
    UTTeamRepository.prototype.add = function(t) {
        var e = this;
        Array.isArray(t) ? t.forEach(function(t) {
            return e.set(t.id, t)
        }, this) : this.set(t.id, t)
    }
    ,
    UTTeamRepository.prototype.get = function(t) {
        return i.prototype.get.call(this, t)
    }
    ,
    UTTeamRepository
}(EAHashTable))
  , UTTeamConfigRepository = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTTeamConfigRepository() {
        var t = e.call(this) || this;
        return t.customTeams = new UTTeamRepository,
        t.leagues = new UTLeagueRepository,
        t.nations = new UTNationRepository,
        t.teams = new UTTeamRepository,
        t
    }
    return __extends(UTTeamConfigRepository, e),
    UTTeamConfigRepository.prototype.reset = function() {
        this.customTeams.clear(),
        this.leagues.clear(),
        this.nations.clear(),
        this.teams.clear()
    }
    ,
    UTTeamConfigRepository.prototype.addNations = function(t) {
        this.nations.add(t)
    }
    ,
    UTTeamConfigRepository.prototype.getNation = function(t) {
        return this.nations.get(t)
    }
    ,
    UTTeamConfigRepository.prototype.getNations = function() {
        return this.nations.values()
    }
    ,
    UTTeamConfigRepository.prototype.addLeagues = function(t) {
        this.leagues.add(t)
    }
    ,
    UTTeamConfigRepository.prototype.getLeague = function(t) {
        return this.leagues.get(t)
    }
    ,
    UTTeamConfigRepository.prototype.getLeagues = function() {
        return this.leagues.values()
    }
    ,
    UTTeamConfigRepository.prototype.addTeams = function(t) {
        this.teams.add(t)
    }
    ,
    UTTeamConfigRepository.prototype.addCustomTeams = function(t) {
        this.customTeams.add(t)
    }
    ,
    UTTeamConfigRepository.prototype.getTeam = function(t) {
        return this.teams.get(t)
    }
    ,
    UTTeamConfigRepository.prototype.getCustomTeam = function(t) {
        return this.customTeams.get(t)
    }
    ,
    UTTeamConfigRepository.prototype.getTeams = function() {
        return this.teams.values()
    }
    ,
    UTTeamConfigRepository.prototype.getCustomTeams = function() {
        return this.customTeams.values()
    }
    ,
    UTTeamConfigRepository
}(EAObject));
NamespaceManager.Register("repositories"),
repositories.TeamConfig = new UTTeamConfigRepository;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var EAKeyboardEventController = function(e) {
    function EAKeyboardEventController() {
        var t = e.call(this) || this;
        return t.eventDelegates = new EAHashTable,
        t.keyUpHandler = t.handleKeyUpEvent.bind(t),
        t
    }
    return __extends(EAKeyboardEventController, e),
    EAKeyboardEventController.prototype.init = function() {
        e.prototype.init.call(this),
        isWeb() && (this.eventDelegates.set(KeyboardEventPriority.POPUP, []),
        this.eventDelegates.set(KeyboardEventPriority.ACTIVE_ELEMENT, []),
        this.eventDelegates.set(KeyboardEventPriority.VIEW, []),
        document.addEventListener(EventType.KEYUP, this.keyUpHandler, !1))
    }
    ,
    EAKeyboardEventController.prototype.dealloc = function() {
        e.prototype.dealloc.call(this),
        isWeb() && document.removeEventListener(EventType.KEYUP, this.keyUpHandler, !1)
    }
    ,
    EAKeyboardEventController.prototype.registerDelegate = function(t, e) {
        if (isWeb()) {
            var i = this.eventDelegates.get(e);
            i && i.indexOf(t) < 0 && i.push(t)
        }
    }
    ,
    EAKeyboardEventController.prototype.unregisterDelegate = function(t, e) {
        if (isWeb()) {
            var i = this.eventDelegates.get(e);
            if (i) {
                var r = i.indexOf(t);
                0 <= r && i.splice(r, 1)
            }
        }
    }
    ,
    EAKeyboardEventController.prototype.handleKeyUpEvent = function(e) {
        var t = this.eventDelegates.get(KeyboardEventPriority.POPUP)
          , i = this.eventDelegates.get(KeyboardEventPriority.ACTIVE_ELEMENT)
          , r = this.eventDelegates.get(KeyboardEventPriority.VIEW);
        t && 0 < t.length ? t.forEach(function(t) {
            return t.handleKeyUpEvent(e)
        }) : i && 0 < i.length ? i.forEach(function(t) {
            return t.handleKeyUpEvent(e)
        }) : r && 0 < r.length && r.forEach(function(t) {
            return t.handleKeyUpEvent(e)
        })
    }
    ,
    EAKeyboardEventController
}(EAObject)
  , UTViewModel = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTViewModel() {
        var t = e.call(this) || this;
        return t.blockingRequests = [],
        t.requests = [],
        t
    }
    return __extends(UTViewModel, e),
    UTViewModel.prototype.dealloc = function() {
        e.prototype.dealloc.call(this),
        this.stopTrackingRequests()
    }
    ,
    UTViewModel.prototype.stopTrackingRequests = function() {
        0 < this.requests.length && this.requests.forEach(function(t) {
            return t.clearObservers()
        }),
        this.requests = [],
        0 < this.blockingRequests.length && this.blockingRequests.forEach(function(t) {
            t.clearObservers(),
            gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
        }),
        this.blockingRequests = []
    }
    ,
    UTViewModel.prototype._trackRequest = function(t, n, o) {
        var s = this;
        void 0 === n && (n = !1);
        var a = n ? this.blockingRequests : this.requests;
        n && gClickShield.showShield(EAClickShieldView.Shield.LOADING),
        a.push(t.observe(this, function(t) {
            for (var e = [], i = 1; i < arguments.length; i++)
                e[i - 1] = arguments[i];
            t.unobserve(s),
            n && gClickShield.hideShield(EAClickShieldView.Shield.LOADING);
            var r = a.indexOf(t);
            0 <= r && a.splice(r, 1),
            o && o.apply(void 0, e)
        }))
    }
    ,
    UTViewModel
}(EAObject))
  , UTCaptchaViewModel = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTCaptchaViewModel(t) {
        var e = i.call(this) || this;
        return e.captchaDao = t,
        e
    }
    return __extends(UTCaptchaViewModel, i),
    UTCaptchaViewModel.prototype.requestHealthCheck = function() {
        var t = this.captchaDao.checkHealth();
        return this._trackRequest(t, !0),
        t
    }
    ,
    UTCaptchaViewModel.prototype.requestCaptchaData = function() {
        var t = this.captchaDao.getCaptchaData();
        return this._trackRequest(t, !0),
        t
    }
    ,
    UTCaptchaViewModel.prototype.validateToken = function(t) {
        var e = this.captchaDao.validateToken(t);
        return this._trackRequest(e, !0),
        e
    }
    ,
    UTCaptchaViewModel
}(UTViewModel))
  , UTWorldCupStateViewModel = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTWorldCupStateViewModel(t) {
        var e = i.call(this) || this;
        return e.countryId = 0,
        e.worldCupDao = t,
        e.nationPacks = [],
        e
    }
    return __extends(UTWorldCupStateViewModel, i),
    UTWorldCupStateViewModel.prototype.hasCountry = function() {
        return 0 !== this.countryId
    }
    ,
    UTWorldCupStateViewModel.prototype.isComplete = function() {
        return this.hasCountry()
    }
    ,
    UTWorldCupStateViewModel.prototype.requestPacks = function() {
        var e = this
          , t = this.worldCupDao.getPacks();
        return this._trackRequest(t, !0, function(t) {
            if (t.success && t.response && !JSUtils.isString(t.response)) {
                e.nationPacks = t.response.packs.sort(function(t, e) {
                    return t.group < e.group ? -1 : t.group > e.group ? 1 : 0
                })
            }
        }),
        t
    }
    ,
    UTWorldCupStateViewModel.prototype.selectStarterPack = function(t) {
        var e = this.worldCupDao.selectNationStarterPack(t);
        return this._trackRequest(e, !0),
        e
    }
    ,
    UTWorldCupStateViewModel
}(UTViewModel))
  , UTAppTrackingController = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTAppTrackingController() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(UTAppTrackingController, t),
    UTAppTrackingController.askForPermission = function(t) {
        t()
    }
    ,
    UTAppTrackingController
}(EAObject))
  , UTNavigationButtonControl = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTNavigationButtonControl() {
        return t.call(this) || this
    }
    return __extends(UTNavigationButtonControl, t),
    UTNavigationButtonControl
}(UTButtonControl));
UTNavigationButtonControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("button");
        t.classList.add("ut-navigation-button-control"),
        this.__root = t,
        this._generated = !0
    }
}
,
UTNavigationButtonControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTNavigationButtonControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTNavigationBarView = function(e) {
    function UTNavigationBarView() {
        var t = e.call(this) || this;
        return t.currentStyle = UTNavigationBarView.Style.DEFAULT,
        t.visible = !0,
        t.primaryButton = null,
        t.secondaryButton = null,
        t
    }
    return __extends(UTNavigationBarView, e),
    UTNavigationBarView.prototype.dealloc = function() {
        this.secondaryButton && this.secondaryButton.removeClass("btn-navigation-secondary"),
        this.primaryButton = null,
        this.secondaryButton = null,
        e.prototype.dealloc.call(this)
    }
    ,
    UTNavigationBarView.prototype.layoutSubviews = function() {
        var e = this
          , t = this.getRootElement();
        this.primaryButton && DOMKit.insertBefore(this.primaryButton.getRootElement(), t.firstChild),
        this.secondaryButton && t.appendChild(this.secondaryButton.getRootElement()),
        this._subviews.forEach(function(t) {
            t.view !== e.primaryButton && t.view !== e.secondaryButton && t.container.appendChild(t.view.getRootElement())
        }, this)
    }
    ,
    UTNavigationBarView.prototype.setPrimaryButton = function(t) {
        this.primaryButton && this.primaryButton.removeFromSuperview(),
        t && this.addSubview(t),
        this.primaryButton = t || null
    }
    ,
    UTNavigationBarView.prototype.setSecondaryButton = function(t) {
        this.secondaryButton && (this.secondaryButton.removeFromSuperview(),
        this.secondaryButton.removeClass("btn-navigation-secondary")),
        t && (t.addClass("btn-navigation-secondary"),
        this.addSubview(t)),
        this.secondaryButton = t || null
    }
    ,
    UTNavigationBarView.prototype.setButtons = function(t, e) {
        this.setPrimaryButton(t),
        this.setSecondaryButton(e),
        this.layoutSubviews()
    }
    ,
    UTNavigationBarView.prototype.setHeader = function(t) {
        this.__title.textContent = t
    }
    ,
    UTNavigationBarView.prototype.setStyle = function(t) {
        this.currentStyle !== t && (this.removeClass(this.currentStyle),
        this.addClass(t),
        this.currentStyle = t)
    }
    ,
    UTNavigationBarView.prototype.setVisible = function(t, e, i) {
        var r = this;
        if (t = !!t,
        this.visible !== t) {
            if (e) {
                var n = this.visible ? enums.UIAnimation.FADE_OUT : enums.UIAnimation.FADE_IN;
                t && this.setVisibility(!0),
                this.perform(n, function() {
                    t || r.setVisibility(!1),
                    i && i()
                })
            } else
                this.setVisibility(t),
                i && i();
            this.visible = t
        }
    }
    ,
    UTNavigationBarView.Style = Object.freeze({
        DEFAULT: "",
        LANDSCAPE: "navbar-style-landscape",
        SECONDARY: "navbar-style-secondary"
    }),
    UTNavigationBarView
}(UTTargetActionView);
UTNavigationBarView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-navigation-bar-view"),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("title"),
        t.appendChild(this.__title),
        this.__root = t,
        this._generated = !0
    }
}
,
UTNavigationBarView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null
}
,
UTNavigationBarView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTNavigationContainerView = function(e) {
    function UTNavigationContainerView() {
        var t = e.call(this) || this;
        return t._navbar = null,
        t._toolbar = null,
        t
    }
    return __extends(UTNavigationContainerView, e),
    UTNavigationContainerView.prototype.dealloc = function() {
        this._navbar = null,
        this._toolbar = null,
        e.prototype.dealloc.call(this)
    }
    ,
    UTNavigationContainerView.prototype.layoutSubviews = function() {
        var e = this;
        this._subviews.forEach(function(t) {
            t.view !== e._navbar && t.view !== e._toolbar && t.container.appendChild(t.view.getRootElement())
        });
        var t = this.getRootElement();
        this._navbar && DOMKit.insertBefore(this._navbar.getRootElement(), t.firstChild),
        this._toolbar && t.appendChild(this._toolbar.getRootElement())
    }
    ,
    UTNavigationContainerView.prototype.getContentContainer = function() {
        return this.__content
    }
    ,
    UTNavigationContainerView.prototype.hasNavigationBar = function() {
        return this._navbar instanceof UTNavigationBarView
    }
    ,
    UTNavigationContainerView.prototype.hasToolbar = function() {
        return this._toolbar instanceof UTToolbarView
    }
    ,
    UTNavigationContainerView.prototype.appendNavigationBar = function(t) {
        this._navbar || (this.addSubview(t),
        this._navbar = t,
        this.layoutSubviews())
    }
    ,
    UTNavigationContainerView.prototype.removeNavigationBar = function(t) {
        this._navbar && (this._navbar.removeFromSuperview(t),
        this._navbar = null)
    }
    ,
    UTNavigationContainerView.prototype.appendToolbar = function(t) {
        this._toolbar || (this.addSubview(t),
        this._toolbar = t,
        this.layoutSubviews())
    }
    ,
    UTNavigationContainerView.prototype.removeToolbar = function(t) {
        this._toolbar && (this._toolbar.removeFromSuperview(t),
        this._toolbar = null)
    }
    ,
    UTNavigationContainerView.prototype.setNavigationContext = function(t) {
        var e = this.getContentContainer();
        e && (this.addSubview(t, e),
        e.appendChild(t.getRootElement()))
    }
    ,
    UTNavigationContainerView.prototype._applyBarDisplayAnimation = function(t) {
        var e = this;
        t.style.transition = "top 0.3s, bottom 0.3s",
        this._addListener(EventType.TRANSITIONEND, t, function() {
            t.style.transition = "",
            e._removeListenersByNS("barAnimate")
        }
        .bind(this), "barAnimate")
    }
    ,
    UTNavigationContainerView.prototype.showNavigationBar = function(t) {
        var e = this;
        requestAnimationFrame(function() {
            e._navbar && e.__content && (t && e._applyBarDisplayAnimation(e.__content),
            e.__content.style.top = e._navbar.getRootElement().offsetHeight + "px",
            e._navbar.setVisible(!0, t))
        })
    }
    ,
    UTNavigationContainerView.prototype.hideNavigationBar = function(t) {
        var e = this;
        requestAnimationFrame(function() {
            e._navbar && e.__content && (t && e._applyBarDisplayAnimation(e.__content),
            e.__content.style.top = "",
            e._navbar.setVisible(!1, t))
        })
    }
    ,
    UTNavigationContainerView.prototype.showToolbar = function(t) {
        var e = this;
        requestAnimationFrame(function() {
            e._toolbar && e.__content && (t && e._applyBarDisplayAnimation(e.__content),
            e.__content.style.bottom = e._toolbar.getRootElement().offsetHeight + "px",
            e._toolbar.setVisible(!0, t))
        })
    }
    ,
    UTNavigationContainerView.prototype.hideToolbar = function(t) {
        var e = this;
        requestAnimationFrame(function() {
            e._toolbar && e.__content && (t && e._applyBarDisplayAnimation(e.__content),
            e.__content.style.bottom = "",
            e._toolbar.setVisible(!1, t))
        })
    }
    ,
    UTNavigationContainerView
}(UTView);
UTNavigationContainerView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("section");
        t.classList.add("ut-navigation-container-view"),
        this.__content = document.createElement("div"),
        this.__content.classList.add("ut-navigation-container-view--content"),
        t.appendChild(this.__content),
        this.__root = t,
        this._generated = !0
    }
}
,
UTNavigationContainerView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__content = null
}
,
UTNavigationContainerView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTToolbarButtonControl = function(t) {
    function UTToolbarButtonControl() {
        return t.call(this) || this
    }
    return __extends(UTToolbarButtonControl, t),
    UTToolbarButtonControl
}(UTButtonControl);
UTToolbarButtonControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("button");
        t.classList.add("ut-toolbar-button-control"),
        this.__root = t,
        this._generated = !0
    }
}
,
UTToolbarButtonControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTToolbarButtonControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTToolbarView = function(t) {
    function UTToolbarView() {
        return t.call(this) || this
    }
    return __extends(UTToolbarView, t),
    UTToolbarView.prototype.setButtons = function(t) {
        var e = this;
        this.removeSubviews(),
        t.forEach(function(t) {
            return e.addSubview(t)
        }, this),
        this.layoutSubviews()
    }
    ,
    UTToolbarView.prototype.setVisible = function(t, e, i) {
        var r = this;
        if (void 0 === e && (e = !1),
        t = !!t,
        this.visible !== t) {
            if (e) {
                var n = this.visible ? enums.UIAnimation.FADE_OUT : enums.UIAnimation.FADE_IN;
                t && this.setVisibility(!0),
                this.perform(n, function() {
                    t || r.setVisibility(!1),
                    i && i()
                })
            } else
                this.setVisibility(t),
                i && i();
            this.visible = t
        }
    }
    ,
    UTToolbarView
}(UTView);
UTToolbarView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("nav");
        t.classList.add("ut-toolbar-view"),
        this.__root = t,
        this._generated = !0
    }
}
,
UTToolbarView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTToolbarView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTNavigationController = function(r) {
    function UTNavigationController(t, e) {
        var i = r.call(this) || this;
        return i._navigationBar = t || new UTNavigationBarView,
        i._toolbar = e || new UTToolbarView,
        i._backButton = new UTNavigationButtonControl,
        i._rootController = null,
        i._currentController = null,
        i._currentView = null,
        i._isTransitioning = !1,
        i.isNavVisible = !1,
        i.isToolbarVisible = !1,
        i
    }
    return __extends(UTNavigationController, r),
    UTNavigationController.prototype.init = function() {
        if (!this.initialized) {
            r.prototype.init.call(this);
            var t = this.getRootController();
            t.initialized || t.init();
            var e = this.getPrimaryNavigationItem();
            e.init(),
            e.addTarget(this, this._eBackButtonTapped, EventType.TAP),
            this._navigationBar.init(),
            this._toolbar.init()
        }
    }
    ,
    UTNavigationController.prototype.initWithRootController = function(t) {
        this.initialized || (this._rootController = t,
        this.init(),
        this.addChildViewController(t))
    }
    ,
    UTNavigationController.prototype.dealloc = function() {
        this._navigationBar && this._navigationBar.dealloc(),
        this._toolbar && this._toolbar.dealloc(),
        this.getPrimaryNavigationItem().dealloc(),
        this._rootController = null,
        this._currentController = null,
        this._currentView = null,
        this._childViewControllers.forEach(function(t) {
            return t.dealloc()
        }),
        r.prototype.dealloc.call(this)
    }
    ,
    UTNavigationController.prototype._getRootControllerInstance = function() {
        return new UTViewController
    }
    ,
    UTNavigationController.prototype._getViewInstanceFromData = function() {
        return new UTNavigationContainerView
    }
    ,
    UTNavigationController.prototype.viewWillAppear = function() {
        r.prototype.viewWillAppear.call(this),
        this._currentController && this._currentController.viewWillAppear()
    }
    ,
    UTNavigationController.prototype.viewWillDisappear = function() {
        r.prototype.viewWillDisappear.call(this),
        this._currentController && this._currentController.viewWillDisappear()
    }
    ,
    UTNavigationController.prototype.viewDidAppear = function() {
        if (r.prototype.viewDidAppear.call(this),
        !this._currentController && this._rootController) {
            this._showController(this._rootController, !0);
            var t = this.getRootPrimaryNavigationItem();
            t && (this._navigationBar.setPrimaryButton(t),
            this._navigationBar.layoutSubviews())
        } else
            this._currentController && this._currentController.viewDidAppear()
    }
    ,
    UTNavigationController.prototype.viewDidDisappear = function() {
        r.prototype.viewDidDisappear.call(this),
        this._currentController && this._currentController.viewDidDisappear()
    }
    ,
    UTNavigationController.prototype.setNavigationTitle = function(t) {
        this._navigationBar.setHeader(t)
    }
    ,
    UTNavigationController.prototype.setNavigationStyle = function(t) {
        this._navigationBar.setStyle(t)
    }
    ,
    UTNavigationController.prototype.setNavigationVisibility = function(t, e) {
        if (this.isNavVisible !== t) {
            var i = this.getView();
            this.isNavVisible = t,
            i.hasNavigationBar() || i.appendNavigationBar(this._navigationBar),
            this.isNavVisible ? i.showNavigationBar(e) : i.hideNavigationBar(e)
        }
    }
    ,
    UTNavigationController.prototype.setToolbarVisibility = function(t, e) {
        if (this.isToolbarVisible !== t) {
            var i = this.getView();
            this.isToolbarVisible = t,
            i.hasToolbar() || i.appendToolbar(this._toolbar),
            this.isToolbarVisible ? i.showToolbar(e) : i.hideToolbar(e)
        }
    }
    ,
    UTNavigationController.prototype.getRootController = function() {
        return this._rootController || (this._rootController = this._getRootControllerInstance(),
        this.addChildViewController(this._rootController)),
        this._rootController
    }
    ,
    UTNavigationController.prototype.getPreviousController = function(t) {
        return void 0 === t && (t = 1),
        t < 1 && (t = 1),
        this._currentController && this._childViewControllers[this._childViewControllers.indexOf(this._currentController) - t] || null
    }
    ,
    UTNavigationController.prototype.getCurrentController = function() {
        return this._currentController
    }
    ,
    UTNavigationController.prototype.getCurrentView = function() {
        return this._currentView
    }
    ,
    UTNavigationController.prototype.getToolbarItems = function() {
        return []
    }
    ,
    UTNavigationController.prototype.getPrimaryNavigationItem = function() {
        return this._backButton
    }
    ,
    UTNavigationController.prototype.getRootPrimaryNavigationItem = function() {
        return null
    }
    ,
    UTNavigationController.prototype.getSecondaryNavigationItem = function() {
        return this._currentController ? this._currentController.getNavigationItem() : null
    }
    ,
    UTNavigationController.prototype._showController = function(t, e) {
        var i = this;
        if (this._currentController !== t) {
            gClickShield.showShield(EAClickShieldView.Shield.INTERACTION),
            this._navigationBar.setInteractionState(!1),
            this._toolbar.setInteractionState(!1);
            var r = this._currentController;
            if (this._currentController = t,
            this._currentView = t.getView(),
            r) {
                r.viewWillDisappear();
                var n = r.getView();
                n && n.removeFromSuperview(e)
            }
            this._currentController.viewWillAppear(),
            this._navigationBar.setHeader(this.getNavigationTitle());
            var o = this.getSecondaryNavigationItem();
            o && (this._navigationBar.setSecondaryButton(o),
            this._navigationBar.layoutSubviews()),
            this._toolbar.setButtons(this._currentController.getToolbarItems());
            var s = this.getView();
            this._currentView.getSuperview() !== s && (this.willPush(this._currentController),
            s.setNavigationContext(this._currentView),
            this.didPush(this._currentController)),
            this._navigationBar.setInteractionState(!0),
            this._toolbar.setInteractionState(!0),
            r && (r.viewDidDisappear(),
            this._childViewControllers.indexOf(r) < 0 && r.dealloc()),
            this._currentController.viewDidAppear(),
            setTimeout(function() {
                i._currentController && i._currentController.className;
                gClickShield.hideShield(EAClickShieldView.Shield.INTERACTION)
            }, 300)
        }
    }
    ,
    UTNavigationController.prototype.pushViewController = function(t, e) {
        this._isTransitioning || 0 <= this._childViewControllers.indexOf(t) || (this._isTransitioning = !0,
        1 === this._childViewControllers.length && (this._navigationBar.setPrimaryButton(this.getPrimaryNavigationItem()),
        this._navigationBar.layoutSubviews()),
        this.addChildViewController(t),
        this._showController(t, e),
        this._isTransitioning = !1)
    }
    ,
    UTNavigationController.prototype.popViewController = function(t) {
        if (this._isTransitioning)
            return null;
        var e = this._childViewControllers.length - 1
          , i = this._childViewControllers[e]
          , r = this._childViewControllers[e - 1];
        if (!i || !r)
            return DebugUtils.Assert(!1, "Expected the stack to not be empty or at the root already"),
            null;
        if (this._isTransitioning = !0,
        this._showController(r, t),
        this.removeChildViewController(i),
        i.dealloc(),
        this._childViewControllers.length <= 1) {
            var n = this.getRootPrimaryNavigationItem();
            this._navigationBar.setPrimaryButton(n),
            this._navigationBar.layoutSubviews()
        }
        return this._isTransitioning = !1,
        i
    }
    ,
    UTNavigationController.prototype.popToViewController = function(t, e) {
        if (void 0 === e && (e = !1),
        this._isTransitioning || !this._currentController || t === this._currentController)
            return null;
        var i = null;
        for (this._isTransitioning = !0; 1 <= this._childViewControllers.length && (i = this._childViewControllers[this._childViewControllers.length - 1]) !== t; )
            i && this.removeChildViewController(i),
            i !== this._currentController && i.dealloc();
        if (DebugUtils.Assert(1 <= this._childViewControllers.length, "View controller not found in navigation stack; stack is now empty."),
        this._childViewControllers.length <= 1) {
            var r = this.getRootPrimaryNavigationItem();
            this._navigationBar.setPrimaryButton(r),
            this._navigationBar.layoutSubviews()
        }
        return this._showController(this._childViewControllers[this._childViewControllers.length - 1], e),
        this._isTransitioning = !1,
        i
    }
    ,
    UTNavigationController.prototype.popToRootViewController = function(t) {
        return void 0 === t && (t = !1),
        0 < this._childViewControllers.length ? this.popToViewController(this._childViewControllers[0], t) : null
    }
    ,
    UTNavigationController.prototype.getNavigationTitle = function() {
        return this._currentController ? this._currentController.getNavigationTitle() : this._rootController ? this._rootController.getNavigationTitle() : ""
    }
    ,
    UTNavigationController.prototype.willPush = function(t) {}
    ,
    UTNavigationController.prototype.didPush = function(t) {}
    ,
    UTNavigationController.prototype._eBackButtonTapped = function(t, e, i) {
        this.popViewController()
    }
    ,
    UTNavigationController
}(UTViewController)
  , UTPlayerHealthController = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTPlayerHealthController() {
        var t = e.call(this) || this;
        return t.timeTrackingStartTimestamp = 0,
        t.localWriteInterval = null,
        t.serverWriteInterval = null,
        t
    }
    return __extends(UTPlayerHealthController, e),
    UTPlayerHealthController.prototype.dealloc = function() {
        this.timeTrackingStartTimestamp = 0,
        this.localWriteInterval = null,
        this.serverWriteInterval = null,
        e.prototype.dealloc.call(this)
    }
    ,
    UTPlayerHealthController.prototype.getUnrecordedTimeSpent = function() {
        var t = 0 < this.timeTrackingStartTimestamp ? Date.now() - this.timeTrackingStartTimestamp : 0;
        return Math.round(t / MS_PER_SECOND)
    }
    ,
    UTPlayerHealthController.prototype.startTimeTracking = function() {
        services.PlayerHealth.isTrackingEnabled() && (this.timeTrackingStartTimestamp = Date.now(),
        this.startSaveIntervals(),
        services.PlayerHealth.readPlayerHealth(),
        services.PlayerHealth.trackUnsavedTimeSpent())
    }
    ,
    UTPlayerHealthController.prototype.stopTimeTracking = function() {
        var t = this.getUnrecordedTimeSpent();
        this.stopSaveIntervals(),
        services.PlayerHealth.isTrackingEnabled() && 0 < t && services.PlayerHealth.trackTimeSpent(t),
        this.timeTrackingStartTimestamp = 0
    }
    ,
    UTPlayerHealthController.prototype.startSaveIntervals = function() {
        var t = this
          , e = getAppMain().getConfigRepository()
          , i = e.getConfigNumber(EAConfigurationRepository.KEY_PLAYER_HEALTH_LOCAL_WRITE_INTERVAL);
        this.localWriteInterval = new EAIntervalController((0 < i ? i : 60) * MS_PER_SECOND,function() {
            return t.logInterval()
        }
        );
        var r = e.getConfigNumber(EAConfigurationRepository.KEY_PLAYER_HEALTH_SERVER_WRITE_INTERVAL);
        this.serverWriteInterval = new EAIntervalController((0 < r ? r : 600) * MS_PER_SECOND,function() {
            return t.serverWrite()
        }
        ),
        this.localWriteInterval.start(),
        this.serverWriteInterval.start()
    }
    ,
    UTPlayerHealthController.prototype.stopSaveIntervals = function() {
        this.localWriteInterval && this.serverWriteInterval && (this.localWriteInterval.dealloc(),
        this.serverWriteInterval.dealloc())
    }
    ,
    UTPlayerHealthController.prototype.logInterval = function() {
        var t = this.getUnrecordedTimeSpent();
        0 < t && services.PlayerHealth.trackTimeSpent(t),
        this.timeTrackingStartTimestamp = Date.now()
    }
    ,
    UTPlayerHealthController.prototype.serverWrite = function() {
        var i = this;
        services.PlayerHealth.persistTimeSpent().observe(this, function(t, e) {
            t.unobserve(i),
            DebugUtils.Assert(e.success, "There was an issue persisting Time Spent to UTAS.")
        })
    }
    ,
    UTPlayerHealthController
}(EAObject))
  , UTRootPresentationController = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTRootPresentationController(t, e) {
        return i.call(this, t, e) || this
    }
    return __extends(UTRootPresentationController, i),
    UTRootPresentationController.prototype.presentInContainerContext = function() {
        var t = this.presentedViewController.getView()
          , e = t.getRootElement();
        e.style.width = "100%",
        e.style.height = "100%",
        this.insertView(t, this.presentingViewController.getView())
    }
    ,
    UTRootPresentationController
}(UTPresentationController))
  , UTTabBarItemNotificationView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTTabBarItemNotificationView() {
        return t.call(this) || this
    }
    return __extends(UTTabBarItemNotificationView, t),
    UTTabBarItemNotificationView.prototype.setNumber = function(t) {
        this.getRootElement().textContent = JSUtils.isNumber(t) && 0 < t ? services.Localization.localizeNumber(t) : ""
    }
    ,
    UTTabBarItemNotificationView
}(UTView));
UTTabBarItemNotificationView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-tab-bar-item-notif"),
        this.__root = t,
        this._generated = !0
    }
}
,
UTTabBarItemNotificationView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTTabBarItemNotificationView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTTabBarItemView = function(e) {
    function UTTabBarItemView() {
        var t = e.call(this) || this;
        return t.tag = -1,
        t.notifBubble = null,
        t
    }
    return __extends(UTTabBarItemView, e),
    UTTabBarItemView.prototype.dealloc = function() {
        this.removeNotificationBubble(),
        e.prototype.dealloc.call(this)
    }
    ,
    UTTabBarItemView.prototype.setTag = function(t) {
        this.tag = t
    }
    ,
    UTTabBarItemView.prototype.getTag = function() {
        return this.tag
    }
    ,
    UTTabBarItemView.prototype.setText = function(t) {
        this.__buttonText.textContent = t
    }
    ,
    UTTabBarItemView.prototype.removeNotificationBubble = function() {
        this.notifBubble && (this.notifBubble.dealloc(),
        this.notifBubble = null)
    }
    ,
    UTTabBarItemView.prototype.addNotificationBubble = function() {
        this.notifBubble || (this.notifBubble = new UTTabBarItemNotificationView,
        this.addSubview(this.notifBubble),
        this.layoutSubviews())
    }
    ,
    UTTabBarItemView.prototype.togglePopToRootDisplayStyle = function(t) {
        this.toggleClass(UTTabBarItemView.STYLE.DEFAULT_TO_ROOT, t)
    }
    ,
    UTTabBarItemView.STYLE = {
        NONE: "",
        DEFAULT_TO_ROOT: "ut-tab-bar-item--default-to-root"
    },
    UTTabBarItemView
}(UTButtonControl);
UTTabBarItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("button");
        t.classList.add("ut-tab-bar-item"),
        this.__buttonText = document.createElement("span"),
        t.appendChild(this.__buttonText),
        this.__root = t,
        this._generated = !0
    }
}
,
UTTabBarItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__buttonText = null
}
,
UTTabBarItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTTabBarView = function(e) {
    function UTTabBarView() {
        var t = e.call(this) || this;
        return t.tabItems = [],
        t
    }
    return __extends(UTTabBarView, e),
    UTTabBarView.prototype.dealloc = function() {
        e.prototype.dealloc.call(this),
        this.tabItems.forEach(function(t) {
            t.removeTarget(this, this._eTabSelected, EventType.TAP)
        }, this)
    }
    ,
    UTTabBarView.prototype.layoutSubviews = function() {
        this._subviews.forEach(function(t) {
            var e = t.view.getRootElement();
            t.container === this.getRootElement() ? t.container.insertBefore(e, this.__navTabBar) : t.container.appendChild(e)
        }, this)
    }
    ,
    UTTabBarView.prototype.setTabItems = function(t) {
        this.tabItems.forEach(function(t) {
            t.removeFromSuperview()
        }, this),
        this.tabItems = t.slice(),
        this.tabItems.forEach(this.setupTabItem, this)
    }
    ,
    UTTabBarView.prototype.setupTabItem = function(t) {
        t.addTarget(this, this._eTabSelected.bind(this), EventType.TAP),
        this.addSubview(t, this.__navTabBar)
    }
    ,
    UTTabBarView.prototype.setSelectedIndex = function(i) {
        this.tabItems[i] && this.tabItems.forEach(function(t, e) {
            t.toggleClass(enums.UIState.SELECTED, e === i)
        })
    }
    ,
    UTTabBarView.prototype.toggleSubNavDisplay = function(t) {
        DOMKit.toggleDisplayStyle(this.__navTabBar, t)
    }
    ,
    UTTabBarView.prototype.toggleItemNotification = function(t, e) {
        var i = this.tabItems[t];
        i && (e ? i.addNotificationBubble() : i.removeNotificationBubble())
    }
    ,
    UTTabBarView.prototype._eTabSelected = function(t, e, i) {
        if (this.isInteractionEnabled()) {
            var r = this.tabItems.indexOf(t);
            this._triggerActions(UTTabBarView.Event.TAB_SELECTED, {
                index: r,
                tag: t.getTag()
            })
        }
    }
    ,
    UTTabBarView.Event = {
        TAB_SELECTED: "UTTabBarView.Event.TAB_SELECTED"
    },
    UTTabBarView
}(UTTargetActionView);
UTTabBarView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("section");
        t.classList.add("ut-tab-bar-view"),
        this.__navTabBar = document.createElement("nav"),
        this.__navTabBar.classList.add("ut-tab-bar"),
        t.appendChild(this.__navTabBar),
        this.__root = t,
        this._generated = !0
    }
}
,
UTTabBarView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__navTabBar = null
}
,
UTTabBarView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTTabBarController = function(e) {
    function UTTabBarController() {
        var t = e.call(this) || this;
        return t._currentController = null,
        t._currentView = null,
        t
    }
    return __extends(UTTabBarController, e),
    UTTabBarController.prototype.viewDidAppear = function() {
        e.prototype.viewDidAppear.call(this),
        !this._currentController && 0 < this._childViewControllers.length && (this._showController(this._childViewControllers[0]),
        this.getView().setSelectedIndex(0))
    }
    ,
    UTTabBarController.prototype.initWithViewControllers = function(t) {
        if (!this.initialized) {
            var e = [];
            t.forEach(function(t) {
                this.addChildViewController(t),
                t.tabBarItem || (t.tabBarItem = new UTTabBarItemView,
                t.tabBarItem.init(),
                t.tabBarItem.setText(t.getNavigationTitle())),
                e.push(t.tabBarItem)
            }, this);
            var i = this.getView();
            i.setTabItems(e),
            i.addTarget(this, this._eTabSelected, UTTabBarView.Event.TAB_SELECTED),
            this.init()
        }
    }
    ,
    UTTabBarController.prototype._getViewInstanceFromData = function() {
        return new UTTabBarView
    }
    ,
    UTTabBarController.prototype.getCurrentViewController = function() {
        return this._currentController
    }
    ,
    UTTabBarController.prototype.setSelectedIndex = function(t) {
        var e = this._childViewControllers[t];
        e instanceof UTViewController && (this.getView().setSelectedIndex(t),
        this._showController(e))
    }
    ,
    UTTabBarController.prototype._getIndexOfTabBarItemByTag = function(t) {
        for (var e = -1, i = this._childViewControllers.length, r = 0; r < i; r++) {
            var n = this._childViewControllers[r].tabBarItem;
            if (n && n.getTag() === t) {
                e = r;
                break
            }
        }
        return e
    }
    ,
    UTTabBarController.prototype.setSelectedIndexByTag = function(t) {
        var e = this._getIndexOfTabBarItemByTag(t);
        0 <= e && this.setSelectedIndex(e)
    }
    ,
    UTTabBarController.prototype._showController = function(t, e) {
        if (this._currentController !== t) {
            var i = this.getView();
            gClickShield.showShield(EAClickShieldView.Shield.INTERACTION),
            i.setInteractionState(!1);
            var r = this._currentController;
            if (this._currentController = t,
            this._currentView = t.getView(),
            r) {
                r.viewWillDisappear();
                var n = r.getView();
                n && n.removeFromSuperview(e)
            }
            this._currentController.viewWillAppear(),
            this._currentView.getSuperview() !== i && (i.addSubview(this._currentView),
            i.layoutSubviews()),
            i.setInteractionState(!0),
            r && r.viewDidDisappear(),
            this._currentController.viewDidAppear(),
            setTimeout(function() {
                return gClickShield.hideShield(EAClickShieldView.Shield.INTERACTION)
            }, 300)
        }
    }
    ,
    UTTabBarController.prototype._eTabSelected = function(t, e, i) {
        var r = i && i.index || 0
          , n = this._childViewControllers[r];
        n instanceof UTViewController && (this.getView().setSelectedIndex(r),
        this._showController(n))
    }
    ,
    UTTabBarController
}(UTViewController)
  , UTGameTabBarController = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTGameTabBarController() {
        return r.call(this) || this
    }
    return __extends(UTGameTabBarController, r),
    UTGameTabBarController.prototype.viewDidAppear = function() {
        r.prototype.viewDidAppear.call(this);
        var t = services.User.getUser();
        t && this.toggleStoreNotificationBubble(0 < t.unopenedPacks),
        getDefaultDispatcher().addObserver(AppNotification.STORE_PACK_COUNT_CHANGE, this, this.nStorePackChange)
    }
    ,
    UTGameTabBarController.prototype.viewWillDisappear = function() {
        r.prototype.viewDidDisappear.call(this),
        getDefaultDispatcher().removeObserver(AppNotification.STORE_PACK_COUNT_CHANGE, this)
    }
    ,
    UTGameTabBarController.prototype.toggleStoreNotificationBubble = function(t) {
        var e = this._getIndexOfTabBarItemByTag(UTGameTabBarController.TabTag.STORE);
        0 <= e && this.getView().toggleItemNotification(e, t)
    }
    ,
    UTGameTabBarController.prototype._eTabSelected = function(t, e, i) {
        i.index !== UTGameTabBarController.TabTag.LEADERBOARDS || services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.LEADERBOARDS_ENABLED) ? (this._currentController instanceof UTNavigationController && this._currentController.popToRootViewController(),
        r.prototype._eTabSelected.call(this, t, e, i)) : services.Notification.queue([services.Localization.localize("popup.error.LeaderboardsDown"), UINotificationType.NEGATIVE])
    }
    ,
    UTGameTabBarController.prototype.nStorePackChange = function(t, e, i) {
        this.toggleStoreNotificationBubble(0 < i.unopenedPacks)
    }
    ,
    UTGameTabBarController.TabTag = Object.freeze({
        HOME: 0,
        SQUADS: 1,
        SBC: 2,
        TRANSFERS: 3,
        STORE: 4,
        CLUB: 5,
        SETTINGS: 6,
        LEADERBOARDS: 7,
        STADIUM: 8
    }),
    UTGameTabBarController
}(UTTabBarController))
  , UTPersonaTableCellView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTPersonaTableCellView(t, e) {
        var i = r.call(this) || this;
        return i.club = e,
        i.persona = t,
        i
    }
    return __extends(UTPersonaTableCellView, r),
    UTPersonaTableCellView.prototype.dealloc = function() {
        r.prototype.dealloc.call(this)
    }
    ,
    UTPersonaTableCellView.prototype.setInteractionState = function(t) {
        r.prototype.setInteractionState.call(this, t),
        this.toggleClass(enums.UIRowActionClass.MORE, t)
    }
    ,
    UTPersonaTableCellView.prototype.setPersona = function(t) {
        this.persona = t,
        (!this.club || this.persona.getValidClubs().indexOf(this.club) < 0) && (this.club = this.persona.getCurrentClub())
    }
    ,
    UTPersonaTableCellView.prototype.setClub = function(t) {
        var e = 0 <= this.persona.getValidClubs().indexOf(t);
        DebugUtils.Assert(e, "Assigned club must be associated with the current persona"),
        e && (this.club = t)
    }
    ,
    UTPersonaTableCellView.prototype.setPlatformClass = function(t) {
        this.removeClass("xbox playstation pc nintendoSwitch"),
        this.addClass(t)
    }
    ,
    UTPersonaTableCellView.prototype.render = function() {
        var t, e, i;
        switch (null === (t = this.club) || void 0 === t ? void 0 : t.platform) {
        case GamePlatform.XBL:
            this.setPlatformClass("xbox");
            break;
        case GamePlatform.PSN:
            this.setPlatformClass("playstation");
            break;
        case GamePlatform.PC:
            this.setPlatformClass("pc");
            break;
        case GamePlatform.STADIA:
            this.setPlatformClass("stadia");
            break;
        case GamePlatform.SWI:
            this.setPlatformClass("nintendoSwitch");
            break;
        default:
            DebugUtils.Assert(!1, "Unrecognized gameSku.")
        }
        this.__clubName.textContent = null !== (i = null === (e = this.club) || void 0 === e ? void 0 : e.name) && void 0 !== i ? i : BLANK_STR,
        this.__personaName.textContent = this.persona.name
    }
    ,
    UTPersonaTableCellView.prototype._touchStarted = function(t) {
        r.prototype._touchStarted.call(this, t),
        this.addClass(enums.UIState.ACTIVE)
    }
    ,
    UTPersonaTableCellView.prototype._touchMoved = function(t) {
        r.prototype._touchMoved.call(this, t),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTPersonaTableCellView.prototype._touchEnded = function(t) {
        r.prototype._touchEnded.call(this, t),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTPersonaTableCellView.prototype._tapDetected = function(t) {
        r.prototype._tapDetected.call(this, t),
        this._triggerActions(EventType.TAP, {
            club: this.club,
            persona: this.persona
        })
    }
    ,
    UTPersonaTableCellView
}(UTTargetActionView));
UTPersonaTableCellView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("button");
        t.classList.add("ut-persona-selector-item"),
        t.classList.add("ut-group-button");
        var e = document.createElement("div");
        e.classList.add("ut-persona-selector-item-details"),
        this.__personaIcon = document.createElement("div"),
        this.__personaIcon.classList.add("btn-icon"),
        e.appendChild(this.__personaIcon),
        this.__personaName = document.createElement("span"),
        this.__personaName.classList.add("btn-text"),
        e.appendChild(this.__personaName),
        this.__clubName = document.createElement("span"),
        this.__clubName.classList.add("btn-subtext"),
        e.appendChild(this.__clubName),
        t.appendChild(e),
        this.__root = t,
        this._generated = !0
    }
}
,
UTPersonaTableCellView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__personaIcon = null,
    this.__personaName = null,
    this.__clubName = null
}
,
UTPersonaTableCellView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSectionedTableHeaderView = function(e) {
    function UTSectionedTableHeaderView() {
        return e.call(this) || this
    }
    return __extends(UTSectionedTableHeaderView, e),
    UTSectionedTableHeaderView.prototype.init = function() {
        e.prototype.init.call(this),
        this._optionButton.init(),
        this._optionButton.addTarget(this, this.onActionButtonTapped, EventType.TAP)
    }
    ,
    UTSectionedTableHeaderView.prototype.dealloc = function() {
        this._optionButton.removeTarget(this, this.onActionButtonTapped, EventType.TAP),
        e.prototype.dealloc.call(this)
    }
    ,
    UTSectionedTableHeaderView.prototype.setInteractionState = function(t) {
        e.prototype.setInteractionState.call(this, t),
        this._optionButton.setInteractionState(t)
    }
    ,
    UTSectionedTableHeaderView.prototype.setButtonText = function(t) {
        this._optionButton.setText(t)
    }
    ,
    UTSectionedTableHeaderView.prototype.hideButton = function() {
        this._optionButton.hide()
    }
    ,
    UTSectionedTableHeaderView.prototype.showButton = function() {
        this._optionButton.show()
    }
    ,
    UTSectionedTableHeaderView.prototype.toggleButton = function(t) {
        this._optionButton.setDisplay(t)
    }
    ,
    UTSectionedTableHeaderView.prototype.toggleButtonEnabled = function(t) {
        this._optionButton.setInteractionState(t)
    }
    ,
    UTSectionedTableHeaderView.prototype.setText = function(t) {
        this.__text.textContent = t
    }
    ,
    UTSectionedTableHeaderView.prototype.onActionButtonTapped = function() {
        this._triggerActions(EventType.TAP)
    }
    ,
    UTSectionedTableHeaderView
}(UTTargetActionView);
UTSectionedTableHeaderView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("header");
        t.classList.add("ut-section-header-view"),
        this.__text = document.createElement("h2"),
        this.__text.classList.add("title"),
        t.appendChild(this.__text),
        this._optionButton = new UTStandardButtonControl,
        this._optionButton.getRootElement().classList.add("section-header-btn"),
        this._optionButton.getRootElement().classList.add("mini"),
        this._optionButton.getRootElement().classList.add("call-to-action"),
        t.appendChild(this._optionButton.getRootElement()),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSectionedTableHeaderView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__text = null,
    this._optionButton.destroy()
}
,
UTSectionedTableHeaderView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPersonaSelectorView = function(e) {
    function UTPersonaSelectorView() {
        var t = e.call(this) || this;
        return t._personaRows = [],
        t
    }
    return __extends(UTPersonaSelectorView, e),
    UTPersonaSelectorView.prototype.init = function() {
        e.prototype.init.call(this);
        var t = services.Localization;
        this._currentPersonaTitle.setText(t.localize("title.selectedpersona")),
        this._currentPersonaTitle.hideButton(),
        this._changePersonaTitle.setText(t.localize("title.personaselector")),
        this._changePersonaTitle.hideButton(),
        this.__helpText.textContent = t.localize("persona.helptext")
    }
    ,
    UTPersonaSelectorView.prototype.dealloc = function() {
        this.clearPersonaRows(),
        e.prototype.dealloc.call(this)
    }
    ,
    UTPersonaSelectorView.prototype.clearPersonaRows = function() {
        this._personaRows.forEach(function(t) {
            t.dealloc()
        }),
        this._personaRows = []
    }
    ,
    UTPersonaSelectorView.prototype.setSelectedPersona = function(t) {
        this._selectedPersona.setPersona(t);
        var e = t.getCurrentClub();
        e && this._selectedPersona.setClub(e),
        this._selectedPersona.render()
    }
    ,
    UTPersonaSelectorView.prototype.setSelectablePersonas = function(t) {
        var r = this;
        this.clearPersonaRows(),
        DOMKit.empty(this.__personaList),
        t.forEach(function(i) {
            i.getValidClubs().forEach(function(t) {
                var e = new UTPersonaTableCellView(i,t);
                e.render(),
                e.addTarget(r, r.onPersonaSelect, EventType.TAP),
                e.setInteractionState(!0),
                r._personaRows.push(e),
                r.__personaList.appendChild(e.getRootElement())
            }, r)
        }, this)
    }
    ,
    UTPersonaSelectorView.prototype.onPersonaSelect = function(t, e, i) {
        TelemetryManager.trackEvent(TelemetryManager.Sections.MISC, TelemetryManager.Categories.BUTTON_PRESS, "Change Persona"),
        this._triggerActions(EventType.TAP, i)
    }
    ,
    UTPersonaSelectorView
}(UTTargetActionView);
UTPersonaSelectorView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-persona-selector"),
        t.classList.add("ut-content-container");
        var e = document.createElement("div");
        e.classList.add("ut-content");
        var i = document.createElement("section");
        this._currentPersonaTitle = new UTSectionedTableHeaderView,
        i.appendChild(this._currentPersonaTitle.getRootElement());
        var r = document.createElement("div");
        r.classList.add("ut-button-group"),
        this._selectedPersona = new UTPersonaTableCellView,
        r.appendChild(this._selectedPersona.getRootElement()),
        this.__helpText = document.createElement("p"),
        r.appendChild(this.__helpText),
        i.appendChild(r),
        e.appendChild(i);
        var n = document.createElement("section");
        this._changePersonaTitle = new UTSectionedTableHeaderView,
        n.appendChild(this._changePersonaTitle.getRootElement()),
        this.__personaList = document.createElement("div"),
        this.__personaList.classList.add("ut-button-group"),
        n.appendChild(this.__personaList),
        e.appendChild(n),
        t.appendChild(e),
        this.__root = t,
        this._generated = !0
    }
}
,
UTPersonaSelectorView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._currentPersonaTitle.destroy(),
    this._selectedPersona.destroy(),
    this.__helpText = null,
    this._changePersonaTitle.destroy(),
    this.__personaList = null
}
,
UTPersonaSelectorView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPersonaSelectorViewController = function(n) {
    function UTPersonaSelectorViewController() {
        return n.call(this) || this
    }
    return __extends(UTPersonaSelectorViewController, n),
    UTPersonaSelectorViewController.prototype.init = function() {
        n.prototype.init.call(this),
        this.getView().addTarget(this, this.onPersonaSelected, EventType.TAP)
    }
    ,
    UTPersonaSelectorViewController.prototype._getViewInstanceFromData = function() {
        return new UTPersonaSelectorView
    }
    ,
    UTPersonaSelectorViewController.prototype._getTelemetryId = function() {
        return "Settings - Persona Selector"
    }
    ,
    UTPersonaSelectorViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.personaselector")
    }
    ,
    UTPersonaSelectorViewController.prototype.viewDidAppear = function() {
        var t;
        n.prototype.viewDidAppear.call(this),
        TelemetryManager.trackPage(TelemetryManager.Sections.HOME, "Persona Selector");
        var e = this.getView()
          , i = services.User.getUser()
          , r = null !== (t = null == i ? void 0 : i.getSelectedPersona()) && void 0 !== t ? t : null;
        i && r && (e.setSelectedPersona(r),
        e.setSelectablePersonas(i.getUnselectedPersonas()))
    }
    ,
    UTPersonaSelectorViewController.prototype.changePersona = function(t, e) {
        hasConnection() ? (t.sku = e,
        getAppMain().getLoginController().switchPersona(t)) : (utils.PopupManager.showNoInternetConnectionPopup(),
        this.getView().setInteractionState(!0))
    }
    ,
    UTPersonaSelectorViewController.prototype.onPersonaSelected = function(t, e, i) {
        var r = this
          , n = this.getView();
        n.setInteractionState(!1),
        DebugUtils.Assert(JSUtils.isValid(i.club), "Expected a club associated with the persona."),
        utils.PopupManager.showConfirmation(utils.PopupManager.Confirmations.CHANGE_PERSONA, [], function() {
            var t, e;
            return r.changePersona(i.persona, null !== (e = null === (t = i.club) || void 0 === t ? void 0 : t.sku) && void 0 !== e ? e : GameSku.UNKNOWN)
        }, function() {
            return n.setInteractionState(!0)
        })
    }
    ,
    UTPersonaSelectorViewController
}(UTViewController)
  , UTFlatButtonControl = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTFlatButtonControl() {
        return t.call(this) || this
    }
    return __extends(UTFlatButtonControl, t),
    UTFlatButtonControl
}(UTButtonControl));
UTFlatButtonControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("button");
        t.classList.add("flat"),
        this.__root = t,
        this._generated = !0
    }
}
,
UTFlatButtonControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTFlatButtonControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPersonaView = function(e) {
    function UTPersonaView() {
        var t = e.call(this) || this;
        return t.currentPlatform = "",
        t
    }
    return __extends(UTPersonaView, e),
    UTPersonaView.prototype.init = function() {
        e.prototype.init.call(this),
        this._imgBadge.placeholderURL = AssetLocationUtils.getBadgeImageUri(UTItemEntity.DEFAULT_ASSET_ID),
        this._actionBtn.setText(services.Localization.localize("more.persona")),
        this._actionBtn.init(),
        this._actionBtn.hide()
    }
    ,
    UTPersonaView.prototype.setClubBadge = function(t) {
        this._imgBadge.setResource(AssetLocationUtils.getBadgeImageUri(t, enums.UIThemeVariation.DARK), !0),
        this._imgBadge.addClass("iconActive")
    }
    ,
    UTPersonaView.prototype.setUsername = function(t) {
        this.__userName.textContent = t
    }
    ,
    UTPersonaView.prototype.setEstablishedDate = function(t) {
        this.__established.textContent = services.Localization.localizeEstablishedDate(new Date(1e3 * t))
    }
    ,
    UTPersonaView.prototype.setPlatform = function(t) {
        if (this.currentPlatform !== t) {
            switch ("" !== this.currentPlatform && this.__platform.classList.remove(this.currentPlatform),
            t) {
            case GamePlatform.XBL:
                this.currentPlatform = "xbox";
                break;
            case GamePlatform.PSN:
                this.currentPlatform = "playstation";
                break;
            case GamePlatform.PC:
                this.currentPlatform = "pc";
                break;
            case GamePlatform.STADIA:
                this.currentPlatform = "stadia";
                break;
            case GamePlatform.SWI:
                this.currentPlatform = "nintendoSwitch";
                break;
            default:
                DebugUtils.Assert(!1, "Encountered an unsupported SKU")
            }
            this.__platform.classList.add(this.currentPlatform)
        }
    }
    ,
    UTPersonaView.prototype.getActionButton = function() {
        return this._actionBtn
    }
    ,
    UTPersonaView.prototype.setBtnText = function(t) {
        this._actionBtn.setText(t)
    }
    ,
    UTPersonaView.prototype.setBtnVisibility = function(t) {
        this._actionBtn.setDisplay(t)
    }
    ,
    UTPersonaView
}(UTView);
UTPersonaView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("persona"),
        this.__userInfo = document.createElement("div"),
        this.__userInfo.classList.add("user-info"),
        this._imgBadge = new UTItemImageView,
        this.__userInfo.appendChild(this._imgBadge.getRootElement());
        var e = document.createElement("div");
        e.classList.add("user-data-container"),
        this.__userName = document.createElement("h1"),
        e.appendChild(this.__userName),
        this.__established = document.createElement("h2"),
        e.appendChild(this.__established),
        this.__userInfo.appendChild(e),
        t.appendChild(this.__userInfo),
        this.__platform = document.createElement("div"),
        this.__platform.classList.add("platform"),
        this._actionBtn = new UTStandardButtonControl,
        this._actionBtn.getRootElement().classList.add("mini"),
        this.__platform.appendChild(this._actionBtn.getRootElement()),
        t.appendChild(this.__platform),
        this.__root = t,
        this._generated = !0
    }
}
,
UTPersonaView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__userInfo = null,
    this._imgBadge.destroy(),
    this.__userName = null,
    this.__established = null,
    this.__platform = null,
    this._actionBtn.destroy()
}
,
UTPersonaView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPersonaViewController = function(c) {
    function UTPersonaViewController() {
        var t = c.call(this) || this;
        return t.showPersonaChanger = !0,
        t
    }
    return __extends(UTPersonaViewController, c),
    UTPersonaViewController.prototype.init = function() {
        this.initialized || (c.prototype.init.call(this),
        this.getView().getActionButton().addTarget(this, this._ePersonaSelectorSelected, EventType.TAP))
    }
    ,
    UTPersonaViewController.prototype._getViewInstanceFromData = function() {
        return new UTPersonaView
    }
    ,
    UTPersonaViewController.prototype.viewDidAppear = function() {
        var t, e;
        c.prototype.viewDidAppear.call(this);
        var i = this.getView()
          , r = services.Authentication.getUtasSession()
          , n = null !== (e = null === (t = r.user) || void 0 === t ? void 0 : t.getSelectedPersona()) && void 0 !== e ? e : null;
        if (i.setDisplay(JSUtils.isValid(n)),
        n) {
            var o = n.getCurrentClub()
              , s = !1;
            if (r.user)
                for (var a = r.user.getUnselectedPersonas(), l = 0; l < a.length; l++)
                    if (0 < a[l].getValidClubs().length) {
                        s = !0;
                        break
                    }
            i.setBtnVisibility(this.showPersonaChanger && s),
            i.setPlatform(n.platform),
            i.setUsername(n.name),
            o && (i.setClubBadge(o.assetId),
            i.setEstablishedDate(o.established))
        }
    }
    ,
    UTPersonaViewController.prototype._ePersonaSelectorSelected = function(t, e, i) {
        var r = this.getNavigationController();
        if (r) {
            var n = new UTPersonaSelectorViewController;
            n.init(),
            r.pushViewController(n)
        }
    }
    ,
    UTPersonaViewController
}(UTViewController)
  , UTFunCaptchaView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTFunCaptchaView() {
        return e.call(this) || this
    }
    return __extends(UTFunCaptchaView, e),
    UTFunCaptchaView.prototype.init = function() {
        var t = services.Localization;
        e.prototype.init.call(this),
        this.__infoTitle.textContent = t.localize("navbar.label.captcha"),
        this.__infoText.textContent = t.localize("captcha.info.body")
    }
    ,
    UTFunCaptchaView.prototype.appendPersonaSelector = function(t) {
        this.addClass("has-persona-selector"),
        this.addSubview(t, this.__personaSelectorContainer)
    }
    ,
    UTFunCaptchaView
}(UTView));
UTFunCaptchaView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.setAttribute("id", "FunCaptchaRequired"),
        t.classList.add("sm-ut-content-container"),
        t.classList.add("ut-content-container");
        var e = document.createElement("div");
        e.classList.add("ut-content"),
        this.__personaSelectorContainer = document.createElement("div"),
        this.__personaSelectorContainer.classList.add("ut-app-settings-persona-selector"),
        e.appendChild(this.__personaSelectorContainer);
        var i = document.createElement("div");
        i.classList.add("ut-fun-captcha-required"),
        i.classList.add("ut-login-generic");
        var r = document.createElement("div");
        r.classList.add("ut-login-generic-content");
        var n = document.createElement("div");
        this.__infoTitle = document.createElement("h2"),
        this.__infoTitle.classList.add("title"),
        n.appendChild(this.__infoTitle),
        this.__infoText = document.createElement("p"),
        n.appendChild(this.__infoText),
        r.appendChild(n);
        var o = document.createElement("div");
        o.setAttribute("id", "funCaptchaDiv"),
        r.appendChild(o),
        i.appendChild(r),
        e.appendChild(i),
        t.appendChild(e),
        this.__root = t,
        this._generated = !0
    }
}
,
UTFunCaptchaView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__personaSelectorContainer = null,
    this.__infoTitle = null,
    this.__infoText = null
}
,
UTFunCaptchaView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTFunCaptchaViewController = function(n) {
    function UTFunCaptchaViewController() {
        var t = n.call(this) || this;
        return t.captchaLoaded = !1,
        t.captchaViewModel = null,
        t.personaController = null,
        t
    }
    return __extends(UTFunCaptchaViewController, n),
    UTFunCaptchaViewController.prototype.init = function() {
        n.prototype.init.call(this);
        var t = this.getView();
        this.captchaViewModel = new UTCaptchaViewModel(accessobjects.Captcha),
        this.captchaViewModel.init(),
        this.personaController = new UTPersonaViewController,
        this.personaController.init(),
        this.addChildViewController(this.personaController),
        t.appendPersonaSelector(this.personaController.getView()),
        t.layoutSubviews();
        var e = document.createElement("script");
        e.id = "funCaptchaHeaderScript",
        e.type = "text/javascript",
        e.async = !0,
        e.defer = !0,
        e.src = "https://ea-api.arkoselabs.com/fc/api/?onload=loadFunCaptcha",
        document.head.appendChild(e),
        TelemetryManager.trackPage(TelemetryManager.Sections.LOGIN, "CaptchaV2")
    }
    ,
    UTFunCaptchaViewController.prototype.dealloc = function() {
        var t, e, i;
        n.prototype.dealloc.call(this),
        null === (t = this.captchaViewModel) || void 0 === t || t.dealloc(),
        null === (e = this.personaController) || void 0 === e || e.dealloc(),
        this.captchaViewModel = null,
        this.personaController = null;
        var r = document.getElementById("funCaptchaHeaderScript");
        null === (i = null == r ? void 0 : r.parentNode) || void 0 === i || i.removeChild(r)
    }
    ,
    UTFunCaptchaViewController.prototype._getViewInstanceFromData = function() {
        return new UTFunCaptchaView
    }
    ,
    UTFunCaptchaViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.captcha")
    }
    ,
    UTFunCaptchaViewController.prototype.viewDidAppear = function() {
        var t;
        n.prototype.viewDidAppear.call(this);
        var e = this.getNavigationController();
        null == e || e.setNavigationVisibility(isPhone(), !0),
        null === (t = this.personaController) || void 0 === t || t.viewDidAppear(),
        this.loadFunCaptcha()
    }
    ,
    UTFunCaptchaViewController.prototype.loadFunCaptcha = function() {
        var t, n = this;
        if (!this.captchaLoaded) {
            var o = document.getElementById("loadFunCaptchaScript");
            null === (t = this.captchaViewModel) || void 0 === t || t.requestCaptchaData().observe(this, function(t, e) {
                var i, r;
                t.unobserve(n),
                e.success && JSUtils.isObject(e.response) ? (i = e.response.pk || getAppMain().getConfigRepository().getConfigString(EAConfigurationRepository.KEY_FUNCAPTCHA_PK),
                r = e.response.blob || null,
                _initCaptcha.call(n, i, r)) : (i = getAppMain().getConfigRepository().getConfigString(EAConfigurationRepository.KEY_FUNCAPTCHA_PK),
                _initCaptcha.call(n, i, r = null))
            })
        }
        function _initCaptcha(t, e) {
            if (!JSUtils.isValid(o)) {
                var i = services.Localization.locale.toBCPString();
                (o = document.createElement("script")).id = "loadFunCaptchaScript";
                var r = "";
                null !== e && (r = "'data': {'blob':'" + e + "'},");
                var n = "{'public_key': '" + t + "', " + r + "'target_html': 'funCaptchaDiv', 'callback': UTFunCaptchaViewController.captchaCompletedCallback,'language': '" + i + "'}";
                o.innerHTML = "var funCaptcha;function loadFunCaptcha() {\tif(!JSUtils.isValid(funCaptcha)){\t\tfunCaptcha = new FunCaptcha(" + n + ");\t}else{\t\tfunCaptcha.refresh_session();\t}};",
                document.body.appendChild(o),
                this.captchaLoaded = !0
            }
        }
    }
    ,
    UTFunCaptchaViewController.captchaCompletedCallback = function() {
        var i = this
          , t = document.getElementById("FunCaptcha-Token")
          , e = t instanceof HTMLInputElement ? t.value : ""
          , r = new UTCaptchaViewModel(accessobjects.Captcha);
        r.init(),
        r.validateToken(e).observe(this, function(t, e) {
            t.unobserve(i),
            e.success ? getAppMain().getLoginController().login(!0) : getAppMain().getLoginController().logout(),
            r.dealloc()
        })
    }
    ,
    UTFunCaptchaViewController
}(UTViewController)
  , UTGettingStartedView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTGettingStartedView() {
        return t.call(this) || this
    }
    return __extends(UTGettingStartedView, t),
    UTGettingStartedView.prototype.init = function() {
        t.prototype.init.call(this),
        this._learnMore.init(),
        this._learnMore.setText(services.Localization.localize("gettingstarted.learnmore")),
        this._futLogo.init(),
        this._futLogo.loadImages()
    }
    ,
    UTGettingStartedView.prototype.appendPersonaSelector = function(t) {
        this.addClass("has-persona-selector"),
        this.addSubview(t, this.__personaSelectorContainer)
    }
    ,
    UTGettingStartedView.prototype.render = function(t) {
        var e = "";
        switch (t) {
        case GettingStartedTypes.ACCESS_TRIAL:
            e = "gettingStartedFifa.contentTrial";
            break;
        case GettingStartedTypes.FREE_TRIAL:
            e = "gettingStartedFifa.freeTrial";
            break;
        case GettingStartedTypes.FUT:
            e = "gettingstarted.futcontent1";
            break;
        case GettingStartedTypes.PLATFORM_SWITCH:
            e = "gettingstarted.switchcontent1";
            break;
        case GettingStartedTypes.WEBSTART_OVER:
            e = "webstartaccessover.text";
            break;
        default:
            e = "gettingStartedFifa.content1"
        }
        this.__description.textContent = services.Localization.localize(e);
        var i = this.__steps.parentNode;
        i && (t === GettingStartedTypes.WEBSTART_OVER ? (i.removeChild(this.__steps),
        this.__infoTitle.textContent = services.Localization.localize("gettingstarted.fifa"),
        this.__joinTheClub.textContent = services.Localization.localize("gettingstarted.jointheclub")) : (DOMKit.toggleDisplayStyle(this.__joinTheClub, !1),
        this.__infoTitle.textContent = services.Localization.localize("navbar.label.gettingstarted"),
        t === GettingStartedTypes.PLATFORM_SWITCH ? i.removeChild(this.__steps) : t === GettingStartedTypes.FUT ? (this.__step1.textContent = services.Localization.localize("gettingstarted.futstep1"),
        this.__step2.textContent = services.Localization.localize("gettingstarted.futstep3")) : (this.__step1.textContent = services.Localization.localize("gettingStartedFifa.content2"),
        this.__step2.textContent = services.Localization.localize("gettingStartedFifa.content4"))))
    }
    ,
    UTGettingStartedView.prototype.getLearnMoreButton = function() {
        return this._learnMore
    }
    ,
    UTGettingStartedView
}(UTView));
UTGettingStartedView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("sm-ut-content-container"),
        t.classList.add("ut-content-container");
        var e = document.createElement("div");
        e.classList.add("ut-content"),
        this.__personaSelectorContainer = document.createElement("div"),
        this.__personaSelectorContainer.classList.add("ut-app-settings-persona-selector"),
        e.appendChild(this.__personaSelectorContainer),
        this.__bootBox = document.createElement("div"),
        this.__bootBox.classList.add("ut-getting-started");
        var i = document.createElement("div");
        i.classList.add("ut-getting-started-logo"),
        this._futLogo = new UTFUTLogoView,
        i.appendChild(this._futLogo.getRootElement()),
        this.__bootBox.appendChild(i);
        var r = document.createElement("div");
        r.classList.add("ut-getting-started-content");
        var n = document.createElement("div");
        n.classList.add("ut-getting-started--scrollable"),
        this.__infoTitle = document.createElement("h2"),
        n.appendChild(this.__infoTitle),
        this.__description = document.createElement("p"),
        this.__description.classList.add("description"),
        n.appendChild(this.__description),
        this.__steps = document.createElement("ul"),
        this.__steps.classList.add("isolated-section"),
        this.__steps.classList.add("steps");
        var o = document.createElement("li");
        this.__step1 = document.createElement("span"),
        o.appendChild(this.__step1),
        this.__steps.appendChild(o);
        var s = document.createElement("li");
        this.__step2 = document.createElement("span"),
        s.appendChild(this.__step2),
        this.__steps.appendChild(s),
        n.appendChild(this.__steps),
        this.__joinTheClub = document.createElement("p"),
        n.appendChild(this.__joinTheClub),
        r.appendChild(n),
        this._learnMore = new UTStandardButtonControl,
        this._learnMore.getRootElement().classList.add("ut-getting-started--button"),
        this._learnMore.getRootElement().classList.add("call-to-action"),
        r.appendChild(this._learnMore.getRootElement()),
        this.__bootBox.appendChild(r),
        e.appendChild(this.__bootBox),
        t.appendChild(e),
        this.__root = t,
        this._generated = !0
    }
}
,
UTGettingStartedView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__personaSelectorContainer = null,
    this.__bootBox = null,
    this._futLogo.destroy(),
    this.__infoTitle = null,
    this.__description = null,
    this.__steps = null,
    this.__step1 = null,
    this.__step2 = null,
    this.__joinTheClub = null,
    this._learnMore.destroy()
}
,
UTGettingStartedView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTGettingStartedViewController = function(e) {
    function UTGettingStartedViewController() {
        var t = e.call(this) || this;
        return t.type = GettingStartedTypes.FIFA,
        t.personaController = null,
        t
    }
    return __extends(UTGettingStartedViewController, e),
    UTGettingStartedViewController.prototype.init = function() {
        this.initialized || (e.prototype.init.call(this),
        this.getView().getLearnMoreButton().addTarget(this, this._eLearnMoreSelected, EventType.TAP),
        TelemetryManager.trackPage(TelemetryManager.Sections.LOGIN, "No FUT Data"))
    }
    ,
    UTGettingStartedViewController.prototype.dealloc = function() {
        e.prototype.dealloc.call(this),
        this.personaController && (this.personaController.dealloc(),
        this.personaController = null)
    }
    ,
    UTGettingStartedViewController.prototype._getViewInstanceFromData = function() {
        return new UTGettingStartedView
    }
    ,
    UTGettingStartedViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.gettingstarted")
    }
    ,
    UTGettingStartedViewController.prototype.viewDidAppear = function() {
        e.prototype.viewDidAppear.call(this);
        var t = this.getNavigationController();
        t && t.setNavigationVisibility(isPhone(), !0),
        this.personaController && this.personaController.viewDidAppear()
    }
    ,
    UTGettingStartedViewController.prototype.setType = function(t) {
        var e, i = !1;
        for (e in GettingStartedTypes)
            if (GettingStartedTypes.hasOwnProperty(e) && GettingStartedTypes[e] === t) {
                i = !0;
                break
            }
        if (DebugUtils.Assert(i, "Invalid getting started page type: " + t),
        i) {
            this.type = t;
            var r = services.Authentication.getUtasSession()
              , n = r.user ? r.user.getSelectedPersona() : null;
            this.getView().render(this.type),
            this.type !== GettingStartedTypes.FIFA && n && n.hasClubForCurrentYear && this._generatePersonaController()
        }
    }
    ,
    UTGettingStartedViewController.prototype._generatePersonaController = function() {
        if (!this.personaController) {
            var t = this.getView();
            this.personaController = new UTPersonaViewController,
            this.personaController.init(),
            this.addChildViewController(this.personaController),
            t.appendPersonaSelector(this.personaController.getView()),
            t.layoutSubviews()
        }
    }
    ,
    UTGettingStartedViewController.prototype._eLearnMoreSelected = function(t, e) {
        var i, r = services.Localization;
        if (this.type !== GettingStartedTypes.FIFA)
            switch (r.locale.region) {
            case RegionEnum.USA:
                i = r.localize("link.gettingstartedfut.en_us");
                break;
            case RegionEnum.CANADA:
                i = r.localize("link.gettingstartedfut.en_ca");
                break;
            case RegionEnum.AUSTRALIA:
                i = r.localize("link.gettingstartedfut.en_au");
                break;
            default:
                i = r.localize("link.gettingstartedfut")
            }
        else
            i = r.localize("link.gettingstartedfifa");
        services.URL.process(i)
    }
    ,
    UTGettingStartedViewController
}(UTViewController)
  , UTLanguageTableCellView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTLanguageTableCellView() {
        return i.call(this) || this
    }
    return __extends(UTLanguageTableCellView, i),
    UTLanguageTableCellView.prototype.init = function() {
        i.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTLanguageTableCellView.prototype.setInteractionState = function(t) {
        var e = this._interactionState;
        i.prototype.setInteractionState.call(this, t),
        this._interactionState !== e && this.toggleClass(enums.UIState.DISABLED, !this._interactionState)
    }
    ,
    UTLanguageTableCellView.prototype.setName = function(t) {
        this.__name.textContent = t
    }
    ,
    UTLanguageTableCellView.prototype._mouseEnter = function(t) {
        this.addClass(enums.UIState.HOVER)
    }
    ,
    UTLanguageTableCellView.prototype._mouseLeave = function(t) {
        this.removeClass(enums.UIState.HOVER)
    }
    ,
    UTLanguageTableCellView.prototype._touchStarted = function(t) {
        i.prototype._touchStarted.call(this, t),
        this.addClass(enums.UIState.ACTIVE)
    }
    ,
    UTLanguageTableCellView.prototype._touchMoved = function(t) {
        i.prototype._touchMoved.call(this, t),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTLanguageTableCellView.prototype._touchEnded = function(t) {
        i.prototype._touchEnded.call(this, t),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTLanguageTableCellView.prototype._tapDetected = function(t) {
        i.prototype._tapDetected.call(this, t),
        this._triggerActions(EventType.TAP)
    }
    ,
    UTLanguageTableCellView
}(UTTargetActionView));
UTLanguageTableCellView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-language-table-cell-view"),
        this.__name = document.createElement("span"),
        this.__name.classList.add("ut-language-table-cell-view--name"),
        t.appendChild(this.__name),
        this.__root = t,
        this._generated = !0
    }
}
,
UTLanguageTableCellView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__name = null
}
,
UTLanguageTableCellView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTLanguageSelectView = function(e) {
    function UTLanguageSelectView() {
        var t = e.call(this) || this;
        return t.cells = [],
        t
    }
    return __extends(UTLanguageSelectView, e),
    UTLanguageSelectView.prototype.init = function() {
        e.prototype.init.call(this),
        this._futLogo.init(),
        this._futLogo.loadImages()
    }
    ,
    UTLanguageSelectView.prototype.dealloc = function() {
        this.clearLanguageCells(),
        e.prototype.dealloc.call(this)
    }
    ,
    UTLanguageSelectView.prototype.clearLanguageCells = function() {
        this.cells.forEach(function(t) {
            return t.dealloc()
        }),
        this.cells = []
    }
    ,
    UTLanguageSelectView.prototype.generateLanguageCell = function(t) {
        var e = new UTLanguageTableCellView;
        e.init(),
        e.setName(t.name),
        e.addTarget(this, this.eLanguageSelected, EventType.TAP),
        this.cells.push(e),
        this.addSubview(e, this.__languageTable)
    }
    ,
    UTLanguageSelectView.prototype.setLocales = function(t) {
        this.clearLanguageCells(),
        t.forEach(this.generateLanguageCell, this),
        this.layoutSubviews()
    }
    ,
    UTLanguageSelectView.prototype.eLanguageSelected = function(t, e, i) {
        this._triggerActions(EventType.TAP, {
            index: this.cells.indexOf(t)
        })
    }
    ,
    UTLanguageSelectView
}(UTTargetActionView);
UTLanguageSelectView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-language-select"),
        t.classList.add("sm-ut-content-container"),
        t.classList.add("ut-content-container");
        var e = document.createElement("div");
        e.classList.add("ut-content");
        var i = document.createElement("div");
        i.classList.add("ut-language-select-content"),
        this._futLogo = new UTFUTLogoView,
        i.appendChild(this._futLogo.getRootElement()),
        this.__languageTable = document.createElement("div"),
        this.__languageTable.classList.add("ut-language-select--table"),
        i.appendChild(this.__languageTable),
        e.appendChild(i),
        t.appendChild(e),
        this.__root = t,
        this._generated = !0
    }
}
,
UTLanguageSelectView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._futLogo.destroy(),
    this.__languageTable = null
}
,
UTLanguageSelectView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTLanguageSelectViewController = function(e) {
    function UTLanguageSelectViewController() {
        var t = e.call(this) || this;
        return t.callback = null,
        t.locales = [],
        t
    }
    return __extends(UTLanguageSelectViewController, e),
    UTLanguageSelectViewController.prototype.init = function() {
        e.prototype.init.call(this),
        this.locales = services.Localization.getSupportedLocales(),
        this.getView().addTarget(this, this.eLanguageSelected, EventType.TAP),
        TelemetryManager.trackPage(TelemetryManager.Sections.LOGIN, "Language Select")
    }
    ,
    UTLanguageSelectViewController.prototype.dealloc = function() {
        this.callback = null,
        this.locales = [],
        e.prototype.dealloc.call(this)
    }
    ,
    UTLanguageSelectViewController.prototype._getViewInstanceFromData = function() {
        return new UTLanguageSelectView
    }
    ,
    UTLanguageSelectViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("title.languageselect")
    }
    ,
    UTLanguageSelectViewController.prototype.viewDidAppear = function() {
        e.prototype.viewDidAppear.call(this),
        this.getView().setLocales(this.locales)
    }
    ,
    UTLanguageSelectViewController.prototype.setLanguageSelectCallback = function(t) {
        this.callback = t
    }
    ,
    UTLanguageSelectViewController.prototype.selectLocale = function(t) {
        var i = this
          , e = services.Localization;
        gClickShield.showShield(EAClickShieldView.Shield.LOADING),
        getStorage().setItem(STORAGE_LOCALE_KEY, t.toBCPString()),
        e.locale = t,
        e.requestLocalization().observe(this, function(t, e) {
            t.unobserve(i),
            i.callback && i.callback(),
            gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
        })
    }
    ,
    UTLanguageSelectViewController.prototype.eLanguageSelected = function(t, e, i) {
        var r = this.locales[i.index];
        DebugUtils.Assert(JSUtils.isValid(r), "Missing data for selected language."),
        r && this.selectLocale(r)
    }
    ,
    UTLanguageSelectViewController
}(UTViewController)
  , UTLicenseView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTLicenseView() {
        return e.call(this) || this
    }
    return __extends(UTLicenseView, e),
    UTLicenseView.prototype.init = function() {
        var t = services.Localization;
        this.cbLicenseImageLoad = this.eLicenseImageLoad.bind(this),
        this.__licenseLogo.addEventListener(EventType.LOAD, this.cbLicenseImageLoad, !1),
        this.__licenseTitle.textContent = t.localize("license.text.header").toUpperCase(),
        this.__licenseText1.textContent = t.localize("license.text.body1"),
        this.__licenseText2.textContent = t.localize("license.text.body2"),
        DOMKit.toggleDisplayStyle(this.__licenseLogo, !1),
        this.__licenseLogo.src = AssetLocationUtils.getLicenseLogoUri(services.Localization.locale.language),
        e.prototype.init.call(this)
    }
    ,
    UTLicenseView.prototype.dealloc = function() {
        this.clearLoadEventListener(),
        e.prototype.dealloc.call(this)
    }
    ,
    UTLicenseView.prototype.clearLoadEventListener = function() {
        this.cbLicenseImageLoad && this.__licenseLogo.removeEventListener(EventType.LOAD, this.cbLicenseImageLoad, !1)
    }
    ,
    UTLicenseView.prototype.eLicenseImageLoad = function(t) {
        this.clearLoadEventListener(),
        DOMKit.addClass(this.__licenseLogo, UTLicenseView.Style.FADE_IN_SCREEN),
        DOMKit.toggleDisplayStyle(this.__licenseLogo, !0),
        this._triggerActions(EventType.LOAD)
    }
    ,
    UTLicenseView.Style = Object.freeze({
        FADE_IN_SCREEN: "fade-in-screen"
    }),
    UTLicenseView
}(UTTargetActionView));
UTLicenseView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-license"),
        t.classList.add("sm-ut-content-container"),
        t.classList.add("ut-content-container");
        var e = document.createElement("div");
        e.classList.add("ut-content-center"),
        e.classList.add("ut-content");
        var i = document.createElement("div");
        i.classList.add("ut-license-content"),
        this.__licenseLogo = document.createElement("img"),
        this.__licenseLogo.classList.add("licenseLogo"),
        i.appendChild(this.__licenseLogo),
        this.__licenseTitle = document.createElement("h1"),
        this.__licenseTitle.classList.add("licenseTitle"),
        i.appendChild(this.__licenseTitle),
        this.__licenseText1 = document.createElement("p"),
        this.__licenseText1.classList.add("licenseBody"),
        i.appendChild(this.__licenseText1),
        this.__licenseText2 = document.createElement("p"),
        this.__licenseText2.classList.add("licenseBody"),
        i.appendChild(this.__licenseText2),
        e.appendChild(i),
        t.appendChild(e),
        this.__root = t,
        this._generated = !0
    }
}
,
UTLicenseView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__licenseLogo = null,
    this.__licenseTitle = null,
    this.__licenseText1 = null,
    this.__licenseText2 = null
}
,
UTLicenseView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var ShowOffLoginControllerStep, UTLicenseViewController = function(e) {
    function UTLicenseViewController() {
        var t = e.call(this) || this;
        return t.completedFlags = 0,
        t.hasLowMemory = !1,
        t.setTimerFlagTimeout = 0,
        t
    }
    return __extends(UTLicenseViewController, e),
    UTLicenseViewController.prototype.init = function() {
        e.prototype.init.call(this),
        this.getView().addTarget(this, this.eLicenseImageLoad, EventType.LOAD);
        var t = getDefaultDispatcher();
        t.addObserver(AppNotification.APP_PAUSE, this, this.nAppPaused),
        t.addObserver(AppNotification.APP_RESUME, this, this.nAppResumed),
        TelemetryManager.trackPage(TelemetryManager.Sections.LOGIN, "Legal")
    }
    ,
    UTLicenseViewController.prototype.dealloc = function() {
        clearTimeout(this.setTimerFlagTimeout);
        var t = getDefaultDispatcher();
        t.removeObserver(AppNotification.APP_PAUSE, this),
        t.removeObserver(AppNotification.APP_RESUME, this),
        e.prototype.dealloc.call(this)
    }
    ,
    UTLicenseViewController.prototype._getViewInstanceFromData = function() {
        return new UTLicenseView
    }
    ,
    UTLicenseViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("gettingstarted.welcome")
    }
    ,
    UTLicenseViewController.prototype.eLicenseImageLoad = function(t, e, i) {
        this.checkFreeDiskSpace(),
        this.startDisplayTimer()
    }
    ,
    UTLicenseViewController.prototype.startDisplayTimer = function() {
        var t = this;
        clearTimeout(this.setTimerFlagTimeout),
        this.setTimerFlagTimeout = window.setTimeout(function() {
            return t.setContinueFlag(UTLicenseViewController.FLAGS.TIMER)
        }, 3e3)
    }
    ,
    UTLicenseViewController.prototype.checkFlagState = function() {
        var t = this;
        this.completedFlags === (UTLicenseViewController.FLAGS.TIMER | UTLicenseViewController.FLAGS.MEMORY) && (this.hasLowMemory ? utils.PopupManager.showAlert(utils.PopupManager.Alerts.LOW_MEMORY, function() {
            return t.transitionToLogin
        }) : this.transitionToLogin())
    }
    ,
    UTLicenseViewController.prototype.setContinueFlag = function(t) {
        DebugUtils.Assert(!(this.completedFlags & t), "Flag has already been set."),
        this.completedFlags = this.completedFlags | t,
        this.checkFlagState()
    }
    ,
    UTLicenseViewController.prototype.checkFreeDiskSpace = function() {
        function Z5a() {
            e.setContinueFlag(UTLicenseViewController.FLAGS.MEMORY)
        }
        var e = this;
        isChrome() ? Z5a.call(this) : window.plugins.utilities.getFreeDiskSpace(function(t) {
            e.hasLowMemory = t < UTLicenseViewController.LOW_MEMORY_LIMIT,
            e.setContinueFlag(UTLicenseViewController.FLAGS.MEMORY)
        }
        .bind(this), Z5a.bind(this))
    }
    ,
    UTLicenseViewController.prototype.transitionToLogin = function() {
        getAppMain().getRootViewController().showLoginView()
    }
    ,
    UTLicenseViewController.prototype.nAppPaused = function(t, e, i) {
        clearTimeout(this.setTimerFlagTimeout)
    }
    ,
    UTLicenseViewController.prototype.nAppResumed = function(t, e, i) {
        this.completedFlags & UTLicenseViewController.FLAGS.TIMER || this.startDisplayTimer()
    }
    ,
    UTLicenseViewController.FLAGS = Object.freeze({
        TIMER: 1,
        MEMORY: 2
    }),
    UTLicenseViewController.LOW_MEMORY_LIMIT = 25600,
    UTLicenseViewController
}(UTViewController);
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
!function(t) {
    t[t.EXTENDED_LOC = 0] = "EXTENDED_LOC",
    t[t.PRE_LOAD_SQUAD = 1] = "PRE_LOAD_SQUAD",
    t[t.LOAD_SQUAD = 2] = "LOAD_SQUAD",
    t[t.SQUAD_SCREEN = 3] = "SQUAD_SCREEN"
}(ShowOffLoginControllerStep = ShowOffLoginControllerStep || {});
var UTShowOffLoginController = function(e) {
    function UTShowOffLoginController() {
        var t = e.call(this) || this;
        return t.showOffDto = null,
        t
    }
    return __extends(UTShowOffLoginController, e),
    UTShowOffLoginController.prototype.onPreLoadSquad = function() {
        function t6a() {
            i.isRunning = !1,
            utils.PopupManager.showAlert(utils.PopupManager.Alerts.ORIGIN_UNAVAILABLE, i.logout.bind(i)),
            gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
        }
        function u6a(t, e) {
            t.unobserve(i),
            e.success ? i.runNextStep() : t6a()
        }
        function v6a(t, e) {
            t.unobserve(i),
            e.success ? services.Configuration.requestSquadData().observe(i, u6a) : t6a()
        }
        function w6a(t, e) {
            t.unobserve(i),
            e.success ? services.Configuration.loadRarityData().observe(i, v6a) : t6a()
        }
        function x6a(t, e) {
            t.unobserve(i),
            e.success ? services.Configuration.requestPlayerIconData().observe(i, w6a) : t6a()
        }
        function y6a(t, e) {
            t.unobserve(i),
            e.success ? services.Configuration.requestPlayerMetaData().observe(i, x6a) : t6a()
        }
        var i = this;
        services.Configuration.requestTeamConfig().observe(this, function(t, e) {
            t.unobserve(i),
            e.success ? services.Configuration.requestStaticPlayerData().observe(i, y6a) : t6a()
        })
    }
    ,
    UTShowOffLoginController.prototype.getShowOffSquad = function() {
        var i = this;
        services.Squad.loadShowOffSquad().observe(this, function(t, e) {
            (t.unobserve(i),
            DebugUtils.Assert(e.success, "Failed to load shared squad"),
            e.success && e.data) ? (i.showOffDto = e.data.showOff,
            i.runNextStep()) : (window.location.search.substring(1).length && void 0 !== window.history && void 0 !== window.history.pushState && window.history.pushState({}, document.title, window.location.pathname),
            i.isRunning = !1,
            gClickShield.hideShield(EAClickShieldView.Shield.LOADING))
        })
    }
    ,
    UTShowOffLoginController.prototype.goToSquadScreen = function() {
        this.isRunning = !1,
        DebugUtils.Assert(JSUtils.isValid(this.showOffDto), "Missing shared squad data. Abandoning redirect to squad screen."),
        this.showOffDto && getAppMain().getRootViewController().showSharedSquadView(this.showOffDto),
        gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
    }
    ,
    UTShowOffLoginController.prototype.runCurrentStep = function() {
        switch (this.currentLoginStep) {
        case ShowOffLoginControllerStep.EXTENDED_LOC:
            this.getExtendedLocFile();
            break;
        case ShowOffLoginControllerStep.PRE_LOAD_SQUAD:
            this.onPreLoadSquad();
            break;
        case ShowOffLoginControllerStep.LOAD_SQUAD:
            this.getShowOffSquad();
            break;
        case ShowOffLoginControllerStep.SQUAD_SCREEN:
            this.goToSquadScreen();
            break;
        default:
            DebugUtils.Assert(!1, "Invalid or unsupported bootflow step requested."),
            this.isRunning = !1,
            utils.PopupManager.showAlert(utils.PopupManager.Alerts.ORIGIN_UNAVAILABLE, this.logout.bind(this)),
            gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
        }
    }
    ,
    UTShowOffLoginController.prototype.logout = function() {
        DebugUtils.Assert(!this.isRunning, "Attempted to logout when a login/logout request is already running."),
        this.isRunning || this.resetApp()
    }
    ,
    UTShowOffLoginController
}(UTLoginController)
  , UTLoginView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTLoginView() {
        return e.call(this) || this
    }
    return __extends(UTLoginView, e),
    UTLoginView.prototype.init = function() {
        e.prototype.init.call(this);
        var t = services.Localization;
        this._btnLogin.init(),
        this._btnLogin.setText(t.localize("login.loginButtonText")),
        this._linkGettingStarted.init(),
        this._linkGettingStarted.setText(t.localize("login.gettingstarted")),
        this._linkGettingStarted.addTarget(this, this.eGettingStarted, EventType.TAP),
        this._futLogo.init(),
        this._futLogo.loadImages()
    }
    ,
    UTLoginView.prototype.getLoginButton = function() {
        return this._btnLogin
    }
    ,
    UTLoginView.prototype.enableLoginButton = function(t) {
        this._btnLogin.setInteractionState(t)
    }
    ,
    UTLoginView.prototype.eGettingStarted = function(t, e, i) {
        services.URL.process(services.Localization.localize("link.gettingstarted"))
    }
    ,
    UTLoginView
}(UTView));
function UTLoginViewController() {
    UTViewController.call(this),
    this._inAppBrowser = null,
    this._successCallbackDelegate = null,
    this._errorCallbackDelegate = null,
    this._linkCallbackDelegate = null,
    this._browserDismissedCallbackDelegate = null,
    this._recreateOnResume = !1
}
UTLoginView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.setAttribute("id", "Login"),
        t.classList.add("ut-login"),
        t.classList.add("sm-ut-content-container"),
        t.classList.add("ut-content-container");
        var e = document.createElement("div");
        e.classList.add("ut-content");
        var i = document.createElement("div");
        i.classList.add("ut-login-content"),
        this._futLogo = new UTFUTLogoView,
        i.appendChild(this._futLogo.getRootElement()),
        this._btnLogin = new UTStandardButtonControl,
        this._btnLogin.getRootElement().classList.add("call-to-action"),
        i.appendChild(this._btnLogin.getRootElement()),
        this._linkGettingStarted = new UTFlatButtonControl,
        this._linkGettingStarted.getRootElement().classList.add("alt"),
        this._linkGettingStarted.getRootElement().classList.add("camel-case"),
        i.appendChild(this._linkGettingStarted.getRootElement()),
        e.appendChild(i),
        t.appendChild(e),
        this.__root = t,
        this._generated = !0
    }
}
,
UTLoginView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._futLogo.destroy(),
    this._btnLogin.destroy(),
    this._linkGettingStarted.destroy()
}
,
UTLoginView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
,
JSUtils.inherits(UTLoginViewController, UTViewController),
UTLoginViewController.IOS_STATUS_BAR_STYLE = {
    DEFAULT: 0,
    BLACK: 1
},
UTLoginViewController.prototype.init = function init() {
    this.superclass();
    var t = getAppMain().getConfigRepository();
    eadp.identity.setConnectHost(t.getConfigString(EAConfigurationRepository.KEY_EADP_CONNECT_HOST)),
    eadp.identity.setPortalHost(t.getConfigString(EAConfigurationRepository.KEY_EADP_PORTAL_HOST)),
    eadp.identity.setProxyHost(t.getConfigString(EAConfigurationRepository.KEY_EADP_PROXY_HOST)),
    eadp.identity.setClientId(t.getConfigString(EAConfigurationRepository.KEY_EADP_CLIENT_ID)),
    eadp.identity.setClientSecret(t.getConfigString(EAConfigurationRepository.KEY_EADP_CLIENT_SECRET)),
    eadp.identity.setLocale(services.Localization.locale.toEANetworkString()),
    eadp.identity.setDeviceId(getUUID()),
    eadp.identity.setReleaseType(t.getConfigString(EAConfigurationRepository.KEY_EADP_RELEASE_TYPE));
    var e = window.location.href
      , i = HttpUtils.getParamsFromUrl(e)
      , r = HttpUtils.getUriRoot(e)
      , n = services.URL.findValidDeepLinkID(i.keys());
    n !== DeepLinkSection.NONE && (services.URL.setDeepLinkURL(n, i.get(n)),
    getStorage().setItem(STORAGE_DEEP_LINK_KEY, services.URL.getDeepLinkURL())),
    r = r.replace(/\/$/, "") + "/auth.html",
    eadp.identity.setRedirectUri(r),
    this.getView().getLoginButton().addTarget(this, this._eLoginSelected, EventType.TAP),
    TelemetryManager.trackPage(TelemetryManager.Sections.LOGIN, "Login")
}
,
UTLoginViewController.prototype.dealloc = function dealloc() {
    this.superclass()
}
,
UTLoginViewController.prototype._getViewInstanceFromData = function _getViewInstanceFromData() {
    return new UTLoginView
}
,
UTLoginViewController.prototype.getNavigationTitle = function getNavigationTitle() {
    return services.Localization.localize("navbar.label.loginfut")
}
,
UTLoginViewController.prototype.viewDidAppear = function viewDidAppear() {
    var t = function() {
        console.log("[controllers.LoginController] Unable to auto-login."),
        this.getView().enableLoginButton(!0)
    }
    .bind(this)
      , e = function() {
        eadp.identity.getUserInfo(this._onEadpUserInfoSuccess.bind(this), this._onEadpUserInfoFail.bind(this))
    }
    .bind(this);
    services.Squad.hasExternalShowOffSquad() ? this._startUnauthenticatedLoginFlow() : isWeb() ? (this.getView().enableLoginButton(!1),
    eadp.identity.getAccessToken() ? e() : eadp.identity.checkEADPAuth(e, t)) : eadp.identity.isAuthenticated(function() {
        console.log("LOGIN: Attempting to auto-authenticate..."),
        this.getView().enableLoginButton(!1),
        eadp.identity.checkEADPAuth(e, t)
    }
    .bind(this)),
    getDefaultDispatcher().addObserver(AppNotification.APP_RESUME, this, this._nAppResumed)
}
,
UTLoginViewController.prototype.viewWillDisappear = function viewWillDisappear() {
    this.superclass(),
    getDefaultDispatcher().removeObserver(AppNotification.APP_RESUME, this)
}
,
UTLoginViewController.prototype._startUnauthenticatedLoginFlow = function _startUnauthenticatedLoginFlow() {
    var t = getAppMain();
    t.setLoginController(new UTShowOffLoginController),
    t.getLoginController().login()
}
,
UTLoginViewController.prototype._onEadpLoginComplete = function _onEadpLoginComplete() {
    eadp.identity.getUserInfo(this._onEadpUserInfoSuccess.bind(this), this._onEadpUserInfoFail.bind(this))
}
,
UTLoginViewController.prototype._onEadpUserInfoFail = function _onEadpUserInfoFail(t) {
    return t === EADPIdentityManager.error.LOCAL_STORAGE ? (DebugUtils.Assert(!1, "Unable to save EADP Identity data in local storage."),
    void this.getView().enableLoginButton(!0)) : t === EADPIdentityManager.error.REFRESH_TOKEN ? (console.log("LOGIN: EADP requires a login refresh."),
    void this.getView().enableLoginButton(!0)) : t === EADPIdentityManager.error.SERVER ? (console.log("LOGIN: An unknown EADP server error occurred."),
    void this.getView().enableLoginButton(!0)) : void 0
}
,
UTLoginViewController.prototype._onEadpUserInfoSuccess = function _onEadpUserInfoSuccess(t) {
    var e = getAppMain();
    e.setLoginController(new UTLoginController);
    var i = new UTUserEntity(t)
      , r = services.Authentication.getUtasSession();
    services.User.setCurrent(i),
    r.user = i,
    services.UserSettings.setUserKey(t.pidId.toString()),
    isChrome() || window.plugins.cordovaNimble.registerPushNotifications(t.pidId.toString(), getStorage().getItem(STORAGE_PN_STATUS_KEY), function() {}, function() {}),
    e.getLoginController().login()
}
,
UTLoginViewController.prototype._eLoginSelected = function _eLoginSelected() {
    TelemetryManager.trackEvent(TelemetryManager.Sections.LOGIN, TelemetryManager.Categories.BUTTON_PRESS, "Login"),
    this.getView().enableLoginButton(!1),
    this.createLoginView()
}
,
UTLoginViewController.prototype.createLoginView = function createLoginView() {
    if (hasConnection())
        if (isChrome())
            eadp.identity.initiateLoginFlow("Login", this.onAccessTokenSuccess.bind(this), this.onAccessTokenFail.bind(this));
        else {
            var t = eadp.identity.getLoginUrl();
            window.console.log("Opening EADP: " + t),
            this._inAppBrowser = cordova.InAppBrowser.open(t, "_blank", "location=no,toolbarcolor=#33353c"),
            this._successCallbackDelegate = this.iabLoadStart.bind(this),
            this._errorCallbackDelegate = this.iabLoadError.bind(this),
            this._browserDismissedCallbackDelegate = this.iabExit.bind(this),
            this._linkCallbackDelegate = this.iabLoadStop.bind(this),
            this._inAppBrowser.addEventListener("loadstart", this._successCallbackDelegate, !1),
            this._inAppBrowser.addEventListener("loadstart", this._linkCallbackDelegate, !1),
            this._inAppBrowser.addEventListener("loadstop", this._linkCallbackDelegate, !1),
            this._inAppBrowser.addEventListener("loaderror", this._errorCallbackDelegate, !1),
            this._inAppBrowser.addEventListener("exit", this._browserDismissedCallbackDelegate, !1)
        }
    else
        utils.PopupManager.showAlert(utils.PopupManager.Alerts.ORIGIN_UNAVAILABLE, function() {
            this.getView().enableLoginButton(!0)
        }
        .bind(this))
}
,
UTLoginViewController.prototype.closeLoginView = function closeLoginView() {
    this.isLoginViewOpen() && (this._inAppBrowser.removeEventListener("loadstart", this._successCallbackDelegate, !1),
    this._inAppBrowser.removeEventListener("loadstart", this._linkCallbackDelegate, !1),
    this._inAppBrowser.removeEventListener("loadstop", this._linkCallbackDelegate, !1),
    this._inAppBrowser.removeEventListener("loaderror", this._errorCallbackDelegate, !1),
    this._inAppBrowser.removeEventListener("exit", this._browserDismissedCallbackDelegate, !1),
    this._successCallbackDelegate = null,
    this._errorCallbackDelegate = null,
    this._browserDismissedCallbackDelegate = null,
    this._inAppBrowser.close(),
    this._inAppBrowser = null)
}
,
UTLoginViewController.prototype.iabLoadStart = function iabLoadStart(t) {
    if (eadp.identity.isErrorPattern(t.url, "/p/mobile/fifa/companion/code", "code"))
        getAppMain().getLoginController().logout(),
        this.closeLoginView(),
        this.getView().enableLoginButton(!0);
    else if (t.url && -1 !== t.url.indexOf("code=")) {
        this.closeLoginView();
        var e = t.url.split("code=")[1].split("&")[0];
        eadp.identity.exchangeAccessToken(e, this.onAccessTokenSuccess.bind(this), this.onAccessTokenFail.bind(this))
    }
}
,
UTLoginViewController.prototype.iabLoadStop = function iabLoadStop(t) {
    eadp.identity.isExternalLink(t.url) && (this.closeLoginView(),
    this.getView().enableLoginButton(!0),
    this._recreateOnResume = !0,
    services.URL.process(t.url))
}
,
UTLoginViewController.prototype.iabLoadError = function iabLoadError(t) {
    JSUtils.isNumber(t.code) && -999 === t.code || utils.PopupManager.showAlert(utils.PopupManager.Alerts.ORIGIN_UNAVAILABLE, this.iabExit.bind(this))
}
,
UTLoginViewController.prototype.iabExit = function iabExit() {
    this.closeLoginView(),
    this.getView().enableLoginButton(!0)
}
,
UTLoginViewController.prototype.onAccessTokenSuccess = function onAccessTokenSuccess() {
    isChrome() && eadp.identity.closeLoginFlow(),
    this._onEadpLoginComplete()
}
,
UTLoginViewController.prototype.onAccessTokenFail = function onAccessTokenFail() {
    console.log("access token failure!"),
    this._onEadpLoginComplete()
}
,
UTLoginViewController.prototype.isLoginViewOpen = function isLoginViewOpen() {
    return JSUtils.isValid(this._inAppBrowser)
}
,
UTLoginViewController.prototype._nAppResumed = function _nAppResumed() {
    services.Squad.hasExternalShowOffSquad() ? (this.isLoginViewOpen() && (this.closeLoginView(),
    this.getView().enableLoginButton(!0)),
    this._startUnauthenticatedLoginFlow()) : this._recreateOnResume && (this._recreateOnResume = !1,
    this.getView().enableLoginButton(!1),
    this.createLoginView())
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTStandardButtonControl = function(e) {
    function UTStandardButtonControl() {
        return e.call(this) || this
    }
    return __extends(UTStandardButtonControl, e),
    UTStandardButtonControl.prototype._touchStarted = function(t) {
        e.prototype._touchStarted.call(this, t),
        this._triggerActions(EventType.TOUCHSTART)
    }
    ,
    UTStandardButtonControl.prototype._touchEnded = function(t) {
        e.prototype._touchEnded.call(this, t),
        this._triggerActions(EventType.TOUCHEND)
    }
    ,
    UTStandardButtonControl.prototype._touchCancelled = function(t) {
        e.prototype._touchCancelled.call(this, t),
        this._triggerActions(EventType.TOUCHCANCEL)
    }
    ,
    UTStandardButtonControl
}(UTButtonControl);
UTStandardButtonControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("button");
        t.classList.add("btn-standard"),
        this.__root = t,
        this._generated = !0
    }
}
,
UTStandardButtonControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTStandardButtonControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTLoggedOnConsoleView = function(e) {
    function UTLoggedOnConsoleView() {
        var t = e.call(this) || this;
        return t.onRetryTap = new EAObservable,
        t
    }
    return __extends(UTLoggedOnConsoleView, e),
    UTLoggedOnConsoleView.prototype.init = function() {
        var t = services.Localization;
        e.prototype.init.call(this),
        this.__longOnTitle.textContent = t.localize("signedontoanotherdevice.title"),
        this.__message1.textContent = t.localize("signedontoanotherdevice.message1"),
        this.__message2.textContent = t.localize("signedontoanotherdevice.message2"),
        this._btnRetry.init(),
        this._btnRetry.setText(t.localize("common.dialog.retry")),
        this._btnRetry.addTarget(this, this.eRetrySelected, EventType.TAP)
    }
    ,
    UTLoggedOnConsoleView.prototype.dealloc = function() {
        this.onRetryTap.dealloc(),
        e.prototype.dealloc.call(this)
    }
    ,
    UTLoggedOnConsoleView.prototype.appendPersonaSelector = function(t) {
        this.addClass("has-persona-selector"),
        this.addSubview(t, this.__personaSelectorContainer)
    }
    ,
    UTLoggedOnConsoleView.prototype.eRetrySelected = function(t, e, i) {
        this.onRetryTap.notify()
    }
    ,
    UTLoggedOnConsoleView
}(UTView);
UTLoggedOnConsoleView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("sm-ut-content-container"),
        t.classList.add("ut-content-container");
        var e = document.createElement("div");
        e.classList.add("ut-content"),
        this.__personaSelectorContainer = document.createElement("div"),
        this.__personaSelectorContainer.classList.add("ut-app-settings-persona-selector"),
        e.appendChild(this.__personaSelectorContainer);
        var i = document.createElement("div");
        i.classList.add("ut-logged-on-console"),
        i.classList.add("ut-login-generic");
        var r = document.createElement("div");
        r.classList.add("ut-login-generic-content");
        var n = document.createElement("div");
        this.__longOnTitle = document.createElement("h2"),
        n.appendChild(this.__longOnTitle),
        this.__message1 = document.createElement("p"),
        n.appendChild(this.__message1),
        this.__message2 = document.createElement("p"),
        n.appendChild(this.__message2),
        this._btnRetry = new UTStandardButtonControl,
        this._btnRetry.getRootElement().classList.add("call-to-action"),
        n.appendChild(this._btnRetry.getRootElement()),
        r.appendChild(n),
        i.appendChild(r),
        e.appendChild(i),
        t.appendChild(e),
        this.__root = t,
        this._generated = !0
    }
}
,
UTLoggedOnConsoleView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__personaSelectorContainer = null,
    this.__longOnTitle = null,
    this.__message1 = null,
    this.__message2 = null,
    this._btnRetry.destroy()
}
,
UTLoggedOnConsoleView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTLoggedOnConsoleViewController = function(e) {
    function UTLoggedOnConsoleViewController() {
        var t = e.call(this) || this;
        return t._personaController = null,
        t
    }
    return __extends(UTLoggedOnConsoleViewController, e),
    UTLoggedOnConsoleViewController.prototype.init = function() {
        e.prototype.init.call(this);
        var t = this.getView();
        t.onRetryTap.observe(this, this._onRetryAuth),
        this._personaController = new UTPersonaViewController,
        this._personaController.init(),
        this.addChildViewController(this._personaController),
        t.appendPersonaSelector(this._personaController.getView()),
        t.layoutSubviews(),
        TelemetryManager.trackPage(TelemetryManager.Sections.LOGIN, "Logged in on Console")
    }
    ,
    UTLoggedOnConsoleViewController.prototype.dealloc = function() {
        e.prototype.dealloc.call(this),
        this._personaController && (this._personaController.dealloc(),
        this._personaController = null)
    }
    ,
    UTLoggedOnConsoleViewController.prototype._getViewInstanceFromData = function() {
        return new UTLoggedOnConsoleView
    }
    ,
    UTLoggedOnConsoleViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("signedontoanotherdevice.title")
    }
    ,
    UTLoggedOnConsoleViewController.prototype.viewDidAppear = function() {
        e.prototype.viewDidAppear.call(this);
        var t = this.getNavigationController();
        t && t.setNavigationVisibility(isPhone(), !0),
        this._personaController && this._personaController.viewDidAppear()
    }
    ,
    UTLoggedOnConsoleViewController.prototype._onRetryAuth = function() {
        this.getView().setInteractionState(!1),
        getAppMain().getLoginController().login(!0)
    }
    ,
    UTLoggedOnConsoleViewController
}(UTViewController)
  , UTSplitView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTSplitView() {
        var t = e.call(this) || this;
        return t._lView = null,
        t._rView = null,
        t
    }
    return __extends(UTSplitView, e),
    UTSplitView.prototype.dealloc = function() {
        e.prototype.dealloc.call(this),
        this._lView = null,
        this._rView = null
    }
    ,
    UTSplitView.prototype.appendLeft = function(t) {
        this._lView !== t && (this._lView = t,
        this.addSubview(this._lView, this.__body),
        this.__body.appendChild(this._lView.getRootElement()),
        this._rView && (this._lView.addClass(enums.UILayout.LEFT),
        this._rView.addClass(enums.UILayout.RIGHT)))
    }
    ,
    UTSplitView.prototype.appendRight = function(t) {
        this._rView !== t && (this._rView = t,
        this.addSubview(this._rView, this.__body),
        this.__body.appendChild(this._rView.getRootElement()),
        this._lView && (this._lView.addClass(enums.UILayout.LEFT),
        this._rView.addClass(enums.UILayout.RIGHT)))
    }
    ,
    UTSplitView.prototype.removeLeft = function() {
        this._lView && (this._lView.removeFromSuperview(),
        this.layoutSubviews(),
        this._lView.removeClass(enums.UILayout.LEFT),
        this._rView && this._rView.removeClass(enums.UILayout.RIGHT),
        this._lView = null)
    }
    ,
    UTSplitView.prototype.removeRight = function() {
        this._rView && (this._rView.removeFromSuperview(),
        this.layoutSubviews(),
        this._rView.removeClass(enums.UILayout.RIGHT),
        this._lView && this._lView.removeClass(enums.UILayout.LEFT),
        this._rView = null)
    }
    ,
    UTSplitView
}(UTView));
UTSplitView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-split-view"),
        this.__body = document.createElement("div"),
        this.__body.classList.add("ut-content"),
        t.appendChild(this.__body),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSplitView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__body = null
}
,
UTSplitView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSplitViewController = function(e) {
    function UTSplitViewController() {
        var t = e.call(this) || this;
        return t._leftController = null,
        t._rightController = null,
        t._layout = UTSplitViewController.Layout.SIDEBAR_RIGHT,
        t
    }
    return __extends(UTSplitViewController, e),
    UTSplitViewController.prototype.init = function() {
        this.initialized || (e.prototype.init.call(this),
        this._applyLayout())
    }
    ,
    UTSplitViewController.prototype._getViewInstanceFromData = function() {
        return new UTSplitView
    }
    ,
    UTSplitViewController.prototype._getLeftController = function() {
        return this._leftController
    }
    ,
    UTSplitViewController.prototype._getRightController = function() {
        return this._rightController
    }
    ,
    UTSplitViewController.prototype._setLeftController = function(t, e) {
        if (void 0 === e && (e = !1),
        this._leftController !== t) {
            var i = this._leftController;
            if (this._leftController = t,
            i) {
                i.viewWillDisappear();
                var r = i.getView();
                r && r.removeFromSuperview(e)
            }
            this._leftController.viewWillAppear();
            var n = this.getView()
              , o = t.getView();
            o.getSuperview() !== n && n.appendLeft(o),
            i && i.viewDidDisappear(),
            this._leftController.viewDidAppear()
        }
    }
    ,
    UTSplitViewController.prototype._setRightController = function(t, e) {
        if (void 0 === e && (e = !1),
        this._rightController !== t) {
            var i = this._rightController;
            if (this._rightController = t,
            i) {
                i.viewWillDisappear();
                var r = i.getView();
                r && r.removeFromSuperview(e)
            }
            this._rightController.viewWillAppear();
            var n = this.getView()
              , o = t.getView();
            o.getSuperview() !== n && n.appendRight(o),
            i && i.viewDidDisappear(),
            this._rightController.viewDidAppear()
        }
    }
    ,
    UTSplitViewController.prototype._removeLeftController = function() {
        JSUtils.isValid(this._leftController) && this._leftController && (this._leftController.viewWillDisappear(),
        this.getView().removeLeft(),
        this._leftController.viewDidDisappear(),
        this._leftController = null)
    }
    ,
    UTSplitViewController.prototype._removeRightController = function() {
        JSUtils.isValid(this._rightController) && this._rightController && (this._rightController.viewWillDisappear(),
        this.getView().removeRight(),
        this._rightController.viewDidDisappear(),
        this._rightController = null)
    }
    ,
    UTSplitViewController.prototype.hideLeftController = function() {
        this._removeLeftController()
    }
    ,
    UTSplitViewController.prototype.hideRightController = function() {
        this._removeRightController()
    }
    ,
    UTSplitViewController.prototype.viewDidLoad = function() {
        e.prototype.viewDidLoad.call(this),
        this._leftController && this._leftController.viewDidLoad(),
        this._rightController && this._rightController.viewDidLoad()
    }
    ,
    UTSplitViewController.prototype.viewWillAppear = function() {
        e.prototype.viewWillAppear.call(this),
        this._leftController && this._leftController.viewWillAppear(),
        this._rightController && this._rightController.viewWillAppear()
    }
    ,
    UTSplitViewController.prototype.viewWillDisappear = function() {
        e.prototype.viewWillDisappear.call(this),
        this._leftController && this._leftController.viewWillDisappear(),
        this._rightController && this._rightController.viewWillDisappear()
    }
    ,
    UTSplitViewController.prototype.viewDidAppear = function() {
        e.prototype.viewDidAppear.call(this),
        this._leftController && this._leftController.viewDidAppear(),
        this._rightController && this._rightController.viewDidAppear()
    }
    ,
    UTSplitViewController.prototype.viewDidDisappear = function() {
        e.prototype.viewDidDisappear.call(this),
        this._leftController && this._leftController.viewDidDisappear(),
        this._rightController && this._rightController.viewDidDisappear()
    }
    ,
    UTSplitViewController.prototype._applyLayout = function() {
        var t = this.getView();
        t.hasClass(this._layout) || (t.removeClass(JSUtils.getObjectValues(UTSplitViewController.Layout).join(" ")),
        t.addClass(this._layout))
    }
    ,
    UTSplitViewController.prototype.setLayout = function(t) {
        this._layout = t,
        this.initialized && this._applyLayout()
    }
    ,
    UTSplitViewController.Layout = {
        SIDEBAR_LEFT: "sidebar-left",
        SIDEBAR_RIGHT: "sidebar-right"
    },
    UTSplitViewController
}(UTViewController)
  , UTItemListViewModel = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTItemListViewModel(t) {
        var e = i.call(this, t) || this;
        return e.dataUpdated = new EAObservable,
        e.sortByRecency = !1,
        e.sort = SearchSortOrder.DESCENDING,
        e.sortType = SearchSortType.VALUE,
        e.auctionUpdateArray = [],
        e.auctionObservable = null,
        e.updateIntervals = [{
            expires: 30,
            interval: 1
        }, {
            expires: 60,
            interval: 5
        }, {
            expires: 600,
            interval: 120
        }, {
            expires: 3600,
            interval: 600
        }, {
            expires: 432e3,
            interval: 43200
        }],
        e.pendingExpiryUpdateInterval = 5e3,
        e.pinnedItem = null,
        e
    }
    return __extends(UTItemListViewModel, i),
    UTItemListViewModel.prototype.add = function(t, e) {
        return i.prototype.add.call(this, t, e),
        JSUtils.isNumber(e) || this.organizeItems(),
        t
    }
    ,
    UTItemListViewModel.prototype.addArray = function(t) {
        var e = this.length;
        t.forEach(function(t) {
            this.add(t, e),
            e++
        }, this),
        this.organizeItems()
    }
    ,
    UTItemListViewModel.prototype.removeArray = function(i) {
        var e = [];
        this._collection.forEach(function(t) {
            !function(e) {
                return !!JSUtils.find(i, function(t) {
                    return e.id === t.id
                })
            }(t) && e.push(t)
        }),
        this._collection = e,
        this.organizeItems()
    }
    ,
    UTItemListViewModel.prototype.getItemList = function() {
        return this.values()
    }
    ,
    UTItemListViewModel.prototype.getPinnedItem = function() {
        return this.pinnedItem
    }
    ,
    UTItemListViewModel.prototype.setPinnedItem = function(t) {
        JSUtils.isValid(t) && (this.pinnedItem = t)
    }
    ,
    UTItemListViewModel.prototype.startAuctionUpdates = function(t) {
        var n = this;
        this.stopAuctionUpdates(),
        t = !!t;
        var e = this.auctionUpdateArray.slice()
          , i = this.pinnedItem && JSUtils.isValid(this.pinnedItem) ? this.values().concat([this.pinnedItem]) : this.values();
        this.auctionUpdateArray = i.filter(function(t) {
            var e = t.getAuctionData();
            if (!e.isUpdating && e.isActiveTrade()) {
                if ((e.expires <= 0 || e.getSecondsRemaining() <= 0) && e.getAge() < n.pendingExpiryUpdateInterval)
                    return !1;
                for (var i = n.updateIntervals.length; 0 < i--; ) {
                    var r = n.updateIntervals[i];
                    if (e.isStale() || e.getSecondsRemaining() <= r.expires && e.getAgeInSeconds() >= r.interval)
                        return !0
                }
            }
            return !1
        }),
        0 < this.auctionUpdateArray.length ? (this.auctionObservable = services.Item.refreshAuctions(this.auctionUpdateArray, t),
        this.auctionObservable.observe(this, function(t, e) {
            t.unobserve(n),
            n.dataUpdated.notify(),
            n.auctionObservable = null,
            n.startAuctionUpdateTimer()
        })) : (0 < e.length && this.dataUpdated.notify(),
        this.startAuctionUpdateTimer())
    }
    ,
    UTItemListViewModel.prototype.stopAuctionUpdates = function() {
        this.auctionUpdateTimer && this.auctionUpdateTimer.stop(),
        this.auctionObservable && (this.auctionObservable.unobserve(this),
        this.auctionObservable = null)
    }
    ,
    UTItemListViewModel.prototype.organizeItems = function() {
        if (0 !== this.length) {
            var t = this.values().sort(this.sortByType.bind(this));
            this.resetCollection(t)
        }
    }
    ,
    UTItemListViewModel.prototype.startAuctionUpdateTimer = function() {
        this.auctionUpdateTimer || (this.auctionUpdateTimer = new EAIntervalController(1e3,this.startAuctionUpdates.bind(this))),
        this.auctionUpdateTimer.start()
    }
    ,
    UTItemListViewModel.prototype.sortByType = function(t, e) {
        var r, i, n = this;
        (i = r = r || {})[i.RECENCY = 0] = "RECENCY",
        i[i.EXPIRY = 1] = "EXPIRY",
        i[i.LOAN = 2] = "LOAN",
        i[i.UNTRADEABLE = 3] = "UNTRADEABLE",
        i[i.DISCARD = 4] = "DISCARD",
        i[i.TYPE = 5] = "TYPE",
        i[i.LEGEND = 6] = "LEGEND",
        i[i.SPECIAL = 7] = "SPECIAL",
        i[i.TIER = 8] = "TIER",
        i[i.RARITY = 9] = "RARITY",
        i[i.RANK = 10] = "RANK",
        i[i.RATING = 11] = "RATING",
        i[i.RESOURCE = 12] = "RESOURCE",
        i[i.PLAYERPICK = 13] = "PLAYERPICK";
        function kab(t, e, i) {
            switch (t) {
            case r.RECENCY:
                return JSUtils.sortCompare(e.timestamp, i.timestamp, n.sort === SearchSortOrder.DESCENDING);
            case r.EXPIRY:
                return JSUtils.sortCompare(e.getAuctionData().getSecondsRemaining(), i.getAuctionData().getSecondsRemaining(), !1);
            case r.LOAN:
                return JSUtils.sortCompare(e.isLoaned(), i.isLoaned(), n.sort === SearchSortOrder.DESCENDING);
            case r.UNTRADEABLE:
                return JSUtils.sortCompare(e.untradeable, i.untradeable, !1);
            case r.DISCARD:
                return JSUtils.sortCompare(e.discardValue, i.discardValue, n.sort === SearchSortOrder.DESCENDING);
            case r.TYPE:
                return JSUtils.sortCompare(s.indexOf(e.type), s.indexOf(i.type), !1);
            case r.LEGEND:
                return JSUtils.sortCompare(e.isLegend(), i.isLegend(), !0);
            case r.SPECIAL:
                return JSUtils.sortCompare(e.isSpecial(), i.isSpecial(), !0);
            case r.TIER:
                return JSUtils.sortCompare(e.getTier(), i.getTier(), !0);
            case r.RARITY:
                return JSUtils.sortCompare(e.rareflag, i.rareflag, !1);
            case r.RANK:
                return JSUtils.sortCompare(e.rankId, i.rankId, n.sort === SearchSortOrder.DESCENDING);
            case r.RATING:
                return JSUtils.sortCompare(e.rating, i.rating, n.sort === SearchSortOrder.DESCENDING);
            case r.RESOURCE:
                return JSUtils.sortCompare(e.definitionId, i.definitionId, !1);
            case r.PLAYERPICK:
                return JSUtils.sortCompare(e.isPlayerPickItem(), i.isPlayerPickItem(), !0)
            }
        }
        var o, s = [ItemType.PLAYER, ItemType.MANAGER, ItemType.CONTRACT, ItemType.HEALTH, ItemType.TRAINING, ItemType.BADGE, ItemType.KIT, ItemType.BALL, ItemType.STADIUM, ItemType.MISC];
        o = t.getAuctionData().isActiveTrade() && e.getAuctionData().isActiveTrade() ? [r.RECENCY, r.EXPIRY, r.DISCARD, r.TYPE, r.LEGEND, r.SPECIAL, r.TIER, r.RANK, r.RATING, r.RARITY, r.RESOURCE] : this.sort === SearchSortOrder.ASCENDING ? [r.RECENCY, r.PLAYERPICK, r.DISCARD, r.LOAN, r.RANK, r.RATING, r.RESOURCE] : t.concept && e.concept ? [r.TIER, r.RANK, r.RATING, r.SPECIAL, r.RARITY, r.RESOURCE] : [r.RECENCY, r.PLAYERPICK, r.LOAN, r.UNTRADEABLE, r.DISCARD, r.TYPE, r.LEGEND, r.SPECIAL, r.TIER, r.RATING, r.RANK, r.RARITY, r.RESOURCE];
        var a = 0;
        if (!this.sortByRecency && (a = 1,
        this.sortType === SearchSortType.RATING)) {
            var l = o.indexOf(r.RATING);
            if (-1 < l) {
                var c = o.indexOf(r.RANK);
                o.splice(a, 0, o.splice(l, 1)[0]),
                -1 < c && o.splice(a + 1, 0, o.splice(c, 1)[0])
            }
        }
        for (var u = 0; 0 === u && a !== o.length; )
            u = kab.call(this, o[a], t, e),
            a++;
        return u
    }
    ,
    UTItemListViewModel
}(EAIterator))
  , UTPaginatedItemListViewModel = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(r) {
    function UTPaginatedItemListViewModel(t, e) {
        void 0 === e && (e = 15);
        var i = r.call(this, t) || this;
        return i.isFull = !1,
        i.numItemsPerPage = e,
        i
    }
    return __extends(UTPaginatedItemListViewModel, r),
    UTPaginatedItemListViewModel.prototype.resetCollection = function(t) {
        r.prototype.resetCollection.call(this, t),
        this.isFull = !1
    }
    ,
    UTPaginatedItemListViewModel.prototype.getCurrentPage = function() {
        return Math.max(Math.ceil((this.getIndex() + 1) / this.numItemsPerPage), 1)
    }
    ,
    UTPaginatedItemListViewModel.prototype.getNumPages = function() {
        return Math.max(Math.ceil(this.length / this.numItemsPerPage), 1)
    }
    ,
    UTPaginatedItemListViewModel.prototype.getPageIndex = function() {
        return this.getIndex() % this.numItemsPerPage
    }
    ,
    UTPaginatedItemListViewModel.prototype.getPageStartIndex = function(t) {
        return 1 <= t ? (t - 1) * this.numItemsPerPage : 0
    }
    ,
    UTPaginatedItemListViewModel.prototype.getPageItems = function() {
        var t = this.getPageStartIndex(this.getCurrentPage());
        return this.values().slice(t, t + this.numItemsPerPage)
    }
    ,
    UTPaginatedItemListViewModel.prototype.hasPreviousPage = function() {
        return 1 < this.getCurrentPage()
    }
    ,
    UTPaginatedItemListViewModel.prototype.hasNextPage = function() {
        return this.getCurrentPage() < this.getNumPages()
    }
    ,
    UTPaginatedItemListViewModel.prototype.canShowPage = function(t) {
        if (void 0 === t && (t = this.getCurrentPage()),
        DebugUtils.Assert(0 < t && t <= this.getNumPages(), "Page number out of bounds."),
        this.isFull)
            return !0;
        var e = this.getPageStartIndex(t);
        return this.values().slice(e, e + this.numItemsPerPage).length === this.numItemsPerPage
    }
    ,
    UTPaginatedItemListViewModel.prototype.previousPage = function() {
        return this.hasPreviousPage() && this.setIndex(this.getPageStartIndex(this.getCurrentPage() - 1)),
        this.getPageItems()
    }
    ,
    UTPaginatedItemListViewModel.prototype.nextPage = function() {
        return this.hasNextPage() && this.setIndex(this.getPageStartIndex(this.getCurrentPage() + 1)),
        this.getPageItems()
    }
    ,
    UTPaginatedItemListViewModel
}(UTItemListViewModel))
  , UTImageView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTImageView() {
        var t = e.call(this) || this;
        return t.src = "",
        t.path = "",
        t._useCache = !0,
        t._imageLoadEvent = new EAObservable,
        t
    }
    return __extends(UTImageView, e),
    UTImageView.prototype.allowImageCaching = function(t) {
        this._useCache = !!t
    }
    ,
    UTImageView.prototype.setLocalResource = function(t) {
        this.src = t;
        var e = this.getRootElement();
        if (e) {
            var i = JSUtils.isString(t) && 0 < t.length;
            e.src = i ? t : "",
            e.style.display = i ? "" : "none"
        }
    }
    ,
    UTImageView.prototype.replaceAndShowResource = function(t) {
        var e = this.getRootElement();
        e && (this._useCache || (t = t + "?" + Date.now()),
        e.src = t,
        e.style.display = "")
    }
    ,
    UTImageView.prototype.setExternalResource = function(t, e) {
        return this._loadResource(t, !!e, !0)
    }
    ,
    UTImageView.prototype.setResource = function(t, e) {
        return this._loadResource(t, !!e, !1)
    }
    ,
    UTImageView.prototype.clearResource = function() {
        this.src = "",
        this.getRootElement().src = ""
    }
    ,
    UTImageView.prototype._loadResource = function(t, e, i) {
        var r = this.getRootElement();
        return this.src = !0 === i ? t : getAppMain().getConfigRepository().getConfigString(EAConfigurationRepository.KEY_RESOURCE_ROOT) + t,
        this.path = t,
        r.style.display = "none",
        HttpUtils.urlHasImage(this.src) ? (e && (this._addListener(EventType.LOAD, r, this._handleLoadSuccessEvent.bind(this)),
        this._addListener(EventType.ERROR, r, this._handleLoadFailEvent.bind(this))),
        this.replaceAndShowResource(this.src)) : this._imageLoadEvent.notify(!1, this, this.src),
        this._imageLoadEvent
    }
    ,
    UTImageView.prototype._handleLoadSuccessEvent = function(t) {
        var e = this.getRootElement();
        e.complete && (0 === e.naturalWidth ? this._imageLoadEvent.notify(!1, this, this.src) : this._imageLoadEvent.notify(!0, this, this.src),
        this._removeListenersByName(EventType.LOAD, EventType.ERROR))
    }
    ,
    UTImageView.prototype._handleLoadFailEvent = function(t) {
        this._imageLoadEvent.notify(!1, this, this.src),
        this._removeListenersByName(EventType.LOAD, EventType.ERROR)
    }
    ,
    UTImageView
}(UTView));
UTImageView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("img");
        t.setAttribute("src", "images/transparent.png"),
        this.__root = t,
        this._generated = !0
    }
}
,
UTImageView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTImageView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTClubViewModel = function(r) {
    function UTClubViewModel(t) {
        var e = getAppMain().getConfigRepository().getConfigObject(EAConfigurationRepository.KEY_ITEMS_PER_PAGE)
          , i = e ? e[EAConfigurationRepository.ITEMS_PER_PAGE.CLUB] : 20;
        return r.call(this, t, i) || this
    }
    return __extends(UTClubViewModel, r),
    UTClubViewModel.prototype.shouldRequestItems = function() {
        return !this.isFull && this.length <= this.numItemsPerPage * this.getCurrentPage()
    }
    ,
    UTClubViewModel.prototype.removeEmptyConsumables = function() {
        var t = this.getIndex()
          , e = this.isFull
          , i = this.values();
        i = i.filter(function(t) {
            return 0 < t.stackCount
        }),
        this.resetCollection(i),
        this.isFull = e,
        this.setIndex(0 < i.length ? Math.min(t, i.length - 1) : 0)
    }
    ,
    UTClubViewModel.prototype.removeItemsById = function(e) {
        var t = this.getIndex()
          , i = this.getItemList().filter(function(t) {
            return JSUtils.isNumber(t.id) && 0 <= e.indexOf(t.id)
        });
        this.removeArray(i),
        this.setIndex(t)
    }
    ,
    UTClubViewModel
}(UTPaginatedItemListViewModel)
  , UTItemSearchViewModel = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTItemSearchViewModel() {
        var t = e.call(this) || this;
        return t.defaultSearchCriteria = new UTSearchCriteriaDTO,
        t.playerData = null,
        t.searchCategoryGroup = SearchCategoryGroup.NONE,
        t.searchCriteria = new UTSearchCriteriaDTO,
        t.searchFeature = ItemSearchFeature.CLUB,
        t.defaultSearchCriteria.type = SearchType.PLAYER,
        t.searchCriteria.type = SearchType.PLAYER,
        t
    }
    return __extends(UTItemSearchViewModel, e),
    Object.defineProperty(UTItemSearchViewModel.prototype, "isMarketSearch", {
        get: function() {
            return this.searchFeature === ItemSearchFeature.MARKET
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTItemSearchViewModel.prototype, "sort", {
        get: function() {
            return this.searchCriteria.sort
        },
        set: function(t) {
            this.searchCriteria.sort = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTItemSearchViewModel.prototype, "sortType", {
        get: function() {
            return this.searchCriteria.sortBy
        },
        set: function(t) {
            this.searchCriteria.sortBy = t
        },
        enumerable: !1,
        configurable: !0
    }),
    UTItemSearchViewModel.prototype.resetSearch = function() {
        this.clearPlayerData(),
        this.updateSearchCriteria(this.defaultSearchCriteria)
    }
    ,
    UTItemSearchViewModel.prototype.updateSearchCriteria = function(t) {
        var e, i = 0;
        this.searchCriteria.update(t),
        this.setSearchCategoryGroupFromSearchCategory(t.category),
        this.searchCriteria.hasValidDefId() ? i = null !== (e = this.searchCriteria.defId[0]) && void 0 !== e ? e : 0 : this.isMarketSearch && 0 < this.searchCriteria.maskedDefId && (i = this.searchCriteria.maskedDefId),
        0 < i ? this.playerData = repositories.Item.getStaticDataByDefId(i) : this.clearPlayerData()
    }
    ,
    UTItemSearchViewModel.prototype.setPlayerData = function(t) {
        this.playerData = t,
        this.isMarketSearch ? this.searchCriteria.maskedDefId = t.id : this.searchCriteria.defId = [t.id]
    }
    ,
    UTItemSearchViewModel.prototype.clearPlayerData = function() {
        this.playerData = null,
        this.searchCriteria.resetDefId()
    }
    ,
    UTItemSearchViewModel.prototype.getBucketFromType = function(t) {
        switch (t) {
        case SearchType.ANY:
        case SearchType.PLAYER:
            return SearchBucket.PLAYER;
        case SearchType.STAFF:
            return SearchBucket.STAFF;
        case SearchType.BALL:
        case SearchType.CLUB_INFO:
        case SearchType.STADIUM:
        case SearchType.VANITY:
            return SearchBucket.CLUB;
        case SearchType.CONSUMABLES_TRAINING:
        case SearchType.CONSUMABLES_DEVELOPMENT:
            return SearchBucket.CONSUMABLE
        }
    }
    ,
    UTItemSearchViewModel.prototype.updateFromFilterChange = function(t, e, i) {
        var r, n = this.searchCriteria;
        switch (t) {
        case enums.UISearchFilters.TYPE:
            switch (i) {
            case SearchType.PLAYER:
            case SearchType.STAFF:
            case SearchType.CONSUMABLES_TRAINING:
            case SearchType.CONSUMABLES_DEVELOPMENT:
            case SearchType.STADIUM:
            case SearchType.BALL:
            case SearchType.VANITY:
                n.type = i,
                this.searchCategoryGroup = i === SearchType.VANITY ? SearchCategoryGroup.CLUB : SearchCategoryGroup.NONE;
                break;
            case SearchCategory.ANY:
            case SearchCategory.MANAGER:
            case SearchCategory.COACH_HEAD:
            case SearchCategory.COACH_GK:
            case SearchCategory.COACH_FITNESS:
            case SearchCategory.PHYSIO:
            case SearchCategory.POSITION:
            case SearchCategory.PLAYSTYLE:
            case SearchCategory.MANAGER_LEAGUE:
            case SearchCategory.CONTRACT:
            case SearchCategory.HEALING:
            case SearchCategory.KIT:
            case SearchCategory.BADGE:
                n.category = i;
                break;
            default:
                DebugUtils.Assert(!1, "Invalid search category: " + i)
            }
            break;
        case enums.UISearchFilters.POSITION:
            if (i === SearchType.ANY)
                n.zone = -1,
                n.position = SearchType.ANY;
            else {
                var o = this.generatePositionSearchDataFromId(e);
                "zone" === o.label ? n.zone = o.value || -1 : n.position = null !== (r = o.value) && void 0 !== r ? r : "any"
            }
            break;
        case enums.UISearchFilters.POSITION_MOD:
            n.position = i;
            break;
        case enums.UISearchFilters.LEVEL:
            n.level = i,
            n.rarities = [];
            break;
        case enums.UISearchFilters.RARITY:
            n.rarities = 0 <= e ? [e] : [];
            break;
        case enums.UISearchFilters.PLAYSTYLE:
            n.playStyle = e;
            break;
        case enums.UISearchFilters.LEAGUE:
            n.league = e,
            n.club = -1;
            break;
        case enums.UISearchFilters.NATION:
            n.nation = e;
            break;
        case enums.UISearchFilters.CLUB:
            n.club = e;
            break;
        case enums.UISearchFilters.VANITY:
            (this.searchCategoryGroup = i) === SearchCategoryGroup.CLUB ? n.category = SearchCategory.KIT : i === SearchCategoryGroup.STADIUM ? n.category = SearchCategory.STADIUM : i === SearchCategoryGroup.STANDS ? n.category = SearchCategory.VANITY_TIFO_BASE : i === SearchCategoryGroup.PITCH ? n.category = SearchCategory.VANITY_STADIUM_BASE_PITCH_LINE_COLOR : i === SearchCategoryGroup.TROPHIES && (n.category = SearchCategory.VANITY_STADIUM_BASE_PITCH_PROP);
            break;
        case enums.UISearchFilters.VANITY_CATEGORY:
            switch (i) {
            case SearchCategory.BALL:
                n.type = SearchType.BALL;
                break;
            case SearchCategory.STADIUM:
                n.type = SearchType.STADIUM;
                break;
            case SearchCategory.BADGE:
            case SearchCategory.KIT:
                n.type = SearchType.CLUB_INFO,
                n.category = i;
                break;
            default:
                n.type = SearchType.VANITY,
                n.category = i
            }
            break;
        case enums.UISearchFilters.AUTHENTICITY:
            n.authenticity = i;
            break;
        case enums.UISearchFilters.PRIMARY_COLOR:
            n.primaryColor = e;
            break;
        case enums.UISearchFilters.SECONDARY_COLOR:
            n.secondaryColor = e
        }
    }
    ,
    UTItemSearchViewModel.prototype.requestActiveSquadDefIds = function() {
        var n = this
          , o = new EAObservable;
        return this._trackRequest(o, !0),
        services.Squad.requestSquadById(services.Squad.getActiveSquadId()).observe(this, function(t, e) {
            t.unobserve(n);
            var i = new UTServiceResponseDTO
              , r = e.data && e.data.squad ? e.data.squad.getPlayers().map(function(t) {
                return t.item.definitionId
            }) : [];
            JSUtils.assignPropertyValues(e, i),
            i.data = {
                defIds: r
            },
            o.notify(i)
        }),
        o
    }
    ,
    UTItemSearchViewModel.prototype.generatePositionSearchDataFromId = function(t) {
        var e;
        if (-1 === t && (t = 1),
        [ZONE_DEFENDER_VALUE, ZONE_MIDFIELDER_VALUE, ZONE_ATTACKER_VALUE, ZONE_NO_GK_VALUE].indexOf(t) < 0) {
            var i = repositories.Squad.getPosition(t);
            return {
                label: "pos",
                value: null !== (e = null == i ? void 0 : i.name) && void 0 !== e ? e : ""
            }
        }
        return {
            label: "zone",
            value: t
        }
    }
    ,
    UTItemSearchViewModel.prototype.setSearchCategoryGroupFromSearchCategory = function(t) {
        t === SearchCategory.KIT || t === SearchCategory.BALL || t === SearchCategory.BADGE || t === SearchCategory.VANITY_PLAYER_CELEBRATION || t === SearchCategory.VANITY_AUDIO_ANTHEM_MUSIC || t === SearchCategory.VANITY_AUDIO_CLUB_NICKNAME || t === SearchCategory.VANITY_AUDIO_GOAL_SCORE || t === SearchCategory.VANITY_AUDIO_CROWD_CHANT ? this.searchCategoryGroup = SearchCategoryGroup.CLUB : t === SearchCategory.STADIUM || t === SearchCategory.VANITY_STADIUM_THEME || t === SearchCategory.VANITY_STADIUM_BASE_STRUCTURE_COLOR || t === SearchCategory.VANITY_STADIUM_BASE_SEAT_COLOR || t === SearchCategory.VANITY_VIP_AREA ? this.searchCategoryGroup = SearchCategoryGroup.STADIUM : t === SearchCategory.VANITY_TIFO_BASE || t === SearchCategory.VANITY_TIFO_BIG || t === SearchCategory.VANITY_TIFO_MOVING || t === SearchCategory.VANITY_TINTED_BANNER || t === SearchCategory.VANITY_POLE_BANNER || t === SearchCategory.VANITY_CROWD_CARDS ? this.searchCategoryGroup = SearchCategoryGroup.STANDS : t === SearchCategory.VANITY_STADIUM_BASE_PITCH_LINE_COLOR || t === SearchCategory.VANITY_STADIUM_BASE_PITCH_GOAL_PACKAGE || t === SearchCategory.VANITY_PYROTECHNICS_FLAME_CANNON || t === SearchCategory.VANITY_PYROTECHNICS_CONFETTI_CANNON || t === SearchCategory.VANITY_PYROTECHNICS_SPARKLER_CANNON || t === SearchCategory.VANITY_PYROTECHNICS_FIREWORKS_CANNON ? this.searchCategoryGroup = SearchCategoryGroup.PITCH : t === SearchCategory.VANITY_STADIUM_BASE_PITCH_PROP && (this.searchCategoryGroup = SearchCategoryGroup.TROPHIES)
    }
    ,
    UTItemSearchViewModel
}(UTViewModel))
  , UTDropDownControl = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTDropDownControl() {
        var t = e.call(this) || this;
        return t.defaultIndex = 0,
        t.isOpen = !1,
        t.options = [],
        t.searchString = "",
        t.searchTimeout = 0,
        t.shieldShowing = !1,
        t.windowEventCallback = null,
        t
    }
    return __extends(UTDropDownControl, e),
    Object.defineProperty(UTDropDownControl.prototype, "enabled", {
        get: function() {
            return this.isInteractionEnabled()
        },
        set: function(t) {
            this.setInteractionState(t)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTDropDownControl.prototype, "label", {
        get: function() {
            var t = this.options[this.getIndex()];
            return t ? t.label : ""
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTDropDownControl.prototype, "id", {
        get: function() {
            var t = this.options[this.getIndex()];
            return t ? t.id : -1
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTDropDownControl.prototype, "value", {
        get: function() {
            var t = this.options[this.getIndex()];
            return t ? t.value.toString() : ""
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTDropDownControl.prototype, "length", {
        get: function() {
            return this.options.length
        },
        enumerable: !1,
        configurable: !0
    }),
    UTDropDownControl.prototype.getEnabled = function() {
        return this.enabled
    }
    ,
    UTDropDownControl.prototype.setEnabled = function(t) {
        this.enabled = t
    }
    ,
    UTDropDownControl.prototype.getLabel = function() {
        return this.label
    }
    ,
    UTDropDownControl.prototype.getId = function() {
        return this.id
    }
    ,
    UTDropDownControl.prototype.getValue = function() {
        return this.value
    }
    ,
    UTDropDownControl.prototype.init = function() {
        e.prototype.init.call(this);
        var t = this.getDropDownElement();
        this._addListener(EventType.CHANGE, t, this.onChangeEvent.bind(this)),
        isPhone() ? this.__animatedContainer.appendChild(t) : (this.windowEventCallback = this.onWindowEvent.bind(this),
        this.__list = document.createElement("ul"),
        DOMKit.addClass(this.__list, "inline-list")),
        this.setInteractionState(!0)
    }
    ,
    UTDropDownControl.prototype.dealloc = function() {
        this._removeListenersByName(EventType.CHANGE),
        this.removeWindowListener(),
        getKeyboardEventController().unregisterDelegate(this, KeyboardEventPriority.ACTIVE_ELEMENT),
        this.options = [],
        this.windowEventCallback = null,
        this.__list = null,
        this.__picker = null,
        e.prototype.dealloc.call(this)
    }
    ,
    UTDropDownControl.prototype.setInteractionState = function(t) {
        if (this._setInteractionStateFlag(t))
            if (this.toggleClass(enums.UIState.DISABLED, !t),
            this.__list)
                this._interactionState ? this._startHandlingEvents(this.__animatedContainer) : this._stopHandlingEvents();
            else {
                var e = this.getDropDownElement();
                t || e !== document.activeElement || e.dispatchEvent(JSUtils.createEvent("blur")),
                e.disabled = !t
            }
    }
    ,
    UTDropDownControl.prototype.requiresFlip = function() {
        var t = this.getRootElement().getBoundingClientRect();
        return !!this.__list && window.innerHeight < t.bottom + this.__list.clientHeight
    }
    ,
    UTDropDownControl.prototype.open = function() {
        if (!this.isOpen && this.__list) {
            if (this.isOpen = !0,
            this.__animatedContainer.appendChild(this.__list),
            this.requiresFlip()) {
                var t = this.__list.clientHeight.toString();
                this.__animatedContainer.insertBefore(this.__list, this.__animatedContainer.children.item(0)),
                this.__animatedContainer.style.top = "-" + t + "px",
                this.addClass("ui-flip-vertical")
            }
            DOMKit.addClass(this.__list.children[this.getDropDownElement().selectedIndex], enums.UIState.SELECTED),
            this.scrollToSelected(),
            this.addClass("is-open"),
            this.addWindowListener(),
            getKeyboardEventController().registerDelegate(this, KeyboardEventPriority.ACTIVE_ELEMENT)
        }
    }
    ,
    UTDropDownControl.prototype.close = function() {
        this.isOpen && this.__list && (this.isOpen = !1,
        this.removeWindowListener(),
        getKeyboardEventController().unregisterDelegate(this, KeyboardEventPriority.ACTIVE_ELEMENT),
        this.__animatedContainer.style.top = "0px",
        DOMKit.remove(this.__list),
        this.removeClass("is-open ui-flip-vertical"))
    }
    ,
    UTDropDownControl.prototype.addWindowListener = function() {
        var t = this;
        this.removeWindowListener(),
        requestAnimationFrame(function() {
            t.windowEventCallback && (window.addEventListener(EventType.CLICK, t.windowEventCallback, !1),
            window.addEventListener(EventType.TOUCHEND, t.windowEventCallback, !1))
        })
    }
    ,
    UTDropDownControl.prototype.removeWindowListener = function() {
        this.windowEventCallback && (window.removeEventListener(EventType.CLICK, this.windowEventCallback, !1),
        window.removeEventListener(EventType.TOUCHEND, this.windowEventCallback, !1))
    }
    ,
    UTDropDownControl.prototype.scrollToSelected = function() {
        if (this.__list) {
            var t = this.__list.children.item(this.getDropDownElement().selectedIndex);
            t && (this.__list.scrollTop = t.offsetTop)
        }
    }
    ,
    UTDropDownControl.prototype.onWindowEvent = function(t) {
        if (t.target) {
            var e = t.target;
            "li" === e.nodeName.toLowerCase() && e.parentNode === this.__list || this.close()
        }
    }
    ,
    UTDropDownControl.prototype.getDropDownElement = function() {
        return this.__picker || (this.__picker = document.createElement("select")),
        this.__picker
    }
    ,
    UTDropDownControl.prototype.generateWebOptionElement = function(t) {
        var e = document.createElement("li");
        return e.textContent = t.label,
        e
    }
    ,
    UTDropDownControl.prototype.generateNativeOptions = function() {
        var i = this.getDropDownElement();
        DOMKit.empty(i),
        this.options.forEach(function(t) {
            var e = document.createElement("option");
            e.value = t.value.toString(),
            e.textContent = t.label,
            i.appendChild(e)
        }, this),
        this.setIndex(this.defaultIndex)
    }
    ,
    UTDropDownControl.prototype.setOptions = function(t) {
        var e = this;
        Array.isArray(t) && (this.options = t,
        this.generateNativeOptions(),
        this.__label.textContent = this.label,
        this.__list && (DOMKit.empty(this.__list),
        t.forEach(function(t) {
            e.__list && e.__list.appendChild(e.generateWebOptionElement(t))
        }))),
        this.removeClass("is-open ui-flip-vertical")
    }
    ,
    UTDropDownControl.prototype.getOptions = function() {
        return this.options.slice()
    }
    ,
    UTDropDownControl.prototype.setIndex = function(t) {
        var e = this.getDropDownElement();
        if (JSUtils.isNumber(t) && e.selectedIndex !== t) {
            if (this.__list) {
                var i = this.__list.children.item(e.selectedIndex)
                  , r = this.__list.children.item(t);
                i && DOMKit.removeClass(i, enums.UIState.SELECTED),
                r && DOMKit.addClass(r, enums.UIState.SELECTED)
            }
            e.selectedIndex = t,
            e.dispatchEvent(JSUtils.createEvent("change"))
        }
    }
    ,
    UTDropDownControl.prototype.getIndex = function() {
        return this.getDropDownElement().selectedIndex
    }
    ,
    UTDropDownControl.prototype.setIndexById = function(t) {
        for (var e = this.options.length; 0 < e--; )
            if (this.options[e].id === t) {
                this.setIndex(e);
                break
            }
    }
    ,
    UTDropDownControl.prototype.setIndexByValue = function(t) {
        for (var e = this.options.length; 0 < e--; )
            if (this.options[e].value === t)
                return this.setIndex(e),
                !0;
        return !1
    }
    ,
    UTDropDownControl.prototype.setDefaultIndexById = function(t, e) {
        for (var i = this.options.length; 0 < i--; )
            if (this.options[i].id === t)
                return this.defaultIndex = i,
                e && this.setIndex(i),
                !0;
        return !1
    }
    ,
    UTDropDownControl.prototype.setDefaultIndexByValue = function(t, e) {
        for (var i = this.options.length; 0 < i--; )
            if (this.options[i].value === t) {
                this.defaultIndex = i,
                e && this.setIndex(i);
                break
            }
    }
    ,
    UTDropDownControl.prototype.getDefaultIndex = function() {
        return this.defaultIndex
    }
    ,
    UTDropDownControl.prototype.blur = function() {
        var t = this.getDropDownElement();
        t === document.activeElement && t.blur()
    }
    ,
    UTDropDownControl.prototype.focus = function() {
        var t = this.getDropDownElement();
        t !== document.activeElement && t.focus()
    }
    ,
    UTDropDownControl.prototype.handleDropdownSearch = function(t) {
        var e = this;
        0 < this.searchTimeout && clearTimeout(this.searchTimeout),
        this.searchTimeout = window.setTimeout(function() {
            e.searchTimeout = 0,
            e.searchString = ""
        }, 1e3);
        var r = this.searchString += t
          , i = this.__list ? DOMKit.HTMLCollectionToArray(this.__list.children) : []
          , n = JSUtils.find(i, function(t) {
            var e = getComputedStyle(t)
              , i = t.textContent || "";
            return "none" !== e.display && "visible" === e.visibility && 0 === i.trim().toLowerCase().indexOf(r.trim().toLowerCase())
        });
        this.__list && n && (this.__list.scrollTop = n.offsetTop)
    }
    ,
    UTDropDownControl.prototype.handleKeyUpEvent = function(t) {
        /^[a-zA-Z0-9 ]$/.test(t.key) && this.handleDropdownSearch(t.key.toString())
    }
    ,
    UTDropDownControl.prototype.onChangeEvent = function(t) {
        this.isInteractionEnabled() && (this.__label.textContent = this.label,
        this._triggerActions(EventType.CHANGE, {
            index: this.getIndex(),
            id: this.id,
            value: this.value
        }))
    }
    ,
    UTDropDownControl.prototype.onFocusEvent = function(t) {
        this.enabled && !this.shieldShowing && (this.shieldShowing = !0,
        gClickShield.showShield(EAClickShieldView.Shield.FULL))
    }
    ,
    UTDropDownControl.prototype.onBlurEvent = function(t) {
        this.shieldShowing && (gClickShield.hideShield(EAClickShieldView.Shield.FULL),
        this.shieldShowing = !1)
    }
    ,
    UTDropDownControl.prototype._touchStarted = function(t) {
        var e = this;
        this.isInteractionEnabled() && requestAnimationFrame(function() {
            return e.addClass(enums.UIState.ACTIVE)
        })
    }
    ,
    UTDropDownControl.prototype._touchMoved = function(t) {
        var e = this;
        requestAnimationFrame(function() {
            return e.removeClass(enums.UIState.ACTIVE)
        })
    }
    ,
    UTDropDownControl.prototype._touchEnded = function(t) {
        var e = this;
        requestAnimationFrame(function() {
            return e.removeClass([enums.UIState.ACTIVE, enums.UIState.HOVER].join(" "))
        })
    }
    ,
    UTDropDownControl.prototype._tapDetected = function(t) {
        if (this.isInteractionEnabled() && this.__list) {
            var e = t.target
              , i = e ? e.nodeName.toLowerCase() : "";
            if ("ul" !== i)
                if ("li" === i) {
                    var r = DOMKit.HTMLCollectionToArray(this.__list.children);
                    this.setIndex(r.indexOf(e)),
                    this.close()
                } else
                    this.isOpen ? this.close() : this.open()
        }
    }
    ,
    UTDropDownControl.prototype._mouseLeave = function(t) {
        this.removeClass(enums.UIState.HOVER)
    }
    ,
    UTDropDownControl.prototype._mouseEnter = function(t) {
        this.addClass(enums.UIState.HOVER)
    }
    ,
    UTDropDownControl
}(UTControl));
UTDropDownControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("inline-list-select"),
        t.classList.add("ut-drop-down-control"),
        this.__animatedContainer = document.createElement("div"),
        this.__animatedContainer.classList.add("inline-container"),
        this.__label = document.createElement("span"),
        this.__label.classList.add("label"),
        this.__animatedContainer.appendChild(this.__label),
        t.appendChild(this.__animatedContainer),
        this.__root = t,
        this._generated = !0
    }
}
,
UTDropDownControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__animatedContainer = null,
    this.__label = null
}
,
UTDropDownControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSearchFilterControl = function(e) {
    function UTSearchFilterControl() {
        var t = e.call(this) || this;
        return t.defaultLabel = "",
        t.hasDefault = !1,
        t.iconTable = null,
        t.setId = "",
        t
    }
    return __extends(UTSearchFilterControl, e),
    Object.defineProperty(UTSearchFilterControl.prototype, "image", {
        get: function() {
            var t;
            return null !== (t = this.__filterImage.getAttribute("src")) && void 0 !== t ? t : ""
        },
        set: function(t) {
            var e = JSUtils.isEmpty(t);
            this.toggleClass("has-image", !e),
            e || this.__filterImage.setAttribute("src", t)
        },
        enumerable: !1,
        configurable: !0
    }),
    UTSearchFilterControl.prototype.init = function() {
        e.prototype.init.call(this),
        this._clearBtn.init(),
        this._clearBtn.addTarget(this, this.onClearSelected, EventType.TAP)
    }
    ,
    UTSearchFilterControl.prototype.dealloc = function() {
        this.iconTable = null,
        e.prototype.dealloc.call(this)
    }
    ,
    UTSearchFilterControl.prototype.generateWebOptionElement = function(t) {
        var e = document.createElement("li");
        if (e.textContent = t.label,
        this.iconTable) {
            var i = this.iconTable.get(t.value);
            i && "" !== i && (DOMKit.addClass(e, "with-icon"),
            e.style.backgroundImage = "url('" + i + "')")
        }
        return e
    }
    ,
    UTSearchFilterControl.prototype.setOptions = function(t) {
        e.prototype.setOptions.call(this, t),
        this.removeClass("has-selection"),
        0 === this.getIndex() && this.hasDefault && (this.__label.textContent = this.defaultLabel)
    }
    ,
    UTSearchFilterControl.prototype.getImage = function() {
        return this.image
    }
    ,
    UTSearchFilterControl.prototype.setImage = function(t) {
        this.image = t
    }
    ,
    UTSearchFilterControl.prototype.setDefaultLabel = function(t) {
        this.defaultLabel = t,
        0 === this.getIndex() && this.hasDefault && (this.__label.textContent = this.defaultLabel)
    }
    ,
    UTSearchFilterControl.prototype.setIndex = function(t) {
        e.prototype.setIndex.call(this, t),
        this.toggleClass("has-selection", 0 !== this.getIndex() || !this.hasDefault)
    }
    ,
    UTSearchFilterControl.prototype.setHasDefault = function(t) {
        this.hasDefault = t,
        this.toggleClass("has-default", t)
    }
    ,
    UTSearchFilterControl.prototype.setIconTable = function(t) {
        this.iconTable = t
    }
    ,
    UTSearchFilterControl.prototype.onChangeEvent = function(t) {
        e.prototype.onChangeEvent.call(this, t),
        0 === this.getIndex() && this.hasDefault && (this.__label.textContent = this.defaultLabel)
    }
    ,
    UTSearchFilterControl.prototype.onClearSelected = function(t, e, i) {
        var r = this;
        if (this.isInteractionEnabled()) {
            var n = this.getDropDownElement()
              , o = n.parentNode;
            isPhone() && o && (o.removeChild(n),
            setTimeout(function() {
                return r.__animatedContainer.appendChild(n)
            }, 500)),
            this.setIndex(this.getDefaultIndex())
        }
    }
    ,
    UTSearchFilterControl
}(UTDropDownControl);
UTSearchFilterControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("inline-list-select"),
        t.classList.add("ut-search-filter-control"),
        this.__animatedContainer = document.createElement("div"),
        this.__animatedContainer.classList.add("inline-container");
        var e = document.createElement("div");
        e.classList.add("ut-search-filter-control--row"),
        this.__filterImage = document.createElement("img"),
        this.__filterImage.classList.add("ut-search-filter-control--row-image"),
        e.appendChild(this.__filterImage),
        this.__label = document.createElement("span"),
        this.__label.classList.add("label"),
        e.appendChild(this.__label),
        this._clearBtn = new UTFlatButtonControl,
        this._clearBtn.getRootElement().classList.add("ut-search-filter-control--row-button"),
        e.appendChild(this._clearBtn.getRootElement()),
        this.__animatedContainer.appendChild(e),
        t.appendChild(this.__animatedContainer),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSearchFilterControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__animatedContainer = null,
    this.__filterImage = null,
    this.__label = null,
    this._clearBtn.destroy()
}
,
UTSearchFilterControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTToggleControl = function(i) {
    function UTToggleControl() {
        var t = i.call(this) || this;
        return t.toggled = !1,
        t
    }
    return __extends(UTToggleControl, i),
    UTToggleControl.prototype.init = function() {
        i.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTToggleControl.prototype.setInteractionState = function(t) {
        var e = this._interactionState;
        i.prototype.setInteractionState.call(this, t),
        this._interactionState !== e && this.toggleClass(enums.UIState.DISABLED, !this._interactionState)
    }
    ,
    UTToggleControl.prototype.toggle = function(t) {
        var e = null != t ? t : !this.toggled;
        return e !== this.toggled && (this.toggled = e,
        this.toggleClass("toggled", this.toggled)),
        this.toggled
    }
    ,
    UTToggleControl.prototype.getToggleState = function() {
        return this.toggled
    }
    ,
    UTToggleControl.prototype._tapDetected = function(t) {
        this.getEventDelegate() ? i.prototype._tapDetected.call(this, t) : this.isInteractionEnabled() && (this.toggle(),
        this._triggerActions(EventType.TAP, {
            toggleState: this.toggled
        }))
    }
    ,
    UTToggleControl
}(UTControl);
UTToggleControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-toggle-control");
        var e = document.createElement("div");
        e.classList.add("ut-toggle-control--track"),
        t.appendChild(e);
        var i = document.createElement("div");
        i.classList.add("ut-toggle-control--grip"),
        t.appendChild(i),
        this.__root = t,
        this._generated = !0
    }
}
,
UTToggleControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTToggleControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTToggleCellView = function(i) {
    function UTToggleCellView() {
        return i.call(this) || this
    }
    return __extends(UTToggleCellView, i),
    UTToggleCellView.prototype.init = function() {
        i.prototype.init.call(this),
        this._toggle.init(),
        this._toggle.setEventDelegate(this),
        this.setInteractionState(!0)
    }
    ,
    UTToggleCellView.prototype.setInteractionState = function(t) {
        var e = this._interactionState;
        i.prototype.setInteractionState.call(this, t),
        this._interactionState !== e && this.toggleClass(enums.UIState.DISABLED, !this._interactionState),
        this._toggle.setInteractionState(t)
    }
    ,
    UTToggleCellView.prototype.setLabel = function(t) {
        this.__label.textContent = t
    }
    ,
    UTToggleCellView.prototype.getToggleState = function() {
        return this._toggle.getToggleState()
    }
    ,
    UTToggleCellView.prototype.toggle = function(t) {
        return this._toggle.toggle(t)
    }
    ,
    UTToggleCellView.prototype._tapDetected = function(t) {
        i.prototype._tapDetected.call(this, t),
        this.isInteractionEnabled() && (this.toggle(),
        this._triggerActions(EventType.TAP, {
            toggleState: this._toggle.getToggleState()
        }))
    }
    ,
    UTToggleCellView
}(UTTargetActionView);
UTToggleCellView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-toggle-cell-view"),
        this.__label = document.createElement("span"),
        this.__label.classList.add("ut-toggle-cell-view--label"),
        t.appendChild(this.__label),
        this._toggle = new UTToggleControl,
        t.appendChild(this._toggle.getRootElement()),
        this.__root = t,
        this._generated = !0
    }
}
,
UTToggleCellView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__label = null,
    this._toggle.destroy()
}
,
UTToggleCellView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTToggleControlGroupView = function(i) {
    function UTToggleControlGroupView() {
        var t = i.call(this) || this;
        return t.toggles = new EAHashTable,
        t
    }
    return __extends(UTToggleControlGroupView, i),
    UTToggleControlGroupView.prototype.dealloc = function() {
        this.removeSliders(),
        i.prototype.dealloc.call(this)
    }
    ,
    UTToggleControlGroupView.prototype.setInteractionState = function(e) {
        i.prototype.setInteractionState.call(this, e),
        this.getSubviews().forEach(function(t) {
            return t.setInteractionState(e)
        })
    }
    ,
    UTToggleControlGroupView.prototype.reset = function() {
        this.toggles.forEach(function(t) {
            return t.toggle(!1)
        })
    }
    ,
    UTToggleControlGroupView.prototype.addToggleCell = function(t, e) {
        var i = this.toggles.has(t);
        if (DebugUtils.Assert(!i, "Toggle control already exists with ID: " + t),
        !i) {
            var r = new UTToggleCellView;
            r.init(),
            r.setLabel(e),
            r.addTarget(this, this.handleToggleChange, EventType.TAP),
            this.toggles.set(t, r),
            this.addSubview(r)
        }
    }
    ,
    UTToggleControlGroupView.prototype.addSlider = function(t, e) {
        this.addToggleCell(t, e)
    }
    ,
    UTToggleControlGroupView.prototype.removeToggleCells = function() {
        this.getSubviews().forEach(function(t) {
            return t.dealloc()
        }),
        this.toggles.clear()
    }
    ,
    UTToggleControlGroupView.prototype.removeSliders = function() {
        this.removeToggleCells()
    }
    ,
    UTToggleControlGroupView.prototype.toggleById = function(t, e) {
        var i;
        null === (i = this.toggles.get(t)) || void 0 === i || i.toggle(e)
    }
    ,
    UTToggleControlGroupView.prototype.toggleSlider = function(t, e) {
        this.toggleById(t, e)
    }
    ,
    UTToggleControlGroupView.prototype.setCellInteractionState = function(t, e) {
        var i;
        null === (i = this.toggles.get(t)) || void 0 === i || i.setInteractionState(e)
    }
    ,
    UTToggleControlGroupView.prototype.setSliderInteractionState = function(t, e) {
        this.setCellInteractionState(t, e)
    }
    ,
    UTToggleControlGroupView.prototype.handleToggleChange = function(e, t, i) {
        var r, n = this, o = null !== (r = this.toggles.keys().filter(function(t) {
            return n.toggles.get(t) === e
        })[0]) && void 0 !== r ? r : "";
        this._triggerActions(EventType.CHANGE, {
            id: o,
            checked: i.toggleState
        })
    }
    ,
    UTToggleControlGroupView
}(UTTargetActionView);
UTToggleControlGroupView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-toggle-control-group-view"),
        this.__root = t,
        this._generated = !0
    }
}
,
UTToggleControlGroupView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTToggleControlGroupView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var ItemViewSize, UTItemInfoStateViewModel = function(i) {
    function UTItemInfoStateViewModel(t) {
        var e = i.call(this) || this;
        return e.configDelegate = t || null,
        e.state = e.configDelegate && parseInt(e.configDelegate.getSessionItem("UTItemInfoState") || "", 10) || UIItemInfoState.MAIN,
        e
    }
    return __extends(UTItemInfoStateViewModel, i),
    UTItemInfoStateViewModel.prototype.setState = function(t) {
        this.configDelegate && (this.configDelegate.setSessionItem("UTItemInfoState", t.toString()),
        getDefaultDispatcher().notify(AppNotification.UI_ITEM_STATE_CHANGE, this, {
            state: t
        })),
        this.state = t
    }
    ,
    UTItemInfoStateViewModel.prototype.getState = function() {
        return this.configDelegate && parseInt(this.configDelegate.getSessionItem("UTItemInfoState") || "", 10) || this.state
    }
    ,
    UTItemInfoStateViewModel.prototype.nextState = function() {
        switch (this.getState()) {
        case UIItemInfoState.MAIN:
            this.setState(UIItemInfoState.BIO);
            break;
        case UIItemInfoState.BIO:
            this.setState(UIItemInfoState.STATS);
            break;
        case UIItemInfoState.STATS:
            this.setState(UIItemInfoState.STYLE);
            break;
        case UIItemInfoState.STYLE:
            this.setState(UIItemInfoState.STRENGTH);
            break;
        case UIItemInfoState.STRENGTH:
        default:
            this.setState(UIItemInfoState.MAIN)
        }
        return this.state
    }
    ,
    UTItemInfoStateViewModel
}(EAObject), UTItemCanvasDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTItemCanvasDTO(t) {
        var e = i.call(this) || this;
        return e.dynamic = t.dynamic,
        e.element = t.element ? t.element : null,
        e.height = t.height,
        e.width = t.width,
        e.xPos = t.xPos,
        e.yPos = t.yPos,
        e
    }
    return __extends(UTItemCanvasDTO, i),
    UTItemCanvasDTO
}(EAObject)), UTItemImageView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTItemImageView() {
        var t = e.call(this) || this;
        return t._hasPlaceholder = !1,
        t.placeholderURL = "",
        t.placeholderCssClass = "",
        t
    }
    return __extends(UTItemImageView, e),
    Object.defineProperty(UTItemImageView.prototype, "hasPlaceholder", {
        get: function() {
            return this._hasPlaceholder
        },
        enumerable: !1,
        configurable: !0
    }),
    UTItemImageView.prototype._checkResource = function(t) {
        var e = new EAHttpRequest;
        return e.setUrl(t),
        e.setRequestType(HttpRequestMethod.HEAD),
        e.send(),
        e
    }
    ,
    UTItemImageView.prototype.usePlaceholder = function() {
        this._hasPlaceholder = !0,
        this.src = getAppMain().getConfigRepository().getConfigString(EAConfigurationRepository.KEY_RESOURCE_ROOT) + this.placeholderURL,
        0 < this.placeholderCssClass.length && DOMKit.addClass(this.getRootElement(), this.placeholderCssClass)
    }
    ,
    UTItemImageView.prototype._loadResource = function(i, t, e) {
        var r = this;
        if (this.src = !0 === e ? i : getAppMain().getConfigRepository().getConfigString(EAConfigurationRepository.KEY_RESOURCE_ROOT) + i,
        this.path = i,
        this.getRootElement().style.display = "none",
        i === this.placeholderURL && this.usePlaceholder(),
        !HttpUtils.urlHasImage(this.src))
            return this._imageLoadEvent.notify(!1, this, this.src),
            this._imageLoadEvent;
        var n = !repositories.ImageAsset.has(i) || repositories.ImageAsset.isCacheExpired();
        if (n && 0 < i.length && i !== this.placeholderURL ? this._checkResource(this.src).observe(this, function(t, e) {
            t.unobserve(r),
            repositories.ImageAsset.set(i, e.success && !(e.status === HttpStatusCode.NOT_FOUND)),
            repositories.ImageAsset.isCacheExpired() && repositories.ImageAsset.setCacheTimestamp(Date.now())
        }) : n || repositories.ImageAsset.assetExists(i) || this.usePlaceholder(),
        t) {
            var o = this.getRootElement();
            this._addListener(EventType.LOAD, o, this._handleLoadSuccessEvent.bind(this)),
            this._addListener(EventType.ERROR, o, this._handleLoadFailEvent.bind(this))
        }
        return this.replaceAndShowResource(this.src),
        this._imageLoadEvent
    }
    ,
    UTItemImageView.prototype._handleLoadFailEvent = function(t) {
        this._hasPlaceholder ? (this._imageLoadEvent.notify(!1, this, this.src),
        this._removeListenersByName(EventType.LOAD, EventType.ERROR)) : (this._loadResource(this.placeholderURL, !0, !1),
        this._hasPlaceholder = !0)
    }
    ,
    UTItemImageView
}(UTImageView));
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
!function(t) {
    t[t.SMALL = 0] = "SMALL",
    t[t.LARGE = 1] = "LARGE"
}(ItemViewSize = ItemViewSize || {});
var UTItemView = function(e) {
    function UTItemView() {
        var t = e.call(this) || this;
        return t.assets = new EAHashTable,
        t.assetsLoaded = new EAHashTable,
        t.infoStateViewModel = new UTItemInfoStateViewModel(services.UserSettings),
        t.rendered = !1,
        t.renderConcept = !0,
        t.renderRestrictions = !0,
        t.supportSecondaryViews = !0,
        t
    }
    return __extends(UTItemView, e),
    UTItemView.onFlagImageLoad = function(t, e, i, r) {
        t.unobserve(this),
        e || i.replaceAndShowResource(r.replace(/\d+\.png/, UTItemEntity.DEFAULT_ASSET_ID + ".png"))
    }
    ,
    UTItemView.prototype.init = function() {
        e.prototype.init.call(this),
        getDefaultDispatcher().addObserver(AppNotification.UI_ITEM_STATE_CHANGE, this, this.onInfoStateChanged)
    }
    ,
    UTItemView.prototype.dealloc = function() {
        getDefaultDispatcher().removeObserver(AppNotification.UI_ITEM_STATE_CHANGE, this),
        this.assets.clear(),
        this.assetsLoaded.clear(),
        e.prototype.dealloc.call(this)
    }
    ,
    UTItemView.prototype.setItemInfoState = function(t) {}
    ,
    UTItemView.prototype.render = function(t) {
        var e = services.Configuration.getItemRarity(t);
        this.rendered && this.resetRender(),
        this._canvas && (this._canvas.clearCanvas(),
        this.removeClass(UTItemView.CLASS.LOADED),
        this.addClass(UTItemView.CLASS.LOADING)),
        this.assets.clear(),
        this.assetsLoaded.clear(),
        this.renderShell(t, e),
        this.renderItem(t, e),
        this.renderAuctionState(t.getAuctionData()),
        this.rendered = !0,
        this.setItemInfoState(this.infoStateViewModel && this.supportSecondaryViews ? this.infoStateViewModel.getState() : enums.UIItemInfoState.MAIN)
    }
    ,
    UTItemView.prototype.renderComplete = function() {
        this.removeClass(UTItemView.CLASS.LOADING),
        this.addClass(UTItemView.CLASS.LOADED)
    }
    ,
    UTItemView.prototype.renderShell = function(t, e) {
        this.rendered && this.removeClass([UTItemView.CLASS.CONCEPT, UTItemView.CLASS.EMPTY].join(" ")),
        t.isValid() ? this.renderConcept && t.concept ? this.addClass(UTItemView.CLASS.CONCEPT) : (this.toggleClass(UTItemView.CLASS.ACTIVE_CLUB_ITEM, t.isActiveClubItem()),
        this.removeClass(UTItemView.STATUS_OVERLAY_TYPE.join(" ")),
        this.addClass(UTItemView.STATUS_OVERLAY_TYPE[e.shell])) : this.addClass(UTItemView.CLASS.EMPTY)
    }
    ,
    UTItemView.prototype.setShell = function(t, e, i) {
        var r = this;
        if (t.isValid() && 0 !== t.stackCount) {
            var n, o = this.getRootElement(), s = t.isPlayer() || t.isManager(), a = t.isClubItem() && t.isSpecial(), l = JSUtils.isString(i) ? i : "";
            n = s || a ? 1 : 0;
            var c = t.hasQualityTiers() ? t.getTier() : ItemRatingTier.NONE
              , u = AssetLocationUtils.getShellUri(e, n, t.rareflag, c, l);
            s ? (this.assets.set(ItemAssetType.SHELL, this.getAssetDimensions(ItemAssetType.SHELL, !1)),
            e === ItemViewSize.SMALL ? this.loadAsset(u, ItemAssetType.SHELL, t, function(t, e) {
                var i = AssetLocationUtils.getLocalShellUri(e.concept, ItemRarity.DEFAULT, ItemRatingTier.NONE, ItemViewSize.SMALL);
                r.loadAsset(i, t, e)
            }) : e === ItemViewSize.LARGE && this.loadAsset(u, ItemAssetType.SHELL, t, function(t, e) {
                var i = AssetLocationUtils.getLocalShellUri(e.concept, ItemRarity.DEFAULT, ItemRatingTier.NONE, ItemViewSize.LARGE);
                r.loadAsset(i, t, e)
            })) : o.style.backgroundImage = "url(" + u + ")"
        }
    }
    ,
    UTItemView.prototype.setLocalShell = function(t, e) {
        var i = this.getRootElement()
          , r = t.concept && this.renderConcept
          , n = r && t.rareflag > ItemRarity.RARE ? 2 : t.rareflag
          , o = t.hasQualityTiers() ? t.getTier() : ItemRatingTier.NONE
          , s = AssetLocationUtils.getLocalShellUri(r, n, o, e);
        this._canvas ? (this.assets.set(ItemAssetType.SHELL, this.getAssetDimensions(ItemAssetType.SHELL, !1)),
        this.loadAsset(s, ItemAssetType.SHELL, t)) : i.style.backgroundImage = "url(" + s + ")"
    }
    ,
    UTItemView.prototype.renderAuctionState = function(t) {
        if (this.rendered) {
            var e = [UTItemView.CLASS.AUCTION_WON, UTItemView.CLASS.AUCTION_WINNING, UTItemView.CLASS.AUCTION_EXPIRED, UTItemView.CLASS.AUCTION_OUTBID].join(" ");
            this.removeClass(e)
        }
        t.isValid() && (t.isWon() ? this.addClass(UTItemView.CLASS.AUCTION_WON) : t.isHighestBid() || t.isBought() || t.isSold() ? this.addClass(UTItemView.CLASS.AUCTION_WINNING) : t.isActiveTrade() && t.isOutbid() ? this.addClass(UTItemView.CLASS.AUCTION_OUTBID) : (t.isClosedTrade() || t.isExpired()) && this.addClass(UTItemView.CLASS.AUCTION_EXPIRED))
    }
    ,
    UTItemView.prototype.renderChemistryBreakdown = function(t, e, i, r) {}
    ,
    UTItemView.prototype.renderChemistryPoints = function(t) {}
    ,
    UTItemView.prototype.applyColors = function(t, e) {
        var i = this.getRootElement();
        DOMKit.findElements(i, t).forEach(function(t) {
            t.style.color = "rgba(" + e.r + ", " + e.g + ", " + e.b + ", 1)"
        })
    }
    ,
    UTItemView.prototype.requestResource = function(t, e, i, r) {
        var n = getAppMain().getConfigRepository().getConfigString(EAConfigurationRepository.KEY_RESOURCE_ROOT) + t;
        this.loadAsset(n, e, i, r || this.onLoadAssetError)
    }
    ,
    UTItemView.prototype.loadAsset = function(t, i, r, n) {
        var o = this
          , s = this.assets.get(i);
        if (s) {
            var a = new Image
              , l = function(t) {
                a.removeEventListener("load", l, !1),
                a.removeEventListener("error", l, !1);
                var e = o.assets.get(i);
                e && e === s && ("load" === t.type ? o.onLoadAssetSuccess(i, a) : "error" === t.type && (n ? n.apply(o, [i, r]) : o.onLoadAssetError(i, r)))
            };
            t && (a.src = t,
            a.addEventListener("load", l, !1),
            a.addEventListener("error", l, !1))
        }
    }
    ,
    UTItemView.prototype.onLoadAssetSuccess = function(t, e) {
        var i = this.assets.get(t);
        this._canvas && i && (i.element = e,
        this.assetsLoaded.set(t, !0),
        this.onLoadComplete())
    }
    ,
    UTItemView.prototype.onLoadAssetError = function(t, e) {
        var i = this.assets.get(t);
        this._canvas && i && (i.element = null,
        this.assetsLoaded.set(t, !1),
        this.onLoadComplete())
    }
    ,
    UTItemView.prototype.onLoadComplete = function() {
        this._canvas && this.assetsLoaded.length >= this.assets.length && (this._canvas.setAssets(this.assets),
        this._canvas.setState(this.infoStateViewModel && this.supportSecondaryViews ? this.infoStateViewModel.getState() : enums.UIItemInfoState.MAIN),
        this.renderComplete())
    }
    ,
    UTItemView.prototype.onInfoStateChanged = function(t, e, i) {
        this.setItemInfoState(i.state)
    }
    ,
    UTItemView.CLASS = {
        ACTIVE_CLUB_ITEM: "activeItem",
        CONTRACT_EXPIRED: "restricted-contract",
        INJURED: "restricted-injured",
        SUSPENDED: "restricted-suspended",
        TIME_LIMITED: "timeLimited",
        DYNAMIC_PORTRAIT: "dynamic-portrait",
        CONCEPT: "concept",
        EMPTY: "empty",
        LOAN: "loan",
        CHEM_BONUS: "hasBonus",
        INVALID_STAT: "invalidStat",
        PLAYSTYLE: "playStyle",
        PLAYEROUT: "playerOut",
        AUCTION_WINNING: "winning",
        AUCTION_WON: "won",
        AUCTION_EXPIRED: "expired",
        AUCTION_OUTBID: "outbid",
        LOADING: "ut-item-loading",
        LOADED: "ut-item-loaded",
        CHAMPIONS: "champions",
        NO_ALTS: "no-alts"
    },
    UTItemView.QUALITY = {
        BRONZE: "bronze",
        SILVER: "silver",
        GOLD: "gold"
    },
    UTItemView.STATUS_OVERLAY_TYPE = ["common", "rare", "specials"],
    UTItemView
}(UTView)
  , UTBadgeItemView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTBadgeItemView() {
        return t.call(this) || this
    }
    return __extends(UTBadgeItemView, t),
    UTBadgeItemView.prototype.init = function() {
        t.prototype.init.call(this),
        this._mainImage && (this._mainImage.placeholderURL = AssetLocationUtils.getBadgeImageUri(UTItemEntity.DEFAULT_ASSET_ID))
    }
    ,
    UTBadgeItemView.onImageLoad = function(t, e, i, r) {
        t.unobserve(this),
        e || i.replaceAndShowResource(r.replace(/\d+\.png/, UTItemEntity.DEFAULT_ASSET_ID + ".png"))
    }
    ,
    UTBadgeItemView.prototype.renderItem = function(t, e) {
        var i = e.getExpColorMap(t.getTier());
        if (i && this.applyColors(".iconClub", i.footer),
        this._mainImage) {
            var r = AssetLocationUtils.getBadgeImageUri(t.teamId, enums.UIThemeVariation.LIGHT);
            this._mainImage.setResource(r, !0).observe(this._mainImage, UTBadgeItemView.onImageLoad)
        }
    }
    ,
    UTBadgeItemView.prototype.canRender = function(t) {
        return t.isBadge()
    }
    ,
    UTBadgeItemView.prototype.resetRender = function() {}
    ,
    UTBadgeItemView.prototype.getAssetDimensions = function(t, e) {
        return new UTItemCanvasDTO({
            dynamic: e,
            height: 0,
            width: 0,
            xPos: 0,
            yPos: 0
        })
    }
    ,
    UTBadgeItemView
}(UTItemView))
  , UTLargeBadgeItemView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(o) {
    function UTLargeBadgeItemView() {
        return o.call(this) || this
    }
    return __extends(UTLargeBadgeItemView, o),
    UTLargeBadgeItemView.prototype.renderItem = function(t, e) {
        o.prototype.renderItem.call(this, t, e);
        var i = services.Localization
          , r = e.getExpColorMap(t.getTier())
          , n = t.isSpecial() ? null == e ? void 0 : e.getGuid() : void 0;
        this.setShell(t, ItemViewSize.LARGE, n),
        this.__itemName.textContent = i.localize("card.desc.badge"),
        this.__clubName.textContent = UTLocalizationUtil.teamIdToAbbr15(t.teamId, i),
        r && (this.applyColors(".name", r.name),
        this.applyColors(".clubView .clubLine", r.footer))
    }
    ,
    UTLargeBadgeItemView
}(UTBadgeItemView));
UTLargeBadgeItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("large"),
        t.classList.add("badge"),
        t.classList.add("item");
        var e = document.createElement("div");
        e.classList.add("statusOverlay"),
        t.appendChild(e),
        this._mainImage = new UTItemImageView,
        this._mainImage.getRootElement().classList.add("photo"),
        t.appendChild(this._mainImage.getRootElement()),
        this.__clubName = document.createElement("div"),
        this.__clubName.classList.add("name"),
        t.appendChild(this.__clubName);
        var i = document.createElement("div");
        i.classList.add("clubView"),
        this.__itemName = document.createElement("div"),
        this.__itemName.classList.add("clubLine"),
        i.appendChild(this.__itemName),
        t.appendChild(i);
        var r = document.createElement("div");
        r.classList.add("badge"),
        r.classList.add("iconClub"),
        t.appendChild(r),
        this.__root = t,
        this._generated = !0
    }
}
,
UTLargeBadgeItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._mainImage.destroy(),
    this.__clubName = null,
    this.__itemName = null
}
,
UTLargeBadgeItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTBallItemView = function(t) {
    function UTBallItemView() {
        return t.call(this) || this
    }
    return __extends(UTBallItemView, t),
    UTBallItemView.prototype.init = function() {
        t.prototype.init.call(this),
        this._mainImage && (this._mainImage.placeholderURL = AssetLocationUtils.getBallImageUri(UTItemEntity.DEFAULT_BALL_ASSET_ID))
    }
    ,
    UTBallItemView.onImageLoad = function(t, e, i, r) {
        t.unobserve(this),
        e || i.replaceAndShowResource(r.replace(/\d+\.png/, UTItemEntity.DEFAULT_BALL_ASSET_ID + ".png"))
    }
    ,
    UTBallItemView.prototype.renderItem = function(t, e) {
        var i = e.getExpColorMap(t.getTier());
        i && this.applyColors(".iconClub", i.footer),
        this._mainImage && this._mainImage.setResource(AssetLocationUtils.getBallImageUri(t.getStaticData().assetId), !0).observe(this._mainImage, UTBallItemView.onImageLoad)
    }
    ,
    UTBallItemView.prototype.canRender = function(t) {
        return t.isBall()
    }
    ,
    UTBallItemView.prototype.resetRender = function() {}
    ,
    UTBallItemView.prototype.getAssetDimensions = function(t, e) {
        return new UTItemCanvasDTO({
            dynamic: e,
            height: 0,
            width: 0,
            xPos: 0,
            yPos: 0
        })
    }
    ,
    UTBallItemView
}(UTItemView)
  , UTLargeBallItemView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(o) {
    function UTLargeBallItemView() {
        return o.call(this) || this
    }
    return __extends(UTLargeBallItemView, o),
    UTLargeBallItemView.prototype.renderItem = function(t, e) {
        var i = t.getStaticData();
        o.prototype.renderItem.call(this, t, e);
        var r = t.isSpecial() ? null == e ? void 0 : e.getGuid() : void 0;
        this.setShell(t, ItemViewSize.LARGE, r);
        var n = e.getExpColorMap(t.getTier());
        this.__ballName.textContent = services.Localization.localize(i.description),
        n && this.applyColors(".name", n.name)
    }
    ,
    UTLargeBallItemView
}(UTBallItemView));
UTLargeBallItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("large"),
        t.classList.add("ball"),
        t.classList.add("item");
        var e = document.createElement("div");
        e.classList.add("statusOverlay"),
        t.appendChild(e),
        this._mainImage = new UTItemImageView,
        this._mainImage.getRootElement().classList.add("photo"),
        t.appendChild(this._mainImage.getRootElement()),
        this.__ballName = document.createElement("div"),
        this.__ballName.classList.add("name"),
        t.appendChild(this.__ballName);
        var i = document.createElement("div");
        i.classList.add("ball"),
        i.classList.add("iconClub"),
        t.appendChild(i),
        this.__root = t,
        this._generated = !0
    }
}
,
UTLargeBallItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._mainImage.destroy(),
    this.__ballName = null
}
,
UTLargeBallItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTConsumableItemView = function(t) {
    function UTConsumableItemView() {
        return t.call(this) || this
    }
    return __extends(UTConsumableItemView, t),
    UTConsumableItemView.prototype.getImageUrl = function(t, e) {
        return AssetLocationUtils.getConsumableImageUri(t, e, ItemViewSize.LARGE)
    }
    ,
    UTConsumableItemView.prototype.renderItem = function(t, e) {
        this.renderConsumableStack(t);
        var i = e.getExpColorMap(t.getTier());
        if (i && this.applyColors(".iconConsumable", i.footer),
        this._mainImage) {
            var r = t.getStaticData();
            this._mainImage.setResource(this.getImageUrl(t.getAssetId(), r.assetId))
        }
        this.setConsumableIcon(t)
    }
    ,
    UTConsumableItemView.prototype.canRender = function(t) {
        return t.isConsumable() && !t.isStyleModifier()
    }
    ,
    UTConsumableItemView.prototype.resetRender = function() {
        if (this.__itemIcon) {
            var t = ["healing", "managerContract", "managerLeague", "playerContract", "positioning"].join(" ");
            DOMKit.removeClass(this.__itemIcon, t)
        }
        this.getRootElement().removeAttribute("style")
    }
    ,
    UTConsumableItemView.prototype.renderConsumableStack = function(t) {
        if (this.__stackCount) {
            var e = 1 < t.stackCount;
            this.__stackCount.textContent = e ? t.stackCount.toString() : "",
            DOMKit.toggleDisplayStyle(this.__stackCount, e)
        }
    }
    ,
    UTConsumableItemView.prototype.setConsumableIcon = function(t) {
        if (this.__itemIcon) {
            var e = "";
            switch (t.type) {
            case ItemType.CONTRACT:
                e = t.isPlayerContract() ? "playerContract" : "managerContract";
                break;
            case ItemType.TRAINING:
                t.isPlayerPositionModifier() ? e = "positioning" : t.isManagerLeagueModifier() && (e = "managerLeague");
                break;
            case ItemType.HEALTH:
                e = "healing";
                break;
            default:
                DebugUtils.Assert(!1, "Hit default case for method: setConsumableIcon")
            }
            DOMKit.addClass(this.__itemIcon, e)
        }
    }
    ,
    UTConsumableItemView.prototype.getAssetDimensions = function(t, e) {
        return new UTItemCanvasDTO({
            dynamic: e,
            height: 0,
            width: 0,
            xPos: 0,
            yPos: 0
        })
    }
    ,
    UTConsumableItemView
}(UTItemView)
  , UTLargeConsumableItemView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(p) {
    function UTLargeConsumableItemView() {
        return p.call(this) || this
    }
    return __extends(UTLargeConsumableItemView, p),
    UTLargeConsumableItemView.prototype.renderItem = function(t, e) {
        var i = services.Localization
          , r = t.getStaticData();
        p.prototype.renderItem.call(this, t, e),
        this.setShell(t, ItemViewSize.LARGE),
        this.__itemName.textContent = r.name;
        var n = ""
          , o = ""
          , s = "";
        if (t.isContract()) {
            var a = document.createElement("span")
              , l = document.createElement("span")
              , c = document.createElement("span");
            a.textContent = "+" + r.bronzeBoost,
            l.textContent = "+" + r.silverBoost,
            c.textContent = "+" + r.goldBoost,
            DOMKit.addClass(a, "bronzeBoost"),
            DOMKit.addClass(l, "silverBoost"),
            DOMKit.addClass(c, "goldBoost"),
            DOMKit.empty(this.__line1),
            DOMKit.addClass(this.__line1, "contractStats"),
            this.__line1.appendChild(a),
            this.__line1.appendChild(l),
            this.__line1.appendChild(c),
            t.isPlayerContract() ? this.__itemName.textContent = i.localize("card.title.playercontracts") : this.__itemName.textContent = i.localize("card.title.managercontracts"),
            this.__line2.textContent = i.localize("card.desc.contract.matches")
        } else
            t.isTraining() ? (t.isPlayerPositionModifier() ? (n = i.localize("card.title.positionmodifier"),
            o = i.localize("card.desc.training.pos")) : t.isManagerLeagueModifier() && (n = i.localize("card.title.leaguechange"),
            o = UTLocalizationUtil.leagueIdToName(t.leagueId, i)),
            this.__itemName.textContent = n,
            this.__line1.textContent = o,
            this.__line2.textContent = s) : t.isHealth() && (n = i.localize("card.title.healing"),
            o = "+" + i.localizeNumber(r.amount),
            t.subtype === ItemSubType.HEALING_ALL && (s = i.localize("card.desc.healing.all.injuries")),
            this.__itemName.textContent = n,
            this.__line1.textContent = o,
            this.__line2.textContent = s);
        var u = e.getExpColorMap(t.getTier());
        u && (this.applyColors(".name", u.name),
        this.applyColors(".infoView .infoRow", u.footer))
    }
    ,
    UTLargeConsumableItemView
}(UTConsumableItemView));
UTLargeConsumableItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("large"),
        t.classList.add("consumable"),
        t.classList.add("item");
        var e = document.createElement("div");
        e.classList.add("statusOverlay"),
        t.appendChild(e),
        this.__stackCount = document.createElement("div"),
        this.__stackCount.classList.add("infoTab"),
        t.appendChild(this.__stackCount),
        this._mainImage = new UTImageView,
        this._mainImage.getRootElement().classList.add("photo"),
        t.appendChild(this._mainImage.getRootElement());
        var i = document.createElement("div");
        i.classList.add("ut-item-consumable-details"),
        this.__itemName = document.createElement("div"),
        this.__itemName.classList.add("name"),
        i.appendChild(this.__itemName);
        var r = document.createElement("div");
        r.classList.add("infoView"),
        this.__line1 = document.createElement("div"),
        this.__line1.classList.add("infoRow"),
        r.appendChild(this.__line1),
        this.__line2 = document.createElement("div"),
        this.__line2.classList.add("infoRow"),
        r.appendChild(this.__line2),
        i.appendChild(r),
        this.__itemIcon = document.createElement("div"),
        this.__itemIcon.classList.add("iconConsumable"),
        i.appendChild(this.__itemIcon),
        t.appendChild(i),
        this.__root = t,
        this._generated = !0
    }
}
,
UTLargeConsumableItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__stackCount = null,
    this._mainImage.destroy(),
    this.__itemName = null,
    this.__line1 = null,
    this.__line2 = null,
    this.__itemIcon = null
}
,
UTLargeConsumableItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTChemistryStyleItemView = function(t) {
    function UTChemistryStyleItemView() {
        return t.call(this) || this
    }
    return __extends(UTChemistryStyleItemView, t),
    UTChemistryStyleItemView.prototype.renderItem = function(t, e) {
        this.renderConsumableStack(t);
        var i = e.getExpColorMap(t.getTier());
        i && this.applyColors(".iconConsumable", i.footer)
    }
    ,
    UTChemistryStyleItemView.prototype.canRender = function(t) {
        return t.isStyleModifier()
    }
    ,
    UTChemistryStyleItemView.prototype.resetRender = function() {
        this.getRootElement().removeAttribute("style")
    }
    ,
    UTChemistryStyleItemView
}(UTConsumableItemView)
  , UTItemStatChevronsView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTItemStatChevronsView() {
        return t.call(this) || this
    }
    return __extends(UTItemStatChevronsView, t),
    UTItemStatChevronsView.prototype.setChevronCount = function(i) {
        DOMKit.HTMLCollectionToArray(this.getRootElement().children).reverse().forEach(function(t, e) {
            t.style.display = i < e + 1 ? "none" : ""
        })
    }
    ,
    UTItemStatChevronsView.prototype.setChemistryBoost = function(i) {
        DOMKit.HTMLCollectionToArray(this.getRootElement().children).reverse().forEach(function(t, e) {
            DOMKit.toggleClass(t, "chemBoost", e < i)
        })
    }
    ,
    UTItemStatChevronsView
}(UTView));
UTItemStatChevronsView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("chevrons");
        var e = document.createElement("div");
        e.classList.add("chevron1"),
        e.classList.add("chevron"),
        t.appendChild(e);
        var i = document.createElement("div");
        i.classList.add("chevron2"),
        i.classList.add("chevron"),
        t.appendChild(i);
        var r = document.createElement("div");
        r.classList.add("chevron3"),
        r.classList.add("chevron"),
        t.appendChild(r),
        this.__root = t,
        this._generated = !0
    }
}
,
UTItemStatChevronsView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTItemStatChevronsView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTLargeChemistryStyleItemView = function(a) {
    function UTLargeChemistryStyleItemView() {
        return a.call(this) || this
    }
    return __extends(UTLargeChemistryStyleItemView, a),
    UTLargeChemistryStyleItemView.prototype.renderItem = function(t, e) {
        var i = e.getExpColorMap(t.getTier())
          , r = AssetLocationUtils.getConsumableImageUri(t.getAssetId(), t.subtype, ItemViewSize.LARGE)
          , n = t.subtype
          , o = UTLocalizationUtil.playStyleIdToName(n, services.Localization);
        a.prototype.renderItem.call(this, t, e),
        this.setShell(t, ItemViewSize.LARGE),
        this._mainImage.setResource(r),
        this.__itemName.textContent = o;
        var s = t.isGKStyleModifier();
        this.__statLabel1.textContent = services.Localization.localize(s ? "cards.cardfront.divingAbbr" : "cards.cardfront.paceAbbr"),
        this.__statLabel2.textContent = services.Localization.localize(s ? "cards.cardfront.handlingAbbr" : "cards.cardfront.shootingAbbr"),
        this.__statLabel3.textContent = services.Localization.localize(s ? "cards.cardfront.kickAbbr" : "cards.cardfront.passingAbbr"),
        this.__statLabel4.textContent = services.Localization.localize(s ? "cards.cardfront.reflexAbbr" : "cards.cardfront.dribblingAbbr"),
        this.__statLabel5.textContent = services.Localization.localize(s ? "cards.cardfront.speedAbbr" : "cards.cardfront.defendingAbbr"),
        this.__statLabel6.textContent = services.Localization.localize(s ? "cards.cardfront.positionAbbr" : "cards.cardfront.headingAbbr"),
        this.applyChevrons(repositories.PlayStyle.getPlayStyleBonusById(n, s)),
        i && (this.applyColors(".itemTypeName", i.header),
        this.applyColors(".name", i.name),
        this.applyColors(".styleView .statLabel", i.footer))
    }
    ,
    UTLargeChemistryStyleItemView.prototype.applyChevrons = function(t) {
        var n = this;
        t.slice(0, 6).forEach(function(t, e) {
            var i = n["_chevronSet" + (e + 1)];
            i && (i.setChevronCount(t),
            i.setChemistryBoost(t));
            var r = n["__statLabel" + (e + 1)];
            r && DOMKit.toggleClass(r, "chemBoost", 0 < t)
        }, this)
    }
    ,
    UTLargeChemistryStyleItemView
}(UTChemistryStyleItemView);
UTLargeChemistryStyleItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("large"),
        t.classList.add("chemistryStyle"),
        t.classList.add("item");
        var e = document.createElement("div");
        e.classList.add("statusOverlay"),
        t.appendChild(e),
        this.__stackCount = document.createElement("div"),
        this.__stackCount.classList.add("infoTab"),
        t.appendChild(this.__stackCount),
        this._mainImage = new UTImageView,
        this._mainImage.getRootElement().classList.add("photo"),
        t.appendChild(this._mainImage.getRootElement()),
        this.__itemName = document.createElement("div"),
        this.__itemName.classList.add("name"),
        t.appendChild(this.__itemName);
        var i = document.createElement("div");
        i.classList.add("styleView");
        var r = document.createElement("div");
        r.classList.add("statCellRow");
        var n = document.createElement("div");
        n.classList.add("statCell"),
        this._chevronSet1 = new UTItemStatChevronsView,
        n.appendChild(this._chevronSet1.getRootElement()),
        this.__statLabel1 = document.createElement("span"),
        this.__statLabel1.classList.add("statLabel"),
        n.appendChild(this.__statLabel1),
        r.appendChild(n);
        var o = document.createElement("div");
        o.classList.add("statCell"),
        this._chevronSet4 = new UTItemStatChevronsView,
        o.appendChild(this._chevronSet4.getRootElement()),
        this.__statLabel4 = document.createElement("span"),
        this.__statLabel4.classList.add("statLabel"),
        o.appendChild(this.__statLabel4),
        r.appendChild(o),
        i.appendChild(r);
        var s = document.createElement("div");
        s.classList.add("statCellRow");
        var a = document.createElement("div");
        a.classList.add("statCell"),
        this._chevronSet2 = new UTItemStatChevronsView,
        a.appendChild(this._chevronSet2.getRootElement()),
        this.__statLabel2 = document.createElement("span"),
        this.__statLabel2.classList.add("statLabel"),
        a.appendChild(this.__statLabel2),
        s.appendChild(a);
        var l = document.createElement("div");
        l.classList.add("statCell"),
        this._chevronSet5 = new UTItemStatChevronsView,
        l.appendChild(this._chevronSet5.getRootElement()),
        this.__statLabel5 = document.createElement("span"),
        this.__statLabel5.classList.add("statLabel"),
        l.appendChild(this.__statLabel5),
        s.appendChild(l),
        i.appendChild(s);
        var c = document.createElement("div");
        c.classList.add("statCellRow");
        var u = document.createElement("div");
        u.classList.add("statCell"),
        this._chevronSet3 = new UTItemStatChevronsView,
        u.appendChild(this._chevronSet3.getRootElement()),
        this.__statLabel3 = document.createElement("span"),
        this.__statLabel3.classList.add("statLabel"),
        u.appendChild(this.__statLabel3),
        c.appendChild(u);
        var p = document.createElement("div");
        p.classList.add("statCell"),
        this._chevronSet6 = new UTItemStatChevronsView,
        p.appendChild(this._chevronSet6.getRootElement()),
        this.__statLabel6 = document.createElement("span"),
        this.__statLabel6.classList.add("statLabel"),
        p.appendChild(this.__statLabel6),
        c.appendChild(p),
        i.appendChild(c),
        t.appendChild(i),
        this.__itemIcon = document.createElement("div"),
        this.__itemIcon.classList.add("chemistryStyle"),
        this.__itemIcon.classList.add("iconConsumable"),
        t.appendChild(this.__itemIcon),
        this.__root = t,
        this._generated = !0
    }
}
,
UTLargeChemistryStyleItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__stackCount = null,
    this._mainImage.destroy(),
    this.__itemName = null,
    this._chevronSet1.destroy(),
    this.__statLabel1 = null,
    this._chevronSet4.destroy(),
    this.__statLabel4 = null,
    this._chevronSet2.destroy(),
    this.__statLabel2 = null,
    this._chevronSet5.destroy(),
    this.__statLabel5 = null,
    this._chevronSet3.destroy(),
    this.__statLabel3 = null,
    this._chevronSet6.destroy(),
    this.__statLabel6 = null,
    this.__itemIcon = null
}
,
UTLargeChemistryStyleItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTCustomBrickItemView = function(e) {
    function UTCustomBrickItemView() {
        var t = e.call(this) || this;
        return t.imgLoaders = [],
        t
    }
    return __extends(UTCustomBrickItemView, e),
    UTCustomBrickItemView.prototype.generateImageLoader = function(t, e) {
        var i = new UTImageView;
        switch (t) {
        case SBCEligibilityKey.NATION_ID:
            i.setResource(AssetLocationUtils.getFlagImageUri(e));
            break;
        case SBCEligibilityKey.LEAGUE_ID:
            i.setResource(AssetLocationUtils.getLeagueImageUri(e, enums.UIThemeVariation.DARK));
            break;
        case SBCEligibilityKey.CLUB_ID:
            i.setResource(AssetLocationUtils.getBadgeImageUri(e, enums.UIThemeVariation.DARK));
            break;
        default:
            DebugUtils.Assert(!1, "Reached default case: " + t)
        }
        return i
    }
    ,
    UTCustomBrickItemView.prototype.renderCustomRequirement = function(t, e) {
        var i = this.generateImageLoader(t, e);
        this.imgLoaders.push(i),
        this.getRootElement().appendChild(i.getRootElement())
    }
    ,
    UTCustomBrickItemView.prototype.renderItem = function(t, e) {
        this.renderCustomRequirement(SBCEligibilityKey.LEAGUE_ID, t.leagueId),
        this.renderCustomRequirement(SBCEligibilityKey.CLUB_ID, t.teamId),
        this.renderCustomRequirement(SBCEligibilityKey.NATION_ID, t.nationId)
    }
    ,
    UTCustomBrickItemView.prototype.resetRender = function() {
        this.imgLoaders.forEach(function(t) {
            return t.dealloc()
        }),
        this.imgLoaders = [],
        this.getRootElement().removeAttribute("style")
    }
    ,
    UTCustomBrickItemView.prototype.renderShell = function(t, e) {}
    ,
    UTCustomBrickItemView.prototype.canRender = function(t) {
        return t.isCustomBrick()
    }
    ,
    UTCustomBrickItemView.prototype.getAssetDimensions = function(t, e) {
        return new UTItemCanvasDTO({
            dynamic: e,
            height: 0,
            width: 0,
            xPos: 0,
            yPos: 0
        })
    }
    ,
    UTCustomBrickItemView
}(UTItemView)
  , UTLargeCustomBrickItemView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTLargeCustomBrickItemView() {
        return t.call(this) || this
    }
    return __extends(UTLargeCustomBrickItemView, t),
    UTLargeCustomBrickItemView
}(UTCustomBrickItemView));
UTLargeCustomBrickItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("custom-brick"),
        t.classList.add("large"),
        t.classList.add("item"),
        this.__root = t,
        this._generated = !0
    }
}
,
UTLargeCustomBrickItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTLargeCustomBrickItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTKitItemView = function(t) {
    function UTKitItemView() {
        return t.call(this) || this
    }
    return __extends(UTKitItemView, t),
    UTKitItemView.prototype.init = function() {
        t.prototype.init.call(this),
        this._mainImage && (this._mainImage.placeholderURL = AssetLocationUtils.getKitImageUri(KitType.HOME, UTItemEntity.DEFAULT_ASSET_ID)),
        this._badgeImage && (this._badgeImage.placeholderURL = AssetLocationUtils.getBadgeImageUri(UTItemEntity.DEFAULT_ASSET_ID)),
        this._flagImage && (this._flagImage.placeholderURL = AssetLocationUtils.getFlagImageUri(UTItemEntity.DEFAULT_ASSET_ID))
    }
    ,
    UTKitItemView.onImageLoad = function(t, e, i, r) {
        if (t.unobserve(this),
        !e) {
            var n = UTItemEntity.DEFAULT_ASSET_ID;
            i.replaceAndShowResource(r.replace(/j(\d+)_\d+_\d+\.png/, "j$1_" + n + "_" + n + ".png"))
        }
    }
    ,
    UTKitItemView.prototype.renderItem = function(t, e) {
        var i = t.getStaticData()
          , r = i instanceof UTStaticKitItemDataDTO ? i.kitType : KitType.HOME
          , n = e.getExpColorMap(t.getTier());
        if (n && this.applyColors(".iconClub", n.footer),
        this._mainImage) {
            var o = AssetLocationUtils.getKitImageUri(r, t.teamId, i.assetYear);
            this._mainImage.setResource(o, !0).observe(this._mainImage, UTKitItemView.onImageLoad)
        }
        if (this._flagImage && this._flagImage.setResource(AssetLocationUtils.getFlagImageUri(t.nationId), !0).observe(this._flagImage, UTItemView.onFlagImageLoad),
        this._badgeImage) {
            var s = AssetLocationUtils.getBadgeImageUri(t.teamId, enums.UIThemeVariation.LIGHT);
            this._badgeImage.setResource(s, !0).observe(this._badgeImage, UTBadgeItemView.onImageLoad)
        }
    }
    ,
    UTKitItemView.prototype.canRender = function(t) {
        return t.isKit()
    }
    ,
    UTKitItemView.prototype.resetRender = function() {}
    ,
    UTKitItemView.prototype.getAssetDimensions = function(t, e) {
        return new UTItemCanvasDTO({
            dynamic: e,
            height: 0,
            width: 0,
            xPos: 0,
            yPos: 0
        })
    }
    ,
    UTKitItemView
}(UTItemView)
  , UTLargeKitItemView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(o) {
    function UTLargeKitItemView() {
        return o.call(this) || this
    }
    return __extends(UTLargeKitItemView, o),
    UTLargeKitItemView.prototype.renderItem = function(t, e) {
        var i = t.getStaticData();
        o.prototype.renderItem.call(this, t, e);
        var r = t.isSpecial() ? null == e ? void 0 : e.getGuid() : void 0;
        this.setShell(t, ItemViewSize.LARGE, r),
        this.__clubName.textContent = UTLocalizationUtil.teamIdToAbbr15(t.teamId, services.Localization),
        this.__kitText.textContent = i.description;
        var n = e.getExpColorMap(t.getTier());
        n && (this.applyColors(".name", n.name),
        this.applyColors(".clubView .clubRow", n.footer))
    }
    ,
    UTLargeKitItemView
}(UTKitItemView));
UTLargeKitItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("large"),
        t.classList.add("kit"),
        t.classList.add("item");
        var e = document.createElement("div");
        e.classList.add("statusOverlay"),
        t.appendChild(e);
        var i = document.createElement("div");
        i.classList.add("kitOverview"),
        this._flagImage = new UTItemImageView,
        this._flagImage.getRootElement().classList.add("flag"),
        i.appendChild(this._flagImage.getRootElement()),
        this._badgeImage = new UTItemImageView,
        this._badgeImage.getRootElement().classList.add("badge"),
        i.appendChild(this._badgeImage.getRootElement()),
        t.appendChild(i),
        this._mainImage = new UTItemImageView,
        this._mainImage.getRootElement().classList.add("photo"),
        t.appendChild(this._mainImage.getRootElement()),
        this.__clubName = document.createElement("div"),
        this.__clubName.classList.add("name"),
        t.appendChild(this.__clubName);
        var r = document.createElement("div");
        r.classList.add("clubView"),
        this.__kitText = document.createElement("div"),
        this.__kitText.classList.add("clubRow"),
        r.appendChild(this.__kitText),
        t.appendChild(r);
        var n = document.createElement("div");
        n.classList.add("kit"),
        n.classList.add("iconClub"),
        t.appendChild(n),
        this.__root = t,
        this._generated = !0
    }
}
,
UTLargeKitItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._flagImage.destroy(),
    this._badgeImage.destroy(),
    this._mainImage.destroy(),
    this.__clubName = null,
    this.__kitText = null
}
,
UTLargeKitItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTManagerItemView = function(t) {
    function UTManagerItemView() {
        return t.call(this) || this
    }
    return __extends(UTManagerItemView, t),
    UTManagerItemView.prototype.init = function() {
        t.prototype.init.call(this),
        this._bioFlagImage && (this._bioFlagImage.placeholderURL = AssetLocationUtils.getFlagImageUri(UTItemEntity.DEFAULT_ASSET_ID)),
        this._bioLeagueImage && (this._bioLeagueImage.placeholderURL = AssetLocationUtils.getBadgeImageUri(UTItemEntity.DEFAULT_ASSET_ID))
    }
    ,
    UTManagerItemView.onImageLoad = function(t, e, i, r) {
        t.unobserve(this),
        e || i.replaceAndShowResource(r.replace(/\d+\.png/, UTItemEntity.DEFAULT_ASSET_ID + ".png"))
    }
    ,
    UTManagerItemView.prototype.setFlag = function(t) {
        var e = AssetLocationUtils.getFlagImageUri(t.nationId);
        this.assets.set(ItemAssetType.FLAG, this.getAssetDimensions(ItemAssetType.FLAG, !1)),
        this.requestResource(e, ItemAssetType.FLAG, t),
        this._bioFlagImage && this._bioFlagImage.setResource(e)
    }
    ,
    UTManagerItemView.prototype.setLeague = function(t, e) {
        var i = AssetLocationUtils.getLeagueImageUri(t.leagueId, e ? enums.UIThemeVariation.LIGHT : enums.UIThemeVariation.DARK);
        this.assets.set(ItemAssetType.BADGE, this.getAssetDimensions(ItemAssetType.BADGE, !1)),
        this.requestResource(i, ItemAssetType.BADGE, t),
        this._bioLeagueImage && this._bioLeagueImage.setResource(i)
    }
    ,
    UTManagerItemView.prototype.onLoadAssetError = function(t, e) {
        if (t === ItemAssetType.MAIN) {
            var i = void 0;
            i = e.isBronzeRating() ? UTItemEntity.DEFAULT_BRONZE_ASSET_ID : e.isSilverRating() ? UTItemEntity.DEFAULT_SILVER_ASSET_ID : UTItemEntity.DEFAULT_GOLD_ASSET_ID,
            this.requestResource(AssetLocationUtils.getPortraitImageUri(i), ItemAssetType.MAIN, e)
        }
    }
    ,
    UTManagerItemView.prototype.renderItem = function(t, e) {
        if (t.isValid()) {
            var i = e.getExpColorMap(t.getTier());
            i && (this.applyColors(".iconStaff", i.footer),
            this.applyColors(".bioView", i.name)),
            this.__position && (this.__position.textContent = services.Localization.localize("cards.cardfrontlarge.manager")),
            t.concept || !t.isContractExpired() || t.getAuctionData().isSold() || this.addClass(UTItemView.CLASS.CONTRACT_EXPIRED),
            this.assets.set(ItemAssetType.MAIN, this.getAssetDimensions(ItemAssetType.MAIN, !1)),
            this.requestResource(AssetLocationUtils.getPortraitImageUri(t.databaseId), ItemAssetType.MAIN, t, this.onLoadAssetError),
            this.setFlag(t),
            this.setLeague(t, !i || i.useLightCrest)
        }
    }
    ,
    UTManagerItemView.prototype.canRender = function(t) {
        return t.isManager()
    }
    ,
    UTManagerItemView.prototype.resetRender = function() {
        this.removeClass(UTItemView.CLASS.CONTRACT_EXPIRED),
        this.getRootElement().removeAttribute("style"),
        this.assets.clear()
    }
    ,
    UTManagerItemView
}(UTItemView)
  , UTItemCanvasView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTItemCanvasView() {
        var t = e.call(this) || this;
        return t.assets = null,
        t.colormap = null,
        t.ctx = null,
        t.rendered = !1,
        t.size = ItemViewSize.LARGE,
        t
    }
    return __extends(UTItemCanvasView, e),
    Object.defineProperty(UTItemCanvasView.prototype, "hasRendered", {
        get: function() {
            return this.rendered
        },
        enumerable: !1,
        configurable: !0
    }),
    UTItemCanvasView.prototype.init = function() {
        e.prototype.init.call(this);
        var t = this.getRootElement();
        t.style.width = "100%",
        t.style.height = "100%",
        this.ctx = t.getContext("2d"),
        this.ctx && (this.ctx.globalCompositeOperation = "source-over")
    }
    ,
    UTItemCanvasView.prototype.dealloc = function() {
        var t = this.getRootElement();
        t && (t.width = 0,
        t.height = 0),
        this.assets = null,
        this.colormap = null,
        this.ctx = null,
        this.rendered = !1,
        e.prototype.dealloc.call(this)
    }
    ,
    UTItemCanvasView.prototype.setSize = function(t) {
        if (this.ctx) {
            var e = this.getRootElement()
              , i = this.getCanvasScaling();
            (this.size = t) === ItemViewSize.LARGE ? (e.width = 152 * i,
            e.height = 212 * i,
            e.style.width = "152px",
            e.style.height = "212px") : t === ItemViewSize.SMALL && (e.width = 97 * i,
            e.height = 114 * i,
            e.style.width = "100%",
            e.style.height = "100%"),
            this.ctx.scale(i, i)
        }
    }
    ,
    UTItemCanvasView.prototype.setColorMap = function(t) {
        this.colormap = t
    }
    ,
    UTItemCanvasView.prototype.setAssets = function(t) {
        this.assets = t
    }
    ,
    UTItemCanvasView.prototype.clearCanvas = function() {
        if (this.ctx) {
            var t = this.getRootElement();
            this.ctx.globalCompositeOperation = "source-over",
            this.ctx.clearRect(0, 0, t.width, t.height),
            this.rendered = !1
        }
    }
    ,
    UTItemCanvasView.prototype.getWidth = function() {
        var t = this.getRootElement()
          , e = this.getCanvasScaling();
        return t ? t.width / e : 0
    }
    ,
    UTItemCanvasView.prototype.getHeight = function() {
        var t = this.getRootElement()
          , e = this.getCanvasScaling();
        return t ? t.height / e : 0
    }
    ,
    UTItemCanvasView.prototype.drawAsset = function(t, e) {
        if (!e && this.ctx && (e = this.ctx),
        e && this.assets) {
            var i = this.assets.get(t);
            if (!i || !i.element || !i.element.complete)
                return;
            var r = i.element.width || i.width
              , n = i.element.height || i.height;
            e.drawImage(i.element, 0, 0, r, n, i.xPos, i.yPos, i.width, i.height)
        }
    }
    ,
    UTItemCanvasView.prototype.drawSilhouette = function(t, e) {
        if (this.ctx) {
            var i = this.getRootElement()
              , r = document.createElement("canvas")
              , n = r.getContext("2d")
              , o = this.getCanvasScaling();
            r.width = i.width * o,
            r.height = i.height * o,
            n && (n.scale(o, o),
            this.drawAsset(t, n),
            n.globalCompositeOperation = "source-atop",
            n.fillStyle = "rgba(" + e.r + ", " + e.g + ", " + e.b + ", 1)",
            n.fillRect(0, 0, r.width, r.height),
            this.ctx.drawImage(r, 0, 0, r.width, r.height, 0, 0, i.width, i.height))
        }
    }
    ,
    UTItemCanvasView.prototype.drawBgColor = function() {
        this.ctx && this.colormap && this.drawSilhouette(ItemAssetType.SHELL, this.colormap.background)
    }
    ,
    UTItemCanvasView.prototype.drawDivider = function(t, e, i, r) {
        if (DebugUtils.Assert(JSUtils.isValid(this.colormap), "Color map is not defined when attempting to draw dividers."),
        this.ctx && this.colormap) {
            var n = this.colormap.dividers;
            this.ctx.beginPath(),
            this.ctx.moveTo(t, e),
            this.ctx.lineTo(i, r),
            this.ctx.strokeStyle = "rgba(" + n.r + ", " + n.g + ", " + n.b + ", 1)",
            this.ctx.stroke()
        }
    }
    ,
    UTItemCanvasView.prototype.maskItem = function() {
        this.ctx && (this.ctx.globalAlpha = 0,
        this.drawAsset(ItemAssetType.SHELL),
        this.ctx.globalCompositeOperation = "source-atop",
        this.ctx.globalAlpha = 1)
    }
    ,
    UTItemCanvasView.prototype.resetMask = function() {
        this.ctx && (this.ctx.globalCompositeOperation = "source-over")
    }
    ,
    UTItemCanvasView.prototype.getCanvasScaling = function() {
        return 1 === window.devicePixelRatio ? 1.5 * window.devicePixelRatio : window.devicePixelRatio
    }
    ,
    UTItemCanvasView
}(UTView));
UTItemCanvasView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("canvas");
        this.__root = t,
        this._generated = !0
    }
}
,
UTItemCanvasView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTItemCanvasView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTItemManagerCanvasView = function(t) {
    function UTItemManagerCanvasView() {
        return t.call(this) || this
    }
    return __extends(UTItemManagerCanvasView, t),
    UTItemManagerCanvasView.prototype.renderMainView = function() {
        if (this.drawAsset(ItemAssetType.SHELL),
        this.drawAsset(ItemAssetType.MAIN),
        this.drawAsset(ItemAssetType.FLAG),
        this.drawAsset(ItemAssetType.BADGE),
        this.size === ItemViewSize.LARGE) {
            this.drawDivider(34, 130.5, 117, 130.5);
            this.drawDivider(66, 175.5, 85, 175.5),
            this.drawDivider(36, 66, 49, 66),
            this.drawDivider(36, 85, 49, 85)
        }
    }
    ,
    UTItemManagerCanvasView.prototype.renderBioView = function() {
        if (this.drawAsset(ItemAssetType.SHELL),
        this.drawBgColor(),
        this.size === ItemViewSize.LARGE) {
            var t = (this.getWidth() - 1) / 2
              , e = 26
              , i = 126;
            this.drawDivider(e, 55.5, i, 55.5),
            this.drawDivider(e, 81.5, i, 81.5),
            this.drawDivider(e, 108.5, i, 108.5),
            this.drawDivider(e, 134.5, i, 134.5),
            this.drawDivider(e, 160.5, i, 160.5),
            i = e = t - 10.5,
            this.drawDivider(e, 175.5, i, 175.5)
        } else if (this.size === ItemViewSize.SMALL) {
            e = 17,
            i = 79.6;
            this.drawDivider(e, 26.4, i, 26.4),
            this.drawDivider(e, 45.7, i, 45.7),
            this.drawDivider(e, 64.7, i, 64.7),
            this.drawDivider(e, 84.4, i, 84.4)
        }
    }
    ,
    UTItemManagerCanvasView.prototype.setState = function(t) {
        switch (this.clearCanvas(),
        t) {
        case UIItemInfoState.MAIN:
        case UIItemInfoState.STATS:
            this.renderMainView();
            break;
        case UIItemInfoState.BIO:
        case UIItemInfoState.STYLE:
        case UIItemInfoState.STRENGTH:
            this.renderBioView()
        }
        this.rendered = !0
    }
    ,
    UTItemManagerCanvasView
}(UTItemCanvasView)
  , UTLargeManagerItemView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(s) {
    function UTLargeManagerItemView() {
        return s.call(this) || this
    }
    return __extends(UTLargeManagerItemView, s),
    UTLargeManagerItemView.prototype.init = function() {
        s.prototype.init.call(this),
        this._canvas.init()
    }
    ,
    UTLargeManagerItemView.prototype.setItemInfoState = function(t) {
        DOMKit.toggleDisplayStyle(this.__position, t === UIItemInfoState.MAIN || t === UIItemInfoState.STATS),
        DOMKit.toggleDisplayStyle(this.__mainViewDiv, t === UIItemInfoState.MAIN || t === UIItemInfoState.STATS),
        DOMKit.toggleDisplayStyle(this.__bioViewDiv, t !== UIItemInfoState.MAIN && t !== UIItemInfoState.STATS),
        DOMKit.toggleClass(this.__itemName, "main-view", t === UIItemInfoState.MAIN || t === UIItemInfoState.STATS),
        this._canvas.hasRendered && this._canvas.setState(t)
    }
    ,
    UTLargeManagerItemView.prototype.renderItem = function(t, e) {
        var i = services.Localization
          , r = t.getStaticData()
          , n = t.isValid()
          , o = e.getExpColorMap(t.getTier());
        s.prototype.renderItem.call(this, t, e),
        this._canvas && (this._canvas.setSize(ItemViewSize.LARGE),
        o && this._canvas.setColorMap(o)),
        n && this.setShell(t, ItemViewSize.LARGE),
        this.__itemName.textContent = r.name,
        this.__managerText.textContent = i.localize("cards.cardfront.manager"),
        n && o && (this.applyColors(".position", o.header),
        this.applyColors(".name", o.name),
        this.applyColors(".mainView .infoRow", o.footer)),
        this.__managerNation.textContent = UTLocalizationUtil.nationIdToName(t.nationId, i),
        this.__managerLeague.textContent = UTLocalizationUtil.leagueIdToName(t.leagueId, i),
        this.__managerNegotiationTitle.textContent = i.localize("cards.cardfront.negotiations"),
        this.__managerNegotiation.textContent = i.localize("common.percentage", [r.amount.toString()]),
        this.__managerContractTitle.textContent = i.localize("cards.cardfront.contracts"),
        this.__managerContract.textContent = i.localizeNumber(t.contract),
        n && o && this.applyColors(".bioView .infoRow", o.footer)
    }
    ,
    UTLargeManagerItemView.prototype.getAssetDimensions = function(t, e) {
        e = e || !1;
        var i = 0
          , r = 0
          , n = 0
          , o = 0;
        return t === ItemAssetType.MAIN ? (r = i = 73,
        n = 55,
        o = 37) : t === ItemAssetType.BADGE ? (r = i = 18,
        n = 34,
        o = 88) : t === ItemAssetType.FLAG ? (i = 18,
        r = 13,
        n = 34,
        o = 69) : t === ItemAssetType.SHELL && (i = 152,
        r = 212),
        new UTItemCanvasDTO({
            dynamic: e,
            height: r,
            width: i,
            xPos: n,
            yPos: o
        })
    }
    ,
    UTLargeManagerItemView
}(UTManagerItemView));
UTLargeManagerItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("large"),
        t.classList.add("manager"),
        t.classList.add("staff"),
        t.classList.add("item"),
        this._canvas = new UTItemManagerCanvasView,
        this._canvas.width = "152",
        this._canvas.height = "212",
        t.appendChild(this._canvas.getRootElement());
        var e = document.createElement("div");
        e.classList.add("statusOverlay"),
        t.appendChild(e),
        this.__infoTab = document.createElement("div"),
        this.__infoTab.classList.add("infoTab"),
        t.appendChild(this.__infoTab),
        this.__position = document.createElement("div"),
        this.__position.classList.add("position"),
        t.appendChild(this.__position),
        this.__itemName = document.createElement("div"),
        this.__itemName.classList.add("name"),
        t.appendChild(this.__itemName),
        this.__mainViewDiv = document.createElement("div"),
        this.__mainViewDiv.classList.add("mainView"),
        this.__managerText = document.createElement("div"),
        this.__managerText.classList.add("infoRow"),
        this.__mainViewDiv.appendChild(this.__managerText),
        t.appendChild(this.__mainViewDiv),
        this.__bioViewDiv = document.createElement("div"),
        this.__bioViewDiv.classList.add("bioView");
        var i = document.createElement("div");
        i.classList.add("ut-item-row");
        var r = document.createElement("span");
        r.classList.add("ut-item-row-label--left"),
        r.classList.add("ut-item-row-label"),
        this._bioFlagImage = new UTItemImageView,
        r.appendChild(this._bioFlagImage.getRootElement()),
        i.appendChild(r),
        this.__managerNation = document.createElement("span"),
        this.__managerNation.classList.add("ut-item-row-label--right"),
        this.__managerNation.classList.add("ut-item-row-label"),
        i.appendChild(this.__managerNation),
        this.__bioViewDiv.appendChild(i);
        var n = document.createElement("div");
        n.classList.add("ut-item-row");
        var o = document.createElement("span");
        o.classList.add("ut-item-row-label--left"),
        o.classList.add("ut-item-row-label"),
        this._bioLeagueImage = new UTItemImageView,
        o.appendChild(this._bioLeagueImage.getRootElement()),
        n.appendChild(o),
        this.__managerLeague = document.createElement("span"),
        this.__managerLeague.classList.add("ut-item-row-label--right"),
        this.__managerLeague.classList.add("ut-item-row-label"),
        n.appendChild(this.__managerLeague),
        this.__bioViewDiv.appendChild(n);
        var s = document.createElement("div");
        s.classList.add("ut-item-row"),
        this.__managerNegotiationTitle = document.createElement("span"),
        this.__managerNegotiationTitle.classList.add("ut-item-row-label--left"),
        this.__managerNegotiationTitle.classList.add("ut-item-row-label"),
        s.appendChild(this.__managerNegotiationTitle),
        this.__managerNegotiation = document.createElement("span"),
        this.__managerNegotiation.classList.add("ut-item-row-label--right"),
        this.__managerNegotiation.classList.add("ut-item-row-label"),
        s.appendChild(this.__managerNegotiation),
        this.__bioViewDiv.appendChild(s);
        var a = document.createElement("div");
        a.classList.add("ut-item-row"),
        this.__managerContractTitle = document.createElement("span"),
        this.__managerContractTitle.classList.add("ut-item-row-label--left"),
        this.__managerContractTitle.classList.add("ut-item-row-label"),
        a.appendChild(this.__managerContractTitle),
        this.__managerContract = document.createElement("span"),
        this.__managerContract.classList.add("ut-item-row-label--right"),
        this.__managerContract.classList.add("ut-item-row-label"),
        a.appendChild(this.__managerContract),
        this.__bioViewDiv.appendChild(a),
        t.appendChild(this.__bioViewDiv);
        var l = document.createElement("div");
        l.classList.add("manager"),
        l.classList.add("iconStaff"),
        t.appendChild(l),
        this.__root = t,
        this._generated = !0
    }
}
,
UTLargeManagerItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._canvas.destroy(),
    this.__infoTab = null,
    this.__position = null,
    this.__itemName = null,
    this.__mainViewDiv = null,
    this.__managerText = null,
    this.__bioViewDiv = null,
    this._bioFlagImage.destroy(),
    this.__managerNation = null,
    this._bioLeagueImage.destroy(),
    this.__managerLeague = null,
    this.__managerNegotiationTitle = null,
    this.__managerNegotiation = null,
    this.__managerContractTitle = null,
    this.__managerContract = null
}
,
UTLargeManagerItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTMiscItemView = function(t) {
    function UTMiscItemView() {
        return t.call(this) || this
    }
    return __extends(UTMiscItemView, t),
    UTMiscItemView.prototype.getImageUrl = function(t, e) {
        return AssetLocationUtils.getMiscImageUri(t, e)
    }
    ,
    UTMiscItemView.prototype.renderItem = function(t, e) {
        var i = t.getStaticData();
        t.isPlayerPickItem() ? DOMKit.addClass(this.getRootElement(), "player-pick") : (this.__itemIcon && (t.isFreeCoins() ? DOMKit.addClass(this.__itemIcon, "freeCoins") : t.isDraftToken() ? DOMKit.addClass(this.__itemIcon, "draftToken") : t.isFreePack() && DOMKit.addClass(this.__itemIcon, "freePack")),
        this._mainImage && this._mainImage.setResource(this.getImageUrl(t.subtype, i.assetId)))
    }
    ,
    UTMiscItemView.prototype.canRender = function(t) {
        return t.isMiscItem()
    }
    ,
    UTMiscItemView.prototype.resetRender = function() {
        this.__itemIcon && DOMKit.removeClass(this.__itemIcon, "freeCoins draftToken freePack"),
        DOMKit.removeClass(this.getRootElement(), "player-pick"),
        this.getRootElement().removeAttribute("style"),
        this._mainImage && this._mainImage.clearResource()
    }
    ,
    UTMiscItemView.prototype.getAssetDimensions = function(t, e) {
        return new UTItemCanvasDTO({
            dynamic: e,
            height: 0,
            width: 0,
            xPos: 0,
            yPos: 0
        })
    }
    ,
    UTMiscItemView
}(UTItemView)
  , UTLargeMiscItemView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(o) {
    function UTLargeMiscItemView() {
        return o.call(this) || this
    }
    return __extends(UTLargeMiscItemView, o),
    UTLargeMiscItemView.prototype.renderItem = function(t, e) {
        var i = t.getStaticData()
          , r = ""
          , n = "";
        o.prototype.renderItem.call(this, t, e),
        n = t.isPlayerPickItem() ? services.Localization.localize("card.title.playerpicks") : (this.setShell(t, ItemViewSize.LARGE),
        i.name),
        t.isFreeCoins() ? r = services.Localization.localize("card.desc.misc.coins", [i.amount.toString()]) : t.isDraftToken() ? r = services.Localization.localize("card.desc.misc.drafttoken") : t.isFreePack() && (r = i.hasLoanPackDescription() ? services.Localization.localize("card.desc.FreeLoanPackDesc") : t.isBronzeRating() ? services.Localization.localize("card.desc.freebronze") : t.isSilverRating() ? services.Localization.localize("card.desc.freesilver") : services.Localization.localize("card.desc.freegold")),
        this.__itemName.textContent = n,
        this.__itemDesc.textContent = r
    }
    ,
    UTLargeMiscItemView
}(UTMiscItemView));
UTLargeMiscItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("large"),
        t.classList.add("misc"),
        t.classList.add("item");
        var e = document.createElement("div");
        e.classList.add("statusOverlay"),
        t.appendChild(e),
        this._mainImage = new UTImageView,
        this._mainImage.getRootElement().classList.add("photo"),
        t.appendChild(this._mainImage.getRootElement());
        var i = document.createElement("div");
        i.classList.add("ut-item-misc-details"),
        this.__itemName = document.createElement("div"),
        this.__itemName.classList.add("name"),
        i.appendChild(this.__itemName);
        var r = document.createElement("div");
        r.classList.add("infoView"),
        this.__itemDesc = document.createElement("div"),
        this.__itemDesc.classList.add("line"),
        r.appendChild(this.__itemDesc),
        i.appendChild(r),
        this.__itemIcon = document.createElement("div"),
        this.__itemIcon.classList.add("iconConsumable"),
        i.appendChild(this.__itemIcon),
        t.appendChild(i),
        this.__root = t,
        this._generated = !0
    }
}
,
UTLargeMiscItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._mainImage.destroy(),
    this.__itemName = null,
    this.__itemDesc = null,
    this.__itemIcon = null
}
,
UTLargeMiscItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPlayerItemView = function(e) {
    function UTPlayerItemView() {
        var t = e.call(this) || this;
        return t.chemDisplay = null,
        t
    }
    return __extends(UTPlayerItemView, e),
    UTPlayerItemView.prototype.dealloc = function() {
        var t;
        null === (t = this.chemDisplay) || void 0 === t || t.dealloc(),
        this.chemDisplay = null,
        e.prototype.dealloc.call(this)
    }
    ,
    UTPlayerItemView.prototype.init = function() {
        e.prototype.init.call(this),
        this._bioNationPoints.setDisplay(!1),
        this._bioLeaguePoints.setDisplay(!1),
        this._bioClubPoints.setDisplay(!1)
    }
    ,
    UTPlayerItemView.onImageLoad = function(t, e, i, r) {
        t.unobserve(this),
        e || i.replaceAndShowResource(r.replace(/\d+\.png/, UTItemEntity.DEFAULT_ASSET_ID + ".png"))
    }
    ,
    UTPlayerItemView.prototype.renderChemistryBreakdown = function(i, t, e, r) {
        var n = this;
        [0, 1, 2, 3, 4, 5].forEach(function(t) {
            var e = n["_barSet" + (t + 1)];
            e && e.setChemistryBoost(i)
        }, this),
        this._bioNationPoints.render(t, 0),
        this._bioLeaguePoints.render(e, 0),
        this._bioClubPoints.render(r, 0)
    }
    ,
    UTPlayerItemView.prototype.renderChemistryPoints = function(t) {
        this.chemDisplay && this.chemDisplay.removeFromSuperview(),
        this.chemDisplay = t,
        this.addSubview(this.chemDisplay),
        this.layoutSubviews()
    }
    ,
    UTPlayerItemView.prototype.renderItem = function(e, t) {
        if (e.isValid()) {
            var i = t.getExpColorMap(e.getTier())
              , r = e.isContractExpired() && !e.getAuctionData().isSold() && !e.isLoaned();
            if (!e.concept && this.renderRestrictions && (e.pile !== ItemPile.ANY && (e.isInjured() ? this.addClass(UTItemView.CLASS.INJURED) : r ? this.addClass(UTItemView.CLASS.CONTRACT_EXPIRED) : e.isSuspended() && this.addClass(UTItemView.CLASS.SUSPENDED)),
            e.isLimitedTimePlayer() && this.addClass(UTItemView.CLASS.TIME_LIMITED)),
            this.toggleClass(UTItemView.CLASS.CHAMPIONS, e.isChampionsLeagueItem() && !services.Localization.locale.isRTL()),
            this.toggleClass(UTItemView.CLASS.LOAN, e.isLoaned()),
            e.isLoaned() && this.__loanInfoTab && (this.__loanInfoTab.textContent = e.contract.toString()),
            this.__playerPosition && (this.__playerPosition.textContent = UTLocalizationUtil.positionIdToName(e.preferredPosition, services.Localization)),
            this.__playerRating && (this.__playerRating.textContent = e.rating.toString()),
            this.__biofirstOwner) {
                var n = 1 < e.owners;
                this.__biofirstOwner.style.display = n ? "none" : ""
            }
            this.setPortrait(e),
            this.setRank(e),
            this.setFlag(e),
            this.setBadge(e, !i || i.useLightCrest),
            this.setLeague(e, !i || i.useLightCrest),
            this.__bioNation && (this.__bioNation.textContent = UTLocalizationUtil.nationIdToAbbr3(e.nationId, services.Localization)),
            this.__bioClub && (this.__bioClub.textContent = UTLocalizationUtil.teamIdToAbbr3(e.teamId, services.Localization)),
            this.__bioLeague && (this.__bioLeague.textContent = UTLocalizationUtil.leagueIdToAbbr5(e.leagueId, services.Localization)),
            this.setSkillMoves(e.getSkillMoves()),
            this.setWeakFoot(e.isLeftFoot(), e.getWeakFoot());
            var o = UTLocalizationUtil.positionIdToName(e.preferredPosition, services.Localization);
            this.__strPlayerPosition.textContent = o,
            this.__strPlayerAltPositions.classList.remove(UTItemView.CLASS.NO_ALTS),
            this.__strPlayerPosition.classList.remove(UTItemView.CLASS.NO_ALTS);
            var s = e.possiblePositions.filter(function(t) {
                return t !== e.preferredPosition
            }).map(function(t) {
                return UTLocalizationUtil.positionIdToName(t, services.Localization)
            });
            0 === s.length ? (this.__strPlayerAltPositions.textContent = "",
            this.__strPlayerAltPositions.classList.add(UTItemView.CLASS.NO_ALTS),
            this.__strPlayerPosition.classList.add(UTItemView.CLASS.NO_ALTS)) : 3 < s.length ? this.__strPlayerAltPositions.textContent = ", " + s.slice(0, 3).join(", ") : this.__strPlayerAltPositions.textContent = this instanceof UTSmallPlayerItemView ? ", " + s.join(", ") : s.join(", ")
        }
    }
    ,
    UTPlayerItemView.prototype.canRender = function(t) {
        return t.isPlayer() && !t.isCustomBrick()
    }
    ,
    UTPlayerItemView.prototype.resetRender = function() {
        this.removeClass([UTItemView.CLASS.CONTRACT_EXPIRED, UTItemView.CLASS.SUSPENDED, UTItemView.CLASS.INJURED, UTItemView.CLASS.TIME_LIMITED].join(" ")),
        this.removeClass(UTItemView.CLASS.LOAN),
        this.removeClass(UTItemView.CLASS.CHAMPIONS),
        this.__loanInfoTab && (this.__loanInfoTab.textContent = ""),
        this.getRootElement().removeAttribute("style"),
        this.assets.clear(),
        this._canvas && this._canvas.clearCanvas()
    }
    ,
    UTPlayerItemView.prototype.createConceptRarity = function() {
        return new UTItemRarityDTO({
            colors: [parseInt("d2e2f6", 16), parseInt("a8b7c9", 16), parseInt("4b5e78", 16), parseInt("7a899d", 16)],
            lgColorIndices: [1, 1, 1, 1, 2, 2, 3, 4, 4],
            smColorIndices: [1, 1, 1, 1, 2, 2, 3, 4, 4],
            bigHead: !1,
            hide: !0,
            id: -1,
            levels: !1,
            name: "Concept",
            shell: 0,
            version: 1
        })
    }
    ,
    UTPlayerItemView.prototype.applyChevrons = function(t) {
        var r = this;
        DebugUtils.Assert(6 === t.length, "Expected 6 entries in chevronList array."),
        t.slice(0, 6).forEach(function(t, e) {
            var i = r["_barSet" + (e + 1)];
            i && (i.setBarCount(t),
            i.setChemistryBoost(0))
        }, this)
    }
    ,
    UTPlayerItemView.prototype.applySubAttributes = function(t) {}
    ,
    UTPlayerItemView.prototype.onLoadDynamicPortraitError = function(t, e) {
        t === ItemAssetType.MAIN && (this.assets.set(ItemAssetType.MAIN, this.getAssetDimensions(ItemAssetType.MAIN, !1)),
        this.requestResource(AssetLocationUtils.getPortraitImageUri(this.getItemAssetId(e.databaseId)), ItemAssetType.MAIN, e))
    }
    ,
    UTPlayerItemView.prototype.onLoadAssetError = function(t, e) {
        if (t === ItemAssetType.MAIN) {
            var i = void 0;
            return i = e.isBronzeRating() ? UTItemEntity.DEFAULT_BRONZE_ASSET_ID : e.isSilverRating() ? UTItemEntity.DEFAULT_SILVER_ASSET_ID : UTItemEntity.DEFAULT_GOLD_ASSET_ID,
            void this.requestResource(AssetLocationUtils.getPortraitImageUri(this.getItemAssetId(i)), ItemAssetType.MAIN, e)
        }
        this.assetsLoaded.set(t, !1),
        this.onLoadComplete()
    }
    ,
    UTPlayerItemView.prototype.getItemAssetId = function(t) {
        return UTItemEntity.isAlex(t) ? t = ALEX_HUNTER_PLACEHOLDER_ASSET_ID : UTItemEntity.isJim(t) ? t = JIM_HUNTER_PLACEHOLDER_ASSET_ID : UTItemEntity.isDanny(t) && (t = DANNY_WILLIAMS_PLACEHOLDER_ASSET_ID),
        t
    }
    ,
    UTPlayerItemView.prototype.setPortrait = function(t) {
        if (this._canvas) {
            var e = 0 < t.guidAssetId.length && t.isSpecial() && !UTItemEntity.isStoryMode(t.databaseId)
              , i = e ? AssetLocationUtils.getPortraitImageUri(t.definitionId, t.guidAssetId) : AssetLocationUtils.getPortraitImageUri(this.getItemAssetId(t.databaseId))
              , r = e ? this.onLoadDynamicPortraitError : this.onLoadAssetError;
            this.assets.set(ItemAssetType.MAIN, this.getAssetDimensions(ItemAssetType.MAIN, e)),
            this.requestResource(i, ItemAssetType.MAIN, t, r)
        }
    }
    ,
    UTPlayerItemView.prototype.setFlag = function(t) {
        var e = AssetLocationUtils.getFlagImageUri(t.nationId);
        this._canvas && (this.assets.set(ItemAssetType.FLAG, this.getAssetDimensions(ItemAssetType.FLAG, !1)),
        this.requestResource(e, ItemAssetType.FLAG, t),
        this._bioFlagImage && this._bioFlagImage.setResource(e))
    }
    ,
    UTPlayerItemView.prototype.setBadge = function(t, e) {
        var i = AssetLocationUtils.getBadgeImageUri(t.teamId, e ? enums.UIThemeVariation.LIGHT : enums.UIThemeVariation.DARK);
        this._canvas && (t.isLeagueHeroItem() || (this.assets.set(ItemAssetType.BADGE, this.getAssetDimensions(ItemAssetType.BADGE, !1)),
        this.requestResource(i, ItemAssetType.BADGE, t)),
        this._bioBadgeImage && this._bioBadgeImage.setResource(i))
    }
    ,
    UTPlayerItemView.prototype.setRank = function(t) {
        if (this._canvas && t.hasRank()) {
            var e = AssetLocationUtils.getPlayerRatingUri(t.rankId);
            this.assets.set(ItemAssetType.RANK, this.getAssetDimensions(ItemAssetType.RANK, !1)),
            this.requestResource(e, ItemAssetType.RANK, t)
        }
    }
    ,
    UTPlayerItemView.prototype.setLeague = function(t, e) {
        var i = AssetLocationUtils.getLeagueImageUri(t.leagueId, e ? enums.UIThemeVariation.LIGHT : enums.UIThemeVariation.DARK);
        this._canvas && (t.isLeagueHeroItem() && (this.assets.set(ItemAssetType.BADGE, this.getAssetDimensions(ItemAssetType.BADGE, !1)),
        this.requestResource(i, ItemAssetType.BADGE, t)),
        this._bioLeagueImage && this._bioLeagueImage.setResource(i))
    }
    ,
    UTPlayerItemView.prototype.generateWorkRateHALString = function(t) {
        return 2 <= t ? "extendedPlayerInfo.workrate.high" : 1 <= t ? "extendedPlayerInfo.workrate.low" : "extendedPlayerInfo.workrate.medium"
    }
    ,
    UTPlayerItemView
}(UTItemView)
  , UTItemStatBarsView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTItemStatBarsView() {
        return t.call(this) || this
    }
    return __extends(UTItemStatBarsView, t),
    UTItemStatBarsView.prototype.setBarCount = function(i) {
        DOMKit.HTMLCollectionToArray(this.getRootElement().children).reverse().forEach(function(t, e) {
            DOMKit.toggleClass(t, "enabled", e < i)
        })
    }
    ,
    UTItemStatBarsView.prototype.setChemistryBoost = function(t) {
        DOMKit.toggleClass(this.getRootElement(), "chem-points-0", 0 === t)
    }
    ,
    UTItemStatBarsView.prototype.applyStatBarColors = function(t) {
        this.__bar1.style.backgroundColor = "transparent",
        this.__bar2.style.backgroundColor = "transparent",
        this.__bar3.style.backgroundColor = "transparent",
        this.__bar1.classList.contains("enabled") && (this.__bar1.style.backgroundColor = "rgba(" + t.r + ", " + t.g + ", " + t.b + ", 1)"),
        this.__bar2.classList.contains("enabled") && (this.__bar2.style.backgroundColor = "rgba(" + t.r + ", " + t.g + ", " + t.b + ", 1)"),
        this.__bar3.classList.contains("enabled") && (this.__bar3.style.backgroundColor = "rgba(" + t.r + ", " + t.g + ", " + t.b + ", 1)")
    }
    ,
    UTItemStatBarsView
}(UTView));
UTItemStatBarsView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("bars"),
        this.__bar1 = document.createElement("div"),
        this.__bar1.classList.add("bar1"),
        this.__bar1.classList.add("bar"),
        t.appendChild(this.__bar1),
        this.__bar2 = document.createElement("div"),
        this.__bar2.classList.add("bar2"),
        this.__bar2.classList.add("bar"),
        t.appendChild(this.__bar2),
        this.__bar3 = document.createElement("div"),
        this.__bar3.classList.add("bar3"),
        this.__bar3.classList.add("bar"),
        t.appendChild(this.__bar3),
        this.__root = t,
        this._generated = !0
    }
}
,
UTItemStatBarsView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__bar1 = null,
    this.__bar2 = null,
    this.__bar3 = null
}
,
UTItemStatBarsView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTItemPlayerCanvasView = function(e) {
    function UTItemPlayerCanvasView() {
        var t = e.call(this) || this;
        return t.renderConcept = !1,
        t.renderSpecial = !1,
        t
    }
    return __extends(UTItemPlayerCanvasView, e),
    UTItemPlayerCanvasView.prototype.renderAsDynamic = function() {
        if (this.assets) {
            var t = this.assets.get(ItemAssetType.MAIN);
            if (t && t.element && t.element.complete)
                return this.renderSpecial && !this.renderConcept && t.dynamic
        }
        return !1
    }
    ,
    UTItemPlayerCanvasView.prototype.drawArc = function() {
        if (this.ctx && this.renderSpecial && this.size !== ItemViewSize.SMALL) {
            var t = this.getWidth()
              , e = this.getHeight();
            this.maskItem(),
            this.ctx.beginPath(),
            this.ctx.moveTo(0, e / 1.1),
            this.ctx.quadraticCurveTo(t / 1.1, e / 1.75, t - 29, 0),
            this.ctx.quadraticCurveTo(t, 0, t, 0),
            this.ctx.quadraticCurveTo(t, e, t, e + 20),
            this.ctx.fillStyle = "rgba(0, 0, 0, 0.10)",
            this.ctx.fill(),
            this.resetMask()
        }
    }
    ,
    UTItemPlayerCanvasView.prototype.drawTransparentBar = function() {
        if (DebugUtils.Assert(JSUtils.isValid(this.colormap), "Color map is not defined when attempting to draw transparent bar."),
        this.ctx && this.colormap && this.renderSpecial) {
            var t, e, i = this.getHeight(), r = this.ctx.createLinearGradient(0, 0, 24, i), n = this.colormap.background, o = "rgba(" + n.r + ", " + n.g + ", " + n.b + ", 0.675)", s = "rgba(" + n.r + ", " + n.g + ", " + n.b + ", 0)";
            this.maskItem(),
            r.addColorStop(0, s),
            r.addColorStop(.1, s),
            r.addColorStop(.333, o),
            r.addColorStop(.666, o),
            r.addColorStop(.9, s),
            r.addColorStop(1, s),
            e = this.size === ItemViewSize.LARGE ? (t = 30,
            27) : (t = 13,
            20),
            this.ctx.beginPath(),
            this.ctx.fillStyle = r,
            this.ctx.fillRect(t, 0, e, i),
            this.resetMask()
        }
    }
    ,
    UTItemPlayerCanvasView.prototype.smallViewAlternateViewLines = function(t) {
        if (void 0 === t && (t = UIItemInfoState.MAIN),
        this.size !== ItemViewSize.LARGE) {
            t === UIItemInfoState.STRENGTH ? (this.drawDivider(17, 37.5, 79.6, 37.5),
            this.drawDivider(17, 55.5, 79.6, 55.5),
            this.drawDivider(17, 73.5, 79.6, 73.5)) : (this.drawDivider(17, 29.5, 79.6, 29.5),
            this.drawDivider(17, 47.5, 79.6, 47.5),
            this.drawDivider(17, 65.5, 79.6, 65.5),
            this.drawDivider(17, 83.5, 79.6, 83.5))
        }
    }
    ,
    UTItemPlayerCanvasView.prototype.renderMainView = function() {
        var t, e, i = null !== (e = null === (t = this.colormap) || void 0 === t ? void 0 : t.header) && void 0 !== e ? e : {
            r: 255,
            g: 255,
            b: 255
        };
        if (this.drawAsset(ItemAssetType.SHELL),
        this.maskItem(),
        this.drawAsset(ItemAssetType.MAIN),
        this.resetMask(),
        this.renderAsDynamic() && (this.drawArc(),
        this.drawTransparentBar()),
        this.drawSilhouette(ItemAssetType.RANK, i),
        this.drawAsset(ItemAssetType.BADGE),
        this.drawAsset(ItemAssetType.FLAG),
        this.size === ItemViewSize.LARGE) {
            var r = this.getWidth();
            this.drawDivider(34, 131.5, 117, 131.5),
            this.drawDivider((r - 1) / 2, 135, (r - 1) / 2, 171),
            this.drawDivider(68, 174, 84, 174),
            this.drawDivider(36, 66.5, 51, 66.5),
            this.drawDivider(36, 85.5, 51, 85.5)
        }
    }
    ,
    UTItemPlayerCanvasView.prototype.renderStyleView = function() {
        if (this.drawAsset(ItemAssetType.SHELL),
        this.drawBgColor(),
        this.size === ItemViewSize.SMALL)
            this.smallViewAlternateViewLines();
        else {
            var t = 36
              , e = 116;
            this.drawDivider(t, 110.5, e, 110.5),
            this.drawDivider(t, 130.5, e, 130.5),
            this.drawDivider(75.5, 132.5, 75.5, 172.5),
            this.renderConcept || (t = 65,
            e = 86,
            this.drawDivider(t, 175.5, e, 175.5))
        }
    }
    ,
    UTItemPlayerCanvasView.prototype.renderBioView = function() {
        if (this.drawAsset(ItemAssetType.SHELL),
        this.drawBgColor(),
        this.size === ItemViewSize.SMALL)
            this.smallViewAlternateViewLines();
        else {
            this.drawDivider(26, 55.5, 126, 55.5),
            this.drawDivider(26, 90.5, 126, 90.5),
            this.drawDivider(26, 125.5, 126, 125.5),
            this.drawDivider(26, 160.5, 126, 160.5)
        }
    }
    ,
    UTItemPlayerCanvasView.prototype.renderStatsView = function() {
        if (this.drawAsset(ItemAssetType.SHELL),
        this.drawBgColor(),
        this.size === ItemViewSize.SMALL)
            this.smallViewAlternateViewLines();
        else {
            var t = (this.getWidth() - 1) / 2
              , e = 26
              , i = 126;
            this.drawDivider(e, 55.5, i, 55.5),
            this.drawDivider(e, 78.5, i, 78.5),
            this.drawDivider(e, 101.5, i, 101.5),
            this.drawDivider(e, 124.5, i, 124.5),
            this.renderConcept || (e = t - 10.5,
            i = 10.5 + t,
            this.drawDivider(e, 175.5, i, 175.5))
        }
    }
    ,
    UTItemPlayerCanvasView.prototype.renderStrengthView = function() {
        if (this.drawAsset(ItemAssetType.SHELL),
        this.drawBgColor(),
        this.size === ItemViewSize.SMALL)
            this.smallViewAlternateViewLines(UIItemInfoState.STRENGTH);
        else {
            this.drawDivider(36, 55.5, 116, 55.5),
            this.drawDivider(36, 78.5, 116, 78.5),
            this.drawDivider(36, 101.5, 116, 101.5),
            this.drawDivider(36, 124.5, 116, 124.5),
            this.drawDivider(36, 147.5, 116, 147.5)
        }
    }
    ,
    UTItemPlayerCanvasView.prototype.setState = function(t) {
        switch (this.clearCanvas(),
        t) {
        case UIItemInfoState.STRENGTH:
            this.renderStrengthView();
            break;
        case UIItemInfoState.STYLE:
            this.renderStyleView();
            break;
        case UIItemInfoState.BIO:
            this.renderBioView();
            break;
        case UIItemInfoState.STATS:
            this.renderStatsView();
            break;
        case UIItemInfoState.MAIN:
            this.renderMainView()
        }
        this.rendered = !0
    }
    ,
    UTItemPlayerCanvasView
}(UTItemCanvasView)
  , UTLargePlayerItemView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(f) {
    function UTLargePlayerItemView() {
        return f.call(this) || this
    }
    return __extends(UTLargePlayerItemView, f),
    UTLargePlayerItemView.prototype.init = function() {
        f.prototype.init.call(this),
        this._canvas.init()
    }
    ,
    UTLargePlayerItemView.prototype.setItemInfoState = function(t) {
        DOMKit.toggleDisplayStyle(this.__playStyle, t !== UIItemInfoState.BIO),
        DOMKit.toggleDisplayStyle(this.__mainViewDiv, t === UIItemInfoState.MAIN),
        DOMKit.toggleDisplayStyle(this.__bioViewDiv, t === UIItemInfoState.BIO),
        DOMKit.toggleDisplayStyle(this.__statsViewDiv, t === UIItemInfoState.STATS),
        DOMKit.toggleDisplayStyle(this.__styleViewDiv, t === UIItemInfoState.STYLE),
        DOMKit.toggleDisplayStyle(this.__strengthViewDiv, t === UIItemInfoState.STRENGTH),
        DOMKit.toggleClass(this.__playerName, "main-view", t === UIItemInfoState.MAIN || t === UIItemInfoState.STYLE),
        DOMKit.toggleDisplayStyle(this.__strengthName, t == UIItemInfoState.STRENGTH),
        DOMKit.toggleDisplayStyle(this.__playerName, t !== UIItemInfoState.STRENGTH),
        this._canvas.hasRendered && this._canvas.setState(t)
    }
    ,
    UTLargePlayerItemView.prototype.renderItem = function(o, t) {
        var s = this;
        if (o.isValid()) {
            o.concept ? (t = this.createConceptRarity(),
            this.setLocalShell(o, ItemViewSize.LARGE)) : this.setShell(o, ItemViewSize.LARGE, t.getGuid());
            var i = this.getRootElement()
              , e = o.getStaticData()
              , r = t.getExpColorMap(o.getTier());
            this._canvas && (this._canvas.setSize(ItemViewSize.LARGE),
            r && this._canvas.setColorMap(r),
            this._canvas.renderSpecial = o.isSpecial(),
            this._canvas.renderConcept = o.concept),
            f.prototype.renderItem.call(this, o, t),
            this.__playerName.textContent = e.name;
            var n = o.isGK();
            DOMKit.findElements(i, ".statValue.Pace")[0].innerHTML = o.getAttribute(PlayerAttribute.ONE).toString(),
            DOMKit.findElements(i, ".statValue.Shooting")[0].innerHTML = o.getAttribute(PlayerAttribute.TWO).toString(),
            DOMKit.findElements(i, ".statValue.Passing")[0].innerHTML = o.getAttribute(PlayerAttribute.THREE).toString(),
            DOMKit.findElements(i, ".statValue.Dribbling")[0].innerHTML = o.getAttribute(PlayerAttribute.FOUR).toString(),
            DOMKit.findElements(i, ".statValue.Defending")[0].innerHTML = o.getAttribute(PlayerAttribute.FIVE).toString(),
            DOMKit.findElements(i, ".statValue.Header")[0].innerHTML = o.getAttribute(PlayerAttribute.SIX).toString();
            function ttb(t, e) {
                DOMKit.findElements(i, t).forEach(function(t) {
                    return t.innerHTML = e
                })
            }
            if (ttb(".statLabel.Pace", n ? services.Localization.localize("cards.cardfront.divingAbbr") : services.Localization.localize("cards.cardfront.paceAbbr")),
            ttb(".statLabel.Header", n ? services.Localization.localize("cards.cardfront.positionAbbr") : services.Localization.localize("cards.cardfront.headingAbbr")),
            ttb(".statLabel.Dribbling", n ? services.Localization.localize("cards.cardfront.reflexAbbr") : services.Localization.localize("cards.cardfront.dribblingAbbr")),
            ttb(".statLabel.Shooting", n ? services.Localization.localize("cards.cardfront.handlingAbbr") : services.Localization.localize("cards.cardfront.shootingAbbr")),
            ttb(".statLabel.Defending", n ? services.Localization.localize("cards.cardfront.speedAbbr") : services.Localization.localize("cards.cardfront.defendingAbbr")),
            ttb(".statLabel.Passing", n ? services.Localization.localize("cards.cardfront.kickAbbr") : services.Localization.localize("cards.cardfront.passingAbbr")),
            r && (this.applyColors(".playerOverview", r.header),
            this.applyColors(".name", r.name),
            this.applyColors(".ut-item-view--main .statValue", r.attributeValues),
            this.applyColors(".ut-item-view--main .statLabel", r.footer),
            this.applyColors(".playStyle span", r.playStyleText),
            this.applyColors(".playStyle", r.playStyleIcon)),
            r && this.applyColors(".ut-item-view--bio", r.name),
            DOMKit.removeClass(this.__statsRowContract, UTItemView.CLASS.INVALID_STAT),
            this.renderRestrictions)
                if (o.isSuspended())
                    DOMKit.addClass(this.__statsRowContract, UTItemView.CLASS.INVALID_STAT),
                    DOMKit.toggleDisplayStyle(this.__statsRowInjury, !0),
                    this.__injuryLabel.textContent = services.Localization.localize("item.status.suspended"),
                    this.__injury.textContent = services.Localization.localize("item.status.outnummatches", [o.getCurrentRedCards().toString()]);
                else if (o.isInjured()) {
                    var a = services.Localization.localize("item.status.injured")
                      , l = UTLocalizationUtil.injuryTypeToName(o.injuryType, services.Localization);
                    DOMKit.toggleDisplayStyle(this.__statsRowInjury, !0),
                    this.__injuryLabel.textContent = a + " " + l,
                    this.__injury.textContent = services.Localization.localize("item.status.outnummatches", [o.injuryGames.toString()])
                } else
                    DOMKit.toggleDisplayStyle(this.__statsRowInjury, !1);
            this.__playerContractLabel.textContent = services.Localization.localize("cards.cardfront.contractAbbr"),
            this.__playerContract.textContent = " " + o.contract.toString(),
            r && this.applyColors(".ut-item-view--stats", r.name);
            var c = o.playStyle
              , u = UTLocalizationUtil.playStyleIdToName(c, services.Localization);
            if (DOMKit.addClass(this.__playStyle, "chemstyle" + c),
            o.isValid()) {
                var p = repositories.PlayStyle.getPlayStyleBonusById(c, o.isGK());
                this.applyChevrons(p)
            }
            this.__playStyleName.textContent = u,
            DOMKit.addClass(this.__playStyleLarge, "chemstyle" + c),
            r && (this.applyColors(".ut-item-view--style", r.name),
            this._barSet1.applyStatBarColors(r.attributeValues),
            this._barSet2.applyStatBarColors(r.attributeValues),
            this._barSet3.applyStatBarColors(r.attributeValues),
            this._barSet4.applyStatBarColors(r.attributeValues),
            this._barSet5.applyStatBarColors(r.attributeValues),
            this._barSet6.applyStatBarColors(r.attributeValues));
            var h = services.Localization
              , d = o.getPlayerSubAttributes()
              , _ = [this.__keyAttVal1, this.__keyAttVal2, this.__keyAttVal3, this.__keyAttVal4, this.__keyAttVal5]
              , y = [this.__keyAttLabel1, this.__keyAttLabel2, this.__keyAttLabel3, this.__keyAttLabel4, this.__keyAttLabel5];
            d && 5 <= d.length && d.forEach(function(t, e) {
                if (t.highlight && DOMKit.addClass(_[e], "ut-item-view--strength-key-attribute"),
                t.type === ItemSubAttribute.workrate) {
                    var i = services.Localization.localize(s.generateWorkRateHALString(o.getOffensiveWorkRate()))
                      , r = services.Localization.localize(s.generateWorkRateHALString(o.getDefensiveWorkRate()));
                    _[e].textContent = "",
                    y[e].textContent = i + " / " + r
                } else if (_[e].textContent = t.value().toString(),
                y[e].textContent = h.localize("item.subattribute." + ItemSubAttribute[t.type]),
                t.type === ItemSubAttribute.weakfoot || t.type === ItemSubAttribute.skillmove) {
                    var n = new UTItemImageView;
                    n.setLocalResource("images/star.png"),
                    n.addClass("ut-skill-star"),
                    _[e].prepend(n.getRootElement())
                }
            }),
            r && (this.applyColors(".ut-item-view--strength", r.name),
            this.applyColors(".strength-header", r.name))
        }
    }
    ,
    UTLargePlayerItemView.prototype.resetRender = function() {
        function Mtb(t) {
            return (t.className.match(/(^|\s)chemstyle\S+/g) || []).join(" ")
        }
        var t = this.getRootElement();
        f.prototype.resetRender.call(this),
        DOMKit.findElements(t, ".statLabel").forEach(function(t) {
            return DOMKit.removeClass(t, "gold silver bronze")
        }),
        DOMKit.removeClass(this.__playStyle, Mtb(this.__playStyle)),
        DOMKit.removeClass(this.__playStyleLarge, Mtb(this.__playStyleLarge))
    }
    ,
    UTLargePlayerItemView.prototype.getAssetDimensions = function(t, e) {
        e = e || !1;
        var i = 0
          , r = 0
          , n = 0
          , o = 0;
        return t === ItemAssetType.MAIN ? (i = e ? 113 : 73,
        r = e ? 130 : 73,
        n = e ? 18 : 55,
        o = e ? 31 : 37) : t === ItemAssetType.RANK ? (r = i = 10,
        n = 43,
        o = 22) : t === ItemAssetType.BADGE ? (r = i = 22,
        n = 33,
        o = 87) : t === ItemAssetType.FLAG ? (i = 20,
        r = 12,
        n = 34,
        o = 70) : t === ItemAssetType.SHELL && (i = 152,
        r = 212),
        new UTItemCanvasDTO({
            dynamic: e,
            height: r,
            width: i,
            xPos: n,
            yPos: o
        })
    }
    ,
    UTLargePlayerItemView.prototype.setSkillMoves = function(t) {
        this.__skillMovesLabel.textContent = services.Localization.localize("cards.cardfront.skillMovesAbbr"),
        this.__skillMovesRating.textContent = t.toString()
    }
    ,
    UTLargePlayerItemView.prototype.setWeakFoot = function(t, e) {
        var i = services.Localization.localize("cards.cardfront.weakFootAbbr")
          , r = t ? services.Localization.localize("cards.cardfront.weakFootRightAbbr") : services.Localization.localize("cards.cardfront.weakFootLeftAbbr");
        this.__weakFootLabel.textContent = i + " (" + r + ")",
        this.__weakFootRating.textContent = e.toString()
    }
    ,
    UTLargePlayerItemView
}(UTPlayerItemView));
UTLargePlayerItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("large"),
        t.classList.add("player"),
        t.classList.add("item"),
        this._canvas = new UTItemPlayerCanvasView,
        this._canvas.width = "152",
        this._canvas.height = "212",
        t.appendChild(this._canvas.getRootElement());
        var e = document.createElement("div");
        e.classList.add("ut-item-loader"),
        t.appendChild(e);
        var i = document.createElement("div");
        i.classList.add("statusOverlay"),
        t.appendChild(i);
        var r = document.createElement("div");
        r.classList.add("ut-item-player-status--restricted"),
        r.classList.add("ut-item-player-status"),
        t.appendChild(r),
        this.__playerName = document.createElement("div"),
        this.__playerName.classList.add("name"),
        t.appendChild(this.__playerName),
        this.__strengthName = document.createElement("div"),
        this.__strengthName.classList.add("strength-header"),
        this.__strPlayerPosition = document.createElement("span"),
        this.__strPlayerPosition.classList.add("currentPosition"),
        this.__strengthName.appendChild(this.__strPlayerPosition),
        this.__strPlayerAltPositions = document.createElement("span"),
        this.__strPlayerAltPositions.classList.add("altPositions"),
        this.__strengthName.appendChild(this.__strPlayerAltPositions),
        t.appendChild(this.__strengthName),
        this.__playStyle = document.createElement("div"),
        this.__playStyle.classList.add("playStyle"),
        t.appendChild(this.__playStyle),
        this.__mainViewDiv = document.createElement("div"),
        this.__mainViewDiv.classList.add("ut-item-view--main"),
        this.__mainViewDiv.classList.add("ut-item-view"),
        this.__loanInfoTab = document.createElement("div"),
        this.__loanInfoTab.classList.add("ut-item-player-status--loan"),
        this.__mainViewDiv.appendChild(this.__loanInfoTab);
        var n = document.createElement("div");
        n.classList.add("playerOverview"),
        this.__playerRating = document.createElement("div"),
        this.__playerRating.classList.add("rating"),
        n.appendChild(this.__playerRating),
        this.__playerPosition = document.createElement("div"),
        this.__playerPosition.classList.add("position"),
        n.appendChild(this.__playerPosition),
        this.__mainViewDiv.appendChild(n);
        var o = document.createElement("div");
        o.classList.add("statCellRow");
        var s = document.createElement("div");
        s.classList.add("statCell");
        var a = document.createElement("span");
        a.classList.add("Pace"),
        a.classList.add("statValue"),
        s.appendChild(a),
        this.__attribute0 = document.createElement("span"),
        this.__attribute0.classList.add("Pace"),
        this.__attribute0.classList.add("statLabel"),
        s.appendChild(this.__attribute0),
        o.appendChild(s);
        var l = document.createElement("div");
        l.classList.add("statCell");
        var c = document.createElement("span");
        c.classList.add("Dribbling"),
        c.classList.add("statValue"),
        l.appendChild(c),
        this.__attribute3 = document.createElement("span"),
        this.__attribute3.classList.add("Dribbling"),
        this.__attribute3.classList.add("statLabel"),
        l.appendChild(this.__attribute3),
        o.appendChild(l),
        this.__mainViewDiv.appendChild(o);
        var u = document.createElement("div");
        u.classList.add("statCellRow");
        var p = document.createElement("div");
        p.classList.add("statCell");
        var h = document.createElement("span");
        h.classList.add("Shooting"),
        h.classList.add("statValue"),
        p.appendChild(h),
        this.__attribute1 = document.createElement("span"),
        this.__attribute1.classList.add("Shooting"),
        this.__attribute1.classList.add("statLabel"),
        p.appendChild(this.__attribute1),
        u.appendChild(p);
        var d = document.createElement("div");
        d.classList.add("statCell");
        var _ = document.createElement("span");
        _.classList.add("Defending"),
        _.classList.add("statValue"),
        d.appendChild(_),
        this.__attribute4 = document.createElement("span"),
        this.__attribute4.classList.add("Defending"),
        this.__attribute4.classList.add("statLabel"),
        d.appendChild(this.__attribute4),
        u.appendChild(d),
        this.__mainViewDiv.appendChild(u);
        var y = document.createElement("div");
        y.classList.add("statCellRow");
        var f = document.createElement("div");
        f.classList.add("statCell");
        var m = document.createElement("span");
        m.classList.add("Passing"),
        m.classList.add("statValue"),
        f.appendChild(m),
        this.__attribute2 = document.createElement("span"),
        this.__attribute2.classList.add("Passing"),
        this.__attribute2.classList.add("statLabel"),
        f.appendChild(this.__attribute2),
        y.appendChild(f);
        var T = document.createElement("div");
        T.classList.add("statCell");
        var g = document.createElement("span");
        g.classList.add("Header"),
        g.classList.add("statValue"),
        T.appendChild(g),
        this.__attribute5 = document.createElement("span"),
        this.__attribute5.classList.add("Header"),
        this.__attribute5.classList.add("statLabel"),
        T.appendChild(this.__attribute5),
        y.appendChild(T),
        this.__mainViewDiv.appendChild(y),
        t.appendChild(this.__mainViewDiv),
        this.__statsViewDiv = document.createElement("div"),
        this.__statsViewDiv.classList.add("ut-item-view--stats"),
        this.__statsViewDiv.classList.add("ut-item-view"),
        this.__skillMoves = document.createElement("div"),
        this.__skillMoves.classList.add("ut-item-row"),
        this.__skillMovesLabel = document.createElement("span"),
        this.__skillMovesLabel.classList.add("ut-item-row-label--left"),
        this.__skillMovesLabel.classList.add("ut-item-row-label"),
        this.__skillMoves.appendChild(this.__skillMovesLabel);
        var v = document.createElement("div");
        v.classList.add("ut-skill-star"),
        this.__skillMoves.appendChild(v),
        this.__skillMovesRating = document.createElement("span"),
        this.__skillMoves.appendChild(this.__skillMovesRating),
        this.__statsViewDiv.appendChild(this.__skillMoves),
        this.__weakFoot = document.createElement("div"),
        this.__weakFoot.classList.add("ut-item-row"),
        this.__weakFootLabel = document.createElement("span"),
        this.__weakFootLabel.classList.add("ut-item-row-label--left"),
        this.__weakFootLabel.classList.add("ut-item-row-label"),
        this.__weakFoot.appendChild(this.__weakFootLabel);
        var E = document.createElement("div");
        E.classList.add("ut-skill-star"),
        this.__weakFoot.appendChild(E),
        this.__weakFootRating = document.createElement("span"),
        this.__weakFoot.appendChild(this.__weakFootRating),
        this.__statsViewDiv.appendChild(this.__weakFoot),
        this.__statsRowContract = document.createElement("div"),
        this.__statsRowContract.classList.add("ut-item-row"),
        this.__playerContractLabel = document.createElement("span"),
        this.__playerContractLabel.classList.add("ut-item-row-label--left"),
        this.__playerContractLabel.classList.add("ut-item-row-label"),
        this.__statsRowContract.appendChild(this.__playerContractLabel),
        this.__playerContract = document.createElement("span"),
        this.__playerContract.classList.add("ut-item-row-label--right"),
        this.__playerContract.classList.add("ut-item-row-label"),
        this.__statsRowContract.appendChild(this.__playerContract),
        this.__statsViewDiv.appendChild(this.__statsRowContract),
        this.__statsRowInjury = document.createElement("div"),
        this.__statsRowInjury.classList.add("ut-item-injury-row"),
        this.__injuryLabel = document.createElement("span"),
        this.__injuryLabel.classList.add("ut-item-row-label"),
        this.__statsRowInjury.appendChild(this.__injuryLabel),
        this.__injury = document.createElement("span"),
        this.__injury.classList.add("ut-item-row-label"),
        this.__statsRowInjury.appendChild(this.__injury),
        this.__statsViewDiv.appendChild(this.__statsRowInjury),
        t.appendChild(this.__statsViewDiv),
        this.__styleViewDiv = document.createElement("div"),
        this.__styleViewDiv.classList.add("ut-item-view--style"),
        this.__styleViewDiv.classList.add("ut-item-view"),
        this.__playStyleName = document.createElement("div"),
        this.__playStyleName.classList.add("name"),
        this.__styleViewDiv.appendChild(this.__playStyleName),
        this.__playStyleLarge = document.createElement("div"),
        this.__playStyleLarge.classList.add("playStyle"),
        this.__playStyleLarge.classList.add("ut-play-style--large"),
        this.__styleViewDiv.appendChild(this.__playStyleLarge);
        var S = document.createElement("div");
        S.classList.add("statCellRow");
        var b = document.createElement("div");
        b.classList.add("statCell"),
        this._barSet1 = new UTItemStatBarsView,
        b.appendChild(this._barSet1.getRootElement());
        var I = document.createElement("span");
        I.classList.add("Pace"),
        I.classList.add("statLabel"),
        b.appendChild(I),
        S.appendChild(b);
        var C = document.createElement("div");
        C.classList.add("statCell"),
        this._barSet4 = new UTItemStatBarsView,
        C.appendChild(this._barSet4.getRootElement());
        var U = document.createElement("span");
        U.classList.add("Dribbling"),
        U.classList.add("statLabel"),
        C.appendChild(U),
        S.appendChild(C),
        this.__styleViewDiv.appendChild(S);
        var A = document.createElement("div");
        A.classList.add("statCellRow");
        var w = document.createElement("div");
        w.classList.add("statCell"),
        this._barSet2 = new UTItemStatBarsView,
        w.appendChild(this._barSet2.getRootElement());
        var O = document.createElement("span");
        O.classList.add("Shooting"),
        O.classList.add("statLabel"),
        w.appendChild(O),
        A.appendChild(w);
        var R = document.createElement("div");
        R.classList.add("statCell"),
        this._barSet5 = new UTItemStatBarsView,
        R.appendChild(this._barSet5.getRootElement());
        var P = document.createElement("span");
        P.classList.add("Defending"),
        P.classList.add("statLabel"),
        R.appendChild(P),
        A.appendChild(R),
        this.__styleViewDiv.appendChild(A);
        var D = document.createElement("div");
        D.classList.add("statCellRow");
        var L = document.createElement("div");
        L.classList.add("statCell"),
        this._barSet3 = new UTItemStatBarsView,
        L.appendChild(this._barSet3.getRootElement());
        var N = document.createElement("span");
        N.classList.add("Passing"),
        N.classList.add("statLabel"),
        L.appendChild(N),
        D.appendChild(L);
        var x = document.createElement("div");
        x.classList.add("statCell"),
        this._barSet6 = new UTItemStatBarsView,
        x.appendChild(this._barSet6.getRootElement());
        var M = document.createElement("span");
        M.classList.add("Header"),
        M.classList.add("statLabel"),
        x.appendChild(M),
        D.appendChild(x),
        this.__styleViewDiv.appendChild(D),
        t.appendChild(this.__styleViewDiv),
        this.__bioViewDiv = document.createElement("div"),
        this.__bioViewDiv.classList.add("ut-item-view--bio"),
        this.__bioViewDiv.classList.add("ut-item-view");
        var V = document.createElement("div");
        V.classList.add("ut-item-row");
        var B = document.createElement("span");
        B.classList.add("ut-item-row-label--left"),
        B.classList.add("ut-item-row-label"),
        this._bioFlagImage = new UTImageView,
        B.appendChild(this._bioFlagImage.getRootElement()),
        V.appendChild(B);
        var F = document.createElement("span");
        F.classList.add("ut-item-row-label--center"),
        F.classList.add("ut-item-row-label"),
        this._bioNationPoints = new UTSquadSlotChemistryPointsView,
        this._bioNationPoints.getRootElement().classList.add("ut-player-item-bio-points"),
        F.appendChild(this._bioNationPoints.getRootElement()),
        V.appendChild(F),
        this.__bioNation = document.createElement("span"),
        this.__bioNation.classList.add("ut-item-row-label--right"),
        this.__bioNation.classList.add("ut-item-row-label"),
        V.appendChild(this.__bioNation),
        this.__bioViewDiv.appendChild(V);
        var G = document.createElement("div");
        G.classList.add("ut-item-row");
        var k = document.createElement("span");
        k.classList.add("ut-item-row-label--left"),
        k.classList.add("ut-item-row-label"),
        this._bioLeagueImage = new UTImageView,
        k.appendChild(this._bioLeagueImage.getRootElement()),
        G.appendChild(k);
        var j = document.createElement("span");
        j.classList.add("ut-item-row-label--center"),
        j.classList.add("ut-item-row-label"),
        this._bioLeaguePoints = new UTSquadSlotChemistryPointsView,
        this._bioLeaguePoints.getRootElement().classList.add("ut-player-item-bio-points"),
        j.appendChild(this._bioLeaguePoints.getRootElement()),
        G.appendChild(j),
        this.__bioLeague = document.createElement("span"),
        this.__bioLeague.classList.add("ut-item-row-label--right"),
        this.__bioLeague.classList.add("ut-item-row-label"),
        G.appendChild(this.__bioLeague),
        this.__bioViewDiv.appendChild(G);
        var H = document.createElement("div");
        H.classList.add("ut-item-row");
        var q = document.createElement("span");
        q.classList.add("ut-item-row-label--left"),
        q.classList.add("ut-item-row-label"),
        this._bioBadgeImage = new UTImageView,
        q.appendChild(this._bioBadgeImage.getRootElement()),
        H.appendChild(q);
        var Y = document.createElement("span");
        Y.classList.add("ut-item-row-label--center"),
        Y.classList.add("ut-item-row-label"),
        this._bioClubPoints = new UTSquadSlotChemistryPointsView,
        this._bioClubPoints.getRootElement().classList.add("ut-player-item-bio-points"),
        Y.appendChild(this._bioClubPoints.getRootElement()),
        H.appendChild(Y),
        this.__bioClub = document.createElement("span"),
        this.__bioClub.classList.add("ut-item-row-label--right"),
        this.__bioClub.classList.add("ut-item-row-label"),
        H.appendChild(this.__bioClub),
        this.__bioViewDiv.appendChild(H);
        var z = document.createElement("div");
        z.classList.add("ut-item-player-bonuses"),
        this.__biofirstOwner = document.createElement("span"),
        this.__biofirstOwner.classList.add("icon_chemistry_first_owner"),
        this.__biofirstOwner.classList.add("fut_icon"),
        z.appendChild(this.__biofirstOwner),
        this.__bioViewDiv.appendChild(z),
        t.appendChild(this.__bioViewDiv),
        this.__strengthViewDiv = document.createElement("div"),
        this.__strengthViewDiv.classList.add("ut-item-view--strength"),
        this.__strengthViewDiv.classList.add("ut-item-view"),
        this.__keyAtt1 = document.createElement("div"),
        this.__keyAtt1.classList.add("ut-item-row"),
        this.__keyAttLabel1 = document.createElement("span"),
        this.__keyAttLabel1.classList.add("ut-item-row-label--left"),
        this.__keyAttLabel1.classList.add("ut-item-row-label"),
        this.__keyAtt1.appendChild(this.__keyAttLabel1),
        this.__keyAttVal1 = document.createElement("span"),
        this.__keyAttVal1.classList.add("ut-item-row-label--right"),
        this.__keyAttVal1.classList.add("ut-item-row-label"),
        this.__keyAtt1.appendChild(this.__keyAttVal1),
        this.__strengthViewDiv.appendChild(this.__keyAtt1),
        this.__keyAtt2 = document.createElement("div"),
        this.__keyAtt2.classList.add("ut-item-row"),
        this.__keyAttLabel2 = document.createElement("span"),
        this.__keyAttLabel2.classList.add("ut-item-row-label--left"),
        this.__keyAttLabel2.classList.add("ut-item-row-label"),
        this.__keyAtt2.appendChild(this.__keyAttLabel2),
        this.__keyAttVal2 = document.createElement("span"),
        this.__keyAttVal2.classList.add("ut-item-row-label--right"),
        this.__keyAttVal2.classList.add("ut-item-row-label"),
        this.__keyAtt2.appendChild(this.__keyAttVal2),
        this.__strengthViewDiv.appendChild(this.__keyAtt2),
        this.__keyAtt3 = document.createElement("div"),
        this.__keyAtt3.classList.add("ut-item-row"),
        this.__keyAttLabel3 = document.createElement("span"),
        this.__keyAttLabel3.classList.add("ut-item-row-label--left"),
        this.__keyAttLabel3.classList.add("ut-item-row-label"),
        this.__keyAtt3.appendChild(this.__keyAttLabel3),
        this.__keyAttVal3 = document.createElement("span"),
        this.__keyAttVal3.classList.add("ut-item-row-label--right"),
        this.__keyAttVal3.classList.add("ut-item-row-label"),
        this.__keyAtt3.appendChild(this.__keyAttVal3),
        this.__strengthViewDiv.appendChild(this.__keyAtt3),
        this.__keyAtt4 = document.createElement("div"),
        this.__keyAtt4.classList.add("ut-item-row"),
        this.__keyAttLabel4 = document.createElement("span"),
        this.__keyAttLabel4.classList.add("ut-item-row-label--left"),
        this.__keyAttLabel4.classList.add("ut-item-row-label"),
        this.__keyAtt4.appendChild(this.__keyAttLabel4),
        this.__keyAttVal4 = document.createElement("span"),
        this.__keyAttVal4.classList.add("ut-item-row-label--right"),
        this.__keyAttVal4.classList.add("ut-item-row-label"),
        this.__keyAtt4.appendChild(this.__keyAttVal4),
        this.__strengthViewDiv.appendChild(this.__keyAtt4),
        this.__keyAtt5 = document.createElement("div"),
        this.__keyAtt5.classList.add("ut-item-row"),
        this.__keyAttLabel5 = document.createElement("span"),
        this.__keyAttLabel5.classList.add("ut-item-row-label--left"),
        this.__keyAttLabel5.classList.add("ut-item-row-label"),
        this.__keyAtt5.appendChild(this.__keyAttLabel5),
        this.__keyAttVal5 = document.createElement("span"),
        this.__keyAttVal5.classList.add("ut-item-row-label--right"),
        this.__keyAttVal5.classList.add("ut-item-row-label"),
        this.__keyAtt5.appendChild(this.__keyAttVal5),
        this.__strengthViewDiv.appendChild(this.__keyAtt5),
        t.appendChild(this.__strengthViewDiv),
        this.__root = t,
        this._generated = !0
    }
}
,
UTLargePlayerItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._canvas.destroy(),
    this.__playerName = null,
    this.__strengthName = null,
    this.__strPlayerPosition = null,
    this.__strPlayerAltPositions = null,
    this.__playStyle = null,
    this.__mainViewDiv = null,
    this.__loanInfoTab = null,
    this.__playerRating = null,
    this.__playerPosition = null,
    this.__attribute0 = null,
    this.__attribute3 = null,
    this.__attribute1 = null,
    this.__attribute4 = null,
    this.__attribute2 = null,
    this.__attribute5 = null,
    this.__statsViewDiv = null,
    this.__skillMoves = null,
    this.__skillMovesLabel = null,
    this.__skillMovesRating = null,
    this.__weakFoot = null,
    this.__weakFootLabel = null,
    this.__weakFootRating = null,
    this.__statsRowContract = null,
    this.__playerContractLabel = null,
    this.__playerContract = null,
    this.__statsRowInjury = null,
    this.__injuryLabel = null,
    this.__injury = null,
    this.__styleViewDiv = null,
    this.__playStyleName = null,
    this.__playStyleLarge = null,
    this._barSet1.destroy(),
    this._barSet4.destroy(),
    this._barSet2.destroy(),
    this._barSet5.destroy(),
    this._barSet3.destroy(),
    this._barSet6.destroy(),
    this.__bioViewDiv = null,
    this._bioFlagImage.destroy(),
    this._bioNationPoints.destroy(),
    this.__bioNation = null,
    this._bioLeagueImage.destroy(),
    this._bioLeaguePoints.destroy(),
    this.__bioLeague = null,
    this._bioBadgeImage.destroy(),
    this._bioClubPoints.destroy(),
    this.__bioClub = null,
    this.__biofirstOwner = null,
    this.__strengthViewDiv = null,
    this.__keyAtt1 = null,
    this.__keyAttLabel1 = null,
    this.__keyAttVal1 = null,
    this.__keyAtt2 = null,
    this.__keyAttLabel2 = null,
    this.__keyAttVal2 = null,
    this.__keyAtt3 = null,
    this.__keyAttLabel3 = null,
    this.__keyAttVal3 = null,
    this.__keyAtt4 = null,
    this.__keyAttLabel4 = null,
    this.__keyAttVal4 = null,
    this.__keyAtt5 = null,
    this.__keyAttLabel5 = null,
    this.__keyAttVal5 = null
}
,
UTLargePlayerItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTStadiumItemView = function(t) {
    function UTStadiumItemView() {
        return t.call(this) || this
    }
    return __extends(UTStadiumItemView, t),
    UTStadiumItemView.prototype.init = function() {
        t.prototype.init.call(this),
        this._mainImage && (this._mainImage.placeholderURL = AssetLocationUtils.getStadiumImageUri(UTItemEntity.DEFAULT_ASSET_ID))
    }
    ,
    UTStadiumItemView.onImageLoad = function(t, e, i, r) {
        t.unobserve(this),
        e || i.replaceAndShowResource(r.replace(/\d+\.png/, UTItemEntity.DEFAULT_ASSET_ID + ".png"))
    }
    ,
    UTStadiumItemView.prototype.renderItem = function(t, e) {
        var i = e.getExpColorMap(t.getTier());
        i && this.applyColors(".iconClub", i.footer),
        this._mainImage && this._mainImage.setResource(AssetLocationUtils.getStadiumImageUri(t.getStaticData().assetId), !0).observe(this._mainImage, UTStadiumItemView.onImageLoad)
    }
    ,
    UTStadiumItemView.prototype.renderStadiumRestrictions = function(t) {
        this.__restrictedBanner && t.bannerRestricted && (this.__restrictedBanner.style.display = "none"),
        this.__restrictedTifo && t.tifoRestricted && (this.__restrictedTifo.style.display = "none")
    }
    ,
    UTStadiumItemView.prototype.canRender = function(t) {
        return t.isStadium()
    }
    ,
    UTStadiumItemView.prototype.resetRender = function() {}
    ,
    UTStadiumItemView.prototype.getAssetDimensions = function(t, e) {
        return new UTItemCanvasDTO({
            dynamic: e,
            height: 0,
            width: 0,
            xPos: 0,
            yPos: 0
        })
    }
    ,
    UTStadiumItemView
}(UTItemView)
  , UTLargeStadiumItemView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(o) {
    function UTLargeStadiumItemView() {
        return o.call(this) || this
    }
    return __extends(UTLargeStadiumItemView, o),
    UTLargeStadiumItemView.prototype.renderItem = function(t, e) {
        var i = t.getStaticData();
        o.prototype.renderItem.call(this, t, e);
        var r = t.isSpecial() ? null == e ? void 0 : e.getGuid() : void 0;
        this.setShell(t, ItemViewSize.LARGE, r),
        this.renderStadiumRestrictions(t),
        this.__stadiumName.textContent = i.description;
        var n = e.getExpColorMap(t.getTier());
        n && (this.applyColors(".name", n.name),
        this.applyColors(".clubView .clubLine", n.footer))
    }
    ,
    UTLargeStadiumItemView
}(UTStadiumItemView));
UTLargeStadiumItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("large"),
        t.classList.add("stadium"),
        t.classList.add("item");
        var e = document.createElement("div");
        e.classList.add("statusOverlay"),
        t.appendChild(e),
        this._mainImage = new UTItemImageView,
        this._mainImage.getRootElement().classList.add("photo"),
        t.appendChild(this._mainImage.getRootElement()),
        this.__stadiumName = document.createElement("div"),
        this.__stadiumName.classList.add("name"),
        t.appendChild(this.__stadiumName);
        var i = document.createElement("div");
        i.classList.add("stadium"),
        i.classList.add("iconClub"),
        t.appendChild(i),
        this.__restrictedIcons = document.createElement("div"),
        this.__restrictedIcons.classList.add("restricted"),
        this.__restrictedBanner = document.createElement("div"),
        this.__restrictedBanner.classList.add("banner"),
        this.__restrictedBanner.classList.add("iconClub"),
        this.__restrictedIcons.appendChild(this.__restrictedBanner),
        this.__restrictedTifo = document.createElement("div"),
        this.__restrictedTifo.classList.add("tifo"),
        this.__restrictedTifo.classList.add("iconClub"),
        this.__restrictedIcons.appendChild(this.__restrictedTifo),
        t.appendChild(this.__restrictedIcons),
        this.__root = t,
        this._generated = !0
    }
}
,
UTLargeStadiumItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._mainImage.destroy(),
    this.__stadiumName = null,
    this.__restrictedIcons = null,
    this.__restrictedBanner = null,
    this.__restrictedTifo = null
}
,
UTLargeStadiumItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTVanityItemView = function(t) {
    function UTVanityItemView() {
        return t.call(this) || this
    }
    return __extends(UTVanityItemView, t),
    UTVanityItemView.prototype.getVanityStyleFromSubtype = function(t) {
        switch (t) {
        case ItemSubType.VANITY_TIFO_BASE:
            return "vanity--tifo_base";
        case ItemSubType.VANITY_TIFO_ANIMATED:
            return "vanity--tifo_animated";
        case ItemSubType.VANITY_TIFO_BIG:
            return "vanity--tifo_big";
        case ItemSubType.VANITY_TIFO_MOVING:
            return "vanity--tifo_moving";
        case ItemSubType.VANITY_STADIUM_THEME:
            return "vanity--theme";
        case ItemSubType.VANITY_STADIUM_BASE_PITCH_MOW_PATTERN:
            return "vanity--mow_pattern";
        case ItemSubType.VANITY_STADIUM_BASE_PITCH_LINE_COLOR:
            return "vanity--line_color";
        case ItemSubType.VANITY_STADIUM_BASE_PITCH_GOAL_PACKAGE:
            return "vanity--goal_package";
        case ItemSubType.VANITY_STADIUM_BASE_PITCH_PROP:
            return "vanity--prop";
        case ItemSubType.VANITY_STADIUM_BASE_STRUCTURE_COLOR:
            return "vanity--stucture_color";
        case ItemSubType.VANITY_STADIUM_BASE_SEAT_COLOR:
            return "vanity--seat_color";
        case ItemSubType.VANITY_PYROTECHNICS_FLAME_CANNON:
            return "vanity--flame_cannon";
        case ItemSubType.VANITY_PYROTECHNICS_CONFETTI_CANNON:
            return "vanity--confetti_cannon";
        case ItemSubType.VANITY_PYROTECHNICS_SPARKLER_CANNON:
            return "vanity--sparkler_cannon";
        case ItemSubType.VANITY_PYROTECHNICS_FIREWORKS_CANNON:
            return "vanity--fireworks_cannon";
        case ItemSubType.VANITY_AUDIO_ANTHEM_MUSIC:
            return "vanity--anthem";
        case ItemSubType.VANITY_AUDIO_GOAL_SCORE:
            return "vanity--goal_score";
        case ItemSubType.VANITY_AUDIO_CLUB_NICKNAME:
            return "vanity--nickname";
        case ItemSubType.VANITY_AUDIO_CROWD_CHANT:
            return "vanity--chant";
        case ItemSubType.VANITY_PLAYER_CELEBRATION:
            return "vanity--celebration";
        case ItemSubType.VANITY_TINTED_BANNER:
            return "vanity--tinted_banner";
        case ItemSubType.VANITY_POLE_BANNER:
            return "vanity--pole_banner";
        case ItemSubType.VANITY_CROWD_CARDS:
            return "vanity--crowd_cards";
        case ItemSubType.VANITY_VIP_AREA:
            return "vanity--vip_area";
        default:
            return "vanity--none"
        }
    }
    ,
    UTVanityItemView.prototype.renderItem = function(t, e) {
        var i = e.getExpColorMap(t.getTier());
        i && this.applyColors(".iconClub", i.footer),
        DOMKit.addClass(this.__icon, this.getVanityStyleFromSubtype(t.subtype))
    }
    ,
    UTVanityItemView.prototype.canRender = function(t) {
        return t.isVanityItem()
    }
    ,
    UTVanityItemView.prototype.resetRender = function() {}
    ,
    UTVanityItemView.prototype.getAssetDimensions = function(t, e) {
        return new UTItemCanvasDTO({
            dynamic: e,
            height: 0,
            width: 0,
            xPos: 0,
            yPos: 0
        })
    }
    ,
    UTVanityItemView
}(UTItemView)
  , UTLargeVanityItemView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(c) {
    function UTLargeVanityItemView() {
        return c.call(this) || this
    }
    return __extends(UTLargeVanityItemView, c),
    UTLargeVanityItemView.prototype.renderItem = function(t, e) {
        var i = t.getStaticData()
          , r = t.isSpecial() ? null == e ? void 0 : e.getGuid() : void 0;
        if (c.prototype.renderItem.call(this, t, e),
        this._mainImage) {
            var n = ""
              , o = "";
            t.authenticity ? (n = AssetLocationUtils.getBadgeImageUri(t.getItemAssetId(), enums.UIThemeVariation.LIGHT),
            this._mainImage.placeholderCssClass = "authentic") : n = AssetLocationUtils.getVanityImageUri(t.subtype, t.subtype === ItemSubType.VANITY_STADIUM_BASE_PITCH_MOW_PATTERN ? UTItemEntity.DEFAULT_MOWPATTERN_ASSET_ID : UTItemEntity.DEFAULT_ASSET_ID, ItemViewSize.LARGE),
            o = t.authenticity && t.subtype === ItemSubType.VANITY_STADIUM_THEME ? (this._mainImage.addClass("authentic"),
            n) : AssetLocationUtils.getVanityImageUri(t.subtype, t.getItemAssetId(), ItemViewSize.LARGE),
            this._mainImage.placeholderURL = n,
            this._mainImage.setResource(o, !0)
        }
        this.setShell(t, ItemViewSize.LARGE, r);
        var s = e.getExpColorMap(t.getTier())
          , a = services.Localization.localize(i.name)
          , l = 24;
        switch (services.Localization.locale.language) {
        case LanguageEnum.CHINESE:
            l = 13;
            break;
        case LanguageEnum.JAPANESE:
            l = 11;
            break;
        case LanguageEnum.KOREAN:
            l = 18
        }
        this.__vanityName.textContent = a.length <= l ? a : a.substring(0, l - 1) + "…",
        this.__vanityText.textContent = services.Localization.localize("item.vanity.subtype" + t.subtype.toString()),
        s && (this.applyColors(".name", s.name),
        this.applyColors(".clubView .clubRow", s.footer),
        this.applyColors(".vanity.iconClub", s.playStyleIcon))
    }
    ,
    UTLargeVanityItemView
}(UTVanityItemView));
UTLargeVanityItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("large"),
        t.classList.add("vanity"),
        t.classList.add("item");
        var e = document.createElement("div");
        e.classList.add("statusOverlay"),
        t.appendChild(e),
        this._mainImage = new UTItemImageView,
        this._mainImage.getRootElement().classList.add("photo"),
        t.appendChild(this._mainImage.getRootElement()),
        this.__vanityName = document.createElement("div"),
        this.__vanityName.classList.add("name"),
        t.appendChild(this.__vanityName);
        var i = document.createElement("div");
        i.classList.add("clubView"),
        this.__vanityText = document.createElement("div"),
        this.__vanityText.classList.add("clubRow"),
        i.appendChild(this.__vanityText),
        t.appendChild(i),
        this.__icon = document.createElement("div"),
        this.__icon.classList.add("vanity"),
        this.__icon.classList.add("iconClub"),
        t.appendChild(this.__icon),
        this.__root = t,
        this._generated = !0
    }
}
,
UTLargeVanityItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._mainImage.destroy(),
    this.__vanityName = null,
    this.__vanityText = null,
    this.__icon = null
}
,
UTLargeVanityItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSmallBadgeItemView = function(r) {
    function UTSmallBadgeItemView() {
        return r.call(this) || this
    }
    return __extends(UTSmallBadgeItemView, r),
    UTSmallBadgeItemView.prototype.renderItem = function(t, e) {
        r.prototype.renderItem.call(this, t, e);
        var i = t.isSpecial() ? null == e ? void 0 : e.getGuid() : void 0;
        this.setShell(t, ItemViewSize.SMALL, i)
    }
    ,
    UTSmallBadgeItemView
}(UTBadgeItemView);
UTSmallBadgeItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("small"),
        t.classList.add("badge"),
        t.classList.add("item");
        var e = document.createElement("span");
        e.classList.add("statusOverlay"),
        t.appendChild(e),
        this._mainImage = new UTItemImageView,
        this._mainImage.getRootElement().classList.add("photo"),
        t.appendChild(this._mainImage.getRootElement());
        var i = document.createElement("div");
        i.classList.add("badge"),
        i.classList.add("iconClub"),
        t.appendChild(i),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSmallBadgeItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._mainImage.destroy()
}
,
UTSmallBadgeItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSmallBallItemView = function(r) {
    function UTSmallBallItemView() {
        return r.call(this) || this
    }
    return __extends(UTSmallBallItemView, r),
    UTSmallBallItemView.prototype.renderItem = function(t, e) {
        r.prototype.renderItem.call(this, t, e);
        var i = t.isSpecial() ? null == e ? void 0 : e.getGuid() : void 0;
        this.setShell(t, ItemViewSize.SMALL, i)
    }
    ,
    UTSmallBallItemView
}(UTBallItemView);
UTSmallBallItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("small"),
        t.classList.add("ball"),
        t.classList.add("item");
        var e = document.createElement("span");
        e.classList.add("statusOverlay"),
        t.appendChild(e),
        this._mainImage = new UTItemImageView,
        this._mainImage.getRootElement().classList.add("photo"),
        t.appendChild(this._mainImage.getRootElement());
        var i = document.createElement("div");
        i.classList.add("ball"),
        i.classList.add("iconClub"),
        t.appendChild(i),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSmallBallItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._mainImage.destroy()
}
,
UTSmallBallItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSmallConsumableItemView = function(a) {
    function UTSmallConsumableItemView() {
        return a.call(this) || this
    }
    return __extends(UTSmallConsumableItemView, a),
    UTSmallConsumableItemView.prototype.getImageUrl = function(t, e) {
        return AssetLocationUtils.getConsumableImageUri(t, e, ItemViewSize.SMALL)
    }
    ,
    UTSmallConsumableItemView.prototype.renderItem = function(t, e) {
        var i = t.getStaticData();
        if (a.prototype.renderItem.call(this, t, e),
        this.setShell(t, ItemViewSize.SMALL),
        t.isContract()) {
            var r = document.createElement("span")
              , n = document.createElement("span")
              , o = document.createElement("span");
            r.textContent = "+" + i.bronzeBoost,
            n.textContent = "+" + i.silverBoost,
            o.textContent = "+" + i.goldBoost,
            DOMKit.addClass(r, "bronzeBoost"),
            DOMKit.addClass(n, "silverBoost"),
            DOMKit.addClass(o, "goldBoost"),
            DOMKit.empty(this.__desc),
            DOMKit.addClass(this.__desc, "contractStats"),
            this.__desc.appendChild(r),
            this.__desc.appendChild(n),
            this.__desc.appendChild(o),
            this.addClass("contracts")
        }
        var s = e.getSmallColorMap(t.getTier());
        s && this.applyColors(".itemDesc", s.footer)
    }
    ,
    UTSmallConsumableItemView
}(UTConsumableItemView);
UTSmallConsumableItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("small"),
        t.classList.add("consumable"),
        t.classList.add("item");
        var e = document.createElement("span");
        e.classList.add("statusOverlay"),
        t.appendChild(e),
        this.__stackCount = document.createElement("div"),
        this.__stackCount.classList.add("infoTab"),
        t.appendChild(this.__stackCount),
        this._mainImage = new UTImageView,
        this._mainImage.getRootElement().classList.add("photo"),
        t.appendChild(this._mainImage.getRootElement()),
        this.__desc = document.createElement("div"),
        this.__desc.classList.add("itemDesc"),
        t.appendChild(this.__desc),
        this.__itemIcon = document.createElement("div"),
        this.__itemIcon.classList.add("iconConsumable"),
        t.appendChild(this.__itemIcon),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSmallConsumableItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__stackCount = null,
    this._mainImage.destroy(),
    this.__desc = null,
    this.__itemIcon = null
}
,
UTSmallConsumableItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSmallChemistryStyleItemView = function(n) {
    function UTSmallChemistryStyleItemView() {
        return n.call(this) || this
    }
    return __extends(UTSmallChemistryStyleItemView, n),
    UTSmallChemistryStyleItemView.prototype.renderItem = function(t, e) {
        var i = e.getSmallColorMap(t.getTier())
          , r = AssetLocationUtils.getConsumableImageUri(t.getAssetId(), t.subtype, ItemViewSize.LARGE);
        n.prototype.renderItem.call(this, t, e),
        this.setShell(t, ItemViewSize.SMALL),
        this._mainImage.setResource(r),
        i && this.applyColors(".itemDesc", i.footer)
    }
    ,
    UTSmallChemistryStyleItemView
}(UTChemistryStyleItemView);
UTSmallChemistryStyleItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("small"),
        t.classList.add("chemistryStyle"),
        t.classList.add("item");
        var e = document.createElement("span");
        e.classList.add("statusOverlay"),
        t.appendChild(e),
        this.__stackCount = document.createElement("div"),
        this.__stackCount.classList.add("infoTab"),
        t.appendChild(this.__stackCount),
        this._mainImage = new UTImageView,
        this._mainImage.getRootElement().classList.add("photo"),
        t.appendChild(this._mainImage.getRootElement()),
        this.__desc = document.createElement("div"),
        this.__desc.classList.add("itemDesc"),
        t.appendChild(this.__desc),
        this.__itemIcon = document.createElement("div"),
        this.__itemIcon.classList.add("chemistryStyle"),
        this.__itemIcon.classList.add("iconConsumable"),
        t.appendChild(this.__itemIcon),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSmallChemistryStyleItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__stackCount = null,
    this._mainImage.destroy(),
    this.__desc = null,
    this.__itemIcon = null
}
,
UTSmallChemistryStyleItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSmallCustomBrickItemView = function(r) {
    function UTSmallCustomBrickItemView() {
        return r.call(this) || this
    }
    return __extends(UTSmallCustomBrickItemView, r),
    UTSmallCustomBrickItemView.prototype.renderItem = function(t, e) {
        r.prototype.renderItem.call(this, t, e);
        var i = services.Localization;
        this.__nation.textContent = 0 === t.nationId ? i.localize("roles.defaultRole") : UTLocalizationUtil.nationIdToAbbr3(t.nationId, i),
        this.__league.textContent = 0 === t.leagueId ? i.localize("roles.defaultRole") : UTLocalizationUtil.leagueIdToAbbr5(t.leagueId, i),
        this.__team.textContent = 0 === t.teamId ? i.localize("roles.defaultRole") : UTLocalizationUtil.teamIdToAbbr3(t.teamId, i)
    }
    ,
    UTSmallCustomBrickItemView
}(UTCustomBrickItemView);
UTSmallCustomBrickItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("custom-brick"),
        t.classList.add("small"),
        t.classList.add("item");
        var e = document.createElement("div");
        e.classList.add("lock"),
        t.appendChild(e),
        this.__league = document.createElement("span"),
        t.appendChild(this.__league),
        this.__team = document.createElement("span"),
        t.appendChild(this.__team),
        this.__nation = document.createElement("span"),
        t.appendChild(this.__nation),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSmallCustomBrickItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__league = null,
    this.__team = null,
    this.__nation = null
}
,
UTSmallCustomBrickItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSmallKitItemView = function(n) {
    function UTSmallKitItemView() {
        return n.call(this) || this
    }
    return __extends(UTSmallKitItemView, n),
    UTSmallKitItemView.prototype.renderItem = function(t, e) {
        n.prototype.renderItem.call(this, t, e);
        var i = t.isSpecial() ? null == e ? void 0 : e.getGuid() : void 0;
        this.setShell(t, ItemViewSize.SMALL, i),
        this.__desc.textContent = t.getStaticData().description;
        var r = e.getSmallColorMap(t.getTier());
        r && this.applyColors(".itemDesc", r.footer)
    }
    ,
    UTSmallKitItemView
}(UTKitItemView);
UTSmallKitItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("small"),
        t.classList.add("kit"),
        t.classList.add("item");
        var e = document.createElement("span");
        e.classList.add("statusOverlay"),
        t.appendChild(e);
        var i = document.createElement("div");
        i.classList.add("kitOverview"),
        this._flagImage = new UTItemImageView,
        this._flagImage.getRootElement().classList.add("flag"),
        i.appendChild(this._flagImage.getRootElement()),
        this._badgeImage = new UTItemImageView,
        this._badgeImage.getRootElement().classList.add("badge"),
        i.appendChild(this._badgeImage.getRootElement()),
        t.appendChild(i),
        this._mainImage = new UTItemImageView,
        this._mainImage.getRootElement().classList.add("photo"),
        t.appendChild(this._mainImage.getRootElement()),
        this.__desc = document.createElement("div"),
        this.__desc.classList.add("itemDesc"),
        t.appendChild(this.__desc);
        var r = document.createElement("div");
        r.classList.add("kit"),
        r.classList.add("iconClub"),
        t.appendChild(r),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSmallKitItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._flagImage.destroy(),
    this._badgeImage.destroy(),
    this._mainImage.destroy(),
    this.__desc = null
}
,
UTSmallKitItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSmallManagerItemView = function(o) {
    function UTSmallManagerItemView() {
        return o.call(this) || this
    }
    return __extends(UTSmallManagerItemView, o),
    UTSmallManagerItemView.prototype.init = function() {
        o.prototype.init.call(this),
        this._canvas.init()
    }
    ,
    UTSmallManagerItemView.prototype.setItemInfoState = function(t) {
        DOMKit.toggleDisplayStyle(this.__position, t === UIItemInfoState.MAIN || t === UIItemInfoState.STATS),
        DOMKit.toggleDisplayStyle(this.__iconDiv, t === UIItemInfoState.MAIN || t === UIItemInfoState.STATS),
        DOMKit.toggleDisplayStyle(this.__bioViewDiv, t !== UIItemInfoState.MAIN && t !== UIItemInfoState.STATS),
        this._canvas.hasRendered && this._canvas.setState(t)
    }
    ,
    UTSmallManagerItemView.prototype.renderItem = function(t, e) {
        var i = t.getStaticData()
          , r = t.isValid()
          , n = e.getSmallColorMap(t.getTier());
        o.prototype.renderItem.call(this, t, e),
        this._canvas && (this._canvas.setSize(ItemViewSize.SMALL),
        n && this._canvas.setColorMap(n)),
        r && (this.setShell(t, ItemViewSize.SMALL),
        n && (this.applyColors(".position", n.header),
        this.applyColors(".itemDesc", n.footer))),
        this.__managerNation.textContent = UTLocalizationUtil.nationIdToAbbr3(t.nationId, services.Localization),
        this.__managerLeague.textContent = UTLocalizationUtil.leagueIdToAbbr5(t.leagueId, services.Localization),
        this.__managerNegotiationTitle.textContent = services.Localization.localize("cards.cardfront.negotiations"),
        this.__managerNegotiation.textContent = services.Localization.localize("common.percentage", [i.amount.toString()]),
        this.__managerContractTitle.textContent = services.Localization.localize("cards.cardfront.contractAbbr"),
        this.__managerContract.textContent = services.Localization.localizeNumber(t.contract)
    }
    ,
    UTSmallManagerItemView.prototype.getAssetDimensions = function(t, e) {
        e = e || !1;
        var i = 0
          , r = 0
          , n = 0
          , o = 0;
        return t === ItemAssetType.MAIN ? (r = i = 53,
        n = 33,
        o = 28) : t === ItemAssetType.BADGE ? (r = i = 14,
        n = 18,
        o = 63) : t === ItemAssetType.FLAG ? (i = 14,
        r = 9,
        n = 18,
        o = 49) : t === ItemAssetType.SHELL && (i = 97,
        r = 114),
        new UTItemCanvasDTO({
            dynamic: e,
            height: r,
            width: i,
            xPos: n,
            yPos: o
        })
    }
    ,
    UTSmallManagerItemView
}(UTManagerItemView);
UTSmallManagerItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("small"),
        t.classList.add("manager"),
        t.classList.add("staff"),
        t.classList.add("item"),
        this._canvas = new UTItemManagerCanvasView,
        this._canvas.width = "90",
        this._canvas.height = "114",
        t.appendChild(this._canvas.getRootElement());
        var e = document.createElement("span");
        e.classList.add("statusOverlay"),
        t.appendChild(e),
        this.__infoTab = document.createElement("span"),
        this.__infoTab.classList.add("infoTab"),
        t.appendChild(this.__infoTab),
        this.__position = document.createElement("div"),
        this.__position.classList.add("position"),
        t.appendChild(this.__position),
        this.__iconDiv = document.createElement("div"),
        this.__iconDiv.classList.add("manager"),
        this.__iconDiv.classList.add("iconStaff"),
        t.appendChild(this.__iconDiv),
        this.__bioViewDiv = document.createElement("div"),
        this.__bioViewDiv.classList.add("bioView");
        var i = document.createElement("div");
        i.classList.add("ut-item-row");
        var r = document.createElement("span");
        r.classList.add("ut-item-row-label--left"),
        r.classList.add("ut-item-row-label"),
        this._bioFlagImage = new UTItemImageView,
        r.appendChild(this._bioFlagImage.getRootElement()),
        i.appendChild(r),
        this.__managerNation = document.createElement("span"),
        this.__managerNation.classList.add("ut-item-row-label--right"),
        this.__managerNation.classList.add("ut-item-row-label"),
        i.appendChild(this.__managerNation),
        this.__bioViewDiv.appendChild(i);
        var n = document.createElement("div");
        n.classList.add("ut-item-row");
        var o = document.createElement("span");
        o.classList.add("ut-item-row-label--left"),
        o.classList.add("ut-item-row-label"),
        this._bioLeagueImage = new UTItemImageView,
        o.appendChild(this._bioLeagueImage.getRootElement()),
        n.appendChild(o),
        this.__managerLeague = document.createElement("span"),
        this.__managerLeague.classList.add("ut-item-row-label--right"),
        this.__managerLeague.classList.add("ut-item-row-label"),
        n.appendChild(this.__managerLeague),
        this.__bioViewDiv.appendChild(n);
        var s = document.createElement("div");
        s.classList.add("ut-item-row"),
        this.__managerNegotiationTitle = document.createElement("span"),
        this.__managerNegotiationTitle.classList.add("ut-item-row-label--left"),
        this.__managerNegotiationTitle.classList.add("ut-item-row-label"),
        s.appendChild(this.__managerNegotiationTitle),
        this.__managerNegotiation = document.createElement("span"),
        this.__managerNegotiation.classList.add("ut-item-row-label--right"),
        this.__managerNegotiation.classList.add("ut-item-row-label"),
        s.appendChild(this.__managerNegotiation),
        this.__bioViewDiv.appendChild(s);
        var a = document.createElement("div");
        a.classList.add("ut-item-row--center"),
        a.classList.add("ut-item-row"),
        this.__managerContractTitle = document.createElement("span"),
        this.__managerContractTitle.classList.add("ut-item-row-label"),
        a.appendChild(this.__managerContractTitle),
        this.__managerContract = document.createElement("span"),
        this.__managerContract.classList.add("ut-item-row-label"),
        a.appendChild(this.__managerContract),
        this.__bioViewDiv.appendChild(a),
        t.appendChild(this.__bioViewDiv),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSmallManagerItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._canvas.destroy(),
    this.__infoTab = null,
    this.__position = null,
    this.__iconDiv = null,
    this.__bioViewDiv = null,
    this._bioFlagImage.destroy(),
    this.__managerNation = null,
    this._bioLeagueImage.destroy(),
    this.__managerLeague = null,
    this.__managerNegotiationTitle = null,
    this.__managerNegotiation = null,
    this.__managerContractTitle = null,
    this.__managerContract = null
}
,
UTSmallManagerItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSmallMiscItemView = function(i) {
    function UTSmallMiscItemView() {
        return i.call(this) || this
    }
    return __extends(UTSmallMiscItemView, i),
    UTSmallMiscItemView.prototype.getImageUrl = function(t, e) {
        return AssetLocationUtils.getMiscImageUri(t, e, ItemViewSize.SMALL)
    }
    ,
    UTSmallMiscItemView.prototype.renderItem = function(t, e) {
        i.prototype.renderItem.call(this, t, e),
        t.isPlayerPickItem() ? this.__itemName.textContent = services.Localization.localize("card.title.playerpicks") : this.setShell(t, ItemViewSize.SMALL)
    }
    ,
    UTSmallMiscItemView
}(UTMiscItemView);
UTSmallMiscItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("small"),
        t.classList.add("misc"),
        t.classList.add("item");
        var e = document.createElement("span");
        e.classList.add("statusOverlay"),
        t.appendChild(e),
        this._mainImage = new UTImageView,
        this._mainImage.getRootElement().classList.add("photo"),
        t.appendChild(this._mainImage.getRootElement()),
        this.__itemName = document.createElement("div"),
        this.__itemName.classList.add("name"),
        t.appendChild(this.__itemName),
        this.__itemIcon = document.createElement("div"),
        this.__itemIcon.classList.add("iconConsumable"),
        t.appendChild(this.__itemIcon),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSmallMiscItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._mainImage.destroy(),
    this.__itemName = null,
    this.__itemIcon = null
}
,
UTSmallMiscItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSmallPlayerItemView = function(h) {
    function UTSmallPlayerItemView() {
        return h.call(this) || this
    }
    return __extends(UTSmallPlayerItemView, h),
    UTSmallPlayerItemView.prototype.init = function() {
        h.prototype.init.call(this),
        this._canvas.init()
    }
    ,
    UTSmallPlayerItemView.prototype.setItemInfoState = function(t) {
        DOMKit.toggleDisplayStyle(this.__statsViewDiv, t === UIItemInfoState.STATS),
        DOMKit.toggleDisplayStyle(this.__bioViewDiv, t === UIItemInfoState.BIO),
        DOMKit.toggleDisplayStyle(this.__mainViewDiv, t === UIItemInfoState.MAIN),
        DOMKit.toggleDisplayStyle(this.__styleViewDiv, t === UIItemInfoState.STYLE),
        DOMKit.toggleDisplayStyle(this.__strengthViewDiv, t === UIItemInfoState.STRENGTH),
        DOMKit.toggleDisplayStyle(this.__playStyle, t === UIItemInfoState.STYLE || t === UIItemInfoState.MAIN),
        DOMKit.toggleDisplayStyle(this.__strengthName, t == UIItemInfoState.STRENGTH),
        this._canvas.hasRendered && this._canvas.setState(t)
    }
    ,
    UTSmallPlayerItemView.prototype.renderItem = function(o, t) {
        var e, s = this;
        if (o.isValid()) {
            o.concept ? (t = this.createConceptRarity(),
            this.setLocalShell(o, ItemViewSize.SMALL)) : this.setShell(o, ItemViewSize.SMALL, t.getGuid());
            var i = o.playStyle
              , r = t.getSmallColorMap(o.getTier());
            this._canvas && (this._canvas.setSize(ItemViewSize.SMALL),
            r && this._canvas.setColorMap(r),
            this._canvas.renderSpecial = o.isSpecial(),
            this._canvas.renderConcept = o.concept),
            h.prototype.renderItem.call(this, o, t),
            r && (this.applyColors(".playerOverview", r.header),
            this.applyColors(".playStyle", r.playStyleIcon),
            this.applyColors(".ut-item-view--bio", r.footer)),
            DOMKit.addClass(this.__playStyle, "chemstyle" + i),
            DOMKit.removeClass(this.__statsRowContract, UTItemView.CLASS.INVALID_STAT),
            o.isSuspended() && DOMKit.addClass(this.__statsRowContract, UTItemView.CLASS.INVALID_STAT),
            this.__playerContractLabel.textContent = services.Localization.localize("cards.cardfront.contractAbbr"),
            this.__playerContract.textContent = o.contract.toString(),
            r && this.applyColors(".ut-item-view--stats", r.footer);
            var n = o.isGK();
            if (this.__statLabel1.textContent = services.Localization.localize(n ? "cards.cardfront.divingAbbr" : "cards.cardfront.paceAbbr"),
            this.__statLabel2.textContent = services.Localization.localize(n ? "cards.cardfront.handlingAbbr" : "cards.cardfront.shootingAbbr"),
            this.__statLabel3.textContent = services.Localization.localize(n ? "cards.cardfront.kickAbbr" : "cards.cardfront.passingAbbr"),
            this.__statLabel4.textContent = services.Localization.localize(n ? "cards.cardfront.reflexAbbr" : "cards.cardfront.dribblingAbbr"),
            this.__statLabel5.textContent = services.Localization.localize(n ? "cards.cardfront.speedAbbr" : "cards.cardfront.defendingAbbr"),
            this.__statLabel6.textContent = services.Localization.localize(n ? "cards.cardfront.positionAbbr" : "cards.cardfront.headingAbbr"),
            o.isValid()) {
                var a = repositories.PlayStyle.getPlayStyleBonusById(i, o.isGK());
                this.applyChevrons(a)
            }
            r && (this.applyColors(".ut-item-view--style", r.footer),
            this._barSet1.applyStatBarColors(r.attributeValues),
            this._barSet2.applyStatBarColors(r.attributeValues),
            this._barSet3.applyStatBarColors(r.attributeValues),
            this._barSet4.applyStatBarColors(r.attributeValues),
            this._barSet5.applyStatBarColors(r.attributeValues),
            this._barSet6.applyStatBarColors(r.attributeValues));
            var l = services.Localization
              , c = null === (e = o.getPlayerSubAttributes()) || void 0 === e ? void 0 : e.slice(0, 3)
              , u = [this.__keyAttVal1, this.__keyAttVal2, this.__keyAttVal3]
              , p = [this.__keyAttLabel1, this.__keyAttLabel2, this.__keyAttLabel3];
            c && c.forEach(function(t, e) {
                if (t.highlight && DOMKit.addClass(u[e], "ut-item-view--strength-key-attribute"),
                c[e].type === ItemSubAttribute.workrate) {
                    var i = services.Localization.localize(s.generateWorkRateHALString(o.getOffensiveWorkRate()))
                      , r = services.Localization.localize(s.generateWorkRateHALString(o.getDefensiveWorkRate()));
                    u[e].textContent = "",
                    p[e].textContent = i + " / " + r
                } else if (u[e].textContent = t.value().toString(),
                p[e].textContent = l.localize("item.subattribute." + ItemSubAttribute[t.type]),
                t.type === ItemSubAttribute.weakfoot || t.type === ItemSubAttribute.skillmove) {
                    var n = new UTItemImageView;
                    n.setLocalResource("images/star.png"),
                    n.addClass("ut-skill-star"),
                    u[e].prepend(n.getRootElement())
                }
            }),
            r && (this.applyColors(".ut-item-view--strength", r.name),
            this.applyColors(".strength-header", r.name))
        }
    }
    ,
    UTSmallPlayerItemView.prototype.resetRender = function() {
        h.prototype.resetRender.call(this);
        DOMKit.removeClass(this.__playStyle, (this.__playStyle.className.match(/(^|\s)chemstyle\S+/g) || []).join(" "))
    }
    ,
    UTSmallPlayerItemView.prototype.getAssetDimensions = function(t, e) {
        e = e || !1;
        var i = 0
          , r = 0
          , n = 0
          , o = 0;
        return t === ItemAssetType.MAIN ? (i = e ? 78 : 53,
        r = e ? 85 : 53,
        n = e ? 6 : 32,
        o = e ? 21 : 28) : t === ItemAssetType.RANK ? (r = i = 6,
        n = 23,
        o = 20) : t === ItemAssetType.BADGE ? (r = i = 18,
        n = 14,
        o = 62) : t === ItemAssetType.FLAG ? (i = 14,
        r = 8,
        n = 16,
        o = 53) : t === ItemAssetType.SHELL && (i = 97,
        r = 114),
        new UTItemCanvasDTO({
            dynamic: e,
            height: r,
            width: i,
            xPos: n,
            yPos: o
        })
    }
    ,
    UTSmallPlayerItemView.prototype.setSkillMoves = function(t) {
        this.__skillMovesLabel.textContent = services.Localization.localize("cards.cardfront.skillMovesAbbr"),
        this.__skillMovesRating.textContent = t.toString()
    }
    ,
    UTSmallPlayerItemView.prototype.setWeakFoot = function(t, e) {
        var i = services.Localization.localize("cards.cardfront.weakFootAbbr")
          , r = t ? services.Localization.localize("cards.cardfront.weakFootRightAbbr") : services.Localization.localize("cards.cardfront.weakFootLeftAbbr");
        this.__weakFootLabel.textContent = i + " (" + r + ")",
        this.__weakFootRating.textContent = e.toString()
    }
    ,
    UTSmallPlayerItemView
}(UTPlayerItemView);
UTSmallPlayerItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("small"),
        t.classList.add("player"),
        t.classList.add("item"),
        this._canvas = new UTItemPlayerCanvasView,
        this._canvas.width = "97",
        this._canvas.height = "114",
        t.appendChild(this._canvas.getRootElement());
        var e = document.createElement("div");
        e.classList.add("ut-item-loader"),
        t.appendChild(e);
        var i = document.createElement("div");
        i.classList.add("statusOverlay"),
        t.appendChild(i),
        this.__strengthName = document.createElement("div"),
        this.__strengthName.classList.add("strength-header"),
        this.__strPlayerPosition = document.createElement("span"),
        this.__strPlayerPosition.classList.add("currentPosition"),
        this.__strengthName.appendChild(this.__strPlayerPosition),
        this.__strPlayerAltPositions = document.createElement("span"),
        this.__strPlayerAltPositions.classList.add("altPositions"),
        this.__strengthName.appendChild(this.__strPlayerAltPositions),
        t.appendChild(this.__strengthName);
        var r = document.createElement("div");
        r.classList.add("ut-item-player-status--restricted"),
        r.classList.add("ut-item-player-status"),
        t.appendChild(r),
        this.__mainViewDiv = document.createElement("div"),
        this.__mainViewDiv.classList.add("ut-item-view--main"),
        this.__mainViewDiv.classList.add("ut-item-view"),
        this.__loanInfoTab = document.createElement("div"),
        this.__loanInfoTab.classList.add("ut-item-player-status--loan"),
        this.__mainViewDiv.appendChild(this.__loanInfoTab);
        var n = document.createElement("div");
        n.classList.add("playerOverview"),
        this.__playerRating = document.createElement("div"),
        this.__playerRating.classList.add("rating"),
        n.appendChild(this.__playerRating),
        this.__playerPosition = document.createElement("div"),
        this.__playerPosition.classList.add("position"),
        n.appendChild(this.__playerPosition),
        this.__mainViewDiv.appendChild(n),
        t.appendChild(this.__mainViewDiv),
        this.__statsViewDiv = document.createElement("div"),
        this.__statsViewDiv.classList.add("ut-item-view--stats"),
        this.__statsViewDiv.classList.add("ut-item-view"),
        this.__skillMoves = document.createElement("div"),
        this.__skillMoves.classList.add("ut-item-row"),
        this.__skillMovesLabel = document.createElement("span"),
        this.__skillMovesLabel.classList.add("ut-item-row-label--left"),
        this.__skillMovesLabel.classList.add("ut-item-row-label"),
        this.__skillMoves.appendChild(this.__skillMovesLabel);
        var o = document.createElement("div");
        o.classList.add("ut-skill-star"),
        this.__skillMoves.appendChild(o),
        this.__skillMovesRating = document.createElement("span"),
        this.__skillMoves.appendChild(this.__skillMovesRating),
        this.__statsViewDiv.appendChild(this.__skillMoves),
        this.__weakFoot = document.createElement("div"),
        this.__weakFoot.classList.add("ut-item-row"),
        this.__weakFootLabel = document.createElement("span"),
        this.__weakFootLabel.classList.add("ut-item-row-label--left"),
        this.__weakFootLabel.classList.add("ut-item-row-label"),
        this.__weakFoot.appendChild(this.__weakFootLabel);
        var s = document.createElement("div");
        s.classList.add("ut-skill-star"),
        this.__weakFoot.appendChild(s),
        this.__weakFootRating = document.createElement("span"),
        this.__weakFoot.appendChild(this.__weakFootRating),
        this.__statsViewDiv.appendChild(this.__weakFoot),
        this.__statsRowContract = document.createElement("div"),
        this.__statsRowContract.classList.add("ut-item-row"),
        this.__playerContractLabel = document.createElement("span"),
        this.__playerContractLabel.classList.add("ut-item-row-label--left"),
        this.__playerContractLabel.classList.add("ut-item-row-label"),
        this.__statsRowContract.appendChild(this.__playerContractLabel),
        this.__playerContract = document.createElement("span"),
        this.__playerContract.classList.add("ut-item-row-label--right"),
        this.__playerContract.classList.add("ut-item-row-label"),
        this.__statsRowContract.appendChild(this.__playerContract),
        this.__statsViewDiv.appendChild(this.__statsRowContract),
        t.appendChild(this.__statsViewDiv),
        this.__styleViewDiv = document.createElement("div"),
        this.__styleViewDiv.classList.add("ut-item-view--style"),
        this.__styleViewDiv.classList.add("ut-item-view");
        var a = document.createElement("div");
        a.classList.add("ut-item-row"),
        a.classList.add("statCellRow");
        var l = document.createElement("div");
        l.classList.add("statCell"),
        this._barSet1 = new UTItemStatBarsView,
        l.appendChild(this._barSet1.getRootElement()),
        this.__statLabel1 = document.createElement("span"),
        this.__statLabel1.classList.add("statLabel"),
        l.appendChild(this.__statLabel1),
        a.appendChild(l);
        var c = document.createElement("div");
        c.classList.add("statCell"),
        this._barSet4 = new UTItemStatBarsView,
        c.appendChild(this._barSet4.getRootElement()),
        this.__statLabel4 = document.createElement("span"),
        this.__statLabel4.classList.add("Dribbling"),
        this.__statLabel4.classList.add("statLabel"),
        c.appendChild(this.__statLabel4),
        a.appendChild(c),
        this.__styleViewDiv.appendChild(a);
        var u = document.createElement("div");
        u.classList.add("ut-item-row"),
        u.classList.add("statCellRow");
        var p = document.createElement("div");
        p.classList.add("statCell"),
        this._barSet2 = new UTItemStatBarsView,
        p.appendChild(this._barSet2.getRootElement()),
        this.__statLabel2 = document.createElement("span"),
        this.__statLabel2.classList.add("Shooting"),
        this.__statLabel2.classList.add("statLabel"),
        p.appendChild(this.__statLabel2),
        u.appendChild(p);
        var h = document.createElement("div");
        h.classList.add("statCell"),
        this._barSet5 = new UTItemStatBarsView,
        h.appendChild(this._barSet5.getRootElement()),
        this.__statLabel5 = document.createElement("span"),
        this.__statLabel5.classList.add("Defending"),
        this.__statLabel5.classList.add("statLabel"),
        h.appendChild(this.__statLabel5),
        u.appendChild(h),
        this.__styleViewDiv.appendChild(u);
        var d = document.createElement("div");
        d.classList.add("ut-item-row"),
        d.classList.add("statCellRow");
        var _ = document.createElement("div");
        _.classList.add("statCell"),
        this._barSet3 = new UTItemStatBarsView,
        _.appendChild(this._barSet3.getRootElement()),
        this.__statLabel3 = document.createElement("span"),
        this.__statLabel3.classList.add("Passing"),
        this.__statLabel3.classList.add("statLabel"),
        _.appendChild(this.__statLabel3),
        d.appendChild(_);
        var y = document.createElement("div");
        y.classList.add("statCell"),
        this._barSet6 = new UTItemStatBarsView,
        y.appendChild(this._barSet6.getRootElement()),
        this.__statLabel6 = document.createElement("span"),
        this.__statLabel6.classList.add("Header"),
        this.__statLabel6.classList.add("statLabel"),
        y.appendChild(this.__statLabel6),
        d.appendChild(y),
        this.__styleViewDiv.appendChild(d),
        t.appendChild(this.__styleViewDiv),
        this.__bioViewDiv = document.createElement("div"),
        this.__bioViewDiv.classList.add("ut-item-view--bio"),
        this.__bioViewDiv.classList.add("ut-item-view");
        var f = document.createElement("div");
        f.classList.add("ut-item-row");
        var m = document.createElement("span");
        m.classList.add("ut-item-row-label--left"),
        m.classList.add("ut-item-row-label"),
        this._bioFlagImage = new UTImageView,
        m.appendChild(this._bioFlagImage.getRootElement()),
        f.appendChild(m);
        var T = document.createElement("span");
        T.classList.add("ut-item-row-label--center"),
        T.classList.add("ut-item-row-label"),
        this._bioNationPoints = new UTSquadSlotChemistryPointsView,
        this._bioNationPoints.getRootElement().classList.add("ut-player-item-bio-points"),
        T.appendChild(this._bioNationPoints.getRootElement()),
        f.appendChild(T),
        this.__bioNation = document.createElement("span"),
        this.__bioNation.classList.add("ut-item-row-label--right"),
        this.__bioNation.classList.add("ut-item-row-label"),
        f.appendChild(this.__bioNation),
        this.__bioViewDiv.appendChild(f);
        var g = document.createElement("div");
        g.classList.add("ut-item-row");
        var v = document.createElement("span");
        v.classList.add("ut-item-row-label--left"),
        v.classList.add("ut-item-row-label"),
        this._bioLeagueImage = new UTImageView,
        v.appendChild(this._bioLeagueImage.getRootElement()),
        g.appendChild(v);
        var E = document.createElement("span");
        E.classList.add("ut-item-row-label--center"),
        E.classList.add("ut-item-row-label"),
        this._bioLeaguePoints = new UTSquadSlotChemistryPointsView,
        this._bioLeaguePoints.getRootElement().classList.add("ut-player-item-bio-points"),
        E.appendChild(this._bioLeaguePoints.getRootElement()),
        g.appendChild(E),
        this.__bioLeague = document.createElement("span"),
        this.__bioLeague.classList.add("ut-item-row-label--right"),
        this.__bioLeague.classList.add("ut-item-row-label"),
        g.appendChild(this.__bioLeague),
        this.__bioViewDiv.appendChild(g);
        var S = document.createElement("div");
        S.classList.add("ut-item-row");
        var b = document.createElement("span");
        b.classList.add("ut-item-row-label--left"),
        b.classList.add("ut-item-row-label"),
        this._bioBadgeImage = new UTImageView,
        b.appendChild(this._bioBadgeImage.getRootElement()),
        S.appendChild(b);
        var I = document.createElement("span");
        I.classList.add("ut-item-row-label--center"),
        I.classList.add("ut-item-row-label"),
        this._bioClubPoints = new UTSquadSlotChemistryPointsView,
        this._bioClubPoints.getRootElement().classList.add("ut-player-item-bio-points"),
        I.appendChild(this._bioClubPoints.getRootElement()),
        S.appendChild(I),
        this.__bioClub = document.createElement("span"),
        this.__bioClub.classList.add("ut-item-row-label--right"),
        this.__bioClub.classList.add("ut-item-row-label"),
        S.appendChild(this.__bioClub),
        this.__bioViewDiv.appendChild(S);
        var C = document.createElement("div");
        C.classList.add("ut-item-player-bonuses"),
        C.classList.add("ut-item-row"),
        this.__biofirstOwner = document.createElement("span"),
        this.__biofirstOwner.classList.add("icon_chemistry_first_owner"),
        this.__biofirstOwner.classList.add("fut_icon"),
        C.appendChild(this.__biofirstOwner),
        this.__bioViewDiv.appendChild(C),
        t.appendChild(this.__bioViewDiv),
        this.__playStyle = document.createElement("div"),
        this.__playStyle.classList.add("playStyle"),
        t.appendChild(this.__playStyle),
        this.__strengthViewDiv = document.createElement("div"),
        this.__strengthViewDiv.classList.add("ut-item-view--strength"),
        this.__strengthViewDiv.classList.add("ut-item-view"),
        this.__keyAtt1 = document.createElement("div"),
        this.__keyAtt1.classList.add("ut-item-row"),
        this.__keyAttLabel1 = document.createElement("span"),
        this.__keyAttLabel1.classList.add("ut-item-row-label--left"),
        this.__keyAttLabel1.classList.add("ut-item-row-label"),
        this.__keyAtt1.appendChild(this.__keyAttLabel1),
        this.__keyAttVal1 = document.createElement("span"),
        this.__keyAttVal1.classList.add("ut-item-row-label--right"),
        this.__keyAttVal1.classList.add("ut-item-row-label"),
        this.__keyAtt1.appendChild(this.__keyAttVal1),
        this.__strengthViewDiv.appendChild(this.__keyAtt1),
        this.__keyAtt2 = document.createElement("div"),
        this.__keyAtt2.classList.add("ut-item-row"),
        this.__keyAttLabel2 = document.createElement("span"),
        this.__keyAttLabel2.classList.add("ut-item-row-label--left"),
        this.__keyAttLabel2.classList.add("ut-item-row-label"),
        this.__keyAtt2.appendChild(this.__keyAttLabel2),
        this.__keyAttVal2 = document.createElement("span"),
        this.__keyAttVal2.classList.add("ut-item-row-label--right"),
        this.__keyAttVal2.classList.add("ut-item-row-label"),
        this.__keyAtt2.appendChild(this.__keyAttVal2),
        this.__strengthViewDiv.appendChild(this.__keyAtt2),
        this.__keyAtt3 = document.createElement("div"),
        this.__keyAtt3.classList.add("ut-item-row"),
        this.__keyAttLabel3 = document.createElement("span"),
        this.__keyAttLabel3.classList.add("ut-item-row-label--left"),
        this.__keyAttLabel3.classList.add("ut-item-row-label"),
        this.__keyAtt3.appendChild(this.__keyAttLabel3),
        this.__keyAttVal3 = document.createElement("span"),
        this.__keyAttVal3.classList.add("ut-item-row-label--right"),
        this.__keyAttVal3.classList.add("ut-item-row-label"),
        this.__keyAtt3.appendChild(this.__keyAttVal3),
        this.__strengthViewDiv.appendChild(this.__keyAtt3),
        t.appendChild(this.__strengthViewDiv),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSmallPlayerItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._canvas.destroy(),
    this.__strengthName = null,
    this.__strPlayerPosition = null,
    this.__strPlayerAltPositions = null,
    this.__mainViewDiv = null,
    this.__loanInfoTab = null,
    this.__playerRating = null,
    this.__playerPosition = null,
    this.__statsViewDiv = null,
    this.__skillMoves = null,
    this.__skillMovesLabel = null,
    this.__skillMovesRating = null,
    this.__weakFoot = null,
    this.__weakFootLabel = null,
    this.__weakFootRating = null,
    this.__statsRowContract = null,
    this.__playerContractLabel = null,
    this.__playerContract = null,
    this.__styleViewDiv = null,
    this._barSet1.destroy(),
    this.__statLabel1 = null,
    this._barSet4.destroy(),
    this.__statLabel4 = null,
    this._barSet2.destroy(),
    this.__statLabel2 = null,
    this._barSet5.destroy(),
    this.__statLabel5 = null,
    this._barSet3.destroy(),
    this.__statLabel3 = null,
    this._barSet6.destroy(),
    this.__statLabel6 = null,
    this.__bioViewDiv = null,
    this._bioFlagImage.destroy(),
    this._bioNationPoints.destroy(),
    this.__bioNation = null,
    this._bioLeagueImage.destroy(),
    this._bioLeaguePoints.destroy(),
    this.__bioLeague = null,
    this._bioBadgeImage.destroy(),
    this._bioClubPoints.destroy(),
    this.__bioClub = null,
    this.__biofirstOwner = null,
    this.__playStyle = null,
    this.__strengthViewDiv = null,
    this.__keyAtt1 = null,
    this.__keyAttLabel1 = null,
    this.__keyAttVal1 = null,
    this.__keyAtt2 = null,
    this.__keyAttLabel2 = null,
    this.__keyAttVal2 = null,
    this.__keyAtt3 = null,
    this.__keyAttLabel3 = null,
    this.__keyAttVal3 = null
}
,
UTSmallPlayerItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSmallStadiumItemView = function(r) {
    function UTSmallStadiumItemView() {
        return r.call(this) || this
    }
    return __extends(UTSmallStadiumItemView, r),
    UTSmallStadiumItemView.prototype.renderItem = function(t, e) {
        r.prototype.renderItem.call(this, t, e);
        var i = t.isSpecial() ? null == e ? void 0 : e.getGuid() : void 0;
        this.setShell(t, ItemViewSize.SMALL, i),
        this.renderStadiumRestrictions(t)
    }
    ,
    UTSmallStadiumItemView
}(UTStadiumItemView);
UTSmallStadiumItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("small"),
        t.classList.add("stadium"),
        t.classList.add("item");
        var e = document.createElement("span");
        e.classList.add("statusOverlay"),
        t.appendChild(e),
        this._mainImage = new UTItemImageView,
        this._mainImage.getRootElement().classList.add("photo"),
        t.appendChild(this._mainImage.getRootElement());
        var i = document.createElement("div");
        i.classList.add("stadium"),
        i.classList.add("iconClub"),
        t.appendChild(i),
        this.__restrictedIcons = document.createElement("div"),
        this.__restrictedIcons.classList.add("restricted"),
        this.__restrictedBanner = document.createElement("div"),
        this.__restrictedBanner.classList.add("banner"),
        this.__restrictedBanner.classList.add("iconClub"),
        this.__restrictedIcons.appendChild(this.__restrictedBanner),
        this.__restrictedTifo = document.createElement("div"),
        this.__restrictedTifo.classList.add("tifo"),
        this.__restrictedTifo.classList.add("iconClub"),
        this.__restrictedIcons.appendChild(this.__restrictedTifo),
        t.appendChild(this.__restrictedIcons),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSmallStadiumItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._mainImage.destroy(),
    this.__restrictedIcons = null,
    this.__restrictedBanner = null,
    this.__restrictedTifo = null
}
,
UTSmallStadiumItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSmallVanityItemView = function(s) {
    function UTSmallVanityItemView() {
        return s.call(this) || this
    }
    return __extends(UTSmallVanityItemView, s),
    UTSmallVanityItemView.prototype.renderItem = function(t, e) {
        s.prototype.renderItem.call(this, t, e);
        var i = e.getExpColorMap(t.getTier())
          , r = t.isSpecial() ? null == e ? void 0 : e.getGuid() : void 0;
        if (this._mainImage) {
            var n = ""
              , o = "";
            t.authenticity ? (n = AssetLocationUtils.getBadgeImageUri(t.getItemAssetId(), enums.UIThemeVariation.LIGHT),
            this._mainImage.placeholderCssClass = "authentic") : n = AssetLocationUtils.getVanityImageUri(t.subtype, t.subtype === ItemSubType.VANITY_STADIUM_BASE_PITCH_MOW_PATTERN ? UTItemEntity.DEFAULT_MOWPATTERN_ASSET_ID : UTItemEntity.DEFAULT_ASSET_ID, ItemViewSize.SMALL),
            o = t.authenticity && t.subtype === ItemSubType.VANITY_STADIUM_THEME ? (this._mainImage.addClass("authentic"),
            n) : AssetLocationUtils.getVanityImageUri(t.subtype, t.getItemAssetId(), ItemViewSize.SMALL),
            this._mainImage.placeholderURL = n,
            this._mainImage.setResource(o, !0)
        }
        this.setShell(t, ItemViewSize.SMALL, r),
        i && this.applyColors(".vanity.iconClub", i.playStyleIcon)
    }
    ,
    UTSmallVanityItemView
}(UTVanityItemView);
UTSmallVanityItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("small"),
        t.classList.add("vanity"),
        t.classList.add("item");
        var e = document.createElement("span");
        e.classList.add("statusOverlay"),
        t.appendChild(e),
        this._mainImage = new UTItemImageView,
        this._mainImage.getRootElement().classList.add("photo"),
        t.appendChild(this._mainImage.getRootElement()),
        this.__icon = document.createElement("div"),
        this.__icon.classList.add("vanity"),
        this.__icon.classList.add("iconClub"),
        t.appendChild(this.__icon),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSmallVanityItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._mainImage.destroy(),
    this.__icon = null
}
,
UTSmallVanityItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTItemViewFactory = function(t) {
    function UTItemViewFactory() {
        return t.call(this) || this
    }
    return __extends(UTItemViewFactory, t),
    UTItemViewFactory.prototype.createLargeItem = function(t) {
        var e;
        switch (t.type) {
        case ItemType.PLAYER:
            e = t.isCustomBrick() ? new UTLargeCustomBrickItemView : new UTLargePlayerItemView;
            break;
        case ItemType.MANAGER:
            e = new UTLargeManagerItemView;
            break;
        case ItemType.BADGE:
            e = new UTLargeBadgeItemView;
            break;
        case ItemType.KIT:
            e = new UTLargeKitItemView;
            break;
        case ItemType.BALL:
            e = new UTLargeBallItemView;
            break;
        case ItemType.STADIUM:
            e = new UTLargeStadiumItemView;
            break;
        case ItemType.TRAINING:
            e = t.isStyleModifier() ? new UTLargeChemistryStyleItemView : new UTLargeConsumableItemView;
            break;
        case ItemType.HEALTH:
        case ItemType.CONTRACT:
            e = new UTLargeConsumableItemView;
            break;
        case ItemType.MISC:
            e = new UTLargeMiscItemView;
            break;
        case ItemType.VANITY:
            e = new UTLargeVanityItemView;
            break;
        default:
            e = new UTLargePlayerItemView
        }
        return e
    }
    ,
    UTItemViewFactory.prototype.createSmallItem = function(t) {
        var e;
        switch (DebugUtils.Assert(t instanceof UTItemEntity, "Expected an item entity"),
        t.type) {
        case ItemType.PLAYER:
            e = t.isCustomBrick() ? new UTSmallCustomBrickItemView : new UTSmallPlayerItemView;
            break;
        case ItemType.MANAGER:
            e = new UTSmallManagerItemView;
            break;
        case ItemType.BADGE:
            e = new UTSmallBadgeItemView;
            break;
        case ItemType.KIT:
            e = new UTSmallKitItemView;
            break;
        case ItemType.BALL:
            e = new UTSmallBallItemView;
            break;
        case ItemType.STADIUM:
            e = new UTSmallStadiumItemView;
            break;
        case ItemType.TRAINING:
            e = t.isStyleModifier() ? new UTSmallChemistryStyleItemView : new UTSmallConsumableItemView;
            break;
        case ItemType.HEALTH:
        case ItemType.CONTRACT:
            e = new UTSmallConsumableItemView;
            break;
        case ItemType.MISC:
            e = new UTSmallMiscItemView;
            break;
        case ItemType.VANITY:
            e = new UTSmallVanityItemView;
            break;
        default:
            e = new UTSmallPlayerItemView
        }
        return e
    }
    ,
    UTItemViewFactory
}(EAObject);
NamespaceManager.Register("factories"),
JSUtils.isObject(factories) && (factories.ItemView = new UTItemViewFactory);
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTListTagView = function(e) {
    function UTListTagView() {
        var t = e.call(this) || this;
        return t.text = "",
        t
    }
    return __extends(UTListTagView, e),
    UTListTagView.prototype.render = function() {
        this.__tagName.textContent = this.text
    }
    ,
    UTListTagView.prototype.setString = function(t) {
        this.text = t
    }
    ,
    UTListTagView.prototype.getString = function() {
        return this.text
    }
    ,
    UTListTagView
}(UTView)
  , UTListActiveTagView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTListActiveTagView() {
        var t = e.call(this) || this;
        return t.iconClass = "",
        t
    }
    return __extends(UTListActiveTagView, e),
    UTListActiveTagView.prototype.setIconClass = function(t) {
        var e = "icon_" + t;
        DOMKit.removeClass(this.__activeTagIcon, this.iconClass),
        DOMKit.addClass(this.__activeTagIcon, e),
        this.iconClass = e
    }
    ,
    UTListActiveTagView
}(UTListTagView));
UTListActiveTagView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-list-tag-view"),
        t.classList.add("ut-list-active-tag-view");
        var e = document.createElement("div");
        e.classList.add("label-container"),
        this.__activeTagIcon = document.createElement("span"),
        this.__activeTagIcon.classList.add("fut_icon"),
        e.appendChild(this.__activeTagIcon),
        this.__tagName = document.createElement("span"),
        this.__tagName.classList.add("label"),
        e.appendChild(this.__tagName),
        t.appendChild(e),
        this.__root = t,
        this._generated = !0
    }
}
,
UTListActiveTagView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__activeTagIcon = null,
    this.__tagName = null
}
,
UTListActiveTagView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTListChemistryTagView = function(r) {
    function UTListChemistryTagView() {
        return r.call(this) || this
    }
    return __extends(UTListChemistryTagView, r),
    UTListChemistryTagView.prototype.setChemistryImpactString = function(t, e) {
        var i = services.Localization.localize("common.fraction", [t.toString(), UTSquadEntity.TOTAL_MAX_CHEM.toString()]);
        e < 0 ? (this.setState("negative"),
        i = i + " " + e.toString()) : 0 < e ? (this.setState("positive"),
        i = i + " +" + e.toString()) : this.setState("neutral"),
        r.prototype.setString.call(this, i)
    }
    ,
    UTListChemistryTagView.prototype.setState = function(t) {
        this.removeClass("negative positive neutral"),
        this.addClass(t)
    }
    ,
    UTListChemistryTagView
}(UTListTagView);
UTListChemistryTagView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-list-tag-view"),
        t.classList.add("ut-list-chemistry-tag-view");
        var e = document.createElement("div");
        e.classList.add("label-container"),
        this.__tagName = document.createElement("span"),
        this.__tagName.classList.add("label"),
        e.appendChild(this.__tagName),
        t.appendChild(e),
        this.__root = t,
        this._generated = !0
    }
}
,
UTListChemistryTagView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__tagName = null
}
,
UTListChemistryTagView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTContractListDataView = function(i) {
    function UTContractListDataView(t) {
        var e = i.call(this) || this;
        return e.loc = t.localization,
        e.clubRepo = t.clubRepo,
        e
    }
    return __extends(UTContractListDataView, i),
    UTContractListDataView.prototype.render = function(t, e) {
        if (this.__label.textContent = this.loc.localize("listdata.contracts", [t.contract.toString()]),
        e && e.isContract()) {
            var i = e.getStaticData()
              , r = void 0;
            r = t.isBronzeRating() ? i.bronzeBoost : t.isSilverRating() ? i.silverBoost : i.goldBoost,
            this.__delta.textContent = " +" + this.getDeltaPlusBonus(r)
        }
    }
    ,
    UTContractListDataView.prototype.getDeltaPlusBonus = function(t) {
        var e = t / 100 * this.clubRepo.managerContractBonus;
        return Math.floor(t + e)
    }
    ,
    UTContractListDataView.prototype.update = function(t, e) {}
    ,
    UTContractListDataView
}(UTView);
UTContractListDataView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("contracts-data-component"),
        this.__label = document.createElement("span"),
        t.appendChild(this.__label),
        this.__delta = document.createElement("span"),
        this.__delta.classList.add("statIncrease"),
        t.appendChild(this.__delta),
        this.__root = t,
        this._generated = !0
    }
}
,
UTContractListDataView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__label = null,
    this.__delta = null
}
,
UTContractListDataView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTHealingListDataView = function(i) {
    function UTHealingListDataView(t) {
        var e = i.call(this) || this;
        return e.loc = t.localization,
        e
    }
    return __extends(UTHealingListDataView, i),
    UTHealingListDataView.prototype.render = function(t, e) {
        if (this.__label.textContent = this.loc.localize("listdata.injury", [UTLocalizationUtil.injuryTypeToName(t.injuryType, this.loc), t.injuryGames.toString()]),
        e && e.isInjuryHealing()) {
            var i = e.getStaticData()
              , r = t.injuryGames - (i.amount < 0 ? t.injuryGames : i.amount);
            this.__delta.textContent = " -" + r
        }
    }
    ,
    UTHealingListDataView.prototype.update = function(t, e) {}
    ,
    UTHealingListDataView
}(UTView);
UTHealingListDataView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-healing-list-data-view"),
        this.__label = document.createElement("span"),
        t.appendChild(this.__label),
        this.__delta = document.createElement("span"),
        this.__delta.classList.add("statIncrease"),
        t.appendChild(this.__delta),
        this.__root = t,
        this._generated = !0
    }
}
,
UTHealingListDataView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__label = null,
    this.__delta = null
}
,
UTHealingListDataView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTManagerLeagueListDataView = function(i) {
    function UTManagerLeagueListDataView(t) {
        var e = i.call(this) || this;
        return e.loc = t.localization,
        e
    }
    return __extends(UTManagerLeagueListDataView, i),
    UTManagerLeagueListDataView.prototype.render = function(t, e) {
        var i = UTLocalizationUtil.leagueIdToName(t.leagueId, this.loc);
        if (this.__label.textContent = this.loc.localize("listdata.change", [i]),
        e && e.isManagerLeagueModifier()) {
            var r = UTLocalizationUtil.leagueIdToName(e.getStaticData().amount, this.loc);
            this.__delta.textContent = " " + r
        }
    }
    ,
    UTManagerLeagueListDataView.prototype.update = function(t) {}
    ,
    UTManagerLeagueListDataView
}(UTView);
UTManagerLeagueListDataView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-manager-league-list-data-view"),
        this.__label = document.createElement("span"),
        t.appendChild(this.__label),
        this.__delta = document.createElement("span"),
        this.__delta.classList.add("statIncrease"),
        t.appendChild(this.__delta),
        this.__root = t,
        this._generated = !0
    }
}
,
UTManagerLeagueListDataView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__label = null,
    this.__delta = null
}
,
UTManagerLeagueListDataView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPlayerPositionListDataView = function(i) {
    function UTPlayerPositionListDataView(t) {
        var e = i.call(this) || this;
        return e.loc = t.localization,
        e.squadRepo = t.squadRepo,
        e
    }
    return __extends(UTPlayerPositionListDataView, i),
    UTPlayerPositionListDataView.prototype.render = function(e, t) {
        var i = this
          , r = this.loc.localize("extendedPlayerInfo.positions.position" + e.preferredPosition);
        if (this.__label.textContent = this.loc.localize("listdata.change", [r]),
        t && t.isPlayerPositionModifier()) {
            var n = e.possiblePositions.filter(function(t) {
                return t !== e.preferredPosition
            }).map(function(t) {
                return UTLocalizationUtil.positionIdToName(t, i.loc)
            }).join("/");
            this.__delta.textContent = " " + n
        }
    }
    ,
    UTPlayerPositionListDataView.prototype.update = function(t) {}
    ,
    UTPlayerPositionListDataView
}(UTView);
UTPlayerPositionListDataView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-player-position-list-data-view"),
        this.__label = document.createElement("span"),
        t.appendChild(this.__label),
        this.__delta = document.createElement("span"),
        this.__delta.classList.add("statIncrease"),
        t.appendChild(this.__delta),
        this.__root = t,
        this._generated = !0
    }
}
,
UTPlayerPositionListDataView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__label = null,
    this.__delta = null
}
,
UTPlayerPositionListDataView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPlayerStatsListDataView = function(i) {
    function UTPlayerStatsListDataView(t) {
        var e = i.call(this) || this;
        return e.loc = t.localization,
        e
    }
    return __extends(UTPlayerStatsListDataView, i),
    UTPlayerStatsListDataView.prototype.render = function(n, t, e) {
        var i = n.getAttributes()
          , o = DOMKit.findElements(this.getRootElement(), ".label")
          , s = DOMKit.findElements(this.getRootElement(), ".value")
          , a = n.isGK() ? GK_STAT_NAMES : PLAYER_STAT_NAMES;
        if (i.forEach(function(t, e) {
            var i = o[e]
              , r = s[e];
            n.isValid() ? (i.innerHTML = services.Localization.localize(a[e]),
            r.innerHTML = t.toString()) : (i.innerHTML = "",
            r.innerHTML = ""),
            DOMKit.removeClass(i, "statIncrease statDecrease"),
            DOMKit.removeClass(r, "statIncrease statDecrease")
        }),
        t && t.isValid() && t.isPlayer() && n.isPlayer() && t.isGK() === n.isGK()) {
            var l = t.getAttributes();
            i.forEach(function(t, e) {
                var i = l[e];
                if (t !== i) {
                    var r = i < t ? "statIncrease" : "statDecrease";
                    DOMKit.addClass(o[e], r),
                    DOMKit.addClass(s[e], r)
                }
            })
        }
        JSUtils.isNumber(e) && 0 <= e && (this.__slotPosition.textContent = UTLocalizationUtil.positionIdToName(e, this.loc),
        DOMKit.addClass(this.__slotPosition, this.getZoneClass(e)))
    }
    ,
    UTPlayerStatsListDataView.prototype.update = function(t) {}
    ,
    UTPlayerStatsListDataView.prototype.getZoneClass = function(e) {
        if (0 === e)
            return "zone-gk";
        var t = JSUtils.find(POSITION_ZONE_LOOKUP, function(t) {
            return e >= t.minPosId && e <= t.maxPosId
        });
        if (t)
            switch (t.value) {
            case ZONE_ATTACKER_VALUE:
                return "zone-att";
            case ZONE_DEFENDER_VALUE:
                return "zone-def";
            case ZONE_MIDFIELDER_VALUE:
                return "zone-mid"
            }
        return ""
    }
    ,
    UTPlayerStatsListDataView
}(UTView);
UTPlayerStatsListDataView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("player-stats-data-component");
        var e = document.createElement("ul")
          , i = document.createElement("li")
          , r = document.createElement("span");
        r.classList.add("label"),
        i.appendChild(r);
        var n = document.createElement("span");
        n.classList.add("value"),
        i.appendChild(n),
        e.appendChild(i);
        var o = document.createElement("li")
          , s = document.createElement("span");
        s.classList.add("label"),
        o.appendChild(s);
        var a = document.createElement("span");
        a.classList.add("value"),
        o.appendChild(a),
        e.appendChild(o);
        var l = document.createElement("li")
          , c = document.createElement("span");
        c.classList.add("label"),
        l.appendChild(c);
        var u = document.createElement("span");
        u.classList.add("value"),
        l.appendChild(u),
        e.appendChild(l);
        var p = document.createElement("li")
          , h = document.createElement("span");
        h.classList.add("label"),
        p.appendChild(h);
        var d = document.createElement("span");
        d.classList.add("value"),
        p.appendChild(d),
        e.appendChild(p);
        var _ = document.createElement("li")
          , y = document.createElement("span");
        y.classList.add("label"),
        _.appendChild(y);
        var f = document.createElement("span");
        f.classList.add("value"),
        _.appendChild(f),
        e.appendChild(_);
        var m = document.createElement("li")
          , T = document.createElement("span");
        T.classList.add("label"),
        m.appendChild(T);
        var g = document.createElement("span");
        g.classList.add("value"),
        m.appendChild(g),
        e.appendChild(m),
        t.appendChild(e),
        this.__slotPosition = document.createElement("span"),
        this.__slotPosition.classList.add("slot-position"),
        t.appendChild(this.__slotPosition),
        this.__root = t,
        this._generated = !0
    }
}
,
UTPlayerStatsListDataView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__slotPosition = null
}
,
UTPlayerStatsListDataView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPlayStyleListDataView = function(i) {
    function UTPlayStyleListDataView(t) {
        var e = i.call(this) || this;
        return e.loc = t.localization,
        e
    }
    return __extends(UTPlayStyleListDataView, i),
    UTPlayStyleListDataView.prototype.render = function(t, e) {
        void 0 === e && (e = !1),
        this.applyStatBars(t),
        this.__label1.textContent = this.loc.localize(e ? "cards.cardfront.divingAbbr" : "cards.cardfront.paceAbbr"),
        this.__label2.textContent = this.loc.localize(e ? "cards.cardfront.handlingAbbr" : "cards.cardfront.shootingAbbr"),
        this.__label3.textContent = this.loc.localize(e ? "cards.cardfront.kickAbbr" : "cards.cardfront.passingAbbr"),
        this.__label4.textContent = this.loc.localize(e ? "cards.cardfront.reflexAbbr" : "cards.cardfront.dribblingAbbr"),
        this.__label5.textContent = this.loc.localize(e ? "cards.cardfront.speedAbbr" : "cards.cardfront.defendingAbbr"),
        this.__label6.textContent = this.loc.localize(e ? "cards.cardfront.positionAbbr" : "cards.cardfront.headingAbbr")
    }
    ,
    UTPlayStyleListDataView.prototype.update = function(t) {}
    ,
    UTPlayStyleListDataView.prototype.applyStatBars = function(t) {
        var n = [this._statBarSet1, this._statBarSet2, this._statBarSet3, this._statBarSet4, this._statBarSet5, this._statBarSet6]
          , o = [this.__label1, this.__label2, this.__label3, this.__label4, this.__label5, this.__label6];
        t.slice(0, 6).forEach(function(t, e) {
            var i = n[e]
              , r = o[e];
            i && i.setBarCount(t),
            r && DOMKit.toggleClass(r, "chemBoost", 0 < t)
        })
    }
    ,
    UTPlayStyleListDataView
}(UTView);
UTPlayStyleListDataView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("list-data-playstyle"),
        t.classList.add("styleView");
        var e = document.createElement("ul")
          , i = document.createElement("li");
        this.__label1 = document.createElement("span"),
        this.__label1.classList.add("Pace"),
        this.__label1.classList.add("statLabel"),
        i.appendChild(this.__label1),
        this._statBarSet1 = new UTItemStatBarsView,
        i.appendChild(this._statBarSet1.getRootElement()),
        e.appendChild(i);
        var r = document.createElement("li");
        this.__label2 = document.createElement("span"),
        this.__label2.classList.add("Shooting"),
        this.__label2.classList.add("statLabel"),
        r.appendChild(this.__label2),
        this._statBarSet2 = new UTItemStatBarsView,
        r.appendChild(this._statBarSet2.getRootElement()),
        e.appendChild(r);
        var n = document.createElement("li");
        this.__label3 = document.createElement("span"),
        this.__label3.classList.add("Passing"),
        this.__label3.classList.add("statLabel"),
        n.appendChild(this.__label3),
        this._statBarSet3 = new UTItemStatBarsView,
        n.appendChild(this._statBarSet3.getRootElement()),
        e.appendChild(n);
        var o = document.createElement("li");
        this.__label4 = document.createElement("span"),
        this.__label4.classList.add("Dibbling"),
        this.__label4.classList.add("statLabel"),
        o.appendChild(this.__label4),
        this._statBarSet4 = new UTItemStatBarsView,
        o.appendChild(this._statBarSet4.getRootElement()),
        e.appendChild(o);
        var s = document.createElement("li");
        this.__label5 = document.createElement("span"),
        this.__label5.classList.add("Defending"),
        this.__label5.classList.add("statLabel"),
        s.appendChild(this.__label5),
        this._statBarSet5 = new UTItemStatBarsView,
        s.appendChild(this._statBarSet5.getRootElement()),
        e.appendChild(s);
        var a = document.createElement("li");
        this.__label6 = document.createElement("span"),
        this.__label6.classList.add("Header"),
        this.__label6.classList.add("statLabel"),
        a.appendChild(this.__label6),
        this._statBarSet6 = new UTItemStatBarsView,
        a.appendChild(this._statBarSet6.getRootElement()),
        e.appendChild(a),
        t.appendChild(e),
        this.__root = t,
        this._generated = !0
    }
}
,
UTPlayStyleListDataView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__label1 = null,
    this._statBarSet1.destroy(),
    this.__label2 = null,
    this._statBarSet2.destroy(),
    this.__label3 = null,
    this._statBarSet3.destroy(),
    this.__label4 = null,
    this._statBarSet4.destroy(),
    this.__label5 = null,
    this._statBarSet5.destroy(),
    this.__label6 = null,
    this._statBarSet6.destroy()
}
,
UTPlayStyleListDataView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTRestoreItemListDataView = function(i) {
    function UTRestoreItemListDataView(t) {
        var e = i.call(this) || this;
        return e.loc = t.localization,
        e
    }
    return __extends(UTRestoreItemListDataView, i),
    UTRestoreItemListDataView.prototype.init = function() {
        i.prototype.init.call(this),
        this._restoreStats = new UTPlayerStatsListDataView({
            localization: this.loc
        }),
        this._restoreStats.addClass("ut-list-data-restore--stats"),
        DOMKit.insertBefore(this._restoreStats.getRootElement(), this.__restoreDate)
    }
    ,
    UTRestoreItemListDataView.prototype.dealloc = function() {
        this._restoreStats && (DOMKit.remove(this._restoreStats.getRootElement()),
        this._restoreStats.dealloc()),
        i.prototype.dealloc.call(this)
    }
    ,
    UTRestoreItemListDataView.prototype.render = function(t) {
        var e;
        null === (e = this._restoreStats) || void 0 === e || e.render(t),
        this.__restoreLabelDate.textContent = this.loc.localize("undoDiscard.row.dateLabel"),
        this.__restoreValueDate.textContent = this.loc.localizeDate(new Date(t.discardDate)),
        this.__restoreLabelPrice.textContent = this.loc.localize("undoDiscard.row.priceLabel"),
        this.__restoreValuePrice.textContent = this.loc.localizeNumber(t.discardValue)
    }
    ,
    UTRestoreItemListDataView.prototype.update = function(t) {}
    ,
    UTRestoreItemListDataView
}(UTView);
UTRestoreItemListDataView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-list-data-restore"),
        this.__restoreDate = document.createElement("div"),
        this.__restoreDate.classList.add("ut-list-data-restore--date"),
        this.__restoreLabelDate = document.createElement("span"),
        this.__restoreLabelDate.classList.add("label"),
        this.__restoreDate.appendChild(this.__restoreLabelDate),
        this.__restoreValueDate = document.createElement("span"),
        this.__restoreValueDate.classList.add("value"),
        this.__restoreDate.appendChild(this.__restoreValueDate),
        t.appendChild(this.__restoreDate);
        var e = document.createElement("div");
        e.classList.add("ut-list-data-restore--price"),
        this.__restoreLabelPrice = document.createElement("span"),
        this.__restoreLabelPrice.classList.add("label"),
        e.appendChild(this.__restoreLabelPrice),
        this.__restoreValuePrice = document.createElement("span"),
        this.__restoreValuePrice.classList.add("currency-coins"),
        this.__restoreValuePrice.classList.add("value"),
        e.appendChild(this.__restoreValuePrice),
        t.appendChild(e),
        this.__root = t,
        this._generated = !0
    }
}
,
UTRestoreItemListDataView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__restoreDate = null,
    this.__restoreLabelDate = null,
    this.__restoreValueDate = null,
    this.__restoreLabelPrice = null,
    this.__restoreValuePrice = null
}
,
UTRestoreItemListDataView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTStringListDataView = function(t) {
    function UTStringListDataView() {
        return t.call(this) || this
    }
    return __extends(UTStringListDataView, t),
    UTStringListDataView.prototype.render = function(t) {
        this.__str.textContent = t
    }
    ,
    UTStringListDataView.prototype.update = function() {}
    ,
    UTStringListDataView
}(UTView);
UTStringListDataView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("dataString"),
        this.__str = document.createElement("span"),
        this.__str.classList.add("subtype"),
        t.appendChild(this.__str),
        this.__root = t,
        this._generated = !0
    }
}
,
UTStringListDataView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__str = null
}
,
UTStringListDataView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSquadChemistryPointView = function(t) {
    function UTSquadChemistryPointView() {
        return t.call(this) || this
    }
    return __extends(UTSquadChemistryPointView, t),
    UTSquadChemistryPointView.prototype.reset = function() {
        this.removeClass(JSUtils.getObjectValues(UTSquadChemistryPointView.STATES).join(" "))
    }
    ,
    UTSquadChemistryPointView.prototype.render = function(t) {
        this.removeClass(JSUtils.getObjectValues(UTSquadChemistryPointView.STATES).join(" ")),
        this.addClass(t)
    }
    ,
    UTSquadChemistryPointView.STATES = {
        NONE: "",
        POTENTIAL: "state-potential",
        OBTAINED: "state-obtained"
    },
    UTSquadChemistryPointView
}(UTView);
UTSquadChemistryPointView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-squad-chemistry-point-view"),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSquadChemistryPointView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTSquadChemistryPointView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSquadSlotChemistryPointsView = function(e) {
    function UTSquadSlotChemistryPointsView() {
        var t = e.call(this) || this;
        return t.pointViews = [t._point1, t._point2, t._point3],
        t
    }
    return __extends(UTSquadSlotChemistryPointsView, e),
    UTSquadSlotChemistryPointsView.prototype.dealloc = function() {
        this.pointViews = [],
        e.prototype.dealloc.call(this)
    }
    ,
    UTSquadSlotChemistryPointsView.prototype.reset = function() {
        this.pointViews.forEach(function(t) {
            return t.reset()
        })
    }
    ,
    UTSquadSlotChemistryPointsView.prototype.isItemView = function() {
        this.hasClass("item") || this.addClass("item")
    }
    ,
    UTSquadSlotChemistryPointsView.prototype.render = function(r, n, t) {
        void 0 === n && (n = 0),
        void 0 === t && (t = !0),
        t && this.pointViews.forEach(function(t, e) {
            t.reset();
            var i = e + 1;
            i <= r ? t.render(UTSquadChemistryPointView.STATES.OBTAINED) : i <= n && t.render(UTSquadChemistryPointView.STATES.POTENTIAL)
        }),
        this.toggleClass("attention", !t),
        this.setDisplay(!0)
    }
    ,
    UTSquadSlotChemistryPointsView.prototype.setState = function(t) {
        this.removeClass(JSUtils.getObjectValues(UTSquadSlotChemistryPointsView.State).join(" ")),
        this.addClass(t)
    }
    ,
    UTSquadSlotChemistryPointsView.State = {
        NEGATIVE: "negative",
        NEUTRAL: "neutral",
        POSITIVE: "positive"
    },
    UTSquadSlotChemistryPointsView
}(UTView);
UTSquadSlotChemistryPointsView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-squad-slot-chemistry-points-view");
        var e = document.createElement("div");
        e.classList.add("ut-squad-slot-chemistry-points-view--container"),
        this._point1 = new UTSquadChemistryPointView,
        e.appendChild(this._point1.getRootElement()),
        this._point2 = new UTSquadChemistryPointView,
        e.appendChild(this._point2.getRootElement()),
        this._point3 = new UTSquadChemistryPointView,
        e.appendChild(this._point3.getRootElement()),
        t.appendChild(e),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSquadSlotChemistryPointsView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._point1.destroy(),
    this._point2.destroy(),
    this._point3.destroy()
}
,
UTSquadSlotChemistryPointsView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTItemTableCellView = function(e) {
    function UTItemTableCellView() {
        var t = e.call(this) || this;
        return t.activeTagComponent = null,
        t.chemistryTagComponent = null,
        t.chemistryPointsComponent = null,
        t.comparisonData = null,
        t.data = null,
        t.dataComponent = null,
        t.hasAction = !1,
        t.isDirty = !0,
        t.itemComponent = null,
        t.renderMode = ListItemPriority.DEFAULT,
        t.slotData = null,
        t.stadiumProgression = null,
        t.tapCallback = null,
        t
    }
    return __extends(UTItemTableCellView, e),
    UTItemTableCellView.prototype.init = function() {
        e.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTItemTableCellView.prototype.dealloc = function() {
        this.itemComponent && (this.itemComponent.dealloc(),
        this.itemComponent = null),
        this.activeTagComponent && (this.activeTagComponent.dealloc(),
        this.activeTagComponent = null),
        this.chemistryTagComponent && (this.chemistryTagComponent.dealloc(),
        this.chemistryTagComponent = null),
        this.chemistryPointsComponent && (this.chemistryPointsComponent = null),
        this.dataComponent && (this.dataComponent.dealloc(),
        this.dataComponent = null),
        this.data && this.data.getAuctionData().onDataUpdated.unobserve(this),
        this.data = null,
        this.slotData = null,
        this.stadiumProgression = null,
        this.comparisonData = null,
        this.tapCallback = null,
        this.actionCallback = null,
        e.prototype.dealloc.call(this)
    }
    ,
    UTItemTableCellView.prototype.setData = function(t, e, i, r) {
        this.data && this.data.getAuctionData().onDataUpdated.unobserve(this),
        this.renderMode = null != i ? i : ListItemPriority.DEFAULT,
        this.isDirty = !0,
        this.data = t,
        this.slotData = null != e ? e : null,
        this.stadiumProgression = r || null,
        this.data.getAuctionData().onDataUpdated.observe(this, this._eAuctionUpdated),
        this.setInteractionState(!0)
    }
    ,
    UTItemTableCellView.prototype.getData = function() {
        return this.data
    }
    ,
    UTItemTableCellView.prototype.setComparisonData = function(t) {
        this.comparisonData = t
    }
    ,
    UTItemTableCellView.prototype.setDataComponent = function(t) {
        this.dataComponent = t
    }
    ,
    UTItemTableCellView.prototype.setActiveTagComponent = function(t) {
        this.activeTagComponent = t
    }
    ,
    UTItemTableCellView.prototype.setChemistryTagComponent = function(t) {
        this.chemistryTagComponent = t
    }
    ,
    UTItemTableCellView.prototype.setChemistryPointsComponent = function(t) {
        this.chemistryPointsComponent = t
    }
    ,
    UTItemTableCellView.prototype.setAction = function(t, e) {
        DebugUtils.Assert(!this.hasAction, "Action already set."),
        this.hasAction || (this.actionCallback = e,
        this.addClass("has-action"),
        this._btnAction.addClass(t),
        this._btnAction.addTarget(this, this.actionCallback, EventType.TAP),
        this._btnAction.init(),
        this.hasAction = !0)
    }
    ,
    UTItemTableCellView.prototype.setActionState = function(t) {
        t ? this.enableAction() : this.disableAction()
    }
    ,
    UTItemTableCellView.prototype.disableAction = function() {
        this._btnAction.setInteractionState(!1)
    }
    ,
    UTItemTableCellView.prototype.enableAction = function() {
        this._btnAction.setInteractionState(!0)
    }
    ,
    UTItemTableCellView.prototype.render = function(t) {
        var e, i, r;
        if (void 0 === t && (t = !1),
        DebugUtils.Assert(JSUtils.isValid(this.data), "Missing item data in list row component."),
        this.data) {
            if (this.itemComponent && this.itemComponent.canRender(this.data) || (this.itemComponent && this.itemComponent.dealloc(),
            this.itemComponent = factories.ItemView.createSmallItem(this.data),
            this.itemComponent.init(),
            this.__entityContainer.insertBefore(this.itemComponent.getRootElement(), this.__entityContainer.firstChild)),
            this.renderItemData(),
            this.itemComponent.render(this.data),
            this.renderName(),
            this.dataComponent && this.isDirty && (this.dataComponent.dealloc(),
            this.dataComponent = null),
            this.dataComponent ? this._updateDataComponent(this.dataComponent, this.data, null !== (e = this.comparisonData) && void 0 !== e ? e : void 0, null !== (i = this.slotData) && void 0 !== i ? i : void 0) : this.setDataComponent(this._generateDataComponent(this.data, this.comparisonData)),
            !this.activeTagComponent && t && this.setActiveTagComponent(this._generateActiveTagComponent()),
            this.slotData && !this.slotData.isValid() && this.data.isPlayer() && (this.__name.textContent = BLANK_STR),
            this.dataComponent)
                if (this.__entityContainer.appendChild(this.dataComponent.getRootElement()),
                this.dataComponent instanceof UTPlayerStatsListDataView && this.slotData)
                    this.dataComponent.render(this.data, null !== (r = this.comparisonData) && void 0 !== r ? r : void 0, this.slotData.generalPosition);
                else if (this.dataComponent instanceof UTPlayStyleListDataView) {
                    var n = this.data
                      , o = n.isPlayer() ? n.playStyle : n.subtype
                      , s = n.isPlayer() ? n.isGK() : n.isGKStyleModifier()
                      , a = repositories.PlayStyle.getPlayStyleBonusById(o, s);
                    this.dataComponent.render(a, s)
                } else
                    !this.dataComponent || this.dataComponent instanceof UTStringListDataView ? this.dataComponent instanceof UTStringListDataView && this.addClass("has-substring") : this.dataComponent.render(this.data, this.comparisonData);
            this.activeTagComponent && (this.addClass("is-active"),
            this.__rowContent.appendChild(this.activeTagComponent.getRootElement()),
            this.activeTagComponent.render()),
            this.chemistryTagComponent && (this.__rowContent.appendChild(this.chemistryTagComponent.getRootElement()),
            this.chemistryTagComponent.render()),
            this.chemistryPointsComponent && this.itemComponent.renderChemistryPoints(this.chemistryPointsComponent),
            this._highlightUnassignedBought(),
            this.isDirty = !1,
            this.onTimedUpdate()
        }
    }
    ,
    UTItemTableCellView.prototype.renderChemistryBreakdown = function(t, e, i, r) {
        var n;
        null === (n = this.itemComponent) || void 0 === n || n.renderChemistryBreakdown(t, e, i, r)
    }
    ,
    UTItemTableCellView.prototype.renderItemData = function() {
        var t;
        if (DebugUtils.Assert(JSUtils.isValid(this.data), "Expected item data when rendering table cell."),
        this.data)
            switch (this.renderMode) {
            case ListItemPriority.DEFAULT:
                var e = this.data.getAuctionData()
                  , i = services.Localization;
                if (services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.TRADING_ENABLED) && e.isValid()) {
                    var r = 0 < e.currentBid ? e.currentBid : e.startingBid
                      , n = e.isClosedTrade() ? "auctioninfo.sold.condensed" : "auctioninfo.currentbid.condensed";
                    this.__auctionTimeLabel.textContent = i.localize("auctioninfo.timeremaining.condensed"),
                    this.addClass(UTItemTableCellView.CLASS.HAS_AUCTION_DATA),
                    this.__auctionBidLabel.textContent = i.localize(n),
                    this.__auctionBidValue.textContent = i.localizeNumber(r),
                    this.__auctionStartLabel.textContent = i.localize("auctioninfo.startprice"),
                    this.__auctionStartValue.textContent = i.localizeNumber(e.startingBid),
                    0 === e.buyNowPrice ? (DOMKit.toggleDisplayStyle(this.__auctionBuyLabel, !1),
                    DOMKit.toggleDisplayStyle(this.__auctionBuyValue, !1)) : (this.__auctionBuyLabel.textContent = i.localize("auctioninfo.buynowprice.condensed"),
                    this.__auctionBuyValue.textContent = i.localizeNumber(e.buyNowPrice)),
                    null === (t = this.itemComponent) || void 0 === t || t.renderAuctionState(e)
                } else
                    this.removeClass(UTItemTableCellView.CLASS.HAS_AUCTION_DATA),
                    DOMKit.toggleDisplayStyle(this.__auction, !1);
                break;
            default:
                this.removeClass(UTItemTableCellView.CLASS.HAS_AUCTION_DATA),
                DOMKit.toggleDisplayStyle(this.__auction, !1)
            }
    }
    ,
    UTItemTableCellView.prototype.setSelected = function(t) {
        this.toggleClass(enums.UIState.SELECTED, t)
    }
    ,
    UTItemTableCellView.prototype.renderName = function() {
        if (DebugUtils.Assert(JSUtils.isValid(this.data), "Expected item data to render the item name."),
        this.data) {
            var t = services.Localization
              , e = this.data.getStaticData()
              , i = BLANK_STR;
            if (this.data.isBadge() || this.data.isKit())
                i = UTLocalizationUtil.teamIdToAbbr15(this.data.teamId, t);
            else if (this.data.isBall())
                i = t.localize(e.description);
            else if (this.data.isManagerContract())
                i = t.localize("card.title.managercontracts");
            else if (this.data.isPlayerContract())
                i = t.localize("card.title.playercontracts");
            else if (this.data.isInjuryHealing())
                switch (this.data.subtype) {
                case ItemSubType.HEALING_ALL:
                    i = t.localize("list.healing.all.injuries");
                    break;
                default:
                    i = t.localize("card.title.healing")
                }
            else
                this.data.isPlayer() || this.data.isManager() ? i = e.name : this.data.isVanityItem() ? i = t.localize(e.name) : this.data.isMiscItem() ? this.data.isFreeCoins() ? i = t.localize("card.desc.misc.coins", [e.amount.toString()]) : this.data.isDraftToken() ? i = t.localize("card.desc.misc.drafttoken") : this.data.isFreePack() ? i = e.hasLoanPackDescription() ? t.localize("card.desc.FreeLoanPackDesc") : this.data.isBronzeRating() ? t.localize("card.desc.freebronze") : this.data.isSilverRating() ? t.localize("card.desc.freesilver") : t.localize("card.desc.freegold") : this.data.isPlayerPickItem() && (i = t.localize("card.desc.misc.draftitem")) : this.data.isStadium() ? i = e.description : this.data.isStyleModifier() ? i = UTLocalizationUtil.playStyleIdToName(this.data.subtype, t) : this.data.isPlayerPositionModifier() ? i = t.localize("card.desc.training.pos") : this.data.isManagerLeagueModifier() && (i = t.localize("global.leagueFull." + APP_YEAR + ".league" + this.data.leagueId));
            this.__auctionTime.textContent = BLANK_STR,
            this.__name.textContent = i
        }
    }
    ,
    UTItemTableCellView.prototype.onTimedUpdate = function() {
        this.dataComponent && this.dataComponent.update(this.data),
        this._renderAuctionState()
    }
    ,
    UTItemTableCellView.prototype._renderAuctionState = function() {
        var t;
        if (this.data) {
            var e = this.data.getAuctionData()
              , i = [UTItemTableCellView.CLASS.WON, UTItemTableCellView.CLASS.EXPIRED, UTItemTableCellView.CLASS.HIGHEST_BID, UTItemTableCellView.CLASS.OUTBID, UTItemTableCellView.CLASS.PROCESSING].join(" ");
            switch (this.removeClass(i),
            this.itemComponent && this.itemComponent.removeClass(i),
            this.renderMode) {
            case ListItemPriority.DEFAULT:
                if (services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.TRADING_ENABLED) && e.isValid()) {
                    if (e.getSecondsRemaining() <= 0) {
                        e.isWon() || e.isSold() ? this.addClass(UTItemTableCellView.CLASS.WON) : e.isPendingExpiry() ? e.isOutbid() ? this.addClass(UTItemTableCellView.CLASS.OUTBID) : e.isHighestBid() && this.addClass(UTItemTableCellView.CLASS.HIGHEST_BID) : this.addClass(UTItemTableCellView.CLASS.EXPIRED);
                        var r = e.isPendingExpiry() ? "auctioninfo.timeremaining.pending.condensed" : "watchlist.dock.categories.expired.condensed";
                        this.__auctionTime.textContent = services.Localization.localize(r),
                        DOMKit.removeClass(this.__auctionTime, "expiring alarm-txt")
                    } else {
                        var n = e.getSecondsRemaining();
                        this.__auctionTime.textContent = services.Localization.localizeAuctionTimeRemaining(n),
                        0 < n && n < AUCTION_COUNTDOWN_FLASING_THRESHOLD ? (DOMKit.addClass(this.__auctionTime, "alarm-txt"),
                        n <= AUCTION_COUNTDOWN_ALERT_THRESHOLD && DOMKit.addClass(this.__auctionTime, "expiring")) : DOMKit.removeClass(this.__auctionTime, "expiring alarm-txt"),
                        e.isWon() ? this.addClass(UTItemTableCellView.CLASS.WON) : e.isOutbid() ? this.addClass(UTItemTableCellView.CLASS.OUTBID) : e.isHighestBid() && this.addClass(UTItemTableCellView.CLASS.HIGHEST_BID)
                    }
                    this.__auctionBidValue.textContent = 0 < e.currentBid ? services.Localization.localizeNumber(e.currentBid) : BLANK_STR
                } else
                    DOMKit.toggleDisplayStyle(this.__auction, !1),
                    this._highlightUnassignedBought();
                null === (t = this.itemComponent) || void 0 === t || t.renderAuctionState(e),
                DOMKit.toggleClass(this.__name, "watchIcon", !e.tradeOwner && e.watched && !e.isWon());
                break;
            default:
                this.removeClass(UTItemTableCellView.CLASS.HAS_AUCTION_DATA),
                this._highlightUnassignedBought(),
                DOMKit.toggleDisplayStyle(this.__auction, !1)
            }
        }
    }
    ,
    UTItemTableCellView.prototype._highlightUnassignedBought = function() {
        var t = !!this.data && (this.data.pile === ItemPile.PURCHASED && 0 < this.data.lastSalePrice);
        this.toggleClass("won", t)
    }
    ,
    UTItemTableCellView.prototype._updateDataComponent = function(t, e, i, r) {
        e.isPlayer() && t instanceof UTPlayerStatsListDataView ? t.render(e, i, r ? r.generalPosition : void 0) : JSUtils.isValid(this.stadiumProgression) && t instanceof UTStringListDataView ? t.render(this._getProgressionString(e)) : t.update(e)
    }
    ,
    UTItemTableCellView.prototype._getProgressionString = function(t) {
        var e = this.stadiumProgression ? this.stadiumProgression[t.subtype] : null
          , i = "";
        if (e && e.locked)
            if (e.inThisTier)
                i = services.Localization.localize("stadium.progress.restricted");
            else {
                var r = "stadium.entity.tier" + e.unlockTier;
                i = services.Localization.localize("stadium.progress.restricted.level", [services.Localization.localize(r)])
            }
        return i
    }
    ,
    UTItemTableCellView.prototype._generateActiveTagComponent = function() {
        var t = new UTListActiveTagView
          , e = services.Localization.localize("listrow.clubitem.active").toUpperCase();
        return t.setIconClass("club"),
        t.setString(e),
        t
    }
    ,
    UTItemTableCellView.prototype._generateDataComponent = function(t, e) {
        var i = null
          , r = t.getStaticData()
          , n = services.Localization;
        if (e && e.isConsumable() && !e.canApplyTo(t))
            this.disableAction(),
            i = new UTStringListDataView,
            t.isManager() ? i.render(n.localize("panel.applyitem.invaliditem_manager")) : t.isPlayer() && i.render(n.localize("panel.applyitem.invaliditem")),
            i.addClass("unapplicableConsumable");
        else if (t.isStyleModifier())
            i = new UTPlayStyleListDataView({
                localization: n
            }),
            this.addClass(UTItemTableCellView.CLASS.CHEMISTRY_STYLE);
        else if (e && e.isContract() && (t.isPlayer() || t.isManager()))
            i = new UTContractListDataView({
                localization: n,
                clubRepo: repositories.Item.getClub()
            });
        else if (e && e.isManagerLeagueModifier() && t.isManager())
            i = new UTManagerLeagueListDataView({
                localization: n
            });
        else if (e && e.isConsumable() && t.isPlayer())
            e.isPlayerPositionModifier() ? i = new UTPlayerPositionListDataView({
                localization: n,
                squadRepo: repositories.Squad
            }) : e.isInjuryHealing() ? i = new UTHealingListDataView({
                localization: n
            }) : e.isStyleModifier() ? (i = new UTPlayStyleListDataView({
                localization: n
            }),
            this.addClass(UTItemTableCellView.CLASS.CHEMISTRY_STYLE)) : e.isTraining() && (i = new UTPlayerStatsListDataView({
                localization: n
            }));
        else if (t.isPlayer())
            i = t.isRecoverable() ? new UTRestoreItemListDataView({
                localization: n
            }) : new UTPlayerStatsListDataView({
                localization: n
            });
        else if (t.isHealth()) {
            var o = n.localize("listrow.clubitem.consumableAmount");
            (i = new UTStringListDataView).render(o + ": +" + n.localizeNumber(r.amount))
        } else if (t.isTraining()) {
            var s = "";
            if (t.isManagerLeagueModifier())
                s = (o = n.localize("listrow.clubitem.consumableLeague")) + ": +" + UTLocalizationUtil.leagueIdToAbbr5(t.leagueId, n);
            (i = new UTStringListDataView).render(s)
        } else if (t.isStadium() && (t.bannerRestricted || t.tifoRestricted) && !t.getAuctionData().isValid()) {
            var a = [];
            t.bannerRestricted && a.push(n.localize("card.desc.banner")),
            t.tifoRestricted && a.push(n.localize("card.desc.tifo"));
            var l = n.locale.isRTL() ? a.join(" ,") : a.join(", ")
              , c = n.localize("listrow.stadium.restricted", [l]);
            (i = new UTStringListDataView).render(c)
        } else
            this.stadiumProgression && t.isVanityItem() && (t.getAuctionData().isValid() || (i = new UTStringListDataView).render(this._getProgressionString(t)),
            DOMKit.toggleClass(this.__name, "locked", this.stadiumProgression[t.subtype].locked));
        return DOMKit.toggleClass(this.__name, "untradeable", t.untradeable && !t.getAuctionData().isSold() || t.isLoaned()),
        i
    }
    ,
    UTItemTableCellView.prototype.setTapCallback = function(t) {
        this.tapCallback = t,
        DOMKit.addClass(this.__rowContent, "has-tap-callback")
    }
    ,
    UTItemTableCellView.prototype._mouseEnter = function(t) {
        this.addClass(enums.UIState.HOVER)
    }
    ,
    UTItemTableCellView.prototype._mouseLeave = function(t) {
        this.removeClass(enums.UIState.HOVER)
    }
    ,
    UTItemTableCellView.prototype._touchStarted = function(t) {
        e.prototype._touchStarted.call(this, t),
        DOMKit.addClass(this.__rowContent, enums.UIState.ACTIVE)
    }
    ,
    UTItemTableCellView.prototype._touchMoved = function(t) {
        e.prototype._touchMoved.call(this, t),
        DOMKit.removeClass(this.__rowContent, enums.UIState.ACTIVE)
    }
    ,
    UTItemTableCellView.prototype._touchEnded = function(t) {
        e.prototype._touchEnded.call(this, t),
        DOMKit.removeClass(this.__rowContent, enums.UIState.ACTIVE)
    }
    ,
    UTItemTableCellView.prototype._tapDetected = function(t) {
        e.prototype._tapDetected.call(this, t),
        this.tapCallback && this.data && this.tapCallback(this.data)
    }
    ,
    UTItemTableCellView.prototype._eAuctionUpdated = function(t, e) {
        this.itemComponent && this.renderItemData(),
        this._renderAuctionState()
    }
    ,
    UTItemTableCellView.CLASS = {
        HAS_AUCTION_DATA: "has-auction-data",
        SBC: "sbc",
        HAS_ACTION: "hasAction",
        WON: "won",
        EXPIRED: "expired",
        OUTBID: "outbid",
        HIGHEST_BID: "highest-bid",
        PROCESSING: "processing",
        CHEMISTRY_STYLE: "chemistryStyle"
    },
    UTItemTableCellView
}(UTTargetActionView);
UTItemTableCellView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("li");
        t.classList.add("listFUTItem"),
        this._btnAction = new UTImageButtonControl,
        this._btnAction.getRootElement().classList.add("btnAction"),
        t.appendChild(this._btnAction.getRootElement()),
        this.__rowContent = document.createElement("div"),
        this.__rowContent.classList.add("rowContent"),
        this.__entityContainer = document.createElement("div"),
        this.__entityContainer.classList.add("entityContainer"),
        this.__name = document.createElement("div"),
        this.__name.classList.add("name"),
        this.__entityContainer.appendChild(this.__name),
        this.__rowContent.appendChild(this.__entityContainer),
        this.__auction = document.createElement("div"),
        this.__auction.classList.add("auction");
        var e = document.createElement("div");
        e.classList.add("auctionStartPrice"),
        e.classList.add("auctionValue"),
        this.__auctionStartLabel = document.createElement("span"),
        this.__auctionStartLabel.classList.add("label"),
        e.appendChild(this.__auctionStartLabel),
        this.__auctionStartValue = document.createElement("span"),
        this.__auctionStartValue.classList.add("currency-coins"),
        this.__auctionStartValue.classList.add("value"),
        e.appendChild(this.__auctionStartValue),
        this.__auction.appendChild(e);
        var i = document.createElement("div");
        i.classList.add("auctionValue"),
        this.__auctionBidLabel = document.createElement("span"),
        this.__auctionBidLabel.classList.add("label"),
        i.appendChild(this.__auctionBidLabel),
        this.__auctionBidValue = document.createElement("span"),
        this.__auctionBidValue.classList.add("currency-coins"),
        this.__auctionBidValue.classList.add("value"),
        i.appendChild(this.__auctionBidValue),
        this.__auction.appendChild(i);
        var r = document.createElement("div");
        r.classList.add("auctionValue"),
        this.__auctionBuyLabel = document.createElement("span"),
        this.__auctionBuyLabel.classList.add("label"),
        r.appendChild(this.__auctionBuyLabel),
        this.__auctionBuyValue = document.createElement("span"),
        this.__auctionBuyValue.classList.add("currency-coins"),
        this.__auctionBuyValue.classList.add("value"),
        r.appendChild(this.__auctionBuyValue),
        this.__auction.appendChild(r);
        var n = document.createElement("div");
        n.classList.add("auction-state"),
        this.__auctionTimeLabel = document.createElement("span"),
        this.__auctionTimeLabel.classList.add("label"),
        n.appendChild(this.__auctionTimeLabel),
        this.__auctionTime = document.createElement("span"),
        this.__auctionTime.classList.add("time"),
        n.appendChild(this.__auctionTime),
        this.__auction.appendChild(n),
        this.__rowContent.appendChild(this.__auction),
        t.appendChild(this.__rowContent),
        this.__root = t,
        this._generated = !0
    }
}
,
UTItemTableCellView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._btnAction.destroy(),
    this.__rowContent = null,
    this.__entityContainer = null,
    this.__name = null,
    this.__auction = null,
    this.__auctionStartLabel = null,
    this.__auctionStartValue = null,
    this.__auctionBidLabel = null,
    this.__auctionBidValue = null,
    this.__auctionBuyLabel = null,
    this.__auctionBuyValue = null,
    this.__auctionTimeLabel = null,
    this.__auctionTime = null
}
,
UTItemTableCellView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPinnedItemTableCellView = function(e) {
    function UTPinnedItemTableCellView() {
        return e.call(this) || this
    }
    return __extends(UTPinnedItemTableCellView, e),
    UTPinnedItemTableCellView.prototype.init = function() {
        e.prototype.init.call(this),
        this._btnRight.init(),
        this._btnLeft.init()
    }
    ,
    UTPinnedItemTableCellView.prototype.dealloc = function() {
        var t;
        null === (t = this.itemCell) || void 0 === t || t.dealloc(),
        this.itemCell = null,
        e.prototype.dealloc.call(this)
    }
    ,
    UTPinnedItemTableCellView.prototype.getBtnLeft = function() {
        return this._btnLeft
    }
    ,
    UTPinnedItemTableCellView.prototype.getBtnRight = function() {
        return this._btnRight
    }
    ,
    UTPinnedItemTableCellView.prototype.toggleIteratorButtons = function(t) {
        this.toggleClass("has-iterator", t)
    }
    ,
    UTPinnedItemTableCellView.prototype.setHasNext = function(t) {
        this._btnRight.setDisplay(t)
    }
    ,
    UTPinnedItemTableCellView.prototype.setHasPrev = function(t) {
        this._btnLeft.setDisplay(t)
    }
    ,
    UTPinnedItemTableCellView.prototype.pinListItem = function(t, e) {
        this.itemCell ? (this.itemCell.setData(t, e),
        this.itemCell.render()) : (this.itemCell = new UTItemTableCellView,
        this.itemCell.setData(t, e),
        this.itemCell.render(),
        this.addSubview(this.itemCell, this.__list),
        this.layoutSubviews())
    }
    ,
    UTPinnedItemTableCellView.prototype.setChemistryPointsComponent = function(t) {
        var e, i;
        null === (e = this.itemCell) || void 0 === e || e.setChemistryPointsComponent(t),
        null === (i = this.itemCell) || void 0 === i || i.render()
    }
    ,
    UTPinnedItemTableCellView.prototype.renderChemistryBreakdown = function(t, e, i, r) {
        var n;
        null === (n = this.itemCell) || void 0 === n || n.renderChemistryBreakdown(t, e, i, r)
    }
    ,
    UTPinnedItemTableCellView.prototype.onTimedUpdate = function() {
        var t;
        null === (t = this.itemCell) || void 0 === t || t.onTimedUpdate()
    }
    ,
    UTPinnedItemTableCellView.prototype.refreshItem = function() {
        var t;
        null === (t = this.itemCell) || void 0 === t || t.render()
    }
    ,
    UTPinnedItemTableCellView
}(UTView);
UTPinnedItemTableCellView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-pinned-item"),
        this._btnLeft = new UTFlatButtonControl,
        this._btnLeft.getRootElement().classList.add("btn-left"),
        t.appendChild(this._btnLeft.getRootElement()),
        this.__list = document.createElement("ul"),
        t.appendChild(this.__list),
        this._btnRight = new UTFlatButtonControl,
        this._btnRight.getRootElement().classList.add("btn-right"),
        t.appendChild(this._btnRight.getRootElement()),
        this.__root = t,
        this._generated = !0
    }
}
,
UTPinnedItemTableCellView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._btnLeft.destroy(),
    this.__list = null,
    this._btnRight.destroy()
}
,
UTPinnedItemTableCellView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTClubSearchFiltersView = function(e) {
    function UTClubSearchFiltersView() {
        var t = e.call(this) || this;
        return t.onFilterChange = new EAObservable,
        t.onSearchModeChange = new EAObservable,
        t.pinnedItemView = null,
        t
    }
    return __extends(UTClubSearchFiltersView, e),
    UTClubSearchFiltersView.prototype.init = function() {
        var t = services.Localization;
        e.prototype.init.call(this),
        this._sortDropDown.init(),
        this._btnReset.init(),
        this._btnReset.setText(t.localize("search.pagination.reset")),
        this._btnSearch.init(),
        this._btnSearch.setText(t.localize("button.search")),
        this._filterContainer.init(),
        this._filterContainer.onFilterChange.observe(this, this.onFilterChanged),
        this._filterContainer.onSearchModeChange.observe(this, this.onSearchModeChanged),
        this.__filterTitle.textContent = t.localize("search.sort.filterBy"),
        this.__sortTitle.textContent = t.localize("search.sort.sortBy")
    }
    ,
    UTClubSearchFiltersView.prototype.dealloc = function() {
        this.onSearchModeChange.dealloc(),
        this.onFilterChange.dealloc(),
        this._filterContainer.onSearchModeChange.unobserve(this),
        this._filterContainer.onFilterChange.unobserve(this),
        e.prototype.dealloc.call(this),
        this.pinnedItemView = null
    }
    ,
    UTClubSearchFiltersView.prototype.setInteractionState = function(t) {
        this._btnSearch.setInteractionState(t),
        this._btnReset.setInteractionState(t),
        this._filterContainer.setInteractionState(t),
        this._searchOptions.setInteractionState(t),
        e.prototype.setInteractionState.call(this, t)
    }
    ,
    UTClubSearchFiltersView.prototype.setupSearchOptions = function(t, e) {
        if (t || e) {
            var i = services.Localization;
            this.__filterTitle.style.display = "",
            this._searchOptions.init(),
            t && this._searchOptions.addToggleCell(enums.UISortOptionType.UNTRADEABLE, i.localize("search.sort.header")),
            e && this._searchOptions.addToggleCell(enums.UISortOptionType.EXCLUDE_SQUAD, i.localize("search.sort.squadPlayers")),
            this._searchOptions.layoutSubviews()
        } else
            this._searchOptions.setDisplay(!1),
            this.__filterTitle.style.display = "none"
    }
    ,
    UTClubSearchFiltersView.prototype.setSortOptions = function(t) {
        this._sortDropDown.setOptions(t)
    }
    ,
    UTClubSearchFiltersView.prototype.toggleSortOptions = function(t) {
        DOMKit.toggleDisplayStyle(this.__sortContainer, t)
    }
    ,
    UTClubSearchFiltersView.prototype.toggleExcludeSquadSlider = function(t) {
        this._searchOptions.setCellInteractionState(enums.UISortOptionType.EXCLUDE_SQUAD, t),
        t || this._searchOptions.toggleById(enums.UISortOptionType.EXCLUDE_SQUAD, t)
    }
    ,
    UTClubSearchFiltersView.prototype.togglePileFilter = function(t) {
        this._filterContainer.togglePileFilter(t)
    }
    ,
    UTClubSearchFiltersView.prototype.toggleDisplay = function(t) {
        this.setDisplay(t)
    }
    ,
    UTClubSearchFiltersView.prototype.setPileFilter = function(t, e) {
        this._filterContainer.setPileFilter(t, e)
    }
    ,
    UTClubSearchFiltersView.prototype.setSearchTypeImage = function() {
        this._filterContainer.setPileFilterImage()
    }
    ,
    UTClubSearchFiltersView.prototype.appendPinnedItemView = function(t) {
        this.pinnedItemView = t,
        this.__searchContainer.insertBefore(t.getRootElement(), this.__searchContainer.firstChild)
    }
    ,
    UTClubSearchFiltersView.prototype.setPlayerSearch = function(t) {
        this._filterContainer.setPlayerSearch(t)
    }
    ,
    UTClubSearchFiltersView.prototype.resetPlayerName = function() {
        this._filterContainer.resetPlayerName()
    }
    ,
    UTClubSearchFiltersView.prototype.togglePlayerNameRow = function(t) {
        this._filterContainer.togglePlayerNameRow(t)
    }
    ,
    UTClubSearchFiltersView.prototype.setFilters = function(t, e) {
        this._filterContainer.setFilters(t, e),
        this._filterContainer.togglePlayerNameRow(t.searchCriteria.type === SearchType.PLAYER && !t.isMarketSearch)
    }
    ,
    UTClubSearchFiltersView.prototype.setFilterValue = function(t, e) {
        this._filterContainer.setFilterValue(t, e)
    }
    ,
    UTClubSearchFiltersView.prototype.setFilterDefaultValue = function(t, e) {
        this._filterContainer.setFilterDefaultValue(t, e)
    }
    ,
    UTClubSearchFiltersView.prototype.setFilterLock = function(t, e) {
        this._filterContainer.setFilterLock(t, e)
    }
    ,
    UTClubSearchFiltersView.prototype.getSortOptions = function() {
        return this._searchOptions
    }
    ,
    UTClubSearchFiltersView.prototype.getSortDropDown = function() {
        return this._sortDropDown
    }
    ,
    UTClubSearchFiltersView.prototype.getSearchButton = function() {
        return this._btnSearch
    }
    ,
    UTClubSearchFiltersView.prototype.getResetButton = function() {
        return this._btnReset
    }
    ,
    UTClubSearchFiltersView.prototype.getPlayerNameSearch = function() {
        return this._filterContainer.getPlayerNameSearch()
    }
    ,
    UTClubSearchFiltersView.prototype.onSearchModeChanged = function(t, e) {
        this.onSearchModeChange.notify(e)
    }
    ,
    UTClubSearchFiltersView.prototype.onFilterChanged = function(t, e, i, r) {
        this.onFilterChange.notify(e, i, r)
    }
    ,
    UTClubSearchFiltersView
}(UTView);
UTClubSearchFiltersView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-club-search-filters-view");
        var e = document.createElement("div");
        e.classList.add("ut-pinned-list-container"),
        e.classList.add("ut-content-container"),
        this.__searchContainer = document.createElement("div"),
        this.__searchContainer.classList.add("ut-content");
        var i = document.createElement("div");
        i.classList.add("ut-pinned-list"),
        this.__sortContainer = document.createElement("div"),
        this.__sortContainer.classList.add("sort-filter-container"),
        this.__filterTitle = document.createElement("h4"),
        this.__sortContainer.appendChild(this.__filterTitle),
        this._searchOptions = new UTToggleControlGroupView,
        this.__sortContainer.appendChild(this._searchOptions.getRootElement()),
        this.__sortTitle = document.createElement("h4"),
        this.__sortContainer.appendChild(this.__sortTitle),
        this._sortDropDown = new UTDropDownControl,
        this.__sortContainer.appendChild(this._sortDropDown.getRootElement()),
        i.appendChild(this.__sortContainer),
        this._filterContainer = new UTItemSearchView,
        this._filterContainer.getRootElement().classList.add("filter-container"),
        i.appendChild(this._filterContainer.getRootElement()),
        this.__searchContainer.appendChild(i);
        var r = document.createElement("div");
        r.classList.add("button-container"),
        this._btnReset = new UTStandardButtonControl,
        r.appendChild(this._btnReset.getRootElement()),
        this._btnSearch = new UTStandardButtonControl,
        this._btnSearch.getRootElement().classList.add("call-to-action"),
        r.appendChild(this._btnSearch.getRootElement()),
        this.__searchContainer.appendChild(r),
        e.appendChild(this.__searchContainer),
        t.appendChild(e),
        this.__root = t,
        this._generated = !0
    }
}
,
UTClubSearchFiltersView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__searchContainer = null,
    this.__sortContainer = null,
    this.__filterTitle = null,
    this._searchOptions.destroy(),
    this.__sortTitle = null,
    this._sortDropDown.destroy(),
    this._filterContainer.destroy(),
    this._btnReset.destroy(),
    this._btnSearch.destroy()
}
,
UTClubSearchFiltersView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTMyClubSearchFiltersViewController = function(s) {
    function UTMyClubSearchFiltersViewController() {
        var t = s.call(this) || this;
        return t.clubViewModel = null,
        t.searchCriteria = null,
        t.searchViewModel = new UTItemSearchViewModel,
        t
    }
    return __extends(UTMyClubSearchFiltersViewController, s),
    UTMyClubSearchFiltersViewController.prototype.init = function() {
        var t, e;
        if (!this.initialized) {
            s.prototype.init.call(this);
            var i = this.getView();
            i.getSearchButton().addTarget(this, this.onSearchSelected, EventType.TAP),
            i.getResetButton().addTarget(this, this.onResetSelected, EventType.TAP),
            i.getPlayerNameSearch().addTarget(this, this.onPlayerNameChange, EventType.CHANGE),
            i.getSortOptions().addTarget(this, this.onSortToggleSelected, EventType.CHANGE),
            i.getSortDropDown().addTarget(this, this.onDropDownChanged, EventType.CHANGE),
            i.onFilterChange.observe(this, this.onFilterChanged),
            i.setupSearchOptions(!0, (null === (t = this.searchCriteria) || void 0 === t ? void 0 : t.type) === SearchType.PLAYER),
            i.setSortOptions((null === (e = this.searchCriteria) || void 0 === e ? void 0 : e.type) === SearchType.STAFF ? factories.DataProvider.getStaffSortTypeDP() : factories.DataProvider.getSortTypeDP())
        }
    }
    ,
    UTMyClubSearchFiltersViewController.prototype.initWithSearchCriteria = function(t) {
        this.initialized || (this.searchCriteria = t,
        this.searchViewModel.updateSearchCriteria(t),
        this.searchViewModel.defaultSearchCriteria.type = t.type,
        this.searchViewModel.defaultSearchCriteria.count = t.count,
        t.type !== SearchType.STAFF && (this.searchViewModel.defaultSearchCriteria.category = t.category),
        this.init())
    }
    ,
    UTMyClubSearchFiltersViewController.prototype.dealloc = function() {
        s.prototype.dealloc.call(this),
        this.clubViewModel = null,
        this.searchCriteria = null
    }
    ,
    UTMyClubSearchFiltersViewController.prototype._getViewInstanceFromData = function() {
        return new UTClubSearchFiltersView
    }
    ,
    UTMyClubSearchFiltersViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.clubsearch")
    }
    ,
    UTMyClubSearchFiltersViewController.prototype.viewDidAppear = function() {
        s.prototype.viewDidAppear.call(this);
        var t, e = this.searchViewModel.searchCriteria.sortBy, i = this.searchViewModel.searchCriteria.sort, r = this.searchViewModel.searchCriteria.type, n = this.getView();
        if (n.setFilters(this.searchViewModel, this.searchViewModel.searchCriteria.zone === ZONE_NO_GK_VALUE),
        t = e === SearchSortType.RECENCY ? SearchSortID.RECENCY_DESC : e === SearchSortType.RATING ? i === SearchSortOrder.DESCENDING ? SearchSortID.RATING_DESC : SearchSortID.RATING_ASC : i === SearchSortOrder.DESCENDING ? SearchSortID.VALUE_DESC : SearchSortID.VALUE_ASC,
        n.getSortDropDown().setIndexById(t),
        r === SearchType.BALL || r === SearchType.CLUB_INFO || r === SearchType.STADIUM || r === SearchType.VANITY) {
            var o = r === SearchType.VANITY || r === SearchType.CLUB_INFO ? this.searchViewModel.searchCriteria.category : r;
            n.setFilterDefaultValue(enums.UISearchFilters.TYPE, o),
            n.setFilterLock(enums.UISearchFilters.TYPE, !0)
        }
        this.searchViewModel.searchCriteria.untradeables = SearchUntradeables.DEFAULT,
        this.searchViewModel.searchCriteria.excludeDefIds = []
    }
    ,
    UTMyClubSearchFiltersViewController.prototype.setSearchResultViewModel = function(t) {
        this.clubViewModel = t
    }
    ,
    UTMyClubSearchFiltersViewController.prototype.onSearchSelected = function(t, e, i) {
        var r, n;
        null === (r = this.clubViewModel) || void 0 === r || r.resetCollection([]),
        this.searchCriteria && (this.searchCriteria.update(this.searchViewModel.searchCriteria),
        this.searchCriteria.offset = 0),
        null === (n = this.getNavigationController()) || void 0 === n || n.popViewController()
    }
    ,
    UTMyClubSearchFiltersViewController.prototype.onResetSelected = function(t, e, i) {
        var r = this.getView()
          , n = r.getSortDropDown();
        this.searchViewModel.resetSearch(),
        r.setFilters(this.searchViewModel, this.searchViewModel.searchCriteria.zone === ZONE_NO_GK_VALUE),
        r.getPlayerNameSearch().clearInput(),
        r.getSortOptions().reset(),
        n.setIndex(n.getDefaultIndex())
    }
    ,
    UTMyClubSearchFiltersViewController.prototype.onSortToggleSelected = function(t, e, i) {
        var r = this;
        i.id === enums.UISortOptionType.UNTRADEABLE ? this.searchViewModel.searchCriteria.untradeables = i.checked ? SearchUntradeables.ONLY : SearchUntradeables.DEFAULT : i.id === enums.UISortOptionType.EXCLUDE_SQUAD && (i.checked ? this.searchViewModel.requestActiveSquadDefIds().observe(this, function(t, e) {
            t.unobserve(r),
            r.searchViewModel.searchCriteria.excludeDefIds = e.data ? e.data.defIds : []
        }) : this.searchViewModel.searchCriteria.excludeDefIds = [])
    }
    ,
    UTMyClubSearchFiltersViewController.prototype.onDropDownChanged = function(t, e, i) {
        var r = "Club Search Filters - Sort By DropDown changed to: ";
        switch (this.searchViewModel.searchCriteria.sort = i.value,
        i.id) {
        case SearchSortID.VALUE_DESC:
            this.searchViewModel.searchCriteria.sortBy = SearchSortType.VALUE,
            r += "'Highest Quick Sell'";
            break;
        case SearchSortID.VALUE_ASC:
            this.searchViewModel.searchCriteria.sortBy = SearchSortType.VALUE,
            r += "'Lowest Quick Sell'";
            break;
        case SearchSortID.RATING_DESC:
            this.searchViewModel.searchCriteria.sortBy = SearchSortType.RATING,
            r += "'Rating High to Low'";
            break;
        case SearchSortID.RATING_ASC:
            this.searchViewModel.searchCriteria.sortBy = SearchSortType.RATING,
            r += "'Rating Low to High'";
            break;
        case SearchSortID.RECENCY_DESC:
            this.searchViewModel.searchCriteria.sortBy = SearchSortType.RECENCY,
            r += "'Most Recent'";
            break;
        default:
            DebugUtils.Assert(!1, "Unknown search sort ID")
        }
        TelemetryManager.trackEvent(TelemetryManager.Sections.CLUB, TelemetryManager.Categories.FILTER, r)
    }
    ,
    UTMyClubSearchFiltersViewController.prototype.onFilterChanged = function(t, e, i, r) {
        this.searchViewModel.updateFromFilterChange(e, i, r),
        this.getView().setFilters(this.searchViewModel, this.searchViewModel.searchCriteria.zone === ZONE_NO_GK_VALUE)
    }
    ,
    UTMyClubSearchFiltersViewController.prototype.onPlayerNameChange = function(t, e, i) {
        var r = this.getView()
          , n = r.getPlayerNameSearch().getSelected();
        n ? this.searchViewModel.setPlayerData(n) : this.searchViewModel.clearPlayerData(),
        r.setFilters(this.searchViewModel),
        n && (r.setFilterValue(enums.UISearchFilters.NATION, -1),
        r.setFilterValue(enums.UISearchFilters.LEAGUE, -1),
        r.setFilterValue(enums.UISearchFilters.CLUB, -1))
    }
    ,
    UTMyClubSearchFiltersViewController
}(UTViewController)
  , UTStadiumMessage = function UTStadiumMessage(t, e) {
    this.id = t,
    this.data = e
}
  , UTStadiumMessageProducer = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTStadiumMessageProducer() {
        return t.call(this) || this
    }
    return __extends(UTStadiumMessageProducer, t),
    UTStadiumMessageProducer.prototype.createMessage = function(t, e) {
        return new UTStadiumMessage(t,e)
    }
    ,
    UTStadiumMessageProducer.prototype.publishMessage = function(t) {
        services.MessageQueue.enqueue(t)
    }
    ,
    UTStadiumMessageProducer
}(EAObject))
  , UTPseudoTableView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTPseudoTableView() {
        var t = e.call(this) || this;
        return t._rowGroups = [],
        t
    }
    return __extends(UTPseudoTableView, e),
    UTPseudoTableView.prototype.dealloc = function() {
        e.prototype.dealloc.call(this),
        this._rowGroups = []
    }
    ,
    UTPseudoTableView.prototype.addRowGroup = function(t) {
        if (t) {
            var r = document.createElement("ul");
            DOMKit.addClass(r, UTPseudoTableView.CLASS.TABLE_HEAD),
            this.getRootElement().appendChild(r),
            t.forEach(function(t, e) {
                var i = document.createElement("li");
                i.textContent = t,
                DOMKit.addClass(i, UTPseudoTableView.CLASS.TABLE_DATA),
                r.appendChild(i)
            })
        }
        var e = document.createElement("ul");
        return DOMKit.addClass(e, UTPseudoTableView.CLASS.TABLE_BODY),
        this.getRootElement().appendChild(e),
        this._rowGroups.push(e),
        this._rowGroups.length
    }
    ,
    UTPseudoTableView.prototype.addRowData = function(t, r, e) {
        var n = this;
        0 === this._rowGroups.length && this.addRowGroup();
        var i = JSUtils.isNumber(e) ? this._rowGroups[e] : this._rowGroups[this._rowGroups.length - 1]
          , o = document.createElement("li");
        DOMKit.addClass(o, UTPseudoTableView.CLASS.TABLE_ROW),
        i.appendChild(o),
        t.forEach(function(t, e) {
            var i = document.createElement("div");
            DOMKit.addClass(i, UTPseudoTableView.CLASS.TABLE_DATA),
            JSUtils.isString(t) || JSUtils.isNumber(t) ? i.textContent = t.toString() : t instanceof UTView ? (i.appendChild(t.getRootElement()),
            n.addSubview(t, i)) : t instanceof Element && i.appendChild(t),
            o.appendChild(i),
            Array.isArray(r) && e < r.length && !JSUtils.isEmpty(r[e]) && DOMKit.addClass(i, r[e])
        }, this)
    }
    ,
    UTPseudoTableView.CLASS = {
        TABLE_ROW: "table-row",
        TABLE_HEAD: "table-header-group",
        TABLE_BODY: "table-row-group",
        TABLE_DATA: "table-cell"
    },
    UTPseudoTableView.Style = {
        NONE: "",
        ALTERNATING: "alternating"
    },
    UTPseudoTableView
}(UTView));
UTPseudoTableView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("table"),
        this.__root = t,
        this._generated = !0
    }
}
,
UTPseudoTableView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTPseudoTableView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTProgressBarView = function(e) {
    function UTProgressBarView() {
        var t = e.call(this) || this;
        return t.progress = 0,
        t
    }
    return __extends(UTProgressBarView, e),
    UTProgressBarView.prototype.setProgress = function(t) {
        (t = Math.max(Math.min(t, 100), 0)) !== this.progress && (this.progress = t,
        this.__fill.style.width = this.progress + "%",
        this.toggleClass("completed", 100 <= this.progress))
    }
    ,
    UTProgressBarView.prototype.setProgressLabel = function(t) {
        this.__label.textContent = t
    }
    ,
    UTProgressBarView.prototype.setFeedbackState = function(t) {
        var e = JSUtils.getObjectValues(enums.UIFeedbackState);
        0 <= e.indexOf(t) && (this.removeClass(e.join(" ")),
        this.addClass(t))
    }
    ,
    UTProgressBarView
}(UTView);
UTProgressBarView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-progress-bar"),
        this.__fill = document.createElement("div"),
        this.__fill.classList.add("ut-progress-bar--fill"),
        t.appendChild(this.__fill),
        this.__label = document.createElement("span"),
        this.__label.classList.add("ut-progress-bar--label"),
        t.appendChild(this.__label),
        this.__root = t,
        this._generated = !0
    }
}
,
UTProgressBarView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__fill = null,
    this.__label = null
}
,
UTProgressBarView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSquadChemistrySectionHeaderView = function(t) {
    function UTSquadChemistrySectionHeaderView() {
        return t.call(this) || this
    }
    return __extends(UTSquadChemistrySectionHeaderView, t),
    UTSquadChemistrySectionHeaderView.prototype.setTitle = function(t) {
        this.__label.textContent = t
    }
    ,
    UTSquadChemistrySectionHeaderView
}(UTView);
UTSquadChemistrySectionHeaderView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-squad-chemistry-section-header-view"),
        this.__label = document.createElement("span"),
        t.appendChild(this.__label),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSquadChemistrySectionHeaderView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__label = null
}
,
UTSquadChemistrySectionHeaderView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var __spreadArrays = this && this.__spreadArrays || function() {
    for (var t = 0, e = 0, i = arguments.length; e < i; e++)
        t += arguments[e].length;
    var r = Array(t)
      , n = 0;
    for (e = 0; e < i; e++)
        for (var o = arguments[e], s = 0, a = o.length; s < a; s++,
        n++)
            r[n] = o[s];
    return r
}
  , UTCompareActionPanelView = function(r) {
    function UTCompareActionPanelView() {
        var t = r.call(this) || this;
        return t._progressBars = [],
        t._progressBarsOther = [],
        t._stats = [],
        t._statsOther = [],
        t._labels = [],
        t.entryViews = [],
        t
    }
    return __extends(UTCompareActionPanelView, r),
    UTCompareActionPanelView.prototype.dealloc = function() {
        this.entryViews.forEach(function(t) {
            return t.dealloc()
        }),
        r.prototype.dealloc.call(this)
    }
    ,
    UTCompareActionPanelView.prototype.init = function() {
        DOMKit.toggleDisplayStyle(this.__chemistryContainer, !1);
        for (var t = ["value", "", "", "", "value"], e = PLAYER_STAT_NAMES.length + 1, i = 0; i < e; i++)
            this._progressBars.push(new UTProgressBarView),
            DOMKit.addClass(this._progressBars[i].getRootElement(), enums.UIProgressBar.STATS + " " + enums.UIProgressBar.REVERSE),
            this._progressBarsOther.push(new UTProgressBarView),
            DOMKit.addClass(this._progressBarsOther[i].getRootElement(), enums.UIProgressBar.STATS),
            this._labels.push(document.createElement("span")),
            this._stats.push(document.createElement("span")),
            this._statsOther.push(document.createElement("span")),
            this._attributesTable.addRowData([this._stats[i], this._progressBars[i].getRootElement(), this._labels[i], this._progressBarsOther[i].getRootElement(), this._statsOther[i]], t);
        this.setupChemToggle(),
        this.layoutSubviews(),
        r.prototype.init.call(this)
    }
    ,
    UTCompareActionPanelView.prototype._canCompare = function(t, e) {
        return !(!t || !e) && (t.compareType(e) && t.isGK() === e.isGK())
    }
    ,
    UTCompareActionPanelView.prototype.render = function(t, e, i) {
        void 0 === i && (i = [0, 0]);
        var r = services.Localization;
        this.__positionLabel.textContent = r.localize("card.title.position") + ":",
        this.__positionLabelOther.textContent = r.localize("card.title.position") + ":",
        this.__position.textContent = "",
        this.__positionOther.textContent = "";
        var n = "statIncrease"
          , o = "statDecrease"
          , s = t.getAttributes().concat(i[0])
          , a = s.length
          , l = this._canCompare(t, e)
          , c = UTSquadEntity.TOTAL_MAX_CHEM
          , u = [];
        if (DOMKit.toggleDisplayStyle(this.__attributesContainer, !(t.isManager() || (null == e ? void 0 : e.isManager()))),
        this.__attributesTitle.textContent = r.localize("compare.title.attributes"),
        e) {
            u = this.setupLabelKeys(e.isGK()),
            e.isValid() && (e.isManager() ? this.__positionOther.textContent = r.localize("extendedPlayerInfo.positions.manager") : this.__positionOther.textContent = UTLocalizationUtil.positionIdToName(e.preferredPosition, r));
            var p = e.getAttributes().concat(i[1]);
            for (f = 0; f < p.length; f++) {
                var h = s[f] < p[f] && l
                  , d = s[f] > p[f] && l
                  , _ = (m = "cards.cardfront.chemistryAbbr" === u[f]) ? Math.round(p[f] / c * 100) : p[f];
                if (this._labels[f].textContent = r.localize(u[f]),
                this._progressBarsOther[f].toggleClass(n, h),
                this._progressBarsOther[f].setProgress(_),
                this._progressBarsOther[f].setProgressLabel(h ? TextUtils.addSignToNum(p[f] - s[f]) : ""),
                this._statsOther[f].textContent = p[f].toString(),
                this._progressBarsOther[f].removeClass(o),
                DOMKit.removeClass(this._statsOther[f], o),
                m && d) {
                    var y = Math.max(35, _);
                    this._progressBarsOther[f].addClass(o),
                    this._progressBarsOther[f].setProgressLabel(TextUtils.addSignToNum(p[f] - s[f])),
                    this._progressBarsOther[f].setProgress(y),
                    DOMKit.toggleClass(this._statsOther[f], o, d)
                } else
                    this._progressBars[f].toggleClass(n, d),
                    this._progressBars[f].setProgressLabel(d ? TextUtils.addSignToNum(s[f] - p[f]) : ""),
                    DOMKit.toggleClass(this._statsOther[f], n, h),
                    DOMKit.toggleClass(this._stats[f], n, d)
            }
        } else
            for (var f = 0; f < a; f++)
                this._progressBarsOther[f].setProgress(0),
                this._progressBarsOther[f].setProgressLabel(""),
                this._progressBarsOther[f].removeClass(n),
                this._statsOther[f].textContent = BLANK_STR,
                DOMKit.removeClass(this._statsOther[f], n);
        if (t.isValid()) {
            u = this.setupLabelKeys(t.isGK()),
            t.isValid() && (t.isManager() ? this.__position.textContent = r.localize("extendedPlayerInfo.positions.manager") : this.__position.textContent = UTLocalizationUtil.positionIdToName(t.preferredPosition, r));
            for (f = 0; f < a; f++) {
                var m;
                _ = (m = "cards.cardfront.chemistryAbbr" === u[f]) ? Math.round(s[f] / c * 100) : s[f];
                this._labels[f].textContent = r.localize(u[f]),
                this._progressBars[f].setProgress(_),
                this._stats[f].textContent = s[f].toString()
            }
        } else
            for (var f = 0; f < a; f++)
                this._progressBars[f].setProgress(0),
                this._progressBars[f].setProgressLabel(""),
                this._progressBars[f].removeClass(n),
                this._stats[f].textContent = BLANK_STR,
                DOMKit.removeClass(this._stats[f], n)
    }
    ,
    UTCompareActionPanelView.prototype.clearHeaderAndEntries = function() {
        this.entryViews.forEach(function(t) {
            return t.dealloc()
        }),
        this.entryViews = [],
        this.removeSubviews()
    }
    ,
    UTCompareActionPanelView.prototype.setupLabelKeys = function(t) {
        var e = __spreadArrays(t ? GK_STAT_NAMES : PLAYER_STAT_NAMES);
        return e.includes("cards.cardfront.chemistryAbbr") || e.push("cards.cardfront.chemistryAbbr"),
        e
    }
    ,
    UTCompareActionPanelView.prototype.renderChemistryComparison = function(t, e, i, r, n) {
        var o = i.chemistry;
        this.setChemistry(o),
        this.setParameterChemistry(t, e, i.getParameterChemistry(), r, n)
    }
    ,
    UTCompareActionPanelView.prototype.setChemistry = function(t) {
        var e = services.Localization
          , i = t.toString()
          , r = UTSquadEntity.TOTAL_MAX_CHEM.toString()
          , n = e.localize("squad.chemistry.fraction", [i, r])
          , o = e.localize("squad.chemistry.label") + " " + n;
        this.__chemistryTitle.textContent = o
    }
    ,
    UTCompareActionPanelView.prototype.setParameterChemistry = function(e, i, r, n, o) {
        var s = this;
        this.entryViews.forEach(function(t) {
            return t.dealloc()
        }),
        i && (this.entryViews.push(this.generateSectionHeaderView("squad.chemistry.section-title.replacement")),
        r.filter(function(t) {
            return t.typeId === ChemistryParamId.NATION && t.metaId === i.nationId || t.typeId === ChemistryParamId.LEAGUE && t.metaId === i.leagueId || t.typeId === ChemistryParamId.CLUB && t.metaId === i.teamId
        }).sort(function(t, e) {
            return t.typeId - e.typeId
        }).forEach(function(e) {
            var t = n.find(function(t) {
                return t.metaId === e.metaId && t.typeId === e.typeId
            });
            s.entryViews.push(o ? s.generateEntryView(e, null != t ? t : null) : s.generateCollapsedEntryView(e, null != t ? t : null))
        })),
        this.entryViews.push(this.generateSectionHeaderView("squad.chemistry.section-title.current")),
        n.filter(function(t) {
            return t.typeId === ChemistryParamId.NATION && t.metaId === e.nationId || t.typeId === ChemistryParamId.LEAGUE && t.metaId === e.leagueId || t.typeId === ChemistryParamId.CLUB && t.metaId === e.teamId
        }).sort(function(t, e) {
            return t.typeId - e.typeId
        }).forEach(function(e) {
            var t = r.find(function(t) {
                return t.metaId === e.metaId && t.typeId === e.typeId
            });
            s.entryViews.push(o ? s.generateEntryView(null != t ? t : null, e) : s.generateCollapsedEntryView(null != t ? t : null, e))
        }),
        0 < this.entryViews.length && (this.addSubview(o ? this.generateFullHeaderView() : this.generateCondensedHeaderView(), this.__chemistryEntries),
        this.entryViews.forEach(function(t) {
            return s.addSubview(t, s.__chemistryEntries)
        }),
        this.layoutSubviews(),
        DOMKit.toggleDisplayStyle(this.__chemistryContainer, 0 < this.entryViews.length))
    }
    ,
    UTCompareActionPanelView.prototype.generateEntryView = function(t, e) {
        var i = new UTSquadChemistryFullEntryView;
        return i.init(),
        i.renderWithDiff(t, e),
        i
    }
    ,
    UTCompareActionPanelView.prototype.generateCollapsedEntryView = function(t, e) {
        var i = new UTSquadChemistryCondensedEntryView;
        return i.init(),
        i.renderWithDiff(t, e),
        i
    }
    ,
    UTCompareActionPanelView.prototype.generateCondensedHeaderView = function() {
        var t = new UTSquadChemistryCondensedHeaderView;
        return t.init(),
        t.render(),
        t
    }
    ,
    UTCompareActionPanelView.prototype.generateFullHeaderView = function() {
        var t = new UTSquadChemistryFullHeaderView;
        return t.init(),
        t.render(),
        t
    }
    ,
    UTCompareActionPanelView.prototype.generateSectionHeaderView = function(t) {
        var e = new UTSquadChemistrySectionHeaderView;
        return e.init(),
        e.setTitle(services.Localization.localize(t)),
        e
    }
    ,
    UTCompareActionPanelView.prototype.setupChemToggle = function() {
        this._fullViewChemToggle.init(),
        this._fullViewChemToggle.addToggleCell(UTSquadChemistryPopupView.CHEM_FULLVIEW_SLIDER, services.Localization.localize("squad.chemistry.fullview.title"))
    }
    ,
    UTCompareActionPanelView.prototype.getCollapsedChemToggle = function() {
        return this._fullViewChemToggle
    }
    ,
    UTCompareActionPanelView.prototype.appendSwapButton = function(t) {
        this.addSubview(t, this.__infoContainer)
    }
    ,
    UTCompareActionPanelView.CHEM_FULLVIEW_SLIDER = "chemFullEnabled",
    UTCompareActionPanelView
}(UTView);
UTCompareActionPanelView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("section");
        t.classList.add("ut-compare-items-panel-view"),
        t.classList.add("DetailPanel"),
        this.__infoContainer = document.createElement("div"),
        this.__infoContainer.classList.add("extended");
        var e = document.createElement("div");
        e.classList.add("compare-positions");
        var i = document.createElement("div");
        i.classList.add("compare-positions--position-cell"),
        this.__positionLabel = document.createElement("span"),
        i.appendChild(this.__positionLabel),
        this.__position = document.createElement("span"),
        i.appendChild(this.__position),
        e.appendChild(i);
        var r = document.createElement("div");
        r.classList.add("compare-positions--position-cell"),
        this.__positionLabelOther = document.createElement("span"),
        r.appendChild(this.__positionLabelOther),
        this.__positionOther = document.createElement("span"),
        r.appendChild(this.__positionOther),
        e.appendChild(r),
        this.__infoContainer.appendChild(e),
        t.appendChild(this.__infoContainer),
        this.__chemistryContainer = document.createElement("div"),
        this.__chemistryContainer.classList.add("ut-compare-items-panel-view--chemistry"),
        this._fullViewChemToggle = new UTToggleControlGroupView,
        this.__chemistryContainer.appendChild(this._fullViewChemToggle.getRootElement()),
        this.__chemistryTitle = document.createElement("h2"),
        this.__chemistryContainer.appendChild(this.__chemistryTitle),
        this.__chemistryEntries = document.createElement("div"),
        this.__chemistryContainer.appendChild(this.__chemistryEntries),
        t.appendChild(this.__chemistryContainer),
        this.__attributesContainer = document.createElement("div"),
        this.__attributesContainer.classList.add("ut-compare-items-panel-view--attributes"),
        this.__attributesTitle = document.createElement("h2"),
        this.__attributesContainer.appendChild(this.__attributesTitle),
        this._attributesTable = new UTPseudoTableView,
        this._attributesTable.getRootElement().classList.add("stats-table"),
        this.__attributesContainer.appendChild(this._attributesTable.getRootElement()),
        t.appendChild(this.__attributesContainer),
        this.__root = t,
        this._generated = !0
    }
}
,
UTCompareActionPanelView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__infoContainer = null,
    this.__positionLabel = null,
    this.__position = null,
    this.__positionLabelOther = null,
    this.__positionOther = null,
    this.__chemistryContainer = null,
    this._fullViewChemToggle.destroy(),
    this.__chemistryTitle = null,
    this.__chemistryEntries = null,
    this.__attributesContainer = null,
    this.__attributesTitle = null,
    this._attributesTable.destroy()
}
,
UTCompareActionPanelView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTCompareActionPanelViewController = function(e) {
    function UTCompareActionPanelViewController() {
        var t = e.call(this) || this;
        return t.chemCalculator = new UTSquadChemCalculatorUtils(repositories.Chemistry),
        t._btnSwap = null,
        t.onSwap = new EAObservable,
        t.isFullViewToggled = !1,
        t.currentChemistryEntries = [],
        t.hypotheticalChemistry = null,
        t.otherItem = null,
        t
    }
    return __extends(UTCompareActionPanelViewController, e),
    UTCompareActionPanelViewController.prototype.initWithSwapButton = function() {
        this._btnSwap = new UTStandardButtonControl,
        this._btnSwap.addTarget(this, this._eSwapPlayers, EventType.TAP),
        this._btnSwap.init(),
        this.init()
    }
    ,
    UTCompareActionPanelViewController.prototype.dealloc = function() {
        e.prototype.dealloc.call(this),
        this._btnSwap && (this._btnSwap.dealloc(),
        this._btnSwap = null)
    }
    ,
    UTCompareActionPanelViewController.prototype.setItems = function(e, i, t) {
        var r = [0, 0];
        if (t && !e.isManager()) {
            var n = t.getFormation();
            if (r[0] = t.getChemistry(),
            n && i) {
                var o = t.getFieldPlayers().map(function(t) {
                    return t.item === e ? i : t.item === i ? e : t.item
                })
                  , s = t.getManager().item
                  , a = this.chemCalculator.calculate(n, o, s);
                r[1] = a.chemistry
            }
        }
        if (this.getView().render(e, i, r),
        this._btnSwap && i) {
            var l = !(i.isValid() && e.isValid() && !e.compareType(i));
            this._btnSwap.setInteractionState(l),
            this._btnSwap.setText(e.isManager() ? services.Localization.localize("search.pagination.header.manager") : services.Localization.localize("search.pagination.header"))
        }
    }
    ,
    UTCompareActionPanelViewController.prototype.setChemistryComparison = function(t, e, i) {
        var r = t.getFormation()
          , n = t.getSlot(e)
          , o = n.isValid() && n.index < UTSquadEntity.FIELD_PLAYERS;
        if (r && i && (e.isManager() || o)) {
            var s = this.chemCalculator.calculate(r, t.getPlayers().map(function(t) {
                return t.item === e ? i : t.item
            }), i.isManager() ? i : t.getManager().item);
            this.hypotheticalChemistry = s,
            this.currentChemistryEntries = t.getParameterChemistry(),
            this.item = e,
            this.otherItem = i,
            this.renderChem()
        }
    }
    ,
    UTCompareActionPanelViewController.prototype.renderChem = function() {
        this.hypotheticalChemistry && this.getView().renderChemistryComparison(this.item, this.otherItem, this.hypotheticalChemistry, this.currentChemistryEntries, this.isFullViewToggled)
    }
    ,
    UTCompareActionPanelViewController.prototype._getViewInstanceFromData = function() {
        return new UTCompareActionPanelView
    }
    ,
    UTCompareActionPanelViewController.prototype.viewDidAppear = function() {
        e.prototype.viewDidAppear.call(this);
        var t = this.getView();
        t.getCollapsedChemToggle().layoutSubviews(),
        t.getCollapsedChemToggle().addTarget(this, this.eChemFullViewToggled, EventType.CHANGE),
        t.getCollapsedChemToggle().toggleById(UTCompareActionPanelView.CHEM_FULLVIEW_SLIDER, !1),
        this._btnSwap && !this._btnSwap.isSubview(t) && (this._btnSwap.addClass("call-to-action"),
        t.appendSwapButton(this._btnSwap),
        t.layoutSubviews())
    }
    ,
    UTCompareActionPanelViewController.prototype.viewWillDisappear = function() {
        var t = this.getView();
        e.prototype.viewWillDisappear.call(this),
        t.getCollapsedChemToggle().removeTarget(this, this.eChemFullViewToggled, EventType.CHANGE)
    }
    ,
    UTCompareActionPanelViewController.prototype._eSwapPlayers = function(t, e, i) {
        this.onSwap.notify()
    }
    ,
    UTCompareActionPanelViewController.prototype.eChemFullViewToggled = function(t, e, i) {
        if (i.id === UTCompareActionPanelView.CHEM_FULLVIEW_SLIDER) {
            var r = this.getView();
            r.clearHeaderAndEntries(),
            this._btnSwap && !this._btnSwap.isSubview(r) && (this._btnSwap.addClass("call-to-action"),
            r.appendSwapButton(this._btnSwap),
            r.layoutSubviews()),
            i.checked ? this.isFullViewToggled = !0 : this.isFullViewToggled = !1,
            this.renderChem()
        }
    }
    ,
    UTCompareActionPanelViewController
}(UTViewController)
  , UTCompareDetailsView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTCompareDetailsView() {
        var t = e.call(this) || this;
        return t._item = null,
        t._otherItem = null,
        t
    }
    return __extends(UTCompareDetailsView, e),
    UTCompareDetailsView.prototype.dealloc = function() {
        this._item && (this._item.dealloc(),
        this._item = null),
        this._otherItem && (this._otherItem.dealloc(),
        this._otherItem = null),
        e.prototype.dealloc.call(this)
    }
    ,
    UTCompareDetailsView.prototype.setPrimaryItem = function(t) {
        this._item && !this._item.canRender(t) && (this._item.dealloc(),
        this._item = null),
        this._item ? this._item.render(t) : (this._item = this._generateItemView(t),
        this.__itemContainer.insertBefore(this._item.getRootElement(), this.__itemContainer.firstChild))
    }
    ,
    UTCompareDetailsView.prototype.setComparisonItem = function(t) {
        this._otherItem && !this._otherItem.canRender(t) && (this._otherItem.dealloc(),
        this._otherItem = null),
        this._otherItem ? this._otherItem.render(t) : (this._otherItem = this._generateItemView(t),
        this.__itemContainer.appendChild(this._otherItem.getRootElement()))
    }
    ,
    UTCompareDetailsView.prototype.render = function(t, e) {
        this.setPrimaryItem(t),
        this.setComparisonItem(null != e ? e : factories.Item.createItem())
    }
    ,
    UTCompareDetailsView.prototype._generateItemView = function(t) {
        var e = factories.ItemView.createLargeItem(t);
        return e.init(),
        e.render(t),
        e.addClass("sm"),
        e
    }
    ,
    UTCompareDetailsView.prototype.renderChemistryComparison = function(t, e, i) {
        var r, n, o, s, a = new UTSquadSlotChemistryPointsView;
        a.isItemView(),
        a.render(e.points, 0, i),
        a.setState(UTSquadSlotChemistryPointsView.State.NEUTRAL),
        null === (r = this._item) || void 0 === r || r.renderChemistryPoints(a),
        null === (n = this._item) || void 0 === n || n.renderChemistryBreakdown(e.points, e.getPointsByParameter(ChemistryParamId.NATION), e.getPointsByParameter(ChemistryParamId.LEAGUE), e.getPointsByParameter(ChemistryParamId.CLUB));
        var l = new UTSquadSlotChemistryPointsView;
        l.isItemView(),
        l.render(t.points),
        l.setState(UTSquadSlotChemistryPointsView.State.NEUTRAL),
        null === (o = this._otherItem) || void 0 === o || o.renderChemistryPoints(l),
        null === (s = this._otherItem) || void 0 === s || s.renderChemistryBreakdown(t.points, t.getPointsByParameter(ChemistryParamId.NATION), t.getPointsByParameter(ChemistryParamId.LEAGUE), t.getPointsByParameter(ChemistryParamId.CLUB))
    }
    ,
    UTCompareDetailsView.prototype.appendPanel = function(t) {
        this.addSubview(t)
    }
    ,
    UTCompareDetailsView.prototype.setAsSBC = function(t) {
        this.toggleClass("sbc", t)
    }
    ,
    UTCompareDetailsView
}(UTView));
UTCompareDetailsView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("section");
        t.classList.add("CompareDetails"),
        t.classList.add("DetailView");
        var e = document.createElement("section");
        e.classList.add("detail-carousel"),
        e.classList.add("panelContainer"),
        this.__itemContainer = document.createElement("div"),
        this.__itemContainer.classList.add("item-container"),
        e.appendChild(this.__itemContainer),
        t.appendChild(e),
        this.__root = t,
        this._generated = !0
    }
}
,
UTCompareDetailsView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__itemContainer = null
}
,
UTCompareDetailsView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSwapComparePlayersViewController = function(e) {
    function UTSwapComparePlayersViewController() {
        var t = e.call(this) || this;
        return t.chemCalculator = new UTSquadChemCalculatorUtils(repositories.Chemistry),
        t.onSwap = new EAObservable,
        t.panel = new UTCompareActionPanelViewController,
        t
    }
    return __extends(UTSwapComparePlayersViewController, e),
    UTSwapComparePlayersViewController.prototype.init = function() {
        this.initialized || (this.panel.initWithSwapButton(),
        this.panel.onSwap.observe(this, this.onSwapSelected),
        this.addChildViewController(this.panel),
        e.prototype.init.call(this))
    }
    ,
    UTSwapComparePlayersViewController.prototype.dealloc = function() {
        this.onSwap.dealloc(),
        this.panel.dealloc(),
        e.prototype.dealloc.call(this)
    }
    ,
    UTSwapComparePlayersViewController.prototype._getViewInstanceFromData = function() {
        return new UTCompareDetailsView
    }
    ,
    UTSwapComparePlayersViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("leaderboard.compare.Title")
    }
    ,
    UTSwapComparePlayersViewController.prototype.viewDidAppear = function() {
        e.prototype.viewDidAppear.call(this);
        var t = this.getView();
        this.panel && !this.panel.getView().isSubview(t) && (t.appendPanel(this.panel.getView()),
        t.layoutSubviews(),
        this.panel.viewDidAppear())
    }
    ,
    UTSwapComparePlayersViewController.prototype.setItemData = function(t, e, i) {
        this.getView().render(t, e),
        this.panel.setItems(t, e, i)
    }
    ,
    UTSwapComparePlayersViewController.prototype.setChemistryData = function(t, e, i) {
        this.panel.setChemistryComparison(t, e, i);
        var r = t.getFormation()
          , n = t.getFieldPlayers().find(function(t) {
            return t.item === e
        });
        if (n && r && i) {
            var o = this.chemCalculator.calculate(r, t.getPlayers().map(function(t) {
                return t.item
            }), t.getManager().item)
              , s = this.chemCalculator.calculate(r, t.getPlayers().map(function(t) {
                return t.index === n.index ? i : t.item
            }), i.isManager() ? i : t.getManager().item);
            this.getView().renderChemistryComparison(s.getSlotChemistry(n.index), o.getSlotChemistry(n.index), n.inPreferredPosition)
        }
    }
    ,
    UTSwapComparePlayersViewController.prototype.onSwapSelected = function(t) {
        this.onSwap.notify()
    }
    ,
    UTSwapComparePlayersViewController
}(UTViewController)
  , UTPinnedItemViewController = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTPinnedItemViewController() {
        var t = e.call(this) || this;
        return t.collection = null,
        t.item = null,
        t.onItemChange = new EAObservable,
        t.slot = null,
        t
    }
    return __extends(UTPinnedItemViewController, e),
    UTPinnedItemViewController.prototype.init = function() {
        e.prototype.init.call(this);
        var t = this.getView();
        t.init(),
        t.toggleIteratorButtons(JSUtils.isValid(this.collection)),
        t.getBtnRight().addTarget(this, this.onNextButtonSelected, EventType.TAP),
        t.getBtnLeft().addTarget(this, this.onPrevButtonSelected, EventType.TAP),
        this.collection && (t.setHasNext(!this.collection.endOfList),
        t.setHasPrev(!this.collection.startOfList))
    }
    ,
    UTPinnedItemViewController.prototype.initWithItem = function(t) {
        this.setItem(t),
        this.init()
    }
    ,
    UTPinnedItemViewController.prototype.initWithSlot = function(t) {
        this.slot = t,
        this.initWithItem(t.item)
    }
    ,
    UTPinnedItemViewController.prototype.initWithIterator = function(t) {
        var e = t.current();
        this.collection = t,
        e instanceof UTSquadSlotEntity ? this.initWithSlot(e) : e instanceof UTItemEntity ? this.initWithItem(e) : this.init()
    }
    ,
    UTPinnedItemViewController.prototype.dealloc = function() {
        var t;
        e.prototype.dealloc.call(this),
        null === (t = this.item) || void 0 === t || t.getAuctionData().onDataUpdated.unobserve(this),
        this.item = null,
        this.slot = null,
        this.onItemChange.dealloc()
    }
    ,
    UTPinnedItemViewController.prototype._getViewInstanceFromData = function() {
        return new UTPinnedItemTableCellView
    }
    ,
    UTPinnedItemViewController.prototype.viewDidAppear = function() {
        if (e.prototype.viewDidAppear.call(this),
        this.collection) {
            var t = this.getView();
            t.setHasNext(-1 !== this.getNextIndex(this.collection)),
            t.setHasPrev(-1 !== this.getPrevIndex(this.collection))
        }
    }
    ,
    UTPinnedItemViewController.prototype.setItem = function(t) {
        var e, i = this.getView(), r = t.getAuctionData();
        if (null === (e = this.item) || void 0 === e || e.getAuctionData().onDataUpdated.unobserve(this),
        this.item = t,
        this.slot && this.slot.index < UTSquadEntity.FIELD_PLAYERS) {
            i.pinListItem(t, this.slot);
            var n = new UTSquadSlotChemistryPointsView;
            n.isItemView(),
            n.render(this.slot.chemistry, 0, this.slot.inPreferredPosition),
            n.setState(UTSquadSlotChemistryPointsView.State.NEUTRAL),
            i.setChemistryPointsComponent(n),
            i.renderChemistryBreakdown(this.slot.chemistry, this.slot.nationChemistryPoints, this.slot.leagueChemistryPoints, this.slot.clubChemistryPoints)
        } else
            i.pinListItem(t);
        r.isValid() && r.onDataUpdated.observe(this, this.onTimedUpdate)
    }
    ,
    UTPinnedItemViewController.prototype.getItem = function() {
        return this.item
    }
    ,
    UTPinnedItemViewController.prototype.setSlot = function(t) {
        this.slot = t,
        this.setItem(this.slot.item)
    }
    ,
    UTPinnedItemViewController.prototype.getNextIndex = function(t) {
        for (var e = t.getIndex() + 1, i = t.get(e); null !== i; ) {
            if (!(i instanceof UTSquadSlotEntity ? i.item : i).isCustomBrick())
                return e;
            i = t.get(++e)
        }
        return -1
    }
    ,
    UTPinnedItemViewController.prototype.getPrevIndex = function(t) {
        for (var e = t.getIndex() - 1, i = t.get(e); null !== i; ) {
            if (!(i instanceof UTSquadSlotEntity ? i.item : i).isCustomBrick())
                return e;
            i = t.get(--e)
        }
        return -1
    }
    ,
    UTPinnedItemViewController.prototype.onTimedUpdate = function() {
        this.getView().onTimedUpdate()
    }
    ,
    UTPinnedItemViewController.prototype.refresh = function() {
        this.getView().refreshItem()
    }
    ,
    UTPinnedItemViewController.prototype.onPrevButtonSelected = function(t, e, i) {
        if (this.collection && !this.collection.startOfList) {
            this.collection.setIndex(this.getPrevIndex(this.collection));
            var r = this.collection.current()
              , n = this.getView();
            r instanceof UTSquadSlotEntity ? this.setSlot(r) : r instanceof UTItemEntity && this.setItem(r),
            n.setHasNext(-1 !== this.getNextIndex(this.collection)),
            n.setHasPrev(-1 !== this.getPrevIndex(this.collection)),
            this.onItemChange.notify(r)
        }
    }
    ,
    UTPinnedItemViewController.prototype.onNextButtonSelected = function(t, e, i) {
        if (this.collection && !this.collection.endOfList) {
            this.collection.setIndex(this.getNextIndex(this.collection));
            var r = this.collection.current()
              , n = this.getView();
            r instanceof UTSquadSlotEntity ? this.setSlot(r) : r instanceof UTItemEntity && this.setItem(r),
            n.setHasNext(-1 !== this.getNextIndex(this.collection)),
            n.setHasPrev(-1 !== this.getPrevIndex(this.collection)),
            this.onItemChange.notify(r)
        }
    }
    ,
    UTPinnedItemViewController
}(UTViewController))
  , UTClubItemSearchHeaderView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTClubItemSearchHeaderView() {
        return t.call(this) || this
    }
    return __extends(UTClubItemSearchHeaderView, t),
    UTClubItemSearchHeaderView.prototype.init = function() {
        t.prototype.init.call(this),
        this._btnSearch.init(),
        this._btnSearch.setText(services.Localization.localize("button.search"))
    }
    ,
    UTClubItemSearchHeaderView.prototype.getButton = function() {
        return this._btnSearch
    }
    ,
    UTClubItemSearchHeaderView.prototype.setTitle = function(t) {
        this.__title.textContent = t
    }
    ,
    UTClubItemSearchHeaderView.prototype.getTitle = function() {
        var t;
        return null !== (t = this.__title.textContent) && void 0 !== t ? t : ""
    }
    ,
    UTClubItemSearchHeaderView.prototype.setImagesFromImgLoader = function(t) {
        var e = this;
        DOMKit.empty(this.__imageContainer),
        t.forEach(function(t) {
            return e.__imageContainer.appendChild(t.getRootElement())
        })
    }
    ,
    UTClubItemSearchHeaderView.prototype.toggleSearch = function(t) {
        this.__searchContainer && DOMKit.toggleDisplayStyle(this.__searchContainer, t)
    }
    ,
    UTClubItemSearchHeaderView
}(UTView));
UTClubItemSearchHeaderView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-list-header"),
        this.__imageContainer = document.createElement("span"),
        this.__imageContainer.classList.add("ut-list-header-icon"),
        t.appendChild(this.__imageContainer),
        this.__title = document.createElement("span"),
        this.__title.classList.add("ut-list-header-title"),
        t.appendChild(this.__title),
        this.__searchContainer = document.createElement("span"),
        this.__searchContainer.classList.add("ut-list-header-action"),
        this._btnSearch = new UTStandardButtonControl,
        this._btnSearch.getRootElement().classList.add("mini"),
        this._btnSearch.getRootElement().classList.add("call-to-action"),
        this.__searchContainer.appendChild(this._btnSearch.getRootElement()),
        t.appendChild(this.__searchContainer),
        this.__root = t,
        this._generated = !0
    }
}
,
UTClubItemSearchHeaderView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__imageContainer = null,
    this.__title = null,
    this.__searchContainer = null,
    this._btnSearch.destroy()
}
,
UTClubItemSearchHeaderView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTListNoResultsView = function(t) {
    function UTListNoResultsView() {
        return t.call(this) || this
    }
    return __extends(UTListNoResultsView, t),
    UTListNoResultsView.prototype.init = function() {
        t.prototype.init.call(this),
        this._button.init(),
        this._button.setDisplay(!1)
    }
    ,
    UTListNoResultsView.prototype.setText = function(t) {
        this.__title.innerHTML = t
    }
    ,
    UTListNoResultsView.prototype.setDescription = function(t) {
        this.__description.innerHTML = t
    }
    ,
    UTListNoResultsView.prototype.setupButton = function(t, e) {
        this._button.addTarget(this, e, EventType.TAP),
        this._button.setText(t),
        this._button.setDisplay(!0)
    }
    ,
    UTListNoResultsView
}(UTView);
UTListNoResultsView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-no-results-view");
        var e = document.createElement("div");
        e.classList.add("contents");
        var i = document.createElement("span");
        i.classList.add("no-results-icon"),
        e.appendChild(i),
        this.__title = document.createElement("h2"),
        e.appendChild(this.__title),
        this.__description = document.createElement("p"),
        e.appendChild(this.__description),
        this._button = new UTStandardButtonControl,
        this._button.getRootElement().classList.add("call-to-action"),
        e.appendChild(this._button.getRootElement()),
        t.appendChild(e),
        this.__root = t,
        this._generated = !0
    }
}
,
UTListNoResultsView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this.__description = null,
    this._button.destroy()
}
,
UTListNoResultsView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPaginatedItemListView = function(e) {
    function UTPaginatedItemListView() {
        var t = e.call(this) || this;
        return t.listRows = [],
        t.noResultsView = null,
        t.paginationDirection = !0,
        t
    }
    return __extends(UTPaginatedItemListView, e),
    UTPaginatedItemListView.prototype.init = function() {
        e.prototype.init.call(this),
        this._botPrev.addTarget(this, this._ePreviousPage, EventType.TAP),
        this._botPrev.setText(services.Localization.localize("label.prev")),
        this._botPrev.init(),
        this._botNext.addTarget(this, this._eNextPage, EventType.TAP),
        this._botNext.setText(services.Localization.localize("label.next")),
        this._botNext.init(),
        this.setPaginationState(!1, !1),
        this.setInteractionState(!0)
    }
    ,
    UTPaginatedItemListView.prototype.dealloc = function() {
        this.removeListRows(),
        this.noResultsView && (this.noResultsView.dealloc(),
        this.noResultsView = null),
        e.prototype.dealloc.call(this)
    }
    ,
    UTPaginatedItemListView.prototype.removeListRows = function() {
        0 < this.listRows.length && (this.listRows.forEach(function(t) {
            return t.dealloc()
        }),
        this.listRows = [])
    }
    ,
    UTPaginatedItemListView.prototype.setItems = function(t, i) {
        var r = this;
        return this.removeListRows(),
        t.forEach(function(t) {
            var e = new UTItemTableCellView;
            e.setData(t, void 0, void 0, i),
            r.listRows.push(e)
        }),
        this.listRows
    }
    ,
    UTPaginatedItemListView.prototype.removeItemsById = function(t) {
        var e = this;
        t.forEach(function(i) {
            var t = JSUtils.find(e.listRows, function(t) {
                var e;
                return (null === (e = t.getData()) || void 0 === e ? void 0 : e.id) === i
            });
            t && (t.dealloc(),
            e.listRows.splice(e.listRows.indexOf(t), 1))
        }, this),
        this._renderItems()
    }
    ,
    UTPaginatedItemListView.prototype._renderItems = function(r) {
        var n = this;
        void 0 === r && (r = 0),
        this.listRows.forEach(function(t) {
            var e, i = r === (null === (e = t.getData()) || void 0 === e ? void 0 : e.id);
            t.render(i),
            n.__itemList.appendChild(t.getRootElement())
        }),
        this.noResultsView && 0 < this.listRows.length && (this.noResultsView.dealloc(),
        this.noResultsView = null)
    }
    ,
    UTPaginatedItemListView.prototype.renderItems = function(t) {
        void 0 === t && (t = 0),
        this._renderItems(t),
        this.__itemList.scrollTop = this.paginationDirection ? 0 : this.__itemList.scrollHeight
    }
    ,
    UTPaginatedItemListView.prototype.getRows = function() {
        return this.listRows
    }
    ,
    UTPaginatedItemListView.prototype.setRowTapCallback = function(e) {
        e = e || this._eItemSelected.bind(this),
        this.listRows.forEach(function(t) {
            e && t.setTapCallback(e)
        }, this)
    }
    ,
    UTPaginatedItemListView.prototype.setRowActionCallback = function(i) {
        var r = this;
        this.listRows.forEach(function(t) {
            var e = i || r._eItemActionSelected.bind(r, t.getData());
            t.setAction(enums.UIRowActionClass.ADD, e)
        }, this)
    }
    ,
    UTPaginatedItemListView.prototype.setComparisonData = function(e) {
        this.listRows.forEach(function(t) {
            t.setComparisonData(e),
            t.render()
        })
    }
    ,
    UTPaginatedItemListView.prototype.setPaginationState = function(t, e) {
        this._botPrev.setDisplay(t),
        this._botNext.setDisplay(e),
        DOMKit.toggleClass(this.__itemList, "paginated", t || e),
        DOMKit.toggleDisplayStyle(this.__botPagination, t || e)
    }
    ,
    UTPaginatedItemListView.prototype.render = function(t, e, i) {
        this.setPaginationState(e, i),
        this.setItems(t),
        this.renderItems()
    }
    ,
    UTPaginatedItemListView.prototype.appendEmptyListMessage = function(t, e, i, r) {
        this.removeListRows(),
        this.noResultsView && this.noResultsView.dealloc(),
        this.noResultsView = new UTListNoResultsView,
        this.noResultsView.init(),
        this.noResultsView.setText(t),
        this.noResultsView.setDescription(e || services.Localization.localize("popup.error.noresults.description")),
        i && r && this.noResultsView.setupButton(i, r),
        this.getRootElement().appendChild(this.noResultsView.getRootElement())
    }
    ,
    UTPaginatedItemListView.prototype.selectRow = function(i) {
        this.listRows.forEach(function(t) {
            var e;
            return t.setSelected((null === (e = t.getData()) || void 0 === e ? void 0 : e.id) === i)
        })
    }
    ,
    UTPaginatedItemListView.prototype.onTimedUpdate = function() {
        this.listRows.forEach(function(t) {
            return t.onTimedUpdate()
        })
    }
    ,
    UTPaginatedItemListView.prototype._ePreviousPage = function(t, e, i) {
        this.isInteractionEnabled() && (this.paginationDirection = !1,
        this._triggerActions(enums.UIPaginationEvent.PREVIOUS))
    }
    ,
    UTPaginatedItemListView.prototype._eNextPage = function(t, e, i) {
        this.isInteractionEnabled() && (this.paginationDirection = !0,
        this._triggerActions(enums.UIPaginationEvent.NEXT))
    }
    ,
    UTPaginatedItemListView.prototype._eItemSelected = function(t) {
        this.isInteractionEnabled() && this._triggerActions(enums.UIListEvent.ROW_SELECT, {
            item: t
        })
    }
    ,
    UTPaginatedItemListView.prototype._eItemActionSelected = function(t) {
        this.isInteractionEnabled() && this._triggerActions(enums.UIListEvent.ROW_ACTION, {
            item: t
        })
    }
    ,
    UTPaginatedItemListView
}(UTTargetActionView);
UTPaginatedItemListView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("paginated-item-list"),
        this.__itemList = document.createElement("ul"),
        t.appendChild(this.__itemList),
        this.__botPagination = document.createElement("div"),
        this.__botPagination.classList.add("pagingContainer"),
        this._botPrev = new UTFlatButtonControl,
        this._botPrev.getRootElement().classList.add("pagination"),
        this._botPrev.getRootElement().classList.add("prev"),
        this.__botPagination.appendChild(this._botPrev.getRootElement()),
        this._botNext = new UTFlatButtonControl,
        this._botNext.getRootElement().classList.add("pagination"),
        this._botNext.getRootElement().classList.add("next"),
        this.__botPagination.appendChild(this._botNext.getRootElement()),
        t.appendChild(this.__botPagination),
        this.__root = t,
        this._generated = !0
    }
}
,
UTPaginatedItemListView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__itemList = null,
    this.__botPagination = null,
    this._botPrev.destroy(),
    this._botNext.destroy()
}
,
UTPaginatedItemListView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTClubSearchResultsView = function(e) {
    function UTClubSearchResultsView() {
        var t = e.call(this) || this;
        return t.activeSquad = null,
        t.header = null,
        t.onSearch = new EAObservable,
        t.pinnedItem = null,
        t.pinnedItemView = null,
        t
    }
    return __extends(UTClubSearchResultsView, e),
    UTClubSearchResultsView.prototype.init = function() {
        e.prototype.init.call(this),
        this._subTypesDropDown.init(),
        this._list.init(),
        this._list.addTarget(this, this.bubbleEvent, enums.UIListEvent.ROW_SELECT),
        this._list.addTarget(this, this.bubbleEvent, enums.UIListEvent.ROW_ACTION),
        this._list.addTarget(this, this.bubbleEvent, enums.UIPaginationEvent.NEXT),
        this._list.addTarget(this, this.bubbleEvent, enums.UIPaginationEvent.PREVIOUS),
        this.setInteractionState(!0)
    }
    ,
    UTClubSearchResultsView.prototype.dealloc = function() {
        this.header && (this.header.getButton().removeTarget(this, this.onSearchSelected, EventType.TAP),
        this.header.dealloc(),
        this.header = null),
        this.onSearch.dealloc(),
        this.pinnedItem = null,
        this.pinnedItemView = null,
        e.prototype.dealloc.call(this)
    }
    ,
    UTClubSearchResultsView.prototype.updateListTopPosition = function() {
        var t = 0;
        this.header && (t += this.header.getRootElement().offsetHeight),
        this.pinnedItemView && (t += this.pinnedItemView.getRootElement().offsetHeight),
        this._list.getRootElement().style.top = t + "px"
    }
    ,
    UTClubSearchResultsView.prototype.setSubTypesOptions = function(t) {
        this._subTypesDropDown.setOptions(t)
    }
    ,
    UTClubSearchResultsView.prototype.setItems = function(t, e, i) {
        var o = this;
        if (void 0 === e && (e = 0),
        0 < t.length) {
            var r = this._list.setItems(t, i);
            (this.pinnedItem || this.activeSquad) && r.forEach(function(t) {
                var e, i, r = t.getData();
                if ((null === (e = o.pinnedItem) || void 0 === e ? void 0 : e.isValid()) && t.setComparisonData(o.pinnedItem),
                r && (null === (i = o.activeSquad) || void 0 === i ? void 0 : i.containsItem(r, !0))) {
                    var n = new UTListActiveTagView;
                    n.setIconClass("squad"),
                    t.setActiveTagComponent(n)
                }
            }),
            this._list.renderItems(e)
        } else
            this.setEmptyListMessage(!0)
    }
    ,
    UTClubSearchResultsView.prototype.setItemsWithChemDiff = function(t, s, a, l, c) {
        var u = this;
        0 < t.length ? (this._list.setItems(t).forEach(function(t, e) {
            var i, r, n = t.getData();
            if ((null === (i = u.pinnedItem) || void 0 === i ? void 0 : i.isValid()) && t.setComparisonData(u.pinnedItem),
            n && (null === (r = u.activeSquad) || void 0 === r ? void 0 : r.containsItem(n, !0))) {
                var o = new UTListActiveTagView;
                o.setIconClass("squad"),
                t.setActiveTagComponent(o)
            }
            u.setChemistryData(!(null == n ? void 0 : n.isManager()), t, s[e], a[e], l[e], c[e])
        }),
        this._list.renderItems(0)) : this.setEmptyListMessage(!0)
    }
    ,
    UTClubSearchResultsView.prototype.setChemistryData = function(t, e, i, r, n, o) {
        var s = new UTListChemistryTagView;
        if (s.setChemistryImpactString(i, r),
        e.setChemistryTagComponent(s),
        t) {
            var a = UTSquadSlotChemistryPointsView.State.NEUTRAL;
            0 < o ? a = UTSquadSlotChemistryPointsView.State.POSITIVE : o < 0 && (a = UTSquadSlotChemistryPointsView.State.NEGATIVE);
            var l = new UTSquadSlotChemistryPointsView;
            l.isItemView(),
            l.render(n),
            l.setState(a),
            e.setChemistryPointsComponent(l)
        }
    }
    ,
    UTClubSearchResultsView.prototype.setActionableStates = function(n) {
        var t, o = this;
        (null === (t = this.pinnedItem) || void 0 === t ? void 0 : t.isValid()) && this._list.getRows().forEach(function(t, e) {
            var i = t.getData()
              , r = !1;
            JSUtils.isBoolean(n[e]) ? r = n[e] : o.pinnedItem && i && (r = o.pinnedItem.compareType(i)),
            t.setActionState(r)
        })
    }
    ,
    UTClubSearchResultsView.prototype.setEmptyListMessage = function(t) {
        var e, i = services.Localization;
        t ? this._list.appendEmptyListMessage(i.localize("popup.error.searchauctions.retrysearch"), void 0, i.localize("button.searchagain"), this.onSearch.notify.bind(this.onSearch)) : (this._list.appendEmptyListMessage(i.localize("clubitems.categoryempty")),
        null === (e = this.header) || void 0 === e || e.toggleSearch(!1))
    }
    ,
    UTClubSearchResultsView.prototype.setRowTapCallback = function(t) {
        this._list.setRowTapCallback(t)
    }
    ,
    UTClubSearchResultsView.prototype.setRowActionCallback = function(t) {
        this._list.setRowActionCallback(t)
    }
    ,
    UTClubSearchResultsView.prototype.setPaginationState = function(t, e) {
        this._list.setPaginationState(t, e)
    }
    ,
    UTClubSearchResultsView.prototype.appendPinnedItemView = function(t) {
        this.pinnedItemView = t;
        var e = this.getRootElement();
        e.insertBefore(t.getRootElement(), e.firstChild),
        this.updateListTopPosition()
    }
    ,
    UTClubSearchResultsView.prototype.selectListRow = function(t) {
        this._list.selectRow(t)
    }
    ,
    UTClubSearchResultsView.prototype.setPinnedItemData = function(t) {
        this.pinnedItem = t,
        this._list.setComparisonData(t)
    }
    ,
    UTClubSearchResultsView.prototype.setActiveSquadData = function(t) {
        this.activeSquad = t
    }
    ,
    UTClubSearchResultsView.prototype.setItemTypeHeader = function(t, e) {
        var i = services.Localization;
        this.header || (this.header = new UTClubItemSearchHeaderView,
        this.header.init(),
        this.header.toggleSearch(!1),
        this.header.getButton().addTarget(this, this.onSearchSelected, EventType.TAP),
        this.getRootElement().insertBefore(this.header.getRootElement(), this.getRootElement().firstChild));
        var r = "";
        switch (t) {
        case ItemType.PLAYER:
        case ItemSubType.PLAYER:
            r = i.localize("search.filters.players"),
            e[0].setLocalResource("images/icon_club_categories_player.png");
            break;
        case ItemType.CONTRACT:
            r = i.localize("card.title.contract"),
            e[0].setLocalResource("images/consumable_player_contracts.png");
            break;
        case ItemType.HEALTH:
            r = i.localize("card.title.healing"),
            e[0].setLocalResource("images/consumable_healing.png");
            break;
        case ItemSubType.TRAINING_PLAYER_POS:
            r = i.localize("navbar.label.positioning"),
            e[0].setLocalResource("images/consumable_positioning.png");
            break;
        case ItemSubType.TRAINING_PLAYER_FORMATION_3412:
            r = i.localize("navbar.label.managerleague"),
            e[0].setLocalResource("images/consumable_league.png");
            break;
        case ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_1:
            r = i.localize("navbar.label.playstyle"),
            e[0].setLocalResource("images/consumable_chemistry.png");
            break;
        case ItemType.MANAGER:
        case ItemSubType.MANAGER:
            r = i.localize("search.filters.staff"),
            e[0].setLocalResource("images/icon-Staff.png");
            break;
        case ItemType.KIT:
        case ItemSubType.KIT:
            r = i.localize("clubtype.kit"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(ItemSubType.KIT));
            break;
        case ItemType.BADGE:
        case ItemSubType.BADGE:
            r = i.localize("clubtype.badge"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(ItemSubType.BADGE));
            break;
        case ItemType.BALL:
        case ItemSubType.BALL:
            r = i.localize("clubtype.ball"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(ItemSubType.BALL));
            break;
        case ItemType.STADIUM:
        case ItemSubType.STADIUM:
            r = i.localize("clubtype.stadium"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(ItemSubType.STADIUM)),
            e[0].addClass("activeStadium");
            break;
        case ItemSubType.VANITY_TIFO_ANIMATED:
            r = i.localize("FUT_VANITY_TIFO_ANIMATED"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_TIFO_BASE:
            r = i.localize("FUT_VANITY_TIFO_BASIC"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_TIFO_BIG:
            r = i.localize("FUT_VANITY_TIFO_BIG"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_TIFO_MOVING:
            r = i.localize("FUT_VANITY_TIFO_MOVING"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_STADIUM_THEME:
            r = i.localize("FUT_VANITY_STADIUM_THEME"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_STADIUM_BASE_PITCH_MOW_PATTERN:
            r = i.localize("FUT_VANITY_PITCH_MOW_PATTERN"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_STADIUM_BASE_PITCH_LINE_COLOR:
            r = i.localize("FUT_VANITY_PITCH_LINE_COLOR"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_STADIUM_BASE_PITCH_GOAL_PACKAGE:
            r = i.localize("FUT_VANITY_GOAL_PACKAGE"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_STADIUM_BASE_PITCH_PROP:
            r = i.localize("FUT_VANITY_PITCH_PROPS"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_STADIUM_BASE_STRUCTURE_COLOR:
            r = i.localize("FUT_VANITY_STADIUM_COLORS"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_STADIUM_BASE_SEAT_COLOR:
            r = i.localize("FUT_VANITY_SEAT_COLOR"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_PYROTECHNICS_FLAME_CANNON:
            r = i.localize("FUT_VANITY_PYROTECHNICS_FLAME"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_PYROTECHNICS_CONFETTI_CANNON:
            r = i.localize("FUT_VANITY_PYROTECHNICS_CONFETTI"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_PYROTECHNICS_SPARKLER_CANNON:
            r = i.localize("FUT_VANITY_PYROTECHNICS_SPARKLES"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_PYROTECHNICS_FIREWORKS_CANNON:
            r = i.localize("FUT_VANITY_PYROTECHNICS_FIREWORKS"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_AUDIO_ANTHEM_MUSIC:
            r = i.localize("FUT_VANITY_AUDIO_ANTHEMS"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_AUDIO_GOAL_SCORE:
            r = i.localize("FUT_VANITY_AUDIO_GOAL_SCORE"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_AUDIO_CLUB_NICKNAME:
            r = i.localize("FUT_VANITY_AUDIO_CLUB_NICKNAMES"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_AUDIO_CROWD_CHANT:
            r = i.localize("FUT_VANITY_AUDIO_CROWD_CHANTS"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_PLAYER_CELEBRATION:
            r = i.localize("FUT_VANITY_PLAYER_CELEBRATION"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_TINTED_BANNER:
            r = i.localize("FUT_VANITY_TINTED_FLAGS"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_POLE_BANNER:
            r = i.localize("FUT_VANITY_TWO_STICK_BANNERS"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_VIP_AREA:
            r = i.localize("FUT_VANITY_VIP_AREA"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t));
            break;
        case ItemSubType.VANITY_CROWD_CARDS:
            r = i.localize("FUT_VANITY_CROWD_CARDS"),
            e[0].setLocalResource(AssetLocationUtils.getFilterPlaceholderImageUri(t))
        }
        this.header.setTitle(r),
        this.header.setImagesFromImgLoader(e),
        this.header.show(),
        this.updateListTopPosition()
    }
    ,
    UTClubSearchResultsView.prototype.toggleHeaderSearchBtn = function(t) {
        var e;
        null === (e = this.header) || void 0 === e || e.toggleSearch(t)
    }
    ,
    UTClubSearchResultsView.prototype.getSubTypesDropDown = function() {
        return this._subTypesDropDown
    }
    ,
    UTClubSearchResultsView.prototype.toggleSubTypesOptions = function(t) {
        DOMKit.toggleDisplayStyle(this._subTypesDropDown.getRootElement(), t)
    }
    ,
    UTClubSearchResultsView.prototype.bubbleEvent = function(t, e, i) {
        this.isInteractionEnabled() && this._triggerActions(e, i)
    }
    ,
    UTClubSearchResultsView.prototype.onSearchSelected = function(t, e, i) {
        this.onSearch.notify()
    }
    ,
    UTClubSearchResultsView
}(UTTargetActionView);
UTClubSearchResultsView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-pinned-list-container"),
        t.classList.add("ut-club-search-results-view"),
        this._subTypesDropDown = new UTDropDownControl,
        t.appendChild(this._subTypesDropDown.getRootElement()),
        this._list = new UTPaginatedItemListView,
        this._list.getRootElement().classList.add("ut-pinned-list"),
        t.appendChild(this._list.getRootElement()),
        this.__root = t,
        this._generated = !0
    }
}
,
UTClubSearchResultsView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._subTypesDropDown.destroy(),
    this._list.destroy()
}
,
UTClubSearchResultsView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSelectItemFromClubViewController = function(i) {
    function UTSelectItemFromClubViewController() {
        var t = i.call(this) || this;
        return t.challenge = null,
        t.chemCalculator = new UTSquadChemCalculatorUtils(repositories.Chemistry),
        t.clubSearchType = ItemSearchFeature.CLUB,
        t.clubViewModel = new UTClubViewModel([]),
        t.iterator = null,
        t.onItemChange = new EAObservable,
        t.pinnedItem = null,
        t.searchCriteria = null,
        t.slotIndex = 0,
        t.squad = null,
        t
    }
    return __extends(UTSelectItemFromClubViewController, i),
    UTSelectItemFromClubViewController.prototype.initWithSearchCriteria = function(t) {
        this.initialized || (this.searchCriteria = t,
        this.searchCriteria.count = this.clubViewModel.numItemsPerPage + 1,
        this.init())
    }
    ,
    UTSelectItemFromClubViewController.prototype.initWithCriteriaAndSquad = function(t, e, i) {
        var r;
        if (!this.initialized) {
            if (this.squad = e,
            this.slotIndex = i,
            this.pinnedItem = new UTPinnedItemViewController,
            this.iterator) {
                var n = null === (r = this.iterator.current()) || void 0 === r ? void 0 : r.item;
                n ? this.pinnedItem.initWithItem(n) : this.pinnedItem.init();
                var o = this.squad.getSlot(this.slotIndex);
                if (!(null == n ? void 0 : n.isManager()) && o.index < UTSquadEntity.FIELD_PLAYERS) {
                    var s = new UTSquadSlotChemistryPointsView;
                    s.isItemView(),
                    s.render(o.chemistry, 0, o.inPreferredPosition),
                    s.setState(UTSquadSlotChemistryPointsView.State.NEUTRAL);
                    var a = this.pinnedItem.getView();
                    a.setChemistryPointsComponent(s),
                    a.renderChemistryBreakdown(o.chemistry, o.nationChemistryPoints, o.leagueChemistryPoints, o.clubChemistryPoints)
                }
                this.pinnedItem.onItemChange.observe(this, this.onItemChanged)
            } else
                this.pinnedItem.initWithItem(this.squad.getSlot(this.slotIndex).item);
            this.addChildViewController(this.pinnedItem),
            this.initWithSearchCriteria(t)
        }
    }
    ,
    UTSelectItemFromClubViewController.prototype.initWithCriteriaAndSBCChallenge = function(t, e, i) {
        this.initialized || (DebugUtils.Assert(JSUtils.isValid(e.squad), "Expected squad building challenge to have a valid squad."),
        this.challenge = e,
        this.getView().addClass("sbc"),
        this.challenge.squad ? this.initWithCriteriaAndSquad(t, this.challenge.squad, i) : this.initWithSearchCriteria(t))
    }
    ,
    UTSelectItemFromClubViewController.prototype.dealloc = function() {
        i.prototype.dealloc.call(this),
        this.searchCriteria = null,
        this.squad = null,
        this.challenge = null,
        this.pinnedItem && (this.pinnedItem.dealloc(),
        this.pinnedItem = null),
        this.chemCalculator.dealloc(),
        this.onItemChange.dealloc()
    }
    ,
    UTSelectItemFromClubViewController.prototype._getViewInstanceFromData = function() {
        return new UTClubSearchResultsView
    }
    ,
    UTSelectItemFromClubViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.clubsearch")
    }
    ,
    UTSelectItemFromClubViewController.prototype.viewWillAppear = function() {
        i.prototype.viewWillAppear.call(this),
        this.requestItems()
    }
    ,
    UTSelectItemFromClubViewController.prototype.viewDidAppear = function() {
        i.prototype.viewDidAppear.call(this);
        var t = this.getView();
        if (t.toggleSubTypesOptions(!1),
        this.pinnedItem) {
            var e = this.pinnedItem.getItem();
            t.appendPinnedItemView(this.pinnedItem.getView()),
            e && t.setPinnedItemData(e),
            this.pinnedItem.viewDidAppear()
        }
        t.updateListTopPosition(),
        t.onSearch.observe(this, this.onModifySearchSelected),
        t.addTarget(this, this.onTableCellSelected, enums.UIListEvent.ROW_SELECT),
        t.addTarget(this, this.onTableCellActionSelected, enums.UIListEvent.ROW_ACTION),
        t.addTarget(this, this.onNextPage, enums.UIPaginationEvent.NEXT),
        t.addTarget(this, this.onPreviousPage, enums.UIPaginationEvent.PREVIOUS),
        TelemetryManager.trackPage(TelemetryManager.Sections.CLUB, "Swap Club Results")
    }
    ,
    UTSelectItemFromClubViewController.prototype.viewWillDisappear = function() {
        var t = this.getView();
        i.prototype.viewWillDisappear.call(this),
        t.onSearch.unobserve(this),
        t.removeTarget(this, this.onTableCellSelected, enums.UIListEvent.ROW_SELECT),
        t.removeTarget(this, this.onTableCellActionSelected, enums.UIListEvent.ROW_ACTION),
        t.removeTarget(this, this.onNextPage, enums.UIPaginationEvent.NEXT),
        t.removeTarget(this, this.onPreviousPage, enums.UIPaginationEvent.PREVIOUS)
    }
    ,
    UTSelectItemFromClubViewController.prototype.setIterator = function(t) {
        this.iterator = t
    }
    ,
    UTSelectItemFromClubViewController.prototype.setItemSearchType = function(t) {
        this.clubSearchType = t
    }
    ,
    UTSelectItemFromClubViewController.prototype.updateItemList = function(t) {
        var e, i, l = this, r = this.getView();
        if (0 < t.length)
            if (this.squad && (this.slotIndex < UTSquadEntity.FIELD_PLAYERS || this.squad.getSlot(this.slotIndex).item.isManager())) {
                var c = []
                  , u = []
                  , p = []
                  , h = [];
                t.forEach(function(e) {
                    if (l.squad && l.squad.getFormation()) {
                        var t = l.squad.getPlayers().map(function(t) {
                            return t.index === l.slotIndex ? e : t.item
                        })
                          , i = l.squad.getSlot(l.slotIndex).item.isManager() ? e : l.squad.getManager().item
                          , r = l.squad.getFormation()
                          , n = 0;
                        if (r) {
                            var o = l.chemCalculator.calculate(r, t, i);
                            if (n = o.chemistry,
                            !e.isManager()) {
                                var s = o.getSlotChemistry(l.slotIndex).points;
                                p.push(s),
                                h.push(s - l.squad.getSlot(l.slotIndex).chemistry)
                            }
                        } else if (!e.isManager()) {
                            var a = l.squad.getSlot(l.slotIndex).chemistry;
                            p.push(0),
                            h.push(0 - a)
                        }
                        c.push(n),
                        u.push(n - l.squad.getChemistry())
                    }
                }),
                r.setItemsWithChemDiff(t, c, u, p, h)
            } else
                r.setItems(t);
        else
            r.setEmptyListMessage(null === (i = null === (e = this.searchCriteria) || void 0 === e ? void 0 : e.isModified()) || void 0 === i || i);
        r.setPaginationState(this.clubViewModel.hasPreviousPage(), this.clubViewModel.hasNextPage()),
        r.setRowActionCallback(),
        r.setRowTapCallback()
    }
    ,
    UTSelectItemFromClubViewController.prototype.handleItemRetrieval = function(t, e) {
        var i, r, n = this.clubViewModel.getIndex(), o = services.Configuration.getFeatureSetting(UTServerSettingsRepository.KEY.SBC_ALLOW_UNTRADEABLE), s = this.squad;
        if (s) {
            var a = null === (r = null === (i = this.iterator) || void 0 === i ? void 0 : i.current()) || void 0 === r ? void 0 : r.item;
            t = t.filter(function(t) {
                var e = !s.isSBC() || !t.isLoaned() && !UTItemEntity.isStoryMode(t.definitionId) && (o || !t.untradeable)
                  , i = !0;
                if (a && s.containsItem(t)) {
                    var r = t.compareResourceTo(a)
                      , n = t.compareResourceTo(a, !0);
                    i = r && (!n || t.isLoaned() !== a.isLoaned())
                }
                return e && i
            })
        }
        this.searchCriteria && (this.clubViewModel.sortByRecency = this.searchCriteria.sortBy === SearchSortType.RECENCY,
        this.clubViewModel.sort = this.searchCriteria.sort,
        this.clubViewModel.sortType = this.searchCriteria.sortBy),
        this.clubViewModel.removeArray(t),
        this.clubViewModel.addArray(t),
        this.clubViewModel.isFull = e,
        this.clubViewModel.setIndex(n),
        !this.searchCriteria || this.clubViewModel.canShowPage(this.clubViewModel.getCurrentPage()) && !this.clubViewModel.shouldRequestItems() ? this.updateItemList(this.clubViewModel.getPageItems()) : (this.searchCriteria.offset += this.searchCriteria.count,
        this.requestItems())
    }
    ,
    UTSelectItemFromClubViewController.prototype.requestItems = function() {
        var i = this;
        this.clubViewModel.canShowPage() && !this.clubViewModel.shouldRequestItems() ? this.updateItemList(this.clubViewModel.getPageItems()) : this.searchCriteria && (this.searchCriteria.type === SearchType.PLAYER && this.clubSearchType === ItemSearchFeature.CONCEPT ? services.Item.searchConceptItems(this.searchCriteria).observe(this, function(t, e) {
            t.unobserve(i),
            e.success && JSUtils.isObject(e.response) ? i.handleItemRetrieval(e.response.items, e.response.endOfList) : NetworkErrorManager.handleStatus(e.status)
        }) : services.Club.search(this.searchCriteria).observe(this, function(t, e) {
            t.unobserve(i),
            e.success && JSUtils.isObject(e.response) ? i.handleItemRetrieval(e.response.items, e.response.retrievedAll) : e.error && NetworkErrorManager.handleStatus(e.status)
        }))
    }
    ,
    UTSelectItemFromClubViewController.prototype.addItemToSlot = function(t) {
        var n = this
          , e = this.challenge ? this.challenge.squad : this.squad;
        null == e || e.addItemToSlot(this.slotIndex, t),
        this.challenge ? services.SBC.saveChallenge(this.challenge).observe(this, function(t, e) {
            var i;
            if (t.unobserve(n),
            !e.success) {
                var r = "notification.sbcChallenges.failedToSave";
                (null === (i = n.challenge) || void 0 === i ? void 0 : i.hasExpired(!0)) ? r = "notification.sbcChallenges.expired" : e.error && e.error.code === UtasErrorCode.SERVICE_IS_DISABLED && (r = "sbc.notification.disabled"),
                services.Notification.queue([services.Localization.localize(r), UINotificationType.NEGATIVE])
            }
        }) : null == e || e.save(),
        services.Notification.queue([services.Localization.localize("infopanel.label.swapped"), UINotificationType.POSITIVE])
    }
    ,
    UTSelectItemFromClubViewController.prototype.onTableCellSelected = function(t, e, i) {
        var r = this
          , n = i.item;
        if (!(!n || n.isManager() && this.slotIndex !== UTSquadEntity.MANAGER_SLOT_INDEX || n.isPlayer() && this.slotIndex === UTSquadEntity.MANAGER_SLOT_INDEX)) {
            var o = this.getNavigationController()
              , s = null == o ? void 0 : o.getPreviousController()
              , a = new UTSwapComparePlayersViewController;
            a.init(),
            a.onSwap.observe(this, function() {
                var t, e = null === (t = r.iterator) || void 0 === t ? void 0 : t.current();
                r.addItemToSlot(n),
                r.pinnedItem && e && r.pinnedItem.setSlot(e),
                s && (null == o || o.popToViewController(s))
            }),
            this.squad && (a.setItemData(this.squad.getSlot(this.slotIndex).item, n, this.squad),
            a.setChemistryData(this.squad, this.squad.getSlot(this.slotIndex).item, n)),
            null == o || o.pushViewController(a)
        }
    }
    ,
    UTSelectItemFromClubViewController.prototype.onTableCellActionSelected = function(t, e, i) {
        function nVb(t) {
            var e;
            o.searchCriteria && (o.searchCriteria.defId = []),
            o.addItemToSlot(t),
            null === (e = o.getNavigationController()) || void 0 === e || e.popViewController()
        }
        var o = this
          , s = i.item;
        if (DebugUtils.Assert(s instanceof UTItemEntity, "Expected to receive an item entity."),
        s)
            if (s.concept) {
                var r = new UTSearchCriteriaDTO;
                r.type = SearchType.PLAYER,
                r.defId = [s.definitionId],
                services.Club.search(r).observe(this, function(t, e) {
                    var i;
                    if (t.unobserve(o),
                    e.success && JSUtils.isObject(e.response)) {
                        var r = e.response && 0 < e.response.items.length ? JSUtils.find(e.response.items, function(t) {
                            return t.definitionId === s.definitionId
                        }) : null
                          , n = !((null == r ? void 0 : r.isLoaned()) && (null === (i = o.squad) || void 0 === i ? void 0 : i.isSBC()));
                        nVb(r && n ? r : s)
                    }
                })
            } else
                nVb(s)
    }
    ,
    UTSelectItemFromClubViewController.prototype.onModifySearchSelected = function(t) {
        var e;
        null === (e = this.getNavigationController()) || void 0 === e || e.popViewController()
    }
    ,
    UTSelectItemFromClubViewController.prototype.onNextPage = function(t, e, i) {
        this.clubViewModel.hasNextPage() && (this.clubViewModel.nextPage(),
        this.clubViewModel.shouldRequestItems() ? (this.searchCriteria && (this.searchCriteria.offset += this.searchCriteria.count),
        this.requestItems()) : this.updateItemList(this.clubViewModel.getPageItems()))
    }
    ,
    UTSelectItemFromClubViewController.prototype.onPreviousPage = function(t, e, i) {
        this.clubViewModel.hasPreviousPage() && this.updateItemList(this.clubViewModel.previousPage())
    }
    ,
    UTSelectItemFromClubViewController.prototype.onItemChanged = function(t, e) {
        this.getView().setPinnedItemData(e.getItem()),
        this.slotIndex = e.getIndex(),
        this.onItemChange.notify(e)
    }
    ,
    UTSelectItemFromClubViewController
}(UTViewController)
  , UTClubSearchFiltersViewController = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(o) {
    function UTClubSearchFiltersViewController() {
        var t = o.call(this) || this;
        return t.challenge = null,
        t.clubSearchType = ItemSearchFeature.CLUB,
        t.displayAsDetails = !1,
        t.item = null,
        t.iterator = null,
        t.onItemChange = new EAObservable,
        t.pinnedItemVC = null,
        t.squad = null,
        t.viewmodel = new UTItemSearchViewModel,
        t
    }
    return __extends(UTClubSearchFiltersViewController, o),
    UTClubSearchFiltersViewController.prototype.init = function() {
        var t;
        if (!this.initialized) {
            o.prototype.init.call(this);
            var e = this.getView();
            e.getSearchButton().addTarget(this, this._eSearchSelected, EventType.TAP),
            e.getResetButton().addTarget(this, this.onResetSelected, EventType.TAP),
            e.getPlayerNameSearch().addTarget(this, this.onPlayerNameChange, EventType.CHANGE),
            e.getSortOptions().addTarget(this, this.onSortToggleChanged, EventType.CHANGE),
            e.getSortDropDown().addTarget(this, this.onDropDownChanged, EventType.CHANGE),
            e.onSearchModeChange.observe(this, this.onSearchModeChanged),
            e.onFilterChange.observe(this, this._eFilterChanged);
            var i = services.Configuration.getFeatureSetting(UTServerSettingsRepository.KEY.SBC_ALLOW_UNTRADEABLE)
              , r = !JSUtils.isValid(this.challenge) || 0 < i
              , n = !(null === (t = this.squad) || void 0 === t ? void 0 : t.isActive());
            e.setupSearchOptions(r, n),
            e.setSortOptions(this.viewmodel.searchCriteria.type === SearchType.STAFF ? factories.DataProvider.getStaffSortTypeDP() : factories.DataProvider.getSortTypeDP()),
            r || (this.viewmodel.searchCriteria.untradeables = SearchUntradeables.EXCLUDE),
            TelemetryManager.trackPage(TelemetryManager.Sections.CLUB, "Club Search Filters")
        }
    }
    ,
    UTClubSearchFiltersViewController.prototype.initWithItem = function(t) {
        this.initialized || (this.setItem(t),
        this.pinnedItemVC = new UTPinnedItemViewController,
        this.pinnedItemVC.initWithItem(t),
        this.addChildViewController(this.pinnedItemVC),
        this.init())
    }
    ,
    UTClubSearchFiltersViewController.prototype.initWithSquad = function(t, e) {
        if (!this.initialized) {
            this.squad = t;
            var i = null == e ? void 0 : e.current()
              , r = this.viewmodel.defaultSearchCriteria;
            i && (r.position = i.generalPositionName),
            this.viewmodel.updateSearchCriteria(r),
            i ? this.initWithItem(i.item) : this.init(),
            this.pinnedItemVC = new UTPinnedItemViewController,
            e ? (this.iterator = e,
            this.pinnedItemVC.initWithIterator(e),
            this.pinnedItemVC.onItemChange.observe(this, this._eOnItemChange)) : this.pinnedItemVC.init(),
            this.addChildViewController(this.pinnedItemVC),
            this.item && this.adaptFiltersToItem(this.item)
        }
    }
    ,
    UTClubSearchFiltersViewController.prototype.initWithSBCChallenge = function(t, e) {
        this.initialized || (DebugUtils.Assert(JSUtils.isValid(t.squad), "Expected a squad building challenge with a loaded squad."),
        this.challenge = t,
        this.getView().addClass("sbc"),
        this.challenge.squad ? this.initWithSquad(this.challenge.squad, e) : this.init())
    }
    ,
    UTClubSearchFiltersViewController.prototype.dealloc = function() {
        o.prototype.dealloc.call(this),
        this.item = null,
        this.squad = null,
        this.challenge = null,
        this.iterator = null,
        this.pinnedItemVC && (this.pinnedItemVC.dealloc(),
        this.pinnedItemVC = null),
        this.onItemChange.dealloc()
    }
    ,
    UTClubSearchFiltersViewController.prototype._getViewInstanceFromData = function() {
        return new UTClubSearchFiltersView
    }
    ,
    UTClubSearchFiltersViewController.prototype.viewDidAppear = function() {
        var t, e;
        o.prototype.viewDidAppear.call(this);
        var i = this.getView()
          , r = null === (t = this.iterator) || void 0 === t ? void 0 : t.current();
        if (null === (e = this.getNavigationController()) || void 0 === e || e.setNavigationVisibility(!0, !0),
        r && this.setItem(r.item),
        this.viewmodel.updateSearchCriteria(this.viewmodel.searchCriteria),
        i.setFilters(this.viewmodel),
        this.item && this.adaptFiltersToItem(this.item),
        this.pinnedItemVC) {
            if (this.iterator) {
                var n = this.iterator.current();
                n && (this.pinnedItemVC.setSlot(n),
                this.pinnedItemVC.setItem(n.item))
            }
            i.appendPinnedItemView(this.pinnedItemVC.getView()),
            this.pinnedItemVC.viewDidAppear()
        }
        services.Club.getStats(),
        services.Club.getContractBonus()
    }
    ,
    UTClubSearchFiltersViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.clubsearch")
    }
    ,
    UTClubSearchFiltersViewController.prototype.adaptFiltersToItem = function(t) {
        var e = this.getView();
        if (e.togglePileFilter(t.isPlayer()),
        t.isPlayer())
            e.setPileFilter(factories.DataProvider.getSearchPileDP(), this.clubSearchType),
            t.isCustomBrick() && e.setInteractionState(!1);
        else if (t.isManager() || t.isManagerConsumable())
            e.setFilterDefaultValue(enums.UISearchFilters.TYPE, SearchCategory.MANAGER),
            e.setFilterValue(enums.UISearchFilters.TYPE, SearchCategory.MANAGER),
            e.setFilterLock(enums.UISearchFilters.TYPE, !0);
        else if (t.isPlayerPositionModifier()) {
            var i = t.getStaticData();
            e.setFilterDefaultValue(enums.UISearchFilters.POSITION, i.trainPosFrom),
            e.setFilterValue(enums.UISearchFilters.POSITION, i.trainPosFrom),
            e.setFilterLock(enums.UISearchFilters.POSITION, !0)
        } else if (t.isGKStyleModifier()) {
            var r = PlayerPosition[PlayerPosition.GK];
            e.setFilterDefaultValue(enums.UISearchFilters.POSITION, r),
            e.setFilterValue(enums.UISearchFilters.POSITION, r),
            e.setFilterLock(enums.UISearchFilters.POSITION, !0)
        }
    }
    ,
    UTClubSearchFiltersViewController.prototype.setSearchCriteria = function(t) {
        this.viewmodel.updateSearchCriteria(t)
    }
    ,
    UTClubSearchFiltersViewController.prototype.setItem = function(t) {
        var e, i = (null === (e = this.item) || void 0 === e ? void 0 : e.type) !== t.type;
        if (this.item = t,
        !i)
            return !1;
        var r = this.viewmodel.defaultSearchCriteria
          , n = t.isManager() || t.isManagerConsumable();
        return r.type = SearchType.PLAYER,
        n ? (r.type = SearchType.STAFF,
        r.category = SearchCategory.MANAGER) : t.isPlayerStyleModifier() ? r.zone = ZONE_NO_GK_VALUE : t.isGKStyleModifier() ? r.position = PlayerPosition[PlayerPosition.GK] : t.isPlayerPositionModifier() && (r.position = t.getStaticData().trainPosFrom),
        this.viewmodel.updateSearchCriteria(r),
        !0
    }
    ,
    UTClubSearchFiltersViewController.prototype.onSearchModeChanged = function(t, e) {
        this.clubSearchType = e;
        var i = this.getView()
          , r = e === ItemSearchFeature.CONCEPT;
        r ? (i.setFilterValue(enums.UISearchFilters.PLAYSTYLE, -1),
        i.setFilterDefaultValue(enums.UISearchFilters.PLAYSTYLE, -1)) : i.setFilterLock(enums.UISearchFilters.POSITION, !1),
        i.setFilterLock(enums.UISearchFilters.PLAYSTYLE, r),
        i.toggleExcludeSquadSlider(!r)
    }
    ,
    UTClubSearchFiltersViewController.prototype.onSortToggleChanged = function(t, e, i) {
        var n = this;
        i.id === enums.UISortOptionType.UNTRADEABLE ? this.viewmodel.searchCriteria.untradeables = i.checked ? SearchUntradeables.ONLY : SearchUntradeables.DEFAULT : i.id === enums.UISortOptionType.EXCLUDE_SQUAD && (i.checked ? this.viewmodel.requestActiveSquadDefIds().observe(this, function(t, e) {
            var i, r;
            t.unobserve(n),
            n.viewmodel.searchCriteria.excludeDefIds = null !== (r = null === (i = e.data) || void 0 === i ? void 0 : i.defIds) && void 0 !== r ? r : []
        }) : this.viewmodel.searchCriteria.excludeDefIds = [])
    }
    ,
    UTClubSearchFiltersViewController.prototype.onDropDownChanged = function(t, e, i) {
        var r = "Club Search Filters - Sort By DropDown changed to: ";
        switch (this.viewmodel.searchCriteria.sort = i.value,
        i.id) {
        case SearchSortID.VALUE_DESC:
            this.viewmodel.searchCriteria.sortBy = SearchSortType.VALUE,
            r += "'Highest Quick Sell'";
            break;
        case SearchSortID.VALUE_ASC:
            this.viewmodel.searchCriteria.sortBy = SearchSortType.VALUE,
            r += "'Lowest Quick Sell'";
            break;
        case SearchSortID.RATING_DESC:
            this.viewmodel.searchCriteria.sortBy = SearchSortType.RATING,
            r += "'Rating High to Low'";
            break;
        case SearchSortID.RATING_ASC:
            this.viewmodel.searchCriteria.sortBy = SearchSortType.RATING,
            r += "'Rating Low to High'";
            break;
        case SearchSortID.RECENCY_DESC:
            this.viewmodel.searchCriteria.sortBy = SearchSortType.RECENCY,
            r += "'Most Recent'";
            break;
        default:
            DebugUtils.Assert(!1, "Unknown search sort ID")
        }
        TelemetryManager.trackEvent(TelemetryManager.Sections.CLUB, TelemetryManager.Categories.FILTER, r)
    }
    ,
    UTClubSearchFiltersViewController.prototype._eFilterChanged = function(t, e, i, r) {
        this.viewmodel.updateFromFilterChange(e, i, r),
        this.getView().setFilters(this.viewmodel)
    }
    ,
    UTClubSearchFiltersViewController.prototype.onResetSelected = function(t, e, i) {
        var r;
        this.viewmodel.resetSearch();
        var n = this.getView()
          , o = n.getSortDropDown();
        n.setFilters(this.viewmodel),
        n.getSortOptions().reset(),
        o.setIndex(o.getDefaultIndex()),
        null === (r = services.User.getUser()) || void 0 === r || r.squadSearchCriteria.reset()
    }
    ,
    UTClubSearchFiltersViewController.prototype.onPlayerNameChange = function(t, e, i) {
        var r = this.getView()
          , n = r.getPlayerNameSearch().getSelected();
        n ? this.viewmodel.setPlayerData(n) : this.viewmodel.clearPlayerData(),
        r.setFilters(this.viewmodel),
        this.item && this.adaptFiltersToItem(this.item),
        n && (r.setFilterValue(enums.UISearchFilters.NATION, -1),
        r.setFilterValue(enums.UISearchFilters.LEAGUE, -1),
        r.setFilterValue(enums.UISearchFilters.CLUB, -1))
    }
    ,
    UTClubSearchFiltersViewController.prototype._eSearchSelected = function(t, e, i) {
        var r, n, o, s, a;
        if (hasConnection()) {
            var l = this.item && this.item.isConsumable() ? new UTClubSearchResultsViewController : new UTSelectItemFromClubViewController
              , c = this.viewmodel.searchCriteria;
            if (c.offset = 0,
            l instanceof UTClubSearchResultsViewController)
                this.item && l.setConsumableToApply(this.item),
                l.initWithSearchCriteria(c),
                l.displayAsDetails = this.displayAsDetails;
            else {
                var u = null !== (o = null === (n = null === (r = this.iterator) || void 0 === r ? void 0 : r.current()) || void 0 === n ? void 0 : n.index) && void 0 !== o ? o : 0;
                l.setItemSearchType(this.clubSearchType),
                l.onItemChange.observe(this, this._eOnItemChange),
                this.iterator && l.setIterator(this.iterator),
                this.challenge ? l.initWithCriteriaAndSBCChallenge(c, this.challenge, u) : this.squad ? l.initWithCriteriaAndSquad(c, this.squad, u) : l.initWithSearchCriteria(c)
            }
            var p = null === (s = services.User.getUser()) || void 0 === s ? void 0 : s.squadSearchCriteria;
            p && (p.update(c),
            p.defId = [],
            p.sort = SearchSortOrder.DESCENDING,
            p.sortBy = SearchSortType.VALUE,
            p.untradeables = SearchUntradeables.DEFAULT),
            null === (a = this.getNavigationController()) || void 0 === a || a.pushViewController(l)
        } else
            utils.PopupManager.showAlert(utils.PopupManager.Alerts.NO_INTERNET_CONNECTION)
    }
    ,
    UTClubSearchFiltersViewController.prototype._eOnItemChange = function(t, e) {
        var i = this.getView()
          , r = this.setItem(e.item)
          , n = this.viewmodel.searchCriteria;
        n.position = 0 < e.generalPositionName.length ? e.generalPositionName : SearchType.ANY,
        r ? i.setFilters(this.viewmodel) : i.setFilterValue(enums.UISearchFilters.POSITION, n.position),
        this.item && this.adaptFiltersToItem(this.item),
        this.onItemChange.notify(e)
    }
    ,
    UTClubSearchFiltersViewController
}(UTViewController))
  , UTApplicableConsumableListView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTApplicableConsumableListView() {
        var t = e.call(this) || this;
        return t.pinnedRow = null,
        t.consumableRows = [],
        t.onApply = new EAObservable,
        t
    }
    return __extends(UTApplicableConsumableListView, e),
    UTApplicableConsumableListView.prototype.dealloc = function() {
        this.onApply.clearObservers(),
        this._removeListRows(),
        this.pinnedRow && (this.pinnedRow.dealloc(),
        this.pinnedRow = null),
        e.prototype.dealloc.call(this)
    }
    ,
    UTApplicableConsumableListView.prototype._generateItemRow = function(t) {
        var e = new UTItemTableCellView;
        return e.setData(t),
        e.render(),
        this.consumableRows.push(e),
        this.__consumableList.appendChild(e.getRootElement()),
        e
    }
    ,
    UTApplicableConsumableListView.prototype._removeListRows = function() {
        0 < this.consumableRows.length && (this.consumableRows.forEach(function(t) {
            return t.dealloc()
        }),
        this.consumableRows = [])
    }
    ,
    UTApplicableConsumableListView.prototype._setItemRowAction = function(t, e) {
        t.setAction(enums.UIRowActionClass.ADD, e)
    }
    ,
    UTApplicableConsumableListView.prototype._setItemRowTapCB = function(t, e) {
        t.setTapCallback(e)
    }
    ,
    UTApplicableConsumableListView.prototype.setItems = function(t) {
        var o = this;
        DOMKit.empty(this.__consumableList),
        this._removeListRows(),
        t.forEach(function(t) {
            var e, i = o._generateItemRow(t), r = null === (e = o.pinnedRow) || void 0 === e ? void 0 : e.getData(), n = r instanceof UTItemEntity && t.canApplyTo(r);
            o._setItemRowAction(i, o.onApply.notify.bind(o.onApply, t)),
            i.setActionState(n)
        }, this)
    }
    ,
    UTApplicableConsumableListView.prototype.setPinnedItem = function(t) {
        DOMKit.empty(this.__pinnedList),
        this.pinnedRow && this.pinnedRow.dealloc(),
        this.pinnedRow = new UTItemTableCellView,
        this.pinnedRow.setData(t),
        this.pinnedRow.render(),
        this.__pinnedList.appendChild(this.pinnedRow.getRootElement()),
        this.__consumableList.style.top = this.__pinnedList.offsetHeight + "px"
    }
    ,
    UTApplicableConsumableListView
}(UTView));
UTApplicableConsumableListView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-pinned-list-container"),
        t.classList.add("SquadConsumablesSection"),
        this.__pinnedList = document.createElement("ul"),
        this.__pinnedList.classList.add("ut-pinned-item"),
        t.appendChild(this.__pinnedList),
        this.__consumableList = document.createElement("ul"),
        this.__consumableList.classList.add("ut-pinned-list"),
        this.__consumableList.classList.add("searchResults"),
        t.appendChild(this.__consumableList),
        this.__root = t,
        this._generated = !0
    }
}
,
UTApplicableConsumableListView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__pinnedList = null,
    this.__consumableList = null
}
,
UTApplicableConsumableListView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTApplicableConsumableListViewController = function(e) {
    function UTApplicableConsumableListViewController() {
        var t = e.call(this) || this;
        return t.challenge = null,
        t.items = [],
        t.pinnedItem = null,
        t.squad = null,
        t
    }
    return __extends(UTApplicableConsumableListViewController, e),
    UTApplicableConsumableListViewController.prototype.init = function() {
        var t;
        this.initialized || (e.prototype.init.call(this),
        TelemetryManager.trackPage((null === (t = this.squad) || void 0 === t ? void 0 : t.isSBC()) ? TelemetryManager.Sections.SBC : TelemetryManager.Sections.SQUADS, "Squad Consumables"),
        this.getView().onApply.observe(this, this._eApplyConsumable))
    }
    ,
    UTApplicableConsumableListViewController.prototype.initWithItems = function(t, e) {
        this.initialized || (DebugUtils.Assert(Array.isArray(t), "Initialization expected an array of item entities."),
        DebugUtils.Assert(e instanceof UTItemEntity, "Initialization expected an item entity."),
        this.items = t,
        this.pinnedItem = e,
        this.init())
    }
    ,
    UTApplicableConsumableListViewController.prototype.initWithItemsAndSquad = function(t, e, i) {
        this.initialized || (DebugUtils.Assert(i instanceof UTSquadEntity, "Initialization expected a squad entity."),
        this.squad = i,
        this.initWithItems(t, e))
    }
    ,
    UTApplicableConsumableListViewController.prototype.initWithItemsAndSBCChallenge = function(t, e, i) {
        this.initialized || (DebugUtils.Assert(i instanceof UTSBCChallengeEntity, "Initialization expected a challenge entity."),
        this.challenge = i,
        this.challenge.squad && this.initWithItemsAndSquad(t, e, this.challenge.squad))
    }
    ,
    UTApplicableConsumableListViewController.prototype.dealloc = function() {
        e.prototype.dealloc.call(this),
        this.items = [],
        this.pinnedItem = null,
        this.squad = null,
        this.challenge = null
    }
    ,
    UTApplicableConsumableListViewController.prototype._getViewInstanceFromData = function() {
        return new UTApplicableConsumableListView
    }
    ,
    UTApplicableConsumableListViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("panel.applyitem.button")
    }
    ,
    UTApplicableConsumableListViewController.prototype.viewDidAppear = function() {
        var t;
        null === (t = this.getNavigationController()) || void 0 === t || t.setNavigationVisibility(!0, !0),
        this._refreshView(),
        e.prototype.viewDidAppear.call(this)
    }
    ,
    UTApplicableConsumableListViewController.prototype._refreshView = function() {
        var t = this.getView();
        this.pinnedItem && t.setPinnedItem(this.pinnedItem),
        t.setItems(this.items)
    }
    ,
    UTApplicableConsumableListViewController.prototype._eApplyConsumable = function(t, n) {
        var e, o = this, s = this.getView();
        s.setInteractionState(!1);
        this.pinnedItem ? (gClickShield.showShield(EAClickShieldView.Shield.LOADING),
        services.Item.applyTo(n, this.pinnedItem).observe(this, function(t, e) {
            var i;
            if (t.unobserve(o),
            e.success) {
                var r = o.challenge ? o.challenge.squad : o.squad;
                services.Notification.queue([services.Localization.localize("notification.item.appliedConsumable"), UINotificationType.NEUTRAL]),
                r && (n.isPlayerPositionModifier() || n.isManagerLeagueModifier()) && r.updateChemistry(),
                o.challenge ? services.SBC.saveChallenge(o.challenge).observe(o, o._onSBCSaveComplete) : o.squad && o.squad.save(),
                o.items = o.items.filter(function(t) {
                    return 0 < t.stackCount
                }),
                0 < o.items.length ? o._refreshView() : null === (i = o.getNavigationController()) || void 0 === i || i.popViewController(!0),
                o.isViewDisplayed() && s.setInteractionState(!0)
            } else
                NetworkErrorManager.handleStatus(e.status);
            gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
        })) : (DebugUtils.Assert(!1, "Attempted to apply consumable when no target set."),
        s.setInteractionState(!0),
        null === (e = this.getNavigationController()) || void 0 === e || e.popToRootViewController(!0))
    }
    ,
    UTApplicableConsumableListViewController.prototype._onSBCSaveComplete = function(t, e) {
        var i;
        if (t.unobserve(this),
        !e.success) {
            var r = "notification.sbcChallenges.failedToSave";
            (null === (i = this.challenge) || void 0 === i ? void 0 : i.hasExpired(!0)) ? r = "notification.sbcChallenges.expired" : e.error && e.error.code === UtasErrorCode.SERVICE_IS_DISABLED && (r = "sbc.notification.disabled"),
            services.Notification.queue([services.Localization.localize(r), UINotificationType.NEGATIVE])
        }
    }
    ,
    UTApplicableConsumableListViewController
}(UTViewController)
  , UTConsumableStatsDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTConsumableStatsDTO() {
        var t = e.call(this) || this;
        return t.contracts = 0,
        t.healing = 0,
        t.managerLeagueModifier = 0,
        t.playStyle = 0,
        t.position = 0,
        t
    }
    return __extends(UTConsumableStatsDTO, e),
    Object.defineProperty(UTConsumableStatsDTO.prototype, "total", {
        get: function() {
            return this.contracts + this.healing + this.managerLeagueModifier + this.playStyle + this.position
        },
        enumerable: !1,
        configurable: !0
    }),
    UTConsumableStatsDTO
}(EAObject))
  , UTConsumableCategoriesViewModel = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTConsumableCategoriesViewModel(t) {
        var e = i.call(this, t) || this;
        return e.organizeItems(),
        e
    }
    return __extends(UTConsumableCategoriesViewModel, i),
    UTConsumableCategoriesViewModel.prototype.getTotals = function(e, t) {
        var i = new UTConsumableStatsDTO;
        return this.values().forEach(function(t) {
            (!e || e && t.canApplyTo(e)) && (t.isContract() ? i.contracts += t.stackCount : t.isInjuryHealing() ? i.healing += t.stackCount : t.isManagerLeagueModifier() ? i.managerLeagueModifier += t.stackCount : t.isStyleModifier() ? i.playStyle += t.stackCount : t.isPlayerPositionModifier() && (i.position += t.stackCount))
        }, this),
        i
    }
    ,
    UTConsumableCategoriesViewModel.prototype.getItems = function(t, e) {
        function dZb(t) {
            return !e || t.canApplyTo(e)
        }
        if (JSUtils.isNumber(t))
            switch (t) {
            case enums.UIConsumableCategory.CONTRACTS:
                return this.values().filter(function(t) {
                    return t.isContract() && dZb(t)
                });
            case enums.UIConsumableCategory.HEALING:
                return this.values().filter(function(t) {
                    return t.isInjuryHealing() && dZb(t)
                });
            case enums.UIConsumableCategory.LEAGUEMOD:
                return this.values().filter(function(t) {
                    return t.isManagerLeagueModifier() && dZb(t)
                });
            case enums.UIConsumableCategory.PLAYSTYLE:
                return this.values().filter(function(t) {
                    return t.isStyleModifier() && dZb(t)
                });
            case enums.UIConsumableCategory.POSITION:
                return this.values().filter(function(t) {
                    return t.isPlayerPositionModifier() && dZb(t)
                })
            }
        return e ? this.values().filter(dZb) : this.values()
    }
    ,
    UTConsumableCategoriesViewModel
}(UTClubViewModel))
  , UTClubCategoryRowView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTClubCategoryRowView() {
        return e.call(this) || this
    }
    return __extends(UTClubCategoryRowView, e),
    UTClubCategoryRowView.prototype.init = function() {
        e.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTClubCategoryRowView.prototype.show = function() {
        this.setDisplay(!0)
    }
    ,
    UTClubCategoryRowView.prototype.hide = function() {
        this.setDisplay(!1)
    }
    ,
    UTClubCategoryRowView.prototype.setTitle = function(t) {
        this.__title.textContent = t
    }
    ,
    UTClubCategoryRowView.prototype.setStackCount = function(t) {
        var e = services.Localization;
        if (0 === t)
            this.__stack.textContent = e.localize("club.consumables.NA");
        else {
            var i = 1 === t ? e.localize("dock.label.item") : e.localize("dock.label.items");
            this.__stack.textContent = t.toString() + " " + i
        }
    }
    ,
    UTClubCategoryRowView.prototype.showStackCount = function(t) {
        DOMKit.toggleDisplayStyle(this.__stack, t)
    }
    ,
    UTClubCategoryRowView.prototype._mouseLeave = function(t) {
        this.removeClass([enums.UIState.ACTIVE, enums.UIState.HOVER].join(" "))
    }
    ,
    UTClubCategoryRowView.prototype._mouseEnter = function(t) {
        this.addClass(enums.UIState.HOVER)
    }
    ,
    UTClubCategoryRowView.prototype._touchStarted = function(t) {
        e.prototype._touchStarted.call(this, t),
        this.addClass(enums.UIState.ACTIVE)
    }
    ,
    UTClubCategoryRowView.prototype._touchMoved = function(t) {
        e.prototype._touchMoved.call(this, t),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTClubCategoryRowView.prototype._touchEnded = function(t) {
        e.prototype._touchEnded.call(this, t),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTClubCategoryRowView.prototype._touchCancelled = function(t) {
        e.prototype._touchCancelled.call(this, t),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTClubCategoryRowView.prototype._tapDetected = function(t) {
        e.prototype._tapDetected.call(this, t),
        this._triggerActions(EventType.TAP)
    }
    ,
    UTClubCategoryRowView
}(UTTargetActionView));
UTClubCategoryRowView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("has-tap-callback"),
        t.classList.add("rowContent"),
        t.classList.add("ListRowClubCategory"),
        this.__imageContainer = document.createElement("div"),
        this.__imageContainer.classList.add("icon"),
        t.appendChild(this.__imageContainer);
        var e = document.createElement("header");
        this.__title = document.createElement("h1"),
        this.__title.classList.add("categoryTitle"),
        e.appendChild(this.__title),
        this.__stack = document.createElement("h2"),
        this.__stack.classList.add("stackValue"),
        e.appendChild(this.__stack),
        t.appendChild(e),
        this.__root = t,
        this._generated = !0
    }
}
,
UTClubCategoryRowView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__imageContainer = null,
    this.__title = null,
    this.__stack = null
}
,
UTClubCategoryRowView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTConsumableCategoriesView = function(e) {
    function UTConsumableCategoriesView() {
        var t = e.call(this) || this;
        return t.pinnedRow = null,
        t.noResultsView = null,
        t
    }
    return __extends(UTConsumableCategoriesView, e),
    UTConsumableCategoriesView.prototype.init = function() {
        e.prototype.init.call(this);
        var t = services.Localization;
        this._contract.init(),
        this._contract.setTitle(t.localize("card.title.contract")),
        this._contract.setDisplay(!1),
        this._healing.init(),
        this._healing.setTitle(t.localize("club.category.healing")),
        this._healing.setDisplay(!1),
        this._positioning.init(),
        this._positioning.setTitle(t.localize("card.title.advtraining")),
        this._positioning.setDisplay(!1),
        this._chemstyle.init(),
        this._chemstyle.setTitle(t.localize("trainingtype.playStyle")),
        this._chemstyle.setDisplay(!1),
        this._leaguemod.init(),
        this._leaguemod.setTitle(t.localize("card.title.leagueModifier")),
        this._leaguemod.setDisplay(!1)
    }
    ,
    UTConsumableCategoriesView.prototype.dealloc = function() {
        this.pinnedRow && (this.pinnedRow.destroy(),
        this.pinnedRow = null),
        this.noResultsView && (this.noResultsView.destroy(),
        this.noResultsView = null),
        e.prototype.dealloc.call(this)
    }
    ,
    UTConsumableCategoriesView.prototype.setCategoryValues = function(t) {
        function YZb(t, e) {
            0 !== e ? (t.setStackCount(e),
            t.setDisplay(!0),
            t.addTarget(i, i._eCategorySelected, EventType.TAP)) : t.setDisplay(!1)
        }
        var i = this;
        0 < t.total ? (YZb.call(this, this._contract, t.contracts),
        YZb.call(this, this._healing, t.healing),
        YZb.call(this, this._leaguemod, t.managerLeagueModifier),
        YZb.call(this, this._chemstyle, t.playStyle),
        YZb.call(this, this._positioning, t.position)) : (this.noResultsView = new UTListNoResultsView,
        this.noResultsView.init(),
        this.noResultsView.setText(services.Localization.localize("consumables.empty")),
        DOMKit.empty(this.__categoryList),
        this.__categoryList.appendChild(this.noResultsView.getRootElement()))
    }
    ,
    UTConsumableCategoriesView.prototype.setPinnedItem = function(t) {
        DOMKit.empty(this.__pinnedList),
        this.pinnedRow && this.pinnedRow.dealloc(),
        this.pinnedRow = new UTItemTableCellView,
        this.pinnedRow.setData(t),
        this.pinnedRow.render(),
        this.__pinnedList.appendChild(this.pinnedRow.getRootElement()),
        this.__categoryList.style.top = this.__pinnedList.offsetHeight + "px",
        t.isLoaned() && this._contract.setDisplay(!1)
    }
    ,
    UTConsumableCategoriesView.prototype._eCategorySelected = function(t, e, i) {
        var r = null;
        t === this._contract ? r = enums.UIConsumableCategory.CONTRACTS : t === this._healing ? r = enums.UIConsumableCategory.HEALING : t === this._leaguemod ? r = enums.UIConsumableCategory.LEAGUEMOD : t === this._chemstyle ? r = enums.UIConsumableCategory.PLAYSTYLE : t === this._positioning && (r = enums.UIConsumableCategory.POSITION),
        JSUtils.isNumber(r) && this._triggerActions(e, {
            category: r
        })
    }
    ,
    UTConsumableCategoriesView
}(UTTargetActionView);
UTConsumableCategoriesView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-pinned-list-container"),
        t.classList.add("SquadConsumables"),
        this.__pinnedList = document.createElement("ul"),
        this.__pinnedList.classList.add("ut-pinned-item"),
        t.appendChild(this.__pinnedList),
        this.__categoryList = document.createElement("div"),
        this.__categoryList.classList.add("ut-pinned-list"),
        this.__categoryList.classList.add("consumablesFilterOptions"),
        this.__categoryList.classList.add("searchFilterOptions"),
        this._contract = new UTClubCategoryRowView,
        this._contract.getRootElement().classList.add("consumable"),
        this._contract.getRootElement().classList.add("contracts"),
        this.__categoryList.appendChild(this._contract.getRootElement()),
        this._healing = new UTClubCategoryRowView,
        this._healing.getRootElement().classList.add("consumable"),
        this._healing.getRootElement().classList.add("healing"),
        this.__categoryList.appendChild(this._healing.getRootElement()),
        this._positioning = new UTClubCategoryRowView,
        this._positioning.getRootElement().classList.add("consumable"),
        this._positioning.getRootElement().classList.add("positioning"),
        this.__categoryList.appendChild(this._positioning.getRootElement()),
        this._leaguemod = new UTClubCategoryRowView,
        this._leaguemod.getRootElement().classList.add("consumable"),
        this._leaguemod.getRootElement().classList.add("leaguemodifier"),
        this.__categoryList.appendChild(this._leaguemod.getRootElement()),
        this._chemstyle = new UTClubCategoryRowView,
        this._chemstyle.getRootElement().classList.add("consumable"),
        this._chemstyle.getRootElement().classList.add("chemstyles"),
        this.__categoryList.appendChild(this._chemstyle.getRootElement()),
        t.appendChild(this.__categoryList),
        this.__root = t,
        this._generated = !0
    }
}
,
UTConsumableCategoriesView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__pinnedList = null,
    this.__categoryList = null,
    this._contract.destroy(),
    this._healing.destroy(),
    this._positioning.destroy(),
    this._leaguemod.destroy(),
    this._chemstyle.destroy()
}
,
UTConsumableCategoriesView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPlayerPositionCellView = function(i) {
    function UTPlayerPositionCellView(t) {
        var e = i.call(this) || this;
        return e.loc = t.localization,
        e
    }
    return __extends(UTPlayerPositionCellView, i),
    UTPlayerPositionCellView.prototype.init = function() {
        i.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTPlayerPositionCellView.prototype.setInteractionState = function(t) {
        var e = this._interactionState;
        i.prototype.setInteractionState.call(this, t),
        this._interactionState !== e && this.toggleClass(enums.UIState.DISABLED, !this._interactionState)
    }
    ,
    UTPlayerPositionCellView.prototype.setPosition = function(t, e) {
        var i = UTLocalizationUtil.positionIdToName(t, this.loc)
          , r = UTLocalizationUtil.positionIdToName(e, this.loc);
        this.__title.textContent = this.loc.localize("player.position.transfer", [i, r])
    }
    ,
    UTPlayerPositionCellView.prototype.toggleSelected = function(t) {
        this.toggleClass(enums.UIState.SELECTED, t)
    }
    ,
    UTPlayerPositionCellView.prototype._mouseEnter = function(t) {
        i.prototype._mouseEnter.call(this, t),
        this.addClass(enums.UIState.HOVER)
    }
    ,
    UTPlayerPositionCellView.prototype._mouseLeave = function(t) {
        i.prototype._mouseLeave.call(this, t),
        this.removeClass(enums.UIState.HOVER)
    }
    ,
    UTPlayerPositionCellView.prototype._touchStarted = function(t) {
        i.prototype._touchStarted.call(this, t),
        this.addClass(enums.UIState.ACTIVE)
    }
    ,
    UTPlayerPositionCellView.prototype._touchMoved = function(t) {
        i.prototype._touchMoved.call(this, t),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTPlayerPositionCellView.prototype._touchEnded = function(t) {
        i.prototype._touchEnded.call(this, t),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTPlayerPositionCellView.prototype._tapDetected = function(t) {
        i.prototype._tapDetected.call(this, t),
        this._triggerActions(EventType.TAP)
    }
    ,
    UTPlayerPositionCellView
}(UTTargetActionView);
UTPlayerPositionCellView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-player-position-table-cell-view"),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-player-position-table-cell-view--title"),
        t.appendChild(this.__title),
        this.__root = t,
        this._generated = !0
    }
}
,
UTPlayerPositionCellView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null
}
,
UTPlayerPositionCellView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTApplicablePositionSelectView = function(r) {
    function UTApplicablePositionSelectView(t, e) {
        var i = r.call(this) || this;
        return i.currentPosition = t,
        i.positionCellViews = [],
        i.loc = e.localization,
        i.selectedPosition = null,
        i
    }
    return __extends(UTApplicablePositionSelectView, r),
    UTApplicablePositionSelectView.prototype.init = function() {
        r.prototype.init.call(this),
        this.__title.textContent = this.loc.localize("popups.title.position-select"),
        this.__description.textContent = this.loc.localize("popups.description.position-select"),
        this._btnCancel.init(),
        this._btnConfirm.init(),
        this._btnConfirm.setInteractionState(!1),
        this._btnCancel.setText(this.loc.localize("common.dialog.cancel")),
        this._btnConfirm.setText(this.loc.localize("common.dialog.apply")),
        this._btnCancel.addTarget(this, this.onDismissButtonSelected, EventType.TAP),
        this._btnConfirm.addTarget(this, this.onConfirmButtonSelected, EventType.TAP),
        this._btnExit.init(),
        this._btnExit.addTarget(this, this.onDismissButtonSelected, EventType.TAP),
        this.setInteractionState(!0)
    }
    ,
    UTApplicablePositionSelectView.prototype.dealloc = function() {
        this.clearPositionCells(),
        r.prototype.dealloc.call(this)
    }
    ,
    UTApplicablePositionSelectView.prototype.clearPositionCells = function() {
        this.selectedPosition = null,
        this.positionCellViews.forEach(function(t) {
            return t.dealloc()
        }),
        this.positionCellViews = []
    }
    ,
    UTApplicablePositionSelectView.prototype.generatePositionCell = function(t) {
        var e = this
          , i = new UTPlayerPositionCellView({
            localization: this.loc
        });
        i.init(),
        i.setPosition(this.currentPosition, t),
        i.addTarget(this, function() {
            return e.onPositionSelected(i, EventType.TAP, {
                newPosition: t
            })
        }, EventType.TAP),
        this.positionCellViews.push(i),
        this.addSubview(i, this.__table)
    }
    ,
    UTApplicablePositionSelectView.prototype.setPositions = function(t) {
        this.clearPositionCells(),
        t.forEach(this.generatePositionCell, this),
        this.layoutSubviews()
    }
    ,
    UTApplicablePositionSelectView.prototype.onDismissButtonSelected = function(t, e, i) {
        this.isInteractionEnabled() && this._triggerActions(UTApplicablePositionSelectView.Event.DISMISS)
    }
    ,
    UTApplicablePositionSelectView.prototype.onPositionSelected = function(t, e, i) {
        this.isInteractionEnabled() && (this.selectedPosition = i.newPosition,
        this.positionCellViews.forEach(function(t) {
            return t.toggleSelected(!1)
        }),
        t.toggleSelected(!0),
        this._btnConfirm.setInteractionState(!0))
    }
    ,
    UTApplicablePositionSelectView.prototype.onConfirmButtonSelected = function(t, e, i) {
        this.isInteractionEnabled() && this.selectedPosition && (this.setInteractionState(!1),
        this._triggerActions(UTApplicablePositionSelectView.Event.POSITION_SELECTED, {
            id: this.selectedPosition
        }))
    }
    ,
    UTApplicablePositionSelectView.Event = Object.freeze({
        DISMISS: "UTApplicablePositionSelectView.DISMISS",
        POSITION_SELECTED: "UTApplicablePositionSelectView.POSITION_SELECTED"
    }),
    UTApplicablePositionSelectView
}(UTTargetActionView);
UTApplicablePositionSelectView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-applicable-position-select-view");
        var e = document.createElement("header");
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-applicable-position-select-view--title"),
        e.appendChild(this.__title),
        this._btnExit = new UTImageButtonControl,
        this._btnExit.getRootElement().classList.add("exit-btn"),
        e.appendChild(this._btnExit.getRootElement()),
        t.appendChild(e);
        var i = document.createElement("div");
        i.classList.add("ut-applicable-position-select-view--description"),
        this.__description = document.createElement("p"),
        i.appendChild(this.__description),
        t.appendChild(i),
        this.__table = document.createElement("div"),
        this.__table.classList.add("ut-applicable-position-select-view--table"),
        t.appendChild(this.__table);
        var r = document.createElement("div");
        r.classList.add("ut-button-group"),
        this._btnConfirm = new UTGroupButtonControl,
        r.appendChild(this._btnConfirm.getRootElement()),
        this._btnCancel = new UTGroupButtonControl,
        this._btnCancel.getRootElement().classList.add("negative"),
        r.appendChild(this._btnCancel.getRootElement()),
        t.appendChild(r),
        this.__root = t,
        this._generated = !0
    }
}
,
UTApplicablePositionSelectView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this._btnExit.destroy(),
    this.__description = null,
    this.__table = null,
    this._btnConfirm.destroy(),
    this._btnCancel.destroy()
}
,
UTApplicablePositionSelectView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTApplicablePositionSelectViewController = function(r) {
    function UTApplicablePositionSelectViewController(t, e) {
        var i = r.call(this) || this;
        return i.challenge = null,
        i.consumable = e,
        i.squad = null,
        i.targetItem = t,
        i
    }
    return __extends(UTApplicablePositionSelectViewController, r),
    UTApplicablePositionSelectViewController.prototype.initWithSquad = function(t) {
        this.initialized || (this.squad = t,
        this.init())
    }
    ,
    UTApplicablePositionSelectViewController.prototype.initWithSBCChallenge = function(t) {
        this.initialized || (this.challenge = t,
        this.challenge.squad && this.initWithSquad(this.challenge.squad))
    }
    ,
    UTApplicablePositionSelectViewController.prototype.dealloc = function() {
        r.prototype.dealloc.call(this),
        this.squad = null,
        this.challenge = null
    }
    ,
    UTApplicablePositionSelectViewController.prototype._getViewInstanceFromData = function() {
        return new UTApplicablePositionSelectView(this.targetItem.preferredPosition,{
            localization: services.Localization
        })
    }
    ,
    UTApplicablePositionSelectViewController.prototype.viewDidAppear = function() {
        var e = this
          , t = this.getView();
        r.prototype.viewDidAppear.call(this),
        t.setPositions(this.targetItem.possiblePositions.filter(function(t) {
            return t !== e.targetItem.preferredPosition
        })),
        t.addTarget(this, this.onDismissSelected, UTApplicablePositionSelectView.Event.DISMISS),
        t.addTarget(this, this.onPositionSelect, UTApplicablePositionSelectView.Event.POSITION_SELECTED)
    }
    ,
    UTApplicablePositionSelectViewController.prototype.viewWillDisappear = function() {
        var t = this.getView();
        r.prototype.viewWillDisappear.call(this),
        t.removeTarget(this, this.onDismissSelected, UTApplicablePositionSelectView.Event.DISMISS),
        t.removeTarget(this, this.onPositionSelect, UTApplicablePositionSelectView.Event.POSITION_SELECTED)
    }
    ,
    UTApplicablePositionSelectViewController.prototype.onDismissSelected = function(t, e, i) {
        this.closePopup()
    }
    ,
    UTApplicablePositionSelectViewController.prototype.onPositionSelect = function(t, e, i) {
        var r = this;
        this.getParentViewController();
        this.getView().setInteractionState(!1);
        services.Item.applyTo(this.consumable, this.targetItem, i.id).observe(this, function(t, e) {
            if (t.unobserve(r),
            e.success) {
                var i = r.challenge ? r.challenge.squad : r.squad;
                services.Notification.queue([services.Localization.localize("notification.item.appliedConsumable"), UINotificationType.NEUTRAL]),
                i && r.consumable.isPlayerPositionModifier() && i.updateChemistry(),
                r.challenge ? services.SBC.saveChallenge(r.challenge).observe(r, r._onSBCSaveComplete) : r.squad && r.squad.save()
            } else
                NetworkErrorManager.handleStatus(e.status);
            r.closePopup()
        })
    }
    ,
    UTApplicablePositionSelectViewController.prototype._onSBCSaveComplete = function(t, e) {
        var i;
        if (t.unobserve(this),
        !e.success) {
            var r = "notification.sbcChallenges.failedToSave";
            (null === (i = this.challenge) || void 0 === i ? void 0 : i.hasExpired(!0)) ? r = "notification.sbcChallenges.expired" : e.error && e.error.code === UtasErrorCode.SERVICE_IS_DISABLED && (r = "sbc.notification.disabled"),
            services.Notification.queue([services.Localization.localize(r), UINotificationType.NEGATIVE])
        }
    }
    ,
    UTApplicablePositionSelectViewController
}(BasePopupViewController)
  , UTConsumableCategoriesViewController = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTConsumableCategoriesViewController() {
        var t = i.call(this) || this;
        return t.challenge = null,
        t.item = null,
        t.squad = null,
        t.viewmodel = null,
        t
    }
    return __extends(UTConsumableCategoriesViewController, i),
    UTConsumableCategoriesViewController.prototype.init = function() {
        if (!this.initialized) {
            i.prototype.init.call(this);
            var t = this.challenge ? TelemetryManager.Sections.SBC : TelemetryManager.Sections.SQUADS
              , e = (this.challenge ? "SBC" : "Active") + " Squad - Apply Consumables";
            TelemetryManager.trackPage(t, e),
            services.PIN.sendData(PINEventType.PAGE_VIEW, {
                type: PIN_PAGEVIEW_EVT_TYPE,
                pgid: e
            }),
            this.getView().addTarget(this, this._eCategorySelected, EventType.TAP)
        }
    }
    ,
    UTConsumableCategoriesViewController.prototype.initWithItem = function(t) {
        this.initialized || (DebugUtils.Assert(t instanceof UTItemEntity, "Initialization expected an item entity."),
        this.item = t,
        this.init())
    }
    ,
    UTConsumableCategoriesViewController.prototype.initWithSquad = function(t, e) {
        if (!this.initialized) {
            DebugUtils.Assert(t instanceof UTSquadEntity, "Initialization expected a squad entity."),
            DebugUtils.Assert(JSUtils.isNumber(e), "Initialization expected a number for current squad slot.");
            var i = (this.squad = t).getSlot(e).getItem();
            DebugUtils.Assert(i.isValid(), "Initialization expected a valid item in the current squad slot."),
            this.initWithItem(i)
        }
    }
    ,
    UTConsumableCategoriesViewController.prototype.initWithSBCChallenge = function(t, e) {
        this.initialized || (DebugUtils.Assert(t instanceof UTSBCChallengeEntity, "Initialization expected a challenge entity."),
        DebugUtils.Assert(JSUtils.isNumber(e), "Initialization expected a number for current squad slot."),
        this.challenge = t,
        this.challenge.squad && this.initWithSquad(this.challenge.squad, e))
    }
    ,
    UTConsumableCategoriesViewController.prototype.dealloc = function() {
        i.prototype.dealloc.call(this),
        this.challenge = null,
        this.item = null,
        this.squad = null,
        this.viewmodel = null
    }
    ,
    UTConsumableCategoriesViewController.prototype._getViewInstanceFromData = function() {
        return new UTConsumableCategoriesView
    }
    ,
    UTConsumableCategoriesViewController.prototype.viewDidAppear = function() {
        var t;
        null === (t = this.getNavigationController()) || void 0 === t || t.setNavigationVisibility(!0, !0),
        this._refreshView(),
        i.prototype.viewDidAppear.call(this)
    }
    ,
    UTConsumableCategoriesViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("panel.applyitem.button")
    }
    ,
    UTConsumableCategoriesViewController.prototype._refreshView = function() {
        var n = this
          , o = this.getView();
        if (this.item && o.setPinnedItem(this.item),
        this.viewmodel && this.item)
            o.setCategoryValues(this.viewmodel.getTotals(this.item, JSUtils.isValid(this.squad)));
        else {
            var t = new UTSearchCriteriaDTO;
            t.type = SearchType.CONSUMABLES_DEVELOPMENT,
            t.category = SearchCategory.ANY,
            services.Club.search(t).observe(this, function(t, e) {
                var i;
                if (t.unobserve(n),
                e.success && JSUtils.isObject(e.response))
                    n.viewmodel = new UTConsumableCategoriesViewModel(e.response.items),
                    o.setCategoryValues(n.viewmodel.getTotals(null !== (i = n.item) && void 0 !== i ? i : void 0, JSUtils.isValid(n.squad)));
                else {
                    services.Notification.queue([services.Localization.localize("notification.error.loadConsumables"), UINotificationType.NEGATIVE]);
                    var r = n.getNavigationController();
                    r && r.popViewController()
                }
            })
        }
    }
    ,
    UTConsumableCategoriesViewController.prototype.openPositionSelectorModal = function(t) {
        var i = this;
        if (this.item && t.isPlayerPositionModifier()) {
            var e = new UTApplicablePositionSelectViewController(this.item,t);
            e.modalDisplayStyle = "form",
            this.challenge ? e.initWithSBCChallenge(this.challenge) : this.squad ? e.initWithSquad(this.squad) : e.init(),
            e.onExit.observe(this, function(t) {
                var e;
                t.unobserve(i),
                null === (e = i.getNavigationController()) || void 0 === e || e.popViewController(!0)
            }),
            gPopupClickShield.setActivePopup(e)
        }
    }
    ,
    UTConsumableCategoriesViewController.prototype._eCategorySelected = function(t, e, i) {
        var r, n, o;
        if (JSUtils.isNumber(i.category) && this.item) {
            var s = null !== (n = null === (r = this.viewmodel) || void 0 === r ? void 0 : r.getItems(i.category, this.item)) && void 0 !== n ? n : [];
            if (0 < s.length && i.category === enums.UIConsumableCategory.POSITION)
                this.openPositionSelectorModal(s[0]);
            else {
                var a = new UTApplicableConsumableListViewController;
                this.challenge ? a.initWithItemsAndSBCChallenge(s, this.item, this.challenge) : this.squad ? a.initWithItemsAndSquad(s, this.item, this.squad) : this.item ? a.initWithItems(s, this.item) : a.init(),
                a && (null === (o = this.getNavigationController()) || void 0 === o || o.pushViewController(a))
            }
        }
    }
    ,
    UTConsumableCategoriesViewController
}(UTViewController))
  , UTItemActionController = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTItemActionController() {
        return t.call(this) || this
    }
    return __extends(UTItemActionController, t),
    UTItemActionController.prototype.bid = function(t, e) {
        var i = this
          , r = services.Localization
          , n = services.Item.bid(t, e);
        return n.observe(this, function(t, e) {
            if (t.unobserve(i),
            e.status === HttpStatusCode.RATE_LIMIT)
                services.Notification.queue([r.localize("popup.error.RateLimitBody"), UINotificationType.NEGATIVE]);
            else if (e.error)
                switch (e.error.code) {
                case UtasErrorCode.PERMISSION_DENIED:
                    services.Notification.queue([r.localize("popup.error.item.bidDenied"), UINotificationType.NEGATIVE]);
                    break;
                case UtasErrorCode.STATE_INVALID:
                case UtasErrorCode.NO_TRADE_EXISTS:
                    services.Notification.queue([r.localize("popup.error.item.InvalidState"), UINotificationType.NEGATIVE]);
                    break;
                case UtasErrorCode.INVALID_OWNER:
                    services.Notification.queue([r.localize("popup.error.tradetoken.BidYourCard"), UINotificationType.NEGATIVE]);
                    break;
                case UtasErrorCode.CARD_IN_TRADE:
                    services.Notification.queue([r.localize("popup.error.tradetoken.ItemInTradeOffer"), UINotificationType.NEGATIVE]);
                    break;
                case UtasErrorCode.NOT_ENOUGH_CREDIT:
                    services.Notification.queue([r.localize("popup.error.auctionInsufficientCoins"), UINotificationType.NEGATIVE]);
                    break;
                case UtasErrorCode.SERVICE_IS_DISABLED:
                    services.Notification.queue([r.localize("popup.error.auctioninfo.tradingdisabled"), UINotificationType.NEGATIVE])
                }
        }),
        n
    }
    ,
    UTItemActionController.prototype.combineLoans = function(t) {
        var i = this
          , r = services.Localization
          , e = services.Item.combineLoans(t);
        return e.observe(this, function(t, e) {
            t.unobserve(i),
            e.success || services.Notification.queue([r.localize("notification.error.item.combineLoans"), UINotificationType.NEGATIVE])
        }),
        e
    }
    ,
    UTItemActionController.prototype.discard = function(t, e) {
        var i = this
          , r = services.Item.discard(t, e);
        return r.observe(this, function(t, e) {
            t.unobserve(i),
            e.success || services.Notification.queue([services.Localization.localize("notification.error.item.discard"), UINotificationType.NEGATIVE])
        }),
        r
    }
    ,
    UTItemActionController.prototype.move = function(c, u) {
        var p = this
          , t = services.Item.move(c, u);
        return t.observe(this, function(t, e) {
            var i = services.Localization;
            if (t.unobserve(p),
            e.success && JSUtils.isObject(e.data)) {
                var r = e.data
                  , n = Array.isArray(c) ? c.filter(function(t) {
                    return 0 <= r.itemIds.indexOf(t.id)
                }) : [c]
                  , o = n.length
                  , s = "";
                if (1 < o) {
                    var a = u === ItemPile.TRANSFER ? "notification.item.allToTradePile" : "notification.item.allToClub";
                    s = i.localize(a, [o.toString()])
                } else if (1 === o)
                    if (u === ItemPile.TRANSFER) {
                        var l = n[0];
                        s = l.isManager() ? i.localize("notification.manager.toTradePile") : l.isPlayer() ? i.localize("notification.player.toTradePile") : i.localize("notification.item.oneToTradePile")
                    } else
                        s = i.localize("notification.item.oneToClub");
                else
                    s = u === ItemPile.TRANSFER ? i.localize("notification.item.noneToTradePile") : i.localize("notification.item.noneToClub");
                services.Notification.queue([s, UINotificationType.NEUTRAL])
            } else
                e.error && NetworkErrorManager.checkCriticalStatus(e.error.code) ? NetworkErrorManager.handleStatus(e.error.code) : NetworkErrorManager.checkCriticalStatus(e.status) ? NetworkErrorManager.handleStatus(e.status) : services.Notification.queue([i.localize("notification.item.moveFailed"), UINotificationType.NEGATIVE])
        }),
        t
    }
    ,
    UTItemActionController.prototype.target = function(t) {
        var r = this
          , n = services.Localization
          , e = services.Item.target(t);
        return e.observe(this, function(t, e) {
            var i;
            t.unobserve(r),
            e.success ? services.Notification.queue([n.localize("notification.item.watched"), UINotificationType.NEUTRAL]) : (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.PERMISSION_DENIED ? services.Notification.queue([n.localize("popup.error.watch.PermissionDenied"), UINotificationType.NEGATIVE]) : e.status === HttpStatusCode.CONFLICT && services.Notification.queue([n.localize("popup.error.watch.ItemNoLongerAvailable"), UINotificationType.NEGATIVE])
        }),
        e
    }
    ,
    UTItemActionController.prototype.untarget = function(t) {
        var r = this
          , n = services.Localization
          , e = services.Item.untarget(t);
        return e.observe(this, function(t, e) {
            var i;
            t.unobserve(r),
            e.success ? services.Notification.queue([n.localize("notification.item.unwatched"), UINotificationType.NEUTRAL]) : (null === (i = e.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.PERMISSION_DENIED && services.Notification.queue([n.localize("popup.error.unwatch.PermissionDenied"), UINotificationType.NEGATIVE])
        }),
        e
    }
    ,
    UTItemActionController
}(EAObject))
  , EAFilterBarItemView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function EAFilterBarItemView(t) {
        var e = i.call(this) || this;
        return e.id = t,
        e
    }
    return __extends(EAFilterBarItemView, i),
    EAFilterBarItemView
}(UTButtonControl));
EAFilterBarItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("button");
        t.classList.add("ea-filter-bar-item-view"),
        this.__root = t,
        this._generated = !0
    }
}
,
EAFilterBarItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
EAFilterBarItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var EAFilterBarView = function(e) {
    function EAFilterBarView() {
        var t = e.call(this) || this;
        return t.items = [],
        t.selectedItemId = 0,
        t
    }
    return __extends(EAFilterBarView, e),
    EAFilterBarView.prototype.dealloc = function() {
        this.clearTabs(),
        e.prototype.dealloc.call(this)
    }
    ,
    EAFilterBarView.prototype.setInteractionState = function(e) {
        this._setInteractionStateFlag(e),
        this.items.forEach(function(t) {
            return t.setInteractionState(e)
        })
    }
    ,
    EAFilterBarView.prototype.slideToFilterItem = function(t) {
        var e = this.getRootElement()
          , i = this.getBoundingClientRect()
          , r = t.getBoundingClientRect()
          , n = this.getRootElement().scrollLeft;
        if (r.left < i.left) {
            var o = r.left - i.left
              , s = n + Math.round(o);
            e.scroll({
                left: s,
                behavior: "smooth"
            })
        } else if (Math.round(r.right) > i.right) {
            var a = r.right - i.right;
            s = n + Math.round(a);
            e.scroll({
                left: s,
                behavior: "smooth"
            })
        }
    }
    ,
    EAFilterBarView.prototype.updateFilterItemState = function() {
        var i = this
          , r = null;
        this.items.forEach(function(t) {
            var e = t.id === i.selectedItemId;
            t.toggleClass(enums.UIState.SELECTED, e),
            e && (r = t)
        }),
        r && this.slideToFilterItem(r)
    }
    ,
    EAFilterBarView.prototype.clearTabs = function() {
        this.items.forEach(function(t) {
            return t.dealloc()
        }),
        this.items = []
    }
    ,
    EAFilterBarView.prototype.setActiveTab = function(t) {
        t !== this.selectedItemId && (this.selectedItemId = t,
        this.updateFilterItemState())
    }
    ,
    EAFilterBarView.prototype.getActiveTab = function() {
        return this.selectedItemId
    }
    ,
    EAFilterBarView.prototype.addTab = function(t, e) {
        var i = new EAFilterBarItemView(t);
        i.init(),
        i.setText(e),
        i.addTarget(this, this.onItemTapped, EventType.TAP),
        this.addSubview(i, this.__menuContainer),
        this.items.push(i),
        1 === this.items.length && (this.selectedItemId = t,
        this.updateFilterItemState())
    }
    ,
    EAFilterBarView.prototype.setTabInteractionState = function(e, t) {
        if (t || e !== this.selectedItemId) {
            var i = JSUtils.find(this.items, function(t) {
                return t.id === e
            });
            i && (i.toggleClass(enums.UIState.DISABLED, !t),
            i.setInteractionState(t))
        }
    }
    ,
    EAFilterBarView.prototype.onItemTapped = function(t) {
        t.id !== this.selectedItemId && (this.setActiveTab(t.id),
        this._triggerActions(EventType.TAP, {
            tab: t,
            id: t.id,
            index: this.items.indexOf(t)
        }))
    }
    ,
    EAFilterBarView
}(UTTargetActionView);
EAFilterBarView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ea-filter-bar-view"),
        this.__menuContainer = document.createElement("div"),
        this.__menuContainer.classList.add("menu-container"),
        t.appendChild(this.__menuContainer),
        this.__root = t,
        this._generated = !0
    }
}
,
EAFilterBarView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__menuContainer = null
}
,
EAFilterBarView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTProgressListItemView = function(e) {
    function UTProgressListItemView() {
        var t = e.call(this) || this;
        return t.title = "",
        t.value = "",
        t
    }
    return __extends(UTProgressListItemView, e),
    UTProgressListItemView.prototype.setProgress = function(t) {
        this._progressBar.setProgress(t),
        75 <= t ? this._progressBar.setFeedbackState(enums.UIFeedbackState.HIGH) : 25 <= t ? this._progressBar.setFeedbackState(enums.UIFeedbackState.MEDIUM) : this._progressBar.setFeedbackState(enums.UIFeedbackState.LOW)
    }
    ,
    UTProgressListItemView.prototype.render = function() {
        this.__value.textContent = this.value.toString(),
        this.__title.textContent = this.title
    }
    ,
    UTProgressListItemView
}(UTView);
UTProgressListItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("li");
        t.classList.add("ut-progress-list-view");
        var e = document.createElement("div");
        e.classList.add("bar-container"),
        this.__title = document.createElement("span"),
        this.__title.classList.add("title"),
        e.appendChild(this.__title),
        this._progressBar = new UTProgressBarView,
        this._progressBar.getRootElement().classList.add("rounded"),
        this._progressBar.getRootElement().classList.add("mini"),
        e.appendChild(this._progressBar.getRootElement()),
        t.appendChild(e),
        this.__value = document.createElement("span"),
        this.__value.classList.add("value"),
        t.appendChild(this.__value),
        this.__root = t,
        this._generated = !0
    }
}
,
UTProgressListItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this._progressBar.destroy(),
    this.__value = null
}
,
UTProgressListItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPlayerBioTemporaryItemRowView = function(e) {
    function UTPlayerBioTemporaryItemRowView() {
        var t = e.call(this) || this;
        return t.startTime = 0,
        t.endTime = 0,
        t
    }
    return __extends(UTPlayerBioTemporaryItemRowView, e),
    UTPlayerBioTemporaryItemRowView.prototype._generateDateString = function(t) {
        var e = services.Localization
          , i = new Date(1e3 * t);
        return e.localize("date.ddmmmyyyy", [i.getUTCDate().toString(), e.localize(MONTH_NAMES[i.getUTCMonth()]), i.getUTCFullYear().toString()])
    }
    ,
    UTPlayerBioTemporaryItemRowView.prototype.render = function() {
        var t = services.Localization
          , e = this.endTime - Math.round(Date.now() / MS_PER_SECOND);
        this.__title.textContent = t.localize("extendedPlayerInfo.general.temporaryItem", [t.localizeTimeRemaining(0 < e ? e : 0)]),
        this.__description.innerHTML = t.localize("extendedPlayerInfo.general.temporaryItemDescription", [this._generateDateString(this.startTime), this._generateDateString(this.endTime)])
    }
    ,
    UTPlayerBioTemporaryItemRowView
}(UTView);
UTPlayerBioTemporaryItemRowView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("li");
        t.classList.add("ut-temporary-item-row"),
        this.__title = document.createElement("h1"),
        t.appendChild(this.__title),
        this.__description = document.createElement("p"),
        t.appendChild(this.__description),
        this.__root = t,
        this._generated = !0
    }
}
,
UTPlayerBioTemporaryItemRowView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this.__description = null
}
,
UTPlayerBioTemporaryItemRowView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPlayerBioView = function(e) {
    function UTPlayerBioView() {
        var t = e.call(this) || this;
        return t.tables = [],
        t.headers = [],
        t.pinnedRow = null,
        t
    }
    return __extends(UTPlayerBioView, e),
    UTPlayerBioView.prototype.dealloc = function() {
        this.clearComponentList(),
        this.tables = [],
        this.headers = [],
        this.pinnedRow = null,
        e.prototype.dealloc.call(this)
    }
    ,
    UTPlayerBioView.prototype.setupNavigation = function(t, e) {
        var i = services.Localization;
        this._navigation.clearTabs(),
        this._navigation.addTab(PlayerBioDisplayGroup.INFO, i.localize("extendedPlayerInfo.tab.general")),
        this._navigation.addTab(PlayerBioDisplayGroup.ATTRIBUTES, i.localize("extendedPlayerInfo.tab.stats")),
        this._navigation.addTab(PlayerBioDisplayGroup.TRAITS, i.localize("extendedPlayerInfo.tab.traits"));
        var r = e.isLeagueHeroItem() && !e.isShapeshifterHeroItem();
        (e.isLegend() || r) && this._navigation.addTab(PlayerBioDisplayGroup.LEGENDS, i.localize("extendedPlayerInfo.tab.rarityInfo", [i.localize("item.raretype" + e.rareflag)])),
        this._navigation.setActiveTab(PlayerBioDisplayGroup.INFO),
        this._navigation.addTarget(this, t, EventType.TAP),
        this._navigation.layoutSubviews()
    }
    ,
    UTPlayerBioView.prototype.render = function(t, e) {
        switch (DOMKit.empty(this.__dataDisplay),
        this.clearComponentList(),
        t) {
        case PlayerBioDisplayGroup.INFO:
            this.renderInfo(e);
            break;
        case PlayerBioDisplayGroup.ATTRIBUTES:
            this.renderAttributes(e);
            break;
        case PlayerBioDisplayGroup.LEGENDS:
            this.renderLegends(e);
            break;
        case PlayerBioDisplayGroup.TRAITS:
            this.renderPlayerTraits(e)
        }
    }
    ,
    UTPlayerBioView.prototype.renderInfo = function(e) {
        var t = e.getYellowCards()
          , i = e.getTotalYellowCards()
          , r = e.getRedCards()
          , n = e.getTotalRedCards()
          , o = e.getStaticData()
          , s = e.getMetaData()
          , a = services.Localization
          , l = a.localize("extendedPlayerInfo.details.cards", [i.toString(), Math.max(0, i - t).toString(), t.toString()])
          , c = a.localize("extendedPlayerInfo.details.cards", [n.toString(), Math.max(0, n - r).toString(), r.toString()])
          , u = "extendedPlayerInfo.stats." + (e.isLeftFoot() ? "Left" : "Right");
        function generateWorkRateHALString(t) {
            return 2 <= t ? "extendedPlayerInfo.workrate.high" : 1 <= t ? "extendedPlayerInfo.workrate.low" : "extendedPlayerInfo.workrate.medium"
        }
        this.createHeader(this.__dataDisplay, a.localize("extendedPlayerInfo.header"), this.headers);
        var p = document.createElement("ul");
        p.classList.add(UTPlayerBioView.CLASS.PSEUDO_TABLE),
        this.__dataDisplay.appendChild(p);
        var h, d = (e.isSpecial() ? "" : a.localize("search.cardLevels.cardLevel" + e.getTier()) + " ") + a.localize("item.raretype" + e.rareflag);
        if (h = s ? a.locale.region === RegionEnum.USA ? TextUtils.centimetersToFeet(s.height) : a.localize("extendedPlayerInfo.general.height.cm", [s.height.toString()]) : a.localize("extendedPlayerInfo.general.height.cm", ["0"]),
        e.isLimitedTimePlayer() && this.createTemporaryItemRow(p, e.startTime, e.endTime),
        this.createRow(p, a.localize("extendedPlayerInfo.general.rarity"), d),
        this.createRow(p, a.localize("extendedPlayerInfo.general.firstName"), o.firstName + " " + o.lastName),
        this.createRow(p, a.localize("extendedPlayerInfo.general.knownAs"), o.knownAs),
        s) {
            var _ = new Date(1e3 * s.birthday);
            this.createRow(p, a.localize("extendedPlayerInfo.general.dateOfBirth"), a.localize("date.mmddyyyy", [(_.getUTCMonth() + 1).toString(), _.getUTCDate().toString(), _.getUTCFullYear().toString()]))
        } else
            this.createRow(p, a.localize("extendedPlayerInfo.general.dateOfBirth"), "---");
        this.createRow(p, a.localize("extendedPlayerInfo.general.height"), h),
        this.createRow(p, a.localize("extendedPlayerInfo.general.preferredPosition"), a.localize("extendedPlayerInfo.positions.position" + e.preferredPosition)),
        1 < e.possiblePositions.length && this.createRow(p, a.localize("extendedPlayerInfo.general.alternatePositions"), e.possiblePositions.filter(function(t) {
            return t !== e.preferredPosition
        }).map(function(t) {
            return a.localize("extendedPlayerInfo.positions.position" + t)
        }).join(", ")),
        e.isGK() || this.createRow(p, a.localize("extendedPlayerInfo.general.workrate"), a.localize("extendedPlayerInfo.workrate.values", [a.localize(generateWorkRateHALString(e.getOffensiveWorkRate())), a.localize(generateWorkRateHALString(e.getDefensiveWorkRate()))])),
        this.createRow(p, a.localize("extendedPlayerInfo.general.preferredFoot"), a.localize(u)),
        this.createRatingRow(p, a.localize("extendedPlayerInfo.stats.weakfoot"), e.getWeakFoot()),
        this.createRatingRow(p, a.localize("extendedPlayerInfo.stats.skillmoves"), e.getSkillMoves()),
        this.createRow(p, a.localize("extendedPlayerInfo.general.nation"), UTLocalizationUtil.nationIdToName(e.nationId, a)),
        this.createRow(p, a.localize("extendedPlayerInfo.general.club"), UTLocalizationUtil.teamIdToAbbr15(e.teamId, a)),
        this.createRow(p, a.localize("extendedPlayerInfo.general.league"), UTLocalizationUtil.leagueIdToName(e.leagueId, a)),
        this.createHeader(this.__dataDisplay, a.localize("extendedPlayerInfo.general.itemDetails"), this.headers),
        (p = document.createElement("ul")).classList.add(UTPlayerBioView.CLASS.PSEUDO_TABLE),
        this.__dataDisplay.appendChild(p),
        this.createRow(p, a.localize("extendedPlayerInfo.general.playstyle"), UTLocalizationUtil.playStyleIdToName(e.playStyle, a)),
        this.createRow(p, a.localize("extendedPlayerInfo.general.numberOfOwners"), e.owners),
        this.createRow(p, a.localize("extendedPlayerInfo.general.contract"), e.contract),
        this.createRow(p, a.localize("extendedPlayerInfo.general.gamesPlayed"), e.getTotalGamesPlayed()),
        this.createRow(p, a.localize("extendedPlayerInfo.general.goalsScored"), e.getTotalGoals()),
        this.createRow(p, a.localize("extendedPlayerInfo.general.totalYellowCards"), l),
        this.createRow(p, a.localize("extendedPlayerInfo.general.totalRedCards"), c)
    }
    ,
    UTPlayerBioView.prototype.renderAttributes = function(t) {
        var i = this
          , r = t.isGK() ? ["extendedPlayerInfo.stats.diving", "extendedPlayerInfo.stats.handling", "extendedPlayerInfo.stats.kicking", "extendedPlayerInfo.stats.reflexes", "extendedPlayerInfo.stats.acceleration", "extendedPlayerInfo.stats.positioning"] : ["extendedPlayerInfo.stats.pace", "extendedPlayerInfo.stats.shooting", "extendedPlayerInfo.stats.passing", "extendedPlayerInfo.stats.dribbling", "extendedPlayerInfo.stats.defending", "extendedPlayerInfo.stats.heading"]
          , n = services.Localization;
        this.createHeader(this.__dataDisplay, n.localize("extendedPlayerInfo.tab.stats"), this.headers);
        var o = document.createElement("ul");
        o.classList.add(UTPlayerBioView.CLASS.PSEUDO_TABLE),
        this.__dataDisplay.appendChild(o),
        this.createProgressListRow(o, n.localize("extendedPlayerInfo.general.overall"), t.rating, t.rating),
        t.getAttributes().forEach(function(t, e) {
            i.createProgressListRow(o, n.localize(r[e]), t, t / 99 * 100)
        }, this),
        this.createHeader(this.__dataDisplay, n.localize("extendedPlayerInfo.stats.status"), this.headers),
        (o = document.createElement("ul")).classList.add(UTPlayerBioView.CLASS.PSEUDO_TABLE),
        this.__dataDisplay.appendChild(o),
        (o = document.createElement("ul")).classList.add(UTPlayerBioView.CLASS.PSEUDO_TABLE),
        this.__dataDisplay.appendChild(o),
        this.createRow(o, n.localize("extendedPlayerInfo.general.injury"), n.localize("extendedPlayerInfo.general.injury." + t.injuryType)),
        this.createRow(o, n.localize("extendedPlayerInfo.general.injuryDuration"), t.injuryGames),
        this.createRow(o, n.localize("extendedPlayerInfo.currentYellowCards"), t.getYellowCards()),
        this.createRow(o, n.localize("extendedPlayerInfo.currentRedCards"), t.getRedCards())
    }
    ,
    UTPlayerBioView.prototype.renderPlayerTraits = function(t) {
        var n = this
          , o = services.Localization;
        this.createHeader(this.__dataDisplay, o.localize("extendedPlayerInfo.tab.playerTraits"), this.headers);
        var s = document.createElement("ul");
        s.classList.add(UTPlayerBioView.CLASS.PSEUDO_TABLE);
        var e = t.getPlayerTraits();
        if (e) {
            var a = "extendedPlayerInfo.playerTraits.name.";
            e.getPlayerTraits().sort(function(t, e) {
                return JSUtils.sortCompare(TextUtils.stripSpecialCharacters(o.localize(a + t)).toLowerCase(), TextUtils.stripSpecialCharacters(o.localize(a + e)).toLowerCase())
            }).forEach(function(t, e) {
                e += 1;
                var i = o.localize("extendedPlayerInfo.playerTraits.rowTitle", [e.toString()])
                  , r = o.localize(a + t);
                n.createPlayerTraitRow(s, i, r, t.toString())
            }, this)
        }
        this.__dataDisplay.appendChild(s)
    }
    ,
    UTPlayerBioView.prototype.renderLegends = function(t) {
        var e, i = null === (e = t.getMetaData()) || void 0 === e ? void 0 : e.legendBio, r = services.Localization;
        this.createHeader(this.__dataDisplay, r.localize("extendedPlayerInfo.legend.clubCareerTitle"), this.headers);
        var n = new UTPseudoTableView;
        n.addClass(UTPseudoTableView.Style.ALTERNATING),
        this.tables.push(n),
        this.__dataDisplay.appendChild(n.getRootElement()),
        n.addRowGroup([r.localize("extendedPlayerInfo.legend.years"), r.localize("extendedPlayerInfo.legend.team"), r.localize("extendedPlayerInfo.legend.appearances"), r.localize("extendedPlayerInfo.legend.goals")]),
        null == i || i.clubCareer.forEach(function(t, e) {
            n.addRowData([(t.endYear - t.startYear).toString(), function getTeamName(t, e) {
                var i = services.Localization;
                if ((!e || JSUtils.isNumber(e) && e > APP_YEAR) && (e = APP_YEAR),
                e <= 2009)
                    return BLANK_STR;
                var r = UTLocalizationUtil.teamIdToAbbr15(t, i);
                return -1 !== r.indexOf("*") ? getTeamName(t, e - 1) : r
            }(t.teamId, APP_YEAR), t.matches.toString(), t.goals.toString()])
        }),
        this.createHeader(this.__dataDisplay, r.localize("extendedPlayerInfo.legend.nationalCareerTitle"), this.headers),
        (n = new UTPseudoTableView).addClass(UTPseudoTableView.Style.ALTERNATING),
        this.tables.push(n),
        this.__dataDisplay.appendChild(n.getRootElement()),
        n.addRowGroup([r.localize("extendedPlayerInfo.legend.years"), r.localize("extendedPlayerInfo.legend.team"), r.localize("extendedPlayerInfo.legend.appearances"), r.localize("extendedPlayerInfo.legend.goals")]),
        null == i || i.nationalCareer.forEach(function(t, e) {
            n.addRowData([(t.endYear - t.startYear).toString(), UTLocalizationUtil.teamIdToAbbr15(t.teamId, r), t.matches.toString(), t.goals.toString()])
        }),
        this.createHeader(this.__dataDisplay, r.localize("extendedPlayerInfo.legend.claimToFameTitle"), this.headers);
        var o = document.createElement("p");
        o.classList.add(UTPlayerBioView.CLASS.ISOLATED_SECTION),
        o.textContent = r.localize("FUT_LEGEND_DESCR_" + t.databaseId),
        this.__dataDisplay.appendChild(o)
    }
    ,
    UTPlayerBioView.prototype.createHeader = function(t, e, i) {
        var r = new UTSectionedTableHeaderView;
        r.init(),
        r.hideButton(),
        r.setText(e),
        t.appendChild(r.getRootElement()),
        i.push(r)
    }
    ,
    UTPlayerBioView.prototype.createRow = function(t, e, i) {
        var r = document.createElement("li")
          , n = document.createElement("h1")
          , o = document.createElement("h2");
        n.textContent = e,
        o.textContent = i.toString(),
        r.appendChild(n),
        r.appendChild(o),
        t.appendChild(r)
    }
    ,
    UTPlayerBioView.prototype.createProgressListRow = function(t, e, i, r) {
        var n = new UTProgressListItemView;
        n.value = i,
        n.title = e,
        n.setProgress(r),
        t.appendChild(n.getRootElement()),
        console.log(n.getRootElement()),
        n.render()
    }
    ,
    UTPlayerBioView.prototype.createTemporaryItemRow = function(t, e, i) {
        var r = new UTPlayerBioTemporaryItemRowView;
        r.startTime = e,
        r.endTime = i,
        t.appendChild(r.getRootElement()),
        r.render()
    }
    ,
    UTPlayerBioView.prototype.createRatingRow = function(t, e, i) {
        var r = document.createElement("li")
          , n = document.createElement("h1")
          , o = new UTStarRatingView;
        n.textContent = e,
        o.setRatingPercent(i / 5 * 100),
        r.appendChild(n),
        r.appendChild(o.getRootElement()),
        t.appendChild(r)
    }
    ,
    UTPlayerBioView.prototype.createPlayerTraitRow = function(t, e, i, r) {
        var n = document.createElement("li")
          , o = document.createElement("h1")
          , s = document.createElement("h2")
          , a = document.createElement("img");
        o.textContent = e,
        s.textContent = i;
        var l = "images/traits/trait" + r + ".png";
        a.setAttribute("src", l),
        o.appendChild(a),
        n.appendChild(o),
        n.appendChild(s),
        t.appendChild(n)
    }
    ,
    UTPlayerBioView.prototype.clearComponentList = function() {
        this.tables.forEach(function(t, e) {
            t.dealloc()
        }),
        this.tables.splice(0, this.tables.length)
    }
    ,
    UTPlayerBioView.prototype.appendPinnedItemView = function(t) {
        this.pinnedRow = t,
        this.addSubview(t, this.__pinnedDiv)
    }
    ,
    UTPlayerBioView.prototype.calculateHeights = function() {
        this.pinnedRow && (this.__scrollerDiv.style.top = this.pinnedRow.getRootElement().clientHeight + "px")
    }
    ,
    UTPlayerBioView.CLASS = {
        ISOLATED_SECTION: "isolated-section",
        PSEUDO_TABLE: "pseudo-table"
    },
    UTPlayerBioView
}(UTView);
UTPlayerBioView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("article");
        t.classList.add("ut-pinned-list-container"),
        t.classList.add("ut-player-bio-view"),
        this.__pinnedDiv = document.createElement("div"),
        t.appendChild(this.__pinnedDiv),
        this.__scrollerDiv = document.createElement("div"),
        this.__scrollerDiv.classList.add("ut-pinned-list"),
        this._navigation = new EAFilterBarView,
        this.__scrollerDiv.appendChild(this._navigation.getRootElement()),
        this.__dataDisplay = document.createElement("div"),
        this.__scrollerDiv.appendChild(this.__dataDisplay),
        t.appendChild(this.__scrollerDiv),
        this.__root = t,
        this._generated = !0
    }
}
,
UTPlayerBioView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__pinnedDiv = null,
    this.__scrollerDiv = null,
    this._navigation.destroy(),
    this.__dataDisplay = null
}
,
UTPlayerBioView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPlayerBioViewController = function(r) {
    function UTPlayerBioViewController() {
        var t = r.call(this) || this;
        return t.pinnedItem = null,
        t.pinnedItemController = new UTPinnedItemViewController,
        t.viewModel = new UTItemListViewModel([]),
        t
    }
    return __extends(UTPlayerBioViewController, r),
    UTPlayerBioViewController.prototype.init = function() {
        this.initialized || (r.prototype.init.call(this),
        TelemetryManager.trackPage(TelemetryManager.Sections.MISC, "PlayerBio"))
    }
    ,
    UTPlayerBioViewController.prototype.initWithItem = function(t) {
        var e, i;
        this.initialized || (DebugUtils.Assert(t instanceof UTItemEntity, "Initialization expected an item entity."),
        this.pinnedItem = t,
        null === (e = this.viewModel) || void 0 === e || e.add(t),
        null === (i = this.pinnedItemController) || void 0 === i || i.initWithItem(t),
        this.init())
    }
    ,
    UTPlayerBioViewController.prototype.dealloc = function() {
        var t, e, i;
        null === (t = this.pinnedItemController) || void 0 === t || t.dealloc(),
        null === (e = this.viewModel) || void 0 === e || e.resetCollection([]),
        null === (i = this.viewModel) || void 0 === i || i.stopAuctionUpdates(),
        this.pinnedItemController = null,
        this.pinnedItem = null,
        this.viewModel = null,
        r.prototype.dealloc.call(this)
    }
    ,
    UTPlayerBioViewController.prototype.viewDidAppear = function() {
        var t, e;
        r.prototype.viewDidAppear.call(this);
        var i = this.getView();
        this.pinnedItem && this.pinnedItem.isPlayer() && this.pinnedItem.getMetaData() ? (i.setupNavigation(this.eNavSelected.bind(this), this.pinnedItem),
        this.pinnedItemController && (i.appendPinnedItemView(this.pinnedItemController.getView()),
        i.render(PlayerBioDisplayGroup.INFO, this.pinnedItem))) : (DebugUtils.Assert(!1, "UTPlayerBioViewController::viewDidAppear.Requires a player item withproper meta data to be initialized with."),
        services.Notification.queue([services.Localization.localize("playerbio.unavailable"), UINotificationType.NEGATIVE])),
        isPhone() && (null === (t = this.viewModel) || void 0 === t || t.startAuctionUpdates()),
        i.layoutSubviews(),
        i.calculateHeights(),
        null === (e = this.getNavigationController()) || void 0 === e || e.setNavigationVisibility(!0)
    }
    ,
    UTPlayerBioViewController.prototype.viewDidDisappear = function() {
        var t;
        r.prototype.viewDidDisappear.call(this),
        null === (t = this.viewModel) || void 0 === t || t.stopAuctionUpdates()
    }
    ,
    UTPlayerBioViewController.prototype._getViewInstanceFromData = function() {
        return new UTPlayerBioView
    }
    ,
    UTPlayerBioViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.playerBio")
    }
    ,
    UTPlayerBioViewController.prototype.eNavSelected = function(t, e, i) {
        this.pinnedItem && this.getView().render(i.id, this.pinnedItem)
    }
    ,
    UTPlayerBioViewController
}(UTViewController)
  , TNSPropertiesDTO = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function TNSPropertiesDTO() {
        var t = e.call(this) || this;
        return t.nav = !1,
        t.controls = !0,
        t.loop = !1,
        t.textDirection = services.Localization.locale.isRTL() ? LanguageDirectionEnum.RTL : LanguageDirectionEnum.LTR,
        t.touch = !0,
        t.mouseDrag = !0,
        t.startIndex = 0,
        t.speed = 300,
        t.autoplay = !1,
        t.autoplaySpeed = 5e3,
        t.prevButton = !1,
        t.nextButton = !1,
        t.controlsText = ["", ""],
        t.autoplayText = ["", ""],
        t.items = 1,
        t.navPosition = "bottom",
        t.container = ".slider",
        t.preventActionWhenRunning = !1,
        t
    }
    return __extends(TNSPropertiesDTO, e),
    TNSPropertiesDTO
}(EAObject))
  , TNSContainerView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function TNSContainerView() {
        var t = e.call(this) || this;
        return t.afterChangeCb = null,
        t.eventHandler = t.handleSliderEvent.bind(t),
        t.properties = null,
        t.slider = null,
        t
    }
    return __extends(TNSContainerView, e),
    TNSContainerView.prototype.dealloc = function() {
        this.afterChangeCb = null,
        this.destroySlider(),
        e.prototype.dealloc.call(this)
    }
    ,
    TNSContainerView.prototype.destroySlider = function(t) {
        this.isOn() && (this.slider && (this.slider.destroy(),
        this.slider = null),
        t && (this.__root = t.getElementsByClassName("slider")[0]))
    }
    ,
    TNSContainerView.prototype.setup = function(t) {
        DebugUtils.Assert(!JSUtils.isValid(this.slider), "Trying to setup a TNSContainer when it has already been setup."),
        this.properties = t,
        this.slider = tns(this.properties),
        this.slider.events.on("indexChanged", this.eventHandler)
    }
    ,
    TNSContainerView.prototype.teardown = function(t) {
        this.isOn() && this.destroySlider(t),
        this.emptyCarousel()
    }
    ,
    TNSContainerView.prototype.emptyCarousel = function() {
        DOMKit.empty(this.getRootElement())
    }
    ,
    TNSContainerView.prototype.isOn = function() {
        return !!this.slider && !!this.slider.isOn
    }
    ,
    TNSContainerView.prototype.getCurrentSlide = function() {
        return this.slider && this.slider.isOn ? this.slider.getInfo().displayIndex - 1 : -1
    }
    ,
    TNSContainerView.prototype.getNumOfSlides = function() {
        return this.slider && this.slider.isOn ? this.slider.getInfo().slideCountNew : 0
    }
    ,
    TNSContainerView.prototype.afterChange = function(t) {
        this.afterChangeCb = t
    }
    ,
    TNSContainerView.prototype.goTo = function(t) {
        this.slider && this.slider.isOn && this.getCurrentSlide() !== t && this.slider.goTo(t)
    }
    ,
    TNSContainerView.prototype.appendElem = function(t, e) {
        var i = document.createElement("div");
        !JSUtils.isEmpty(e) && e && DOMKit.addClass(i, e),
        JSUtils.valToArray(t).forEach(function(t) {
            return i.appendChild(t)
        }),
        this.getRootElement().appendChild(i)
    }
    ,
    TNSContainerView.prototype.dynamicSlideChange = function(t, e) {
        var i = this.getRootElement().children[t];
        if (i) {
            var r = i.childNodes[0];
            if (r)
                return void i.replaceChild(e, r);
            DebugUtils.Assert(!1, "Can't find the slide that belongs to the provided index. Nothing being replaced.")
        }
    }
    ,
    TNSContainerView.prototype.handleSliderEvent = function(t, e) {
        "indexChanged" === e && this.afterChangeCb && this.afterChangeCb(t.displayIndex - 1)
    }
    ,
    TNSContainerView
}(UTView));
TNSContainerView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("slider"),
        this.__root = t,
        this._generated = !0
    }
}
,
TNSContainerView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
TNSContainerView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var _a, EANumberDrawBox = function(i) {
    function EANumberDrawBox(t) {
        var e = i.call(this) || this;
        return e.currentCollection = [],
        e.lastDrawnIndex = -1,
        e.originalCollection = Array.isArray(t) ? t : e.createCollection(t),
        e
    }
    return __extends(EANumberDrawBox, i),
    EANumberDrawBox.prototype.reset = function() {
        var r = this;
        1 < this.originalCollection.length ? this.currentCollection = this.originalCollection.reduce(function(t, e, i) {
            return r.lastDrawnIndex !== i && t.push(e),
            t
        }, []) : this.currentCollection = this.originalCollection.slice()
    }
    ,
    EANumberDrawBox.prototype.createCollection = function(t) {
        for (var e = [], i = 0; i < t; ++i)
            e.push(i);
        return e
    }
    ,
    EANumberDrawBox.prototype.draw = function() {
        var t = 0;
        return 0 < this.originalCollection.length && (0 === this.currentCollection.length && this.reset(),
        t = this.currentCollection.splice(Math.floor(Math.random() * this.currentCollection.length), 1)[0],
        0 <= this.lastDrawnIndex ? (this.currentCollection.push(this.originalCollection[this.lastDrawnIndex]),
        this.lastDrawnIndex = -1) : 0 === this.currentCollection.length && (this.lastDrawnIndex = this.originalCollection.indexOf(t))),
        t
    }
    ,
    EANumberDrawBox
}(EAObject), PackUtils = function() {
    function PackUtils() {}
    return PackUtils.hasForeground = function(t) {
        return JSUtils.isValid(PackUtils.foregroundAssetIdRandomizer[t])
    }
    ,
    PackUtils.getForegroundId = function(t) {
        if (t === PurchasePackTier.LOAN)
            return 0;
        var e = PackUtils.foregroundAssetIdRandomizer[t];
        return e ? e.draw() : -1
    }
    ,
    PackUtils.foregroundAssetIdRandomizer = ((_a = {})[PurchasePackTier.BRONZE] = new EANumberDrawBox(4),
    _a[PurchasePackTier.SILVER] = new EANumberDrawBox(4),
    _a[PurchasePackTier.GOLD] = new EANumberDrawBox(4),
    _a[PurchasePackTier.SPECIAL] = new EANumberDrawBox(1),
    _a[PurchasePackTier.STORY] = new EANumberDrawBox(1),
    _a),
    PackUtils
}(), PIXI = function(rt) {
    "use strict";
    var e = setTimeout;
    function isArray(t) {
        return Boolean(t && void 0 !== t.length)
    }
    function noop() {}
    function Promise$1(t) {
        if (!(this instanceof Promise$1))
            throw new TypeError("Promises must be constructed via new");
        if ("function" != typeof t)
            throw new TypeError("not a function");
        this._state = 0,
        this._handled = !1,
        this._value = void 0,
        this._deferreds = [],
        doResolve(t, this)
    }
    function handle(i, r) {
        for (; 3 === i._state; )
            i = i._value;
        0 !== i._state ? (i._handled = !0,
        Promise$1._immediateFn(function() {
            var t = 1 === i._state ? r.onFulfilled : r.onRejected;
            if (null !== t) {
                var e;
                try {
                    e = t(i._value)
                } catch (t) {
                    return void reject(r.promise, t)
                }
                resolve$1(r.promise, e)
            } else
                (1 === i._state ? resolve$1 : reject)(r.promise, i._value)
        })) : i._deferreds.push(r)
    }
    function resolve$1(e, t) {
        try {
            if (t === e)
                throw new TypeError("A promise cannot be resolved with itself.");
            if (t && ("object" == typeof t || "function" == typeof t)) {
                var i = t.then;
                if (t instanceof Promise$1)
                    return e._state = 3,
                    e._value = t,
                    void finale(e);
                if ("function" == typeof i)
                    return void doResolve(function bind(t, e) {
                        return function() {
                            t.apply(e, arguments)
                        }
                    }(i, t), e)
            }
            e._state = 1,
            e._value = t,
            finale(e)
        } catch (t) {
            reject(e, t)
        }
    }
    function reject(t, e) {
        t._state = 2,
        t._value = e,
        finale(t)
    }
    function finale(t) {
        2 === t._state && 0 === t._deferreds.length && Promise$1._immediateFn(function() {
            t._handled || Promise$1._unhandledRejectionFn(t._value)
        });
        for (var e = 0, i = t._deferreds.length; e < i; e++)
            handle(t, t._deferreds[e]);
        t._deferreds = null
    }
    function Handler(t, e, i) {
        this.onFulfilled = "function" == typeof t ? t : null,
        this.onRejected = "function" == typeof e ? e : null,
        this.promise = i
    }
    function doResolve(t, e) {
        var i = !1;
        try {
            t(function(t) {
                i || (i = !0,
                resolve$1(e, t))
            }, function(t) {
                i || (i = !0,
                reject(e, t))
            })
        } catch (t) {
            if (i)
                return;
            i = !0,
            reject(e, t)
        }
    }
    Promise$1.prototype.catch = function(t) {
        return this.then(null, t)
    }
    ,
    Promise$1.prototype.then = function(t, e) {
        var i = new this.constructor(noop);
        return handle(this, new Handler(t,e,i)),
        i
    }
    ,
    Promise$1.prototype.finally = function finallyConstructor(e) {
        var i = this.constructor;
        return this.then(function(t) {
            return i.resolve(e()).then(function() {
                return t
            })
        }, function(t) {
            return i.resolve(e()).then(function() {
                return i.reject(t)
            })
        })
    }
    ,
    Promise$1.all = function(e) {
        return new Promise$1(function(r, n) {
            if (!isArray(e))
                return n(new TypeError("Promise.all accepts an array"));
            var o = Array.prototype.slice.call(e);
            if (0 === o.length)
                return r([]);
            var s = o.length;
            function res(e, t) {
                try {
                    if (t && ("object" == typeof t || "function" == typeof t)) {
                        var i = t.then;
                        if ("function" == typeof i)
                            return void i.call(t, function(t) {
                                res(e, t)
                            }, n)
                    }
                    o[e] = t,
                    0 == --s && r(o)
                } catch (t) {
                    n(t)
                }
            }
            for (var t = 0; t < o.length; t++)
                res(t, o[t])
        }
        )
    }
    ,
    Promise$1.allSettled = function allSettled(i) {
        return new this(function(r, t) {
            if (!i || void 0 === i.length)
                return t(new TypeError(typeof i + " " + i + " is not iterable(cannot read property Symbol(Symbol.iterator))"));
            var n = Array.prototype.slice.call(i);
            if (0 === n.length)
                return r([]);
            var o = n.length;
            function res(e, t) {
                if (t && ("object" == typeof t || "function" == typeof t)) {
                    var i = t.then;
                    if ("function" == typeof i)
                        return void i.call(t, function(t) {
                            res(e, t)
                        }, function(t) {
                            n[e] = {
                                status: "rejected",
                                reason: t
                            },
                            0 == --o && r(n)
                        })
                }
                n[e] = {
                    status: "fulfilled",
                    value: t
                },
                0 == --o && r(n)
            }
            for (var e = 0; e < n.length; e++)
                res(e, n[e])
        }
        )
    }
    ,
    Promise$1.resolve = function(e) {
        return e && "object" == typeof e && e.constructor === Promise$1 ? e : new Promise$1(function(t) {
            t(e)
        }
        )
    }
    ,
    Promise$1.reject = function(i) {
        return new Promise$1(function(t, e) {
            e(i)
        }
        )
    }
    ,
    Promise$1.race = function(n) {
        return new Promise$1(function(t, e) {
            if (!isArray(n))
                return e(new TypeError("Promise.race accepts an array"));
            for (var i = 0, r = n.length; i < r; i++)
                Promise$1.resolve(n[i]).then(t, e)
        }
        )
    }
    ,
    Promise$1._immediateFn = "function" == typeof setImmediate && function(t) {
        setImmediate(t)
    }
    || function(t) {
        e(t, 0)
    }
    ,
    Promise$1._unhandledRejectionFn = function _unhandledRejectionFn(t) {
        "undefined" != typeof console && console && console.warn("Possible Unhandled Promise Rejection:", t)
    }
    ;
    var c = Object.getOwnPropertySymbols
      , u = Object.prototype.hasOwnProperty
      , p = Object.prototype.propertyIsEnumerable;
    var t = function shouldUseNative() {
        try {
            if (!Object.assign)
                return !1;
            var t = new String("abc");
            if (t[5] = "de",
            "5" === Object.getOwnPropertyNames(t)[0])
                return !1;
            for (var e = {}, i = 0; i < 10; i++)
                e["_" + String.fromCharCode(i)] = i;
            if ("0123456789" !== Object.getOwnPropertyNames(e).map(function(t) {
                return e[t]
            }).join(""))
                return !1;
            var r = {};
            return "abcdefghijklmnopqrst".split("").forEach(function(t) {
                r[t] = t
            }),
            "abcdefghijklmnopqrst" === Object.keys(Object.assign({}, r)).join("")
        } catch (t) {
            return !1
        }
    }() ? Object.assign : function(t, e) {
        for (var i, r, n = arguments, o = function toObject(t) {
            if (null == t)
                throw new TypeError("Object.assign cannot be called with null or undefined");
            return Object(t)
        }(t), s = 1; s < arguments.length; s++) {
            for (var a in i = Object(n[s]))
                u.call(i, a) && (o[a] = i[a]);
            if (c) {
                r = c(i);
                for (var l = 0; l < r.length; l++)
                    p.call(i, r[l]) && (o[r[l]] = i[r[l]])
            }
        }
        return o
    }
    ;
    "undefined" == typeof globalThis && ("undefined" != typeof self ? self.globalThis = self : "undefined" != typeof global && (global.globalThis = global)),
    globalThis.Promise || (globalThis.Promise = Promise$1),
    Object.assign || (Object.assign = t);
    if (Date.now && Date.prototype.getTime || (Date.now = function now() {
        return (new Date).getTime()
    }
    ),
    !globalThis.performance || !globalThis.performance.now) {
        var i = Date.now();
        globalThis.performance || (globalThis.performance = {}),
        globalThis.performance.now = function() {
            return Date.now() - i
        }
    }
    for (var r = Date.now(), n = ["ms", "moz", "webkit", "o"], o = 0; o < n.length && !globalThis.requestAnimationFrame; ++o) {
        var s = n[o];
        globalThis.requestAnimationFrame = globalThis[s + "RequestAnimationFrame"],
        globalThis.cancelAnimationFrame = globalThis[s + "CancelAnimationFrame"] || globalThis[s + "CancelRequestAnimationFrame"]
    }
    globalThis.requestAnimationFrame || (globalThis.requestAnimationFrame = function(t) {
        if ("function" != typeof t)
            throw new TypeError(t + "is not a function");
        var e = Date.now()
          , i = 16 + r - e;
        return i < 0 && (i = 0),
        r = e,
        globalThis.self.setTimeout(function() {
            r = Date.now(),
            t(performance.now())
        }, i)
    }
    ),
    globalThis.cancelAnimationFrame || (globalThis.cancelAnimationFrame = function(t) {
        return clearTimeout(t)
    }
    ),
    Math.sign || (Math.sign = function mathSign(t) {
        return 0 === (t = Number(t)) || isNaN(t) ? t : 0 < t ? 1 : -1
    }
    ),
    Number.isInteger || (Number.isInteger = function numberIsInteger(t) {
        return "number" == typeof t && isFinite(t) && Math.floor(t) === t
    }
    ),
    globalThis.ArrayBuffer || (globalThis.ArrayBuffer = Array),
    globalThis.Float32Array || (globalThis.Float32Array = Array),
    globalThis.Uint32Array || (globalThis.Uint32Array = Array),
    globalThis.Uint16Array || (globalThis.Uint16Array = Array),
    globalThis.Uint8Array || (globalThis.Uint8Array = Array),
    globalThis.Int32Array || (globalThis.Int32Array = Array);
    function A7b(t) {
        return void 0 !== t && "MacIntel" === t.platform && "number" == typeof t.maxTouchPoints && 1 < t.maxTouchPoints && "undefined" == typeof MSStream
    }
    var a = /iPhone/i
      , l = /iPod/i
      , h = /iPad/i
      , d = /\biOS-universal(?:.+)Mac\b/i
      , _ = /\bAndroid(?:.+)Mobile\b/i
      , y = /Android/i
      , f = /(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i
      , m = /Silk/i
      , T = /Windows Phone/i
      , g = /\bWindows(?:.+)ARM\b/i
      , v = /BlackBerry/i
      , E = /BB10/i
      , S = /Opera Mini/i
      , b = /\b(CriOS|Chrome)(?:.+)Mobile/i
      , I = /Mobile(?:.+)Firefox\b/i;
    var C, U, A, w, O, R, P, D, L, N, x, M, V, B, F, G, k, j, H, q, Y, z, K, X, W, J, Q, Z, $, tt, et, it, nt, ot, st, at, lt, ct, ut = function isMobile$1(t) {
        var e = {
            userAgent: "",
            platform: "",
            maxTouchPoints: 0
        };
        t || "undefined" == typeof navigator ? "string" == typeof t ? e.userAgent = t : t && t.userAgent && (e = {
            userAgent: t.userAgent,
            platform: t.platform,
            maxTouchPoints: t.maxTouchPoints || 0
        }) : e = {
            userAgent: navigator.userAgent,
            platform: navigator.platform,
            maxTouchPoints: navigator.maxTouchPoints || 0
        };
        var i = e.userAgent
          , r = i.split("[FBAN");
        void 0 !== r[1] && (i = r[0]),
        void 0 !== (r = i.split("Twitter"))[1] && (i = r[0]);
        var n = function createMatch(e) {
            return function(t) {
                return t.test(e)
            }
        }(i)
          , o = {
            apple: {
                phone: n(a) && !n(T),
                ipod: n(l),
                tablet: !n(a) && (n(h) || A7b(e)) && !n(T),
                universal: n(d),
                device: (n(a) || n(l) || n(h) || n(d) || A7b(e)) && !n(T)
            },
            amazon: {
                phone: n(f),
                tablet: !n(f) && n(m),
                device: n(f) || n(m)
            },
            android: {
                phone: !n(T) && n(f) || !n(T) && n(_),
                tablet: !n(T) && !n(f) && !n(_) && (n(m) || n(y)),
                device: !n(T) && (n(f) || n(m) || n(_) || n(y)) || n(/\bokhttp\b/i)
            },
            windows: {
                phone: n(T),
                tablet: n(g),
                device: n(T) || n(g)
            },
            other: {
                blackberry: n(v),
                blackberry10: n(E),
                opera: n(S),
                firefox: n(I),
                chrome: n(b),
                device: n(v) || n(E) || n(S) || n(I) || n(b)
            },
            any: !1,
            phone: !1,
            tablet: !1
        };
        return o.any = o.apple.device || o.android.device || o.windows.device || o.other.device,
        o.phone = o.apple.phone || o.android.phone || o.windows.phone,
        o.tablet = o.apple.tablet || o.android.tablet || o.windows.tablet,
        o
    }(globalThis.navigator);
    (U = C = C || {})[U.WEBGL_LEGACY = 0] = "WEBGL_LEGACY",
    U[U.WEBGL = 1] = "WEBGL",
    U[U.WEBGL2 = 2] = "WEBGL2",
    (w = A = A || {})[w.UNKNOWN = 0] = "UNKNOWN",
    w[w.WEBGL = 1] = "WEBGL",
    w[w.CANVAS = 2] = "CANVAS",
    (R = O = O || {})[R.COLOR = 16384] = "COLOR",
    R[R.DEPTH = 256] = "DEPTH",
    R[R.STENCIL = 1024] = "STENCIL",
    (D = P = P || {})[D.NORMAL = 0] = "NORMAL",
    D[D.ADD = 1] = "ADD",
    D[D.MULTIPLY = 2] = "MULTIPLY",
    D[D.SCREEN = 3] = "SCREEN",
    D[D.OVERLAY = 4] = "OVERLAY",
    D[D.DARKEN = 5] = "DARKEN",
    D[D.LIGHTEN = 6] = "LIGHTEN",
    D[D.COLOR_DODGE = 7] = "COLOR_DODGE",
    D[D.COLOR_BURN = 8] = "COLOR_BURN",
    D[D.HARD_LIGHT = 9] = "HARD_LIGHT",
    D[D.SOFT_LIGHT = 10] = "SOFT_LIGHT",
    D[D.DIFFERENCE = 11] = "DIFFERENCE",
    D[D.EXCLUSION = 12] = "EXCLUSION",
    D[D.HUE = 13] = "HUE",
    D[D.SATURATION = 14] = "SATURATION",
    D[D.COLOR = 15] = "COLOR",
    D[D.LUMINOSITY = 16] = "LUMINOSITY",
    D[D.NORMAL_NPM = 17] = "NORMAL_NPM",
    D[D.ADD_NPM = 18] = "ADD_NPM",
    D[D.SCREEN_NPM = 19] = "SCREEN_NPM",
    D[D.NONE = 20] = "NONE",
    D[D.SRC_OVER = 0] = "SRC_OVER",
    D[D.SRC_IN = 21] = "SRC_IN",
    D[D.SRC_OUT = 22] = "SRC_OUT",
    D[D.SRC_ATOP = 23] = "SRC_ATOP",
    D[D.DST_OVER = 24] = "DST_OVER",
    D[D.DST_IN = 25] = "DST_IN",
    D[D.DST_OUT = 26] = "DST_OUT",
    D[D.DST_ATOP = 27] = "DST_ATOP",
    D[D.ERASE = 26] = "ERASE",
    D[D.SUBTRACT = 28] = "SUBTRACT",
    D[D.XOR = 29] = "XOR",
    (N = L = L || {})[N.POINTS = 0] = "POINTS",
    N[N.LINES = 1] = "LINES",
    N[N.LINE_LOOP = 2] = "LINE_LOOP",
    N[N.LINE_STRIP = 3] = "LINE_STRIP",
    N[N.TRIANGLES = 4] = "TRIANGLES",
    N[N.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP",
    N[N.TRIANGLE_FAN = 6] = "TRIANGLE_FAN",
    (M = x = x || {})[M.RGBA = 6408] = "RGBA",
    M[M.RGB = 6407] = "RGB",
    M[M.RG = 33319] = "RG",
    M[M.RED = 6403] = "RED",
    M[M.RGBA_INTEGER = 36249] = "RGBA_INTEGER",
    M[M.RGB_INTEGER = 36248] = "RGB_INTEGER",
    M[M.RG_INTEGER = 33320] = "RG_INTEGER",
    M[M.RED_INTEGER = 36244] = "RED_INTEGER",
    M[M.ALPHA = 6406] = "ALPHA",
    M[M.LUMINANCE = 6409] = "LUMINANCE",
    M[M.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA",
    M[M.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT",
    M[M.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL",
    (B = V = V || {})[B.TEXTURE_2D = 3553] = "TEXTURE_2D",
    B[B.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP",
    B[B.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY",
    B[B.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X",
    B[B.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X",
    B[B.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y",
    B[B.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y",
    B[B.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z",
    B[B.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z",
    (G = F = F || {})[G.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE",
    G[G.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT",
    G[G.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5",
    G[G.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4",
    G[G.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1",
    G[G.UNSIGNED_INT = 5125] = "UNSIGNED_INT",
    G[G.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV",
    G[G.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV",
    G[G.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8",
    G[G.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV",
    G[G.BYTE = 5120] = "BYTE",
    G[G.SHORT = 5122] = "SHORT",
    G[G.INT = 5124] = "INT",
    G[G.FLOAT = 5126] = "FLOAT",
    G[G.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV",
    G[G.HALF_FLOAT = 36193] = "HALF_FLOAT",
    (j = k = k || {})[j.FLOAT = 0] = "FLOAT",
    j[j.INT = 1] = "INT",
    j[j.UINT = 2] = "UINT",
    (q = H = H || {})[q.NEAREST = 0] = "NEAREST",
    q[q.LINEAR = 1] = "LINEAR",
    (z = Y = Y || {})[z.CLAMP = 33071] = "CLAMP",
    z[z.REPEAT = 10497] = "REPEAT",
    z[z.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT",
    (X = K = K || {})[X.OFF = 0] = "OFF",
    X[X.POW2 = 1] = "POW2",
    X[X.ON = 2] = "ON",
    X[X.ON_MANUAL = 3] = "ON_MANUAL",
    (J = W = W || {})[J.NPM = 0] = "NPM",
    J[J.UNPACK = 1] = "UNPACK",
    J[J.PMA = 2] = "PMA",
    J[J.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA",
    J[J.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD",
    J[J.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA",
    J[J.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA",
    (Z = Q = Q || {})[Z.NO = 0] = "NO",
    Z[Z.YES = 1] = "YES",
    Z[Z.AUTO = 2] = "AUTO",
    Z[Z.BLEND = 0] = "BLEND",
    Z[Z.CLEAR = 1] = "CLEAR",
    Z[Z.BLIT = 2] = "BLIT",
    (tt = $ = $ || {})[tt.AUTO = 0] = "AUTO",
    tt[tt.MANUAL = 1] = "MANUAL",
    (it = et = et || {}).LOW = "lowp",
    it.MEDIUM = "mediump",
    it.HIGH = "highp",
    (ot = nt = nt || {})[ot.NONE = 0] = "NONE",
    ot[ot.SCISSOR = 1] = "SCISSOR",
    ot[ot.STENCIL = 2] = "STENCIL",
    ot[ot.SPRITE = 3] = "SPRITE",
    (at = st = st || {})[at.NONE = 0] = "NONE",
    at[at.LOW = 2] = "LOW",
    at[at.MEDIUM = 4] = "MEDIUM",
    at[at.HIGH = 8] = "HIGH",
    (ct = lt = lt || {})[ct.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER",
    ct[ct.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER",
    ct[ct.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
    var pt = {
        MIPMAP_TEXTURES: K.POW2,
        ANISOTROPIC_LEVEL: 0,
        RESOLUTION: 1,
        FILTER_RESOLUTION: 1,
        FILTER_MULTISAMPLE: st.NONE,
        SPRITE_MAX_TEXTURES: function maxRecommendedTextures(t) {
            var e = !0;
            if (ut.tablet || ut.phone) {
                var i;
                if (ut.apple.device)
                    if (i = navigator.userAgent.match(/OS (\d+)_(\d+)?/))
                        parseInt(i[1], 10) < 11 && (e = !1);
                if (ut.android.device)
                    if (i = navigator.userAgent.match(/Android\s([0-9.]*)/))
                        parseInt(i[1], 10) < 7 && (e = !1)
            }
            return e ? t : 4
        }(32),
        SPRITE_BATCH_SIZE: 4096,
        RENDER_OPTIONS: {
            view: null,
            antialias: !1,
            autoDensity: !1,
            backgroundColor: 0,
            backgroundAlpha: 1,
            useContextAlpha: !0,
            clearBeforeRender: !0,
            preserveDrawingBuffer: !1,
            width: 800,
            height: 600,
            legacy: !1
        },
        GC_MODE: $.AUTO,
        GC_MAX_IDLE: 3600,
        GC_MAX_CHECK_COUNT: 600,
        WRAP_MODE: Y.CLAMP,
        SCALE_MODE: H.LINEAR,
        PRECISION_VERTEX: et.HIGH,
        PRECISION_FRAGMENT: ut.apple.device ? et.HIGH : et.MEDIUM,
        CAN_UPLOAD_SAME_BUFFER: function canUploadSameBuffer() {
            return !ut.apple.device
        }(),
        CREATE_IMAGE_BITMAP: !1,
        ROUND_PIXELS: !1
    }
      , ht = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
    function createCommonjsModule(t, e, i) {
        return t(i = {
            path: e,
            exports: {},
            require: function(t, e) {
                return function commonjsRequire() {
                    throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")
                }(null == e && i.path)
            }
        }, i.exports),
        i.exports
    }
    var dt = createCommonjsModule(function(t) {
        var r = Object.prototype.hasOwnProperty
          , _ = "~";
        function Events() {}
        function EE(t, e, i) {
            this.fn = t,
            this.context = e,
            this.once = i || !1
        }
        function addListener(t, e, i, r, n) {
            if ("function" != typeof i)
                throw new TypeError("The listener must be a function");
            var o = new EE(i,r || t,n)
              , s = _ ? _ + e : e;
            return t._events[s] ? t._events[s].fn ? t._events[s] = [t._events[s], o] : t._events[s].push(o) : (t._events[s] = o,
            t._eventsCount++),
            t
        }
        function clearEvent(t, e) {
            0 == --t._eventsCount ? t._events = new Events : delete t._events[e]
        }
        function EventEmitter() {
            this._events = new Events,
            this._eventsCount = 0
        }
        Object.create && (Events.prototype = Object.create(null),
        (new Events).__proto__ || (_ = !1)),
        EventEmitter.prototype.eventNames = function eventNames() {
            var t, e, i = [];
            if (0 === this._eventsCount)
                return i;
            for (e in t = this._events)
                r.call(t, e) && i.push(_ ? e.slice(1) : e);
            return Object.getOwnPropertySymbols ? i.concat(Object.getOwnPropertySymbols(t)) : i
        }
        ,
        EventEmitter.prototype.listeners = function listeners(t) {
            var e = _ ? _ + t : t
              , i = this._events[e];
            if (!i)
                return [];
            if (i.fn)
                return [i.fn];
            for (var r = 0, n = i.length, o = new Array(n); r < n; r++)
                o[r] = i[r].fn;
            return o
        }
        ,
        EventEmitter.prototype.listenerCount = function listenerCount(t) {
            var e = _ ? _ + t : t
              , i = this._events[e];
            return i ? i.fn ? 1 : i.length : 0
        }
        ,
        EventEmitter.prototype.emit = function emit(t, e, i, r, n, o) {
            var s = arguments
              , a = _ ? _ + t : t;
            if (!this._events[a])
                return !1;
            var l, c, u = this._events[a], p = arguments.length;
            if (u.fn) {
                switch (u.once && this.removeListener(t, u.fn, void 0, !0),
                p) {
                case 1:
                    return u.fn.call(u.context),
                    !0;
                case 2:
                    return u.fn.call(u.context, e),
                    !0;
                case 3:
                    return u.fn.call(u.context, e, i),
                    !0;
                case 4:
                    return u.fn.call(u.context, e, i, r),
                    !0;
                case 5:
                    return u.fn.call(u.context, e, i, r, n),
                    !0;
                case 6:
                    return u.fn.call(u.context, e, i, r, n, o),
                    !0
                }
                for (c = 1,
                l = new Array(p - 1); c < p; c++)
                    l[c - 1] = s[c];
                u.fn.apply(u.context, l)
            } else {
                var h, d = u.length;
                for (c = 0; c < d; c++)
                    switch (u[c].once && this.removeListener(t, u[c].fn, void 0, !0),
                    p) {
                    case 1:
                        u[c].fn.call(u[c].context);
                        break;
                    case 2:
                        u[c].fn.call(u[c].context, e);
                        break;
                    case 3:
                        u[c].fn.call(u[c].context, e, i);
                        break;
                    case 4:
                        u[c].fn.call(u[c].context, e, i, r);
                        break;
                    default:
                        if (!l)
                            for (h = 1,
                            l = new Array(p - 1); h < p; h++)
                                l[h - 1] = s[h];
                        u[c].fn.apply(u[c].context, l)
                    }
            }
            return !0
        }
        ,
        EventEmitter.prototype.on = function on(t, e, i) {
            return addListener(this, t, e, i, !1)
        }
        ,
        EventEmitter.prototype.once = function once(t, e, i) {
            return addListener(this, t, e, i, !0)
        }
        ,
        EventEmitter.prototype.removeListener = function removeListener(t, e, i, r) {
            var n = _ ? _ + t : t;
            if (!this._events[n])
                return this;
            if (!e)
                return clearEvent(this, n),
                this;
            var o = this._events[n];
            if (o.fn)
                o.fn !== e || r && !o.once || i && o.context !== i || clearEvent(this, n);
            else {
                for (var s = 0, a = [], l = o.length; s < l; s++)
                    (o[s].fn !== e || r && !o[s].once || i && o[s].context !== i) && a.push(o[s]);
                a.length ? this._events[n] = 1 === a.length ? a[0] : a : clearEvent(this, n)
            }
            return this
        }
        ,
        EventEmitter.prototype.removeAllListeners = function removeAllListeners(t) {
            var e;
            return t ? (e = _ ? _ + t : t,
            this._events[e] && clearEvent(this, e)) : (this._events = new Events,
            this._eventsCount = 0),
            this
        }
        ,
        EventEmitter.prototype.off = EventEmitter.prototype.removeListener,
        EventEmitter.prototype.addListener = EventEmitter.prototype.on,
        EventEmitter.prefixed = _,
        EventEmitter.EventEmitter = EventEmitter,
        t.exports = EventEmitter
    })
      , _t = earcut
      , yt = earcut;
    function earcut(t, e, i) {
        i = i || 2;
        var r, n, o, s, a, l, c, u = e && e.length, p = u ? e[0] * i : t.length, h = linkedList(t, 0, p, i, !0), d = [];
        if (!h || h.next === h.prev)
            return d;
        if (u && (h = function eliminateHoles(t, e, i, r) {
            var n, o, s, a, l, c = [];
            for (n = 0,
            o = e.length; n < o; n++)
                s = e[n] * r,
                a = n < o - 1 ? e[n + 1] * r : t.length,
                (l = linkedList(t, s, a, r, !1)) === l.next && (l.steiner = !0),
                c.push(getLeftmost(l));
            for (c.sort(compareX),
            n = 0; n < c.length; n++)
                eliminateHole(c[n], i),
                i = filterPoints(i, i.next);
            return i
        }(t, e, h, i)),
        t.length > 80 * i) {
            r = o = t[0],
            n = s = t[1];
            for (var _ = i; _ < p; _ += i)
                (a = t[_]) < r && (r = a),
                (l = t[_ + 1]) < n && (n = l),
                o < a && (o = a),
                s < l && (s = l);
            c = 0 !== (c = Math.max(o - r, s - n)) ? 1 / c : 0
        }
        return earcutLinked(h, d, i, r, n, c),
        d
    }
    function linkedList(t, e, i, r, n) {
        var o, s;
        if (n === 0 < signedArea(t, e, i, r))
            for (o = e; o < i; o += r)
                s = insertNode(o, t[o], t[o + 1], s);
        else
            for (o = i - r; e <= o; o -= r)
                s = insertNode(o, t[o], t[o + 1], s);
        return s && equals(s, s.next) && (removeNode(s),
        s = s.next),
        s
    }
    function filterPoints(t, e) {
        if (!t)
            return t;
        e = e || t;
        var i, r = t;
        do {
            if (i = !1,
            r.steiner || !equals(r, r.next) && 0 !== area(r.prev, r, r.next))
                r = r.next;
            else {
                if (removeNode(r),
                (r = e = r.prev) === r.next)
                    break;
                i = !0
            }
        } while (i || r !== e);
        return e
    }
    function earcutLinked(t, e, i, r, n, o, s) {
        if (t) {
            !s && o && !function indexCurve(t, e, i, r) {
                var n = t;
                for (; null === n.z && (n.z = zOrder(n.x, n.y, e, i, r)),
                n.prevZ = n.prev,
                n.nextZ = n.next,
                n = n.next,
                n !== t; )
                    ;
                n.prevZ.nextZ = null,
                n.prevZ = null,
                function sortLinked(t) {
                    var e, i, r, n, o, s, a, l, c = 1;
                    do {
                        for (i = t,
                        o = t = null,
                        s = 0; i; ) {
                            for (s++,
                            r = i,
                            e = a = 0; e < c && (a++,
                            r = r.nextZ); e++)
                                ;
                            for (l = c; 0 < a || 0 < l && r; )
                                0 !== a && (0 === l || !r || i.z <= r.z) ? (i = (n = i).nextZ,
                                a--) : (r = (n = r).nextZ,
                                l--),
                                o ? o.nextZ = n : t = n,
                                n.prevZ = o,
                                o = n;
                            i = r
                        }
                        o.nextZ = null,
                        c *= 2
                    } while (1 < s);
                    return t
                }(n)
            }(t, r, n, o);
            for (var a, l, c = t; t.prev !== t.next; )
                if (a = t.prev,
                l = t.next,
                o ? isEarHashed(t, r, n, o) : isEar(t))
                    e.push(a.i / i),
                    e.push(t.i / i),
                    e.push(l.i / i),
                    removeNode(t),
                    t = l.next,
                    c = l.next;
                else if ((t = l) === c) {
                    s ? 1 === s ? earcutLinked(t = cureLocalIntersections(filterPoints(t), e, i), e, i, r, n, o, 2) : 2 === s && splitEarcut(t, e, i, r, n, o) : earcutLinked(filterPoints(t), e, i, r, n, o, 1);
                    break
                }
        }
    }
    function isEar(t) {
        var e = t.prev
          , i = t
          , r = t.next;
        if (0 <= area(e, i, r))
            return !1;
        for (var n = t.next.next; n !== t.prev; ) {
            if (pointInTriangle(e.x, e.y, i.x, i.y, r.x, r.y, n.x, n.y) && 0 <= area(n.prev, n, n.next))
                return !1;
            n = n.next
        }
        return !0
    }
    function isEarHashed(t, e, i, r) {
        var n = t.prev
          , o = t
          , s = t.next;
        if (0 <= area(n, o, s))
            return !1;
        for (var a = n.x < o.x ? n.x < s.x ? n.x : s.x : o.x < s.x ? o.x : s.x, l = n.y < o.y ? n.y < s.y ? n.y : s.y : o.y < s.y ? o.y : s.y, c = n.x > o.x ? n.x > s.x ? n.x : s.x : o.x > s.x ? o.x : s.x, u = n.y > o.y ? n.y > s.y ? n.y : s.y : o.y > s.y ? o.y : s.y, p = zOrder(a, l, e, i, r), h = zOrder(c, u, e, i, r), d = t.prevZ, _ = t.nextZ; d && d.z >= p && _ && _.z <= h; ) {
            if (d !== t.prev && d !== t.next && pointInTriangle(n.x, n.y, o.x, o.y, s.x, s.y, d.x, d.y) && 0 <= area(d.prev, d, d.next))
                return !1;
            if (d = d.prevZ,
            _ !== t.prev && _ !== t.next && pointInTriangle(n.x, n.y, o.x, o.y, s.x, s.y, _.x, _.y) && 0 <= area(_.prev, _, _.next))
                return !1;
            _ = _.nextZ
        }
        for (; d && d.z >= p; ) {
            if (d !== t.prev && d !== t.next && pointInTriangle(n.x, n.y, o.x, o.y, s.x, s.y, d.x, d.y) && 0 <= area(d.prev, d, d.next))
                return !1;
            d = d.prevZ
        }
        for (; _ && _.z <= h; ) {
            if (_ !== t.prev && _ !== t.next && pointInTriangle(n.x, n.y, o.x, o.y, s.x, s.y, _.x, _.y) && 0 <= area(_.prev, _, _.next))
                return !1;
            _ = _.nextZ
        }
        return !0
    }
    function cureLocalIntersections(t, e, i) {
        var r = t;
        do {
            var n = r.prev
              , o = r.next.next;
            !equals(n, o) && intersects(n, r, r.next, o) && locallyInside(n, o) && locallyInside(o, n) && (e.push(n.i / i),
            e.push(r.i / i),
            e.push(o.i / i),
            removeNode(r),
            removeNode(r.next),
            r = t = o),
            r = r.next
        } while (r !== t);
        return filterPoints(r)
    }
    function splitEarcut(t, e, i, r, n, o) {
        var s, a, l = t;
        do {
            for (var c = l.next.next; c !== l.prev; ) {
                if (l.i !== c.i && (a = c,
                (s = l).next.i !== a.i && s.prev.i !== a.i && !function intersectsPolygon(t, e) {
                    var i = t;
                    do {
                        if (i.i !== t.i && i.next.i !== t.i && i.i !== e.i && i.next.i !== e.i && intersects(i, i.next, t, e))
                            return !0;
                        i = i.next
                    } while (i !== t);
                    return !1
                }(s, a) && (locallyInside(s, a) && locallyInside(a, s) && function middleInside(t, e) {
                    var i = t
                      , r = !1
                      , n = (t.x + e.x) / 2
                      , o = (t.y + e.y) / 2;
                    for (; i.y > o != i.next.y > o && i.next.y !== i.y && n < (i.next.x - i.x) * (o - i.y) / (i.next.y - i.y) + i.x && (r = !r),
                    i = i.next,
                    i !== t; )
                        ;
                    return r
                }(s, a) && (area(s.prev, s, a.prev) || area(s, a.prev, a)) || equals(s, a) && 0 < area(s.prev, s, s.next) && 0 < area(a.prev, a, a.next)))) {
                    var u = splitPolygon(l, c);
                    return l = filterPoints(l, l.next),
                    u = filterPoints(u, u.next),
                    earcutLinked(l, e, i, r, n, o),
                    void earcutLinked(u, e, i, r, n, o)
                }
                c = c.next
            }
            l = l.next
        } while (l !== t)
    }
    function compareX(t, e) {
        return t.x - e.x
    }
    function eliminateHole(t, e) {
        if (e = function findHoleBridge(t, e) {
            var i, r = e, n = t.x, o = t.y, s = -1 / 0;
            do {
                if (o <= r.y && o >= r.next.y && r.next.y !== r.y) {
                    var a = r.x + (o - r.y) * (r.next.x - r.x) / (r.next.y - r.y);
                    if (a <= n && s < a) {
                        if ((s = a) === n) {
                            if (o === r.y)
                                return r;
                            if (o === r.next.y)
                                return r.next
                        }
                        i = r.x < r.next.x ? r : r.next
                    }
                }
                r = r.next
            } while (r !== e);
            if (!i)
                return null;
            if (n === s)
                return i;
            var l, c = i, u = i.x, p = i.y, h = 1 / 0;
            r = i;
            for (; n >= r.x && r.x >= u && n !== r.x && pointInTriangle(o < p ? n : s, o, u, p, o < p ? s : n, o, r.x, r.y) && (l = Math.abs(o - r.y) / (n - r.x),
            locallyInside(r, t) && (l < h || l === h && (r.x > i.x || r.x === i.x && (_ = r,
            area((d = i).prev, d, _.prev) < 0 && area(_.next, d, d.next) < 0))) && (i = r,
            h = l)),
            r = r.next,
            r !== c; )
                ;
            var d, _;
            return i
        }(t, e)) {
            var i = splitPolygon(e, t);
            filterPoints(e, e.next),
            filterPoints(i, i.next)
        }
    }
    function zOrder(t, e, i, r, n) {
        return (t = 1431655765 & ((t = 858993459 & ((t = 252645135 & ((t = 16711935 & ((t = 32767 * (t - i) * n) | t << 8)) | t << 4)) | t << 2)) | t << 1)) | (e = 1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = 32767 * (e - r) * n) | e << 8)) | e << 4)) | e << 2)) | e << 1)) << 1
    }
    function getLeftmost(t) {
        for (var e = t, i = t; (e.x < i.x || e.x === i.x && e.y < i.y) && (i = e),
        (e = e.next) !== t; )
            ;
        return i
    }
    function pointInTriangle(t, e, i, r, n, o, s, a) {
        return 0 <= (n - s) * (e - a) - (t - s) * (o - a) && 0 <= (t - s) * (r - a) - (i - s) * (e - a) && 0 <= (i - s) * (o - a) - (n - s) * (r - a)
    }
    function area(t, e, i) {
        return (e.y - t.y) * (i.x - e.x) - (e.x - t.x) * (i.y - e.y)
    }
    function equals(t, e) {
        return t.x === e.x && t.y === e.y
    }
    function intersects(t, e, i, r) {
        var n = sign$1(area(t, e, i))
          , o = sign$1(area(t, e, r))
          , s = sign$1(area(i, r, t))
          , a = sign$1(area(i, r, e));
        return n !== o && s !== a || (!(0 !== n || !onSegment(t, i, e)) || (!(0 !== o || !onSegment(t, r, e)) || (!(0 !== s || !onSegment(i, t, r)) || !(0 !== a || !onSegment(i, e, r)))))
    }
    function onSegment(t, e, i) {
        return e.x <= Math.max(t.x, i.x) && e.x >= Math.min(t.x, i.x) && e.y <= Math.max(t.y, i.y) && e.y >= Math.min(t.y, i.y)
    }
    function sign$1(t) {
        return 0 < t ? 1 : t < 0 ? -1 : 0
    }
    function locallyInside(t, e) {
        return area(t.prev, t, t.next) < 0 ? 0 <= area(t, e, t.next) && 0 <= area(t, t.prev, e) : area(t, e, t.prev) < 0 || area(t, t.next, e) < 0
    }
    function splitPolygon(t, e) {
        var i = new Node(t.i,t.x,t.y)
          , r = new Node(e.i,e.x,e.y)
          , n = t.next
          , o = e.prev;
        return (t.next = e).prev = t,
        (i.next = n).prev = i,
        (r.next = i).prev = r,
        (o.next = r).prev = o,
        r
    }
    function insertNode(t, e, i, r) {
        var n = new Node(t,e,i);
        return r ? (n.next = r.next,
        (n.prev = r).next.prev = n,
        r.next = n) : (n.prev = n).next = n,
        n
    }
    function removeNode(t) {
        t.next.prev = t.prev,
        t.prev.next = t.next,
        t.prevZ && (t.prevZ.nextZ = t.nextZ),
        t.nextZ && (t.nextZ.prevZ = t.prevZ)
    }
    function Node(t, e, i) {
        this.i = t,
        this.x = e,
        this.y = i,
        this.prev = null,
        this.next = null,
        this.z = null,
        this.prevZ = null,
        this.nextZ = null,
        this.steiner = !1
    }
    function signedArea(t, e, i, r) {
        for (var n = 0, o = e, s = i - r; o < i; o += r)
            n += (t[s] - t[o]) * (t[o + 1] + t[s + 1]),
            s = o;
        return n
    }
    earcut.deviation = function(t, e, i, r) {
        var n = e && e.length
          , o = n ? e[0] * i : t.length
          , s = Math.abs(signedArea(t, 0, o, i));
        if (n)
            for (var a = 0, l = e.length; a < l; a++) {
                var c = e[a] * i
                  , u = a < l - 1 ? e[a + 1] * i : t.length;
                s -= Math.abs(signedArea(t, c, u, i))
            }
        var p = 0;
        for (a = 0; a < r.length; a += 3) {
            var h = r[a] * i
              , d = r[a + 1] * i
              , _ = r[a + 2] * i;
            p += Math.abs((t[h] - t[_]) * (t[1 + d] - t[1 + h]) - (t[h] - t[d]) * (t[1 + _] - t[1 + h]))
        }
        return 0 === s && 0 === p ? 0 : Math.abs((p - s) / s)
    }
    ,
    earcut.flatten = function(t) {
        for (var e = t[0][0].length, i = {
            vertices: [],
            holes: [],
            dimensions: e
        }, r = 0, n = 0; n < t.length; n++) {
            for (var o = 0; o < t[n].length; o++)
                for (var s = 0; s < e; s++)
                    i.vertices.push(t[n][o][s]);
            0 < n && (r += t[n - 1].length,
            i.holes.push(r))
        }
        return i
    }
    ,
    _t.default = yt;
    var ft = createCommonjsModule(function(d, _) {
        !function(t) {
            var e = _ && !_.nodeType && _
              , i = d && !d.nodeType && d
              , r = "object" == typeof ht && ht;
            r.global !== r && r.window !== r && r.self !== r || (t = r);
            var n, o, m = 2147483647, T = 36, g = 1, v = 26, s = 38, a = 700, E = 72, S = 128, b = "-", l = /^xn--/, c = /[^\x20-\x7E]/, u = /[\x2E\u3002\uFF0E\uFF61]/g, p = {
                overflow: "Overflow: input needs wider integers to process",
                "not-basic": "Illegal input >= 0x80 (not a basic code point)",
                "invalid-input": "Invalid input"
            }, h = T - g, I = Math.floor, C = String.fromCharCode;
            function error(t) {
                throw RangeError(p[t])
            }
            function map(t, e) {
                for (var i = t.length, r = []; i--; )
                    r[i] = e(t[i]);
                return r
            }
            function mapDomain(t, e) {
                var i = t.split("@")
                  , r = "";
                return 1 < i.length && (r = i[0] + "@",
                t = i[1]),
                r + map((t = t.replace(u, ".")).split("."), e).join(".")
            }
            function ucs2decode(t) {
                for (var e, i, r = [], n = 0, o = t.length; n < o; )
                    55296 <= (e = t.charCodeAt(n++)) && e <= 56319 && n < o ? 56320 == (64512 & (i = t.charCodeAt(n++))) ? r.push(((1023 & e) << 10) + (1023 & i) + 65536) : (r.push(e),
                    n--) : r.push(e);
                return r
            }
            function ucs2encode(t) {
                return map(t, function(t) {
                    var e = "";
                    return 65535 < t && (e += C((t -= 65536) >>> 10 & 1023 | 55296),
                    t = 56320 | 1023 & t),
                    e += C(t)
                }).join("")
            }
            function digitToBasic(t, e) {
                return t + 22 + 75 * (t < 26) - ((0 != e) << 5)
            }
            function adapt(t, e, i) {
                var r = 0;
                for (t = i ? I(t / a) : t >> 1,
                t += I(t / e); h * v >> 1 < t; r += T)
                    t = I(t / h);
                return I(r + (h + 1) * t / (t + s))
            }
            function decode(t) {
                var e, i, r, n, o, s, a, l, c, u, p, h = [], d = t.length, _ = 0, y = S, f = E;
                for ((i = t.lastIndexOf(b)) < 0 && (i = 0),
                r = 0; r < i; ++r)
                    128 <= t.charCodeAt(r) && error("not-basic"),
                    h.push(t.charCodeAt(r));
                for (n = 0 < i ? i + 1 : 0; n < d; ) {
                    for (o = _,
                    s = 1,
                    a = T; d <= n && error("invalid-input"),
                    p = t.charCodeAt(n++),
                    (T <= (l = p - 48 < 10 ? p - 22 : p - 65 < 26 ? p - 65 : p - 97 < 26 ? p - 97 : T) || l > I((m - _) / s)) && error("overflow"),
                    _ += l * s,
                    !(l < (c = a <= f ? g : f + v <= a ? v : a - f)); a += T)
                        s > I(m / (u = T - c)) && error("overflow"),
                        s *= u;
                    f = adapt(_ - o, e = h.length + 1, 0 == o),
                    I(_ / e) > m - y && error("overflow"),
                    y += I(_ / e),
                    _ %= e,
                    h.splice(_++, 0, y)
                }
                return ucs2encode(h)
            }
            function encode(t) {
                var e, i, r, n, o, s, a, l, c, u, p, h, d, _, y, f = [];
                for (h = (t = ucs2decode(t)).length,
                e = S,
                o = E,
                s = i = 0; s < h; ++s)
                    (p = t[s]) < 128 && f.push(C(p));
                for (r = n = f.length,
                n && f.push(b); r < h; ) {
                    for (a = m,
                    s = 0; s < h; ++s)
                        e <= (p = t[s]) && p < a && (a = p);
                    for (a - e > I((m - i) / (d = r + 1)) && error("overflow"),
                    i += (a - e) * d,
                    e = a,
                    s = 0; s < h; ++s)
                        if ((p = t[s]) < e && ++i > m && error("overflow"),
                        p == e) {
                            for (l = i,
                            c = T; !(l < (u = c <= o ? g : o + v <= c ? v : c - o)); c += T)
                                y = l - u,
                                _ = T - u,
                                f.push(C(digitToBasic(u + y % _, 0))),
                                l = I(y / _);
                            f.push(C(digitToBasic(l, 0))),
                            o = adapt(i, d, r == n),
                            i = 0,
                            ++r
                        }
                    ++i,
                    ++e
                }
                return f.join("")
            }
            if (n = {
                version: "1.3.2",
                ucs2: {
                    decode: ucs2decode,
                    encode: ucs2encode
                },
                decode: decode,
                encode: encode,
                toASCII: function toASCII(t) {
                    return mapDomain(t, function(t) {
                        return c.test(t) ? "xn--" + encode(t) : t
                    })
                },
                toUnicode: function toUnicode(t) {
                    return mapDomain(t, function(t) {
                        return l.test(t) ? decode(t.slice(4).toLowerCase()) : t
                    })
                }
            },
            0,
            e && i)
                if (d.exports == e)
                    i.exports = n;
                else
                    for (o in n)
                        n.hasOwnProperty(o) && (e[o] = n[o]);
            else
                t.punycode = n
        }(ht)
    })
      , mt = {
        isString: function(t) {
            return "string" == typeof t
        },
        isObject: function(t) {
            return "object" == typeof t && null !== t
        },
        isNull: function(t) {
            return null === t
        },
        isNullOrUndefined: function(t) {
            return null == t
        }
    };
    function a8b(t, e, i, r) {
        e = e || "&",
        i = i || "=";
        var n = {};
        if ("string" != typeof t || 0 === t.length)
            return n;
        var o = /\+/g;
        t = t.split(e);
        var s = 1e3;
        r && "number" == typeof r.maxKeys && (s = r.maxKeys);
        var a, l, c = t.length;
        0 < s && s < c && (c = s);
        for (var u = 0; u < c; ++u) {
            var p, h, d, _, y = t[u].replace(o, "%20"), f = y.indexOf(i);
            h = 0 <= f ? (p = y.substr(0, f),
            y.substr(f + 1)) : (p = y,
            ""),
            d = decodeURIComponent(p),
            _ = decodeURIComponent(h),
            a = n,
            l = d,
            Object.prototype.hasOwnProperty.call(a, l) ? Array.isArray(n[d]) ? n[d].push(_) : n[d] = [n[d], _] : n[d] = _
        }
        return n
    }
    function b8b(t) {
        switch (typeof t) {
        case "string":
            return t;
        case "boolean":
            return t ? "true" : "false";
        case "number":
            return isFinite(t) ? t : "";
        default:
            return ""
        }
    }
    function c8b(i, r, n, t) {
        return r = r || "&",
        n = n || "=",
        null === i && (i = void 0),
        "object" == typeof i ? Object.keys(i).map(function(t) {
            var e = encodeURIComponent(b8b(t)) + n;
            return Array.isArray(i[t]) ? i[t].map(function(t) {
                return e + encodeURIComponent(b8b(t))
            }).join(r) : e + encodeURIComponent(b8b(i[t]))
        }).join(r) : t ? encodeURIComponent(b8b(t)) + n + encodeURIComponent(b8b(i)) : ""
    }
    function f8b(t, e) {
        return urlParse(t, !1, !0).resolve(e)
    }
    function h8b(t) {
        return mt.isString(t) && (t = urlParse(t)),
        t instanceof Url ? t.format() : Url.prototype.format.call(t)
    }
    var Tt = createCommonjsModule(function(t, e) {
        e.decode = e.parse = a8b,
        e.encode = e.stringify = c8b
    })
      , gt = urlParse;
    function Url() {
        this.protocol = null,
        this.slashes = null,
        this.auth = null,
        this.host = null,
        this.port = null,
        this.hostname = null,
        this.hash = null,
        this.search = null,
        this.query = null,
        this.pathname = null,
        this.path = null,
        this.href = null
    }
    var vt = /^([a-z0-9.+-]+:)/i
      , Et = /:[0-9]*$/
      , St = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/
      , bt = ["{", "}", "|", "\\", "^", "`"].concat(["<", ">", '"', "`", " ", "\r", "\n", "\t"])
      , It = ["'"].concat(bt)
      , Ct = ["%", "/", "?", ";", "#"].concat(It)
      , Ut = ["/", "?", "#"]
      , At = /^[+a-z0-9A-Z_-]{0,63}$/
      , wt = /^([+a-z0-9A-Z_-]{0,63})(.*)$/
      , Ot = {
        javascript: !0,
        "javascript:": !0
    }
      , Rt = {
        javascript: !0,
        "javascript:": !0
    }
      , Pt = {
        http: !0,
        https: !0,
        ftp: !0,
        gopher: !0,
        file: !0,
        "http:": !0,
        "https:": !0,
        "ftp:": !0,
        "gopher:": !0,
        "file:": !0
    };
    function urlParse(t, e, i) {
        if (t && mt.isObject(t) && t instanceof Url)
            return t;
        var r = new Url;
        return r.parse(t, e, i),
        r
    }
    Url.prototype.parse = function(t, e, i) {
        if (!mt.isString(t))
            throw new TypeError("Parameter 'url' must be a string, not " + typeof t);
        var r = t.indexOf("?")
          , n = -1 !== r && r < t.indexOf("#") ? "?" : "#"
          , o = t.split(n);
        o[0] = o[0].replace(/\\/g, "/");
        var s = t = o.join(n);
        if (s = s.trim(),
        !i && 1 === t.split("#").length) {
            var a = St.exec(s);
            if (a)
                return this.path = s,
                this.href = s,
                this.pathname = a[1],
                a[2] ? (this.search = a[2],
                this.query = e ? Tt.parse(this.search.substr(1)) : this.search.substr(1)) : e && (this.search = "",
                this.query = {}),
                this
        }
        var l = vt.exec(s);
        if (l) {
            var c = (l = l[0]).toLowerCase();
            this.protocol = c,
            s = s.substr(l.length)
        }
        if (i || l || s.match(/^\/\/[^@\/]+@[^@\/]+/)) {
            var u = "//" === s.substr(0, 2);
            !u || l && Rt[l] || (s = s.substr(2),
            this.slashes = !0)
        }
        if (!Rt[l] && (u || l && !Pt[l])) {
            for (var p, h, d = -1, _ = 0; _ < Ut.length; _++) {
                -1 !== (y = s.indexOf(Ut[_])) && (-1 === d || y < d) && (d = y)
            }
            -1 !== (h = -1 === d ? s.lastIndexOf("@") : s.lastIndexOf("@", d)) && (p = s.slice(0, h),
            s = s.slice(h + 1),
            this.auth = decodeURIComponent(p)),
            d = -1;
            for (_ = 0; _ < Ct.length; _++) {
                var y;
                -1 !== (y = s.indexOf(Ct[_])) && (-1 === d || y < d) && (d = y)
            }
            -1 === d && (d = s.length),
            this.host = s.slice(0, d),
            s = s.slice(d),
            this.parseHost(),
            this.hostname = this.hostname || "";
            var f = "[" === this.hostname[0] && "]" === this.hostname[this.hostname.length - 1];
            if (!f)
                for (var m = this.hostname.split(/\./), T = (_ = 0,
                m.length); _ < T; _++) {
                    var g = m[_];
                    if (g && !g.match(At)) {
                        for (var v = "", E = 0, S = g.length; E < S; E++)
                            127 < g.charCodeAt(E) ? v += "x" : v += g[E];
                        if (!v.match(At)) {
                            var b = m.slice(0, _)
                              , I = m.slice(_ + 1)
                              , C = g.match(wt);
                            C && (b.push(C[1]),
                            I.unshift(C[2])),
                            I.length && (s = "/" + I.join(".") + s),
                            this.hostname = b.join(".");
                            break
                        }
                    }
                }
            255 < this.hostname.length ? this.hostname = "" : this.hostname = this.hostname.toLowerCase(),
            f || (this.hostname = ft.toASCII(this.hostname));
            var U = this.port ? ":" + this.port : ""
              , A = this.hostname || "";
            this.host = A + U,
            this.href += this.host,
            f && (this.hostname = this.hostname.substr(1, this.hostname.length - 2),
            "/" !== s[0] && (s = "/" + s))
        }
        if (!Ot[c])
            for (_ = 0,
            T = It.length; _ < T; _++) {
                var w = It[_];
                if (-1 !== s.indexOf(w)) {
                    var O = encodeURIComponent(w);
                    O === w && (O = escape(w)),
                    s = s.split(w).join(O)
                }
            }
        var R = s.indexOf("#");
        -1 !== R && (this.hash = s.substr(R),
        s = s.slice(0, R));
        var P = s.indexOf("?");
        if (-1 !== P ? (this.search = s.substr(P),
        this.query = s.substr(P + 1),
        e && (this.query = Tt.parse(this.query)),
        s = s.slice(0, P)) : e && (this.search = "",
        this.query = {}),
        s && (this.pathname = s),
        Pt[c] && this.hostname && !this.pathname && (this.pathname = "/"),
        this.pathname || this.search) {
            U = this.pathname || "";
            var D = this.search || "";
            this.path = U + D
        }
        return this.href = this.format(),
        this
    }
    ,
    Url.prototype.format = function() {
        var t = this.auth || "";
        t && (t = (t = encodeURIComponent(t)).replace(/%3A/i, ":"),
        t += "@");
        var e = this.protocol || ""
          , i = this.pathname || ""
          , r = this.hash || ""
          , n = !1
          , o = "";
        this.host ? n = t + this.host : this.hostname && (n = t + (-1 === this.hostname.indexOf(":") ? this.hostname : "[" + this.hostname + "]"),
        this.port && (n += ":" + this.port)),
        this.query && mt.isObject(this.query) && Object.keys(this.query).length && (o = Tt.stringify(this.query));
        var s = this.search || o && "?" + o || "";
        return e && ":" !== e.substr(-1) && (e += ":"),
        this.slashes || (!e || Pt[e]) && !1 !== n ? (n = "//" + (n || ""),
        i && "/" !== i.charAt(0) && (i = "/" + i)) : n = n || "",
        r && "#" !== r.charAt(0) && (r = "#" + r),
        s && "?" !== s.charAt(0) && (s = "?" + s),
        e + n + (i = i.replace(/[?#]/g, function(t) {
            return encodeURIComponent(t)
        })) + (s = s.replace("#", "%23")) + r
    }
    ,
    Url.prototype.resolve = function(t) {
        return this.resolveObject(urlParse(t, !1, !0)).format()
    }
    ,
    Url.prototype.resolveObject = function(t) {
        if (mt.isString(t)) {
            var e = new Url;
            e.parse(t, !1, !0),
            t = e
        }
        for (var i = new Url, r = Object.keys(this), n = 0; n < r.length; n++) {
            var o = r[n];
            i[o] = this[o]
        }
        if (i.hash = t.hash,
        "" === t.href)
            return i.href = i.format(),
            i;
        if (t.slashes && !t.protocol) {
            for (var s = Object.keys(t), a = 0; a < s.length; a++) {
                var l = s[a];
                "protocol" !== l && (i[l] = t[l])
            }
            return Pt[i.protocol] && i.hostname && !i.pathname && (i.path = i.pathname = "/"),
            i.href = i.format(),
            i
        }
        if (t.protocol && t.protocol !== i.protocol) {
            if (!Pt[t.protocol]) {
                for (var c = Object.keys(t), u = 0; u < c.length; u++) {
                    var p = c[u];
                    i[p] = t[p]
                }
                return i.href = i.format(),
                i
            }
            if (i.protocol = t.protocol,
            t.host || Rt[t.protocol])
                i.pathname = t.pathname;
            else {
                for (var h = (t.pathname || "").split("/"); h.length && !(t.host = h.shift()); )
                    ;
                t.host || (t.host = ""),
                t.hostname || (t.hostname = ""),
                "" !== h[0] && h.unshift(""),
                h.length < 2 && h.unshift(""),
                i.pathname = h.join("/")
            }
            if (i.search = t.search,
            i.query = t.query,
            i.host = t.host || "",
            i.auth = t.auth,
            i.hostname = t.hostname || t.host,
            i.port = t.port,
            i.pathname || i.search) {
                var d = i.pathname || ""
                  , _ = i.search || "";
                i.path = d + _
            }
            return i.slashes = i.slashes || t.slashes,
            i.href = i.format(),
            i
        }
        var y = i.pathname && "/" === i.pathname.charAt(0)
          , f = t.host || t.pathname && "/" === t.pathname.charAt(0)
          , m = f || y || i.host && t.pathname
          , T = m
          , g = i.pathname && i.pathname.split("/") || []
          , v = (h = t.pathname && t.pathname.split("/") || [],
        i.protocol && !Pt[i.protocol]);
        if (v && (i.hostname = "",
        i.port = null,
        i.host && ("" === g[0] ? g[0] = i.host : g.unshift(i.host)),
        i.host = "",
        t.protocol && (t.hostname = null,
        t.port = null,
        t.host && ("" === h[0] ? h[0] = t.host : h.unshift(t.host)),
        t.host = null),
        m = m && ("" === h[0] || "" === g[0])),
        f)
            i.host = t.host || "" === t.host ? t.host : i.host,
            i.hostname = t.hostname || "" === t.hostname ? t.hostname : i.hostname,
            i.search = t.search,
            i.query = t.query,
            g = h;
        else if (h.length)
            (g = g || []).pop(),
            g = g.concat(h),
            i.search = t.search,
            i.query = t.query;
        else if (!mt.isNullOrUndefined(t.search)) {
            if (v)
                i.hostname = i.host = g.shift(),
                (C = !!(i.host && 0 < i.host.indexOf("@")) && i.host.split("@")) && (i.auth = C.shift(),
                i.host = i.hostname = C.shift());
            return i.search = t.search,
            i.query = t.query,
            mt.isNull(i.pathname) && mt.isNull(i.search) || (i.path = (i.pathname ? i.pathname : "") + (i.search ? i.search : "")),
            i.href = i.format(),
            i
        }
        if (!g.length)
            return i.pathname = null,
            i.search ? i.path = "/" + i.search : i.path = null,
            i.href = i.format(),
            i;
        for (var E = g.slice(-1)[0], S = (i.host || t.host || 1 < g.length) && ("." === E || ".." === E) || "" === E, b = 0, I = g.length; 0 <= I; I--)
            "." === (E = g[I]) ? g.splice(I, 1) : ".." === E ? (g.splice(I, 1),
            b++) : b && (g.splice(I, 1),
            b--);
        if (!m && !T)
            for (; b--; )
                g.unshift("..");
        !m || "" === g[0] || g[0] && "/" === g[0].charAt(0) || g.unshift(""),
        S && "/" !== g.join("/").substr(-1) && g.push("");
        var C, U = "" === g[0] || g[0] && "/" === g[0].charAt(0);
        v && (i.hostname = i.host = U ? "" : g.length ? g.shift() : "",
        (C = !!(i.host && 0 < i.host.indexOf("@")) && i.host.split("@")) && (i.auth = C.shift(),
        i.host = i.hostname = C.shift()));
        return (m = m || i.host && g.length) && !U && g.unshift(""),
        g.length ? i.pathname = g.join("/") : (i.pathname = null,
        i.path = null),
        mt.isNull(i.pathname) && mt.isNull(i.search) || (i.path = (i.pathname ? i.pathname : "") + (i.search ? i.search : "")),
        i.auth = t.auth || i.auth,
        i.slashes = i.slashes || t.slashes,
        i.href = i.format(),
        i
    }
    ,
    Url.prototype.parseHost = function() {
        var t = this.host
          , e = Et.exec(t);
        e && (":" !== (e = e[0]) && (this.port = e.substr(1)),
        t = t.substr(0, t.length - e.length)),
        t && (this.hostname = t)
    }
    ;
    var Dt, Lt, Nt, xt, Mt, Vt, Bt, Ft, Gt, kt, jt, Ht, qt, Yt, zt, Kt, Xt, Wt, Jt;
    rt.ENV = void 0,
    (Dt = rt.ENV || (rt.ENV = {}))[Dt.WEBGL_LEGACY = 0] = "WEBGL_LEGACY",
    Dt[Dt.WEBGL = 1] = "WEBGL",
    Dt[Dt.WEBGL2 = 2] = "WEBGL2",
    rt.RENDERER_TYPE = void 0,
    (Lt = rt.RENDERER_TYPE || (rt.RENDERER_TYPE = {}))[Lt.UNKNOWN = 0] = "UNKNOWN",
    Lt[Lt.WEBGL = 1] = "WEBGL",
    Lt[Lt.CANVAS = 2] = "CANVAS",
    rt.BUFFER_BITS = void 0,
    (Nt = rt.BUFFER_BITS || (rt.BUFFER_BITS = {}))[Nt.COLOR = 16384] = "COLOR",
    Nt[Nt.DEPTH = 256] = "DEPTH",
    Nt[Nt.STENCIL = 1024] = "STENCIL",
    rt.BLEND_MODES = void 0,
    (xt = rt.BLEND_MODES || (rt.BLEND_MODES = {}))[xt.NORMAL = 0] = "NORMAL",
    xt[xt.ADD = 1] = "ADD",
    xt[xt.MULTIPLY = 2] = "MULTIPLY",
    xt[xt.SCREEN = 3] = "SCREEN",
    xt[xt.OVERLAY = 4] = "OVERLAY",
    xt[xt.DARKEN = 5] = "DARKEN",
    xt[xt.LIGHTEN = 6] = "LIGHTEN",
    xt[xt.COLOR_DODGE = 7] = "COLOR_DODGE",
    xt[xt.COLOR_BURN = 8] = "COLOR_BURN",
    xt[xt.HARD_LIGHT = 9] = "HARD_LIGHT",
    xt[xt.SOFT_LIGHT = 10] = "SOFT_LIGHT",
    xt[xt.DIFFERENCE = 11] = "DIFFERENCE",
    xt[xt.EXCLUSION = 12] = "EXCLUSION",
    xt[xt.HUE = 13] = "HUE",
    xt[xt.SATURATION = 14] = "SATURATION",
    xt[xt.COLOR = 15] = "COLOR",
    xt[xt.LUMINOSITY = 16] = "LUMINOSITY",
    xt[xt.NORMAL_NPM = 17] = "NORMAL_NPM",
    xt[xt.ADD_NPM = 18] = "ADD_NPM",
    xt[xt.SCREEN_NPM = 19] = "SCREEN_NPM",
    xt[xt.NONE = 20] = "NONE",
    xt[xt.SRC_OVER = 0] = "SRC_OVER",
    xt[xt.SRC_IN = 21] = "SRC_IN",
    xt[xt.SRC_OUT = 22] = "SRC_OUT",
    xt[xt.SRC_ATOP = 23] = "SRC_ATOP",
    xt[xt.DST_OVER = 24] = "DST_OVER",
    xt[xt.DST_IN = 25] = "DST_IN",
    xt[xt.DST_OUT = 26] = "DST_OUT",
    xt[xt.DST_ATOP = 27] = "DST_ATOP",
    xt[xt.ERASE = 26] = "ERASE",
    xt[xt.SUBTRACT = 28] = "SUBTRACT",
    xt[xt.XOR = 29] = "XOR",
    rt.DRAW_MODES = void 0,
    (Mt = rt.DRAW_MODES || (rt.DRAW_MODES = {}))[Mt.POINTS = 0] = "POINTS",
    Mt[Mt.LINES = 1] = "LINES",
    Mt[Mt.LINE_LOOP = 2] = "LINE_LOOP",
    Mt[Mt.LINE_STRIP = 3] = "LINE_STRIP",
    Mt[Mt.TRIANGLES = 4] = "TRIANGLES",
    Mt[Mt.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP",
    Mt[Mt.TRIANGLE_FAN = 6] = "TRIANGLE_FAN",
    rt.FORMATS = void 0,
    (Vt = rt.FORMATS || (rt.FORMATS = {}))[Vt.RGBA = 6408] = "RGBA",
    Vt[Vt.RGB = 6407] = "RGB",
    Vt[Vt.RG = 33319] = "RG",
    Vt[Vt.RED = 6403] = "RED",
    Vt[Vt.RGBA_INTEGER = 36249] = "RGBA_INTEGER",
    Vt[Vt.RGB_INTEGER = 36248] = "RGB_INTEGER",
    Vt[Vt.RG_INTEGER = 33320] = "RG_INTEGER",
    Vt[Vt.RED_INTEGER = 36244] = "RED_INTEGER",
    Vt[Vt.ALPHA = 6406] = "ALPHA",
    Vt[Vt.LUMINANCE = 6409] = "LUMINANCE",
    Vt[Vt.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA",
    Vt[Vt.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT",
    Vt[Vt.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL",
    rt.TARGETS = void 0,
    (Bt = rt.TARGETS || (rt.TARGETS = {}))[Bt.TEXTURE_2D = 3553] = "TEXTURE_2D",
    Bt[Bt.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP",
    Bt[Bt.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY",
    Bt[Bt.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X",
    Bt[Bt.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X",
    Bt[Bt.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y",
    Bt[Bt.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y",
    Bt[Bt.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z",
    Bt[Bt.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z",
    rt.TYPES = void 0,
    (Ft = rt.TYPES || (rt.TYPES = {}))[Ft.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE",
    Ft[Ft.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT",
    Ft[Ft.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5",
    Ft[Ft.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4",
    Ft[Ft.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1",
    Ft[Ft.UNSIGNED_INT = 5125] = "UNSIGNED_INT",
    Ft[Ft.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV",
    Ft[Ft.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV",
    Ft[Ft.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8",
    Ft[Ft.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV",
    Ft[Ft.BYTE = 5120] = "BYTE",
    Ft[Ft.SHORT = 5122] = "SHORT",
    Ft[Ft.INT = 5124] = "INT",
    Ft[Ft.FLOAT = 5126] = "FLOAT",
    Ft[Ft.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV",
    Ft[Ft.HALF_FLOAT = 36193] = "HALF_FLOAT",
    rt.SAMPLER_TYPES = void 0,
    (Gt = rt.SAMPLER_TYPES || (rt.SAMPLER_TYPES = {}))[Gt.FLOAT = 0] = "FLOAT",
    Gt[Gt.INT = 1] = "INT",
    Gt[Gt.UINT = 2] = "UINT",
    rt.SCALE_MODES = void 0,
    (kt = rt.SCALE_MODES || (rt.SCALE_MODES = {}))[kt.NEAREST = 0] = "NEAREST",
    kt[kt.LINEAR = 1] = "LINEAR",
    rt.WRAP_MODES = void 0,
    (jt = rt.WRAP_MODES || (rt.WRAP_MODES = {}))[jt.CLAMP = 33071] = "CLAMP",
    jt[jt.REPEAT = 10497] = "REPEAT",
    jt[jt.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT",
    rt.MIPMAP_MODES = void 0,
    (Ht = rt.MIPMAP_MODES || (rt.MIPMAP_MODES = {}))[Ht.OFF = 0] = "OFF",
    Ht[Ht.POW2 = 1] = "POW2",
    Ht[Ht.ON = 2] = "ON",
    Ht[Ht.ON_MANUAL = 3] = "ON_MANUAL",
    rt.ALPHA_MODES = void 0,
    (qt = rt.ALPHA_MODES || (rt.ALPHA_MODES = {}))[qt.NPM = 0] = "NPM",
    qt[qt.UNPACK = 1] = "UNPACK",
    qt[qt.PMA = 2] = "PMA",
    qt[qt.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA",
    qt[qt.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD",
    qt[qt.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA",
    qt[qt.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA",
    rt.CLEAR_MODES = void 0,
    (Yt = rt.CLEAR_MODES || (rt.CLEAR_MODES = {}))[Yt.NO = 0] = "NO",
    Yt[Yt.YES = 1] = "YES",
    Yt[Yt.AUTO = 2] = "AUTO",
    Yt[Yt.BLEND = 0] = "BLEND",
    Yt[Yt.CLEAR = 1] = "CLEAR",
    Yt[Yt.BLIT = 2] = "BLIT",
    rt.GC_MODES = void 0,
    (zt = rt.GC_MODES || (rt.GC_MODES = {}))[zt.AUTO = 0] = "AUTO",
    zt[zt.MANUAL = 1] = "MANUAL",
    rt.PRECISION = void 0,
    (Kt = rt.PRECISION || (rt.PRECISION = {})).LOW = "lowp",
    Kt.MEDIUM = "mediump",
    Kt.HIGH = "highp",
    rt.MASK_TYPES = void 0,
    (Xt = rt.MASK_TYPES || (rt.MASK_TYPES = {}))[Xt.NONE = 0] = "NONE",
    Xt[Xt.SCISSOR = 1] = "SCISSOR",
    Xt[Xt.STENCIL = 2] = "STENCIL",
    Xt[Xt.SPRITE = 3] = "SPRITE",
    rt.MSAA_QUALITY = void 0,
    (Wt = rt.MSAA_QUALITY || (rt.MSAA_QUALITY = {}))[Wt.NONE = 0] = "NONE",
    Wt[Wt.LOW = 2] = "LOW",
    Wt[Wt.MEDIUM = 4] = "MEDIUM",
    Wt[Wt.HIGH = 8] = "HIGH",
    rt.BUFFER_TYPE = void 0,
    (Jt = rt.BUFFER_TYPE || (rt.BUFFER_TYPE = {}))[Jt.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER",
    Jt[Jt.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER",
    Jt[Jt.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
    var Qt = {
        parse: gt,
        format: h8b,
        resolve: f8b
    };
    pt.RETINA_PREFIX = /@([0-9\.]+)x/;
    var Zt, $t = pt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = !1, te = "6.3.2";
    function sayHello(t) {
        var e;
        if (!$t) {
            if (-1 < navigator.userAgent.toLowerCase().indexOf("chrome")) {
                var i = ["\n %c %c %c PixiJS " + te + " - ✰ " + t + " ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n", "background: #ff66a5; padding:5px 0;", "background: #ff66a5; padding:5px 0;", "color: #ff66a5; background: #030307; padding:5px 0;", "background: #ff66a5; padding:5px 0;", "background: #ffc3dc; padding:5px 0;", "background: #ff66a5; padding:5px 0;", "color: #ff2424; background: #fff; padding:5px 0;", "color: #ff2424; background: #fff; padding:5px 0;", "color: #ff2424; background: #fff; padding:5px 0;"];
                (e = globalThis.console).log.apply(e, i)
            } else
                globalThis.console && globalThis.console.log("PixiJS " + te + " - " + t + " - http://www.pixijs.com/");
            $t = !0
        }
    }
    function isWebGLSupported() {
        return void 0 === Zt && (Zt = function supported() {
            var t = {
                stencil: !0,
                failIfMajorPerformanceCaveat: pt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT
            };
            try {
                if (!globalThis.WebGLRenderingContext)
                    return !1;
                var e = document.createElement("canvas")
                  , i = e.getContext("webgl", t) || e.getContext("experimental-webgl", t)
                  , r = !(!i || !i.getContextAttributes().stencil);
                if (i) {
                    var n = i.getExtension("WEBGL_lose_context");
                    n && n.loseContext()
                }
                return i = null,
                r
            } catch (t) {
                return !1
            }
        }()),
        Zt
    }
    var ee = {
        aliceblue: "#f0f8ff",
        antiquewhite: "#faebd7",
        aqua: "#00ffff",
        aquamarine: "#7fffd4",
        azure: "#f0ffff",
        beige: "#f5f5dc",
        bisque: "#ffe4c4",
        black: "#000000",
        blanchedalmond: "#ffebcd",
        blue: "#0000ff",
        blueviolet: "#8a2be2",
        brown: "#a52a2a",
        burlywood: "#deb887",
        cadetblue: "#5f9ea0",
        chartreuse: "#7fff00",
        chocolate: "#d2691e",
        coral: "#ff7f50",
        cornflowerblue: "#6495ed",
        cornsilk: "#fff8dc",
        crimson: "#dc143c",
        cyan: "#00ffff",
        darkblue: "#00008b",
        darkcyan: "#008b8b",
        darkgoldenrod: "#b8860b",
        darkgray: "#a9a9a9",
        darkgreen: "#006400",
        darkgrey: "#a9a9a9",
        darkkhaki: "#bdb76b",
        darkmagenta: "#8b008b",
        darkolivegreen: "#556b2f",
        darkorange: "#ff8c00",
        darkorchid: "#9932cc",
        darkred: "#8b0000",
        darksalmon: "#e9967a",
        darkseagreen: "#8fbc8f",
        darkslateblue: "#483d8b",
        darkslategray: "#2f4f4f",
        darkslategrey: "#2f4f4f",
        darkturquoise: "#00ced1",
        darkviolet: "#9400d3",
        deeppink: "#ff1493",
        deepskyblue: "#00bfff",
        dimgray: "#696969",
        dimgrey: "#696969",
        dodgerblue: "#1e90ff",
        firebrick: "#b22222",
        floralwhite: "#fffaf0",
        forestgreen: "#228b22",
        fuchsia: "#ff00ff",
        gainsboro: "#dcdcdc",
        ghostwhite: "#f8f8ff",
        goldenrod: "#daa520",
        gold: "#ffd700",
        gray: "#808080",
        green: "#008000",
        greenyellow: "#adff2f",
        grey: "#808080",
        honeydew: "#f0fff0",
        hotpink: "#ff69b4",
        indianred: "#cd5c5c",
        indigo: "#4b0082",
        ivory: "#fffff0",
        khaki: "#f0e68c",
        lavenderblush: "#fff0f5",
        lavender: "#e6e6fa",
        lawngreen: "#7cfc00",
        lemonchiffon: "#fffacd",
        lightblue: "#add8e6",
        lightcoral: "#f08080",
        lightcyan: "#e0ffff",
        lightgoldenrodyellow: "#fafad2",
        lightgray: "#d3d3d3",
        lightgreen: "#90ee90",
        lightgrey: "#d3d3d3",
        lightpink: "#ffb6c1",
        lightsalmon: "#ffa07a",
        lightseagreen: "#20b2aa",
        lightskyblue: "#87cefa",
        lightslategray: "#778899",
        lightslategrey: "#778899",
        lightsteelblue: "#b0c4de",
        lightyellow: "#ffffe0",
        lime: "#00ff00",
        limegreen: "#32cd32",
        linen: "#faf0e6",
        magenta: "#ff00ff",
        maroon: "#800000",
        mediumaquamarine: "#66cdaa",
        mediumblue: "#0000cd",
        mediumorchid: "#ba55d3",
        mediumpurple: "#9370db",
        mediumseagreen: "#3cb371",
        mediumslateblue: "#7b68ee",
        mediumspringgreen: "#00fa9a",
        mediumturquoise: "#48d1cc",
        mediumvioletred: "#c71585",
        midnightblue: "#191970",
        mintcream: "#f5fffa",
        mistyrose: "#ffe4e1",
        moccasin: "#ffe4b5",
        navajowhite: "#ffdead",
        navy: "#000080",
        oldlace: "#fdf5e6",
        olive: "#808000",
        olivedrab: "#6b8e23",
        orange: "#ffa500",
        orangered: "#ff4500",
        orchid: "#da70d6",
        palegoldenrod: "#eee8aa",
        palegreen: "#98fb98",
        paleturquoise: "#afeeee",
        palevioletred: "#db7093",
        papayawhip: "#ffefd5",
        peachpuff: "#ffdab9",
        peru: "#cd853f",
        pink: "#ffc0cb",
        plum: "#dda0dd",
        powderblue: "#b0e0e6",
        purple: "#800080",
        rebeccapurple: "#663399",
        red: "#ff0000",
        rosybrown: "#bc8f8f",
        royalblue: "#4169e1",
        saddlebrown: "#8b4513",
        salmon: "#fa8072",
        sandybrown: "#f4a460",
        seagreen: "#2e8b57",
        seashell: "#fff5ee",
        sienna: "#a0522d",
        silver: "#c0c0c0",
        skyblue: "#87ceeb",
        slateblue: "#6a5acd",
        slategray: "#708090",
        slategrey: "#708090",
        snow: "#fffafa",
        springgreen: "#00ff7f",
        steelblue: "#4682b4",
        tan: "#d2b48c",
        teal: "#008080",
        thistle: "#d8bfd8",
        tomato: "#ff6347",
        turquoise: "#40e0d0",
        violet: "#ee82ee",
        wheat: "#f5deb3",
        white: "#ffffff",
        whitesmoke: "#f5f5f5",
        yellow: "#ffff00",
        yellowgreen: "#9acd32"
    };
    function hex2rgb(t, e) {
        return void 0 === e && (e = []),
        e[0] = (t >> 16 & 255) / 255,
        e[1] = (t >> 8 & 255) / 255,
        e[2] = (255 & t) / 255,
        e
    }
    function hex2string(t) {
        var e = t.toString(16);
        return "#" + (e = "000000".substring(0, 6 - e.length) + e)
    }
    function string2hex(t) {
        return "string" == typeof t && "#" === (t = ee[t.toLowerCase()] || t)[0] && (t = t.slice(1)),
        parseInt(t, 16)
    }
    var ie = function mapPremultipliedBlendModes() {
        for (var t = [], e = [], i = 0; i < 32; i++)
            e[t[i] = i] = i;
        t[rt.BLEND_MODES.NORMAL_NPM] = rt.BLEND_MODES.NORMAL,
        t[rt.BLEND_MODES.ADD_NPM] = rt.BLEND_MODES.ADD,
        t[rt.BLEND_MODES.SCREEN_NPM] = rt.BLEND_MODES.SCREEN,
        e[rt.BLEND_MODES.NORMAL] = rt.BLEND_MODES.NORMAL_NPM,
        e[rt.BLEND_MODES.ADD] = rt.BLEND_MODES.ADD_NPM,
        e[rt.BLEND_MODES.SCREEN] = rt.BLEND_MODES.SCREEN_NPM;
        var r = [];
        return r.push(e),
        r.push(t),
        r
    }();
    function correctBlendMode(t, e) {
        return ie[e ? 1 : 0][t]
    }
    function premultiplyRgba(t, e, i, r) {
        return i = i || new Float32Array(4),
        r || void 0 === r ? (i[0] = t[0] * e,
        i[1] = t[1] * e,
        i[2] = t[2] * e) : (i[0] = t[0],
        i[1] = t[1],
        i[2] = t[2]),
        i[3] = e,
        i
    }
    function premultiplyTint(t, e) {
        if (1 === e)
            return (255 * e << 24) + t;
        if (0 === e)
            return 0;
        var i = t >> 16 & 255
          , r = t >> 8 & 255
          , n = 255 & t;
        return (255 * e << 24) + ((i = i * e + .5 | 0) << 16) + ((r = r * e + .5 | 0) << 8) + (n = n * e + .5 | 0)
    }
    function premultiplyTintToRgba(t, e, i, r) {
        return (i = i || new Float32Array(4))[0] = (t >> 16 & 255) / 255,
        i[1] = (t >> 8 & 255) / 255,
        i[2] = (255 & t) / 255,
        !r && void 0 !== r || (i[0] *= e,
        i[1] *= e,
        i[2] *= e),
        i[3] = e,
        i
    }
    function createIndicesForQuads(t, e) {
        void 0 === e && (e = null);
        var i = 6 * t;
        if ((e = e || new Uint16Array(i)).length !== i)
            throw new Error("Out buffer length is incorrect, got " + e.length + " and expected " + i);
        for (var r = 0, n = 0; r < i; r += 6,
        n += 4)
            e[r + 0] = n + 0,
            e[r + 1] = n + 1,
            e[r + 2] = n + 2,
            e[r + 3] = n + 0,
            e[r + 4] = n + 2,
            e[r + 5] = n + 3;
        return e
    }
    function getBufferType(t) {
        if (4 === t.BYTES_PER_ELEMENT)
            return t instanceof Float32Array ? "Float32Array" : t instanceof Uint32Array ? "Uint32Array" : "Int32Array";
        if (2 === t.BYTES_PER_ELEMENT) {
            if (t instanceof Uint16Array)
                return "Uint16Array"
        } else if (1 === t.BYTES_PER_ELEMENT && t instanceof Uint8Array)
            return "Uint8Array";
        return null
    }
    var re = {
        Float32Array: Float32Array,
        Uint32Array: Uint32Array,
        Int32Array: Int32Array,
        Uint8Array: Uint8Array
    };
    function nextPow2(t) {
        return t += 0 === t ? 1 : 0,
        --t,
        t |= t >>> 1,
        t |= t >>> 2,
        t |= t >>> 4,
        t |= t >>> 8,
        (t |= t >>> 16) + 1
    }
    function isPow2(t) {
        return !(t & t - 1 || !t)
    }
    function log2(t) {
        var e = (65535 < t ? 1 : 0) << 4
          , i = (255 < (t >>>= e) ? 1 : 0) << 3;
        return e |= i,
        e |= i = (15 < (t >>>= i) ? 1 : 0) << 2,
        (e |= i = (3 < (t >>>= i) ? 1 : 0) << 1) | (t >>>= i) >> 1
    }
    function removeItems(t, e, i) {
        var r, n = t.length;
        if (!(n <= e || 0 === i)) {
            var o = n - (i = n < e + i ? n - e : i);
            for (r = e; r < o; ++r)
                t[r] = t[r + i];
            t.length = o
        }
    }
    function sign(t) {
        return 0 === t ? 0 : t < 0 ? -1 : 1
    }
    var ne = 0;
    function uid() {
        return ++ne
    }
    var oe = {};
    function deprecation(t, e, i) {
        if (void 0 === i && (i = 3),
        !oe[e]) {
            var r = (new Error).stack;
            void 0 === r ? console.warn("PixiJS Deprecation Warning: ", e + "\nDeprecated since v" + t) : (r = r.split("\n").splice(i).join("\n"),
            console.groupCollapsed ? (console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s", "color:#614108;background:#fffbe6", "font-weight:normal;color:#614108;background:#fffbe6", e + "\nDeprecated since v" + t),
            console.warn(r),
            console.groupEnd()) : (console.warn("PixiJS Deprecation Warning: ", e + "\nDeprecated since v" + t),
            console.warn(r))),
            oe[e] = !0
        }
    }
    var se = {}
      , ae = Object.create(null)
      , le = Object.create(null);
    var ce = (CanvasRenderTarget.prototype.clear = function() {
        this.context.setTransform(1, 0, 0, 1, 0, 0),
        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)
    }
    ,
    CanvasRenderTarget.prototype.resize = function(t, e) {
        this.canvas.width = Math.round(t * this.resolution),
        this.canvas.height = Math.round(e * this.resolution)
    }
    ,
    CanvasRenderTarget.prototype.destroy = function() {
        this.context = null,
        this.canvas = null
    }
    ,
    Object.defineProperty(CanvasRenderTarget.prototype, "width", {
        get: function() {
            return this.canvas.width
        },
        set: function(t) {
            this.canvas.width = Math.round(t)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(CanvasRenderTarget.prototype, "height", {
        get: function() {
            return this.canvas.height
        },
        set: function(t) {
            this.canvas.height = Math.round(t)
        },
        enumerable: !1,
        configurable: !0
    }),
    CanvasRenderTarget);
    function CanvasRenderTarget(t, e, i) {
        this.canvas = document.createElement("canvas"),
        this.context = this.canvas.getContext("2d"),
        this.resolution = i || pt.RESOLUTION,
        this.resize(t, e)
    }
    function trimCanvas(t) {
        var e, i, r, n = t.width, o = t.height, s = t.getContext("2d"), a = s.getImageData(0, 0, n, o).data, l = a.length, c = {
            top: null,
            left: null,
            right: null,
            bottom: null
        }, u = null;
        for (e = 0; e < l; e += 4)
            0 !== a[e + 3] && (i = e / 4 % n,
            r = ~~(e / 4 / n),
            null === c.top && (c.top = r),
            null === c.left ? c.left = i : i < c.left && (c.left = i),
            null === c.right ? c.right = 1 + i : c.right < i && (c.right = 1 + i),
            null === c.bottom ? c.bottom = r : c.bottom < r && (c.bottom = r));
        return null !== c.top && (n = c.right - c.left,
        o = c.bottom - c.top + 1,
        u = s.getImageData(c.left, c.top, n, o)),
        {
            height: o,
            width: n,
            data: u
        }
    }
    var ue, pe = /^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;
    function determineCrossOrigin(t, e) {
        if (void 0 === e && (e = globalThis.location),
        0 === t.indexOf("data:"))
            return "";
        e = e || globalThis.location,
        (ue = ue || document.createElement("a")).href = t;
        var i = Qt.parse(ue.href)
          , r = !i.port && "" === e.port || i.port === e.port;
        return i.hostname === e.hostname && r && i.protocol === e.protocol ? "" : "anonymous"
    }
    function getResolutionOfUrl(t, e) {
        var i = pt.RETINA_PREFIX.exec(t);
        return i ? parseFloat(i[1]) : void 0 !== e ? e : 1
    }
    var he, de = {
        __proto__: null,
        BaseTextureCache: le,
        CanvasRenderTarget: ce,
        DATA_URI: pe,
        ProgramCache: se,
        TextureCache: ae,
        clearTextureCache: function clearTextureCache() {
            var t;
            for (t in ae)
                delete ae[t];
            for (t in le)
                delete le[t]
        },
        correctBlendMode: correctBlendMode,
        createIndicesForQuads: createIndicesForQuads,
        decomposeDataUri: function decomposeDataUri(t) {
            var e = pe.exec(t);
            if (e)
                return {
                    mediaType: e[1] ? e[1].toLowerCase() : void 0,
                    subType: e[2] ? e[2].toLowerCase() : void 0,
                    charset: e[3] ? e[3].toLowerCase() : void 0,
                    encoding: e[4] ? e[4].toLowerCase() : void 0,
                    data: e[5]
                }
        },
        deprecation: deprecation,
        destroyTextureCache: function destroyTextureCache() {
            var t;
            for (t in ae)
                ae[t].destroy();
            for (t in le)
                le[t].destroy()
        },
        determineCrossOrigin: determineCrossOrigin,
        getBufferType: getBufferType,
        getResolutionOfUrl: getResolutionOfUrl,
        hex2rgb: hex2rgb,
        hex2string: hex2string,
        interleaveTypedArrays: function interleaveTypedArrays$1(t, e) {
            for (var i = 0, r = 0, n = {}, o = 0; o < t.length; o++)
                r += e[o],
                i += t[o].length;
            var s = new ArrayBuffer(4 * i)
              , a = null
              , l = 0;
            for (o = 0; o < t.length; o++) {
                var c = e[o]
                  , u = t[o]
                  , p = getBufferType(u);
                n[p] || (n[p] = new re[p](s)),
                a = n[p];
                for (var h = 0; h < u.length; h++) {
                    a[(h / c | 0) * r + l + h % c] = u[h]
                }
                l += c
            }
            return new Float32Array(s)
        },
        isPow2: isPow2,
        isWebGLSupported: isWebGLSupported,
        log2: log2,
        nextPow2: nextPow2,
        premultiplyBlendMode: ie,
        premultiplyRgba: premultiplyRgba,
        premultiplyTint: premultiplyTint,
        premultiplyTintToRgba: premultiplyTintToRgba,
        removeItems: removeItems,
        rgb2hex: function rgb2hex(t) {
            return (255 * t[0] << 16) + (255 * t[1] << 8) + (255 * t[2] | 0)
        },
        sayHello: sayHello,
        sign: sign,
        skipHello: function skipHello() {
            $t = !0
        },
        string2hex: string2hex,
        trimCanvas: trimCanvas,
        uid: uid,
        url: Qt,
        isMobile: ut,
        EventEmitter: dt,
        earcut: _t
    }, _e = 2 * Math.PI, ye = 180 / Math.PI, fe = Math.PI / 180;
    rt.SHAPES = void 0,
    (he = rt.SHAPES || (rt.SHAPES = {}))[he.POLY = 0] = "POLY",
    he[he.RECT = 1] = "RECT",
    he[he.CIRC = 2] = "CIRC",
    he[he.ELIP = 3] = "ELIP",
    he[he.RREC = 4] = "RREC";
    var me = (Point.prototype.clone = function() {
        return new Point(this.x,this.y)
    }
    ,
    Point.prototype.copyFrom = function(t) {
        return this.set(t.x, t.y),
        this
    }
    ,
    Point.prototype.copyTo = function(t) {
        return t.set(this.x, this.y),
        t
    }
    ,
    Point.prototype.equals = function(t) {
        return t.x === this.x && t.y === this.y
    }
    ,
    Point.prototype.set = function(t, e) {
        return void 0 === t && (t = 0),
        void 0 === e && (e = t),
        this.x = t,
        this.y = e,
        this
    }
    ,
    Point.prototype.toString = function() {
        return "[@pixi/math:Point x=" + this.x + " y=" + this.y + "]"
    }
    ,
    Point);
    function Point(t, e) {
        void 0 === t && (t = 0),
        void 0 === e && (e = 0),
        this.x = 0,
        this.y = 0,
        this.x = t,
        this.y = e
    }
    var Te = [new me, new me, new me, new me]
      , ge = (Object.defineProperty(Rectangle.prototype, "left", {
        get: function() {
            return this.x
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Rectangle.prototype, "right", {
        get: function() {
            return this.x + this.width
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Rectangle.prototype, "top", {
        get: function() {
            return this.y
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Rectangle.prototype, "bottom", {
        get: function() {
            return this.y + this.height
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Rectangle, "EMPTY", {
        get: function() {
            return new Rectangle(0,0,0,0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Rectangle.prototype.clone = function() {
        return new Rectangle(this.x,this.y,this.width,this.height)
    }
    ,
    Rectangle.prototype.copyFrom = function(t) {
        return this.x = t.x,
        this.y = t.y,
        this.width = t.width,
        this.height = t.height,
        this
    }
    ,
    Rectangle.prototype.copyTo = function(t) {
        return t.x = this.x,
        t.y = this.y,
        t.width = this.width,
        t.height = this.height,
        t
    }
    ,
    Rectangle.prototype.contains = function(t, e) {
        return !(this.width <= 0 || this.height <= 0) && t >= this.x && t < this.x + this.width && e >= this.y && e < this.y + this.height
    }
    ,
    Rectangle.prototype.intersects = function(t, e) {
        if (!e) {
            var i = this.x < t.x ? t.x : this.x;
            return !((this.right > t.right ? t.right : this.right) <= i) && (this.y < t.y ? t.y : this.y) < (this.bottom > t.bottom ? t.bottom : this.bottom)
        }
        var r = this.left
          , n = this.right
          , o = this.top
          , s = this.bottom;
        if (n <= r || s <= o)
            return !1;
        var a = Te[0].set(t.left, t.top)
          , l = Te[1].set(t.left, t.bottom)
          , c = Te[2].set(t.right, t.top)
          , u = Te[3].set(t.right, t.bottom);
        if (c.x <= a.x || l.y <= a.y)
            return !1;
        var p = Math.sign(e.a * e.d - e.b * e.c);
        if (0 === p)
            return !1;
        if (e.apply(a, a),
        e.apply(l, l),
        e.apply(c, c),
        e.apply(u, u),
        Math.max(a.x, l.x, c.x, u.x) <= r || Math.min(a.x, l.x, c.x, u.x) >= n || Math.max(a.y, l.y, c.y, u.y) <= o || Math.min(a.y, l.y, c.y, u.y) >= s)
            return !1;
        var h = p * (l.y - a.y)
          , d = p * (a.x - l.x)
          , _ = h * r + d * o
          , y = h * n + d * o
          , f = h * r + d * s
          , m = h * n + d * s;
        if (Math.max(_, y, f, m) <= h * a.x + d * a.y || Math.min(_, y, f, m) >= h * u.x + d * u.y)
            return !1;
        var T = p * (a.y - c.y)
          , g = p * (c.x - a.x)
          , v = T * r + g * o
          , E = T * n + g * o
          , S = T * r + g * s
          , b = T * n + g * s;
        return !(Math.max(v, E, S, b) <= T * a.x + g * a.y || Math.min(v, E, S, b) >= T * u.x + g * u.y)
    }
    ,
    Rectangle.prototype.pad = function(t, e) {
        return void 0 === t && (t = 0),
        void 0 === e && (e = t),
        this.x -= t,
        this.y -= e,
        this.width += 2 * t,
        this.height += 2 * e,
        this
    }
    ,
    Rectangle.prototype.fit = function(t) {
        var e = Math.max(this.x, t.x)
          , i = Math.min(this.x + this.width, t.x + t.width)
          , r = Math.max(this.y, t.y)
          , n = Math.min(this.y + this.height, t.y + t.height);
        return this.x = e,
        this.width = Math.max(i - e, 0),
        this.y = r,
        this.height = Math.max(n - r, 0),
        this
    }
    ,
    Rectangle.prototype.ceil = function(t, e) {
        void 0 === t && (t = 1),
        void 0 === e && (e = .001);
        var i = Math.ceil((this.x + this.width - e) * t) / t
          , r = Math.ceil((this.y + this.height - e) * t) / t;
        return this.x = Math.floor((this.x + e) * t) / t,
        this.y = Math.floor((this.y + e) * t) / t,
        this.width = i - this.x,
        this.height = r - this.y,
        this
    }
    ,
    Rectangle.prototype.enlarge = function(t) {
        var e = Math.min(this.x, t.x)
          , i = Math.max(this.x + this.width, t.x + t.width)
          , r = Math.min(this.y, t.y)
          , n = Math.max(this.y + this.height, t.y + t.height);
        return this.x = e,
        this.width = i - e,
        this.y = r,
        this.height = n - r,
        this
    }
    ,
    Rectangle.prototype.toString = function() {
        return "[@pixi/math:Rectangle x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + "]"
    }
    ,
    Rectangle);
    function Rectangle(t, e, i, r) {
        void 0 === t && (t = 0),
        void 0 === e && (e = 0),
        void 0 === i && (i = 0),
        void 0 === r && (r = 0),
        this.x = Number(t),
        this.y = Number(e),
        this.width = Number(i),
        this.height = Number(r),
        this.type = rt.SHAPES.RECT
    }
    var ve = (Circle.prototype.clone = function() {
        return new Circle(this.x,this.y,this.radius)
    }
    ,
    Circle.prototype.contains = function(t, e) {
        if (this.radius <= 0)
            return !1;
        var i = this.radius * this.radius
          , r = this.x - t
          , n = this.y - e;
        return (r *= r) + (n *= n) <= i
    }
    ,
    Circle.prototype.getBounds = function() {
        return new ge(this.x - this.radius,this.y - this.radius,2 * this.radius,2 * this.radius)
    }
    ,
    Circle.prototype.toString = function() {
        return "[@pixi/math:Circle x=" + this.x + " y=" + this.y + " radius=" + this.radius + "]"
    }
    ,
    Circle);
    function Circle(t, e, i) {
        void 0 === t && (t = 0),
        void 0 === e && (e = 0),
        void 0 === i && (i = 0),
        this.x = t,
        this.y = e,
        this.radius = i,
        this.type = rt.SHAPES.CIRC
    }
    var Ee = (Ellipse.prototype.clone = function() {
        return new Ellipse(this.x,this.y,this.width,this.height)
    }
    ,
    Ellipse.prototype.contains = function(t, e) {
        if (this.width <= 0 || this.height <= 0)
            return !1;
        var i = (t - this.x) / this.width
          , r = (e - this.y) / this.height;
        return (i *= i) + (r *= r) <= 1
    }
    ,
    Ellipse.prototype.getBounds = function() {
        return new ge(this.x - this.width,this.y - this.height,this.width,this.height)
    }
    ,
    Ellipse.prototype.toString = function() {
        return "[@pixi/math:Ellipse x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + "]"
    }
    ,
    Ellipse);
    function Ellipse(t, e, i, r) {
        void 0 === t && (t = 0),
        void 0 === e && (e = 0),
        void 0 === i && (i = 0),
        void 0 === r && (r = 0),
        this.x = t,
        this.y = e,
        this.width = i,
        this.height = r,
        this.type = rt.SHAPES.ELIP
    }
    var Se = (Polygon.prototype.clone = function() {
        var t = new Polygon(this.points.slice());
        return t.closeStroke = this.closeStroke,
        t
    }
    ,
    Polygon.prototype.contains = function(t, e) {
        for (var i = !1, r = this.points.length / 2, n = 0, o = r - 1; n < r; o = n++) {
            var s = this.points[2 * n]
              , a = this.points[2 * n + 1]
              , l = this.points[2 * o]
              , c = this.points[2 * o + 1];
            e < a != e < c && t < (e - a) / (c - a) * (l - s) + s && (i = !i)
        }
        return i
    }
    ,
    Polygon.prototype.toString = function() {
        return "[@pixi/math:PolygoncloseStroke=" + this.closeStroke + "points=" + this.points.reduce(function(t, e) {
            return t + ", " + e
        }, "") + "]"
    }
    ,
    Polygon);
    function Polygon() {
        for (var t = arguments, e = [], i = 0; i < arguments.length; i++)
            e[i] = t[i];
        var r = Array.isArray(e[0]) ? e[0] : e;
        if ("number" != typeof r[0]) {
            for (var n = [], o = 0, s = r.length; o < s; o++)
                n.push(r[o].x, r[o].y);
            r = n
        }
        this.points = r,
        this.type = rt.SHAPES.POLY,
        this.closeStroke = !0
    }
    var be = (RoundedRectangle.prototype.clone = function() {
        return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)
    }
    ,
    RoundedRectangle.prototype.contains = function(t, e) {
        if (this.width <= 0 || this.height <= 0)
            return !1;
        if (t >= this.x && t <= this.x + this.width && e >= this.y && e <= this.y + this.height) {
            var i = Math.max(0, Math.min(this.radius, Math.min(this.width, this.height) / 2));
            if (e >= this.y + i && e <= this.y + this.height - i || t >= this.x + i && t <= this.x + this.width - i)
                return !0;
            var r = t - (this.x + i)
              , n = e - (this.y + i)
              , o = i * i;
            if (r * r + n * n <= o)
                return !0;
            if ((r = t - (this.x + this.width - i)) * r + n * n <= o)
                return !0;
            if (r * r + (n = e - (this.y + this.height - i)) * n <= o)
                return !0;
            if ((r = t - (this.x + i)) * r + n * n <= o)
                return !0
        }
        return !1
    }
    ,
    RoundedRectangle.prototype.toString = function() {
        return "[@pixi/math:RoundedRectangle x=" + this.x + " y=" + this.y + "width=" + this.width + " height=" + this.height + " radius=" + this.radius + "]"
    }
    ,
    RoundedRectangle);
    function RoundedRectangle(t, e, i, r, n) {
        void 0 === t && (t = 0),
        void 0 === e && (e = 0),
        void 0 === i && (i = 0),
        void 0 === r && (r = 0),
        void 0 === n && (n = 20),
        this.x = t,
        this.y = e,
        this.width = i,
        this.height = r,
        this.radius = n,
        this.type = rt.SHAPES.RREC
    }
    var Ie = (ObservablePoint.prototype.clone = function(t, e) {
        return void 0 === t && (t = this.cb),
        void 0 === e && (e = this.scope),
        new ObservablePoint(t,e,this._x,this._y)
    }
    ,
    ObservablePoint.prototype.set = function(t, e) {
        return void 0 === t && (t = 0),
        void 0 === e && (e = t),
        this._x === t && this._y === e || (this._x = t,
        this._y = e,
        this.cb.call(this.scope)),
        this
    }
    ,
    ObservablePoint.prototype.copyFrom = function(t) {
        return this._x === t.x && this._y === t.y || (this._x = t.x,
        this._y = t.y,
        this.cb.call(this.scope)),
        this
    }
    ,
    ObservablePoint.prototype.copyTo = function(t) {
        return t.set(this._x, this._y),
        t
    }
    ,
    ObservablePoint.prototype.equals = function(t) {
        return t.x === this._x && t.y === this._y
    }
    ,
    ObservablePoint.prototype.toString = function() {
        return "[@pixi/math:ObservablePoint x=0 y=0 scope=" + this.scope + "]"
    }
    ,
    Object.defineProperty(ObservablePoint.prototype, "x", {
        get: function() {
            return this._x
        },
        set: function(t) {
            this._x !== t && (this._x = t,
            this.cb.call(this.scope))
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(ObservablePoint.prototype, "y", {
        get: function() {
            return this._y
        },
        set: function(t) {
            this._y !== t && (this._y = t,
            this.cb.call(this.scope))
        },
        enumerable: !1,
        configurable: !0
    }),
    ObservablePoint);
    function ObservablePoint(t, e, i, r) {
        void 0 === i && (i = 0),
        void 0 === r && (r = 0),
        this._x = i,
        this._y = r,
        this.cb = t,
        this.scope = e
    }
    var Ce = (Matrix.prototype.fromArray = function(t) {
        this.a = t[0],
        this.b = t[1],
        this.c = t[3],
        this.d = t[4],
        this.tx = t[2],
        this.ty = t[5]
    }
    ,
    Matrix.prototype.set = function(t, e, i, r, n, o) {
        return this.a = t,
        this.b = e,
        this.c = i,
        this.d = r,
        this.tx = n,
        this.ty = o,
        this
    }
    ,
    Matrix.prototype.toArray = function(t, e) {
        this.array || (this.array = new Float32Array(9));
        var i = e || this.array;
        return t ? (i[0] = this.a,
        i[1] = this.b,
        i[2] = 0,
        i[3] = this.c,
        i[4] = this.d,
        i[5] = 0,
        i[6] = this.tx,
        i[7] = this.ty) : (i[0] = this.a,
        i[1] = this.c,
        i[2] = this.tx,
        i[3] = this.b,
        i[4] = this.d,
        i[5] = this.ty,
        i[6] = 0,
        i[7] = 0),
        i[8] = 1,
        i
    }
    ,
    Matrix.prototype.apply = function(t, e) {
        e = e || new me;
        var i = t.x
          , r = t.y;
        return e.x = this.a * i + this.c * r + this.tx,
        e.y = this.b * i + this.d * r + this.ty,
        e
    }
    ,
    Matrix.prototype.applyInverse = function(t, e) {
        e = e || new me;
        var i = 1 / (this.a * this.d + this.c * -this.b)
          , r = t.x
          , n = t.y;
        return e.x = this.d * i * r + -this.c * i * n + (this.ty * this.c - this.tx * this.d) * i,
        e.y = this.a * i * n + -this.b * i * r + (-this.ty * this.a + this.tx * this.b) * i,
        e
    }
    ,
    Matrix.prototype.translate = function(t, e) {
        return this.tx += t,
        this.ty += e,
        this
    }
    ,
    Matrix.prototype.scale = function(t, e) {
        return this.a *= t,
        this.d *= e,
        this.c *= t,
        this.b *= e,
        this.tx *= t,
        this.ty *= e,
        this
    }
    ,
    Matrix.prototype.rotate = function(t) {
        var e = Math.cos(t)
          , i = Math.sin(t)
          , r = this.a
          , n = this.c
          , o = this.tx;
        return this.a = r * e - this.b * i,
        this.b = r * i + this.b * e,
        this.c = n * e - this.d * i,
        this.d = n * i + this.d * e,
        this.tx = o * e - this.ty * i,
        this.ty = o * i + this.ty * e,
        this
    }
    ,
    Matrix.prototype.append = function(t) {
        var e = this.a
          , i = this.b
          , r = this.c
          , n = this.d;
        return this.a = t.a * e + t.b * r,
        this.b = t.a * i + t.b * n,
        this.c = t.c * e + t.d * r,
        this.d = t.c * i + t.d * n,
        this.tx = t.tx * e + t.ty * r + this.tx,
        this.ty = t.tx * i + t.ty * n + this.ty,
        this
    }
    ,
    Matrix.prototype.setTransform = function(t, e, i, r, n, o, s, a, l) {
        return this.a = Math.cos(s + l) * n,
        this.b = Math.sin(s + l) * n,
        this.c = -Math.sin(s - a) * o,
        this.d = Math.cos(s - a) * o,
        this.tx = t - (i * this.a + r * this.c),
        this.ty = e - (i * this.b + r * this.d),
        this
    }
    ,
    Matrix.prototype.prepend = function(t) {
        var e = this.tx;
        if (1 !== t.a || 0 !== t.b || 0 !== t.c || 1 !== t.d) {
            var i = this.a
              , r = this.c;
            this.a = i * t.a + this.b * t.c,
            this.b = i * t.b + this.b * t.d,
            this.c = r * t.a + this.d * t.c,
            this.d = r * t.b + this.d * t.d
        }
        return this.tx = e * t.a + this.ty * t.c + t.tx,
        this.ty = e * t.b + this.ty * t.d + t.ty,
        this
    }
    ,
    Matrix.prototype.decompose = function(t) {
        var e = this.a
          , i = this.b
          , r = this.c
          , n = this.d
          , o = t.pivot
          , s = -Math.atan2(-r, n)
          , a = Math.atan2(i, e)
          , l = Math.abs(s + a);
        return l < 1e-5 || Math.abs(_e - l) < 1e-5 ? (t.rotation = a,
        t.skew.x = t.skew.y = 0) : (t.rotation = 0,
        t.skew.x = s,
        t.skew.y = a),
        t.scale.x = Math.sqrt(e * e + i * i),
        t.scale.y = Math.sqrt(r * r + n * n),
        t.position.x = this.tx + (o.x * e + o.y * r),
        t.position.y = this.ty + (o.x * i + o.y * n),
        t
    }
    ,
    Matrix.prototype.invert = function() {
        var t = this.a
          , e = this.b
          , i = this.c
          , r = this.d
          , n = this.tx
          , o = t * r - e * i;
        return this.a = r / o,
        this.b = -e / o,
        this.c = -i / o,
        this.d = t / o,
        this.tx = (i * this.ty - r * n) / o,
        this.ty = -(t * this.ty - e * n) / o,
        this
    }
    ,
    Matrix.prototype.identity = function() {
        return this.a = 1,
        this.b = 0,
        this.c = 0,
        this.d = 1,
        this.tx = 0,
        this.ty = 0,
        this
    }
    ,
    Matrix.prototype.clone = function() {
        var t = new Matrix;
        return t.a = this.a,
        t.b = this.b,
        t.c = this.c,
        t.d = this.d,
        t.tx = this.tx,
        t.ty = this.ty,
        t
    }
    ,
    Matrix.prototype.copyTo = function(t) {
        return t.a = this.a,
        t.b = this.b,
        t.c = this.c,
        t.d = this.d,
        t.tx = this.tx,
        t.ty = this.ty,
        t
    }
    ,
    Matrix.prototype.copyFrom = function(t) {
        return this.a = t.a,
        this.b = t.b,
        this.c = t.c,
        this.d = t.d,
        this.tx = t.tx,
        this.ty = t.ty,
        this
    }
    ,
    Matrix.prototype.toString = function() {
        return "[@pixi/math:Matrix a=" + this.a + " b=" + this.b + " c=" + this.c + " d=" + this.d + " tx=" + this.tx + " ty=" + this.ty + "]"
    }
    ,
    Object.defineProperty(Matrix, "IDENTITY", {
        get: function() {
            return new Matrix
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Matrix, "TEMP_MATRIX", {
        get: function() {
            return new Matrix
        },
        enumerable: !1,
        configurable: !0
    }),
    Matrix);
    function Matrix(t, e, i, r, n, o) {
        void 0 === t && (t = 1),
        void 0 === e && (e = 0),
        void 0 === i && (i = 0),
        void 0 === r && (r = 1),
        void 0 === n && (n = 0),
        void 0 === o && (o = 0),
        this.array = null,
        this.a = t,
        this.b = e,
        this.c = i,
        this.d = r,
        this.tx = n,
        this.ty = o
    }
    var Ue = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1]
      , Ae = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1]
      , we = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1]
      , Oe = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1]
      , Re = []
      , Pe = []
      , De = Math.sign;
    !function init() {
        for (var t = 0; t < 16; t++) {
            var e = [];
            Re.push(e);
            for (var i = 0; i < 16; i++)
                for (var r = De(Ue[t] * Ue[i] + we[t] * Ae[i]), n = De(Ae[t] * Ue[i] + Oe[t] * Ae[i]), o = De(Ue[t] * we[i] + we[t] * Oe[i]), s = De(Ae[t] * we[i] + Oe[t] * Oe[i]), a = 0; a < 16; a++)
                    if (Ue[a] === r && Ae[a] === n && we[a] === o && Oe[a] === s) {
                        e.push(a);
                        break
                    }
        }
        for (t = 0; t < 16; t++) {
            var l = new Ce;
            l.set(Ue[t], Ae[t], we[t], Oe[t], 0, 0),
            Pe.push(l)
        }
    }();
    var Le = {
        E: 0,
        SE: 1,
        S: 2,
        SW: 3,
        W: 4,
        NW: 5,
        N: 6,
        NE: 7,
        MIRROR_VERTICAL: 8,
        MAIN_DIAGONAL: 10,
        MIRROR_HORIZONTAL: 12,
        REVERSE_DIAGONAL: 14,
        uX: function(t) {
            return Ue[t]
        },
        uY: function(t) {
            return Ae[t]
        },
        vX: function(t) {
            return we[t]
        },
        vY: function(t) {
            return Oe[t]
        },
        inv: function(t) {
            return 8 & t ? 15 & t : 7 & -t
        },
        add: function(t, e) {
            return Re[t][e]
        },
        sub: function(t, e) {
            return Re[t][Le.inv(e)]
        },
        rotate180: function(t) {
            return 4 ^ t
        },
        isVertical: function(t) {
            return 2 == (3 & t)
        },
        byDirection: function(t, e) {
            return 2 * Math.abs(t) <= Math.abs(e) ? 0 <= e ? Le.S : Le.N : 2 * Math.abs(e) <= Math.abs(t) ? 0 < t ? Le.E : Le.W : 0 < e ? 0 < t ? Le.SE : Le.SW : 0 < t ? Le.NE : Le.NW
        },
        matrixAppendRotationInv: function(t, e, i, r) {
            void 0 === i && (i = 0),
            void 0 === r && (r = 0);
            var n = Pe[Le.inv(e)];
            n.tx = i,
            n.ty = r,
            t.append(n)
        }
    }
      , Ne = (Transform.prototype.onChange = function() {
        this._localID++
    }
    ,
    Transform.prototype.updateSkew = function() {
        this._cx = Math.cos(this._rotation + this.skew.y),
        this._sx = Math.sin(this._rotation + this.skew.y),
        this._cy = -Math.sin(this._rotation - this.skew.x),
        this._sy = Math.cos(this._rotation - this.skew.x),
        this._localID++
    }
    ,
    Transform.prototype.toString = function() {
        return "[@pixi/math:Transform position=(" + this.position.x + ", " + this.position.y + ") rotation=" + this.rotation + " scale=(" + this.scale.x + ", " + this.scale.y + ") skew=(" + this.skew.x + ", " + this.skew.y + ") ]"
    }
    ,
    Transform.prototype.updateLocalTransform = function() {
        var t = this.localTransform;
        this._localID !== this._currentLocalID && (t.a = this._cx * this.scale.x,
        t.b = this._sx * this.scale.x,
        t.c = this._cy * this.scale.y,
        t.d = this._sy * this.scale.y,
        t.tx = this.position.x - (this.pivot.x * t.a + this.pivot.y * t.c),
        t.ty = this.position.y - (this.pivot.x * t.b + this.pivot.y * t.d),
        this._currentLocalID = this._localID,
        this._parentID = -1)
    }
    ,
    Transform.prototype.updateTransform = function(t) {
        var e = this.localTransform;
        if (this._localID !== this._currentLocalID && (e.a = this._cx * this.scale.x,
        e.b = this._sx * this.scale.x,
        e.c = this._cy * this.scale.y,
        e.d = this._sy * this.scale.y,
        e.tx = this.position.x - (this.pivot.x * e.a + this.pivot.y * e.c),
        e.ty = this.position.y - (this.pivot.x * e.b + this.pivot.y * e.d),
        this._currentLocalID = this._localID,
        this._parentID = -1),
        this._parentID !== t._worldID) {
            var i = t.worldTransform
              , r = this.worldTransform;
            r.a = e.a * i.a + e.b * i.c,
            r.b = e.a * i.b + e.b * i.d,
            r.c = e.c * i.a + e.d * i.c,
            r.d = e.c * i.b + e.d * i.d,
            r.tx = e.tx * i.a + e.ty * i.c + i.tx,
            r.ty = e.tx * i.b + e.ty * i.d + i.ty,
            this._parentID = t._worldID,
            this._worldID++
        }
    }
    ,
    Transform.prototype.setFromMatrix = function(t) {
        t.decompose(this),
        this._localID++
    }
    ,
    Object.defineProperty(Transform.prototype, "rotation", {
        get: function() {
            return this._rotation
        },
        set: function(t) {
            this._rotation !== t && (this._rotation = t,
            this.updateSkew())
        },
        enumerable: !1,
        configurable: !0
    }),
    Transform.IDENTITY = new Transform,
    Transform);
    function Transform() {
        this.worldTransform = new Ce,
        this.localTransform = new Ce,
        this.position = new Ie(this.onChange,this,0,0),
        this.scale = new Ie(this.onChange,this,1,1),
        this.pivot = new Ie(this.onChange,this,0,0),
        this.skew = new Ie(this.updateSkew,this,0,0),
        this._rotation = 0,
        this._cx = 1,
        this._sx = 0,
        this._cy = 0,
        this._sy = 1,
        this._localID = 0,
        this._currentLocalID = 0,
        this._worldID = 0,
        this._parentID = 0
    }
    pt.SORTABLE_CHILDREN = !1;
    var xe = (Bounds.prototype.isEmpty = function() {
        return this.minX > this.maxX || this.minY > this.maxY
    }
    ,
    Bounds.prototype.clear = function() {
        this.minX = 1 / 0,
        this.minY = 1 / 0,
        this.maxX = -1 / 0,
        this.maxY = -1 / 0
    }
    ,
    Bounds.prototype.getRectangle = function(t) {
        return this.minX > this.maxX || this.minY > this.maxY ? ge.EMPTY : ((t = t || new ge(0,0,1,1)).x = this.minX,
        t.y = this.minY,
        t.width = this.maxX - this.minX,
        t.height = this.maxY - this.minY,
        t)
    }
    ,
    Bounds.prototype.addPoint = function(t) {
        this.minX = Math.min(this.minX, t.x),
        this.maxX = Math.max(this.maxX, t.x),
        this.minY = Math.min(this.minY, t.y),
        this.maxY = Math.max(this.maxY, t.y)
    }
    ,
    Bounds.prototype.addPointMatrix = function(t, e) {
        var i = t.a
          , r = t.b
          , n = t.c
          , o = t.d
          , s = t.tx
          , a = t.ty
          , l = i * e.x + n * e.y + s
          , c = r * e.x + o * e.y + a;
        this.minX = Math.min(this.minX, l),
        this.maxX = Math.max(this.maxX, l),
        this.minY = Math.min(this.minY, c),
        this.maxY = Math.max(this.maxY, c)
    }
    ,
    Bounds.prototype.addQuad = function(t) {
        var e = this.minX
          , i = this.minY
          , r = this.maxX
          , n = this.maxY
          , o = t[0]
          , s = t[1];
        e = o < e ? o : e,
        i = s < i ? s : i,
        r = r < o ? o : r,
        n = n < s ? s : n,
        e = (o = t[2]) < e ? o : e,
        i = (s = t[3]) < i ? s : i,
        r = r < o ? o : r,
        n = n < s ? s : n,
        e = (o = t[4]) < e ? o : e,
        i = (s = t[5]) < i ? s : i,
        r = r < o ? o : r,
        n = n < s ? s : n,
        e = (o = t[6]) < e ? o : e,
        i = (s = t[7]) < i ? s : i,
        r = r < o ? o : r,
        n = n < s ? s : n,
        this.minX = e,
        this.minY = i,
        this.maxX = r,
        this.maxY = n
    }
    ,
    Bounds.prototype.addFrame = function(t, e, i, r, n) {
        this.addFrameMatrix(t.worldTransform, e, i, r, n)
    }
    ,
    Bounds.prototype.addFrameMatrix = function(t, e, i, r, n) {
        var o = t.a
          , s = t.b
          , a = t.c
          , l = t.d
          , c = t.tx
          , u = t.ty
          , p = this.minX
          , h = this.minY
          , d = this.maxX
          , _ = this.maxY
          , y = o * e + a * i + c
          , f = s * e + l * i + u;
        p = y < p ? y : p,
        h = f < h ? f : h,
        d = d < y ? y : d,
        _ = _ < f ? f : _,
        p = (y = o * r + a * i + c) < p ? y : p,
        h = (f = s * r + l * i + u) < h ? f : h,
        d = d < y ? y : d,
        _ = _ < f ? f : _,
        p = (y = o * e + a * n + c) < p ? y : p,
        h = (f = s * e + l * n + u) < h ? f : h,
        d = d < y ? y : d,
        _ = _ < f ? f : _,
        p = (y = o * r + a * n + c) < p ? y : p,
        h = (f = s * r + l * n + u) < h ? f : h,
        d = d < y ? y : d,
        _ = _ < f ? f : _,
        this.minX = p,
        this.minY = h,
        this.maxX = d,
        this.maxY = _
    }
    ,
    Bounds.prototype.addVertexData = function(t, e, i) {
        for (var r = this.minX, n = this.minY, o = this.maxX, s = this.maxY, a = e; a < i; a += 2) {
            var l = t[a]
              , c = t[a + 1];
            r = l < r ? l : r,
            n = c < n ? c : n,
            o = o < l ? l : o,
            s = s < c ? c : s
        }
        this.minX = r,
        this.minY = n,
        this.maxX = o,
        this.maxY = s
    }
    ,
    Bounds.prototype.addVertices = function(t, e, i, r) {
        this.addVerticesMatrix(t.worldTransform, e, i, r)
    }
    ,
    Bounds.prototype.addVerticesMatrix = function(t, e, i, r, n, o) {
        void 0 === n && (n = 0),
        void 0 === o && (o = n);
        for (var s = t.a, a = t.b, l = t.c, c = t.d, u = t.tx, p = t.ty, h = this.minX, d = this.minY, _ = this.maxX, y = this.maxY, f = i; f < r; f += 2) {
            var m = e[f]
              , T = e[f + 1]
              , g = s * m + l * T + u
              , v = c * T + a * m + p;
            h = Math.min(h, g - n),
            _ = Math.max(_, g + n),
            d = Math.min(d, v - o),
            y = Math.max(y, v + o)
        }
        this.minX = h,
        this.minY = d,
        this.maxX = _,
        this.maxY = y
    }
    ,
    Bounds.prototype.addBounds = function(t) {
        var e = this.minX
          , i = this.minY
          , r = this.maxX
          , n = this.maxY;
        this.minX = t.minX < e ? t.minX : e,
        this.minY = t.minY < i ? t.minY : i,
        this.maxX = t.maxX > r ? t.maxX : r,
        this.maxY = t.maxY > n ? t.maxY : n
    }
    ,
    Bounds.prototype.addBoundsMask = function(t, e) {
        var i = t.minX > e.minX ? t.minX : e.minX
          , r = t.minY > e.minY ? t.minY : e.minY
          , n = t.maxX < e.maxX ? t.maxX : e.maxX
          , o = t.maxY < e.maxY ? t.maxY : e.maxY;
        if (i <= n && r <= o) {
            var s = this.minX
              , a = this.minY
              , l = this.maxX
              , c = this.maxY;
            this.minX = i < s ? i : s,
            this.minY = r < a ? r : a,
            this.maxX = l < n ? n : l,
            this.maxY = c < o ? o : c
        }
    }
    ,
    Bounds.prototype.addBoundsMatrix = function(t, e) {
        this.addFrameMatrix(e, t.minX, t.minY, t.maxX, t.maxY)
    }
    ,
    Bounds.prototype.addBoundsArea = function(t, e) {
        var i = t.minX > e.x ? t.minX : e.x
          , r = t.minY > e.y ? t.minY : e.y
          , n = t.maxX < e.x + e.width ? t.maxX : e.x + e.width
          , o = t.maxY < e.y + e.height ? t.maxY : e.y + e.height;
        if (i <= n && r <= o) {
            var s = this.minX
              , a = this.minY
              , l = this.maxX
              , c = this.maxY;
            this.minX = i < s ? i : s,
            this.minY = r < a ? r : a,
            this.maxX = l < n ? n : l,
            this.maxY = c < o ? o : c
        }
    }
    ,
    Bounds.prototype.pad = function(t, e) {
        void 0 === t && (t = 0),
        void 0 === e && (e = t),
        this.isEmpty() || (this.minX -= t,
        this.maxX += t,
        this.minY -= e,
        this.maxY += e)
    }
    ,
    Bounds.prototype.addFramePad = function(t, e, i, r, n, o) {
        t -= n,
        e -= o,
        i += n,
        r += o,
        this.minX = this.minX < t ? this.minX : t,
        this.maxX = this.maxX > i ? this.maxX : i,
        this.minY = this.minY < e ? this.minY : e,
        this.maxY = this.maxY > r ? this.maxY : r
    }
    ,
    Bounds);
    function Bounds() {
        this.minX = 1 / 0,
        this.minY = 1 / 0,
        this.maxX = -1 / 0,
        this.maxY = -1 / 0,
        this.rect = null,
        this.updateID = -1
    }
    var Me = function(t, e) {
        return (Me = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    function __extends$j(t, e) {
        function __() {
            this.constructor = t
        }
        Me(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
    var Ve, Be = (__extends$j(DisplayObject, Ve = dt),
    DisplayObject.mixin = function(t) {
        for (var e = Object.keys(t), i = 0; i < e.length; ++i) {
            var r = e[i];
            Object.defineProperty(DisplayObject.prototype, r, Object.getOwnPropertyDescriptor(t, r))
        }
    }
    ,
    Object.defineProperty(DisplayObject.prototype, "destroyed", {
        get: function() {
            return this._destroyed
        },
        enumerable: !1,
        configurable: !0
    }),
    DisplayObject.prototype._recursivePostUpdateTransform = function() {
        this.parent ? (this.parent._recursivePostUpdateTransform(),
        this.transform.updateTransform(this.parent.transform)) : this.transform.updateTransform(this._tempDisplayObjectParent.transform)
    }
    ,
    DisplayObject.prototype.updateTransform = function() {
        this._boundsID++,
        this.transform.updateTransform(this.parent.transform),
        this.worldAlpha = this.alpha * this.parent.worldAlpha
    }
    ,
    DisplayObject.prototype.getBounds = function(t, e) {
        return t || (this.parent ? (this._recursivePostUpdateTransform(),
        this.updateTransform()) : (this.parent = this._tempDisplayObjectParent,
        this.updateTransform(),
        this.parent = null)),
        this._bounds.updateID !== this._boundsID && (this.calculateBounds(),
        this._bounds.updateID = this._boundsID),
        e || (this._boundsRect || (this._boundsRect = new ge),
        e = this._boundsRect),
        this._bounds.getRectangle(e)
    }
    ,
    DisplayObject.prototype.getLocalBounds = function(t) {
        t || (this._localBoundsRect || (this._localBoundsRect = new ge),
        t = this._localBoundsRect),
        this._localBounds || (this._localBounds = new xe);
        var e = this.transform
          , i = this.parent;
        this.parent = null,
        this.transform = this._tempDisplayObjectParent.transform;
        var r = this._bounds
          , n = this._boundsID;
        this._bounds = this._localBounds;
        var o = this.getBounds(!1, t);
        return this.parent = i,
        this.transform = e,
        this._bounds = r,
        this._bounds.updateID += this._boundsID - n,
        o
    }
    ,
    DisplayObject.prototype.toGlobal = function(t, e, i) {
        return void 0 === i && (i = !1),
        i || (this._recursivePostUpdateTransform(),
        this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent,
        this.displayObjectUpdateTransform(),
        this.parent = null)),
        this.worldTransform.apply(t, e)
    }
    ,
    DisplayObject.prototype.toLocal = function(t, e, i, r) {
        return e && (t = e.toGlobal(t, i, r)),
        r || (this._recursivePostUpdateTransform(),
        this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent,
        this.displayObjectUpdateTransform(),
        this.parent = null)),
        this.worldTransform.applyInverse(t, i)
    }
    ,
    DisplayObject.prototype.setParent = function(t) {
        if (!t || !t.addChild)
            throw new Error("setParent: Argument must be a Container");
        return t.addChild(this),
        t
    }
    ,
    DisplayObject.prototype.setTransform = function(t, e, i, r, n, o, s, a, l) {
        return void 0 === t && (t = 0),
        void 0 === e && (e = 0),
        void 0 === i && (i = 1),
        void 0 === r && (r = 1),
        void 0 === n && (n = 0),
        void 0 === o && (o = 0),
        void 0 === s && (s = 0),
        void 0 === a && (a = 0),
        void 0 === l && (l = 0),
        this.position.x = t,
        this.position.y = e,
        this.scale.x = i || 1,
        this.scale.y = r || 1,
        this.rotation = n,
        this.skew.x = o,
        this.skew.y = s,
        this.pivot.x = a,
        this.pivot.y = l,
        this
    }
    ,
    DisplayObject.prototype.destroy = function(t) {
        this.parent && this.parent.removeChild(this),
        this.emit("destroyed"),
        this.removeAllListeners(),
        this.transform = null,
        this.parent = null,
        this._bounds = null,
        this.mask = null,
        this.cullArea = null,
        this.filters = null,
        this.filterArea = null,
        this.hitArea = null,
        this.interactive = !1,
        this.interactiveChildren = !1,
        this._destroyed = !0
    }
    ,
    Object.defineProperty(DisplayObject.prototype, "_tempDisplayObjectParent", {
        get: function() {
            return null === this.tempDisplayObjectParent && (this.tempDisplayObjectParent = new Ii),
            this.tempDisplayObjectParent
        },
        enumerable: !1,
        configurable: !0
    }),
    DisplayObject.prototype.enableTempParent = function() {
        var t = this.parent;
        return this.parent = this._tempDisplayObjectParent,
        t
    }
    ,
    DisplayObject.prototype.disableTempParent = function(t) {
        this.parent = t
    }
    ,
    Object.defineProperty(DisplayObject.prototype, "x", {
        get: function() {
            return this.position.x
        },
        set: function(t) {
            this.transform.position.x = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "y", {
        get: function() {
            return this.position.y
        },
        set: function(t) {
            this.transform.position.y = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "worldTransform", {
        get: function() {
            return this.transform.worldTransform
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "localTransform", {
        get: function() {
            return this.transform.localTransform
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "position", {
        get: function() {
            return this.transform.position
        },
        set: function(t) {
            this.transform.position.copyFrom(t)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "scale", {
        get: function() {
            return this.transform.scale
        },
        set: function(t) {
            this.transform.scale.copyFrom(t)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "pivot", {
        get: function() {
            return this.transform.pivot
        },
        set: function(t) {
            this.transform.pivot.copyFrom(t)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "skew", {
        get: function() {
            return this.transform.skew
        },
        set: function(t) {
            this.transform.skew.copyFrom(t)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "rotation", {
        get: function() {
            return this.transform.rotation
        },
        set: function(t) {
            this.transform.rotation = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "angle", {
        get: function() {
            return this.transform.rotation * ye
        },
        set: function(t) {
            this.transform.rotation = t * fe
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "zIndex", {
        get: function() {
            return this._zIndex
        },
        set: function(t) {
            this._zIndex = t,
            this.parent && (this.parent.sortDirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "worldVisible", {
        get: function() {
            var t = this;
            do {
                if (!t.visible)
                    return !1;
                t = t.parent
            } while (t);
            return !0
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "mask", {
        get: function() {
            return this._mask
        },
        set: function(t) {
            var e;
            this._mask !== t && (this._mask && ((e = this._mask.maskObject || this._mask)._maskRefCount--,
            0 === e._maskRefCount && (e.renderable = !0,
            e.isMask = !1)),
            this._mask = t,
            this._mask && (0 === (e = this._mask.maskObject || this._mask)._maskRefCount && (e.renderable = !1,
            e.isMask = !0),
            e._maskRefCount++))
        },
        enumerable: !1,
        configurable: !0
    }),
    DisplayObject);
    function DisplayObject() {
        var t = Ve.call(this) || this;
        return t.tempDisplayObjectParent = null,
        t.transform = new Ne,
        t.alpha = 1,
        t.visible = !0,
        t.renderable = !0,
        t.cullable = !1,
        t.cullArea = null,
        t.parent = null,
        t.worldAlpha = 1,
        t._lastSortedIndex = 0,
        t._zIndex = 0,
        t.filterArea = null,
        t.filters = null,
        t._enabledFilters = null,
        t._bounds = new xe,
        t._localBounds = null,
        t._boundsID = 0,
        t._boundsRect = null,
        t._localBoundsRect = null,
        t._mask = null,
        t._maskRefCount = 0,
        t._destroyed = !1,
        t.isSprite = !1,
        t.isMask = !1,
        t
    }
    var Fe, Ge, ke, je, He, qe, Ye, ze, Ke, Xe, We, Je, Qe, Ze, $e, ti, ei, ii, ri, ni, oi, si, ai, li, ci, ui, pi, hi, di, _i, yi, fi, mi, Ti, gi, vi, Ei, Si, bi, Ii = (__extends$j(TemporaryDisplayObject, Fe = Be),
    TemporaryDisplayObject);
    function TemporaryDisplayObject() {
        var t = null !== Fe && Fe.apply(this, arguments) || this;
        return t.sortDirty = null,
        t
    }
    function sortChildren(t, e) {
        return t.zIndex === e.zIndex ? t._lastSortedIndex - e._lastSortedIndex : t.zIndex - e.zIndex
    }
    Be.prototype.displayObjectUpdateTransform = Be.prototype.updateTransform,
    (ke = Ge = Ge || {})[ke.WEBGL_LEGACY = 0] = "WEBGL_LEGACY",
    ke[ke.WEBGL = 1] = "WEBGL",
    ke[ke.WEBGL2 = 2] = "WEBGL2",
    (He = je = je || {})[He.UNKNOWN = 0] = "UNKNOWN",
    He[He.WEBGL = 1] = "WEBGL",
    He[He.CANVAS = 2] = "CANVAS",
    (Ye = qe = qe || {})[Ye.COLOR = 16384] = "COLOR",
    Ye[Ye.DEPTH = 256] = "DEPTH",
    Ye[Ye.STENCIL = 1024] = "STENCIL",
    (Ke = ze = ze || {})[Ke.NORMAL = 0] = "NORMAL",
    Ke[Ke.ADD = 1] = "ADD",
    Ke[Ke.MULTIPLY = 2] = "MULTIPLY",
    Ke[Ke.SCREEN = 3] = "SCREEN",
    Ke[Ke.OVERLAY = 4] = "OVERLAY",
    Ke[Ke.DARKEN = 5] = "DARKEN",
    Ke[Ke.LIGHTEN = 6] = "LIGHTEN",
    Ke[Ke.COLOR_DODGE = 7] = "COLOR_DODGE",
    Ke[Ke.COLOR_BURN = 8] = "COLOR_BURN",
    Ke[Ke.HARD_LIGHT = 9] = "HARD_LIGHT",
    Ke[Ke.SOFT_LIGHT = 10] = "SOFT_LIGHT",
    Ke[Ke.DIFFERENCE = 11] = "DIFFERENCE",
    Ke[Ke.EXCLUSION = 12] = "EXCLUSION",
    Ke[Ke.HUE = 13] = "HUE",
    Ke[Ke.SATURATION = 14] = "SATURATION",
    Ke[Ke.COLOR = 15] = "COLOR",
    Ke[Ke.LUMINOSITY = 16] = "LUMINOSITY",
    Ke[Ke.NORMAL_NPM = 17] = "NORMAL_NPM",
    Ke[Ke.ADD_NPM = 18] = "ADD_NPM",
    Ke[Ke.SCREEN_NPM = 19] = "SCREEN_NPM",
    Ke[Ke.NONE = 20] = "NONE",
    Ke[Ke.SRC_OVER = 0] = "SRC_OVER",
    Ke[Ke.SRC_IN = 21] = "SRC_IN",
    Ke[Ke.SRC_OUT = 22] = "SRC_OUT",
    Ke[Ke.SRC_ATOP = 23] = "SRC_ATOP",
    Ke[Ke.DST_OVER = 24] = "DST_OVER",
    Ke[Ke.DST_IN = 25] = "DST_IN",
    Ke[Ke.DST_OUT = 26] = "DST_OUT",
    Ke[Ke.DST_ATOP = 27] = "DST_ATOP",
    Ke[Ke.ERASE = 26] = "ERASE",
    Ke[Ke.SUBTRACT = 28] = "SUBTRACT",
    Ke[Ke.XOR = 29] = "XOR",
    (We = Xe = Xe || {})[We.POINTS = 0] = "POINTS",
    We[We.LINES = 1] = "LINES",
    We[We.LINE_LOOP = 2] = "LINE_LOOP",
    We[We.LINE_STRIP = 3] = "LINE_STRIP",
    We[We.TRIANGLES = 4] = "TRIANGLES",
    We[We.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP",
    We[We.TRIANGLE_FAN = 6] = "TRIANGLE_FAN",
    (Qe = Je = Je || {})[Qe.RGBA = 6408] = "RGBA",
    Qe[Qe.RGB = 6407] = "RGB",
    Qe[Qe.RG = 33319] = "RG",
    Qe[Qe.RED = 6403] = "RED",
    Qe[Qe.RGBA_INTEGER = 36249] = "RGBA_INTEGER",
    Qe[Qe.RGB_INTEGER = 36248] = "RGB_INTEGER",
    Qe[Qe.RG_INTEGER = 33320] = "RG_INTEGER",
    Qe[Qe.RED_INTEGER = 36244] = "RED_INTEGER",
    Qe[Qe.ALPHA = 6406] = "ALPHA",
    Qe[Qe.LUMINANCE = 6409] = "LUMINANCE",
    Qe[Qe.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA",
    Qe[Qe.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT",
    Qe[Qe.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL",
    ($e = Ze = Ze || {})[$e.TEXTURE_2D = 3553] = "TEXTURE_2D",
    $e[$e.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP",
    $e[$e.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY",
    $e[$e.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X",
    $e[$e.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X",
    $e[$e.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y",
    $e[$e.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y",
    $e[$e.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z",
    $e[$e.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z",
    (ei = ti = ti || {})[ei.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE",
    ei[ei.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT",
    ei[ei.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5",
    ei[ei.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4",
    ei[ei.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1",
    ei[ei.UNSIGNED_INT = 5125] = "UNSIGNED_INT",
    ei[ei.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV",
    ei[ei.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV",
    ei[ei.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8",
    ei[ei.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV",
    ei[ei.BYTE = 5120] = "BYTE",
    ei[ei.SHORT = 5122] = "SHORT",
    ei[ei.INT = 5124] = "INT",
    ei[ei.FLOAT = 5126] = "FLOAT",
    ei[ei.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV",
    ei[ei.HALF_FLOAT = 36193] = "HALF_FLOAT",
    (ri = ii = ii || {})[ri.FLOAT = 0] = "FLOAT",
    ri[ri.INT = 1] = "INT",
    ri[ri.UINT = 2] = "UINT",
    (oi = ni = ni || {})[oi.NEAREST = 0] = "NEAREST",
    oi[oi.LINEAR = 1] = "LINEAR",
    (ai = si = si || {})[ai.CLAMP = 33071] = "CLAMP",
    ai[ai.REPEAT = 10497] = "REPEAT",
    ai[ai.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT",
    (ci = li = li || {})[ci.OFF = 0] = "OFF",
    ci[ci.POW2 = 1] = "POW2",
    ci[ci.ON = 2] = "ON",
    ci[ci.ON_MANUAL = 3] = "ON_MANUAL",
    (pi = ui = ui || {})[pi.NPM = 0] = "NPM",
    pi[pi.UNPACK = 1] = "UNPACK",
    pi[pi.PMA = 2] = "PMA",
    pi[pi.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA",
    pi[pi.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD",
    pi[pi.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA",
    pi[pi.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA",
    (di = hi = hi || {})[di.NO = 0] = "NO",
    di[di.YES = 1] = "YES",
    di[di.AUTO = 2] = "AUTO",
    di[di.BLEND = 0] = "BLEND",
    di[di.CLEAR = 1] = "CLEAR",
    di[di.BLIT = 2] = "BLIT",
    (yi = _i = _i || {})[yi.AUTO = 0] = "AUTO",
    yi[yi.MANUAL = 1] = "MANUAL",
    (mi = fi = fi || {}).LOW = "lowp",
    mi.MEDIUM = "mediump",
    mi.HIGH = "highp",
    (gi = Ti = Ti || {})[gi.NONE = 0] = "NONE",
    gi[gi.SCISSOR = 1] = "SCISSOR",
    gi[gi.STENCIL = 2] = "STENCIL",
    gi[gi.SPRITE = 3] = "SPRITE",
    (Ei = vi = vi || {})[Ei.NONE = 0] = "NONE",
    Ei[Ei.LOW = 2] = "LOW",
    Ei[Ei.MEDIUM = 4] = "MEDIUM",
    Ei[Ei.HIGH = 8] = "HIGH",
    (bi = Si = Si || {})[bi.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER",
    bi[bi.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER",
    bi[bi.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
    var Ci, Ui = (__extends$j(Container, Ci = Be),
    Container.prototype.onChildrenChange = function(t) {}
    ,
    Container.prototype.addChild = function() {
        for (var t = arguments, e = [], i = 0; i < arguments.length; i++)
            e[i] = t[i];
        if (1 < e.length)
            for (var r = 0; r < e.length; r++)
                this.addChild(e[r]);
        else {
            var n = e[0];
            n.parent && n.parent.removeChild(n),
            (n.parent = this).sortDirty = !0,
            n.transform._parentID = -1,
            this.children.push(n),
            this._boundsID++,
            this.onChildrenChange(this.children.length - 1),
            this.emit("childAdded", n, this, this.children.length - 1),
            n.emit("added", this)
        }
        return e[0]
    }
    ,
    Container.prototype.addChildAt = function(t, e) {
        if (e < 0 || e > this.children.length)
            throw new Error(t + "addChildAt: The index " + e + " supplied is out of bounds " + this.children.length);
        return t.parent && t.parent.removeChild(t),
        (t.parent = this).sortDirty = !0,
        t.transform._parentID = -1,
        this.children.splice(e, 0, t),
        this._boundsID++,
        this.onChildrenChange(e),
        t.emit("added", this),
        this.emit("childAdded", t, this, e),
        t
    }
    ,
    Container.prototype.swapChildren = function(t, e) {
        if (t !== e) {
            var i = this.getChildIndex(t)
              , r = this.getChildIndex(e);
            this.children[i] = e,
            this.children[r] = t,
            this.onChildrenChange(i < r ? i : r)
        }
    }
    ,
    Container.prototype.getChildIndex = function(t) {
        var e = this.children.indexOf(t);
        if (-1 === e)
            throw new Error("The supplied DisplayObject must be a child of the caller");
        return e
    }
    ,
    Container.prototype.setChildIndex = function(t, e) {
        if (e < 0 || e >= this.children.length)
            throw new Error("The index " + e + " supplied is out of bounds " + this.children.length);
        var i = this.getChildIndex(t);
        removeItems(this.children, i, 1),
        this.children.splice(e, 0, t),
        this.onChildrenChange(e)
    }
    ,
    Container.prototype.getChildAt = function(t) {
        if (t < 0 || t >= this.children.length)
            throw new Error("getChildAt: Index (" + t + ") does not exist.");
        return this.children[t]
    }
    ,
    Container.prototype.removeChild = function() {
        for (var t = arguments, e = [], i = 0; i < arguments.length; i++)
            e[i] = t[i];
        if (1 < e.length)
            for (var r = 0; r < e.length; r++)
                this.removeChild(e[r]);
        else {
            var n = e[0]
              , o = this.children.indexOf(n);
            if (-1 === o)
                return null;
            n.parent = null,
            n.transform._parentID = -1,
            removeItems(this.children, o, 1),
            this._boundsID++,
            this.onChildrenChange(o),
            n.emit("removed", this),
            this.emit("childRemoved", n, this, o)
        }
        return e[0]
    }
    ,
    Container.prototype.removeChildAt = function(t) {
        var e = this.getChildAt(t);
        return e.parent = null,
        e.transform._parentID = -1,
        removeItems(this.children, t, 1),
        this._boundsID++,
        this.onChildrenChange(t),
        e.emit("removed", this),
        this.emit("childRemoved", e, this, t),
        e
    }
    ,
    Container.prototype.removeChildren = function(t, e) {
        void 0 === t && (t = 0),
        void 0 === e && (e = this.children.length);
        var i, r = t, n = e - r;
        if (0 < n && n <= e) {
            i = this.children.splice(r, n);
            for (var o = 0; o < i.length; ++o)
                i[o].parent = null,
                i[o].transform && (i[o].transform._parentID = -1);
            for (this._boundsID++,
            this.onChildrenChange(t),
            o = 0; o < i.length; ++o)
                i[o].emit("removed", this),
                this.emit("childRemoved", i[o], this, o);
            return i
        }
        if (0 == n && 0 === this.children.length)
            return [];
        throw new RangeError("removeChildren: numeric values are outside the acceptable range.")
    }
    ,
    Container.prototype.sortChildren = function() {
        for (var t = !1, e = 0, i = this.children.length; e < i; ++e) {
            var r = this.children[e];
            r._lastSortedIndex = e,
            t || 0 === r.zIndex || (t = !0)
        }
        t && 1 < this.children.length && this.children.sort(sortChildren),
        this.sortDirty = !1
    }
    ,
    Container.prototype.updateTransform = function() {
        this.sortableChildren && this.sortDirty && this.sortChildren(),
        this._boundsID++,
        this.transform.updateTransform(this.parent.transform),
        this.worldAlpha = this.alpha * this.parent.worldAlpha;
        for (var t = 0, e = this.children.length; t < e; ++t) {
            var i = this.children[t];
            i.visible && i.updateTransform()
        }
    }
    ,
    Container.prototype.calculateBounds = function() {
        this._bounds.clear(),
        this._calculateBounds();
        for (var t = 0; t < this.children.length; t++) {
            var e = this.children[t];
            if (e.visible && e.renderable)
                if (e.calculateBounds(),
                e._mask) {
                    var i = e._mask.maskObject || e._mask;
                    i.calculateBounds(),
                    this._bounds.addBoundsMask(e._bounds, i._bounds)
                } else
                    e.filterArea ? this._bounds.addBoundsArea(e._bounds, e.filterArea) : this._bounds.addBounds(e._bounds)
        }
        this._bounds.updateID = this._boundsID
    }
    ,
    Container.prototype.getLocalBounds = function(t, e) {
        void 0 === e && (e = !1);
        var i = Ci.prototype.getLocalBounds.call(this, t);
        if (!e)
            for (var r = 0, n = this.children.length; r < n; ++r) {
                var o = this.children[r];
                o.visible && o.updateTransform()
            }
        return i
    }
    ,
    Container.prototype._calculateBounds = function() {}
    ,
    Container.prototype._renderWithCulling = function(t) {
        var e = t.renderTexture.sourceFrame;
        if (0 < e.width && 0 < e.height) {
            var i, r;
            if (this.cullArea ? (i = this.cullArea,
            r = this.worldTransform) : this._render !== Container.prototype._render && (i = this.getBounds(!0)),
            i && e.intersects(i, r))
                this._render(t);
            else if (this.cullArea)
                return;
            for (var n = 0, o = this.children.length; n < o; ++n) {
                var s = this.children[n]
                  , a = s.cullable;
                s.cullable = a || !this.cullArea,
                s.render(t),
                s.cullable = a
            }
        }
    }
    ,
    Container.prototype.render = function(t) {
        if (this.visible && !(this.worldAlpha <= 0) && this.renderable)
            if (this._mask || this.filters && this.filters.length)
                this.renderAdvanced(t);
            else if (this.cullable)
                this._renderWithCulling(t);
            else {
                this._render(t);
                for (var e = 0, i = this.children.length; e < i; ++e)
                    this.children[e].render(t)
            }
    }
    ,
    Container.prototype.renderAdvanced = function(t) {
        var e = this.filters
          , i = this._mask;
        if (e) {
            this._enabledFilters || (this._enabledFilters = []);
            for (var r = this._enabledFilters.length = 0; r < e.length; r++)
                e[r].enabled && this._enabledFilters.push(e[r])
        }
        var n = e && this._enabledFilters && this._enabledFilters.length || i && (!i.isMaskData || i.enabled && (i.autoDetect || i.type !== Ti.NONE));
        if (n && t.batch.flush(),
        e && this._enabledFilters && this._enabledFilters.length && t.filter.push(this, this._enabledFilters),
        i && t.mask.push(this, this._mask),
        this.cullable)
            this._renderWithCulling(t);
        else {
            this._render(t),
            r = 0;
            for (var o = this.children.length; r < o; ++r)
                this.children[r].render(t)
        }
        n && t.batch.flush(),
        i && t.mask.pop(this),
        e && this._enabledFilters && this._enabledFilters.length && t.filter.pop()
    }
    ,
    Container.prototype._render = function(t) {}
    ,
    Container.prototype.destroy = function(t) {
        Ci.prototype.destroy.call(this),
        this.sortDirty = !1;
        var e = "boolean" == typeof t ? t : t && t.children
          , i = this.removeChildren(0, this.children.length);
        if (e)
            for (var r = 0; r < i.length; ++r)
                i[r].destroy(t)
    }
    ,
    Object.defineProperty(Container.prototype, "width", {
        get: function() {
            return this.scale.x * this.getLocalBounds().width
        },
        set: function(t) {
            var e = this.getLocalBounds().width;
            this.scale.x = 0 !== e ? t / e : 1,
            this._width = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Container.prototype, "height", {
        get: function() {
            return this.scale.y * this.getLocalBounds().height
        },
        set: function(t) {
            var e = this.getLocalBounds().height;
            this.scale.y = 0 !== e ? t / e : 1,
            this._height = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Container);
    function Container() {
        var t = Ci.call(this) || this;
        return t.children = [],
        t.sortableChildren = pt.SORTABLE_CHILDREN,
        t.sortDirty = !1,
        t
    }
    Ui.prototype.containerUpdateTransform = Ui.prototype.updateTransform;
    var Ai = {
        accessible: !1,
        accessibleTitle: null,
        accessibleHint: null,
        tabIndex: 0,
        _accessibleActive: !1,
        _accessibleDiv: null,
        accessibleType: "button",
        accessiblePointerEvents: "auto",
        accessibleChildren: !0,
        renderId: -1
    };
    Be.mixin(Ai);
    var wi, Oi = (Object.defineProperty(AccessibilityManager.prototype, "isActive", {
        get: function() {
            return this._isActive
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(AccessibilityManager.prototype, "isMobileAccessibility", {
        get: function() {
            return this._isMobileAccessibility
        },
        enumerable: !1,
        configurable: !0
    }),
    AccessibilityManager.prototype.createTouchHook = function() {
        var t = this
          , e = document.createElement("button");
        e.style.width = "1px",
        e.style.height = "1px",
        e.style.position = "absolute",
        e.style.top = "-1000px",
        e.style.left = "-1000px",
        e.style.zIndex = 2..toString(),
        e.style.backgroundColor = "#FF0000",
        e.title = "select to enable accessibility for this content",
        e.addEventListener("focus", function() {
            t._isMobileAccessibility = !0,
            t.activate(),
            t.destroyTouchHook()
        }),
        document.body.appendChild(e),
        this._hookDiv = e
    }
    ,
    AccessibilityManager.prototype.destroyTouchHook = function() {
        this._hookDiv && (document.body.removeChild(this._hookDiv),
        this._hookDiv = null)
    }
    ,
    AccessibilityManager.prototype.activate = function() {
        var t;
        this._isActive || (this._isActive = !0,
        globalThis.document.addEventListener("mousemove", this._onMouseMove, !0),
        globalThis.removeEventListener("keydown", this._onKeyDown, !1),
        this.renderer.on("postrender", this.update, this),
        null === (t = this.renderer.view.parentNode) || void 0 === t || t.appendChild(this.div))
    }
    ,
    AccessibilityManager.prototype.deactivate = function() {
        var t;
        this._isActive && !this._isMobileAccessibility && (this._isActive = !1,
        globalThis.document.removeEventListener("mousemove", this._onMouseMove, !0),
        globalThis.addEventListener("keydown", this._onKeyDown, !1),
        this.renderer.off("postrender", this.update),
        null === (t = this.div.parentNode) || void 0 === t || t.removeChild(this.div))
    }
    ,
    AccessibilityManager.prototype.updateAccessibleObjects = function(t) {
        if (t.visible && t.accessibleChildren) {
            t.accessible && t.interactive && (t._accessibleActive || this.addChild(t),
            t.renderId = this.renderId);
            var e = t.children;
            if (e)
                for (var i = 0; i < e.length; i++)
                    this.updateAccessibleObjects(e[i])
        }
    }
    ,
    AccessibilityManager.prototype.update = function() {
        var t = performance.now();
        if (!(ut.android.device && t < this.androidUpdateCount) && (this.androidUpdateCount = t + this.androidUpdateFrequency,
        this.renderer.renderingToScreen)) {
            this.renderer._lastObjectRendered && this.updateAccessibleObjects(this.renderer._lastObjectRendered);
            var e = this.renderer.view.getBoundingClientRect()
              , i = e.left
              , r = e.top
              , n = e.width
              , o = e.height
              , s = this.renderer
              , a = s.width
              , l = s.height
              , c = s.resolution
              , u = n / a * c
              , p = o / l * c
              , h = this.div;
            h.style.left = i + "px",
            h.style.top = r + "px",
            h.style.width = a + "px",
            h.style.height = l + "px";
            for (var d = 0; d < this.children.length; d++) {
                var _ = this.children[d];
                if (_.renderId !== this.renderId)
                    _._accessibleActive = !1,
                    removeItems(this.children, d, 1),
                    this.div.removeChild(_._accessibleDiv),
                    this.pool.push(_._accessibleDiv),
                    _._accessibleDiv = null,
                    d--;
                else {
                    h = _._accessibleDiv;
                    var y = _.hitArea
                      , f = _.worldTransform;
                    _.hitArea ? (h.style.left = (f.tx + y.x * f.a) * u + "px",
                    h.style.top = (f.ty + y.y * f.d) * p + "px",
                    h.style.width = y.width * f.a * u + "px",
                    h.style.height = y.height * f.d * p + "px") : (y = _.getBounds(),
                    this.capHitArea(y),
                    h.style.left = y.x * u + "px",
                    h.style.top = y.y * p + "px",
                    h.style.width = y.width * u + "px",
                    h.style.height = y.height * p + "px",
                    h.title !== _.accessibleTitle && null !== _.accessibleTitle && (h.title = _.accessibleTitle),
                    h.getAttribute("aria-label") !== _.accessibleHint && null !== _.accessibleHint && h.setAttribute("aria-label", _.accessibleHint)),
                    _.accessibleTitle === h.title && _.tabIndex === h.tabIndex || (h.title = _.accessibleTitle,
                    h.tabIndex = _.tabIndex,
                    this.debug && this.updateDebugHTML(h))
                }
            }
            this.renderId++
        }
    }
    ,
    AccessibilityManager.prototype.updateDebugHTML = function(t) {
        t.innerHTML = "type: " + t.type + "</br> title : " + t.title + "</br> tabIndex: " + t.tabIndex
    }
    ,
    AccessibilityManager.prototype.capHitArea = function(t) {
        t.x < 0 && (t.width += t.x,
        t.x = 0),
        t.y < 0 && (t.height += t.y,
        t.y = 0);
        var e = this.renderer
          , i = e.width
          , r = e.height;
        t.x + t.width > i && (t.width = i - t.x),
        t.y + t.height > r && (t.height = r - t.y)
    }
    ,
    AccessibilityManager.prototype.addChild = function(t) {
        var e = this.pool.pop();
        e || ((e = document.createElement("button")).style.width = "100px",
        e.style.height = "100px",
        e.style.backgroundColor = this.debug ? "rgba(255,255,255,0.5)" : "transparent",
        e.style.position = "absolute",
        e.style.zIndex = 2..toString(),
        e.style.borderStyle = "none",
        -1 < navigator.userAgent.toLowerCase().indexOf("chrome") ? e.setAttribute("aria-live", "off") : e.setAttribute("aria-live", "polite"),
        navigator.userAgent.match(/rv:.*Gecko\//) ? e.setAttribute("aria-relevant", "additions") : e.setAttribute("aria-relevant", "text"),
        e.addEventListener("click", this._onClick.bind(this)),
        e.addEventListener("focus", this._onFocus.bind(this)),
        e.addEventListener("focusout", this._onFocusOut.bind(this))),
        e.style.pointerEvents = t.accessiblePointerEvents,
        e.type = t.accessibleType,
        t.accessibleTitle && null !== t.accessibleTitle ? e.title = t.accessibleTitle : t.accessibleHint && null !== t.accessibleHint || (e.title = "displayObject " + t.tabIndex),
        t.accessibleHint && null !== t.accessibleHint && e.setAttribute("aria-label", t.accessibleHint),
        this.debug && this.updateDebugHTML(e),
        t._accessibleActive = !0,
        (t._accessibleDiv = e).displayObject = t,
        this.children.push(t),
        this.div.appendChild(t._accessibleDiv),
        t._accessibleDiv.tabIndex = t.tabIndex
    }
    ,
    AccessibilityManager.prototype._onClick = function(t) {
        var e = this.renderer.plugins.interaction
          , i = t.target.displayObject
          , r = e.eventData;
        e.dispatchEvent(i, "click", r),
        e.dispatchEvent(i, "pointertap", r),
        e.dispatchEvent(i, "tap", r)
    }
    ,
    AccessibilityManager.prototype._onFocus = function(t) {
        t.target.getAttribute("aria-live") || t.target.setAttribute("aria-live", "assertive");
        var e = this.renderer.plugins.interaction
          , i = t.target.displayObject
          , r = e.eventData;
        e.dispatchEvent(i, "mouseover", r)
    }
    ,
    AccessibilityManager.prototype._onFocusOut = function(t) {
        t.target.getAttribute("aria-live") || t.target.setAttribute("aria-live", "polite");
        var e = this.renderer.plugins.interaction
          , i = t.target.displayObject
          , r = e.eventData;
        e.dispatchEvent(i, "mouseout", r)
    }
    ,
    AccessibilityManager.prototype._onKeyDown = function(t) {
        9 === t.keyCode && this.activate()
    }
    ,
    AccessibilityManager.prototype._onMouseMove = function(t) {
        0 === t.movementX && 0 === t.movementY || this.deactivate()
    }
    ,
    AccessibilityManager.prototype.destroy = function() {
        this.destroyTouchHook(),
        this.div = null,
        globalThis.document.removeEventListener("mousemove", this._onMouseMove, !0),
        globalThis.removeEventListener("keydown", this._onKeyDown),
        this.pool = null,
        this.children = null,
        this.renderer = null
    }
    ,
    AccessibilityManager);
    function AccessibilityManager(t) {
        this.debug = !1,
        this._isActive = !1,
        this._isMobileAccessibility = !1,
        this.pool = [],
        this.renderId = 0,
        this.children = [],
        this.androidUpdateCount = 0,
        this.androidUpdateFrequency = 500,
        this._hookDiv = null,
        (ut.tablet || ut.phone) && this.createTouchHook();
        var e = document.createElement("div");
        e.style.width = "100px",
        e.style.height = "100px",
        e.style.position = "absolute",
        e.style.top = "0px",
        e.style.left = "0px",
        e.style.zIndex = 2..toString(),
        this.div = e,
        this.renderer = t,
        this._onKeyDown = this._onKeyDown.bind(this),
        this._onMouseMove = this._onMouseMove.bind(this),
        globalThis.addEventListener("keydown", this._onKeyDown, !1)
    }
    pt.TARGET_FPMS = .06,
    rt.UPDATE_PRIORITY = void 0,
    (wi = rt.UPDATE_PRIORITY || (rt.UPDATE_PRIORITY = {}))[wi.INTERACTION = 50] = "INTERACTION",
    wi[wi.HIGH = 25] = "HIGH",
    wi[wi.NORMAL = 0] = "NORMAL",
    wi[wi.LOW = -25] = "LOW",
    wi[wi.UTILITY = -50] = "UTILITY";
    var Ri = (TickerListener.prototype.match = function(t, e) {
        return void 0 === e && (e = null),
        this.fn === t && this.context === e
    }
    ,
    TickerListener.prototype.emit = function(t) {
        this.fn && (this.context ? this.fn.call(this.context, t) : this.fn(t));
        var e = this.next;
        return this.once && this.destroy(!0),
        this._destroyed && (this.next = null),
        e
    }
    ,
    TickerListener.prototype.connect = function(t) {
        (this.previous = t).next && (t.next.previous = this),
        this.next = t.next,
        t.next = this
    }
    ,
    TickerListener.prototype.destroy = function(t) {
        void 0 === t && (t = !1),
        this._destroyed = !0,
        this.fn = null,
        this.context = null,
        this.previous && (this.previous.next = this.next),
        this.next && (this.next.previous = this.previous);
        var e = this.next;
        return this.next = t ? null : e,
        this.previous = null,
        e
    }
    ,
    TickerListener);
    function TickerListener(t, e, i, r) {
        void 0 === e && (e = null),
        void 0 === i && (i = 0),
        void 0 === r && (r = !1),
        this.next = null,
        this.previous = null,
        this._destroyed = !1,
        this.fn = t,
        this.context = e,
        this.priority = i,
        this.once = r
    }
    var Pi = (Ticker.prototype._requestIfNeeded = function() {
        null === this._requestId && this._head.next && (this.lastTime = performance.now(),
        this._lastFrame = this.lastTime,
        this._requestId = requestAnimationFrame(this._tick))
    }
    ,
    Ticker.prototype._cancelIfNeeded = function() {
        null !== this._requestId && (cancelAnimationFrame(this._requestId),
        this._requestId = null)
    }
    ,
    Ticker.prototype._startIfPossible = function() {
        this.started ? this._requestIfNeeded() : this.autoStart && this.start()
    }
    ,
    Ticker.prototype.add = function(t, e, i) {
        return void 0 === i && (i = rt.UPDATE_PRIORITY.NORMAL),
        this._addListener(new Ri(t,e,i))
    }
    ,
    Ticker.prototype.addOnce = function(t, e, i) {
        return void 0 === i && (i = rt.UPDATE_PRIORITY.NORMAL),
        this._addListener(new Ri(t,e,i,!0))
    }
    ,
    Ticker.prototype._addListener = function(t) {
        var e = this._head.next
          , i = this._head;
        if (e) {
            for (; e; ) {
                if (t.priority > e.priority) {
                    t.connect(i);
                    break
                }
                e = (i = e).next
            }
            t.previous || t.connect(i)
        } else
            t.connect(i);
        return this._startIfPossible(),
        this
    }
    ,
    Ticker.prototype.remove = function(t, e) {
        for (var i = this._head.next; i; )
            i = i.match(t, e) ? i.destroy() : i.next;
        return this._head.next || this._cancelIfNeeded(),
        this
    }
    ,
    Object.defineProperty(Ticker.prototype, "count", {
        get: function() {
            if (!this._head)
                return 0;
            for (var t = 0, e = this._head; e = e.next; )
                t++;
            return t
        },
        enumerable: !1,
        configurable: !0
    }),
    Ticker.prototype.start = function() {
        this.started || (this.started = !0,
        this._requestIfNeeded())
    }
    ,
    Ticker.prototype.stop = function() {
        this.started && (this.started = !1,
        this._cancelIfNeeded())
    }
    ,
    Ticker.prototype.destroy = function() {
        if (!this._protected) {
            this.stop();
            for (var t = this._head.next; t; )
                t = t.destroy(!0);
            this._head.destroy(),
            this._head = null
        }
    }
    ,
    Ticker.prototype.update = function(t) {
        var e;
        if (void 0 === t && (t = performance.now()),
        t > this.lastTime) {
            if ((e = this.elapsedMS = t - this.lastTime) > this._maxElapsedMS && (e = this._maxElapsedMS),
            e *= this.speed,
            this._minElapsedMS) {
                var i = t - this._lastFrame | 0;
                if (i < this._minElapsedMS)
                    return;
                this._lastFrame = t - i % this._minElapsedMS
            }
            this.deltaMS = e,
            this.deltaTime = this.deltaMS * pt.TARGET_FPMS;
            for (var r = this._head, n = r.next; n; )
                n = n.emit(this.deltaTime);
            r.next || this._cancelIfNeeded()
        } else
            this.deltaTime = this.deltaMS = this.elapsedMS = 0;
        this.lastTime = t
    }
    ,
    Object.defineProperty(Ticker.prototype, "FPS", {
        get: function() {
            return 1e3 / this.elapsedMS
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Ticker.prototype, "minFPS", {
        get: function() {
            return 1e3 / this._maxElapsedMS
        },
        set: function(t) {
            var e = Math.min(this.maxFPS, t)
              , i = Math.min(Math.max(0, e) / 1e3, pt.TARGET_FPMS);
            this._maxElapsedMS = 1 / i
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Ticker.prototype, "maxFPS", {
        get: function() {
            return this._minElapsedMS ? Math.round(1e3 / this._minElapsedMS) : 0
        },
        set: function(t) {
            if (0 === t)
                this._minElapsedMS = 0;
            else {
                var e = Math.max(this.minFPS, t);
                this._minElapsedMS = 1 / (e / 1e3)
            }
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Ticker, "shared", {
        get: function() {
            if (!Ticker._shared) {
                var t = Ticker._shared = new Ticker;
                t.autoStart = !0,
                t._protected = !0
            }
            return Ticker._shared
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Ticker, "system", {
        get: function() {
            if (!Ticker._system) {
                var t = Ticker._system = new Ticker;
                t.autoStart = !0,
                t._protected = !0
            }
            return Ticker._system
        },
        enumerable: !1,
        configurable: !0
    }),
    Ticker);
    function Ticker() {
        var e = this;
        this.autoStart = !1,
        this.deltaTime = 1,
        this.lastTime = -1,
        this.speed = 1,
        this.started = !1,
        this._requestId = null,
        this._maxElapsedMS = 100,
        this._minElapsedMS = 0,
        this._protected = !1,
        this._lastFrame = -1,
        this._head = new Ri(null,null,1 / 0),
        this.deltaMS = 1 / pt.TARGET_FPMS,
        this.elapsedMS = 1 / pt.TARGET_FPMS,
        this._tick = function(t) {
            e._requestId = null,
            e.started && (e.update(t),
            e.started && null === e._requestId && e._head.next && (e._requestId = requestAnimationFrame(e._tick)))
        }
    }
    var Di = (TickerPlugin.init = function(t) {
        var e = this;
        t = Object.assign({
            autoStart: !0,
            sharedTicker: !1
        }, t),
        Object.defineProperty(this, "ticker", {
            set: function(t) {
                this._ticker && this._ticker.remove(this.render, this),
                (this._ticker = t) && t.add(this.render, this, rt.UPDATE_PRIORITY.LOW)
            },
            get: function() {
                return this._ticker
            }
        }),
        this.stop = function() {
            e._ticker.stop()
        }
        ,
        this.start = function() {
            e._ticker.start()
        }
        ,
        this._ticker = null,
        this.ticker = t.sharedTicker ? Pi.shared : new Pi,
        t.autoStart && this.start()
    }
    ,
    TickerPlugin.destroy = function() {
        if (this._ticker) {
            var t = this._ticker;
            this.ticker = null,
            t.destroy()
        }
    }
    ,
    TickerPlugin);
    function TickerPlugin() {}
    var Li = (Object.defineProperty(InteractionData.prototype, "pointerId", {
        get: function() {
            return this.identifier
        },
        enumerable: !1,
        configurable: !0
    }),
    InteractionData.prototype.getLocalPosition = function(t, e, i) {
        return t.worldTransform.applyInverse(i || this.global, e)
    }
    ,
    InteractionData.prototype.copyEvent = function(t) {
        "isPrimary"in t && t.isPrimary && (this.isPrimary = !0),
        this.button = "button"in t && t.button;
        var e = "buttons"in t && t.buttons;
        this.buttons = Number.isInteger(e) ? e : "which"in t && t.which,
        this.width = "width"in t && t.width,
        this.height = "height"in t && t.height,
        this.tiltX = "tiltX"in t && t.tiltX,
        this.tiltY = "tiltY"in t && t.tiltY,
        this.pointerType = "pointerType"in t && t.pointerType,
        this.pressure = "pressure"in t && t.pressure,
        this.rotationAngle = "rotationAngle"in t && t.rotationAngle,
        this.twist = "twist"in t && t.twist || 0,
        this.tangentialPressure = "tangentialPressure"in t && t.tangentialPressure || 0
    }
    ,
    InteractionData.prototype.reset = function() {
        this.isPrimary = !1
    }
    ,
    InteractionData);
    function InteractionData() {
        this.pressure = 0,
        this.rotationAngle = 0,
        this.twist = 0,
        this.tangentialPressure = 0,
        this.global = new me,
        this.target = null,
        this.originalEvent = null,
        this.identifier = null,
        this.isPrimary = !1,
        this.button = 0,
        this.buttons = 0,
        this.width = 0,
        this.height = 0,
        this.tiltX = 0,
        this.tiltY = 0,
        this.pointerType = null,
        this.pressure = 0,
        this.rotationAngle = 0,
        this.twist = 0,
        this.tangentialPressure = 0
    }
    var Ni = function(t, e) {
        return (Ni = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    var xi = (InteractionEvent.prototype.stopPropagation = function() {
        this.stopped = !0,
        this.stopPropagationHint = !0,
        this.stopsPropagatingAt = this.currentTarget
    }
    ,
    InteractionEvent.prototype.reset = function() {
        this.stopped = !1,
        this.stopsPropagatingAt = null,
        this.stopPropagationHint = !1,
        this.currentTarget = null,
        this.target = null
    }
    ,
    InteractionEvent);
    function InteractionEvent() {
        this.stopped = !1,
        this.stopsPropagatingAt = null,
        this.stopPropagationHint = !1,
        this.target = null,
        this.currentTarget = null,
        this.type = null,
        this.data = null
    }
    var Mi = (InteractionTrackingData.prototype._doSet = function(t, e) {
        this._flags = e ? this._flags | t : this._flags & ~t
    }
    ,
    Object.defineProperty(InteractionTrackingData.prototype, "pointerId", {
        get: function() {
            return this._pointerId
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(InteractionTrackingData.prototype, "flags", {
        get: function() {
            return this._flags
        },
        set: function(t) {
            this._flags = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(InteractionTrackingData.prototype, "none", {
        get: function() {
            return this._flags === InteractionTrackingData.FLAGS.NONE
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(InteractionTrackingData.prototype, "over", {
        get: function() {
            return 0 != (this._flags & InteractionTrackingData.FLAGS.OVER)
        },
        set: function(t) {
            this._doSet(InteractionTrackingData.FLAGS.OVER, t)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(InteractionTrackingData.prototype, "rightDown", {
        get: function() {
            return 0 != (this._flags & InteractionTrackingData.FLAGS.RIGHT_DOWN)
        },
        set: function(t) {
            this._doSet(InteractionTrackingData.FLAGS.RIGHT_DOWN, t)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(InteractionTrackingData.prototype, "leftDown", {
        get: function() {
            return 0 != (this._flags & InteractionTrackingData.FLAGS.LEFT_DOWN)
        },
        set: function(t) {
            this._doSet(InteractionTrackingData.FLAGS.LEFT_DOWN, t)
        },
        enumerable: !1,
        configurable: !0
    }),
    InteractionTrackingData.FLAGS = Object.freeze({
        NONE: 0,
        OVER: 1,
        LEFT_DOWN: 2,
        RIGHT_DOWN: 4
    }),
    InteractionTrackingData);
    function InteractionTrackingData(t) {
        this._pointerId = t,
        this._flags = InteractionTrackingData.FLAGS.NONE
    }
    var Vi = (TreeSearch.prototype.recursiveFindHit = function(t, e, i, r, n) {
        if (!e || !e.visible)
            return !1;
        var o = t.data.global
          , s = !1
          , a = n = e.interactive || n
          , l = !0;
        if (e.hitArea ? (r && (e.worldTransform.applyInverse(o, this._tempPoint),
        e.hitArea.contains(this._tempPoint.x, this._tempPoint.y) ? s = !0 : l = r = !1),
        a = !1) : e._mask && r && (e._mask.containsPoint && e._mask.containsPoint(o) || (r = !1)),
        l && e.interactiveChildren && e.children)
            for (var c = e.children, u = c.length - 1; 0 <= u; u--) {
                var p = c[u]
                  , h = this.recursiveFindHit(t, p, i, r, a);
                if (h) {
                    if (!p.parent)
                        continue;
                    a = !1,
                    h && (t.target && (r = !1),
                    s = !0)
                }
            }
        return n && (r && !t.target && !e.hitArea && e.containsPoint && e.containsPoint(o) && (s = !0),
        e.interactive && (s && !t.target && (t.target = e),
        i && i(t, e, !!s))),
        s
    }
    ,
    TreeSearch.prototype.findHit = function(t, e, i, r) {
        this.recursiveFindHit(t, e, i, r, !1)
    }
    ,
    TreeSearch);
    function TreeSearch() {
        this._tempPoint = new me
    }
    var Bi = {
        interactive: !1,
        interactiveChildren: !0,
        hitArea: null,
        get buttonMode() {
            return "pointer" === this.cursor
        },
        set buttonMode(t) {
            t ? this.cursor = "pointer" : "pointer" === this.cursor && (this.cursor = null)
        },
        cursor: null,
        get trackedPointers() {
            return void 0 === this._trackedPointers && (this._trackedPointers = {}),
            this._trackedPointers
        },
        _trackedPointers: void 0
    };
    Be.mixin(Bi);
    var Fi, Gi = {
        target: null,
        data: {
            global: null
        }
    }, ki = (function __extends$i(t, e) {
        function __() {
            this.constructor = t
        }
        Ni(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }(InteractionManager, Fi = dt),
    Object.defineProperty(InteractionManager.prototype, "useSystemTicker", {
        get: function() {
            return this._useSystemTicker
        },
        set: function(t) {
            (this._useSystemTicker = t) ? this.addTickerListener() : this.removeTickerListener()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(InteractionManager.prototype, "lastObjectRendered", {
        get: function() {
            return this.renderer._lastObjectRendered || this._tempDisplayObject
        },
        enumerable: !1,
        configurable: !0
    }),
    InteractionManager.prototype.hitTest = function(t, e) {
        return Gi.target = null,
        Gi.data.global = t,
        e = e || this.lastObjectRendered,
        this.processInteractive(Gi, e, null, !0),
        Gi.target
    }
    ,
    InteractionManager.prototype.setTargetElement = function(t, e) {
        void 0 === e && (e = 1),
        this.removeTickerListener(),
        this.removeEvents(),
        this.interactionDOMElement = t,
        this.resolution = e,
        this.addEvents(),
        this.addTickerListener()
    }
    ,
    InteractionManager.prototype.addTickerListener = function() {
        !this.tickerAdded && this.interactionDOMElement && this._useSystemTicker && (Pi.system.add(this.tickerUpdate, this, rt.UPDATE_PRIORITY.INTERACTION),
        this.tickerAdded = !0)
    }
    ,
    InteractionManager.prototype.removeTickerListener = function() {
        this.tickerAdded && (Pi.system.remove(this.tickerUpdate, this),
        this.tickerAdded = !1)
    }
    ,
    InteractionManager.prototype.addEvents = function() {
        if (!this.eventsAdded && this.interactionDOMElement) {
            var t = this.interactionDOMElement.style;
            globalThis.navigator.msPointerEnabled ? (t.msContentZooming = "none",
            t.msTouchAction = "none") : this.supportsPointerEvents && (t.touchAction = "none"),
            this.supportsPointerEvents ? (globalThis.document.addEventListener("pointermove", this.onPointerMove, this._eventListenerOptions),
            this.interactionDOMElement.addEventListener("pointerdown", this.onPointerDown, this._eventListenerOptions),
            this.interactionDOMElement.addEventListener("pointerleave", this.onPointerOut, this._eventListenerOptions),
            this.interactionDOMElement.addEventListener("pointerover", this.onPointerOver, this._eventListenerOptions),
            globalThis.addEventListener("pointercancel", this.onPointerCancel, this._eventListenerOptions),
            globalThis.addEventListener("pointerup", this.onPointerUp, this._eventListenerOptions)) : (globalThis.document.addEventListener("mousemove", this.onPointerMove, this._eventListenerOptions),
            this.interactionDOMElement.addEventListener("mousedown", this.onPointerDown, this._eventListenerOptions),
            this.interactionDOMElement.addEventListener("mouseout", this.onPointerOut, this._eventListenerOptions),
            this.interactionDOMElement.addEventListener("mouseover", this.onPointerOver, this._eventListenerOptions),
            globalThis.addEventListener("mouseup", this.onPointerUp, this._eventListenerOptions)),
            this.supportsTouchEvents && (this.interactionDOMElement.addEventListener("touchstart", this.onPointerDown, this._eventListenerOptions),
            this.interactionDOMElement.addEventListener("touchcancel", this.onPointerCancel, this._eventListenerOptions),
            this.interactionDOMElement.addEventListener("touchend", this.onPointerUp, this._eventListenerOptions),
            this.interactionDOMElement.addEventListener("touchmove", this.onPointerMove, this._eventListenerOptions)),
            this.eventsAdded = !0
        }
    }
    ,
    InteractionManager.prototype.removeEvents = function() {
        if (this.eventsAdded && this.interactionDOMElement) {
            var t = this.interactionDOMElement.style;
            globalThis.navigator.msPointerEnabled ? (t.msContentZooming = "",
            t.msTouchAction = "") : this.supportsPointerEvents && (t.touchAction = ""),
            this.supportsPointerEvents ? (globalThis.document.removeEventListener("pointermove", this.onPointerMove, this._eventListenerOptions),
            this.interactionDOMElement.removeEventListener("pointerdown", this.onPointerDown, this._eventListenerOptions),
            this.interactionDOMElement.removeEventListener("pointerleave", this.onPointerOut, this._eventListenerOptions),
            this.interactionDOMElement.removeEventListener("pointerover", this.onPointerOver, this._eventListenerOptions),
            globalThis.removeEventListener("pointercancel", this.onPointerCancel, this._eventListenerOptions),
            globalThis.removeEventListener("pointerup", this.onPointerUp, this._eventListenerOptions)) : (globalThis.document.removeEventListener("mousemove", this.onPointerMove, this._eventListenerOptions),
            this.interactionDOMElement.removeEventListener("mousedown", this.onPointerDown, this._eventListenerOptions),
            this.interactionDOMElement.removeEventListener("mouseout", this.onPointerOut, this._eventListenerOptions),
            this.interactionDOMElement.removeEventListener("mouseover", this.onPointerOver, this._eventListenerOptions),
            globalThis.removeEventListener("mouseup", this.onPointerUp, this._eventListenerOptions)),
            this.supportsTouchEvents && (this.interactionDOMElement.removeEventListener("touchstart", this.onPointerDown, this._eventListenerOptions),
            this.interactionDOMElement.removeEventListener("touchcancel", this.onPointerCancel, this._eventListenerOptions),
            this.interactionDOMElement.removeEventListener("touchend", this.onPointerUp, this._eventListenerOptions),
            this.interactionDOMElement.removeEventListener("touchmove", this.onPointerMove, this._eventListenerOptions)),
            this.interactionDOMElement = null,
            this.eventsAdded = !1
        }
    }
    ,
    InteractionManager.prototype.tickerUpdate = function(t) {
        this._deltaTime += t,
        this._deltaTime < this.interactionFrequency || (this._deltaTime = 0,
        this.update())
    }
    ,
    InteractionManager.prototype.update = function() {
        if (this.interactionDOMElement)
            if (this._didMove)
                this._didMove = !1;
            else {
                for (var t in this.cursor = null,
                this.activeInteractionData)
                    if (this.activeInteractionData.hasOwnProperty(t)) {
                        var e = this.activeInteractionData[t];
                        if (e.originalEvent && "touch" !== e.pointerType) {
                            var i = this.configureInteractionEventForDOMEvent(this.eventData, e.originalEvent, e);
                            this.processInteractive(i, this.lastObjectRendered, this.processPointerOverOut, !0)
                        }
                    }
                this.setCursorMode(this.cursor)
            }
    }
    ,
    InteractionManager.prototype.setCursorMode = function(t) {
        t = t || "default";
        var e = !0;
        if (globalThis.OffscreenCanvas && this.interactionDOMElement instanceof OffscreenCanvas && (e = !1),
        this.currentCursorMode !== t) {
            this.currentCursorMode = t;
            var i = this.cursorStyles[t];
            if (i)
                switch (typeof i) {
                case "string":
                    e && (this.interactionDOMElement.style.cursor = i);
                    break;
                case "function":
                    i(t);
                    break;
                case "object":
                    e && Object.assign(this.interactionDOMElement.style, i)
                }
            else
                e && "string" == typeof t && !Object.prototype.hasOwnProperty.call(this.cursorStyles, t) && (this.interactionDOMElement.style.cursor = t)
        }
    }
    ,
    InteractionManager.prototype.dispatchEvent = function(t, e, i) {
        i.stopPropagationHint && t !== i.stopsPropagatingAt || (i.currentTarget = t,
        i.type = e,
        t.emit(e, i),
        t[e] && t[e](i))
    }
    ,
    InteractionManager.prototype.delayDispatchEvent = function(t, e, i) {
        this.delayedEvents.push({
            displayObject: t,
            eventString: e,
            eventData: i
        })
    }
    ,
    InteractionManager.prototype.mapPositionToPoint = function(t, e, i) {
        var r;
        r = this.interactionDOMElement.parentElement ? this.interactionDOMElement.getBoundingClientRect() : {
            x: 0,
            y: 0,
            width: this.interactionDOMElement.width,
            height: this.interactionDOMElement.height,
            left: 0,
            top: 0
        };
        var n = 1 / this.resolution;
        t.x = (e - r.left) * (this.interactionDOMElement.width / r.width) * n,
        t.y = (i - r.top) * (this.interactionDOMElement.height / r.height) * n
    }
    ,
    InteractionManager.prototype.processInteractive = function(t, e, i, r) {
        var n = this.search.findHit(t, e, i, r)
          , o = this.delayedEvents;
        if (!o.length)
            return n;
        t.stopPropagationHint = !1;
        var s = o.length;
        this.delayedEvents = [];
        for (var a = 0; a < s; a++) {
            var l = o[a]
              , c = l.displayObject
              , u = l.eventString
              , p = l.eventData;
            p.stopsPropagatingAt === c && (p.stopPropagationHint = !0),
            this.dispatchEvent(c, u, p)
        }
        return n
    }
    ,
    InteractionManager.prototype.onPointerDown = function(t) {
        if (!this.supportsTouchEvents || "touch" !== t.pointerType) {
            var e = this.normalizeToPointerData(t);
            this.autoPreventDefault && e[0].isNormalized && (!t.cancelable && "cancelable"in t || t.preventDefault());
            for (var i = e.length, r = 0; r < i; r++) {
                var n = e[r]
                  , o = this.getInteractionDataForPointerId(n)
                  , s = this.configureInteractionEventForDOMEvent(this.eventData, n, o);
                if (s.data.originalEvent = t,
                this.processInteractive(s, this.lastObjectRendered, this.processPointerDown, !0),
                this.emit("pointerdown", s),
                "touch" === n.pointerType)
                    this.emit("touchstart", s);
                else if ("mouse" === n.pointerType || "pen" === n.pointerType) {
                    var a = 2 === n.button;
                    this.emit(a ? "rightdown" : "mousedown", this.eventData)
                }
            }
        }
    }
    ,
    InteractionManager.prototype.processPointerDown = function(t, e, i) {
        var r = t.data
          , n = t.data.identifier;
        if (i)
            if (e.trackedPointers[n] || (e.trackedPointers[n] = new Mi(n)),
            this.dispatchEvent(e, "pointerdown", t),
            "touch" === r.pointerType)
                this.dispatchEvent(e, "touchstart", t);
            else if ("mouse" === r.pointerType || "pen" === r.pointerType) {
                var o = 2 === r.button;
                o ? e.trackedPointers[n].rightDown = !0 : e.trackedPointers[n].leftDown = !0,
                this.dispatchEvent(e, o ? "rightdown" : "mousedown", t)
            }
    }
    ,
    InteractionManager.prototype.onPointerComplete = function(t, e, i) {
        for (var r = this.normalizeToPointerData(t), n = r.length, o = t.target !== this.interactionDOMElement ? "outside" : "", s = 0; s < n; s++) {
            var a = r[s]
              , l = this.getInteractionDataForPointerId(a)
              , c = this.configureInteractionEventForDOMEvent(this.eventData, a, l);
            if (c.data.originalEvent = t,
            this.processInteractive(c, this.lastObjectRendered, i, e || !o),
            this.emit(e ? "pointercancel" : "pointerup" + o, c),
            "mouse" === a.pointerType || "pen" === a.pointerType) {
                var u = 2 === a.button;
                this.emit(u ? "rightup" + o : "mouseup" + o, c)
            } else
                "touch" === a.pointerType && (this.emit(e ? "touchcancel" : "touchend" + o, c),
                this.releaseInteractionDataForPointerId(a.pointerId))
        }
    }
    ,
    InteractionManager.prototype.onPointerCancel = function(t) {
        this.supportsTouchEvents && "touch" === t.pointerType || this.onPointerComplete(t, !0, this.processPointerCancel)
    }
    ,
    InteractionManager.prototype.processPointerCancel = function(t, e) {
        var i = t.data
          , r = t.data.identifier;
        void 0 !== e.trackedPointers[r] && (delete e.trackedPointers[r],
        this.dispatchEvent(e, "pointercancel", t),
        "touch" === i.pointerType && this.dispatchEvent(e, "touchcancel", t))
    }
    ,
    InteractionManager.prototype.onPointerUp = function(t) {
        this.supportsTouchEvents && "touch" === t.pointerType || this.onPointerComplete(t, !1, this.processPointerUp)
    }
    ,
    InteractionManager.prototype.processPointerUp = function(t, e, i) {
        var r = t.data
          , n = t.data.identifier
          , o = e.trackedPointers[n]
          , s = "touch" === r.pointerType
          , a = "mouse" === r.pointerType || "pen" === r.pointerType
          , l = !1;
        if (a) {
            var c = 2 === r.button
              , u = Mi.FLAGS
              , p = c ? u.RIGHT_DOWN : u.LEFT_DOWN
              , h = void 0 !== o && o.flags & p;
            i ? (this.dispatchEvent(e, c ? "rightup" : "mouseup", t),
            h && (this.dispatchEvent(e, c ? "rightclick" : "click", t),
            l = !0)) : h && this.dispatchEvent(e, c ? "rightupoutside" : "mouseupoutside", t),
            o && (c ? o.rightDown = !1 : o.leftDown = !1)
        }
        i ? (this.dispatchEvent(e, "pointerup", t),
        s && this.dispatchEvent(e, "touchend", t),
        o && (a && !l || this.dispatchEvent(e, "pointertap", t),
        s && (this.dispatchEvent(e, "tap", t),
        o.over = !1))) : o && (this.dispatchEvent(e, "pointerupoutside", t),
        s && this.dispatchEvent(e, "touchendoutside", t)),
        o && o.none && delete e.trackedPointers[n]
    }
    ,
    InteractionManager.prototype.onPointerMove = function(t) {
        if (!this.supportsTouchEvents || "touch" !== t.pointerType) {
            var e = this.normalizeToPointerData(t);
            "mouse" !== e[0].pointerType && "pen" !== e[0].pointerType || (this._didMove = !0,
            this.cursor = null);
            for (var i = e.length, r = 0; r < i; r++) {
                var n = e[r]
                  , o = this.getInteractionDataForPointerId(n)
                  , s = this.configureInteractionEventForDOMEvent(this.eventData, n, o);
                s.data.originalEvent = t,
                this.processInteractive(s, this.lastObjectRendered, this.processPointerMove, !0),
                this.emit("pointermove", s),
                "touch" === n.pointerType && this.emit("touchmove", s),
                "mouse" !== n.pointerType && "pen" !== n.pointerType || this.emit("mousemove", s)
            }
            "mouse" === e[0].pointerType && this.setCursorMode(this.cursor)
        }
    }
    ,
    InteractionManager.prototype.processPointerMove = function(t, e, i) {
        var r = t.data
          , n = "touch" === r.pointerType
          , o = "mouse" === r.pointerType || "pen" === r.pointerType;
        o && this.processPointerOverOut(t, e, i),
        this.moveWhenInside && !i || (this.dispatchEvent(e, "pointermove", t),
        n && this.dispatchEvent(e, "touchmove", t),
        o && this.dispatchEvent(e, "mousemove", t))
    }
    ,
    InteractionManager.prototype.onPointerOut = function(t) {
        if (!this.supportsTouchEvents || "touch" !== t.pointerType) {
            var e = this.normalizeToPointerData(t)[0];
            "mouse" === e.pointerType && (this.mouseOverRenderer = !1,
            this.setCursorMode(null));
            var i = this.getInteractionDataForPointerId(e)
              , r = this.configureInteractionEventForDOMEvent(this.eventData, e, i);
            r.data.originalEvent = e,
            this.processInteractive(r, this.lastObjectRendered, this.processPointerOverOut, !1),
            this.emit("pointerout", r),
            "mouse" === e.pointerType || "pen" === e.pointerType ? this.emit("mouseout", r) : this.releaseInteractionDataForPointerId(i.identifier)
        }
    }
    ,
    InteractionManager.prototype.processPointerOverOut = function(t, e, i) {
        var r = t.data
          , n = t.data.identifier
          , o = "mouse" === r.pointerType || "pen" === r.pointerType
          , s = e.trackedPointers[n];
        i && !s && (s = e.trackedPointers[n] = new Mi(n)),
        void 0 !== s && (i && this.mouseOverRenderer ? (s.over || (s.over = !0,
        this.delayDispatchEvent(e, "pointerover", t),
        o && this.delayDispatchEvent(e, "mouseover", t)),
        o && null === this.cursor && (this.cursor = e.cursor)) : s.over && (s.over = !1,
        this.dispatchEvent(e, "pointerout", this.eventData),
        o && this.dispatchEvent(e, "mouseout", t),
        s.none && delete e.trackedPointers[n]))
    }
    ,
    InteractionManager.prototype.onPointerOver = function(t) {
        var e = this.normalizeToPointerData(t)[0]
          , i = this.getInteractionDataForPointerId(e)
          , r = this.configureInteractionEventForDOMEvent(this.eventData, e, i);
        "mouse" === (r.data.originalEvent = e).pointerType && (this.mouseOverRenderer = !0),
        this.emit("pointerover", r),
        "mouse" !== e.pointerType && "pen" !== e.pointerType || this.emit("mouseover", r)
    }
    ,
    InteractionManager.prototype.getInteractionDataForPointerId = function(t) {
        var e, i = t.pointerId;
        return 1 === i || "mouse" === t.pointerType ? e = this.mouse : this.activeInteractionData[i] ? e = this.activeInteractionData[i] : ((e = this.interactionDataPool.pop() || new Li).identifier = i,
        this.activeInteractionData[i] = e),
        e.copyEvent(t),
        e
    }
    ,
    InteractionManager.prototype.releaseInteractionDataForPointerId = function(t) {
        var e = this.activeInteractionData[t];
        e && (delete this.activeInteractionData[t],
        e.reset(),
        this.interactionDataPool.push(e))
    }
    ,
    InteractionManager.prototype.configureInteractionEventForDOMEvent = function(t, e, i) {
        return t.data = i,
        this.mapPositionToPoint(i.global, e.clientX, e.clientY),
        "touch" === e.pointerType && (e.globalX = i.global.x,
        e.globalY = i.global.y),
        i.originalEvent = e,
        t.reset(),
        t
    }
    ,
    InteractionManager.prototype.normalizeToPointerData = function(t) {
        var e = [];
        if (this.supportsTouchEvents && t instanceof TouchEvent)
            for (var i = 0, r = t.changedTouches.length; i < r; i++) {
                var n = t.changedTouches[i];
                void 0 === n.button && (n.button = t.touches.length ? 1 : 0),
                void 0 === n.buttons && (n.buttons = t.touches.length ? 1 : 0),
                void 0 === n.isPrimary && (n.isPrimary = 1 === t.touches.length && "touchstart" === t.type),
                void 0 === n.width && (n.width = n.radiusX || 1),
                void 0 === n.height && (n.height = n.radiusY || 1),
                void 0 === n.tiltX && (n.tiltX = 0),
                void 0 === n.tiltY && (n.tiltY = 0),
                void 0 === n.pointerType && (n.pointerType = "touch"),
                void 0 === n.pointerId && (n.pointerId = n.identifier || 0),
                void 0 === n.pressure && (n.pressure = n.force || .5),
                void 0 === n.twist && (n.twist = 0),
                void 0 === n.tangentialPressure && (n.tangentialPressure = 0),
                void 0 === n.layerX && (n.layerX = n.offsetX = n.clientX),
                void 0 === n.layerY && (n.layerY = n.offsetY = n.clientY),
                n.isNormalized = !0,
                e.push(n)
            }
        else if (!globalThis.MouseEvent || t instanceof MouseEvent && !(this.supportsPointerEvents && t instanceof globalThis.PointerEvent)) {
            var o = t;
            void 0 === o.isPrimary && (o.isPrimary = !0),
            void 0 === o.width && (o.width = 1),
            void 0 === o.height && (o.height = 1),
            void 0 === o.tiltX && (o.tiltX = 0),
            void 0 === o.tiltY && (o.tiltY = 0),
            void 0 === o.pointerType && (o.pointerType = "mouse"),
            void 0 === o.pointerId && (o.pointerId = 1),
            void 0 === o.pressure && (o.pressure = .5),
            void 0 === o.twist && (o.twist = 0),
            void 0 === o.tangentialPressure && (o.tangentialPressure = 0),
            o.isNormalized = !0,
            e.push(o)
        } else
            e.push(t);
        return e
    }
    ,
    InteractionManager.prototype.destroy = function() {
        this.removeEvents(),
        this.removeTickerListener(),
        this.removeAllListeners(),
        this.renderer = null,
        this.mouse = null,
        this.eventData = null,
        this.interactionDOMElement = null,
        this.onPointerDown = null,
        this.processPointerDown = null,
        this.onPointerUp = null,
        this.processPointerUp = null,
        this.onPointerCancel = null,
        this.processPointerCancel = null,
        this.onPointerMove = null,
        this.processPointerMove = null,
        this.onPointerOut = null,
        this.processPointerOverOut = null,
        this.onPointerOver = null,
        this.search = null
    }
    ,
    InteractionManager);
    function InteractionManager(t, e) {
        var i = Fi.call(this) || this;
        return e = e || {},
        i.renderer = t,
        i.autoPreventDefault = void 0 === e.autoPreventDefault || e.autoPreventDefault,
        i.interactionFrequency = e.interactionFrequency || 10,
        i.mouse = new Li,
        i.mouse.identifier = 1,
        i.mouse.global.set(-999999),
        i.activeInteractionData = {},
        i.activeInteractionData[1] = i.mouse,
        i.interactionDataPool = [],
        i.eventData = new xi,
        i.interactionDOMElement = null,
        i.moveWhenInside = !1,
        i.eventsAdded = !1,
        i.tickerAdded = !1,
        i.mouseOverRenderer = !("PointerEvent"in globalThis),
        i.supportsTouchEvents = "ontouchstart"in globalThis,
        i.supportsPointerEvents = !!globalThis.PointerEvent,
        i.onPointerUp = i.onPointerUp.bind(i),
        i.processPointerUp = i.processPointerUp.bind(i),
        i.onPointerCancel = i.onPointerCancel.bind(i),
        i.processPointerCancel = i.processPointerCancel.bind(i),
        i.onPointerDown = i.onPointerDown.bind(i),
        i.processPointerDown = i.processPointerDown.bind(i),
        i.onPointerMove = i.onPointerMove.bind(i),
        i.processPointerMove = i.processPointerMove.bind(i),
        i.onPointerOut = i.onPointerOut.bind(i),
        i.processPointerOverOut = i.processPointerOverOut.bind(i),
        i.onPointerOver = i.onPointerOver.bind(i),
        i.cursorStyles = {
            default: "inherit",
            pointer: "pointer"
        },
        i.currentCursorMode = null,
        i.cursor = null,
        i.resolution = 1,
        i.delayedEvents = [],
        i.search = new Vi,
        i._tempDisplayObject = new Ii,
        i._eventListenerOptions = {
            capture: !0,
            passive: !1
        },
        i._useSystemTicker = void 0 === e.useSystemTicker || e.useSystemTicker,
        i.setTargetElement(i.renderer.view, i.renderer.resolution),
        i
    }
    var ji = (Runner.prototype.emit = function(t, e, i, r, n, o, s, a) {
        if (8 < arguments.length)
            throw new Error("max arguments reached");
        var l = this.name
          , c = this.items;
        this._aliasCount++;
        for (var u = 0, p = c.length; u < p; u++)
            c[u][l](t, e, i, r, n, o, s, a);
        return c === this.items && this._aliasCount--,
        this
    }
    ,
    Runner.prototype.ensureNonAliasedItems = function() {
        0 < this._aliasCount && 1 < this.items.length && (this._aliasCount = 0,
        this.items = this.items.slice(0))
    }
    ,
    Runner.prototype.add = function(t) {
        return t[this._name] && (this.ensureNonAliasedItems(),
        this.remove(t),
        this.items.push(t)),
        this
    }
    ,
    Runner.prototype.remove = function(t) {
        var e = this.items.indexOf(t);
        return -1 !== e && (this.ensureNonAliasedItems(),
        this.items.splice(e, 1)),
        this
    }
    ,
    Runner.prototype.contains = function(t) {
        return -1 !== this.items.indexOf(t)
    }
    ,
    Runner.prototype.removeAll = function() {
        return this.ensureNonAliasedItems(),
        this.items.length = 0,
        this
    }
    ,
    Runner.prototype.destroy = function() {
        this.removeAll(),
        this.items = null,
        this._name = null
    }
    ,
    Object.defineProperty(Runner.prototype, "empty", {
        get: function() {
            return 0 === this.items.length
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Runner.prototype, "name", {
        get: function() {
            return this._name
        },
        enumerable: !1,
        configurable: !0
    }),
    Runner);
    function Runner(t) {
        this.items = [],
        this._name = t,
        this._aliasCount = 0
    }
    Object.defineProperties(ji.prototype, {
        dispatch: {
            value: ji.prototype.emit
        },
        run: {
            value: ji.prototype.emit
        }
    }),
    pt.PREFER_ENV = ut.any ? rt.ENV.WEBGL : rt.ENV.WEBGL2,
    pt.STRICT_TEXTURE_CACHE = !1;
    var Hi = [];
    function autoDetectResource(t, e) {
        if (!t)
            return null;
        var i = "";
        if ("string" == typeof t) {
            var r = /\.(\w{3,4})(?:$|\?|#)/i.exec(t);
            r && (i = r[1].toLowerCase())
        }
        for (var n = Hi.length - 1; 0 <= n; --n) {
            var o = Hi[n];
            if (o.test && o.test(t, i))
                return new o(t,e)
        }
        throw new Error("Unrecognized source type to auto-detect Resource")
    }
    var qi = function(t, e) {
        return (qi = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    function __extends$h(t, e) {
        function __() {
            this.constructor = t
        }
        qi(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
    var Yi = function() {
        return (Yi = Object.assign || function __assign(t) {
            for (var e, i = arguments, r = 1, n = arguments.length; r < n; r++)
                for (var o in e = i[r])
                    Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
            return t
        }
        ).apply(this, arguments)
    };
    var zi = (Resource.prototype.bind = function(t) {
        this.onResize.add(t),
        this.onUpdate.add(t),
        this.onError.add(t),
        (this._width || this._height) && this.onResize.emit(this._width, this._height)
    }
    ,
    Resource.prototype.unbind = function(t) {
        this.onResize.remove(t),
        this.onUpdate.remove(t),
        this.onError.remove(t)
    }
    ,
    Resource.prototype.resize = function(t, e) {
        t === this._width && e === this._height || (this._width = t,
        this._height = e,
        this.onResize.emit(t, e))
    }
    ,
    Object.defineProperty(Resource.prototype, "valid", {
        get: function() {
            return !!this._width && !!this._height
        },
        enumerable: !1,
        configurable: !0
    }),
    Resource.prototype.update = function() {
        this.destroyed || this.onUpdate.emit()
    }
    ,
    Resource.prototype.load = function() {
        return Promise.resolve(this)
    }
    ,
    Object.defineProperty(Resource.prototype, "width", {
        get: function() {
            return this._width
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Resource.prototype, "height", {
        get: function() {
            return this._height
        },
        enumerable: !1,
        configurable: !0
    }),
    Resource.prototype.style = function(t, e, i) {
        return !1
    }
    ,
    Resource.prototype.dispose = function() {}
    ,
    Resource.prototype.destroy = function() {
        this.destroyed || (this.destroyed = !0,
        this.dispose(),
        this.onError.removeAll(),
        this.onError = null,
        this.onResize.removeAll(),
        this.onResize = null,
        this.onUpdate.removeAll(),
        this.onUpdate = null)
    }
    ,
    Resource.test = function(t, e) {
        return !1
    }
    ,
    Resource);
    function Resource(t, e) {
        void 0 === t && (t = 0),
        void 0 === e && (e = 0),
        this._width = t,
        this._height = e,
        this.destroyed = !1,
        this.internal = !1,
        this.onResize = new ji("setRealSize"),
        this.onUpdate = new ji("update"),
        this.onError = new ji("onError")
    }
    var Ki, Xi = (__extends$h(BufferResource, Ki = zi),
    BufferResource.prototype.upload = function(t, e, i) {
        var r = t.gl;
        r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL, e.alphaMode === rt.ALPHA_MODES.UNPACK);
        var n = e.realWidth
          , o = e.realHeight;
        return i.width === n && i.height === o ? r.texSubImage2D(e.target, 0, 0, 0, n, o, e.format, i.type, this.data) : (i.width = n,
        i.height = o,
        r.texImage2D(e.target, 0, i.internalFormat, n, o, 0, e.format, i.type, this.data)),
        !0
    }
    ,
    BufferResource.prototype.dispose = function() {
        this.data = null
    }
    ,
    BufferResource.test = function(t) {
        return t instanceof Float32Array || t instanceof Uint8Array || t instanceof Uint32Array
    }
    ,
    BufferResource);
    function BufferResource(t, e) {
        var i = this
          , r = e || {}
          , n = r.width
          , o = r.height;
        if (!n || !o)
            throw new Error("BufferResource width or height invalid");
        return (i = Ki.call(this, n, o) || this).data = t,
        i
    }
    var Wi, Ji = {
        scaleMode: rt.SCALE_MODES.NEAREST,
        format: rt.FORMATS.RGBA,
        alphaMode: rt.ALPHA_MODES.NPM
    }, Qi = (__extends$h(BaseTexture, Wi = dt),
    Object.defineProperty(BaseTexture.prototype, "realWidth", {
        get: function() {
            return Math.round(this.width * this.resolution)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BaseTexture.prototype, "realHeight", {
        get: function() {
            return Math.round(this.height * this.resolution)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BaseTexture.prototype, "mipmap", {
        get: function() {
            return this._mipmap
        },
        set: function(t) {
            this._mipmap !== t && (this._mipmap = t,
            this.dirtyStyleId++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BaseTexture.prototype, "scaleMode", {
        get: function() {
            return this._scaleMode
        },
        set: function(t) {
            this._scaleMode !== t && (this._scaleMode = t,
            this.dirtyStyleId++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BaseTexture.prototype, "wrapMode", {
        get: function() {
            return this._wrapMode
        },
        set: function(t) {
            this._wrapMode !== t && (this._wrapMode = t,
            this.dirtyStyleId++)
        },
        enumerable: !1,
        configurable: !0
    }),
    BaseTexture.prototype.setStyle = function(t, e) {
        var i;
        return void 0 !== t && t !== this.scaleMode && (this.scaleMode = t,
        i = !0),
        void 0 !== e && e !== this.mipmap && (this.mipmap = e,
        i = !0),
        i && this.dirtyStyleId++,
        this
    }
    ,
    BaseTexture.prototype.setSize = function(t, e, i) {
        return i = i || this.resolution,
        this.setRealSize(t * i, e * i, i)
    }
    ,
    BaseTexture.prototype.setRealSize = function(t, e, i) {
        return this.resolution = i || this.resolution,
        this.width = Math.round(t) / this.resolution,
        this.height = Math.round(e) / this.resolution,
        this._refreshPOT(),
        this.update(),
        this
    }
    ,
    BaseTexture.prototype._refreshPOT = function() {
        this.isPowerOfTwo = isPow2(this.realWidth) && isPow2(this.realHeight)
    }
    ,
    BaseTexture.prototype.setResolution = function(t) {
        var e = this.resolution;
        return e === t || (this.resolution = t,
        this.valid && (this.width = Math.round(this.width * e) / t,
        this.height = Math.round(this.height * e) / t,
        this.emit("update", this)),
        this._refreshPOT()),
        this
    }
    ,
    BaseTexture.prototype.setResource = function(t) {
        if (this.resource === t)
            return this;
        if (this.resource)
            throw new Error("Resource can be set only once");
        return t.bind(this),
        this.resource = t,
        this
    }
    ,
    BaseTexture.prototype.update = function() {
        this.valid ? (this.dirtyId++,
        this.dirtyStyleId++,
        this.emit("update", this)) : 0 < this.width && 0 < this.height && (this.valid = !0,
        this.emit("loaded", this),
        this.emit("update", this))
    }
    ,
    BaseTexture.prototype.onError = function(t) {
        this.emit("error", this, t)
    }
    ,
    BaseTexture.prototype.destroy = function() {
        this.resource && (this.resource.unbind(this),
        this.resource.internal && this.resource.destroy(),
        this.resource = null),
        this.cacheId && (delete le[this.cacheId],
        delete ae[this.cacheId],
        this.cacheId = null),
        this.dispose(),
        BaseTexture.removeFromCache(this),
        this.textureCacheIds = null,
        this.destroyed = !0
    }
    ,
    BaseTexture.prototype.dispose = function() {
        this.emit("dispose", this)
    }
    ,
    BaseTexture.prototype.castToBaseTexture = function() {
        return this
    }
    ,
    BaseTexture.from = function(t, e, i) {
        void 0 === i && (i = pt.STRICT_TEXTURE_CACHE);
        var r = "string" == typeof t
          , n = null;
        if (r)
            n = t;
        else {
            if (!t._pixiId) {
                var o = e && e.pixiIdPrefix || "pixiid";
                t._pixiId = o + "_" + uid()
            }
            n = t._pixiId
        }
        var s = le[n];
        if (r && i && !s)
            throw new Error('The cacheId "' + n + '" does not exist in BaseTextureCache.');
        return s || ((s = new BaseTexture(t,e)).cacheId = n,
        BaseTexture.addToCache(s, n)),
        s
    }
    ,
    BaseTexture.fromBuffer = function(t, e, i, r) {
        t = t || new Float32Array(e * i * 4);
        var n = new Xi(t,{
            width: e,
            height: i
        })
          , o = t instanceof Float32Array ? rt.TYPES.FLOAT : rt.TYPES.UNSIGNED_BYTE;
        return new BaseTexture(n,Object.assign(Ji, r || {
            width: e,
            height: i,
            type: o
        }))
    }
    ,
    BaseTexture.addToCache = function(t, e) {
        e && (-1 === t.textureCacheIds.indexOf(e) && t.textureCacheIds.push(e),
        le[e] && console.warn("BaseTexture added to the cache with an id [" + e + "] that already had an entry"),
        le[e] = t)
    }
    ,
    BaseTexture.removeFromCache = function(t) {
        if ("string" == typeof t) {
            var e = le[t];
            if (e) {
                var i = e.textureCacheIds.indexOf(t);
                return -1 < i && e.textureCacheIds.splice(i, 1),
                delete le[t],
                e
            }
        } else if (t && t.textureCacheIds) {
            for (var r = 0; r < t.textureCacheIds.length; ++r)
                delete le[t.textureCacheIds[r]];
            return t.textureCacheIds.length = 0,
            t
        }
        return null
    }
    ,
    BaseTexture._globalBatch = 0,
    BaseTexture);
    function BaseTexture(t, e) {
        void 0 === t && (t = null),
        void 0 === e && (e = null);
        var i = Wi.call(this) || this
          , r = (e = e || {}).alphaMode
          , n = e.mipmap
          , o = e.anisotropicLevel
          , s = e.scaleMode
          , a = e.width
          , l = e.height
          , c = e.wrapMode
          , u = e.format
          , p = e.type
          , h = e.target
          , d = e.resolution
          , _ = e.resourceOptions;
        return !t || t instanceof zi || ((t = autoDetectResource(t, _)).internal = !0),
        i.resolution = d || pt.RESOLUTION,
        i.width = Math.round((a || 0) * i.resolution) / i.resolution,
        i.height = Math.round((l || 0) * i.resolution) / i.resolution,
        i._mipmap = void 0 !== n ? n : pt.MIPMAP_TEXTURES,
        i.anisotropicLevel = void 0 !== o ? o : pt.ANISOTROPIC_LEVEL,
        i._wrapMode = c || pt.WRAP_MODE,
        i._scaleMode = void 0 !== s ? s : pt.SCALE_MODE,
        i.format = u || rt.FORMATS.RGBA,
        i.type = p || rt.TYPES.UNSIGNED_BYTE,
        i.target = h || rt.TARGETS.TEXTURE_2D,
        i.alphaMode = void 0 !== r ? r : rt.ALPHA_MODES.UNPACK,
        i.uid = uid(),
        i.touched = 0,
        i.isPowerOfTwo = !1,
        i._refreshPOT(),
        i._glTextures = {},
        i.dirtyId = 0,
        i.dirtyStyleId = 0,
        i.cacheId = null,
        i.valid = 0 < a && 0 < l,
        i.textureCacheIds = [],
        i.destroyed = !1,
        i.resource = null,
        i._batchEnabled = 0,
        i._batchLocation = 0,
        i.parentTextureArray = null,
        i.setResource(t),
        i
    }
    var Zi, $i = (__extends$h(AbstractMultiResource, Zi = zi),
    AbstractMultiResource.prototype.initFromArray = function(t, e) {
        for (var i = 0; i < this.length; i++)
            t[i] && (t[i].castToBaseTexture ? this.addBaseTextureAt(t[i].castToBaseTexture(), i) : t[i]instanceof zi ? this.addResourceAt(t[i], i) : this.addResourceAt(autoDetectResource(t[i], e), i))
    }
    ,
    AbstractMultiResource.prototype.dispose = function() {
        for (var t = 0, e = this.length; t < e; t++)
            this.items[t].destroy();
        this.items = null,
        this.itemDirtyIds = null,
        this._load = null
    }
    ,
    AbstractMultiResource.prototype.addResourceAt = function(t, e) {
        if (!this.items[e])
            throw new Error("Index " + e + " is out of bounds");
        return t.valid && !this.valid && this.resize(t.width, t.height),
        this.items[e].setResource(t),
        this
    }
    ,
    AbstractMultiResource.prototype.bind = function(t) {
        if (null !== this.baseTexture)
            throw new Error("Only one base texture per TextureArray is allowed");
        Zi.prototype.bind.call(this, t);
        for (var e = 0; e < this.length; e++)
            this.items[e].parentTextureArray = t,
            this.items[e].on("update", t.update, t)
    }
    ,
    AbstractMultiResource.prototype.unbind = function(t) {
        Zi.prototype.unbind.call(this, t);
        for (var e = 0; e < this.length; e++)
            this.items[e].parentTextureArray = null,
            this.items[e].off("update", t.update, t)
    }
    ,
    AbstractMultiResource.prototype.load = function() {
        var r = this;
        if (this._load)
            return this._load;
        var t = this.items.map(function(t) {
            return t.resource
        }).filter(function(t) {
            return t
        }).map(function(t) {
            return t.load()
        });
        return this._load = Promise.all(t).then(function() {
            var t = r.items[0]
              , e = t.realWidth
              , i = t.realHeight;
            return r.resize(e, i),
            Promise.resolve(r)
        }),
        this._load
    }
    ,
    AbstractMultiResource);
    function AbstractMultiResource(t, e) {
        var i = this
          , r = e || {}
          , n = r.width
          , o = r.height;
        (i = Zi.call(this, n, o) || this).items = [],
        i.itemDirtyIds = [];
        for (var s = 0; s < t; s++) {
            var a = new Qi;
            i.items.push(a),
            i.itemDirtyIds.push(-2)
        }
        return i.length = t,
        i._load = null,
        i.baseTexture = null,
        i
    }
    var tr, er = (__extends$h(ArrayResource, tr = $i),
    ArrayResource.prototype.addBaseTextureAt = function(t, e) {
        if (!t.resource)
            throw new Error("ArrayResource does not support RenderTexture");
        return this.addResourceAt(t.resource, e),
        this
    }
    ,
    ArrayResource.prototype.bind = function(t) {
        tr.prototype.bind.call(this, t),
        t.target = rt.TARGETS.TEXTURE_2D_ARRAY
    }
    ,
    ArrayResource.prototype.upload = function(t, e, i) {
        var r = this.length
          , n = this.itemDirtyIds
          , o = this.items
          , s = t.gl;
        i.dirtyId < 0 && s.texImage3D(s.TEXTURE_2D_ARRAY, 0, i.internalFormat, this._width, this._height, r, 0, e.format, i.type, null);
        for (var a = 0; a < r; a++) {
            var l = o[a];
            n[a] < l.dirtyId && (n[a] = l.dirtyId,
            l.valid && s.texSubImage3D(s.TEXTURE_2D_ARRAY, 0, 0, 0, a, l.resource.width, l.resource.height, 1, e.format, i.type, l.resource.source))
        }
        return !0
    }
    ,
    ArrayResource);
    function ArrayResource(t, e) {
        var i, r, n = this, o = e || {}, s = o.width, a = o.height;
        return r = Array.isArray(t) ? (i = t).length : t,
        n = tr.call(this, r, {
            width: s,
            height: a
        }) || this,
        i && n.initFromArray(i, e),
        n
    }
    var ir, rr = (__extends$h(BaseImageResource, ir = zi),
    BaseImageResource.crossOrigin = function(t, e, i) {
        void 0 === i && 0 !== e.indexOf("data:") ? t.crossOrigin = determineCrossOrigin(e) : !1 !== i && (t.crossOrigin = "string" == typeof i ? i : "anonymous")
    }
    ,
    BaseImageResource.prototype.upload = function(t, e, i, r) {
        var n = t.gl
          , o = e.realWidth
          , s = e.realHeight;
        if ((r = r || this.source)instanceof HTMLImageElement) {
            if (!r.complete || 0 === r.naturalWidth)
                return !1
        } else if (r instanceof HTMLVideoElement && r.readyState <= 1)
            return !1;
        return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL, e.alphaMode === rt.ALPHA_MODES.UNPACK),
        this.noSubImage || e.target !== n.TEXTURE_2D || i.width !== o || i.height !== s ? (i.width = o,
        i.height = s,
        n.texImage2D(e.target, 0, i.internalFormat, e.format, i.type, r)) : n.texSubImage2D(n.TEXTURE_2D, 0, 0, 0, e.format, i.type, r),
        !0
    }
    ,
    BaseImageResource.prototype.update = function() {
        if (!this.destroyed) {
            var t = this.source
              , e = t.naturalWidth || t.videoWidth || t.width
              , i = t.naturalHeight || t.videoHeight || t.height;
            this.resize(e, i),
            ir.prototype.update.call(this)
        }
    }
    ,
    BaseImageResource.prototype.dispose = function() {
        this.source = null
    }
    ,
    BaseImageResource);
    function BaseImageResource(t) {
        var e = this
          , i = t
          , r = i.naturalWidth || i.videoWidth || i.width
          , n = i.naturalHeight || i.videoHeight || i.height;
        return (e = ir.call(this, r, n) || this).source = t,
        e.noSubImage = !1,
        e
    }
    var nr, or = (__extends$h(CanvasResource, nr = rr),
    CanvasResource.test = function(t) {
        var e = globalThis.OffscreenCanvas;
        return !!(e && t instanceof e) || globalThis.HTMLCanvasElement && t instanceof HTMLCanvasElement
    }
    ,
    CanvasResource);
    function CanvasResource(t) {
        return nr.call(this, t) || this
    }
    var sr, ar = (__extends$h(CubeResource, sr = $i),
    CubeResource.prototype.bind = function(t) {
        sr.prototype.bind.call(this, t),
        t.target = rt.TARGETS.TEXTURE_CUBE_MAP
    }
    ,
    CubeResource.prototype.addBaseTextureAt = function(t, e, i) {
        if (!this.items[e])
            throw new Error("Index " + e + " is out of bounds");
        if (!this.linkBaseTexture || t.parentTextureArray || 0 < Object.keys(t._glTextures).length) {
            if (!t.resource)
                throw new Error("CubeResource does not support copying of renderTexture.");
            this.addResourceAt(t.resource, e)
        } else
            t.target = rt.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X + e,
            t.parentTextureArray = this.baseTexture,
            this.items[e] = t;
        return t.valid && !this.valid && this.resize(t.realWidth, t.realHeight),
        this.items[e] = t,
        this
    }
    ,
    CubeResource.prototype.upload = function(t, e, i) {
        for (var r = this.itemDirtyIds, n = 0; n < CubeResource.SIDES; n++) {
            var o = this.items[n];
            r[n] < o.dirtyId && (o.valid && o.resource ? (o.resource.upload(t, o, i),
            r[n] = o.dirtyId) : r[n] < -1 && (t.gl.texImage2D(o.target, 0, i.internalFormat, e.realWidth, e.realHeight, 0, e.format, i.type, null),
            r[n] = -1))
        }
        return !0
    }
    ,
    CubeResource.test = function(t) {
        return Array.isArray(t) && t.length === CubeResource.SIDES
    }
    ,
    CubeResource.SIDES = 6,
    CubeResource);
    function CubeResource(t, e) {
        var i = this
          , r = e || {}
          , n = r.width
          , o = r.height
          , s = r.autoLoad
          , a = r.linkBaseTexture;
        if (t && t.length !== CubeResource.SIDES)
            throw new Error("Invalid length. Got " + t.length + ", expected 6");
        i = sr.call(this, 6, {
            width: n,
            height: o
        }) || this;
        for (var l = 0; l < CubeResource.SIDES; l++)
            i.items[l].target = rt.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X + l;
        return i.linkBaseTexture = !1 !== a,
        t && i.initFromArray(t, e),
        !1 !== s && i.load(),
        i
    }
    var lr, cr = (__extends$h(ImageResource, lr = rr),
    ImageResource.prototype.load = function(t) {
        var r = this;
        return this._load || (void 0 !== t && (this.createBitmap = t),
        this._load = new Promise(function(t, e) {
            var i = r.source;
            function UOc() {
                r.destroyed || (i.onload = null,
                i.onerror = null,
                r.resize(i.width, i.height),
                r._load = null,
                r.createBitmap ? t(r.process()) : t(r))
            }
            r.url = i.src,
            i.complete && i.src ? UOc() : (i.onload = UOc,
            i.onerror = function(t) {
                e(t),
                r.onError.emit(t)
            }
            )
        }
        )),
        this._load
    }
    ,
    ImageResource.prototype.process = function() {
        var e = this
          , i = this.source;
        if (null !== this._process)
            return this._process;
        if (null !== this.bitmap || !globalThis.createImageBitmap)
            return Promise.resolve(this);
        var r = globalThis.createImageBitmap
          , t = !i.crossOrigin || "anonymous" === i.crossOrigin;
        return this._process = fetch(i.src, {
            mode: t ? "cors" : "no-cors"
        }).then(function(t) {
            return t.blob()
        }).then(function(t) {
            return r(t, 0, 0, i.width, i.height, {
                premultiplyAlpha: e.alphaMode === rt.ALPHA_MODES.UNPACK ? "premultiply" : "none"
            })
        }).then(function(t) {
            return e.destroyed ? Promise.reject() : (e.bitmap = t,
            e.update(),
            e._process = null,
            Promise.resolve(e))
        }),
        this._process
    }
    ,
    ImageResource.prototype.upload = function(t, e, i) {
        if ("number" == typeof this.alphaMode && (e.alphaMode = this.alphaMode),
        !this.createBitmap)
            return lr.prototype.upload.call(this, t, e, i);
        if (!this.bitmap && (this.process(),
        !this.bitmap))
            return !1;
        if (lr.prototype.upload.call(this, t, e, i, this.bitmap),
        !this.preserveBitmap) {
            var r = !0
              , n = e._glTextures;
            for (var o in n) {
                var s = n[o];
                if (s !== i && s.dirtyId !== e.dirtyId) {
                    r = !1;
                    break
                }
            }
            r && (this.bitmap.close && this.bitmap.close(),
            this.bitmap = null)
        }
        return !0
    }
    ,
    ImageResource.prototype.dispose = function() {
        this.source.onload = null,
        this.source.onerror = null,
        lr.prototype.dispose.call(this),
        this.bitmap && (this.bitmap.close(),
        this.bitmap = null),
        this._process = null,
        this._load = null
    }
    ,
    ImageResource.test = function(t) {
        return "string" == typeof t || t instanceof HTMLImageElement
    }
    ,
    ImageResource);
    function ImageResource(t, e) {
        var i = this;
        if (e = e || {},
        !(t instanceof HTMLImageElement)) {
            var r = new Image;
            rr.crossOrigin(r, t, e.crossorigin),
            r.src = t,
            t = r
        }
        return i = lr.call(this, t) || this,
        !t.complete && i._width && i._height && (i._width = 0,
        i._height = 0),
        i.url = t.src,
        i._process = null,
        i.preserveBitmap = !1,
        i.createBitmap = (void 0 !== e.createBitmap ? e.createBitmap : pt.CREATE_IMAGE_BITMAP) && !!globalThis.createImageBitmap,
        i.alphaMode = "number" == typeof e.alphaMode ? e.alphaMode : null,
        i.bitmap = null,
        i._load = null,
        !1 !== e.autoLoad && i.load(),
        i
    }
    var ur, pr = (__extends$h(SVGResource, ur = rr),
    SVGResource.prototype.load = function() {
        var e = this;
        return this._load || (this._load = new Promise(function(t) {
            if (e._resolve = function() {
                e.resize(e.source.width, e.source.height),
                t(e)
            }
            ,
            SVGResource.SVG_XML.test(e.svg.trim())) {
                if (!btoa)
                    throw new Error("Your browser doesn't support base64 conversions.");
                e.svg = "data:image/svg+xml;base64," + btoa(unescape(encodeURIComponent(e.svg)))
            }
            e._loadSvg()
        }
        )),
        this._load
    }
    ,
    SVGResource.prototype._loadSvg = function() {
        var o = this
          , s = new Image;
        rr.crossOrigin(s, this.svg, this._crossorigin),
        s.src = this.svg,
        s.onerror = function(t) {
            o._resolve && (s.onerror = null,
            o.onError.emit(t))
        }
        ,
        s.onload = function() {
            if (o._resolve) {
                var t = s.width
                  , e = s.height;
                if (!t || !e)
                    throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");
                var i = t * o.scale
                  , r = e * o.scale;
                (o._overrideWidth || o._overrideHeight) && (i = o._overrideWidth || o._overrideHeight / e * t,
                r = o._overrideHeight || o._overrideWidth / t * e),
                i = Math.round(i),
                r = Math.round(r);
                var n = o.source;
                n.width = i,
                n.height = r,
                n._pixiId = "canvas_" + uid(),
                n.getContext("2d").drawImage(s, 0, 0, t, e, 0, 0, i, r),
                o._resolve(),
                o._resolve = null
            }
        }
    }
    ,
    SVGResource.getSize = function(t) {
        var e = SVGResource.SVG_SIZE.exec(t)
          , i = {};
        return e && (i[e[1]] = Math.round(parseFloat(e[3])),
        i[e[5]] = Math.round(parseFloat(e[7]))),
        i
    }
    ,
    SVGResource.prototype.dispose = function() {
        ur.prototype.dispose.call(this),
        this._resolve = null,
        this._crossorigin = null
    }
    ,
    SVGResource.test = function(t, e) {
        return "svg" === e || "string" == typeof t && /^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t) || "string" == typeof t && SVGResource.SVG_XML.test(t)
    }
    ,
    SVGResource.SVG_XML = /^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,
    SVGResource.SVG_SIZE = /<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,
    SVGResource);
    function SVGResource(t, e) {
        var i = this;
        return e = e || {},
        (i = ur.call(this, document.createElement("canvas")) || this)._width = 0,
        i._height = 0,
        i.svg = t,
        i.scale = e.scale || 1,
        i._overrideWidth = e.width,
        i._overrideHeight = e.height,
        i._resolve = null,
        i._crossorigin = e.crossorigin,
        i._load = null,
        !1 !== e.autoLoad && i.load(),
        i
    }
    var hr, dr = (__extends$h(VideoResource, hr = rr),
    VideoResource.prototype.update = function(t) {
        if (!this.destroyed) {
            var e = Pi.shared.elapsedMS * this.source.playbackRate;
            this._msToNextUpdate = Math.floor(this._msToNextUpdate - e),
            (!this._updateFPS || this._msToNextUpdate <= 0) && (hr.prototype.update.call(this),
            this._msToNextUpdate = this._updateFPS ? Math.floor(1e3 / this._updateFPS) : 0)
        }
    }
    ,
    VideoResource.prototype.load = function() {
        var e = this;
        if (this._load)
            return this._load;
        var i = this.source;
        return (i.readyState === i.HAVE_ENOUGH_DATA || i.readyState === i.HAVE_FUTURE_DATA) && i.width && i.height && (i.complete = !0),
        i.addEventListener("play", this._onPlayStart.bind(this)),
        i.addEventListener("pause", this._onPlayStop.bind(this)),
        this._isSourceReady() ? this._onCanPlay() : (i.addEventListener("canplay", this._onCanPlay),
        i.addEventListener("canplaythrough", this._onCanPlay),
        i.addEventListener("error", this._onError, !0)),
        this._load = new Promise(function(t) {
            e.valid ? t(e) : (e._resolve = t,
            i.load())
        }
        ),
        this._load
    }
    ,
    VideoResource.prototype._onError = function(t) {
        this.source.removeEventListener("error", this._onError, !0),
        this.onError.emit(t)
    }
    ,
    VideoResource.prototype._isSourcePlaying = function() {
        var t = this.source;
        return 0 < t.currentTime && !1 === t.paused && !1 === t.ended && 2 < t.readyState
    }
    ,
    VideoResource.prototype._isSourceReady = function() {
        var t = this.source;
        return 3 === t.readyState || 4 === t.readyState
    }
    ,
    VideoResource.prototype._onPlayStart = function() {
        this.valid || this._onCanPlay(),
        this.autoUpdate && !this._isConnectedToTicker && (Pi.shared.add(this.update, this),
        this._isConnectedToTicker = !0)
    }
    ,
    VideoResource.prototype._onPlayStop = function() {
        this._isConnectedToTicker && (Pi.shared.remove(this.update, this),
        this._isConnectedToTicker = !1)
    }
    ,
    VideoResource.prototype._onCanPlay = function() {
        var t = this.source;
        t.removeEventListener("canplay", this._onCanPlay),
        t.removeEventListener("canplaythrough", this._onCanPlay);
        var e = this.valid;
        this.resize(t.videoWidth, t.videoHeight),
        !e && this._resolve && (this._resolve(this),
        this._resolve = null),
        this._isSourcePlaying() ? this._onPlayStart() : this.autoPlay && t.play()
    }
    ,
    VideoResource.prototype.dispose = function() {
        this._isConnectedToTicker && (Pi.shared.remove(this.update, this),
        this._isConnectedToTicker = !1);
        var t = this.source;
        t && (t.removeEventListener("error", this._onError, !0),
        t.pause(),
        t.src = "",
        t.load()),
        hr.prototype.dispose.call(this)
    }
    ,
    Object.defineProperty(VideoResource.prototype, "autoUpdate", {
        get: function() {
            return this._autoUpdate
        },
        set: function(t) {
            t !== this._autoUpdate && (this._autoUpdate = t,
            !this._autoUpdate && this._isConnectedToTicker ? (Pi.shared.remove(this.update, this),
            this._isConnectedToTicker = !1) : this._autoUpdate && !this._isConnectedToTicker && this._isSourcePlaying() && (Pi.shared.add(this.update, this),
            this._isConnectedToTicker = !0))
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(VideoResource.prototype, "updateFPS", {
        get: function() {
            return this._updateFPS
        },
        set: function(t) {
            t !== this._updateFPS && (this._updateFPS = t)
        },
        enumerable: !1,
        configurable: !0
    }),
    VideoResource.test = function(t, e) {
        return globalThis.HTMLVideoElement && t instanceof HTMLVideoElement || -1 < VideoResource.TYPES.indexOf(e)
    }
    ,
    VideoResource.TYPES = ["mp4", "m4v", "webm", "ogg", "ogv", "h264", "avi", "mov"],
    VideoResource.MIME_TYPES = {
        ogv: "video/ogg",
        mov: "video/quicktime",
        m4v: "video/mp4"
    },
    VideoResource);
    function VideoResource(t, e) {
        var i = this;
        if (e = e || {},
        !(t instanceof HTMLVideoElement)) {
            var r = document.createElement("video");
            r.setAttribute("preload", "auto"),
            r.setAttribute("webkit-playsinline", ""),
            r.setAttribute("playsinline", ""),
            "string" == typeof t && (t = [t]);
            var n = t[0].src || t[0];
            rr.crossOrigin(r, n, e.crossorigin);
            for (var o = 0; o < t.length; ++o) {
                var s = document.createElement("source")
                  , a = t[o]
                  , l = a.src
                  , c = a.mime
                  , u = (l = l || t[o]).split("?").shift().toLowerCase()
                  , p = u.slice(u.lastIndexOf(".") + 1);
                c = c || VideoResource.MIME_TYPES[p] || "video/" + p,
                s.src = l,
                s.type = c,
                r.appendChild(s)
            }
            t = r
        }
        return (i = hr.call(this, t) || this).noSubImage = !0,
        i._autoUpdate = !0,
        i._isConnectedToTicker = !1,
        i._updateFPS = e.updateFPS || 0,
        i._msToNextUpdate = 0,
        i.autoPlay = !1 !== e.autoPlay,
        i._load = null,
        i._resolve = null,
        i._onCanPlay = i._onCanPlay.bind(i),
        i._onError = i._onError.bind(i),
        !1 !== e.autoLoad && i.load(),
        i
    }
    var _r, yr = (__extends$h(ImageBitmapResource, _r = rr),
    ImageBitmapResource.test = function(t) {
        return !!globalThis.createImageBitmap && t instanceof ImageBitmap
    }
    ,
    ImageBitmapResource);
    function ImageBitmapResource(t) {
        return _r.call(this, t) || this
    }
    Hi.push(cr, yr, or, dr, pr, Xi, ar, er);
    var fr, mr = {
        __proto__: null,
        Resource: zi,
        BaseImageResource: rr,
        INSTALLED: Hi,
        autoDetectResource: autoDetectResource,
        AbstractMultiResource: $i,
        ArrayResource: er,
        BufferResource: Xi,
        CanvasResource: or,
        CubeResource: ar,
        ImageResource: cr,
        SVGResource: pr,
        VideoResource: dr,
        ImageBitmapResource: yr
    }, Tr = (__extends$h(DepthResource, fr = Xi),
    DepthResource.prototype.upload = function(t, e, i) {
        var r = t.gl;
        r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL, e.alphaMode === rt.ALPHA_MODES.UNPACK);
        var n = e.realWidth
          , o = e.realHeight;
        return i.width === n && i.height === o ? r.texSubImage2D(e.target, 0, 0, 0, n, o, e.format, i.type, this.data) : (i.width = n,
        i.height = o,
        r.texImage2D(e.target, 0, i.internalFormat, n, o, 0, e.format, i.type, this.data)),
        !0
    }
    ,
    DepthResource);
    function DepthResource() {
        return null !== fr && fr.apply(this, arguments) || this
    }
    var gr = (Object.defineProperty(Framebuffer.prototype, "colorTexture", {
        get: function() {
            return this.colorTextures[0]
        },
        enumerable: !1,
        configurable: !0
    }),
    Framebuffer.prototype.addColorTexture = function(t, e) {
        return void 0 === t && (t = 0),
        this.colorTextures[t] = e || new Qi(null,{
            scaleMode: rt.SCALE_MODES.NEAREST,
            resolution: 1,
            mipmap: rt.MIPMAP_MODES.OFF,
            width: this.width,
            height: this.height
        }),
        this.dirtyId++,
        this.dirtyFormat++,
        this
    }
    ,
    Framebuffer.prototype.addDepthTexture = function(t) {
        return this.depthTexture = t || new Qi(new Tr(null,{
            width: this.width,
            height: this.height
        }),{
            scaleMode: rt.SCALE_MODES.NEAREST,
            resolution: 1,
            width: this.width,
            height: this.height,
            mipmap: rt.MIPMAP_MODES.OFF,
            format: rt.FORMATS.DEPTH_COMPONENT,
            type: rt.TYPES.UNSIGNED_SHORT
        }),
        this.dirtyId++,
        this.dirtyFormat++,
        this
    }
    ,
    Framebuffer.prototype.enableDepth = function() {
        return this.depth = !0,
        this.dirtyId++,
        this.dirtyFormat++,
        this
    }
    ,
    Framebuffer.prototype.enableStencil = function() {
        return this.stencil = !0,
        this.dirtyId++,
        this.dirtyFormat++,
        this
    }
    ,
    Framebuffer.prototype.resize = function(t, e) {
        if (t = Math.round(t),
        e = Math.round(e),
        t !== this.width || e !== this.height) {
            this.width = t,
            this.height = e,
            this.dirtyId++,
            this.dirtySize++;
            for (var i = 0; i < this.colorTextures.length; i++) {
                var r = this.colorTextures[i]
                  , n = r.resolution;
                r.setSize(t / n, e / n)
            }
            this.depthTexture && (n = this.depthTexture.resolution,
            this.depthTexture.setSize(t / n, e / n))
        }
    }
    ,
    Framebuffer.prototype.dispose = function() {
        this.disposeRunner.emit(this, !1)
    }
    ,
    Framebuffer.prototype.destroyDepthTexture = function() {
        this.depthTexture && (this.depthTexture.destroy(),
        this.depthTexture = null,
        ++this.dirtyId,
        ++this.dirtyFormat)
    }
    ,
    Framebuffer);
    function Framebuffer(t, e) {
        this.width = Math.round(t || 100),
        this.height = Math.round(e || 100),
        this.stencil = !1,
        this.depth = !1,
        this.dirtyId = 0,
        this.dirtyFormat = 0,
        this.dirtySize = 0,
        this.depthTexture = null,
        this.colorTextures = [],
        this.glFramebuffers = {},
        this.disposeRunner = new ji("disposeFramebuffer"),
        this.multisample = rt.MSAA_QUALITY.NONE
    }
    var vr, Er = (__extends$h(BaseRenderTexture, vr = Qi),
    BaseRenderTexture.prototype.resize = function(t, e) {
        this.framebuffer.resize(t * this.resolution, e * this.resolution),
        this.setRealSize(this.framebuffer.width, this.framebuffer.height)
    }
    ,
    BaseRenderTexture.prototype.dispose = function() {
        this.framebuffer.dispose(),
        vr.prototype.dispose.call(this)
    }
    ,
    BaseRenderTexture.prototype.destroy = function() {
        vr.prototype.destroy.call(this),
        this.framebuffer.destroyDepthTexture(),
        this.framebuffer = null
    }
    ,
    BaseRenderTexture);
    function BaseRenderTexture(t) {
        void 0 === t && (t = {});
        var e = this;
        "number" == typeof t && (t = {
            width: arguments[0],
            height: arguments[1],
            scaleMode: arguments[2],
            resolution: arguments[3]
        });
        return t.width = t.width || 100,
        t.height = t.height || 100,
        t.multisample = void 0 !== t.multisample ? t.multisample : rt.MSAA_QUALITY.NONE,
        (e = vr.call(this, null, t) || this).mipmap = rt.MIPMAP_MODES.OFF,
        e.valid = !0,
        e.clearColor = [0, 0, 0, 0],
        e.framebuffer = new gr(e.realWidth,e.realHeight).addColorTexture(0, e),
        e.framebuffer.multisample = t.multisample,
        e.maskStack = [],
        e.filterStack = [{}],
        e
    }
    var Sr = (TextureUvs.prototype.set = function(t, e, i) {
        var r = e.width
          , n = e.height;
        if (i) {
            var o = t.width / 2 / r
              , s = t.height / 2 / n
              , a = t.x / r + o
              , l = t.y / n + s;
            i = Le.add(i, Le.NW),
            this.x0 = a + o * Le.uX(i),
            this.y0 = l + s * Le.uY(i),
            i = Le.add(i, 2),
            this.x1 = a + o * Le.uX(i),
            this.y1 = l + s * Le.uY(i),
            i = Le.add(i, 2),
            this.x2 = a + o * Le.uX(i),
            this.y2 = l + s * Le.uY(i),
            i = Le.add(i, 2),
            this.x3 = a + o * Le.uX(i),
            this.y3 = l + s * Le.uY(i)
        } else
            this.x0 = t.x / r,
            this.y0 = t.y / n,
            this.x1 = (t.x + t.width) / r,
            this.y1 = t.y / n,
            this.x2 = (t.x + t.width) / r,
            this.y2 = (t.y + t.height) / n,
            this.x3 = t.x / r,
            this.y3 = (t.y + t.height) / n;
        this.uvsFloat32[0] = this.x0,
        this.uvsFloat32[1] = this.y0,
        this.uvsFloat32[2] = this.x1,
        this.uvsFloat32[3] = this.y1,
        this.uvsFloat32[4] = this.x2,
        this.uvsFloat32[5] = this.y2,
        this.uvsFloat32[6] = this.x3,
        this.uvsFloat32[7] = this.y3
    }
    ,
    TextureUvs.prototype.toString = function() {
        return "[@pixi/core:TextureUvs x0=" + this.x0 + " y0=" + this.y0 + " x1=" + this.x1 + " y1=" + this.y1 + " x2=" + this.x2 + " y2=" + this.y2 + " x3=" + this.x3 + " y3=" + this.y3 + "]"
    }
    ,
    TextureUvs);
    function TextureUvs() {
        this.x0 = 0,
        this.y0 = 0,
        this.x1 = 1,
        this.y1 = 0,
        this.x2 = 1,
        this.y2 = 1,
        this.x3 = 0,
        this.y3 = 1,
        this.uvsFloat32 = new Float32Array(8)
    }
    var br = new Sr;
    function removeAllHandlers(t) {
        t.destroy = function _emptyDestroy() {}
        ,
        t.on = function _emptyOn() {}
        ,
        t.once = function _emptyOnce() {}
        ,
        t.emit = function _emptyEmit() {}
    }
    var Ir, Cr = (__extends$h(Texture, Ir = dt),
    Texture.prototype.update = function() {
        this.baseTexture.resource && this.baseTexture.resource.update()
    }
    ,
    Texture.prototype.onBaseTextureUpdated = function(t) {
        if (this.noFrame) {
            if (!this.baseTexture.valid)
                return;
            this._frame.width = t.width,
            this._frame.height = t.height,
            this.valid = !0,
            this.updateUvs()
        } else
            this.frame = this._frame;
        this.emit("update", this)
    }
    ,
    Texture.prototype.destroy = function(t) {
        if (this.baseTexture) {
            if (t) {
                var e = this.baseTexture.resource;
                e && e.url && ae[e.url] && Texture.removeFromCache(e.url),
                this.baseTexture.destroy()
            }
            this.baseTexture.off("loaded", this.onBaseTextureUpdated, this),
            this.baseTexture.off("update", this.onBaseTextureUpdated, this),
            this.baseTexture = null
        }
        this._frame = null,
        this._uvs = null,
        this.trim = null,
        this.orig = null,
        this.valid = !1,
        Texture.removeFromCache(this),
        this.textureCacheIds = null
    }
    ,
    Texture.prototype.clone = function() {
        var t = this._frame.clone()
          , e = this._frame === this.orig ? t : this.orig.clone()
          , i = new Texture(this.baseTexture,!this.noFrame && t,e,this.trim && this.trim.clone(),this.rotate,this.defaultAnchor);
        return this.noFrame && (i._frame = t),
        i
    }
    ,
    Texture.prototype.updateUvs = function() {
        this._uvs === br && (this._uvs = new Sr),
        this._uvs.set(this._frame, this.baseTexture, this.rotate),
        this._updateID++
    }
    ,
    Texture.from = function(t, e, i) {
        void 0 === e && (e = {}),
        void 0 === i && (i = pt.STRICT_TEXTURE_CACHE);
        var r = "string" == typeof t
          , n = null;
        if (r)
            n = t;
        else if (t instanceof Qi) {
            if (!t.cacheId) {
                var o = e && e.pixiIdPrefix || "pixiid";
                t.cacheId = o + "-" + uid(),
                Qi.addToCache(t, t.cacheId)
            }
            n = t.cacheId
        } else
            t._pixiId || (o = e && e.pixiIdPrefix || "pixiid",
            t._pixiId = o + "_" + uid()),
            n = t._pixiId;
        var s = ae[n];
        if (r && i && !s)
            throw new Error('The cacheId "' + n + '" does not exist in TextureCache.');
        return s || t instanceof Qi ? !s && t instanceof Qi && (s = new Texture(t),
        Texture.addToCache(s, n)) : (e.resolution || (e.resolution = getResolutionOfUrl(t)),
        (s = new Texture(new Qi(t,e))).baseTexture.cacheId = n,
        Qi.addToCache(s.baseTexture, n),
        Texture.addToCache(s, n)),
        s
    }
    ,
    Texture.fromURL = function(t, e) {
        var i = Object.assign({
            autoLoad: !1
        }, null == e ? void 0 : e.resourceOptions)
          , r = Texture.from(t, Object.assign({
            resourceOptions: i
        }, e), !1)
          , n = r.baseTexture.resource;
        return r.baseTexture.valid ? Promise.resolve(r) : n.load().then(function() {
            return Promise.resolve(r)
        })
    }
    ,
    Texture.fromBuffer = function(t, e, i, r) {
        return new Texture(Qi.fromBuffer(t, e, i, r))
    }
    ,
    Texture.fromLoader = function(t, e, i, r) {
        var n = new Qi(t,Object.assign({
            scaleMode: pt.SCALE_MODE,
            resolution: getResolutionOfUrl(e)
        }, r))
          , o = n.resource;
        o instanceof cr && (o.url = e);
        var s = new Texture(n);
        return i = i || e,
        Qi.addToCache(s.baseTexture, i),
        Texture.addToCache(s, i),
        i !== e && (Qi.addToCache(s.baseTexture, e),
        Texture.addToCache(s, e)),
        s.baseTexture.valid ? Promise.resolve(s) : new Promise(function(t) {
            s.baseTexture.once("loaded", function() {
                return t(s)
            })
        }
        )
    }
    ,
    Texture.addToCache = function(t, e) {
        e && (-1 === t.textureCacheIds.indexOf(e) && t.textureCacheIds.push(e),
        ae[e] && console.warn("Texture added to the cache with an id [" + e + "] that already had an entry"),
        ae[e] = t)
    }
    ,
    Texture.removeFromCache = function(t) {
        if ("string" == typeof t) {
            var e = ae[t];
            if (e) {
                var i = e.textureCacheIds.indexOf(t);
                return -1 < i && e.textureCacheIds.splice(i, 1),
                delete ae[t],
                e
            }
        } else if (t && t.textureCacheIds) {
            for (var r = 0; r < t.textureCacheIds.length; ++r)
                ae[t.textureCacheIds[r]] === t && delete ae[t.textureCacheIds[r]];
            return t.textureCacheIds.length = 0,
            t
        }
        return null
    }
    ,
    Object.defineProperty(Texture.prototype, "resolution", {
        get: function() {
            return this.baseTexture.resolution
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Texture.prototype, "frame", {
        get: function() {
            return this._frame
        },
        set: function(t) {
            this._frame = t,
            this.noFrame = !1;
            var e = t.x
              , i = t.y
              , r = t.width
              , n = t.height
              , o = e + r > this.baseTexture.width
              , s = i + n > this.baseTexture.height;
            if (o || s) {
                var a = o && s ? "and" : "or"
                  , l = "X: " + e + " + " + r + " = " + (e + r) + " > " + this.baseTexture.width
                  , c = "Y: " + i + " + " + n + " = " + (i + n) + " > " + this.baseTexture.height;
                throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: " + l + " " + a + " " + c)
            }
            this.valid = r && n && this.baseTexture.valid,
            this.trim || this.rotate || (this.orig = t),
            this.valid && this.updateUvs()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Texture.prototype, "rotate", {
        get: function() {
            return this._rotate
        },
        set: function(t) {
            this._rotate = t,
            this.valid && this.updateUvs()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Texture.prototype, "width", {
        get: function() {
            return this.orig.width
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Texture.prototype, "height", {
        get: function() {
            return this.orig.height
        },
        enumerable: !1,
        configurable: !0
    }),
    Texture.prototype.castToBaseTexture = function() {
        return this.baseTexture
    }
    ,
    Object.defineProperty(Texture, "EMPTY", {
        get: function() {
            return Texture._EMPTY || (removeAllHandlers(Texture._EMPTY = new Texture(new Qi)),
            removeAllHandlers(Texture._EMPTY.baseTexture)),
            Texture._EMPTY
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Texture, "WHITE", {
        get: function() {
            if (!Texture._WHITE) {
                var t = document.createElement("canvas")
                  , e = t.getContext("2d");
                t.width = 16,
                t.height = 16,
                e.fillStyle = "white",
                e.fillRect(0, 0, 16, 16),
                removeAllHandlers(Texture._WHITE = new Texture(new Qi(new or(t)))),
                removeAllHandlers(Texture._WHITE.baseTexture)
            }
            return Texture._WHITE
        },
        enumerable: !1,
        configurable: !0
    }),
    Texture);
    function Texture(t, e, i, r, n, o) {
        var s = Ir.call(this) || this;
        if (s.noFrame = !1,
        e || (s.noFrame = !0,
        e = new ge(0,0,1,1)),
        t instanceof Texture && (t = t.baseTexture),
        s.baseTexture = t,
        s._frame = e,
        s.trim = r,
        s.valid = !1,
        s._uvs = br,
        s.uvMatrix = null,
        s.orig = i || e,
        s._rotate = Number(n || 0),
        !0 === n)
            s._rotate = 2;
        else if (s._rotate % 2 != 0)
            throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");
        return s.defaultAnchor = o ? new me(o.x,o.y) : new me(0,0),
        s._updateID = 0,
        s.textureCacheIds = [],
        t.valid ? s.noFrame ? t.valid && s.onBaseTextureUpdated(t) : s.frame = e : t.once("loaded", s.onBaseTextureUpdated, s),
        s.noFrame && t.on("update", s.onBaseTextureUpdated, s),
        s
    }
    var Ur, Ar = (__extends$h(RenderTexture, Ur = Cr),
    Object.defineProperty(RenderTexture.prototype, "framebuffer", {
        get: function() {
            return this.baseTexture.framebuffer
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(RenderTexture.prototype, "multisample", {
        get: function() {
            return this.framebuffer.multisample
        },
        set: function(t) {
            this.framebuffer.multisample = t
        },
        enumerable: !1,
        configurable: !0
    }),
    RenderTexture.prototype.resize = function(t, e, i) {
        void 0 === i && (i = !0);
        var r = this.baseTexture.resolution
          , n = Math.round(t * r) / r
          , o = Math.round(e * r) / r;
        this.valid = 0 < n && 0 < o,
        this._frame.width = this.orig.width = n,
        this._frame.height = this.orig.height = o,
        i && this.baseTexture.resize(n, o),
        this.updateUvs()
    }
    ,
    RenderTexture.prototype.setResolution = function(t) {
        var e = this.baseTexture;
        e.resolution !== t && (e.setResolution(t),
        this.resize(e.width, e.height, !1))
    }
    ,
    RenderTexture.create = function(t) {
        for (var e = arguments, i = [], r = 1; r < arguments.length; r++)
            i[r - 1] = e[r];
        return "number" == typeof t && (deprecation("6.0.0", "Arguments (width, height, scaleMode, resolution) have been deprecated."),
        t = {
            width: t,
            height: i[0],
            scaleMode: i[1],
            resolution: i[2]
        }),
        new RenderTexture(new Er(t))
    }
    ,
    RenderTexture);
    function RenderTexture(t, e) {
        var i = Ur.call(this, t, e) || this;
        return i.valid = !0,
        i.filterFrame = null,
        i.filterPoolKey = null,
        i.updateUvs(),
        i
    }
    var wr = (RenderTexturePool.prototype.createTexture = function(t, e, i) {
        void 0 === i && (i = rt.MSAA_QUALITY.NONE);
        var r = new Er(Object.assign({
            width: t,
            height: e,
            resolution: 1,
            multisample: i
        }, this.textureOptions));
        return new Ar(r)
    }
    ,
    RenderTexturePool.prototype.getOptimalTexture = function(t, e, i, r) {
        var n;
        void 0 === i && (i = 1),
        void 0 === r && (r = rt.MSAA_QUALITY.NONE),
        t = Math.ceil(t * i - 1e-6),
        e = Math.ceil(e * i - 1e-6),
        this.enableFullScreen && t === this._pixelsWidth && e === this._pixelsHeight ? n = 1 < r ? -r : -1 : (n = ((65535 & (t = nextPow2(t))) << 16 | 65535 & (e = nextPow2(e))) >>> 0,
        1 < r && (n += 4294967296 * r)),
        this.texturePool[n] || (this.texturePool[n] = []);
        var o = this.texturePool[n].pop();
        return (o = o || this.createTexture(t, e, r)).filterPoolKey = n,
        o.setResolution(i),
        o
    }
    ,
    RenderTexturePool.prototype.getFilterTexture = function(t, e, i) {
        var r = this.getOptimalTexture(t.width, t.height, e || t.resolution, i || rt.MSAA_QUALITY.NONE);
        return r.filterFrame = t.filterFrame,
        r
    }
    ,
    RenderTexturePool.prototype.returnTexture = function(t) {
        var e = t.filterPoolKey;
        t.filterFrame = null,
        this.texturePool[e].push(t)
    }
    ,
    RenderTexturePool.prototype.returnFilterTexture = function(t) {
        this.returnTexture(t)
    }
    ,
    RenderTexturePool.prototype.clear = function(t) {
        if (t = !1 !== t)
            for (var e in this.texturePool) {
                var i = this.texturePool[e];
                if (i)
                    for (var r = 0; r < i.length; r++)
                        i[r].destroy(!0)
            }
        this.texturePool = {}
    }
    ,
    RenderTexturePool.prototype.setScreenSize = function(t) {
        if (t.width !== this._pixelsWidth || t.height !== this._pixelsHeight) {
            for (var e in this.enableFullScreen = 0 < t.width && 0 < t.height,
            this.texturePool)
                if (Number(e) < 0) {
                    var i = this.texturePool[e];
                    if (i)
                        for (var r = 0; r < i.length; r++)
                            i[r].destroy(!0);
                    this.texturePool[e] = []
                }
            this._pixelsWidth = t.width,
            this._pixelsHeight = t.height
        }
    }
    ,
    RenderTexturePool.SCREEN_KEY = -1,
    RenderTexturePool);
    function RenderTexturePool(t) {
        this.texturePool = {},
        this.textureOptions = t || {},
        this.enableFullScreen = !1,
        this._pixelsWidth = 0,
        this._pixelsHeight = 0
    }
    var Or = (Attribute.prototype.destroy = function() {
        this.buffer = null
    }
    ,
    Attribute.from = function(t, e, i, r, n) {
        return new Attribute(t,e,i,r,n)
    }
    ,
    Attribute);
    function Attribute(t, e, i, r, n, o, s) {
        void 0 === e && (e = 0),
        void 0 === i && (i = !1),
        void 0 === r && (r = rt.TYPES.FLOAT),
        this.buffer = t,
        this.size = e,
        this.normalized = i,
        this.type = r,
        this.stride = n,
        this.start = o,
        this.instance = s
    }
    var Rr = 0
      , Pr = (Buffer.prototype.update = function(t) {
        t instanceof Array && (t = new Float32Array(t)),
        this.data = t || this.data,
        this._updateID++
    }
    ,
    Buffer.prototype.dispose = function() {
        this.disposeRunner.emit(this, !1)
    }
    ,
    Buffer.prototype.destroy = function() {
        this.dispose(),
        this.data = null
    }
    ,
    Object.defineProperty(Buffer.prototype, "index", {
        get: function() {
            return this.type === rt.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER
        },
        set: function(t) {
            this.type = t ? rt.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER : rt.BUFFER_TYPE.ARRAY_BUFFER
        },
        enumerable: !1,
        configurable: !0
    }),
    Buffer.from = function(t) {
        return t instanceof Array && (t = new Float32Array(t)),
        new Buffer(t)
    }
    ,
    Buffer);
    function Buffer(t, e, i) {
        void 0 === e && (e = !0),
        void 0 === i && (i = !1),
        this.data = t || new Float32Array(1),
        this._glBuffers = {},
        this._updateID = 0,
        this.index = i,
        this.static = e,
        this.id = Rr++,
        this.disposeRunner = new ji("disposeBuffer")
    }
    var Dr = {
        Float32Array: Float32Array,
        Uint32Array: Uint32Array,
        Int32Array: Int32Array,
        Uint8Array: Uint8Array
    };
    var Lr = {
        5126: 4,
        5123: 2,
        5121: 1
    }
      , Nr = 0
      , xr = {
        Float32Array: Float32Array,
        Uint32Array: Uint32Array,
        Int32Array: Int32Array,
        Uint8Array: Uint8Array,
        Uint16Array: Uint16Array
    }
      , Mr = (Geometry.prototype.addAttribute = function(t, e, i, r, n, o, s, a) {
        if (void 0 === i && (i = 0),
        void 0 === r && (r = !1),
        void 0 === a && (a = !1),
        !e)
            throw new Error("You must pass a buffer when creating an attribute");
        e instanceof Pr || (e instanceof Array && (e = new Float32Array(e)),
        e = new Pr(e));
        var l = t.split("|");
        if (1 < l.length) {
            for (var c = 0; c < l.length; c++)
                this.addAttribute(l[c], e, i, r, n);
            return this
        }
        var u = this.buffers.indexOf(e);
        return -1 === u && (this.buffers.push(e),
        u = this.buffers.length - 1),
        this.attributes[t] = new Or(u,i,r,n,o,s,a),
        this.instanced = this.instanced || a,
        this
    }
    ,
    Geometry.prototype.getAttribute = function(t) {
        return this.attributes[t]
    }
    ,
    Geometry.prototype.getBuffer = function(t) {
        return this.buffers[this.getAttribute(t).buffer]
    }
    ,
    Geometry.prototype.addIndex = function(t) {
        return t instanceof Pr || (t instanceof Array && (t = new Uint16Array(t)),
        t = new Pr(t)),
        t.type = rt.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,
        this.indexBuffer = t,
        -1 === this.buffers.indexOf(t) && this.buffers.push(t),
        this
    }
    ,
    Geometry.prototype.getIndex = function() {
        return this.indexBuffer
    }
    ,
    Geometry.prototype.interleave = function() {
        if (1 === this.buffers.length || 2 === this.buffers.length && this.indexBuffer)
            return this;
        var t, e = [], i = [], r = new Pr;
        for (t in this.attributes) {
            var n = this.attributes[t]
              , o = this.buffers[n.buffer];
            e.push(o.data),
            i.push(n.size * Lr[n.type] / 4),
            n.buffer = 0
        }
        for (r.data = function interleaveTypedArrays(t, e) {
            for (var i = 0, r = 0, n = {}, o = 0; o < t.length; o++)
                r += e[o],
                i += t[o].length;
            var s = new ArrayBuffer(4 * i)
              , a = null
              , l = 0;
            for (o = 0; o < t.length; o++) {
                var c = e[o]
                  , u = t[o]
                  , p = getBufferType(u);
                n[p] || (n[p] = new Dr[p](s)),
                a = n[p];
                for (var h = 0; h < u.length; h++)
                    a[(h / c | 0) * r + l + h % c] = u[h];
                l += c
            }
            return new Float32Array(s)
        }(e, i),
        t = 0; t < this.buffers.length; t++)
            this.buffers[t] !== this.indexBuffer && this.buffers[t].destroy();
        return this.buffers = [r],
        this.indexBuffer && this.buffers.push(this.indexBuffer),
        this
    }
    ,
    Geometry.prototype.getSize = function() {
        for (var t in this.attributes) {
            var e = this.attributes[t];
            return this.buffers[e.buffer].data.length / (e.stride / 4 || e.size)
        }
        return 0
    }
    ,
    Geometry.prototype.dispose = function() {
        this.disposeRunner.emit(this, !1)
    }
    ,
    Geometry.prototype.destroy = function() {
        this.dispose(),
        this.buffers = null,
        this.indexBuffer = null,
        this.attributes = null
    }
    ,
    Geometry.prototype.clone = function() {
        for (var t = new Geometry, e = 0; e < this.buffers.length; e++)
            t.buffers[e] = new Pr(this.buffers[e].data.slice(0));
        for (var e in this.attributes) {
            var i = this.attributes[e];
            t.attributes[e] = new Or(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)
        }
        return this.indexBuffer && (t.indexBuffer = t.buffers[this.buffers.indexOf(this.indexBuffer)],
        t.indexBuffer.type = rt.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),
        t
    }
    ,
    Geometry.merge = function(t) {
        for (var e, i = new Geometry, r = [], n = [], o = [], s = 0; s < t.length; s++) {
            e = t[s];
            for (var a = 0; a < e.buffers.length; a++)
                n[a] = n[a] || 0,
                n[a] += e.buffers[a].data.length,
                o[a] = 0
        }
        for (s = 0; s < e.buffers.length; s++)
            r[s] = new (xr[getBufferType(e.buffers[s].data)])(n[s]),
            i.buffers[s] = new Pr(r[s]);
        for (s = 0; s < t.length; s++)
            for (e = t[s],
            a = 0; a < e.buffers.length; a++)
                r[a].set(e.buffers[a].data, o[a]),
                o[a] += e.buffers[a].data.length;
        if (i.attributes = e.attributes,
        e.indexBuffer) {
            i.indexBuffer = i.buffers[e.buffers.indexOf(e.indexBuffer)],
            i.indexBuffer.type = rt.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;
            var l = 0
              , c = 0
              , u = 0
              , p = 0;
            for (s = 0; s < e.buffers.length; s++)
                if (e.buffers[s] !== e.indexBuffer) {
                    p = s;
                    break
                }
            for (var s in e.attributes) {
                var h = e.attributes[s];
                (0 | h.buffer) === p && (c += h.size * Lr[h.type] / 4)
            }
            for (s = 0; s < t.length; s++) {
                var d = t[s].indexBuffer.data;
                for (a = 0; a < d.length; a++)
                    i.indexBuffer.data[a + u] += l;
                l += t[s].buffers[p].data.length / c,
                u += d.length
            }
        }
        return i
    }
    ,
    Geometry);
    function Geometry(t, e) {
        void 0 === t && (t = []),
        void 0 === e && (e = {}),
        this.buffers = t,
        this.indexBuffer = null,
        this.attributes = e,
        this.glVertexArrayObjects = {},
        this.id = Nr++,
        this.instanced = !1,
        this.instanceCount = 1,
        this.disposeRunner = new ji("disposeGeometry"),
        this.refCount = 0
    }
    var Vr, Br = (__extends$h(Quad, Vr = Mr),
    Quad);
    function Quad() {
        var t = Vr.call(this) || this;
        return t.addAttribute("aVertexPosition", new Float32Array([0, 0, 1, 0, 1, 1, 0, 1])).addIndex([0, 1, 3, 2]),
        t
    }
    var Fr, Gr = (__extends$h(QuadUv, Fr = Mr),
    QuadUv.prototype.map = function(t, e) {
        var i = 0
          , r = 0;
        return this.uvs[0] = i,
        this.uvs[1] = r,
        this.uvs[2] = i + e.width / t.width,
        this.uvs[3] = r,
        this.uvs[4] = i + e.width / t.width,
        this.uvs[5] = r + e.height / t.height,
        this.uvs[6] = i,
        this.uvs[7] = r + e.height / t.height,
        i = e.x,
        r = e.y,
        this.vertices[0] = i,
        this.vertices[1] = r,
        this.vertices[2] = i + e.width,
        this.vertices[3] = r,
        this.vertices[4] = i + e.width,
        this.vertices[5] = r + e.height,
        this.vertices[6] = i,
        this.vertices[7] = r + e.height,
        this.invalidate(),
        this
    }
    ,
    QuadUv.prototype.invalidate = function() {
        return this.vertexBuffer._updateID++,
        this.uvBuffer._updateID++,
        this
    }
    ,
    QuadUv);
    function QuadUv() {
        var t = Fr.call(this) || this;
        return t.vertices = new Float32Array([-1, -1, 1, -1, 1, 1, -1, 1]),
        t.uvs = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),
        t.vertexBuffer = new Pr(t.vertices),
        t.uvBuffer = new Pr(t.uvs),
        t.addAttribute("aVertexPosition", t.vertexBuffer).addAttribute("aTextureCoord", t.uvBuffer).addIndex([0, 1, 2, 0, 2, 3]),
        t
    }
    var kr = 0
      , jr = (UniformGroup.prototype.update = function() {
        this.dirtyId++,
        !this.autoManage && this.buffer && this.buffer.update()
    }
    ,
    UniformGroup.prototype.add = function(t, e, i) {
        if (this.ubo)
            throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");
        this.uniforms[t] = new UniformGroup(e,i)
    }
    ,
    UniformGroup.from = function(t, e, i) {
        return new UniformGroup(t,e,i)
    }
    ,
    UniformGroup.uboFrom = function(t, e) {
        return new UniformGroup(t,null == e || e,!0)
    }
    ,
    UniformGroup);
    function UniformGroup(t, e, i) {
        this.group = !0,
        this.syncUniforms = {},
        this.dirtyId = 0,
        this.id = kr++,
        this.static = !!e,
        this.ubo = !!i,
        t instanceof Pr ? (this.buffer = t,
        this.buffer.type = rt.BUFFER_TYPE.UNIFORM_BUFFER,
        this.autoManage = !1,
        this.ubo = !0) : (this.uniforms = t,
        this.ubo && (this.buffer = new Pr(new Float32Array(1)),
        this.buffer.type = rt.BUFFER_TYPE.UNIFORM_BUFFER,
        this.autoManage = !0))
    }
    var Hr = (FilterState.prototype.clear = function() {
        this.target = null,
        this.filters = null,
        this.renderTexture = null
    }
    ,
    FilterState);
    function FilterState() {
        this.renderTexture = null,
        this.target = null,
        this.legacy = !1,
        this.resolution = 1,
        this.multisample = rt.MSAA_QUALITY.NONE,
        this.sourceFrame = new ge,
        this.destinationFrame = new ge,
        this.bindingSourceFrame = new ge,
        this.bindingDestinationFrame = new ge,
        this.filters = [],
        this.transform = null
    }
    var qr = [new me, new me, new me, new me]
      , Yr = new Ce
      , zr = (FilterSystem.prototype.push = function(t, e) {
        for (var i, r, n = this.renderer, o = this.defaultFilterStack, s = this.statePool.pop() || new Hr, a = this.renderer.renderTexture, l = e[0].resolution, c = e[0].multisample, u = e[0].padding, p = e[0].autoFit, h = null === (i = e[0].legacy) || void 0 === i || i, d = 1; d < e.length; d++) {
            var _ = e[d];
            l = Math.min(l, _.resolution),
            c = Math.min(c, _.multisample),
            u = this.useMaxPadding ? Math.max(u, _.padding) : u + _.padding,
            p = p && _.autoFit,
            h = h || null === (r = _.legacy) || void 0 === r || r
        }
        1 === o.length && (this.defaultFilterStack[0].renderTexture = a.current),
        o.push(s),
        s.resolution = l,
        s.multisample = c,
        s.legacy = h,
        s.target = t,
        s.sourceFrame.copyFrom(t.filterArea || t.getBounds(!0)),
        s.sourceFrame.pad(u);
        var y = this.tempRect.copyFrom(a.sourceFrame);
        n.projection.transform && this.transformAABB(Yr.copyFrom(n.projection.transform).invert(), y),
        p ? (s.sourceFrame.fit(y),
        (s.sourceFrame.width <= 0 || s.sourceFrame.height <= 0) && (s.sourceFrame.width = 0,
        s.sourceFrame.height = 0)) : s.sourceFrame.intersects(y) || (s.sourceFrame.width = 0,
        s.sourceFrame.height = 0),
        this.roundFrame(s.sourceFrame, a.current ? a.current.resolution : n.resolution, a.sourceFrame, a.destinationFrame, n.projection.transform),
        s.renderTexture = this.getOptimalFilterTexture(s.sourceFrame.width, s.sourceFrame.height, l, c),
        s.filters = e,
        s.destinationFrame.width = s.renderTexture.width,
        s.destinationFrame.height = s.renderTexture.height;
        var f = this.tempRect;
        f.x = 0,
        f.y = 0,
        f.width = s.sourceFrame.width,
        f.height = s.sourceFrame.height,
        s.renderTexture.filterFrame = s.sourceFrame,
        s.bindingSourceFrame.copyFrom(a.sourceFrame),
        s.bindingDestinationFrame.copyFrom(a.destinationFrame),
        s.transform = n.projection.transform,
        n.projection.transform = null,
        a.bind(s.renderTexture, s.sourceFrame, f),
        n.framebuffer.clear(0, 0, 0, 0)
    }
    ,
    FilterSystem.prototype.pop = function() {
        var t = this.defaultFilterStack
          , e = t.pop()
          , i = e.filters;
        this.activeState = e;
        var r = this.globalUniforms.uniforms;
        r.outputFrame = e.sourceFrame,
        r.resolution = e.resolution;
        var n = r.inputSize
          , o = r.inputPixel
          , s = r.inputClamp;
        if (n[0] = e.destinationFrame.width,
        n[1] = e.destinationFrame.height,
        n[2] = 1 / n[0],
        n[3] = 1 / n[1],
        o[0] = Math.round(n[0] * e.resolution),
        o[1] = Math.round(n[1] * e.resolution),
        o[2] = 1 / o[0],
        o[3] = 1 / o[1],
        s[0] = .5 * o[2],
        s[1] = .5 * o[3],
        s[2] = e.sourceFrame.width * n[2] - .5 * o[2],
        s[3] = e.sourceFrame.height * n[3] - .5 * o[3],
        e.legacy) {
            var a = r.filterArea;
            a[0] = e.destinationFrame.width,
            a[1] = e.destinationFrame.height,
            a[2] = e.sourceFrame.x,
            a[3] = e.sourceFrame.y,
            r.filterClamp = r.inputClamp
        }
        this.globalUniforms.update();
        var l = t[t.length - 1];
        if (this.renderer.framebuffer.blit(),
        1 === i.length)
            i[0].apply(this, e.renderTexture, l.renderTexture, rt.CLEAR_MODES.BLEND, e),
            this.returnFilterTexture(e.renderTexture);
        else {
            var c = e.renderTexture
              , u = this.getOptimalFilterTexture(c.width, c.height, e.resolution);
            u.filterFrame = c.filterFrame;
            var p = 0;
            for (p = 0; p < i.length - 1; ++p) {
                1 === p && 1 < e.multisample && ((u = this.getOptimalFilterTexture(c.width, c.height, e.resolution)).filterFrame = c.filterFrame),
                i[p].apply(this, c, u, rt.CLEAR_MODES.CLEAR, e);
                var h = c;
                c = u,
                u = h
            }
            i[p].apply(this, c, l.renderTexture, rt.CLEAR_MODES.BLEND, e),
            1 < p && 1 < e.multisample && this.returnFilterTexture(e.renderTexture),
            this.returnFilterTexture(c),
            this.returnFilterTexture(u)
        }
        e.clear(),
        this.statePool.push(e)
    }
    ,
    FilterSystem.prototype.bindAndClear = function(t, e) {
        void 0 === e && (e = rt.CLEAR_MODES.CLEAR);
        var i = this.renderer
          , r = i.renderTexture
          , n = i.state;
        if (t === this.defaultFilterStack[this.defaultFilterStack.length - 1].renderTexture ? this.renderer.projection.transform = this.activeState.transform : this.renderer.projection.transform = null,
        t && t.filterFrame) {
            var o = this.tempRect;
            o.x = 0,
            o.y = 0,
            o.width = t.filterFrame.width,
            o.height = t.filterFrame.height,
            r.bind(t, t.filterFrame, o)
        } else
            t !== this.defaultFilterStack[this.defaultFilterStack.length - 1].renderTexture ? r.bind(t) : this.renderer.renderTexture.bind(t, this.activeState.bindingSourceFrame, this.activeState.bindingDestinationFrame);
        var s = 1 & n.stateId || this.forceClear;
        (e === rt.CLEAR_MODES.CLEAR || e === rt.CLEAR_MODES.BLIT && s) && this.renderer.framebuffer.clear(0, 0, 0, 0)
    }
    ,
    FilterSystem.prototype.applyFilter = function(t, e, i, r) {
        var n = this.renderer;
        n.state.set(t.state),
        this.bindAndClear(i, r),
        t.uniforms.uSampler = e,
        t.uniforms.filterGlobals = this.globalUniforms,
        n.shader.bind(t),
        t.legacy = !!t.program.attributeData.aTextureCoord,
        t.legacy ? (this.quadUv.map(e._frame, e.filterFrame),
        n.geometry.bind(this.quadUv),
        n.geometry.draw(rt.DRAW_MODES.TRIANGLES)) : (n.geometry.bind(this.quad),
        n.geometry.draw(rt.DRAW_MODES.TRIANGLE_STRIP))
    }
    ,
    FilterSystem.prototype.calculateSpriteMatrix = function(t, e) {
        var i = this.activeState
          , r = i.sourceFrame
          , n = i.destinationFrame
          , o = e._texture.orig
          , s = t.set(n.width, 0, 0, n.height, r.x, r.y)
          , a = e.worldTransform.copyTo(Ce.TEMP_MATRIX);
        return a.invert(),
        s.prepend(a),
        s.scale(1 / o.width, 1 / o.height),
        s.translate(e.anchor.x, e.anchor.y),
        s
    }
    ,
    FilterSystem.prototype.destroy = function() {
        this.renderer = null,
        this.texturePool.clear(!1)
    }
    ,
    FilterSystem.prototype.getOptimalFilterTexture = function(t, e, i, r) {
        return void 0 === i && (i = 1),
        void 0 === r && (r = rt.MSAA_QUALITY.NONE),
        this.texturePool.getOptimalTexture(t, e, i, r)
    }
    ,
    FilterSystem.prototype.getFilterTexture = function(t, e, i) {
        if ("number" == typeof t) {
            var r = t;
            t = e,
            e = r
        }
        t = t || this.activeState.renderTexture;
        var n = this.texturePool.getOptimalTexture(t.width, t.height, e || t.resolution, i || rt.MSAA_QUALITY.NONE);
        return n.filterFrame = t.filterFrame,
        n
    }
    ,
    FilterSystem.prototype.returnFilterTexture = function(t) {
        this.texturePool.returnTexture(t)
    }
    ,
    FilterSystem.prototype.emptyPool = function() {
        this.texturePool.clear(!0)
    }
    ,
    FilterSystem.prototype.resize = function() {
        this.texturePool.setScreenSize(this.renderer.view)
    }
    ,
    FilterSystem.prototype.transformAABB = function(t, e) {
        var i = qr[0]
          , r = qr[1]
          , n = qr[2]
          , o = qr[3];
        i.set(e.left, e.top),
        r.set(e.left, e.bottom),
        n.set(e.right, e.top),
        o.set(e.right, e.bottom),
        t.apply(i, i),
        t.apply(r, r),
        t.apply(n, n),
        t.apply(o, o);
        var s = Math.min(i.x, r.x, n.x, o.x)
          , a = Math.min(i.y, r.y, n.y, o.y)
          , l = Math.max(i.x, r.x, n.x, o.x)
          , c = Math.max(i.y, r.y, n.y, o.y);
        e.x = s,
        e.y = a,
        e.width = l - s,
        e.height = c - a
    }
    ,
    FilterSystem.prototype.roundFrame = function(t, e, i, r, n) {
        if (!(t.width <= 0 || t.height <= 0 || i.width <= 0 || i.height <= 0)) {
            if (n) {
                var o = n.a
                  , s = n.b
                  , a = n.c
                  , l = n.d;
                if ((1e-4 < Math.abs(s) || 1e-4 < Math.abs(a)) && (1e-4 < Math.abs(o) || 1e-4 < Math.abs(l)))
                    return
            }
            (n = n ? Yr.copyFrom(n) : Yr.identity()).translate(-i.x, -i.y).scale(r.width / i.width, r.height / i.height).translate(r.x, r.y),
            this.transformAABB(n, t),
            t.ceil(e),
            this.transformAABB(n.invert(), t)
        }
    }
    ,
    FilterSystem);
    function FilterSystem(t) {
        this.renderer = t,
        this.defaultFilterStack = [{}],
        this.texturePool = new wr,
        this.texturePool.setScreenSize(t.view),
        this.statePool = [],
        this.quad = new Br,
        this.quadUv = new Gr,
        this.tempRect = new ge,
        this.activeState = {},
        this.globalUniforms = new jr({
            outputFrame: new ge,
            inputSize: new Float32Array(4),
            inputPixel: new Float32Array(4),
            inputClamp: new Float32Array(4),
            resolution: 1,
            filterArea: new Float32Array(4),
            filterClamp: new Float32Array(4)
        },!0),
        this.forceClear = !1,
        this.useMaxPadding = !1
    }
    var Kr = (ObjectRenderer.prototype.flush = function() {}
    ,
    ObjectRenderer.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    ObjectRenderer.prototype.start = function() {}
    ,
    ObjectRenderer.prototype.stop = function() {
        this.flush()
    }
    ,
    ObjectRenderer.prototype.render = function(t) {}
    ,
    ObjectRenderer);
    function ObjectRenderer(t) {
        this.renderer = t
    }
    var Xr = (BatchSystem.prototype.setObjectRenderer = function(t) {
        this.currentRenderer !== t && (this.currentRenderer.stop(),
        this.currentRenderer = t,
        this.currentRenderer.start())
    }
    ,
    BatchSystem.prototype.flush = function() {
        this.setObjectRenderer(this.emptyRenderer)
    }
    ,
    BatchSystem.prototype.reset = function() {
        this.setObjectRenderer(this.emptyRenderer)
    }
    ,
    BatchSystem.prototype.copyBoundTextures = function(t, e) {
        for (var i = this.renderer.texture.boundTextures, r = e - 1; 0 <= r; --r)
            t[r] = i[r] || null,
            t[r] && (t[r]._batchLocation = r)
    }
    ,
    BatchSystem.prototype.boundArray = function(t, e, i, r) {
        for (var n = t.elements, o = t.ids, s = t.count, a = 0, l = 0; l < s; l++) {
            var c = n[l]
              , u = c._batchLocation;
            if (0 <= u && u < r && e[u] === c)
                o[l] = u;
            else
                for (; a < r; ) {
                    var p = e[a];
                    if (!p || p._batchEnabled !== i || p._batchLocation !== a) {
                        o[l] = a,
                        e[c._batchLocation = a] = c;
                        break
                    }
                    a++
                }
        }
    }
    ,
    BatchSystem.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    BatchSystem);
    function BatchSystem(t) {
        this.renderer = t,
        this.emptyRenderer = new Kr(t),
        this.currentRenderer = this.emptyRenderer
    }
    var Wr = 0
      , Jr = (Object.defineProperty(ContextSystem.prototype, "isLost", {
        get: function() {
            return !this.gl || this.gl.isContextLost()
        },
        enumerable: !1,
        configurable: !0
    }),
    ContextSystem.prototype.contextChange = function(t) {
        this.gl = t,
        this.renderer.gl = t,
        this.renderer.CONTEXT_UID = Wr++,
        t.isContextLost() && t.getExtension("WEBGL_lose_context") && t.getExtension("WEBGL_lose_context").restoreContext()
    }
    ,
    ContextSystem.prototype.initFromContext = function(t) {
        this.gl = t,
        this.validateContext(t),
        this.renderer.gl = t,
        this.renderer.CONTEXT_UID = Wr++,
        this.renderer.runners.contextChange.emit(t)
    }
    ,
    ContextSystem.prototype.initFromOptions = function(t) {
        var e = this.createContext(this.renderer.view, t);
        this.initFromContext(e)
    }
    ,
    ContextSystem.prototype.createContext = function(t, e) {
        var i;
        if (pt.PREFER_ENV >= rt.ENV.WEBGL2 && (i = t.getContext("webgl2", e)),
        i)
            this.webGLVersion = 2;
        else if (this.webGLVersion = 1,
        !(i = t.getContext("webgl", e) || t.getContext("experimental-webgl", e)))
            throw new Error("This browser does not support WebGL. Try using the canvas renderer");
        return this.gl = i,
        this.getExtensions(),
        this.gl
    }
    ,
    ContextSystem.prototype.getExtensions = function() {
        var t = this.gl
          , e = {
            anisotropicFiltering: t.getExtension("EXT_texture_filter_anisotropic"),
            floatTextureLinear: t.getExtension("OES_texture_float_linear"),
            s3tc: t.getExtension("WEBGL_compressed_texture_s3tc"),
            s3tc_sRGB: t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),
            etc: t.getExtension("WEBGL_compressed_texture_etc"),
            etc1: t.getExtension("WEBGL_compressed_texture_etc1"),
            pvrtc: t.getExtension("WEBGL_compressed_texture_pvrtc") || t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),
            atc: t.getExtension("WEBGL_compressed_texture_atc"),
            astc: t.getExtension("WEBGL_compressed_texture_astc")
        };
        1 === this.webGLVersion ? Object.assign(this.extensions, e, {
            drawBuffers: t.getExtension("WEBGL_draw_buffers"),
            depthTexture: t.getExtension("WEBGL_depth_texture"),
            loseContext: t.getExtension("WEBGL_lose_context"),
            vertexArrayObject: t.getExtension("OES_vertex_array_object") || t.getExtension("MOZ_OES_vertex_array_object") || t.getExtension("WEBKIT_OES_vertex_array_object"),
            uint32ElementIndex: t.getExtension("OES_element_index_uint"),
            floatTexture: t.getExtension("OES_texture_float"),
            floatTextureLinear: t.getExtension("OES_texture_float_linear"),
            textureHalfFloat: t.getExtension("OES_texture_half_float"),
            textureHalfFloatLinear: t.getExtension("OES_texture_half_float_linear")
        }) : 2 === this.webGLVersion && Object.assign(this.extensions, e, {
            colorBufferFloat: t.getExtension("EXT_color_buffer_float")
        })
    }
    ,
    ContextSystem.prototype.handleContextLost = function(t) {
        t.preventDefault()
    }
    ,
    ContextSystem.prototype.handleContextRestored = function() {
        this.renderer.runners.contextChange.emit(this.gl)
    }
    ,
    ContextSystem.prototype.destroy = function() {
        var t = this.renderer.view;
        this.renderer = null,
        t.removeEventListener("webglcontextlost", this.handleContextLost),
        t.removeEventListener("webglcontextrestored", this.handleContextRestored),
        this.gl.useProgram(null),
        this.extensions.loseContext && this.extensions.loseContext.loseContext()
    }
    ,
    ContextSystem.prototype.postrender = function() {
        this.renderer.renderingToScreen && this.gl.flush()
    }
    ,
    ContextSystem.prototype.validateContext = function(t) {
        var e = t.getContextAttributes()
          , i = "WebGL2RenderingContext"in globalThis && t instanceof globalThis.WebGL2RenderingContext;
        i && (this.webGLVersion = 2),
        e.stencil || console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");
        var r = i || !!t.getExtension("OES_element_index_uint");
        (this.supports.uint32Indices = r) || console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")
    }
    ,
    ContextSystem);
    function ContextSystem(t) {
        this.renderer = t,
        this.webGLVersion = 1,
        this.extensions = {},
        this.supports = {
            uint32Indices: !1
        },
        this.handleContextLost = this.handleContextLost.bind(this),
        this.handleContextRestored = this.handleContextRestored.bind(this),
        t.view.addEventListener("webglcontextlost", this.handleContextLost, !1),
        t.view.addEventListener("webglcontextrestored", this.handleContextRestored, !1)
    }
    var Qr = function GLFramebuffer(t) {
        this.framebuffer = t,
        this.stencil = null,
        this.dirtyId = -1,
        this.dirtyFormat = -1,
        this.dirtySize = -1,
        this.multisample = rt.MSAA_QUALITY.NONE,
        this.msaaBuffer = null,
        this.blitFramebuffer = null,
        this.mipLevel = 0
    }
      , Zr = new ge
      , $r = (FramebufferSystem.prototype.contextChange = function() {
        var t = this.gl = this.renderer.gl;
        if (this.CONTEXT_UID = this.renderer.CONTEXT_UID,
        this.current = this.unknownFramebuffer,
        this.viewport = new ge,
        this.hasMRT = !0,
        this.writeDepthTexture = !0,
        this.disposeAll(!0),
        1 === this.renderer.context.webGLVersion) {
            var e = this.renderer.context.extensions.drawBuffers
              , i = this.renderer.context.extensions.depthTexture;
            pt.PREFER_ENV === rt.ENV.WEBGL_LEGACY && (i = e = null),
            e ? t.drawBuffers = function(t) {
                return e.drawBuffersWEBGL(t)
            }
            : (this.hasMRT = !1,
            t.drawBuffers = function() {}
            ),
            i || (this.writeDepthTexture = !1)
        } else
            this.msaaSamples = t.getInternalformatParameter(t.RENDERBUFFER, t.RGBA8, t.SAMPLES)
    }
    ,
    FramebufferSystem.prototype.bind = function(t, e, i) {
        void 0 === i && (i = 0);
        var r = this.gl;
        if (t) {
            var n = t.glFramebuffers[this.CONTEXT_UID] || this.initFramebuffer(t);
            this.current !== t && (this.current = t,
            r.bindFramebuffer(r.FRAMEBUFFER, n.framebuffer)),
            n.mipLevel !== i && (t.dirtyId++,
            t.dirtyFormat++,
            n.mipLevel = i),
            n.dirtyId !== t.dirtyId && (n.dirtyId = t.dirtyId,
            n.dirtyFormat !== t.dirtyFormat ? (n.dirtyFormat = t.dirtyFormat,
            n.dirtySize = t.dirtySize,
            this.updateFramebuffer(t, i)) : n.dirtySize !== t.dirtySize && (n.dirtySize = t.dirtySize,
            this.resizeFramebuffer(t)));
            for (var o = 0; o < t.colorTextures.length; o++) {
                var s = t.colorTextures[o];
                this.renderer.texture.unbind(s.parentTextureArray || s)
            }
            if (t.depthTexture && this.renderer.texture.unbind(t.depthTexture),
            e) {
                var a = e.width >> i
                  , l = e.height >> i
                  , c = a / e.width;
                this.setViewport(e.x * c, e.y * c, a, l)
            } else
                a = t.width >> i,
                l = t.height >> i,
                this.setViewport(0, 0, a, l)
        } else
            this.current && (this.current = null,
            r.bindFramebuffer(r.FRAMEBUFFER, null)),
            e ? this.setViewport(e.x, e.y, e.width, e.height) : this.setViewport(0, 0, this.renderer.width, this.renderer.height)
    }
    ,
    FramebufferSystem.prototype.setViewport = function(t, e, i, r) {
        var n = this.viewport;
        t = Math.round(t),
        e = Math.round(e),
        i = Math.round(i),
        r = Math.round(r),
        n.width === i && n.height === r && n.x === t && n.y === e || (n.x = t,
        n.y = e,
        n.width = i,
        n.height = r,
        this.gl.viewport(t, e, i, r))
    }
    ,
    Object.defineProperty(FramebufferSystem.prototype, "size", {
        get: function() {
            return this.current ? {
                x: 0,
                y: 0,
                width: this.current.width,
                height: this.current.height
            } : {
                x: 0,
                y: 0,
                width: this.renderer.width,
                height: this.renderer.height
            }
        },
        enumerable: !1,
        configurable: !0
    }),
    FramebufferSystem.prototype.clear = function(t, e, i, r, n) {
        void 0 === n && (n = rt.BUFFER_BITS.COLOR | rt.BUFFER_BITS.DEPTH);
        var o = this.gl;
        o.clearColor(t, e, i, r),
        o.clear(n)
    }
    ,
    FramebufferSystem.prototype.initFramebuffer = function(t) {
        var e = this.gl
          , i = new Qr(e.createFramebuffer());
        return i.multisample = this.detectSamples(t.multisample),
        t.glFramebuffers[this.CONTEXT_UID] = i,
        this.managedFramebuffers.push(t),
        t.disposeRunner.add(this),
        i
    }
    ,
    FramebufferSystem.prototype.resizeFramebuffer = function(t) {
        var e = this.gl
          , i = t.glFramebuffers[this.CONTEXT_UID];
        i.msaaBuffer && (e.bindRenderbuffer(e.RENDERBUFFER, i.msaaBuffer),
        e.renderbufferStorageMultisample(e.RENDERBUFFER, i.multisample, e.RGBA8, t.width, t.height)),
        i.stencil && (e.bindRenderbuffer(e.RENDERBUFFER, i.stencil),
        i.msaaBuffer ? e.renderbufferStorageMultisample(e.RENDERBUFFER, i.multisample, e.DEPTH24_STENCIL8, t.width, t.height) : e.renderbufferStorage(e.RENDERBUFFER, e.DEPTH_STENCIL, t.width, t.height));
        var r = t.colorTextures
          , n = r.length;
        e.drawBuffers || (n = Math.min(n, 1));
        for (var o = 0; o < n; o++) {
            var s = r[o]
              , a = s.parentTextureArray || s;
            this.renderer.texture.bind(a, 0)
        }
        t.depthTexture && this.writeDepthTexture && this.renderer.texture.bind(t.depthTexture, 0)
    }
    ,
    FramebufferSystem.prototype.updateFramebuffer = function(t, e) {
        var i = this.gl
          , r = t.glFramebuffers[this.CONTEXT_UID]
          , n = t.colorTextures
          , o = n.length;
        i.drawBuffers || (o = Math.min(o, 1)),
        1 < r.multisample && this.canMultisampleFramebuffer(t) ? (r.msaaBuffer = r.msaaBuffer || i.createRenderbuffer(),
        i.bindRenderbuffer(i.RENDERBUFFER, r.msaaBuffer),
        i.renderbufferStorageMultisample(i.RENDERBUFFER, r.multisample, i.RGBA8, t.width, t.height),
        i.framebufferRenderbuffer(i.FRAMEBUFFER, i.COLOR_ATTACHMENT0, i.RENDERBUFFER, r.msaaBuffer)) : r.msaaBuffer && (i.deleteRenderbuffer(r.msaaBuffer),
        r.msaaBuffer = null,
        r.blitFramebuffer && (r.blitFramebuffer.dispose(),
        r.blitFramebuffer = null));
        for (var s = [], a = 0; a < o; a++) {
            var l = n[a]
              , c = l.parentTextureArray || l;
            this.renderer.texture.bind(c, 0),
            0 === a && r.msaaBuffer || (i.framebufferTexture2D(i.FRAMEBUFFER, i.COLOR_ATTACHMENT0 + a, l.target, c._glTextures[this.CONTEXT_UID].texture, e),
            s.push(i.COLOR_ATTACHMENT0 + a))
        }
        if (1 < s.length && i.drawBuffers(s),
        t.depthTexture && this.writeDepthTexture) {
            var u = t.depthTexture;
            this.renderer.texture.bind(u, 0),
            i.framebufferTexture2D(i.FRAMEBUFFER, i.DEPTH_ATTACHMENT, i.TEXTURE_2D, u._glTextures[this.CONTEXT_UID].texture, e)
        }
        !t.stencil && !t.depth || t.depthTexture && this.writeDepthTexture ? r.stencil && (i.deleteRenderbuffer(r.stencil),
        r.stencil = null) : (r.stencil = r.stencil || i.createRenderbuffer(),
        i.bindRenderbuffer(i.RENDERBUFFER, r.stencil),
        r.msaaBuffer ? i.renderbufferStorageMultisample(i.RENDERBUFFER, r.multisample, i.DEPTH24_STENCIL8, t.width, t.height) : i.renderbufferStorage(i.RENDERBUFFER, i.DEPTH_STENCIL, t.width, t.height),
        i.framebufferRenderbuffer(i.FRAMEBUFFER, i.DEPTH_STENCIL_ATTACHMENT, i.RENDERBUFFER, r.stencil))
    }
    ,
    FramebufferSystem.prototype.canMultisampleFramebuffer = function(t) {
        return 1 !== this.renderer.context.webGLVersion && t.colorTextures.length <= 1 && !t.depthTexture
    }
    ,
    FramebufferSystem.prototype.detectSamples = function(t) {
        var e = this.msaaSamples
          , i = rt.MSAA_QUALITY.NONE;
        if (t <= 1 || null === e)
            return i;
        for (var r = 0; r < e.length; r++)
            if (e[r] <= t) {
                i = e[r];
                break
            }
        return 1 === i && (i = rt.MSAA_QUALITY.NONE),
        i
    }
    ,
    FramebufferSystem.prototype.blit = function(t, e, i) {
        var r = this.current
          , n = this.renderer
          , o = this.gl
          , s = this.CONTEXT_UID;
        if (2 === n.context.webGLVersion && r) {
            var a = r.glFramebuffers[s];
            if (a) {
                if (!t) {
                    if (!a.msaaBuffer)
                        return;
                    var l = r.colorTextures[0];
                    if (!l)
                        return;
                    a.blitFramebuffer || (a.blitFramebuffer = new gr(r.width,r.height),
                    a.blitFramebuffer.addColorTexture(0, l)),
                    (t = a.blitFramebuffer).colorTextures[0] !== l && (t.colorTextures[0] = l,
                    t.dirtyId++,
                    t.dirtyFormat++),
                    t.width === r.width && t.height === r.height || (t.width = r.width,
                    t.height = r.height,
                    t.dirtyId++,
                    t.dirtySize++)
                }
                e || ((e = Zr).width = r.width,
                e.height = r.height),
                i = i || e;
                var c = e.width === i.width && e.height === i.height;
                this.bind(t),
                o.bindFramebuffer(o.READ_FRAMEBUFFER, a.framebuffer),
                o.blitFramebuffer(e.left, e.top, e.right, e.bottom, i.left, i.top, i.right, i.bottom, o.COLOR_BUFFER_BIT, c ? o.NEAREST : o.LINEAR)
            }
        }
    }
    ,
    FramebufferSystem.prototype.disposeFramebuffer = function(t, e) {
        var i = t.glFramebuffers[this.CONTEXT_UID]
          , r = this.gl;
        if (i) {
            delete t.glFramebuffers[this.CONTEXT_UID];
            var n = this.managedFramebuffers.indexOf(t);
            0 <= n && this.managedFramebuffers.splice(n, 1),
            t.disposeRunner.remove(this),
            e || (r.deleteFramebuffer(i.framebuffer),
            i.msaaBuffer && r.deleteRenderbuffer(i.msaaBuffer),
            i.stencil && r.deleteRenderbuffer(i.stencil)),
            i.blitFramebuffer && i.blitFramebuffer.dispose()
        }
    }
    ,
    FramebufferSystem.prototype.disposeAll = function(t) {
        var e = this.managedFramebuffers;
        this.managedFramebuffers = [];
        for (var i = 0; i < e.length; i++)
            this.disposeFramebuffer(e[i], t)
    }
    ,
    FramebufferSystem.prototype.forceStencil = function() {
        var t = this.current;
        if (t) {
            var e = t.glFramebuffers[this.CONTEXT_UID];
            if (e && !e.stencil) {
                t.stencil = !0;
                var i = t.width
                  , r = t.height
                  , n = this.gl
                  , o = n.createRenderbuffer();
                n.bindRenderbuffer(n.RENDERBUFFER, o),
                e.msaaBuffer ? n.renderbufferStorageMultisample(n.RENDERBUFFER, e.multisample, n.DEPTH24_STENCIL8, i, r) : n.renderbufferStorage(n.RENDERBUFFER, n.DEPTH_STENCIL, i, r),
                e.stencil = o,
                n.framebufferRenderbuffer(n.FRAMEBUFFER, n.DEPTH_STENCIL_ATTACHMENT, n.RENDERBUFFER, o)
            }
        }
    }
    ,
    FramebufferSystem.prototype.reset = function() {
        this.current = this.unknownFramebuffer,
        this.viewport = new ge
    }
    ,
    FramebufferSystem.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    FramebufferSystem);
    function FramebufferSystem(t) {
        this.renderer = t,
        this.managedFramebuffers = [],
        this.unknownFramebuffer = new gr(10,10),
        this.msaaSamples = null
    }
    var tn = {
        5126: 4,
        5123: 2,
        5121: 1
    }
      , en = (GeometrySystem.prototype.contextChange = function() {
        this.disposeAll(!0);
        var t = this.gl = this.renderer.gl
          , e = this.renderer.context;
        if (this.CONTEXT_UID = this.renderer.CONTEXT_UID,
        2 !== e.webGLVersion) {
            var i = this.renderer.context.extensions.vertexArrayObject;
            pt.PREFER_ENV === rt.ENV.WEBGL_LEGACY && (i = null),
            i ? (t.createVertexArray = function() {
                return i.createVertexArrayOES()
            }
            ,
            t.bindVertexArray = function(t) {
                return i.bindVertexArrayOES(t)
            }
            ,
            t.deleteVertexArray = function(t) {
                return i.deleteVertexArrayOES(t)
            }
            ) : (this.hasVao = !1,
            t.createVertexArray = function() {
                return null
            }
            ,
            t.bindVertexArray = function() {
                return null
            }
            ,
            t.deleteVertexArray = function() {
                return null
            }
            )
        }
        if (2 !== e.webGLVersion) {
            var o = t.getExtension("ANGLE_instanced_arrays");
            o ? (t.vertexAttribDivisor = function(t, e) {
                return o.vertexAttribDivisorANGLE(t, e)
            }
            ,
            t.drawElementsInstanced = function(t, e, i, r, n) {
                return o.drawElementsInstancedANGLE(t, e, i, r, n)
            }
            ,
            t.drawArraysInstanced = function(t, e, i, r) {
                return o.drawArraysInstancedANGLE(t, e, i, r)
            }
            ) : this.hasInstance = !1
        }
        this.canUseUInt32ElementIndex = 2 === e.webGLVersion || !!e.extensions.uint32ElementIndex
    }
    ,
    GeometrySystem.prototype.bind = function(t, e) {
        e = e || this.renderer.shader.shader;
        var i = this.gl
          , r = t.glVertexArrayObjects[this.CONTEXT_UID]
          , n = !1;
        r || ((this.managedGeometries[t.id] = t).disposeRunner.add(this),
        t.glVertexArrayObjects[this.CONTEXT_UID] = r = {},
        n = !0);
        var o = r[e.program.id] || this.initGeometryVao(t, e, n);
        this._activeGeometry = t,
        this._activeVao !== o && (this._activeVao = o,
        this.hasVao ? i.bindVertexArray(o) : this.activateVao(t, e.program)),
        this.updateBuffers()
    }
    ,
    GeometrySystem.prototype.reset = function() {
        this.unbind()
    }
    ,
    GeometrySystem.prototype.updateBuffers = function() {
        for (var t = this._activeGeometry, e = this.renderer.buffer, i = 0; i < t.buffers.length; i++) {
            var r = t.buffers[i];
            e.update(r)
        }
    }
    ,
    GeometrySystem.prototype.checkCompatibility = function(t, e) {
        var i = t.attributes
          , r = e.attributeData;
        for (var n in r)
            if (!i[n])
                throw new Error('shader and geometry incompatible, geometry missing the "' + n + '" attribute')
    }
    ,
    GeometrySystem.prototype.getSignature = function(t, e) {
        var i = t.attributes
          , r = e.attributeData
          , n = ["g", t.id];
        for (var o in i)
            r[o] && n.push(o, r[o].location);
        return n.join("-")
    }
    ,
    GeometrySystem.prototype.initGeometryVao = function(t, e, i) {
        void 0 === i && (i = !0);
        var r = this.gl
          , n = this.CONTEXT_UID
          , o = this.renderer.buffer
          , s = e.program;
        s.glPrograms[n] || this.renderer.shader.generateProgram(e),
        this.checkCompatibility(t, s);
        var a = this.getSignature(t, s)
          , l = t.glVertexArrayObjects[this.CONTEXT_UID]
          , c = l[a];
        if (c)
            return l[s.id] = c;
        var u = t.buffers
          , p = t.attributes
          , h = {}
          , d = {};
        for (var _ in u)
            h[_] = 0,
            d[_] = 0;
        for (var _ in p)
            !p[_].size && s.attributeData[_] ? p[_].size = s.attributeData[_].size : p[_].size || console.warn("PIXI Geometry attribute '" + _ + "' size cannot be determined (likely the bound shader does not have the attribute)"),
            h[p[_].buffer] += p[_].size * tn[p[_].type];
        for (var _ in p) {
            var y = p[_]
              , f = y.size;
            void 0 === y.stride && (h[y.buffer] === f * tn[y.type] ? y.stride = 0 : y.stride = h[y.buffer]),
            void 0 === y.start && (y.start = d[y.buffer],
            d[y.buffer] += f * tn[y.type])
        }
        c = r.createVertexArray(),
        r.bindVertexArray(c);
        for (var m = 0; m < u.length; m++) {
            var T = u[m];
            o.bind(T),
            i && T._glBuffers[n].refCount++
        }
        return this.activateVao(t, s),
        this._activeVao = c,
        l[s.id] = c,
        l[a] = c
    }
    ,
    GeometrySystem.prototype.disposeGeometry = function(t, e) {
        var i;
        if (this.managedGeometries[t.id]) {
            delete this.managedGeometries[t.id];
            var r = t.glVertexArrayObjects[this.CONTEXT_UID]
              , n = this.gl
              , o = t.buffers
              , s = null === (i = this.renderer) || void 0 === i ? void 0 : i.buffer;
            if (t.disposeRunner.remove(this),
            r) {
                if (s)
                    for (var a = 0; a < o.length; a++) {
                        var l = o[a]._glBuffers[this.CONTEXT_UID];
                        l && (l.refCount--,
                        0 !== l.refCount || e || s.dispose(o[a], e))
                    }
                if (!e)
                    for (var c in r)
                        if ("g" === c[0]) {
                            var u = r[c];
                            this._activeVao === u && this.unbind(),
                            n.deleteVertexArray(u)
                        }
                delete t.glVertexArrayObjects[this.CONTEXT_UID]
            }
        }
    }
    ,
    GeometrySystem.prototype.disposeAll = function(t) {
        for (var e = Object.keys(this.managedGeometries), i = 0; i < e.length; i++)
            this.disposeGeometry(this.managedGeometries[e[i]], t)
    }
    ,
    GeometrySystem.prototype.activateVao = function(t, e) {
        var i = this.gl
          , r = this.CONTEXT_UID
          , n = this.renderer.buffer
          , o = t.buffers
          , s = t.attributes;
        t.indexBuffer && n.bind(t.indexBuffer);
        var a = null;
        for (var l in s) {
            var c = s[l]
              , u = o[c.buffer]
              , p = u._glBuffers[r];
            if (e.attributeData[l]) {
                a !== p && (n.bind(u),
                a = p);
                var h = e.attributeData[l].location;
                if (i.enableVertexAttribArray(h),
                i.vertexAttribPointer(h, c.size, c.type || i.FLOAT, c.normalized, c.stride, c.start),
                c.instance) {
                    if (!this.hasInstance)
                        throw new Error("geometry error, GPU Instancing is not supported on this device");
                    i.vertexAttribDivisor(h, 1)
                }
            }
        }
    }
    ,
    GeometrySystem.prototype.draw = function(t, e, i, r) {
        var n = this.gl
          , o = this._activeGeometry;
        if (o.indexBuffer) {
            var s = o.indexBuffer.data.BYTES_PER_ELEMENT
              , a = 2 === s ? n.UNSIGNED_SHORT : n.UNSIGNED_INT;
            2 === s || 4 === s && this.canUseUInt32ElementIndex ? o.instanced ? n.drawElementsInstanced(t, e || o.indexBuffer.data.length, a, (i || 0) * s, r || 1) : n.drawElements(t, e || o.indexBuffer.data.length, a, (i || 0) * s) : console.warn("unsupported index buffer type: uint32")
        } else
            o.instanced ? n.drawArraysInstanced(t, i, e || o.getSize(), r || 1) : n.drawArrays(t, i, e || o.getSize());
        return this
    }
    ,
    GeometrySystem.prototype.unbind = function() {
        this.gl.bindVertexArray(null),
        this._activeVao = null,
        this._activeGeometry = null
    }
    ,
    GeometrySystem.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    GeometrySystem);
    function GeometrySystem(t) {
        this.renderer = t,
        this._activeGeometry = null,
        this._activeVao = null,
        this.hasVao = !0,
        this.hasInstance = !0,
        this.canUseUInt32ElementIndex = !1,
        this.managedGeometries = {}
    }
    var rn = (Object.defineProperty(MaskData.prototype, "filter", {
        get: function() {
            return this._filters ? this._filters[0] : null
        },
        set: function(t) {
            t ? this._filters ? this._filters[0] = t : this._filters = [t] : this._filters = null
        },
        enumerable: !1,
        configurable: !0
    }),
    MaskData.prototype.reset = function() {
        this.pooled && (this.maskObject = null,
        this.type = rt.MASK_TYPES.NONE,
        this.autoDetect = !0),
        this._target = null,
        this._scissorRectLocal = null
    }
    ,
    MaskData.prototype.copyCountersOrReset = function(t) {
        t ? (this._stencilCounter = t._stencilCounter,
        this._scissorCounter = t._scissorCounter,
        this._scissorRect = t._scissorRect) : (this._stencilCounter = 0,
        this._scissorCounter = 0,
        this._scissorRect = null)
    }
    ,
    MaskData);
    function MaskData(t) {
        void 0 === t && (t = null),
        this.type = rt.MASK_TYPES.NONE,
        this.autoDetect = !0,
        this.maskObject = t || null,
        this.pooled = !1,
        this.isMaskData = !0,
        this.resolution = null,
        this.multisample = pt.FILTER_MULTISAMPLE,
        this.enabled = !0,
        this._filters = null,
        this._stencilCounter = 0,
        this._scissorCounter = 0,
        this._scissorRect = null,
        this._scissorRectLocal = null,
        this._target = null
    }
    function compileShader(t, e, i) {
        var r = t.createShader(e);
        return t.shaderSource(r, i),
        t.compileShader(r),
        r
    }
    function logPrettyShaderError(t, e) {
        var i = t.getShaderSource(e).split("\n").map(function(t, e) {
            return e + ": " + t
        })
          , r = t.getShaderInfoLog(e)
          , n = r.split("\n")
          , o = {}
          , s = n.map(function(t) {
            return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/, "$1"))
        }).filter(function(t) {
            return !(!t || o[t]) && (o[t] = !0)
        })
          , a = [""];
        s.forEach(function(t) {
            i[t - 1] = "%c" + i[t - 1] + "%c",
            a.push("background: #FF0000; color:#FFFFFF; font-size: 10px", "font-size: 10px")
        });
        var l = i.join("\n");
        a[0] = l,
        console.error(r),
        console.groupCollapsed("click to view full shader code"),
        console.warn.apply(console, a),
        console.groupEnd()
    }
    function booleanArray(t) {
        for (var e = new Array(t), i = 0; i < e.length; i++)
            e[i] = !1;
        return e
    }
    function defaultValue(t, e) {
        switch (t) {
        case "float":
            return 0;
        case "vec2":
            return new Float32Array(2 * e);
        case "vec3":
            return new Float32Array(3 * e);
        case "vec4":
            return new Float32Array(4 * e);
        case "int":
        case "uint":
        case "sampler2D":
        case "sampler2DArray":
            return 0;
        case "ivec2":
            return new Int32Array(2 * e);
        case "ivec3":
            return new Int32Array(3 * e);
        case "ivec4":
            return new Int32Array(4 * e);
        case "uvec2":
            return new Uint32Array(2 * e);
        case "uvec3":
            return new Uint32Array(3 * e);
        case "uvec4":
            return new Uint32Array(4 * e);
        case "bool":
            return !1;
        case "bvec2":
            return booleanArray(2 * e);
        case "bvec3":
            return booleanArray(3 * e);
        case "bvec4":
            return booleanArray(4 * e);
        case "mat2":
            return new Float32Array([1, 0, 0, 1]);
        case "mat3":
            return new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);
        case "mat4":
            return new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1])
        }
        return null
    }
    var nn, on = {}, sn = on;
    function getTestContext() {
        if (sn === on || sn && sn.isContextLost()) {
            var t = document.createElement("canvas")
              , e = void 0;
            pt.PREFER_ENV >= rt.ENV.WEBGL2 && (e = t.getContext("webgl2", {})),
            e || ((e = t.getContext("webgl", {}) || t.getContext("experimental-webgl", {})) ? e.getExtension("WEBGL_draw_buffers") : e = null),
            sn = e
        }
        return sn
    }
    function setPrecision(t, e, i) {
        if ("precision" === t.substring(0, 9))
            return i !== rt.PRECISION.HIGH && "precision highp" === t.substring(0, 15) ? t.replace("precision highp", "precision mediump") : t;
        var r = e;
        return e === rt.PRECISION.HIGH && i !== rt.PRECISION.HIGH && (r = rt.PRECISION.MEDIUM),
        "precision " + r + " float;\n" + t
    }
    var an = {
        float: 1,
        vec2: 2,
        vec3: 3,
        vec4: 4,
        int: 1,
        ivec2: 2,
        ivec3: 3,
        ivec4: 4,
        uint: 1,
        uvec2: 2,
        uvec3: 3,
        uvec4: 4,
        bool: 1,
        bvec2: 2,
        bvec3: 3,
        bvec4: 4,
        mat2: 4,
        mat3: 9,
        mat4: 16,
        sampler2D: 1
    };
    function mapSize(t) {
        return an[t]
    }
    var ln = null
      , cn = {
        FLOAT: "float",
        FLOAT_VEC2: "vec2",
        FLOAT_VEC3: "vec3",
        FLOAT_VEC4: "vec4",
        INT: "int",
        INT_VEC2: "ivec2",
        INT_VEC3: "ivec3",
        INT_VEC4: "ivec4",
        UNSIGNED_INT: "uint",
        UNSIGNED_INT_VEC2: "uvec2",
        UNSIGNED_INT_VEC3: "uvec3",
        UNSIGNED_INT_VEC4: "uvec4",
        BOOL: "bool",
        BOOL_VEC2: "bvec2",
        BOOL_VEC3: "bvec3",
        BOOL_VEC4: "bvec4",
        FLOAT_MAT2: "mat2",
        FLOAT_MAT3: "mat3",
        FLOAT_MAT4: "mat4",
        SAMPLER_2D: "sampler2D",
        INT_SAMPLER_2D: "sampler2D",
        UNSIGNED_INT_SAMPLER_2D: "sampler2D",
        SAMPLER_CUBE: "samplerCube",
        INT_SAMPLER_CUBE: "samplerCube",
        UNSIGNED_INT_SAMPLER_CUBE: "samplerCube",
        SAMPLER_2D_ARRAY: "sampler2DArray",
        INT_SAMPLER_2D_ARRAY: "sampler2DArray",
        UNSIGNED_INT_SAMPLER_2D_ARRAY: "sampler2DArray"
    };
    function mapType(t, e) {
        if (!ln) {
            var i = Object.keys(cn);
            ln = {};
            for (var r = 0; r < i.length; ++r) {
                var n = i[r];
                ln[t[n]] = cn[n]
            }
        }
        return ln[e]
    }
    var un = [{
        test: function(t) {
            return "float" === t.type && 1 === t.size
        },
        code: function(t) {
            return '\n            if(uv["' + t + '"] !== ud["' + t + '"].value)\n            {\n                ud["' + t + '"].value = uv["' + t + '"]\n                gl.uniform1f(ud["' + t + '"].location, uv["' + t + '"])\n            }\n            '
        }
    }, {
        test: function(t) {
            return ("sampler2D" === t.type || "samplerCube" === t.type || "sampler2DArray" === t.type) && 1 === t.size && !t.isArray
        },
        code: function(t) {
            return 't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["' + t + '"], t);\n\n            if(ud["' + t + '"].value !== t)\n            {\n                ud["' + t + '"].value = t;\n                gl.uniform1i(ud["' + t + '"].location, t);\n; // eslint-disable-line max-len\n            }'
        }
    }, {
        test: function(t, e) {
            return "mat3" === t.type && 1 === t.size && void 0 !== e.a
        },
        code: function(t) {
            return '\n            gl.uniformMatrix3fv(ud["' + t + '"].location, false, uv["' + t + '"].toArray(true));\n            '
        },
        codeUbo: function(t) {
            return "\n                var " + t + "_matrix = uv." + t + ".toArray(true);\n\n                data[offset] = " + t + "_matrix[0];\n                data[offset+1] = " + t + "_matrix[1];\n                data[offset+2] = " + t + "_matrix[2];\n        \n                data[offset + 4] = " + t + "_matrix[3];\n                data[offset + 5] = " + t + "_matrix[4];\n                data[offset + 6] = " + t + "_matrix[5];\n        \n                data[offset + 8] = " + t + "_matrix[6];\n                data[offset + 9] = " + t + "_matrix[7];\n                data[offset + 10] = " + t + "_matrix[8];\n            "
        }
    }, {
        test: function(t, e) {
            return "vec2" === t.type && 1 === t.size && void 0 !== e.x
        },
        code: function(t) {
            return '\n                cv = ud["' + t + '"].value;\n                v = uv["' + t + '"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["' + t + '"].location, v.x, v.y);\n                }'
        },
        codeUbo: function(t) {
            return "\n                v = uv." + t + ";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "
        }
    }, {
        test: function(t) {
            return "vec2" === t.type && 1 === t.size
        },
        code: function(t) {
            return '\n                cv = ud["' + t + '"].value;\n                v = uv["' + t + '"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["' + t + '"].location, v[0], v[1]);\n                }\n            '
        }
    }, {
        test: function(t, e) {
            return "vec4" === t.type && 1 === t.size && void 0 !== e.width
        },
        code: function(t) {
            return '\n                cv = ud["' + t + '"].value;\n                v = uv["' + t + '"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["' + t + '"].location, v.x, v.y, v.width, v.height)\n                }'
        },
        codeUbo: function(t) {
            return "\n                    v = uv." + t + ";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "
        }
    }, {
        test: function(t) {
            return "vec4" === t.type && 1 === t.size
        },
        code: function(t) {
            return '\n                cv = ud["' + t + '"].value;\n                v = uv["' + t + '"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["' + t + '"].location, v[0], v[1], v[2], v[3])\n                }'
        }
    }]
      , pn = {
        float: "\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",
        vec2: "\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",
        vec3: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",
        vec4: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",
        int: "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",
        ivec2: "\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",
        ivec3: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",
        ivec4: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",
        uint: "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",
        uvec2: "\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",
        uvec3: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",
        uvec4: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",
        bool: "\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",
        bvec2: "\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",
        bvec3: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",
        bvec4: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",
        mat2: "gl.uniformMatrix2fv(location, false, v)",
        mat3: "gl.uniformMatrix3fv(location, false, v)",
        mat4: "gl.uniformMatrix4fv(location, false, v)",
        sampler2D: "gl.uniform1i(location, v)",
        samplerCube: "gl.uniform1i(location, v)",
        sampler2DArray: "gl.uniform1i(location, v)"
    }
      , hn = {
        float: "gl.uniform1fv(location, v)",
        vec2: "gl.uniform2fv(location, v)",
        vec3: "gl.uniform3fv(location, v)",
        vec4: "gl.uniform4fv(location, v)",
        mat4: "gl.uniformMatrix4fv(location, false, v)",
        mat3: "gl.uniformMatrix3fv(location, false, v)",
        mat2: "gl.uniformMatrix2fv(location, false, v)",
        int: "gl.uniform1iv(location, v)",
        ivec2: "gl.uniform2iv(location, v)",
        ivec3: "gl.uniform3iv(location, v)",
        ivec4: "gl.uniform4iv(location, v)",
        uint: "gl.uniform1uiv(location, v)",
        uvec2: "gl.uniform2uiv(location, v)",
        uvec3: "gl.uniform3uiv(location, v)",
        uvec4: "gl.uniform4uiv(location, v)",
        bool: "gl.uniform1iv(location, v)",
        bvec2: "gl.uniform2iv(location, v)",
        bvec3: "gl.uniform3iv(location, v)",
        bvec4: "gl.uniform4iv(location, v)",
        sampler2D: "gl.uniform1iv(location, v)",
        samplerCube: "gl.uniform1iv(location, v)",
        sampler2DArray: "gl.uniform1iv(location, v)"
    };
    var dn, _n = ["precision mediump float;", "void main(void){", "float test = 0.1;", "%forloop%", "gl_FragColor = vec4(0.0);", "}"].join("\n");
    function generateIfTestSrc(t) {
        for (var e = "", i = 0; i < t; ++i)
            0 < i && (e += "\nelse "),
            i < t - 1 && (e += "if(test == " + i + ".0){}");
        return e
    }
    function checkMaxIfStatementsInShader(t, e) {
        if (0 === t)
            throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");
        for (var i = e.createShader(e.FRAGMENT_SHADER); ; ) {
            var r = _n.replace(/%forloop%/gi, generateIfTestSrc(t));
            if (e.shaderSource(i, r),
            e.compileShader(i),
            e.getShaderParameter(i, e.COMPILE_STATUS))
                break;
            t = t / 2 | 0
        }
        return t
    }
    var yn = 0
      , fn = {}
      , mn = (Object.defineProperty(Program, "defaultVertexSrc", {
        get: function() {
            return "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Program, "defaultFragmentSrc", {
        get: function() {
            return "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"
        },
        enumerable: !1,
        configurable: !0
    }),
    Program.from = function(t, e, i) {
        var r = t + e
          , n = se[r];
        return n || (se[r] = n = new Program(t,e,i)),
        n
    }
    ,
    Program);
    function Program(t, e, i) {
        void 0 === i && (i = "pixi-shader"),
        this.id = yn++,
        this.vertexSrc = t || Program.defaultVertexSrc,
        this.fragmentSrc = e || Program.defaultFragmentSrc,
        this.vertexSrc = this.vertexSrc.trim(),
        this.fragmentSrc = this.fragmentSrc.trim(),
        "#version" !== this.vertexSrc.substring(0, 8) && (i = i.replace(/\s+/g, "-"),
        fn[i] ? (fn[i]++,
        i += "-" + fn[i]) : fn[i] = 1,
        this.vertexSrc = "#define SHADER_NAME " + i + "\n" + this.vertexSrc,
        this.fragmentSrc = "#define SHADER_NAME " + i + "\n" + this.fragmentSrc,
        this.vertexSrc = setPrecision(this.vertexSrc, pt.PRECISION_VERTEX, rt.PRECISION.HIGH),
        this.fragmentSrc = setPrecision(this.fragmentSrc, pt.PRECISION_FRAGMENT, function getMaxFragmentPrecision() {
            if (!nn) {
                nn = rt.PRECISION.MEDIUM;
                var t = getTestContext();
                if (t && t.getShaderPrecisionFormat) {
                    var e = t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.HIGH_FLOAT);
                    nn = e.precision ? rt.PRECISION.HIGH : rt.PRECISION.MEDIUM
                }
            }
            return nn
        }())),
        this.glPrograms = {},
        this.syncUniforms = null
    }
    var Tn = (Shader.prototype.checkUniformExists = function(t, e) {
        if (e.uniforms[t])
            return !0;
        for (var i in e.uniforms) {
            var r = e.uniforms[i];
            if (r.group && this.checkUniformExists(t, r))
                return !0
        }
        return !1
    }
    ,
    Shader.prototype.destroy = function() {
        this.uniformGroup = null
    }
    ,
    Object.defineProperty(Shader.prototype, "uniforms", {
        get: function() {
            return this.uniformGroup.uniforms
        },
        enumerable: !1,
        configurable: !0
    }),
    Shader.from = function(t, e, i) {
        return new Shader(mn.from(t, e),i)
    }
    ,
    Shader);
    function Shader(t, e) {
        this.uniformBindCount = 0,
        this.program = t,
        this.uniformGroup = e ? e instanceof jr ? e : new jr(e) : new jr({})
    }
    var gn = (Object.defineProperty(State.prototype, "blend", {
        get: function() {
            return !!(1 & this.data)
        },
        set: function(t) {
            !!(1 & this.data) !== t && (this.data ^= 1)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(State.prototype, "offsets", {
        get: function() {
            return !!(2 & this.data)
        },
        set: function(t) {
            !!(2 & this.data) !== t && (this.data ^= 2)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(State.prototype, "culling", {
        get: function() {
            return !!(4 & this.data)
        },
        set: function(t) {
            !!(4 & this.data) !== t && (this.data ^= 4)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(State.prototype, "depthTest", {
        get: function() {
            return !!(8 & this.data)
        },
        set: function(t) {
            !!(8 & this.data) !== t && (this.data ^= 8)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(State.prototype, "depthMask", {
        get: function() {
            return !!(32 & this.data)
        },
        set: function(t) {
            !!(32 & this.data) !== t && (this.data ^= 32)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(State.prototype, "clockwiseFrontFace", {
        get: function() {
            return !!(16 & this.data)
        },
        set: function(t) {
            !!(16 & this.data) !== t && (this.data ^= 16)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(State.prototype, "blendMode", {
        get: function() {
            return this._blendMode
        },
        set: function(t) {
            this.blend = t !== rt.BLEND_MODES.NONE,
            this._blendMode = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(State.prototype, "polygonOffset", {
        get: function() {
            return this._polygonOffset
        },
        set: function(t) {
            this.offsets = !!t,
            this._polygonOffset = t
        },
        enumerable: !1,
        configurable: !0
    }),
    State.prototype.toString = function() {
        return "[@pixi/core:State blendMode=" + this.blendMode + " clockwiseFrontFace=" + this.clockwiseFrontFace + " culling=" + this.culling + " depthMask=" + this.depthMask + " polygonOffset=" + this.polygonOffset + "]"
    }
    ,
    State.for2d = function() {
        var t = new State;
        return t.depthTest = !1,
        t.blend = !0,
        t
    }
    ,
    State);
    function State() {
        this.data = 0,
        this.blendMode = rt.BLEND_MODES.NORMAL,
        this.polygonOffset = 0,
        this.blend = !0,
        this.depthMask = !0
    }
    var vn, En = (__extends$h(Filter, vn = Tn),
    Filter.prototype.apply = function(t, e, i, r, n) {
        t.applyFilter(this, e, i, r)
    }
    ,
    Object.defineProperty(Filter.prototype, "blendMode", {
        get: function() {
            return this.state.blendMode
        },
        set: function(t) {
            this.state.blendMode = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Filter.prototype, "resolution", {
        get: function() {
            return this._resolution
        },
        set: function(t) {
            this._resolution = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Filter, "defaultVertexSrc", {
        get: function() {
            return "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Filter, "defaultFragmentSrc", {
        get: function() {
            return "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"
        },
        enumerable: !1,
        configurable: !0
    }),
    Filter);
    function Filter(t, e, i) {
        var r = this
          , n = mn.from(t || Filter.defaultVertexSrc, e || Filter.defaultFragmentSrc);
        return (r = vn.call(this, n, i) || this).padding = 0,
        r.resolution = pt.FILTER_RESOLUTION,
        r.multisample = pt.FILTER_MULTISAMPLE,
        r.enabled = !0,
        r.autoFit = !0,
        r.state = new gn,
        r
    }
    var Sn = new Ce
      , bn = (Object.defineProperty(TextureMatrix.prototype, "texture", {
        get: function() {
            return this._texture
        },
        set: function(t) {
            this._texture = t,
            this._textureID = -1
        },
        enumerable: !1,
        configurable: !0
    }),
    TextureMatrix.prototype.multiplyUvs = function(t, e) {
        void 0 === e && (e = t);
        for (var i = this.mapCoord, r = 0; r < t.length; r += 2) {
            var n = t[r]
              , o = t[r + 1];
            e[r] = n * i.a + o * i.c + i.tx,
            e[r + 1] = n * i.b + o * i.d + i.ty
        }
        return e
    }
    ,
    TextureMatrix.prototype.update = function(t) {
        var e = this._texture;
        if (!e || !e.valid)
            return !1;
        if (!t && this._textureID === e._updateID)
            return !1;
        this._textureID = e._updateID,
        this._updateID++;
        var i = e._uvs;
        this.mapCoord.set(i.x1 - i.x0, i.y1 - i.y0, i.x3 - i.x0, i.y3 - i.y0, i.x0, i.y0);
        var r = e.orig
          , n = e.trim;
        n && (Sn.set(r.width / n.width, 0, 0, r.height / n.height, -n.x / n.width, -n.y / n.height),
        this.mapCoord.append(Sn));
        var o = e.baseTexture
          , s = this.uClampFrame
          , a = this.clampMargin / o.resolution
          , l = this.clampOffset;
        return s[0] = (e._frame.x + a + l) / o.width,
        s[1] = (e._frame.y + a + l) / o.height,
        s[2] = (e._frame.x + e._frame.width - a + l) / o.width,
        s[3] = (e._frame.y + e._frame.height - a + l) / o.height,
        this.uClampOffset[0] = l / o.realWidth,
        this.uClampOffset[1] = l / o.realHeight,
        this.isSimple = e._frame.width === o.width && e._frame.height === o.height && 0 === e.rotate,
        !0
    }
    ,
    TextureMatrix);
    function TextureMatrix(t, e) {
        this._texture = t,
        this.mapCoord = new Ce,
        this.uClampFrame = new Float32Array(4),
        this.uClampOffset = new Float32Array(2),
        this._textureID = -1,
        this._updateID = 0,
        this.clampOffset = 0,
        this.clampMargin = void 0 === e ? .5 : e,
        this.isSimple = !1
    }
    var In, Cn = (__extends$h(SpriteMaskFilter, In = En),
    Object.defineProperty(SpriteMaskFilter.prototype, "maskSprite", {
        get: function() {
            return this._maskSprite
        },
        set: function(t) {
            this._maskSprite = t,
            this._maskSprite && (this._maskSprite.renderable = !1)
        },
        enumerable: !1,
        configurable: !0
    }),
    SpriteMaskFilter.prototype.apply = function(t, e, i, r) {
        var n = this._maskSprite
          , o = n._texture;
        o.valid && (o.uvMatrix || (o.uvMatrix = new bn(o,0)),
        o.uvMatrix.update(),
        this.uniforms.npmAlpha = o.baseTexture.alphaMode ? 0 : 1,
        this.uniforms.mask = o,
        this.uniforms.otherMatrix = t.calculateSpriteMatrix(this.maskMatrix, n).prepend(o.uvMatrix.mapCoord),
        this.uniforms.alpha = n.worldAlpha,
        this.uniforms.maskClamp = o.uvMatrix.uClampFrame,
        t.applyFilter(this, e, i, r))
    }
    ,
    SpriteMaskFilter);
    function SpriteMaskFilter(t, e, i) {
        var r = this
          , n = null;
        return "string" != typeof t && void 0 === e && void 0 === i && (n = t,
        i = e = t = void 0),
        (r = In.call(this, t || "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n", e || "varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n", i) || this).maskSprite = n,
        r.maskMatrix = new Ce,
        r
    }
    var Un = (MaskSystem.prototype.setMaskStack = function(t) {
        this.maskStack = t,
        this.renderer.scissor.setMaskStack(t),
        this.renderer.stencil.setMaskStack(t)
    }
    ,
    MaskSystem.prototype.push = function(t, e) {
        var i = e;
        if (!i.isMaskData) {
            var r = this.maskDataPool.pop() || new rn;
            r.pooled = !0,
            r.maskObject = e,
            i = r
        }
        var n = 0 !== this.maskStack.length ? this.maskStack[this.maskStack.length - 1] : null;
        if (i.copyCountersOrReset(n),
        i.autoDetect && this.detect(i),
        i._target = t,
        i.type !== rt.MASK_TYPES.SPRITE && this.maskStack.push(i),
        i.enabled)
            switch (i.type) {
            case rt.MASK_TYPES.SCISSOR:
                this.renderer.scissor.push(i);
                break;
            case rt.MASK_TYPES.STENCIL:
                this.renderer.stencil.push(i);
                break;
            case rt.MASK_TYPES.SPRITE:
                i.copyCountersOrReset(null),
                this.pushSpriteMask(i)
            }
        i.type === rt.MASK_TYPES.SPRITE && this.maskStack.push(i)
    }
    ,
    MaskSystem.prototype.pop = function(t) {
        var e = this.maskStack.pop();
        if (e && e._target === t) {
            if (e.enabled)
                switch (e.type) {
                case rt.MASK_TYPES.SCISSOR:
                    this.renderer.scissor.pop();
                    break;
                case rt.MASK_TYPES.STENCIL:
                    this.renderer.stencil.pop(e.maskObject);
                    break;
                case rt.MASK_TYPES.SPRITE:
                    this.popSpriteMask(e)
                }
            if (e.reset(),
            e.pooled && this.maskDataPool.push(e),
            0 !== this.maskStack.length) {
                var i = this.maskStack[this.maskStack.length - 1];
                i.type === rt.MASK_TYPES.SPRITE && i._filters && (i._filters[0].maskSprite = i.maskObject)
            }
        }
    }
    ,
    MaskSystem.prototype.detect = function(t) {
        t.maskObject.isSprite ? t.type = rt.MASK_TYPES.SPRITE : this.enableScissor && this.renderer.scissor.testScissor(t) ? t.type = rt.MASK_TYPES.SCISSOR : t.type = rt.MASK_TYPES.STENCIL
    }
    ,
    MaskSystem.prototype.pushSpriteMask = function(t) {
        var e, i, r = t.maskObject, n = t._target, o = t._filters;
        o = (o = o || this.alphaMaskPool[this.alphaMaskIndex]) || (this.alphaMaskPool[this.alphaMaskIndex] = [new Cn]);
        var s, a, l = this.renderer, c = l.renderTexture;
        if (c.current) {
            var u = c.current;
            s = t.resolution || u.resolution,
            a = null !== (e = t.multisample) && void 0 !== e ? e : u.multisample
        } else
            s = t.resolution || l.resolution,
            a = null !== (i = t.multisample) && void 0 !== i ? i : l.multisample;
        o[0].resolution = s,
        o[0].multisample = a,
        o[0].maskSprite = r;
        var p = n.filterArea;
        n.filterArea = r.getBounds(!0),
        l.filter.push(n, o),
        n.filterArea = p,
        t._filters || this.alphaMaskIndex++
    }
    ,
    MaskSystem.prototype.popSpriteMask = function(t) {
        this.renderer.filter.pop(),
        t._filters ? t._filters[0].maskSprite = null : (this.alphaMaskIndex--,
        this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite = null)
    }
    ,
    MaskSystem.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    MaskSystem);
    function MaskSystem(t) {
        this.renderer = t,
        this.enableScissor = !0,
        this.alphaMaskPool = [],
        this.maskDataPool = [],
        this.maskStack = [],
        this.alphaMaskIndex = 0
    }
    var An = (AbstractMaskSystem.prototype.getStackLength = function() {
        return this.maskStack.length
    }
    ,
    AbstractMaskSystem.prototype.setMaskStack = function(t) {
        var e = this.renderer.gl
          , i = this.getStackLength();
        this.maskStack = t;
        var r = this.getStackLength();
        r !== i && (0 === r ? e.disable(this.glConst) : (e.enable(this.glConst),
        this._useCurrent()))
    }
    ,
    AbstractMaskSystem.prototype._useCurrent = function() {}
    ,
    AbstractMaskSystem.prototype.destroy = function() {
        this.renderer = null,
        this.maskStack = null
    }
    ,
    AbstractMaskSystem);
    function AbstractMaskSystem(t) {
        this.renderer = t,
        this.maskStack = [],
        this.glConst = 0
    }
    var wn, On = new Ce, Rn = (__extends$h(ScissorSystem, wn = An),
    ScissorSystem.prototype.getStackLength = function() {
        var t = this.maskStack[this.maskStack.length - 1];
        return t ? t._scissorCounter : 0
    }
    ,
    ScissorSystem.prototype.calcScissorRect = function(t) {
        if (!t._scissorRectLocal) {
            var e = t._scissorRect
              , i = t.maskObject
              , r = this.renderer
              , n = r.renderTexture;
            i.renderable = !0;
            var o = i.getBounds();
            this.roundFrameToPixels(o, n.current ? n.current.resolution : r.resolution, n.sourceFrame, n.destinationFrame, r.projection.transform),
            i.renderable = !1,
            e && o.fit(e),
            t._scissorRectLocal = o
        }
    }
    ,
    ScissorSystem.isMatrixRotated = function(t) {
        if (!t)
            return !1;
        var e = t.a
          , i = t.b
          , r = t.c
          , n = t.d;
        return (1e-4 < Math.abs(i) || 1e-4 < Math.abs(r)) && (1e-4 < Math.abs(e) || 1e-4 < Math.abs(n))
    }
    ,
    ScissorSystem.prototype.testScissor = function(t) {
        var e = t.maskObject;
        if (!e.isFastRect || !e.isFastRect())
            return !1;
        if (ScissorSystem.isMatrixRotated(e.worldTransform))
            return !1;
        if (ScissorSystem.isMatrixRotated(this.renderer.projection.transform))
            return !1;
        this.calcScissorRect(t);
        var i = t._scissorRectLocal;
        return 0 < i.width && 0 < i.height
    }
    ,
    ScissorSystem.prototype.roundFrameToPixels = function(t, e, i, r, n) {
        ScissorSystem.isMatrixRotated(n) || ((n = n ? On.copyFrom(n) : On.identity()).translate(-i.x, -i.y).scale(r.width / i.width, r.height / i.height).translate(r.x, r.y),
        this.renderer.filter.transformAABB(n, t),
        t.fit(r),
        t.x = Math.round(t.x * e),
        t.y = Math.round(t.y * e),
        t.width = Math.round(t.width * e),
        t.height = Math.round(t.height * e))
    }
    ,
    ScissorSystem.prototype.push = function(t) {
        t._scissorRectLocal || this.calcScissorRect(t);
        var e = this.renderer.gl;
        t._scissorRect || e.enable(e.SCISSOR_TEST),
        t._scissorCounter++,
        t._scissorRect = t._scissorRectLocal,
        this._useCurrent()
    }
    ,
    ScissorSystem.prototype.pop = function() {
        var t = this.renderer.gl;
        0 < this.getStackLength() ? this._useCurrent() : t.disable(t.SCISSOR_TEST)
    }
    ,
    ScissorSystem.prototype._useCurrent = function() {
        var t, e = this.maskStack[this.maskStack.length - 1]._scissorRect;
        t = this.renderer.renderTexture.current ? e.y : this.renderer.height - e.height - e.y,
        this.renderer.gl.scissor(e.x, t, e.width, e.height)
    }
    ,
    ScissorSystem);
    function ScissorSystem(t) {
        var e = wn.call(this, t) || this;
        return e.glConst = WebGLRenderingContext.SCISSOR_TEST,
        e
    }
    var Pn, Dn = (__extends$h(StencilSystem, Pn = An),
    StencilSystem.prototype.getStackLength = function() {
        var t = this.maskStack[this.maskStack.length - 1];
        return t ? t._stencilCounter : 0
    }
    ,
    StencilSystem.prototype.push = function(t) {
        var e = t.maskObject
          , i = this.renderer.gl
          , r = t._stencilCounter;
        0 === r && (this.renderer.framebuffer.forceStencil(),
        i.clearStencil(0),
        i.clear(i.STENCIL_BUFFER_BIT),
        i.enable(i.STENCIL_TEST)),
        t._stencilCounter++,
        i.colorMask(!1, !1, !1, !1),
        i.stencilFunc(i.EQUAL, r, 4294967295),
        i.stencilOp(i.KEEP, i.KEEP, i.INCR),
        e.renderable = !0,
        e.render(this.renderer),
        this.renderer.batch.flush(),
        e.renderable = !1,
        this._useCurrent()
    }
    ,
    StencilSystem.prototype.pop = function(t) {
        var e = this.renderer.gl;
        0 === this.getStackLength() ? e.disable(e.STENCIL_TEST) : (e.colorMask(!1, !1, !1, !1),
        e.stencilOp(e.KEEP, e.KEEP, e.DECR),
        t.renderable = !0,
        t.render(this.renderer),
        this.renderer.batch.flush(),
        t.renderable = !1,
        this._useCurrent())
    }
    ,
    StencilSystem.prototype._useCurrent = function() {
        var t = this.renderer.gl;
        t.colorMask(!0, !0, !0, !0),
        t.stencilFunc(t.EQUAL, this.getStackLength(), 4294967295),
        t.stencilOp(t.KEEP, t.KEEP, t.KEEP)
    }
    ,
    StencilSystem);
    function StencilSystem(t) {
        var e = Pn.call(this, t) || this;
        return e.glConst = WebGLRenderingContext.STENCIL_TEST,
        e
    }
    var Ln = (ProjectionSystem.prototype.update = function(t, e, i, r) {
        this.destinationFrame = t || this.destinationFrame || this.defaultFrame,
        this.sourceFrame = e || this.sourceFrame || t,
        this.calculateProjection(this.destinationFrame, this.sourceFrame, i, r),
        this.transform && this.projectionMatrix.append(this.transform);
        var n = this.renderer;
        n.globalUniforms.uniforms.projectionMatrix = this.projectionMatrix,
        n.globalUniforms.update(),
        n.shader.shader && n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)
    }
    ,
    ProjectionSystem.prototype.calculateProjection = function(t, e, i, r) {
        var n = this.projectionMatrix
          , o = r ? -1 : 1;
        n.identity(),
        n.a = 1 / e.width * 2,
        n.d = o * (1 / e.height * 2),
        n.tx = -1 - e.x * n.a,
        n.ty = -o - e.y * n.d
    }
    ,
    ProjectionSystem.prototype.setTransform = function(t) {}
    ,
    ProjectionSystem.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    ProjectionSystem);
    function ProjectionSystem(t) {
        this.renderer = t,
        this.destinationFrame = null,
        this.sourceFrame = null,
        this.defaultFrame = null,
        this.projectionMatrix = new Ce,
        this.transform = null
    }
    var Nn = new ge
      , xn = new ge
      , Mn = (RenderTextureSystem.prototype.bind = function(t, e, i) {
        void 0 === t && (t = null);
        var r, n, o, s = this.renderer;
        (this.current = t) ? (o = (r = t.baseTexture).resolution,
        e || (Nn.width = t.frame.width,
        Nn.height = t.frame.height,
        e = Nn),
        i || (xn.x = t.frame.x,
        xn.y = t.frame.y,
        xn.width = e.width,
        xn.height = e.height,
        i = xn),
        n = r.framebuffer) : (o = s.resolution,
        e || (Nn.width = s.screen.width,
        Nn.height = s.screen.height,
        e = Nn),
        i || ((i = Nn).width = e.width,
        i.height = e.height));
        var a = this.viewportFrame;
        a.x = i.x * o,
        a.y = i.y * o,
        a.width = i.width * o,
        a.height = i.height * o,
        t || (a.y = s.view.height - (a.y + a.height)),
        a.ceil(),
        this.renderer.framebuffer.bind(n, a),
        this.renderer.projection.update(i, e, o, !n),
        t ? this.renderer.mask.setMaskStack(r.maskStack) : this.renderer.mask.setMaskStack(this.defaultMaskStack),
        this.sourceFrame.copyFrom(e),
        this.destinationFrame.copyFrom(i)
    }
    ,
    RenderTextureSystem.prototype.clear = function(t, e) {
        t = this.current ? t || this.current.baseTexture.clearColor : t || this.clearColor;
        var i = this.destinationFrame
          , r = this.current ? this.current.baseTexture : this.renderer.screen
          , n = i.width !== r.width || i.height !== r.height;
        if (n) {
            var o = this.viewportFrame
              , s = o.x
              , a = o.y
              , l = o.width
              , c = o.height;
            s = Math.round(s),
            a = Math.round(a),
            l = Math.round(l),
            c = Math.round(c),
            this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),
            this.renderer.gl.scissor(s, a, l, c)
        }
        this.renderer.framebuffer.clear(t[0], t[1], t[2], t[3], e),
        n && this.renderer.scissor.pop()
    }
    ,
    RenderTextureSystem.prototype.resize = function() {
        this.bind(null)
    }
    ,
    RenderTextureSystem.prototype.reset = function() {
        this.bind(null)
    }
    ,
    RenderTextureSystem.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    RenderTextureSystem);
    function RenderTextureSystem(t) {
        this.renderer = t,
        this.clearColor = t._backgroundColorRgba,
        this.defaultMaskStack = [],
        this.current = null,
        this.sourceFrame = new ge,
        this.destinationFrame = new ge,
        this.viewportFrame = new ge
    }
    function uboUpdate(t, e, i, r, n) {
        i.buffer.update(n)
    }
    var Vn = {
        float: "\n        data[offset] = v;\n    ",
        vec2: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",
        vec3: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",
        vec4: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",
        mat2: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",
        mat3: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",
        mat4: "\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "
    }
      , Bn = {
        float: 4,
        vec2: 8,
        vec3: 12,
        vec4: 16,
        int: 4,
        ivec2: 8,
        ivec3: 12,
        ivec4: 16,
        uint: 4,
        uvec2: 8,
        uvec3: 12,
        uvec4: 16,
        bool: 4,
        bvec2: 8,
        bvec3: 12,
        bvec4: 16,
        mat2: 32,
        mat3: 48,
        mat4: 64
    };
    function createUBOElements(t) {
        for (var e = t.map(function(t) {
            return {
                data: t,
                offset: 0,
                dataLen: 0,
                dirty: 0
            }
        }), i = 0, r = 0, n = 0, o = 0; o < e.length; o++) {
            var s = e[o];
            if (i = Bn[s.data.type],
            1 < s.data.size && (i = Math.max(i, 16) * s.data.size),
            r % (s.dataLen = i) != 0 && r < 16) {
                var a = r % i % 16;
                r += a,
                n += a
            }
            16 < r + i ? (n = 16 * Math.ceil(n / 16),
            s.offset = n,
            n += i,
            r = i) : (s.offset = n,
            r += i,
            n += i)
        }
        return {
            uboElements: e,
            size: n = 16 * Math.ceil(n / 16)
        }
    }
    function getUBOData(t, e) {
        var i = [];
        for (var r in t)
            e[r] && i.push(e[r]);
        return i.sort(function(t, e) {
            return t.index - e.index
        }),
        i
    }
    function generateUniformBufferSync(t, e) {
        if (!t.autoManage)
            return {
                size: 0,
                syncFunc: uboUpdate
            };
        for (var i = createUBOElements(getUBOData(t.uniforms, e)), r = i.uboElements, n = i.size, o = ["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "], s = 0; s < r.length; s++) {
            for (var a = r[s], l = t.uniforms[a.data.name], c = a.data.name, u = !1, p = 0; p < un.length; p++) {
                var h = un[p];
                if (h.codeUbo && h.test(a.data, l)) {
                    o.push("offset = " + a.offset / 4 + ";", un[p].codeUbo(a.data.name, l)),
                    u = !0;
                    break
                }
            }
            if (!u)
                if (1 < a.data.size) {
                    var d = mapSize(a.data.type)
                      , _ = Math.max(Bn[a.data.type] / 16, 1)
                      , y = d / _
                      , f = (4 - y % 4) % 4;
                    o.push("\n                cv = ud." + c + ".value;\n                v = uv." + c + ";\n                offset = " + a.offset / 4 + ";\n\n                t = 0;\n\n                for(var i=0; i < " + a.data.size * _ + "; i++)\n                {\n                    for(var j = 0; j < " + y + "; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += " + f + ";\n                }\n\n                ")
                } else {
                    var m = Vn[a.data.type];
                    o.push("\n                cv = ud." + c + ".value;\n                v = uv." + c + ";\n                offset = " + a.offset / 4 + ";\n                " + m + ";\n                ")
                }
        }
        return o.push("\n       renderer.buffer.update(buffer);\n    "),
        {
            size: n,
            syncFunc: new Function("ud","uv","renderer","syncData","buffer",o.join("\n"))
        }
    }
    function Bec() {}
    var Fn = (GLProgram.prototype.destroy = function() {
        this.uniformData = null,
        this.uniformGroups = null,
        this.uniformDirtyGroups = null,
        this.uniformBufferBindings = null,
        this.program = null
    }
    ,
    GLProgram);
    function GLProgram(t, e) {
        this.program = t,
        this.uniformData = e,
        this.uniformGroups = {},
        this.uniformDirtyGroups = {},
        this.uniformBufferBindings = {}
    }
    function generateProgram(t, e) {
        var i = compileShader(t, t.VERTEX_SHADER, e.vertexSrc)
          , r = compileShader(t, t.FRAGMENT_SHADER, e.fragmentSrc)
          , n = t.createProgram();
        if (t.attachShader(n, i),
        t.attachShader(n, r),
        t.linkProgram(n),
        t.getProgramParameter(n, t.LINK_STATUS) || function logProgramError(t, e, i, r) {
            t.getProgramParameter(e, t.LINK_STATUS) || (t.getShaderParameter(i, t.COMPILE_STATUS) || logPrettyShaderError(t, i),
            t.getShaderParameter(r, t.COMPILE_STATUS) || logPrettyShaderError(t, r),
            console.error("PixiJS Error: Could not initialize shader."),
            "" !== t.getProgramInfoLog(e) && console.warn("PixiJS Warning: gl.getProgramInfoLog()", t.getProgramInfoLog(e)))
        }(t, n, i, r),
        e.attributeData = function getAttributeData(t, e) {
            for (var i = {}, r = e.getProgramParameter(t, e.ACTIVE_ATTRIBUTES), n = 0; n < r; n++) {
                var o = e.getActiveAttrib(t, n);
                if (0 !== o.name.indexOf("gl_")) {
                    var s = mapType(e, o.type)
                      , a = {
                        type: s,
                        name: o.name,
                        size: mapSize(s),
                        location: e.getAttribLocation(t, o.name)
                    };
                    i[o.name] = a
                }
            }
            return i
        }(n, t),
        e.uniformData = function getUniformData(t, e) {
            for (var i = {}, r = e.getProgramParameter(t, e.ACTIVE_UNIFORMS), n = 0; n < r; n++) {
                var o = e.getActiveUniform(t, n)
                  , s = o.name.replace(/\[.*?\]$/, "")
                  , a = !!o.name.match(/\[.*?\]$/)
                  , l = mapType(e, o.type);
                i[s] = {
                    name: s,
                    index: n,
                    type: l,
                    size: o.size,
                    isArray: a,
                    value: defaultValue(l, o.size)
                }
            }
            return i
        }(n, t),
        !/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)) {
            var o = Object.keys(e.attributeData);
            o.sort(function(t, e) {
                return e < t ? 1 : -1
            });
            for (var s = 0; s < o.length; s++)
                e.attributeData[o[s]].location = s,
                t.bindAttribLocation(n, s, o[s]);
            t.linkProgram(n)
        }
        t.deleteShader(i),
        t.deleteShader(r);
        var a = {};
        for (var s in e.uniformData) {
            var l = e.uniformData[s];
            a[s] = {
                location: t.getUniformLocation(n, s),
                value: defaultValue(l.type, l.size)
            }
        }
        return new Fn(n,a)
    }
    var Gn = 0
      , kn = {
        textureCount: 0,
        uboCount: 0
    }
      , jn = (ShaderSystem.prototype.systemCheck = function() {
        if (!function unsafeEvalSupported() {
            if ("boolean" == typeof dn)
                return dn;
            try {
                var t = new Function("param1","param2","param3","return param1[param2] === param3;");
                dn = !0 === t({
                    a: "b"
                }, "a", "b")
            } catch (t) {
                dn = !1
            }
            return dn
        }())
            throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")
    }
    ,
    ShaderSystem.prototype.contextChange = function(t) {
        this.gl = t,
        this.reset()
    }
    ,
    ShaderSystem.prototype.bind = function(t, e) {
        t.uniforms.globals = this.renderer.globalUniforms;
        var i = t.program
          , r = i.glPrograms[this.renderer.CONTEXT_UID] || this.generateProgram(t);
        return this.shader = t,
        this.program !== i && (this.program = i,
        this.gl.useProgram(r.program)),
        e || (kn.textureCount = 0,
        kn.uboCount = 0,
        this.syncUniformGroup(t.uniformGroup, kn)),
        r
    }
    ,
    ShaderSystem.prototype.setUniforms = function(t) {
        var e = this.shader.program
          , i = e.glPrograms[this.renderer.CONTEXT_UID];
        e.syncUniforms(i.uniformData, t, this.renderer)
    }
    ,
    ShaderSystem.prototype.syncUniformGroup = function(t, e) {
        var i = this.getGlProgram();
        t.static && t.dirtyId === i.uniformDirtyGroups[t.id] || (i.uniformDirtyGroups[t.id] = t.dirtyId,
        this.syncUniforms(t, i, e))
    }
    ,
    ShaderSystem.prototype.syncUniforms = function(t, e, i) {
        (t.syncUniforms[this.shader.program.id] || this.createSyncGroups(t))(e.uniformData, t.uniforms, this.renderer, i)
    }
    ,
    ShaderSystem.prototype.createSyncGroups = function(t) {
        var e = this.getSignature(t, this.shader.program.uniformData, "u");
        return this.cache[e] || (this.cache[e] = function generateUniformsSync(t, e) {
            var i, r = ["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];
            for (var n in t.uniforms) {
                var o = e[n];
                if (o) {
                    for (var s = t.uniforms[n], a = !1, l = 0; l < un.length; l++)
                        if (un[l].test(o, s)) {
                            r.push(un[l].code(n, s)),
                            a = !0;
                            break
                        }
                    if (!a) {
                        var c = (1 === o.size ? pn : hn)[o.type].replace("location", 'ud["' + n + '"].location');
                        r.push('\n            cu = ud["' + n + '"];\n            cv = cu.value;\n            v = uv["' + n + '"];\n            ' + c + ";")
                    }
                } else
                    (null === (i = t.uniforms[n]) || void 0 === i ? void 0 : i.group) && (t.uniforms[n].ubo ? r.push("\n                        renderer.shader.syncUniformBufferGroup(uv." + n + ", '" + n + "');\n                    ") : r.push("\n                        renderer.shader.syncUniformGroup(uv." + n + ", syncData);\n                    "))
            }
            return new Function("ud","uv","renderer","syncData",r.join("\n"))
        }(t, this.shader.program.uniformData)),
        t.syncUniforms[this.shader.program.id] = this.cache[e],
        t.syncUniforms[this.shader.program.id]
    }
    ,
    ShaderSystem.prototype.syncUniformBufferGroup = function(t, e) {
        var i = this.getGlProgram();
        if (!t.static || 0 !== t.dirtyId || !i.uniformGroups[t.id]) {
            t.dirtyId = 0;
            var r = i.uniformGroups[t.id] || this.createSyncBufferGroup(t, i, e);
            t.buffer.update(),
            r(i.uniformData, t.uniforms, this.renderer, kn, t.buffer)
        }
        this.renderer.buffer.bindBufferBase(t.buffer, i.uniformBufferBindings[e])
    }
    ,
    ShaderSystem.prototype.createSyncBufferGroup = function(t, e, i) {
        var r = this.renderer.gl;
        this.renderer.buffer.bind(t.buffer);
        var n = this.gl.getUniformBlockIndex(e.program, i);
        e.uniformBufferBindings[i] = this.shader.uniformBindCount,
        r.uniformBlockBinding(e.program, n, this.shader.uniformBindCount),
        this.shader.uniformBindCount++;
        var o = this.getSignature(t, this.shader.program.uniformData, "ubo")
          , s = this._uboCache[o];
        if (s = s || (this._uboCache[o] = generateUniformBufferSync(t, this.shader.program.uniformData)),
        t.autoManage) {
            var a = new Float32Array(s.size / 4);
            t.buffer.update(a)
        }
        return e.uniformGroups[t.id] = s.syncFunc,
        e.uniformGroups[t.id]
    }
    ,
    ShaderSystem.prototype.getSignature = function(t, e, i) {
        var r = t.uniforms
          , n = [i + "-"];
        for (var o in r)
            n.push(o),
            e[o] && n.push(e[o].type);
        return n.join("-")
    }
    ,
    ShaderSystem.prototype.getGlProgram = function() {
        return this.shader ? this.shader.program.glPrograms[this.renderer.CONTEXT_UID] : null
    }
    ,
    ShaderSystem.prototype.generateProgram = function(t) {
        var e = this.gl
          , i = t.program
          , r = generateProgram(e, i);
        return i.glPrograms[this.renderer.CONTEXT_UID] = r
    }
    ,
    ShaderSystem.prototype.reset = function() {
        this.program = null,
        this.shader = null
    }
    ,
    ShaderSystem.prototype.destroy = function() {
        this.renderer = null,
        this.destroyed = !0
    }
    ,
    ShaderSystem);
    function ShaderSystem(t) {
        this.destroyed = !1,
        this.renderer = t,
        this.systemCheck(),
        this.gl = null,
        this.shader = null,
        this.program = null,
        this.cache = {},
        this._uboCache = {},
        this.id = Gn++
    }
    var Hn = (StateSystem.prototype.contextChange = function(t) {
        this.gl = t,
        this.blendModes = function mapWebGLBlendModesToPixi(t, e) {
            return void 0 === e && (e = []),
            e[rt.BLEND_MODES.NORMAL] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.ADD] = [t.ONE, t.ONE],
            e[rt.BLEND_MODES.MULTIPLY] = [t.DST_COLOR, t.ONE_MINUS_SRC_ALPHA, t.ONE, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.SCREEN] = [t.ONE, t.ONE_MINUS_SRC_COLOR, t.ONE, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.OVERLAY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.DARKEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.LIGHTEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.COLOR_DODGE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.COLOR_BURN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.HARD_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.SOFT_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.DIFFERENCE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.EXCLUSION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.HUE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.SATURATION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.COLOR] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.LUMINOSITY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.NONE] = [0, 0],
            e[rt.BLEND_MODES.NORMAL_NPM] = [t.SRC_ALPHA, t.ONE_MINUS_SRC_ALPHA, t.ONE, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.ADD_NPM] = [t.SRC_ALPHA, t.ONE, t.ONE, t.ONE],
            e[rt.BLEND_MODES.SCREEN_NPM] = [t.SRC_ALPHA, t.ONE_MINUS_SRC_COLOR, t.ONE, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.SRC_IN] = [t.DST_ALPHA, t.ZERO],
            e[rt.BLEND_MODES.SRC_OUT] = [t.ONE_MINUS_DST_ALPHA, t.ZERO],
            e[rt.BLEND_MODES.SRC_ATOP] = [t.DST_ALPHA, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.DST_OVER] = [t.ONE_MINUS_DST_ALPHA, t.ONE],
            e[rt.BLEND_MODES.DST_IN] = [t.ZERO, t.SRC_ALPHA],
            e[rt.BLEND_MODES.DST_OUT] = [t.ZERO, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.DST_ATOP] = [t.ONE_MINUS_DST_ALPHA, t.SRC_ALPHA],
            e[rt.BLEND_MODES.XOR] = [t.ONE_MINUS_DST_ALPHA, t.ONE_MINUS_SRC_ALPHA],
            e[rt.BLEND_MODES.SUBTRACT] = [t.ONE, t.ONE, t.ONE, t.ONE, t.FUNC_REVERSE_SUBTRACT, t.FUNC_ADD],
            e
        }(t),
        this.set(this.defaultState),
        this.reset()
    }
    ,
    StateSystem.prototype.set = function(t) {
        if (t = t || this.defaultState,
        this.stateId !== t.data) {
            for (var e = this.stateId ^ t.data, i = 0; e; )
                1 & e && this.map[i].call(this, !!(t.data & 1 << i)),
                e >>= 1,
                i++;
            this.stateId = t.data
        }
        for (i = 0; i < this.checks.length; i++)
            this.checks[i](this, t)
    }
    ,
    StateSystem.prototype.forceState = function(t) {
        t = t || this.defaultState;
        for (var e = 0; e < this.map.length; e++)
            this.map[e].call(this, !!(t.data & 1 << e));
        for (e = 0; e < this.checks.length; e++)
            this.checks[e](this, t);
        this.stateId = t.data
    }
    ,
    StateSystem.prototype.setBlend = function(t) {
        this.updateCheck(StateSystem.checkBlendMode, t),
        this.gl[t ? "enable" : "disable"](this.gl.BLEND)
    }
    ,
    StateSystem.prototype.setOffset = function(t) {
        this.updateCheck(StateSystem.checkPolygonOffset, t),
        this.gl[t ? "enable" : "disable"](this.gl.POLYGON_OFFSET_FILL)
    }
    ,
    StateSystem.prototype.setDepthTest = function(t) {
        this.gl[t ? "enable" : "disable"](this.gl.DEPTH_TEST)
    }
    ,
    StateSystem.prototype.setDepthMask = function(t) {
        this.gl.depthMask(t)
    }
    ,
    StateSystem.prototype.setCullFace = function(t) {
        this.gl[t ? "enable" : "disable"](this.gl.CULL_FACE)
    }
    ,
    StateSystem.prototype.setFrontFace = function(t) {
        this.gl.frontFace(this.gl[t ? "CW" : "CCW"])
    }
    ,
    StateSystem.prototype.setBlendMode = function(t) {
        if (t !== this.blendMode) {
            this.blendMode = t;
            var e = this.blendModes[t]
              , i = this.gl;
            2 === e.length ? i.blendFunc(e[0], e[1]) : i.blendFuncSeparate(e[0], e[1], e[2], e[3]),
            6 === e.length ? (this._blendEq = !0,
            i.blendEquationSeparate(e[4], e[5])) : this._blendEq && (this._blendEq = !1,
            i.blendEquationSeparate(i.FUNC_ADD, i.FUNC_ADD))
        }
    }
    ,
    StateSystem.prototype.setPolygonOffset = function(t, e) {
        this.gl.polygonOffset(t, e)
    }
    ,
    StateSystem.prototype.reset = function() {
        this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, !1),
        this.forceState(this.defaultState),
        this._blendEq = !0,
        this.blendMode = -1,
        this.setBlendMode(0)
    }
    ,
    StateSystem.prototype.updateCheck = function(t, e) {
        var i = this.checks.indexOf(t);
        e && -1 === i ? this.checks.push(t) : e || -1 === i || this.checks.splice(i, 1)
    }
    ,
    StateSystem.checkBlendMode = function(t, e) {
        t.setBlendMode(e.blendMode)
    }
    ,
    StateSystem.checkPolygonOffset = function(t, e) {
        t.setPolygonOffset(1, e.polygonOffset)
    }
    ,
    StateSystem.prototype.destroy = function() {
        this.gl = null
    }
    ,
    StateSystem);
    function StateSystem() {
        this.gl = null,
        this.stateId = 0,
        this.polygonOffset = 0,
        this.blendMode = rt.BLEND_MODES.NONE,
        this._blendEq = !1,
        this.map = [],
        this.map[0] = this.setBlend,
        this.map[1] = this.setOffset,
        this.map[2] = this.setCullFace,
        this.map[3] = this.setDepthTest,
        this.map[4] = this.setFrontFace,
        this.map[5] = this.setDepthMask,
        this.checks = [],
        this.defaultState = new gn,
        this.defaultState.blend = !0
    }
    var qn = (TextureGCSystem.prototype.postrender = function() {
        this.renderer.renderingToScreen && (this.count++,
        this.mode !== rt.GC_MODES.MANUAL && (this.checkCount++,
        this.checkCount > this.checkCountMax && (this.checkCount = 0,
        this.run())))
    }
    ,
    TextureGCSystem.prototype.run = function() {
        for (var t = this.renderer.texture, e = t.managedTextures, i = !1, r = 0; r < e.length; r++) {
            var n = e[r];
            !n.framebuffer && this.count - n.touched > this.maxIdle && (t.destroyTexture(n, !0),
            i = !(e[r] = null))
        }
        if (i) {
            var o = 0;
            for (r = 0; r < e.length; r++)
                null !== e[r] && (e[o++] = e[r]);
            e.length = o
        }
    }
    ,
    TextureGCSystem.prototype.unload = function(t) {
        var e = this.renderer.texture
          , i = t._texture;
        i && !i.framebuffer && e.destroyTexture(i);
        for (var r = t.children.length - 1; 0 <= r; r--)
            this.unload(t.children[r])
    }
    ,
    TextureGCSystem.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    TextureGCSystem);
    function TextureGCSystem(t) {
        this.renderer = t,
        this.count = 0,
        this.checkCount = 0,
        this.maxIdle = pt.GC_MAX_IDLE,
        this.checkCountMax = pt.GC_MAX_CHECK_COUNT,
        this.mode = pt.GC_MODE
    }
    var Yn = function GLTexture(t) {
        this.texture = t,
        this.width = -1,
        this.height = -1,
        this.dirtyId = -1,
        this.dirtyStyleId = -1,
        this.mipmap = !1,
        this.wrapMode = 33071,
        this.type = rt.TYPES.UNSIGNED_BYTE,
        this.internalFormat = rt.FORMATS.RGBA,
        this.samplerType = 0
    }
      , zn = (TextureSystem.prototype.contextChange = function() {
        var t = this.gl = this.renderer.gl;
        this.CONTEXT_UID = this.renderer.CONTEXT_UID,
        this.webGLVersion = this.renderer.context.webGLVersion,
        this.internalFormats = function mapTypeAndFormatToInternalFormat(t) {
            var e, i, r, n, o, s, a, l, c, u, p, h, d, _, y, f, m, T, g, v, E, S;
            return "WebGL2RenderingContext"in globalThis && t instanceof globalThis.WebGL2RenderingContext ? ((e = {})[rt.TYPES.UNSIGNED_BYTE] = ((i = {})[rt.FORMATS.RGBA] = t.RGBA8,
            i[rt.FORMATS.RGB] = t.RGB8,
            i[rt.FORMATS.RG] = t.RG8,
            i[rt.FORMATS.RED] = t.R8,
            i[rt.FORMATS.RGBA_INTEGER] = t.RGBA8UI,
            i[rt.FORMATS.RGB_INTEGER] = t.RGB8UI,
            i[rt.FORMATS.RG_INTEGER] = t.RG8UI,
            i[rt.FORMATS.RED_INTEGER] = t.R8UI,
            i[rt.FORMATS.ALPHA] = t.ALPHA,
            i[rt.FORMATS.LUMINANCE] = t.LUMINANCE,
            i[rt.FORMATS.LUMINANCE_ALPHA] = t.LUMINANCE_ALPHA,
            i),
            e[rt.TYPES.BYTE] = ((r = {})[rt.FORMATS.RGBA] = t.RGBA8_SNORM,
            r[rt.FORMATS.RGB] = t.RGB8_SNORM,
            r[rt.FORMATS.RG] = t.RG8_SNORM,
            r[rt.FORMATS.RED] = t.R8_SNORM,
            r[rt.FORMATS.RGBA_INTEGER] = t.RGBA8I,
            r[rt.FORMATS.RGB_INTEGER] = t.RGB8I,
            r[rt.FORMATS.RG_INTEGER] = t.RG8I,
            r[rt.FORMATS.RED_INTEGER] = t.R8I,
            r),
            e[rt.TYPES.UNSIGNED_SHORT] = ((n = {})[rt.FORMATS.RGBA_INTEGER] = t.RGBA16UI,
            n[rt.FORMATS.RGB_INTEGER] = t.RGB16UI,
            n[rt.FORMATS.RG_INTEGER] = t.RG16UI,
            n[rt.FORMATS.RED_INTEGER] = t.R16UI,
            n[rt.FORMATS.DEPTH_COMPONENT] = t.DEPTH_COMPONENT16,
            n),
            e[rt.TYPES.SHORT] = ((o = {})[rt.FORMATS.RGBA_INTEGER] = t.RGBA16I,
            o[rt.FORMATS.RGB_INTEGER] = t.RGB16I,
            o[rt.FORMATS.RG_INTEGER] = t.RG16I,
            o[rt.FORMATS.RED_INTEGER] = t.R16I,
            o),
            e[rt.TYPES.UNSIGNED_INT] = ((s = {})[rt.FORMATS.RGBA_INTEGER] = t.RGBA32UI,
            s[rt.FORMATS.RGB_INTEGER] = t.RGB32UI,
            s[rt.FORMATS.RG_INTEGER] = t.RG32UI,
            s[rt.FORMATS.RED_INTEGER] = t.R32UI,
            s[rt.FORMATS.DEPTH_COMPONENT] = t.DEPTH_COMPONENT24,
            s),
            e[rt.TYPES.INT] = ((a = {})[rt.FORMATS.RGBA_INTEGER] = t.RGBA32I,
            a[rt.FORMATS.RGB_INTEGER] = t.RGB32I,
            a[rt.FORMATS.RG_INTEGER] = t.RG32I,
            a[rt.FORMATS.RED_INTEGER] = t.R32I,
            a),
            e[rt.TYPES.FLOAT] = ((l = {})[rt.FORMATS.RGBA] = t.RGBA32F,
            l[rt.FORMATS.RGB] = t.RGB32F,
            l[rt.FORMATS.RG] = t.RG32F,
            l[rt.FORMATS.RED] = t.R32F,
            l[rt.FORMATS.DEPTH_COMPONENT] = t.DEPTH_COMPONENT32F,
            l),
            e[rt.TYPES.HALF_FLOAT] = ((c = {})[rt.FORMATS.RGBA] = t.RGBA16F,
            c[rt.FORMATS.RGB] = t.RGB16F,
            c[rt.FORMATS.RG] = t.RG16F,
            c[rt.FORMATS.RED] = t.R16F,
            c),
            e[rt.TYPES.UNSIGNED_SHORT_5_6_5] = ((u = {})[rt.FORMATS.RGB] = t.RGB565,
            u),
            e[rt.TYPES.UNSIGNED_SHORT_4_4_4_4] = ((p = {})[rt.FORMATS.RGBA] = t.RGBA4,
            p),
            e[rt.TYPES.UNSIGNED_SHORT_5_5_5_1] = ((h = {})[rt.FORMATS.RGBA] = t.RGB5_A1,
            h),
            e[rt.TYPES.UNSIGNED_INT_2_10_10_10_REV] = ((d = {})[rt.FORMATS.RGBA] = t.RGB10_A2,
            d[rt.FORMATS.RGBA_INTEGER] = t.RGB10_A2UI,
            d),
            e[rt.TYPES.UNSIGNED_INT_10F_11F_11F_REV] = ((_ = {})[rt.FORMATS.RGB] = t.R11F_G11F_B10F,
            _),
            e[rt.TYPES.UNSIGNED_INT_5_9_9_9_REV] = ((y = {})[rt.FORMATS.RGB] = t.RGB9_E5,
            y),
            e[rt.TYPES.UNSIGNED_INT_24_8] = ((f = {})[rt.FORMATS.DEPTH_STENCIL] = t.DEPTH24_STENCIL8,
            f),
            e[rt.TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV] = ((m = {})[rt.FORMATS.DEPTH_STENCIL] = t.DEPTH32F_STENCIL8,
            m),
            e) : ((T = {})[rt.TYPES.UNSIGNED_BYTE] = ((g = {})[rt.FORMATS.RGBA] = t.RGBA,
            g[rt.FORMATS.RGB] = t.RGB,
            g[rt.FORMATS.ALPHA] = t.ALPHA,
            g[rt.FORMATS.LUMINANCE] = t.LUMINANCE,
            g[rt.FORMATS.LUMINANCE_ALPHA] = t.LUMINANCE_ALPHA,
            g),
            T[rt.TYPES.UNSIGNED_SHORT_5_6_5] = ((v = {})[rt.FORMATS.RGB] = t.RGB,
            v),
            T[rt.TYPES.UNSIGNED_SHORT_4_4_4_4] = ((E = {})[rt.FORMATS.RGBA] = t.RGBA,
            E),
            T[rt.TYPES.UNSIGNED_SHORT_5_5_5_1] = ((S = {})[rt.FORMATS.RGBA] = t.RGBA,
            S),
            T)
        }(t);
        var e = t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);
        this.boundTextures.length = e;
        for (var i = 0; i < e; i++)
            this.boundTextures[i] = null;
        this.emptyTextures = {};
        var r = new Yn(t.createTexture());
        for (t.bindTexture(t.TEXTURE_2D, r.texture),
        t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, 1, 1, 0, t.RGBA, t.UNSIGNED_BYTE, new Uint8Array(4)),
        this.emptyTextures[t.TEXTURE_2D] = r,
        this.emptyTextures[t.TEXTURE_CUBE_MAP] = new Yn(t.createTexture()),
        t.bindTexture(t.TEXTURE_CUBE_MAP, this.emptyTextures[t.TEXTURE_CUBE_MAP].texture),
        i = 0; i < 6; i++)
            t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, t.RGBA, 1, 1, 0, t.RGBA, t.UNSIGNED_BYTE, null);
        for (t.texParameteri(t.TEXTURE_CUBE_MAP, t.TEXTURE_MAG_FILTER, t.LINEAR),
        t.texParameteri(t.TEXTURE_CUBE_MAP, t.TEXTURE_MIN_FILTER, t.LINEAR),
        i = 0; i < this.boundTextures.length; i++)
            this.bind(null, i)
    }
    ,
    TextureSystem.prototype.bind = function(t, e) {
        void 0 === e && (e = 0);
        var i = this.gl;
        if ((t = null == t ? void 0 : t.castToBaseTexture()) && t.valid && !t.parentTextureArray) {
            t.touched = this.renderer.textureGC.count;
            var r = t._glTextures[this.CONTEXT_UID] || this.initTexture(t);
            this.boundTextures[e] !== t && (this.currentLocation !== e && (this.currentLocation = e,
            i.activeTexture(i.TEXTURE0 + e)),
            i.bindTexture(t.target, r.texture)),
            r.dirtyId !== t.dirtyId && (this.currentLocation !== e && (this.currentLocation = e,
            i.activeTexture(i.TEXTURE0 + e)),
            this.updateTexture(t)),
            this.boundTextures[e] = t
        } else
            this.currentLocation !== e && (this.currentLocation = e,
            i.activeTexture(i.TEXTURE0 + e)),
            i.bindTexture(i.TEXTURE_2D, this.emptyTextures[i.TEXTURE_2D].texture),
            this.boundTextures[e] = null
    }
    ,
    TextureSystem.prototype.reset = function() {
        this._unknownBoundTextures = !0,
        this.hasIntegerTextures = !1,
        this.currentLocation = -1;
        for (var t = 0; t < this.boundTextures.length; t++)
            this.boundTextures[t] = this.unknownTexture
    }
    ,
    TextureSystem.prototype.unbind = function(t) {
        var e = this.gl
          , i = this.boundTextures;
        if (this._unknownBoundTextures) {
            this._unknownBoundTextures = !1;
            for (var r = 0; r < i.length; r++)
                i[r] === this.unknownTexture && this.bind(null, r)
        }
        for (r = 0; r < i.length; r++)
            i[r] === t && (this.currentLocation !== r && (e.activeTexture(e.TEXTURE0 + r),
            this.currentLocation = r),
            e.bindTexture(t.target, this.emptyTextures[t.target].texture),
            i[r] = null)
    }
    ,
    TextureSystem.prototype.ensureSamplerType = function(t) {
        var e = this.boundTextures
          , i = this.hasIntegerTextures
          , r = this.CONTEXT_UID;
        if (i)
            for (var n = t - 1; 0 <= n; --n) {
                var o = e[n];
                o && o._glTextures[r].samplerType !== rt.SAMPLER_TYPES.FLOAT && this.renderer.texture.unbind(o)
            }
    }
    ,
    TextureSystem.prototype.initTexture = function(t) {
        var e = new Yn(this.gl.createTexture());
        return e.dirtyId = -1,
        t._glTextures[this.CONTEXT_UID] = e,
        this.managedTextures.push(t),
        t.on("dispose", this.destroyTexture, this),
        e
    }
    ,
    TextureSystem.prototype.initTextureType = function(t, e) {
        var i, r;
        e.internalFormat = null !== (r = null === (i = this.internalFormats[t.type]) || void 0 === i ? void 0 : i[t.format]) && void 0 !== r ? r : t.format,
        2 === this.webGLVersion && t.type === rt.TYPES.HALF_FLOAT ? e.type = this.gl.HALF_FLOAT : e.type = t.type
    }
    ,
    TextureSystem.prototype.updateTexture = function(t) {
        var e = t._glTextures[this.CONTEXT_UID];
        if (e) {
            var i = this.renderer;
            if (this.initTextureType(t, e),
            t.resource && t.resource.upload(i, t, e))
                e.samplerType !== rt.SAMPLER_TYPES.FLOAT && (this.hasIntegerTextures = !0);
            else {
                var r = t.realWidth
                  , n = t.realHeight
                  , o = i.gl;
                (e.width !== r || e.height !== n || e.dirtyId < 0) && (e.width = r,
                e.height = n,
                o.texImage2D(t.target, 0, e.internalFormat, r, n, 0, t.format, e.type, null))
            }
            t.dirtyStyleId !== e.dirtyStyleId && this.updateTextureStyle(t),
            e.dirtyId = t.dirtyId
        }
    }
    ,
    TextureSystem.prototype.destroyTexture = function(t, e) {
        var i = this.gl;
        if ((t = t.castToBaseTexture())._glTextures[this.CONTEXT_UID] && (this.unbind(t),
        i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),
        t.off("dispose", this.destroyTexture, this),
        delete t._glTextures[this.CONTEXT_UID],
        !e)) {
            var r = this.managedTextures.indexOf(t);
            -1 !== r && removeItems(this.managedTextures, r, 1)
        }
    }
    ,
    TextureSystem.prototype.updateTextureStyle = function(t) {
        var e = t._glTextures[this.CONTEXT_UID];
        e && (t.mipmap !== rt.MIPMAP_MODES.POW2 && 2 === this.webGLVersion || t.isPowerOfTwo ? e.mipmap = 1 <= t.mipmap : e.mipmap = !1,
        2 === this.webGLVersion || t.isPowerOfTwo ? e.wrapMode = t.wrapMode : e.wrapMode = rt.WRAP_MODES.CLAMP,
        t.resource && t.resource.style(this.renderer, t, e) || this.setStyle(t, e),
        e.dirtyStyleId = t.dirtyStyleId)
    }
    ,
    TextureSystem.prototype.setStyle = function(t, e) {
        var i = this.gl;
        if (e.mipmap && t.mipmap !== rt.MIPMAP_MODES.ON_MANUAL && i.generateMipmap(t.target),
        i.texParameteri(t.target, i.TEXTURE_WRAP_S, e.wrapMode),
        i.texParameteri(t.target, i.TEXTURE_WRAP_T, e.wrapMode),
        e.mipmap) {
            i.texParameteri(t.target, i.TEXTURE_MIN_FILTER, t.scaleMode === rt.SCALE_MODES.LINEAR ? i.LINEAR_MIPMAP_LINEAR : i.NEAREST_MIPMAP_NEAREST);
            var r = this.renderer.context.extensions.anisotropicFiltering;
            if (r && 0 < t.anisotropicLevel && t.scaleMode === rt.SCALE_MODES.LINEAR) {
                var n = Math.min(t.anisotropicLevel, i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));
                i.texParameterf(t.target, r.TEXTURE_MAX_ANISOTROPY_EXT, n)
            }
        } else
            i.texParameteri(t.target, i.TEXTURE_MIN_FILTER, t.scaleMode === rt.SCALE_MODES.LINEAR ? i.LINEAR : i.NEAREST);
        i.texParameteri(t.target, i.TEXTURE_MAG_FILTER, t.scaleMode === rt.SCALE_MODES.LINEAR ? i.LINEAR : i.NEAREST)
    }
    ,
    TextureSystem.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    TextureSystem);
    function TextureSystem(t) {
        this.renderer = t,
        this.boundTextures = [],
        this.currentLocation = -1,
        this.managedTextures = [],
        this._unknownBoundTextures = !1,
        this.unknownTexture = new Qi,
        this.hasIntegerTextures = !1
    }
    var Kn, Xn = {
        __proto__: null,
        FilterSystem: zr,
        BatchSystem: Xr,
        ContextSystem: Jr,
        FramebufferSystem: $r,
        GeometrySystem: en,
        MaskSystem: Un,
        ScissorSystem: Rn,
        StencilSystem: Dn,
        ProjectionSystem: Ln,
        RenderTextureSystem: Mn,
        ShaderSystem: jn,
        StateSystem: Hn,
        TextureGCSystem: qn,
        TextureSystem: zn
    }, Wn = new Ce, Jn = (__extends$h(AbstractRenderer, Kn = dt),
    AbstractRenderer.prototype.initPlugins = function(t) {
        for (var e in t)
            this.plugins[e] = new t[e](this)
    }
    ,
    Object.defineProperty(AbstractRenderer.prototype, "width", {
        get: function() {
            return this.view.width
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(AbstractRenderer.prototype, "height", {
        get: function() {
            return this.view.height
        },
        enumerable: !1,
        configurable: !0
    }),
    AbstractRenderer.prototype.resize = function(t, e) {
        this.view.width = Math.round(t * this.resolution),
        this.view.height = Math.round(e * this.resolution);
        var i = this.view.width / this.resolution
          , r = this.view.height / this.resolution;
        this.screen.width = i,
        this.screen.height = r,
        this.autoDensity && (this.view.style.width = i + "px",
        this.view.style.height = r + "px"),
        this.emit("resize", i, r)
    }
    ,
    AbstractRenderer.prototype.generateTexture = function(t, e, i, r) {
        void 0 === e && (e = {}),
        "number" == typeof e && (deprecation("6.1.0", "generateTexture options (scaleMode, resolution, region) are now object options."),
        e = {
            scaleMode: e,
            resolution: i,
            region: r
        });
        var n = e.region
          , o = function __rest(t, e) {
            var i = {};
            for (var r in t)
                Object.prototype.hasOwnProperty.call(t, r) && e.indexOf(r) < 0 && (i[r] = t[r]);
            if (null != t && "function" == typeof Object.getOwnPropertySymbols) {
                var n = 0;
                for (r = Object.getOwnPropertySymbols(t); n < r.length; n++)
                    e.indexOf(r[n]) < 0 && (i[r[n]] = t[r[n]])
            }
            return i
        }(e, ["region"]);
        0 === (r = n || t.getLocalBounds(null, !0)).width && (r.width = 1),
        0 === r.height && (r.height = 1);
        var s = Ar.create(Yi({
            width: r.width,
            height: r.height
        }, o));
        return Wn.tx = -r.x,
        Wn.ty = -r.y,
        this.render(t, {
            renderTexture: s,
            clear: !1,
            transform: Wn,
            skipUpdateTransform: !!t.parent
        }),
        s
    }
    ,
    AbstractRenderer.prototype.destroy = function(t) {
        for (var e in this.plugins)
            this.plugins[e].destroy(),
            this.plugins[e] = null;
        t && this.view.parentNode && this.view.parentNode.removeChild(this.view),
        this.plugins = null,
        this.type = rt.RENDERER_TYPE.UNKNOWN,
        this.view = null,
        this.screen = null,
        this._tempDisplayObjectParent = null,
        this.options = null,
        this._backgroundColorRgba = null,
        this._backgroundColorString = null,
        this._lastObjectRendered = null
    }
    ,
    Object.defineProperty(AbstractRenderer.prototype, "backgroundColor", {
        get: function() {
            return this._backgroundColor
        },
        set: function(t) {
            this._backgroundColor = t,
            this._backgroundColorString = hex2string(t),
            hex2rgb(t, this._backgroundColorRgba)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(AbstractRenderer.prototype, "backgroundAlpha", {
        get: function() {
            return this._backgroundColorRgba[3]
        },
        set: function(t) {
            this._backgroundColorRgba[3] = t
        },
        enumerable: !1,
        configurable: !0
    }),
    AbstractRenderer);
    function AbstractRenderer(t, e) {
        void 0 === t && (t = rt.RENDERER_TYPE.UNKNOWN);
        var i = Kn.call(this) || this;
        return e = Object.assign({}, pt.RENDER_OPTIONS, e),
        i.options = e,
        i.type = t,
        i.screen = new ge(0,0,e.width,e.height),
        i.view = e.view || document.createElement("canvas"),
        i.resolution = e.resolution || pt.RESOLUTION,
        i.useContextAlpha = e.useContextAlpha,
        i.autoDensity = !!e.autoDensity,
        i.preserveDrawingBuffer = e.preserveDrawingBuffer,
        i.clearBeforeRender = e.clearBeforeRender,
        i._backgroundColor = 0,
        i._backgroundColorRgba = [0, 0, 0, 1],
        i._backgroundColorString = "#000000",
        i.backgroundColor = e.backgroundColor || i._backgroundColor,
        i.backgroundAlpha = e.backgroundAlpha,
        void 0 !== e.transparent && (deprecation("6.0.0", "Option transparent is deprecated, please use backgroundAlpha instead."),
        i.useContextAlpha = e.transparent,
        i.backgroundAlpha = e.transparent ? 0 : 1),
        i._lastObjectRendered = null,
        i.plugins = {},
        i
    }
    var Qn = function GLBuffer(t) {
        this.buffer = t || null,
        this.updateID = -1,
        this.byteLength = -1,
        this.refCount = 0
    }
      , Zn = (BufferSystem.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    BufferSystem.prototype.contextChange = function() {
        this.disposeAll(!0),
        this.gl = this.renderer.gl,
        this.CONTEXT_UID = this.renderer.CONTEXT_UID
    }
    ,
    BufferSystem.prototype.bind = function(t) {
        var e = this.gl
          , i = this.CONTEXT_UID
          , r = t._glBuffers[i] || this.createGLBuffer(t);
        e.bindBuffer(t.type, r.buffer)
    }
    ,
    BufferSystem.prototype.bindBufferBase = function(t, e) {
        var i = this.gl
          , r = this.CONTEXT_UID;
        if (this.boundBufferBases[e] !== t) {
            var n = t._glBuffers[r] || this.createGLBuffer(t);
            this.boundBufferBases[e] = t,
            i.bindBufferBase(i.UNIFORM_BUFFER, e, n.buffer)
        }
    }
    ,
    BufferSystem.prototype.bindBufferRange = function(t, e, i) {
        var r = this.gl
          , n = this.CONTEXT_UID;
        i = i || 0;
        var o = t._glBuffers[n] || this.createGLBuffer(t);
        r.bindBufferRange(r.UNIFORM_BUFFER, e || 0, o.buffer, 256 * i, 256)
    }
    ,
    BufferSystem.prototype.update = function(t) {
        var e = this.gl
          , i = this.CONTEXT_UID
          , r = t._glBuffers[i];
        if (t._updateID !== r.updateID)
            if (r.updateID = t._updateID,
            e.bindBuffer(t.type, r.buffer),
            r.byteLength >= t.data.byteLength)
                e.bufferSubData(t.type, 0, t.data);
            else {
                var n = t.static ? e.STATIC_DRAW : e.DYNAMIC_DRAW;
                r.byteLength = t.data.byteLength,
                e.bufferData(t.type, t.data, n)
            }
    }
    ,
    BufferSystem.prototype.dispose = function(t, e) {
        if (this.managedBuffers[t.id]) {
            delete this.managedBuffers[t.id];
            var i = t._glBuffers[this.CONTEXT_UID]
              , r = this.gl;
            t.disposeRunner.remove(this),
            i && (e || r.deleteBuffer(i.buffer),
            delete t._glBuffers[this.CONTEXT_UID])
        }
    }
    ,
    BufferSystem.prototype.disposeAll = function(t) {
        for (var e = Object.keys(this.managedBuffers), i = 0; i < e.length; i++)
            this.dispose(this.managedBuffers[e[i]], t)
    }
    ,
    BufferSystem.prototype.createGLBuffer = function(t) {
        var e = this.CONTEXT_UID
          , i = this.gl;
        return t._glBuffers[e] = new Qn(i.createBuffer()),
        (this.managedBuffers[t.id] = t).disposeRunner.add(this),
        t._glBuffers[e]
    }
    ,
    BufferSystem);
    function BufferSystem(t) {
        this.renderer = t,
        this.managedBuffers = {},
        this.boundBufferBases = {}
    }
    var $n, to = (__extends$h(Renderer, $n = Jn),
    Renderer.create = function(t) {
        if (isWebGLSupported())
            return new Renderer(t);
        throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')
    }
    ,
    Renderer.prototype.contextChange = function() {
        var t, e = this.gl;
        if (1 === this.context.webGLVersion) {
            var i = e.getParameter(e.FRAMEBUFFER_BINDING);
            e.bindFramebuffer(e.FRAMEBUFFER, null),
            t = e.getParameter(e.SAMPLES),
            e.bindFramebuffer(e.FRAMEBUFFER, i)
        } else
            i = e.getParameter(e.DRAW_FRAMEBUFFER_BINDING),
            e.bindFramebuffer(e.DRAW_FRAMEBUFFER, null),
            t = e.getParameter(e.SAMPLES),
            e.bindFramebuffer(e.DRAW_FRAMEBUFFER, i);
        t >= rt.MSAA_QUALITY.HIGH ? this.multisample = rt.MSAA_QUALITY.HIGH : t >= rt.MSAA_QUALITY.MEDIUM ? this.multisample = rt.MSAA_QUALITY.MEDIUM : t >= rt.MSAA_QUALITY.LOW ? this.multisample = rt.MSAA_QUALITY.LOW : this.multisample = rt.MSAA_QUALITY.NONE
    }
    ,
    Renderer.prototype.addSystem = function(t, e) {
        var i = new t(this);
        if (this[e])
            throw new Error('Whoops! The name "' + e + '" is already in use');
        for (var r in this[e] = i,
        this.runners)
            this.runners[r].add(i);
        return this
    }
    ,
    Renderer.prototype.render = function(t, e) {
        var i, r, n, o;
        if (e && (o = e instanceof Ar ? (deprecation("6.0.0", "Renderer#render arguments changed, use options instead."),
        i = e,
        r = arguments[2],
        n = arguments[3],
        arguments[4]) : (i = e.renderTexture,
        r = e.clear,
        n = e.transform,
        e.skipUpdateTransform)),
        this.renderingToScreen = !i,
        this.runners.prerender.emit(),
        this.emit("prerender"),
        this.projection.transform = n,
        !this.context.isLost) {
            if (i || (this._lastObjectRendered = t),
            !o) {
                var s = t.enableTempParent();
                t.updateTransform(),
                t.disableTempParent(s)
            }
            this.renderTexture.bind(i),
            this.batch.currentRenderer.start(),
            (void 0 !== r ? r : this.clearBeforeRender) && this.renderTexture.clear(),
            t.render(this),
            this.batch.currentRenderer.flush(),
            i && i.baseTexture.update(),
            this.runners.postrender.emit(),
            this.projection.transform = null,
            this.emit("postrender")
        }
    }
    ,
    Renderer.prototype.generateTexture = function(t, e, i, r) {
        void 0 === e && (e = {});
        var n = $n.prototype.generateTexture.call(this, t, e, i, r);
        return this.framebuffer.blit(),
        n
    }
    ,
    Renderer.prototype.resize = function(t, e) {
        $n.prototype.resize.call(this, t, e),
        this.runners.resize.emit(this.screen.height, this.screen.width)
    }
    ,
    Renderer.prototype.reset = function() {
        return this.runners.reset.emit(),
        this
    }
    ,
    Renderer.prototype.clear = function() {
        this.renderTexture.bind(),
        this.renderTexture.clear()
    }
    ,
    Renderer.prototype.destroy = function(t) {
        for (var e in this.runners.destroy.emit(),
        this.runners)
            this.runners[e].destroy();
        $n.prototype.destroy.call(this, t),
        this.gl = null
    }
    ,
    Object.defineProperty(Renderer.prototype, "extract", {
        get: function() {
            return deprecation("6.0.0", "Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),
            this.plugins.extract
        },
        enumerable: !1,
        configurable: !0
    }),
    Renderer.registerPlugin = function(t, e) {
        (Renderer.__plugins = Renderer.__plugins || {})[t] = e
    }
    ,
    Renderer);
    function Renderer(t) {
        var e = $n.call(this, rt.RENDERER_TYPE.WEBGL, t) || this;
        return t = e.options,
        e.gl = null,
        e.CONTEXT_UID = 0,
        e.runners = {
            destroy: new ji("destroy"),
            contextChange: new ji("contextChange"),
            reset: new ji("reset"),
            update: new ji("update"),
            postrender: new ji("postrender"),
            prerender: new ji("prerender"),
            resize: new ji("resize")
        },
        e.runners.contextChange.add(e),
        e.globalUniforms = new jr({
            projectionMatrix: new Ce
        },!0),
        e.addSystem(Un, "mask").addSystem(Jr, "context").addSystem(Hn, "state").addSystem(jn, "shader").addSystem(zn, "texture").addSystem(Zn, "buffer").addSystem(en, "geometry").addSystem($r, "framebuffer").addSystem(Rn, "scissor").addSystem(Dn, "stencil").addSystem(Ln, "projection").addSystem(qn, "textureGC").addSystem(zr, "filter").addSystem(Mn, "renderTexture").addSystem(Xr, "batch"),
        e.initPlugins(Renderer.__plugins),
        e.multisample = void 0,
        t.context ? e.context.initFromContext(t.context) : e.context.initFromOptions({
            alpha: !!e.useContextAlpha,
            antialias: t.antialias,
            premultipliedAlpha: e.useContextAlpha && "notMultiplied" !== e.useContextAlpha,
            stencil: !0,
            preserveDrawingBuffer: t.preserveDrawingBuffer,
            powerPreference: e.options.powerPreference
        }),
        e.renderingToScreen = !0,
        sayHello(2 === e.context.webGLVersion ? "WebGL 2" : "WebGL 1"),
        e.resize(e.options.width, e.options.height),
        e
    }
    function autoDetectRenderer(t) {
        return to.create(t)
    }
    var eo = "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}"
      , io = "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"
      , ro = (System.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    System);
    function System(t) {
        deprecation("6.1.0", "System class is deprecated, implemement ISystem interface instead."),
        this.renderer = t
    }
    var no = function BatchDrawCall() {
        this.texArray = null,
        this.blend = 0,
        this.type = rt.DRAW_MODES.TRIANGLES,
        this.start = 0,
        this.size = 0,
        this.data = null
    }
      , oo = (BatchTextureArray.prototype.clear = function() {
        for (var t = 0; t < this.count; t++)
            this.elements[t] = null;
        this.count = 0
    }
    ,
    BatchTextureArray);
    function BatchTextureArray() {
        this.elements = [],
        this.ids = [],
        this.count = 0
    }
    var so = (Object.defineProperty(ViewableBuffer.prototype, "int8View", {
        get: function() {
            return this._int8View || (this._int8View = new Int8Array(this.rawBinaryData)),
            this._int8View
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(ViewableBuffer.prototype, "uint8View", {
        get: function() {
            return this._uint8View || (this._uint8View = new Uint8Array(this.rawBinaryData)),
            this._uint8View
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(ViewableBuffer.prototype, "int16View", {
        get: function() {
            return this._int16View || (this._int16View = new Int16Array(this.rawBinaryData)),
            this._int16View
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(ViewableBuffer.prototype, "uint16View", {
        get: function() {
            return this._uint16View || (this._uint16View = new Uint16Array(this.rawBinaryData)),
            this._uint16View
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(ViewableBuffer.prototype, "int32View", {
        get: function() {
            return this._int32View || (this._int32View = new Int32Array(this.rawBinaryData)),
            this._int32View
        },
        enumerable: !1,
        configurable: !0
    }),
    ViewableBuffer.prototype.view = function(t) {
        return this[t + "View"]
    }
    ,
    ViewableBuffer.prototype.destroy = function() {
        this.rawBinaryData = null,
        this._int8View = null,
        this._uint8View = null,
        this._int16View = null,
        this._uint16View = null,
        this._int32View = null,
        this.uint32View = null,
        this.float32View = null
    }
    ,
    ViewableBuffer.sizeOf = function(t) {
        switch (t) {
        case "int8":
        case "uint8":
            return 1;
        case "int16":
        case "uint16":
            return 2;
        case "int32":
        case "uint32":
        case "float32":
            return 4;
        default:
            throw new Error(t + " isn't a valid view type")
        }
    }
    ,
    ViewableBuffer);
    function ViewableBuffer(t) {
        "number" == typeof t ? this.rawBinaryData = new ArrayBuffer(t) : t instanceof Uint8Array ? this.rawBinaryData = t.buffer : this.rawBinaryData = t,
        this.uint32View = new Uint32Array(this.rawBinaryData),
        this.float32View = new Float32Array(this.rawBinaryData)
    }
    var ao, lo = (__extends$h(AbstractBatchRenderer, ao = Kr),
    AbstractBatchRenderer.prototype.contextChange = function() {
        var t = this.renderer.gl;
        pt.PREFER_ENV === rt.ENV.WEBGL_LEGACY ? this.MAX_TEXTURES = 1 : (this.MAX_TEXTURES = Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS), pt.SPRITE_MAX_TEXTURES),
        this.MAX_TEXTURES = checkMaxIfStatementsInShader(this.MAX_TEXTURES, t)),
        this._shader = this.shaderGenerator.generateShader(this.MAX_TEXTURES);
        for (var e = 0; e < this._packedGeometryPoolSize; e++)
            this._packedGeometries[e] = new this.geometryClass;
        this.initFlushBuffers()
    }
    ,
    AbstractBatchRenderer.prototype.initFlushBuffers = function() {
        for (var t = AbstractBatchRenderer._drawCallPool, e = AbstractBatchRenderer._textureArrayPool, i = this.size / 4, r = Math.floor(i / this.MAX_TEXTURES) + 1; t.length < i; )
            t.push(new no);
        for (; e.length < r; )
            e.push(new oo);
        for (var n = 0; n < this.MAX_TEXTURES; n++)
            this._tempBoundTextures[n] = null
    }
    ,
    AbstractBatchRenderer.prototype.onPrerender = function() {
        this._flushId = 0
    }
    ,
    AbstractBatchRenderer.prototype.render = function(t) {
        t._texture.valid && (this._vertexCount + t.vertexData.length / 2 > this.size && this.flush(),
        this._vertexCount += t.vertexData.length / 2,
        this._indexCount += t.indices.length,
        this._bufferedTextures[this._bufferSize] = t._texture.baseTexture,
        this._bufferedElements[this._bufferSize++] = t)
    }
    ,
    AbstractBatchRenderer.prototype.buildTexturesAndDrawCalls = function() {
        var t = this._bufferedTextures
          , e = this.MAX_TEXTURES
          , i = AbstractBatchRenderer._textureArrayPool
          , r = this.renderer.batch
          , n = this._tempBoundTextures
          , o = this.renderer.textureGC.count
          , s = ++Qi._globalBatch
          , a = 0
          , l = i[0]
          , c = 0;
        r.copyBoundTextures(n, e);
        for (var u = 0; u < this._bufferSize; ++u) {
            var p = t[u];
            t[u] = null,
            p._batchEnabled !== s && (l.count >= e && (r.boundArray(l, n, s, e),
            this.buildDrawCalls(l, c, u),
            c = u,
            l = i[++a],
            ++s),
            p._batchEnabled = s,
            p.touched = o,
            l.elements[l.count++] = p)
        }
        for (0 < l.count && (r.boundArray(l, n, s, e),
        this.buildDrawCalls(l, c, this._bufferSize),
        ++a,
        ++s),
        u = 0; u < n.length; u++)
            n[u] = null;
        Qi._globalBatch = s
    }
    ,
    AbstractBatchRenderer.prototype.buildDrawCalls = function(t, e, i) {
        var r = this._bufferedElements
          , n = this._attributeBuffer
          , o = this._indexBuffer
          , s = this.vertexSize
          , a = AbstractBatchRenderer._drawCallPool
          , l = this._dcIndex
          , c = this._aIndex
          , u = this._iIndex
          , p = a[l];
        p.start = this._iIndex,
        p.texArray = t;
        for (var h = e; h < i; ++h) {
            var d = r[h]
              , _ = d._texture.baseTexture
              , y = ie[_.alphaMode ? 1 : 0][d.blendMode];
            r[h] = null,
            e < h && p.blend !== y && (p.size = u - p.start,
            e = h,
            (p = a[++l]).texArray = t,
            p.start = u),
            this.packInterleavedGeometry(d, n, o, c, u),
            c += d.vertexData.length / 2 * s,
            u += d.indices.length,
            p.blend = y
        }
        e < i && (p.size = u - p.start,
        ++l),
        this._dcIndex = l,
        this._aIndex = c,
        this._iIndex = u
    }
    ,
    AbstractBatchRenderer.prototype.bindAndClearTexArray = function(t) {
        for (var e = this.renderer.texture, i = 0; i < t.count; i++)
            e.bind(t.elements[i], t.ids[i]),
            t.elements[i] = null;
        t.count = 0
    }
    ,
    AbstractBatchRenderer.prototype.updateGeometry = function() {
        var t = this._packedGeometries
          , e = this._attributeBuffer
          , i = this._indexBuffer;
        pt.CAN_UPLOAD_SAME_BUFFER ? (t[this._flushId]._buffer.update(e.rawBinaryData),
        t[this._flushId]._indexBuffer.update(i),
        this.renderer.geometry.updateBuffers()) : (this._packedGeometryPoolSize <= this._flushId && (this._packedGeometryPoolSize++,
        t[this._flushId] = new this.geometryClass),
        t[this._flushId]._buffer.update(e.rawBinaryData),
        t[this._flushId]._indexBuffer.update(i),
        this.renderer.geometry.bind(t[this._flushId]),
        this.renderer.geometry.updateBuffers(),
        this._flushId++)
    }
    ,
    AbstractBatchRenderer.prototype.drawBatches = function() {
        for (var t = this._dcIndex, e = this.renderer, i = e.gl, r = e.state, n = AbstractBatchRenderer._drawCallPool, o = null, s = 0; s < t; s++) {
            var a = n[s]
              , l = a.texArray
              , c = a.type
              , u = a.size
              , p = a.start
              , h = a.blend;
            o !== l && (o = l,
            this.bindAndClearTexArray(l)),
            this.state.blendMode = h,
            r.set(this.state),
            i.drawElements(c, u, i.UNSIGNED_SHORT, 2 * p)
        }
    }
    ,
    AbstractBatchRenderer.prototype.flush = function() {
        0 !== this._vertexCount && (this._attributeBuffer = this.getAttributeBuffer(this._vertexCount),
        this._indexBuffer = this.getIndexBuffer(this._indexCount),
        this._aIndex = 0,
        this._iIndex = 0,
        this._dcIndex = 0,
        this.buildTexturesAndDrawCalls(),
        this.updateGeometry(),
        this.drawBatches(),
        this._bufferSize = 0,
        this._vertexCount = 0,
        this._indexCount = 0)
    }
    ,
    AbstractBatchRenderer.prototype.start = function() {
        this.renderer.state.set(this.state),
        this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),
        this.renderer.shader.bind(this._shader),
        pt.CAN_UPLOAD_SAME_BUFFER && this.renderer.geometry.bind(this._packedGeometries[this._flushId])
    }
    ,
    AbstractBatchRenderer.prototype.stop = function() {
        this.flush()
    }
    ,
    AbstractBatchRenderer.prototype.destroy = function() {
        for (var t = 0; t < this._packedGeometryPoolSize; t++)
            this._packedGeometries[t] && this._packedGeometries[t].destroy();
        this.renderer.off("prerender", this.onPrerender, this),
        this._aBuffers = null,
        this._iBuffers = null,
        this._packedGeometries = null,
        this._attributeBuffer = null,
        this._indexBuffer = null,
        this._shader && (this._shader.destroy(),
        this._shader = null),
        ao.prototype.destroy.call(this)
    }
    ,
    AbstractBatchRenderer.prototype.getAttributeBuffer = function(t) {
        var e = nextPow2(Math.ceil(t / 8))
          , i = log2(e)
          , r = 8 * e;
        this._aBuffers.length <= i && (this._iBuffers.length = i + 1);
        var n = this._aBuffers[r];
        return n || (this._aBuffers[r] = n = new so(r * this.vertexSize * 4)),
        n
    }
    ,
    AbstractBatchRenderer.prototype.getIndexBuffer = function(t) {
        var e = nextPow2(Math.ceil(t / 12))
          , i = log2(e)
          , r = 12 * e;
        this._iBuffers.length <= i && (this._iBuffers.length = i + 1);
        var n = this._iBuffers[i];
        return n || (this._iBuffers[i] = n = new Uint16Array(r)),
        n
    }
    ,
    AbstractBatchRenderer.prototype.packInterleavedGeometry = function(t, e, i, r, n) {
        for (var o = e.uint32View, s = e.float32View, a = r / this.vertexSize, l = t.uvs, c = t.indices, u = t.vertexData, p = t._texture.baseTexture._batchLocation, h = Math.min(t.worldAlpha, 1), d = h < 1 && t._texture.baseTexture.alphaMode ? premultiplyTint(t._tintRGB, h) : t._tintRGB + (255 * h << 24), _ = 0; _ < u.length; _ += 2)
            s[r++] = u[_],
            s[r++] = u[_ + 1],
            s[r++] = l[_],
            s[r++] = l[_ + 1],
            o[r++] = d,
            s[r++] = p;
        for (_ = 0; _ < c.length; _++)
            i[n++] = a + c[_]
    }
    ,
    AbstractBatchRenderer._drawCallPool = [],
    AbstractBatchRenderer._textureArrayPool = [],
    AbstractBatchRenderer);
    function AbstractBatchRenderer(t) {
        var e = ao.call(this, t) || this;
        return e.shaderGenerator = null,
        e.geometryClass = null,
        e.vertexSize = null,
        e.state = gn.for2d(),
        e.size = 4 * pt.SPRITE_BATCH_SIZE,
        e._vertexCount = 0,
        e._indexCount = 0,
        e._bufferedElements = [],
        e._bufferedTextures = [],
        e._bufferSize = 0,
        e._shader = null,
        e._packedGeometries = [],
        e._packedGeometryPoolSize = 2,
        e._flushId = 0,
        e._aBuffers = {},
        e._iBuffers = {},
        e.MAX_TEXTURES = 1,
        e.renderer.on("prerender", e.onPrerender, e),
        t.runners.contextChange.add(e),
        e._dcIndex = 0,
        e._aIndex = 0,
        e._iIndex = 0,
        e._attributeBuffer = null,
        e._indexBuffer = null,
        e._tempBoundTextures = [],
        e
    }
    var co = (BatchShaderGenerator.prototype.generateShader = function(t) {
        if (!this.programCache[t]) {
            for (var e = new Int32Array(t), i = 0; i < t; i++)
                e[i] = i;
            this.defaultGroupCache[t] = jr.from({
                uSamplers: e
            }, !0);
            var r = this.fragTemplate;
            r = (r = r.replace(/%count%/gi, "" + t)).replace(/%forloop%/gi, this.generateSampleSrc(t)),
            this.programCache[t] = new mn(this.vertexSrc,r)
        }
        var n = {
            tint: new Float32Array([1, 1, 1, 1]),
            translationMatrix: new Ce,
            default: this.defaultGroupCache[t]
        };
        return new Tn(this.programCache[t],n)
    }
    ,
    BatchShaderGenerator.prototype.generateSampleSrc = function(t) {
        var e = "";
        e += "\n",
        e += "\n";
        for (var i = 0; i < t; i++)
            0 < i && (e += "\nelse "),
            i < t - 1 && (e += "if(vTextureId < " + i + ".5)"),
            e += "\n{",
            e += "\n\tcolor = texture2D(uSamplers[" + i + "], vTextureCoord);",
            e += "\n}";
        return e += "\n",
        e += "\n"
    }
    ,
    BatchShaderGenerator);
    function BatchShaderGenerator(t, e) {
        if (this.vertexSrc = t,
        this.fragTemplate = e,
        this.programCache = {},
        this.defaultGroupCache = {},
        e.indexOf("%count%") < 0)
            throw new Error('Fragment template must contain "%count%".');
        if (e.indexOf("%forloop%") < 0)
            throw new Error('Fragment template must contain "%forloop%".')
    }
    var uo, po = (__extends$h(BatchGeometry, uo = Mr),
    BatchGeometry);
    function BatchGeometry(t) {
        void 0 === t && (t = !1);
        var e = uo.call(this) || this;
        return e._buffer = new Pr(null,t,!1),
        e._indexBuffer = new Pr(null,t,!0),
        e.addAttribute("aVertexPosition", e._buffer, 2, !1, rt.TYPES.FLOAT).addAttribute("aTextureCoord", e._buffer, 2, !1, rt.TYPES.FLOAT).addAttribute("aColor", e._buffer, 4, !0, rt.TYPES.UNSIGNED_BYTE).addAttribute("aTextureId", e._buffer, 1, !0, rt.TYPES.FLOAT).addIndex(e._indexBuffer),
        e
    }
    var ho = "precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"
      , _o = "varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"
      , yo = (BatchPluginFactory.create = function(t) {
        var i, e = Object.assign({
            vertex: ho,
            fragment: _o,
            geometryClass: po,
            vertexSize: 6
        }, t), r = e.vertex, n = e.fragment, o = e.vertexSize, s = e.geometryClass;
        return __extends$h(BatchPlugin, i = lo),
        BatchPlugin;
        function BatchPlugin(t) {
            var e = i.call(this, t) || this;
            return e.shaderGenerator = new co(r,n),
            e.geometryClass = s,
            e.vertexSize = o,
            e
        }
    }
    ,
    Object.defineProperty(BatchPluginFactory, "defaultVertexSrc", {
        get: function() {
            return ho
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BatchPluginFactory, "defaultFragmentTemplate", {
        get: function() {
            return _o
        },
        enumerable: !1,
        configurable: !0
    }),
    BatchPluginFactory);
    function BatchPluginFactory() {}
    function kfc(t) {
        Object.defineProperty(mo, t, {
            get: function() {
                return deprecation("6.0.0", "PIXI.systems." + t + " has moved to PIXI." + t),
                mr[t]
            }
        })
    }
    var fo = yo.create()
      , mo = {};
    for (var To in mr)
        kfc(To);
    function nfc(t) {
        Object.defineProperty(go, t, {
            get: function() {
                return deprecation("6.0.0", "PIXI.resources." + t + " has moved to PIXI." + t),
                Xn[t]
            }
        })
    }
    var go = {};
    for (var To in Xn)
        nfc(To);
    var vo = (Application.registerPlugin = function(t) {
        Application._plugins.push(t)
    }
    ,
    Application.prototype.render = function() {
        this.renderer.render(this.stage)
    }
    ,
    Object.defineProperty(Application.prototype, "view", {
        get: function() {
            return this.renderer.view
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Application.prototype, "screen", {
        get: function() {
            return this.renderer.screen
        },
        enumerable: !1,
        configurable: !0
    }),
    Application.prototype.destroy = function(t, e) {
        var i = this
          , r = Application._plugins.slice(0);
        r.reverse(),
        r.forEach(function(t) {
            t.destroy.call(i)
        }),
        this.stage.destroy(e),
        this.stage = null,
        this.renderer.destroy(t),
        this.renderer = null
    }
    ,
    Application._plugins = [],
    Application);
    function Application(e) {
        var i = this;
        this.stage = new Ui,
        e = Object.assign({
            forceCanvas: !1
        }, e),
        this.renderer = autoDetectRenderer(e),
        Application._plugins.forEach(function(t) {
            t.init.call(i, e)
        })
    }
    var Eo = (ResizePlugin.init = function(t) {
        var r = this;
        Object.defineProperty(this, "resizeTo", {
            set: function(t) {
                globalThis.removeEventListener("resize", this.queueResize),
                (this._resizeTo = t) && (globalThis.addEventListener("resize", this.queueResize),
                this.resize())
            },
            get: function() {
                return this._resizeTo
            }
        }),
        this.queueResize = function() {
            r._resizeTo && (r.cancelResize(),
            r._resizeId = requestAnimationFrame(function() {
                return r.resize()
            }))
        }
        ,
        this.cancelResize = function() {
            r._resizeId && (cancelAnimationFrame(r._resizeId),
            r._resizeId = null)
        }
        ,
        this.resize = function() {
            if (r._resizeTo) {
                var t, e;
                if (r.cancelResize(),
                r._resizeTo === globalThis.window)
                    t = globalThis.innerWidth,
                    e = globalThis.innerHeight;
                else {
                    var i = r._resizeTo;
                    t = i.clientWidth,
                    e = i.clientHeight
                }
                r.renderer.resize(t, e)
            }
        }
        ,
        this._resizeId = null,
        this._resizeTo = null,
        this.resizeTo = t.resizeTo || null
    }
    ,
    ResizePlugin.destroy = function() {
        globalThis.removeEventListener("resize", this.queueResize),
        this.cancelResize(),
        this.cancelResize = null,
        this.queueResize = null,
        this.resizeTo = null,
        this.resize = null
    }
    ,
    ResizePlugin);
    function ResizePlugin() {}
    vo.registerPlugin(Eo);
    var So = new ge
      , bo = (Extract.prototype.image = function(t, e, i) {
        var r = new Image;
        return r.src = this.base64(t, e, i),
        r
    }
    ,
    Extract.prototype.base64 = function(t, e, i) {
        return this.canvas(t).toDataURL(e, i)
    }
    ,
    Extract.prototype.canvas = function(t) {
        var e, i, r, n = this.renderer, o = !1, s = !1;
        t && (t instanceof Ar ? r = t : (r = this.renderer.generateTexture(t),
        s = !0)),
        r ? (e = r.baseTexture.resolution,
        i = r.frame,
        o = !1,
        n.renderTexture.bind(r)) : (e = this.renderer.resolution,
        o = !0,
        (i = So).width = this.renderer.width,
        i.height = this.renderer.height,
        n.renderTexture.bind(null));
        var a = Math.floor(i.width * e + 1e-4)
          , l = Math.floor(i.height * e + 1e-4)
          , c = new ce(a,l,1)
          , u = new Uint8Array(4 * a * l)
          , p = n.gl;
        p.readPixels(i.x * e, i.y * e, a, l, p.RGBA, p.UNSIGNED_BYTE, u);
        var h = c.context.getImageData(0, 0, a, l);
        if (Extract.arrayPostDivide(u, h.data),
        c.context.putImageData(h, 0, 0),
        o) {
            var d = new ce(c.width,c.height,1);
            d.context.scale(1, -1),
            d.context.drawImage(c.canvas, 0, -l),
            c.destroy(),
            c = d
        }
        return s && r.destroy(!0),
        c.canvas
    }
    ,
    Extract.prototype.pixels = function(t) {
        var e, i, r, n = this.renderer, o = !1;
        t && (t instanceof Ar ? r = t : (r = this.renderer.generateTexture(t),
        o = !0)),
        r ? (e = r.baseTexture.resolution,
        i = r.frame,
        n.renderTexture.bind(r)) : (e = n.resolution,
        (i = So).width = n.width,
        i.height = n.height,
        n.renderTexture.bind(null));
        var s = i.width * e
          , a = i.height * e
          , l = new Uint8Array(4 * s * a)
          , c = n.gl;
        return c.readPixels(i.x * e, i.y * e, s, a, c.RGBA, c.UNSIGNED_BYTE, l),
        o && r.destroy(!0),
        Extract.arrayPostDivide(l, l),
        l
    }
    ,
    Extract.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    Extract.arrayPostDivide = function(t, e) {
        for (var i = 0; i < t.length; i += 4) {
            var r = e[i + 3] = t[i + 3];
            0 !== r ? (e[i] = Math.round(Math.min(255 * t[i] / r, 255)),
            e[i + 1] = Math.round(Math.min(255 * t[i + 1] / r, 255)),
            e[i + 2] = Math.round(Math.min(255 * t[i + 2] / r, 255))) : (e[i] = t[i],
            e[i + 1] = t[i + 1],
            e[i + 2] = t[i + 2])
        }
    }
    ,
    Extract);
    function Extract(t) {
        this.renderer = t
    }
    var Io = (SignalBinding.prototype.detach = function() {
        return null !== this._owner && (this._owner.detach(this),
        !0)
    }
    ,
    SignalBinding);
    function SignalBinding(t, e, i) {
        void 0 === e && (e = !1),
        this._fn = t,
        this._once = e,
        this._thisArg = i,
        this._next = this._prev = this._owner = null
    }
    function _addSignalBinding(t, e) {
        return t._head ? (t._tail._next = e)._prev = t._tail : t._head = e,
        (t._tail = e)._owner = t,
        e
    }
    var Co, Uo = (Signal.prototype.handlers = function(t) {
        void 0 === t && (t = !1);
        var e = this._head;
        if (t)
            return !!e;
        for (var i = []; e; )
            i.push(e),
            e = e._next;
        return i
    }
    ,
    Signal.prototype.has = function(t) {
        if (!(t instanceof Io))
            throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");
        return t._owner === this
    }
    ,
    Signal.prototype.dispatch = function() {
        for (var t = arguments, e = [], i = 0; i < arguments.length; i++)
            e[i] = t[i];
        var r = this._head;
        if (!r)
            return !1;
        for (; r; )
            r._once && this.detach(r),
            r._fn.apply(r._thisArg, e),
            r = r._next;
        return !0
    }
    ,
    Signal.prototype.add = function(t, e) {
        if (void 0 === e && (e = null),
        "function" != typeof t)
            throw new Error("MiniSignal#add(): First arg must be a Function.");
        return _addSignalBinding(this, new Io(t,!1,e))
    }
    ,
    Signal.prototype.once = function(t, e) {
        if (void 0 === e && (e = null),
        "function" != typeof t)
            throw new Error("MiniSignal#once(): First arg must be a Function.");
        return _addSignalBinding(this, new Io(t,!0,e))
    }
    ,
    Signal.prototype.detach = function(t) {
        if (!(t instanceof Io))
            throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");
        return t._owner !== this || (t._prev && (t._prev._next = t._next),
        t._next && (t._next._prev = t._prev),
        t === this._head ? (this._head = t._next,
        null === t._next && (this._tail = null)) : t === this._tail && (this._tail = t._prev,
        this._tail._next = null),
        t._owner = null),
        this
    }
    ,
    Signal.prototype.detachAll = function() {
        var t = this._head;
        if (!t)
            return this;
        for (this._head = this._tail = null; t; )
            t._owner = null,
            t = t._next;
        return this
    }
    ,
    Signal);
    function Signal() {
        this._head = this._tail = void 0
    }
    function parseUri(t, e) {
        e = e || {};
        for (var r = {
            key: ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"],
            q: {
                name: "queryKey",
                parser: /(?:^|&)([^&=]*)=?([^&]*)/g
            },
            parser: {
                strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
                loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/
            }
        }, i = r.parser[e.strictMode ? "strict" : "loose"].exec(t), n = {}, o = 14; o--; )
            n[r.key[o]] = i[o] || "";
        return n[r.q.name] = {},
        n[r.key[12]].replace(r.q.parser, function(t, e, i) {
            e && (n[r.q.name][e] = i)
        }),
        n
    }
    var Ao, wo, Oo, Ro, Po, Do = null;
    function _noop$1() {}
    function setExtMap(t, e, i) {
        e && 0 === e.indexOf(".") && (e = e.substring(1)),
        e && (t[e] = i)
    }
    function reqType(t) {
        return t.toString().replace("object ", "")
    }
    function LoaderResource(t, e, i) {
        if (this._dequeue = _noop$1,
        this._onLoadBinding = null,
        this._elementTimer = 0,
        this._boundComplete = null,
        this._boundOnError = null,
        this._boundOnProgress = null,
        this._boundOnTimeout = null,
        this._boundXhrOnError = null,
        this._boundXhrOnTimeout = null,
        this._boundXhrOnAbort = null,
        this._boundXhrOnLoad = null,
        "string" != typeof t || "string" != typeof e)
            throw new Error("Both name and url are required for constructing a resource.");
        i = i || {},
        this._flags = 0,
        this._setFlag(LoaderResource.STATUS_FLAGS.DATA_URL, 0 === e.indexOf("data:")),
        this.name = t,
        this.url = e,
        this.extension = this._getExtension(),
        this.data = null,
        this.crossOrigin = !0 === i.crossOrigin ? "anonymous" : i.crossOrigin,
        this.timeout = i.timeout || 0,
        this.loadType = i.loadType || this._determineLoadType(),
        this.xhrType = i.xhrType,
        this.metadata = i.metadata || {},
        this.error = null,
        this.xhr = null,
        this.children = [],
        this.type = LoaderResource.TYPE.UNKNOWN,
        this.progressChunk = 0,
        this._dequeue = _noop$1,
        this._onLoadBinding = null,
        this._elementTimer = 0,
        this._boundComplete = this.complete.bind(this),
        this._boundOnError = this._onError.bind(this),
        this._boundOnProgress = this._onProgress.bind(this),
        this._boundOnTimeout = this._onTimeout.bind(this),
        this._boundXhrOnError = this._xhrOnError.bind(this),
        this._boundXhrOnTimeout = this._xhrOnTimeout.bind(this),
        this._boundXhrOnAbort = this._xhrOnAbort.bind(this),
        this._boundXhrOnLoad = this._xhrOnLoad.bind(this),
        this.onStart = new Uo,
        this.onProgress = new Uo,
        this.onComplete = new Uo,
        this.onAfterMiddleware = new Uo
    }
    function _noop() {}
    function onlyOnce(n) {
        return function onceWrapper() {
            for (var t = arguments, e = [], i = 0; i < arguments.length; i++)
                e[i] = t[i];
            if (null === n)
                throw new Error("Callback was already called.");
            var r = n;
            n = null,
            r.apply(this, e)
        }
    }
    rt.LoaderResource = (LoaderResource.setExtensionLoadType = function(t, e) {
        setExtMap(LoaderResource._loadTypeMap, t, e)
    }
    ,
    LoaderResource.setExtensionXhrType = function(t, e) {
        setExtMap(LoaderResource._xhrTypeMap, t, e)
    }
    ,
    Object.defineProperty(LoaderResource.prototype, "isDataUrl", {
        get: function() {
            return this._hasFlag(LoaderResource.STATUS_FLAGS.DATA_URL)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(LoaderResource.prototype, "isComplete", {
        get: function() {
            return this._hasFlag(LoaderResource.STATUS_FLAGS.COMPLETE)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(LoaderResource.prototype, "isLoading", {
        get: function() {
            return this._hasFlag(LoaderResource.STATUS_FLAGS.LOADING)
        },
        enumerable: !1,
        configurable: !0
    }),
    LoaderResource.prototype.complete = function() {
        this._clearEvents(),
        this._finish()
    }
    ,
    LoaderResource.prototype.abort = function(t) {
        if (!this.error) {
            if (this.error = new Error(t),
            this._clearEvents(),
            this.xhr)
                this.xhr.abort();
            else if (this.xdr)
                this.xdr.abort();
            else if (this.data)
                if (this.data.src)
                    this.data.src = LoaderResource.EMPTY_GIF;
                else
                    for (; this.data.firstChild; )
                        this.data.removeChild(this.data.firstChild);
            this._finish()
        }
    }
    ,
    LoaderResource.prototype.load = function(t) {
        var e = this;
        if (!this.isLoading)
            if (this.isComplete)
                t && setTimeout(function() {
                    return t(e)
                }, 1);
            else
                switch (t && this.onComplete.once(t),
                this._setFlag(LoaderResource.STATUS_FLAGS.LOADING, !0),
                this.onStart.dispatch(this),
                !1 !== this.crossOrigin && "string" == typeof this.crossOrigin || (this.crossOrigin = this._determineCrossOrigin(this.url)),
                this.loadType) {
                case LoaderResource.LOAD_TYPE.IMAGE:
                    this.type = LoaderResource.TYPE.IMAGE,
                    this._loadElement("image");
                    break;
                case LoaderResource.LOAD_TYPE.AUDIO:
                    this.type = LoaderResource.TYPE.AUDIO,
                    this._loadSourceElement("audio");
                    break;
                case LoaderResource.LOAD_TYPE.VIDEO:
                    this.type = LoaderResource.TYPE.VIDEO,
                    this._loadSourceElement("video");
                    break;
                case LoaderResource.LOAD_TYPE.XHR:
                default:
                    void 0 === Co && (Co = !(!globalThis.XDomainRequest || "withCredentials"in new XMLHttpRequest)),
                    Co && this.crossOrigin ? this._loadXdr() : this._loadXhr()
                }
    }
    ,
    LoaderResource.prototype._hasFlag = function(t) {
        return 0 != (this._flags & t)
    }
    ,
    LoaderResource.prototype._setFlag = function(t, e) {
        this._flags = e ? this._flags | t : this._flags & ~t
    }
    ,
    LoaderResource.prototype._clearEvents = function() {
        clearTimeout(this._elementTimer),
        this.data && this.data.removeEventListener && (this.data.removeEventListener("error", this._boundOnError, !1),
        this.data.removeEventListener("load", this._boundComplete, !1),
        this.data.removeEventListener("progress", this._boundOnProgress, !1),
        this.data.removeEventListener("canplaythrough", this._boundComplete, !1)),
        this.xhr && (this.xhr.removeEventListener ? (this.xhr.removeEventListener("error", this._boundXhrOnError, !1),
        this.xhr.removeEventListener("timeout", this._boundXhrOnTimeout, !1),
        this.xhr.removeEventListener("abort", this._boundXhrOnAbort, !1),
        this.xhr.removeEventListener("progress", this._boundOnProgress, !1),
        this.xhr.removeEventListener("load", this._boundXhrOnLoad, !1)) : (this.xhr.onerror = null,
        this.xhr.ontimeout = null,
        this.xhr.onprogress = null,
        this.xhr.onload = null))
    }
    ,
    LoaderResource.prototype._finish = function() {
        if (this.isComplete)
            throw new Error("Complete called again for an already completed resource.");
        this._setFlag(LoaderResource.STATUS_FLAGS.COMPLETE, !0),
        this._setFlag(LoaderResource.STATUS_FLAGS.LOADING, !1),
        this.onComplete.dispatch(this)
    }
    ,
    LoaderResource.prototype._loadElement = function(t) {
        this.metadata.loadElement ? this.data = this.metadata.loadElement : "image" === t && void 0 !== globalThis.Image ? this.data = new Image : this.data = document.createElement(t),
        this.crossOrigin && (this.data.crossOrigin = this.crossOrigin),
        this.metadata.skipSource || (this.data.src = this.url),
        this.data.addEventListener("error", this._boundOnError, !1),
        this.data.addEventListener("load", this._boundComplete, !1),
        this.data.addEventListener("progress", this._boundOnProgress, !1),
        this.timeout && (this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout))
    }
    ,
    LoaderResource.prototype._loadSourceElement = function(t) {
        if (this.metadata.loadElement ? this.data = this.metadata.loadElement : "audio" === t && void 0 !== globalThis.Audio ? this.data = new Audio : this.data = document.createElement(t),
        null !== this.data) {
            if (this.crossOrigin && (this.data.crossOrigin = this.crossOrigin),
            !this.metadata.skipSource)
                if (navigator.isCocoonJS)
                    this.data.src = Array.isArray(this.url) ? this.url[0] : this.url;
                else if (Array.isArray(this.url))
                    for (var e = this.metadata.mimeType, i = 0; i < this.url.length; ++i)
                        this.data.appendChild(this._createSource(t, this.url[i], Array.isArray(e) ? e[i] : e));
                else
                    e = this.metadata.mimeType,
                    this.data.appendChild(this._createSource(t, this.url, Array.isArray(e) ? e[0] : e));
            this.data.addEventListener("error", this._boundOnError, !1),
            this.data.addEventListener("load", this._boundComplete, !1),
            this.data.addEventListener("progress", this._boundOnProgress, !1),
            this.data.addEventListener("canplaythrough", this._boundComplete, !1),
            this.data.load(),
            this.timeout && (this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout))
        } else
            this.abort("Unsupported element: " + t)
    }
    ,
    LoaderResource.prototype._loadXhr = function() {
        "string" != typeof this.xhrType && (this.xhrType = this._determineXhrType());
        var t = this.xhr = new XMLHttpRequest;
        "use-credentials" === this.crossOrigin && (t.withCredentials = !0),
        t.open("GET", this.url, !0),
        t.timeout = this.timeout,
        this.xhrType === LoaderResource.XHR_RESPONSE_TYPE.JSON || this.xhrType === LoaderResource.XHR_RESPONSE_TYPE.DOCUMENT ? t.responseType = LoaderResource.XHR_RESPONSE_TYPE.TEXT : t.responseType = this.xhrType,
        t.addEventListener("error", this._boundXhrOnError, !1),
        t.addEventListener("timeout", this._boundXhrOnTimeout, !1),
        t.addEventListener("abort", this._boundXhrOnAbort, !1),
        t.addEventListener("progress", this._boundOnProgress, !1),
        t.addEventListener("load", this._boundXhrOnLoad, !1),
        t.send()
    }
    ,
    LoaderResource.prototype._loadXdr = function() {
        "string" != typeof this.xhrType && (this.xhrType = this._determineXhrType());
        var t = this.xhr = new globalThis.XDomainRequest;
        t.timeout = this.timeout || 5e3,
        t.onerror = this._boundXhrOnError,
        t.ontimeout = this._boundXhrOnTimeout,
        t.onprogress = this._boundOnProgress,
        t.onload = this._boundXhrOnLoad,
        t.open("GET", this.url, !0),
        setTimeout(function() {
            return t.send()
        }, 1)
    }
    ,
    LoaderResource.prototype._createSource = function(t, e, i) {
        i = i || t + "/" + this._getExtension(e);
        var r = document.createElement("source");
        return r.src = e,
        r.type = i,
        r
    }
    ,
    LoaderResource.prototype._onError = function(t) {
        this.abort("Failed to load element using: " + t.target.nodeName)
    }
    ,
    LoaderResource.prototype._onProgress = function(t) {
        t && t.lengthComputable && this.onProgress.dispatch(this, t.loaded / t.total)
    }
    ,
    LoaderResource.prototype._onTimeout = function() {
        this.abort("Load timed out.")
    }
    ,
    LoaderResource.prototype._xhrOnError = function() {
        var t = this.xhr;
        this.abort(reqType(t) + " Request failed. Status: " + t.status + ', text: "' + t.statusText + '"')
    }
    ,
    LoaderResource.prototype._xhrOnTimeout = function() {
        var t = this.xhr;
        this.abort(reqType(t) + " Request timed out.")
    }
    ,
    LoaderResource.prototype._xhrOnAbort = function() {
        var t = this.xhr;
        this.abort(reqType(t) + " Request was aborted by the user.")
    }
    ,
    LoaderResource.prototype._xhrOnLoad = function() {
        var t = this.xhr
          , e = ""
          , i = void 0 === t.status ? 200 : t.status;
        if ("" !== t.responseType && "text" !== t.responseType && void 0 !== t.responseType || (e = t.responseText),
        0 === i && (0 < e.length || t.responseType === LoaderResource.XHR_RESPONSE_TYPE.BUFFER) ? i = 200 : 1223 === i && (i = 204),
        2 == (i / 100 | 0)) {
            if (this.xhrType === LoaderResource.XHR_RESPONSE_TYPE.TEXT)
                this.data = e,
                this.type = LoaderResource.TYPE.TEXT;
            else if (this.xhrType === LoaderResource.XHR_RESPONSE_TYPE.JSON)
                try {
                    this.data = JSON.parse(e),
                    this.type = LoaderResource.TYPE.JSON
                } catch (t) {
                    return void this.abort("Error trying to parse loaded json: " + t)
                }
            else if (this.xhrType === LoaderResource.XHR_RESPONSE_TYPE.DOCUMENT)
                try {
                    if (globalThis.DOMParser) {
                        var r = new DOMParser;
                        this.data = r.parseFromString(e, "text/xml")
                    } else {
                        var n = document.createElement("div");
                        n.innerHTML = e,
                        this.data = n
                    }
                    this.type = LoaderResource.TYPE.XML
                } catch (t) {
                    return void this.abort("Error trying to parse loaded xml: " + t)
                }
            else
                this.data = t.response || e;
            this.complete()
        } else
            this.abort("[" + t.status + "] " + t.statusText + ": " + t.responseURL)
    }
    ,
    LoaderResource.prototype._determineCrossOrigin = function(t, e) {
        if (0 === t.indexOf("data:"))
            return "";
        if (globalThis.origin !== globalThis.location.origin)
            return "anonymous";
        e = e || globalThis.location,
        (Do = Do || document.createElement("a")).href = t;
        var i = parseUri(Do.href, {
            strictMode: !0
        })
          , r = !i.port && "" === e.port || i.port === e.port
          , n = i.protocol ? i.protocol + ":" : "";
        return i.host === e.hostname && r && n === e.protocol ? "" : "anonymous"
    }
    ,
    LoaderResource.prototype._determineXhrType = function() {
        return LoaderResource._xhrTypeMap[this.extension] || LoaderResource.XHR_RESPONSE_TYPE.TEXT
    }
    ,
    LoaderResource.prototype._determineLoadType = function() {
        return LoaderResource._loadTypeMap[this.extension] || LoaderResource.LOAD_TYPE.XHR
    }
    ,
    LoaderResource.prototype._getExtension = function(t) {
        void 0 === t && (t = this.url);
        var e = "";
        if (this.isDataUrl) {
            var i = t.indexOf("/");
            e = t.substring(i + 1, t.indexOf(";", i))
        } else {
            var r = t.indexOf("?")
              , n = t.indexOf("#")
              , o = Math.min(-1 < r ? r : t.length, -1 < n ? n : t.length);
            e = (t = t.substring(0, o)).substring(t.lastIndexOf(".") + 1)
        }
        return e.toLowerCase()
    }
    ,
    LoaderResource.prototype._getMimeFromXhrType = function(t) {
        switch (t) {
        case LoaderResource.XHR_RESPONSE_TYPE.BUFFER:
            return "application/octet-binary";
        case LoaderResource.XHR_RESPONSE_TYPE.BLOB:
            return "application/blob";
        case LoaderResource.XHR_RESPONSE_TYPE.DOCUMENT:
            return "application/xml";
        case LoaderResource.XHR_RESPONSE_TYPE.JSON:
            return "application/json";
        case LoaderResource.XHR_RESPONSE_TYPE.DEFAULT:
        case LoaderResource.XHR_RESPONSE_TYPE.TEXT:
        default:
            return "text/plain"
        }
    }
    ,
    LoaderResource),
    Ao = rt.LoaderResource || (rt.LoaderResource = {}),
    (wo = Ao.STATUS_FLAGS || (Ao.STATUS_FLAGS = {}))[wo.NONE = 0] = "NONE",
    wo[wo.DATA_URL = 1] = "DATA_URL",
    wo[wo.COMPLETE = 2] = "COMPLETE",
    wo[wo.LOADING = 4] = "LOADING",
    (Oo = Ao.TYPE || (Ao.TYPE = {}))[Oo.UNKNOWN = 0] = "UNKNOWN",
    Oo[Oo.JSON = 1] = "JSON",
    Oo[Oo.XML = 2] = "XML",
    Oo[Oo.IMAGE = 3] = "IMAGE",
    Oo[Oo.AUDIO = 4] = "AUDIO",
    Oo[Oo.VIDEO = 5] = "VIDEO",
    Oo[Oo.TEXT = 6] = "TEXT",
    (Ro = Ao.LOAD_TYPE || (Ao.LOAD_TYPE = {}))[Ro.XHR = 1] = "XHR",
    Ro[Ro.IMAGE = 2] = "IMAGE",
    Ro[Ro.AUDIO = 3] = "AUDIO",
    Ro[Ro.VIDEO = 4] = "VIDEO",
    (Po = Ao.XHR_RESPONSE_TYPE || (Ao.XHR_RESPONSE_TYPE = {})).DEFAULT = "text",
    Po.BUFFER = "arraybuffer",
    Po.BLOB = "blob",
    Po.DOCUMENT = "document",
    Po.JSON = "json",
    Po.TEXT = "text",
    Ao._loadTypeMap = {
        gif: Ao.LOAD_TYPE.IMAGE,
        png: Ao.LOAD_TYPE.IMAGE,
        bmp: Ao.LOAD_TYPE.IMAGE,
        jpg: Ao.LOAD_TYPE.IMAGE,
        jpeg: Ao.LOAD_TYPE.IMAGE,
        tif: Ao.LOAD_TYPE.IMAGE,
        tiff: Ao.LOAD_TYPE.IMAGE,
        webp: Ao.LOAD_TYPE.IMAGE,
        tga: Ao.LOAD_TYPE.IMAGE,
        svg: Ao.LOAD_TYPE.IMAGE,
        "svg+xml": Ao.LOAD_TYPE.IMAGE,
        mp3: Ao.LOAD_TYPE.AUDIO,
        ogg: Ao.LOAD_TYPE.AUDIO,
        wav: Ao.LOAD_TYPE.AUDIO,
        mp4: Ao.LOAD_TYPE.VIDEO,
        webm: Ao.LOAD_TYPE.VIDEO
    },
    Ao._xhrTypeMap = {
        xhtml: Ao.XHR_RESPONSE_TYPE.DOCUMENT,
        html: Ao.XHR_RESPONSE_TYPE.DOCUMENT,
        htm: Ao.XHR_RESPONSE_TYPE.DOCUMENT,
        xml: Ao.XHR_RESPONSE_TYPE.DOCUMENT,
        tmx: Ao.XHR_RESPONSE_TYPE.DOCUMENT,
        svg: Ao.XHR_RESPONSE_TYPE.DOCUMENT,
        tsx: Ao.XHR_RESPONSE_TYPE.DOCUMENT,
        gif: Ao.XHR_RESPONSE_TYPE.BLOB,
        png: Ao.XHR_RESPONSE_TYPE.BLOB,
        bmp: Ao.XHR_RESPONSE_TYPE.BLOB,
        jpg: Ao.XHR_RESPONSE_TYPE.BLOB,
        jpeg: Ao.XHR_RESPONSE_TYPE.BLOB,
        tif: Ao.XHR_RESPONSE_TYPE.BLOB,
        tiff: Ao.XHR_RESPONSE_TYPE.BLOB,
        webp: Ao.XHR_RESPONSE_TYPE.BLOB,
        tga: Ao.XHR_RESPONSE_TYPE.BLOB,
        json: Ao.XHR_RESPONSE_TYPE.JSON,
        text: Ao.XHR_RESPONSE_TYPE.TEXT,
        txt: Ao.XHR_RESPONSE_TYPE.TEXT,
        ttf: Ao.XHR_RESPONSE_TYPE.BUFFER,
        otf: Ao.XHR_RESPONSE_TYPE.BUFFER
    },
    Ao.EMPTY_GIF = "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";
    var Lo = function AsyncQueueItem(t, e) {
        this.data = t,
        this.callback = e
    }
      , No = (AsyncQueue.prototype._next = function(r) {
        var n = this;
        return function() {
            for (var t = arguments, e = [], i = 0; i < arguments.length; i++)
                e[i] = t[i];
            n.workers -= 1,
            r.callback.apply(r, e),
            null != e[0] && n.error(e[0], r.data),
            n.workers <= n.concurrency - n.buffer && n.unsaturated(),
            n.idle() && n.drain(),
            n.process()
        }
    }
    ,
    AsyncQueue.prototype.push = function(t, e) {
        this._insert(t, !1, e)
    }
    ,
    AsyncQueue.prototype.kill = function() {
        this.workers = 0,
        this.drain = _noop,
        this.started = !1,
        this._tasks = []
    }
    ,
    AsyncQueue.prototype.unshift = function(t, e) {
        this._insert(t, !0, e)
    }
    ,
    AsyncQueue.prototype.length = function() {
        return this._tasks.length
    }
    ,
    AsyncQueue.prototype.running = function() {
        return this.workers
    }
    ,
    AsyncQueue.prototype.idle = function() {
        return this._tasks.length + this.workers === 0
    }
    ,
    AsyncQueue.prototype.pause = function() {
        !0 !== this.paused && (this.paused = !0)
    }
    ,
    AsyncQueue.prototype.resume = function() {
        if (!1 !== this.paused) {
            this.paused = !1;
            for (var t = 1; t <= this.concurrency; t++)
                this.process()
        }
    }
    ,
    AsyncQueue.eachSeries = function(e, i, r, n) {
        var o = 0
          , s = e.length;
        !function next(t) {
            t || o === s ? r && r(t) : n ? setTimeout(function() {
                i(e[o++], next)
            }, 1) : i(e[o++], next)
        }()
    }
    ,
    AsyncQueue.queue = function(t, e) {
        return new AsyncQueue(t,e)
    }
    ,
    AsyncQueue);
    function AsyncQueue(t, e) {
        var n = this;
        if (void 0 === e && (e = 1),
        this.workers = 0,
        this.saturated = _noop,
        this.unsaturated = _noop,
        this.empty = _noop,
        this.drain = _noop,
        this.error = _noop,
        this.started = !1,
        this.paused = !1,
        this._tasks = [],
        this._insert = function(t, e, i) {
            if (i && "function" != typeof i)
                throw new Error("task callback must be a function");
            if (n.started = !0,
            null == t && n.idle())
                setTimeout(function() {
                    return n.drain()
                }, 1);
            else {
                var r = new Lo(t,"function" == typeof i ? i : _noop);
                e ? n._tasks.unshift(r) : n._tasks.push(r),
                setTimeout(n.process, 1)
            }
        }
        ,
        this.process = function() {
            for (; !n.paused && n.workers < n.concurrency && n._tasks.length; ) {
                var t = n._tasks.shift();
                0 === n._tasks.length && n.empty(),
                n.workers += 1,
                n.workers === n.concurrency && n.saturated(),
                n._worker(t.data, onlyOnce(n._next(t)))
            }
        }
        ,
        this._worker = t,
        0 === e)
            throw new Error("Concurrency must not be zero");
        this.concurrency = e,
        this.buffer = e / 4
    }
    var xo = /(#[\w-]+)?$/
      , Mo = (Loader.prototype._add = function(t, e, i, r) {
        if (this.loading && (!i || !i.parentResource))
            throw new Error("Cannot add resources while the loader is running.");
        if (this.resources[t])
            throw new Error('Resource named "' + t + '" already exists.');
        if (e = this._prepareUrl(e),
        this.resources[t] = new rt.LoaderResource(t,e,i),
        "function" == typeof r && this.resources[t].onAfterMiddleware.once(r),
        this.loading) {
            for (var n = i.parentResource, o = [], s = 0; s < n.children.length; ++s)
                n.children[s].isComplete || o.push(n.children[s]);
            var a = n.progressChunk * (o.length + 1) / (o.length + 2);
            for (n.children.push(this.resources[t]),
            n.progressChunk = a,
            s = 0; s < o.length; ++s)
                o[s].progressChunk = a;
            this.resources[t].progressChunk = a
        }
        return this._queue.push(this.resources[t]),
        this
    }
    ,
    Loader.prototype.pre = function(t) {
        return this._beforeMiddleware.push(t),
        this
    }
    ,
    Loader.prototype.use = function(t) {
        return this._afterMiddleware.push(t),
        this
    }
    ,
    Loader.prototype.reset = function() {
        for (var t in this.progress = 0,
        this.loading = !1,
        this._queue.kill(),
        this._queue.pause(),
        this.resources) {
            var e = this.resources[t];
            e._onLoadBinding && e._onLoadBinding.detach(),
            e.isLoading && e.abort("loader reset")
        }
        return this.resources = {},
        this
    }
    ,
    Loader.prototype.load = function(t) {
        if ("function" == typeof t && this.onComplete.once(t),
        this.loading)
            return this;
        if (this._queue.idle())
            this._onStart(),
            this._onComplete();
        else {
            for (var e = 100 / this._queue._tasks.length, i = 0; i < this._queue._tasks.length; ++i)
                this._queue._tasks[i].data.progressChunk = e;
            this._onStart(),
            this._queue.resume()
        }
        return this
    }
    ,
    Object.defineProperty(Loader.prototype, "concurrency", {
        get: function() {
            return this._queue.concurrency
        },
        set: function(t) {
            this._queue.concurrency = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Loader.prototype._prepareUrl = function(t) {
        var e, i = parseUri(t, {
            strictMode: !0
        });
        if (e = i.protocol || !i.path || 0 === t.indexOf("//") ? t : this.baseUrl.length && this.baseUrl.lastIndexOf("/") !== this.baseUrl.length - 1 && "/" !== t.charAt(0) ? this.baseUrl + "/" + t : this.baseUrl + t,
        this.defaultQueryString) {
            var r = xo.exec(e)[0];
            -1 !== (e = e.slice(0, e.length - r.length)).indexOf("?") ? e += "&" + this.defaultQueryString : e += "?" + this.defaultQueryString,
            e += r
        }
        return e
    }
    ,
    Loader.prototype._loadResource = function(i, t) {
        var r = this;
        i._dequeue = t,
        No.eachSeries(this._beforeMiddleware, function(t, e) {
            t.call(r, i, function() {
                e(i.isComplete ? {} : null)
            })
        }, function() {
            i.isComplete ? r._onLoad(i) : (i._onLoadBinding = i.onComplete.once(r._onLoad, r),
            i.load())
        }, !0)
    }
    ,
    Loader.prototype._onStart = function() {
        this.progress = 0,
        this.loading = !0,
        this.onStart.dispatch(this)
    }
    ,
    Loader.prototype._onComplete = function() {
        this.progress = 100,
        this.loading = !1,
        this.onComplete.dispatch(this, this.resources)
    }
    ,
    Loader.prototype._onLoad = function(i) {
        var r = this;
        i._onLoadBinding = null,
        this._resourcesParsing.push(i),
        i._dequeue(),
        No.eachSeries(this._afterMiddleware, function(t, e) {
            t.call(r, i, e)
        }, function() {
            i.onAfterMiddleware.dispatch(i),
            r.progress = Math.min(100, r.progress + i.progressChunk),
            r.onProgress.dispatch(r, i),
            i.error ? r.onError.dispatch(i.error, r, i) : r.onLoad.dispatch(r, i),
            r._resourcesParsing.splice(r._resourcesParsing.indexOf(i), 1),
            r._queue.idle() && 0 === r._resourcesParsing.length && r._onComplete()
        }, !0)
    }
    ,
    Loader.prototype.destroy = function() {
        this._protected || this.reset()
    }
    ,
    Object.defineProperty(Loader, "shared", {
        get: function() {
            var t = Loader._shared;
            return t || ((t = new Loader)._protected = !0,
            Loader._shared = t),
            t
        },
        enumerable: !1,
        configurable: !0
    }),
    Loader.registerPlugin = function(t) {
        return Loader._plugins.push(t),
        t.add && t.add(),
        Loader
    }
    ,
    Loader._plugins = [],
    Loader);
    function Loader(t, e) {
        var i = this;
        void 0 === t && (t = ""),
        void 0 === e && (e = 10),
        this.progress = 0,
        this.loading = !1,
        this.defaultQueryString = "",
        this._beforeMiddleware = [],
        this._afterMiddleware = [],
        this._resourcesParsing = [],
        this._boundLoadResource = function(t, e) {
            return i._loadResource(t, e)
        }
        ,
        this.resources = {},
        this.baseUrl = t,
        this._beforeMiddleware = [],
        this._afterMiddleware = [],
        this._resourcesParsing = [],
        this._boundLoadResource = function(t, e) {
            return i._loadResource(t, e)
        }
        ,
        this._queue = No.queue(this._boundLoadResource, e),
        this._queue.pause(),
        this.resources = {},
        this.onProgress = new Uo,
        this.onError = new Uo,
        this.onLoad = new Uo,
        this.onStart = new Uo,
        this.onComplete = new Uo;
        for (var r = 0; r < Loader._plugins.length; ++r) {
            var n = Loader._plugins[r]
              , o = n.pre
              , s = n.use;
            o && this.pre(o),
            s && this.use(s)
        }
        this._protected = !1
    }
    Mo.prototype.add = function add(t, e, i, r) {
        if (Array.isArray(t)) {
            for (var n = 0; n < t.length; ++n)
                this.add(t[n]);
            return this
        }
        if ("object" == typeof t && (i = t,
        r = e || i.callback || i.onComplete,
        e = i.url,
        t = i.name || i.key || i.url),
        "string" != typeof e && (r = i,
        i = e,
        e = t),
        "string" != typeof e)
            throw new Error("No url passed to add resource to loader.");
        return "function" == typeof i && (r = i,
        i = null),
        this._add(t, e, i, r)
    }
    ;
    var Vo = (AppLoaderPlugin.init = function(t) {
        t = Object.assign({
            sharedLoader: !1
        }, t),
        this.loader = t.sharedLoader ? Mo.shared : new Mo
    }
    ,
    AppLoaderPlugin.destroy = function() {
        this.loader && (this.loader.destroy(),
        this.loader = null)
    }
    ,
    AppLoaderPlugin);
    function AppLoaderPlugin() {}
    var Bo = (TextureLoader.add = function() {
        rt.LoaderResource.setExtensionLoadType("svg", rt.LoaderResource.LOAD_TYPE.XHR),
        rt.LoaderResource.setExtensionXhrType("svg", rt.LoaderResource.XHR_RESPONSE_TYPE.TEXT)
    }
    ,
    TextureLoader.use = function(e, i) {
        if (!e.data || e.type !== rt.LoaderResource.TYPE.IMAGE && "svg" !== e.extension)
            i();
        else {
            var t = e.data
              , r = e.url
              , n = e.name
              , o = e.metadata;
            Cr.fromLoader(t, r, n, o).then(function(t) {
                e.texture = t,
                i()
            }).catch(i)
        }
    }
    ,
    TextureLoader);
    function TextureLoader() {}
    var Fo, Go, ko = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
    Mo.registerPlugin({
        use: function parsing(t, e) {
            if (t.data) {
                if (t.xhr && t.xhrType === rt.LoaderResource.XHR_RESPONSE_TYPE.BLOB)
                    if (self.Blob && "string" != typeof t.data) {
                        if (0 === t.data.type.indexOf("image")) {
                            var i = globalThis.URL || globalThis.webkitURL
                              , r = i.createObjectURL(t.data);
                            return t.blob = t.data,
                            t.data = new Image,
                            t.data.src = r,
                            t.type = rt.LoaderResource.TYPE.IMAGE,
                            void (t.data.onload = function() {
                                i.revokeObjectURL(r),
                                t.data.onload = null,
                                e()
                            }
                            )
                        }
                    } else {
                        var n = t.xhr.getResponseHeader("content-type");
                        if (n && 0 === n.indexOf("image"))
                            return t.data = new Image,
                            t.data.src = "data:" + n + ";base64," + function encodeBinary(t) {
                                for (var e = "", i = 0; i < t.length; ) {
                                    for (var r = [0, 0, 0], n = [0, 0, 0, 0], o = 0; o < r.length; ++o)
                                        i < t.length ? r[o] = 255 & t.charCodeAt(i++) : r[o] = 0;
                                    switch (n[0] = r[0] >> 2,
                                    n[1] = (3 & r[0]) << 4 | r[1] >> 4,
                                    n[2] = (15 & r[1]) << 2 | r[2] >> 6,
                                    n[3] = 63 & r[2],
                                    i - (t.length - 1)) {
                                    case 2:
                                        n[3] = 64,
                                        n[2] = 64;
                                        break;
                                    case 1:
                                        n[3] = 64
                                    }
                                    for (o = 0; o < n.length; ++o)
                                        e += ko.charAt(n[o])
                                }
                                return e
                            }(t.xhr.responseText),
                            t.type = rt.LoaderResource.TYPE.IMAGE,
                            void (t.data.onload = function() {
                                t.data.onload = null,
                                e()
                            }
                            )
                    }
                e()
            } else
                e()
        }
    }),
    Mo.registerPlugin(Bo),
    rt.INTERNAL_FORMATS = void 0,
    (Go = rt.INTERNAL_FORMATS || (rt.INTERNAL_FORMATS = {}))[Go.COMPRESSED_RGB_S3TC_DXT1_EXT = 33776] = "COMPRESSED_RGB_S3TC_DXT1_EXT",
    Go[Go.COMPRESSED_RGBA_S3TC_DXT1_EXT = 33777] = "COMPRESSED_RGBA_S3TC_DXT1_EXT",
    Go[Go.COMPRESSED_RGBA_S3TC_DXT3_EXT = 33778] = "COMPRESSED_RGBA_S3TC_DXT3_EXT",
    Go[Go.COMPRESSED_RGBA_S3TC_DXT5_EXT = 33779] = "COMPRESSED_RGBA_S3TC_DXT5_EXT",
    Go[Go.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT = 35917] = "COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",
    Go[Go.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT = 35918] = "COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",
    Go[Go.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT = 35919] = "COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",
    Go[Go.COMPRESSED_SRGB_S3TC_DXT1_EXT = 35916] = "COMPRESSED_SRGB_S3TC_DXT1_EXT",
    Go[Go.COMPRESSED_R11_EAC = 37488] = "COMPRESSED_R11_EAC",
    Go[Go.COMPRESSED_SIGNED_R11_EAC = 37489] = "COMPRESSED_SIGNED_R11_EAC",
    Go[Go.COMPRESSED_RG11_EAC = 37490] = "COMPRESSED_RG11_EAC",
    Go[Go.COMPRESSED_SIGNED_RG11_EAC = 37491] = "COMPRESSED_SIGNED_RG11_EAC",
    Go[Go.COMPRESSED_RGB8_ETC2 = 37492] = "COMPRESSED_RGB8_ETC2",
    Go[Go.COMPRESSED_RGBA8_ETC2_EAC = 37496] = "COMPRESSED_RGBA8_ETC2_EAC",
    Go[Go.COMPRESSED_SRGB8_ETC2 = 37493] = "COMPRESSED_SRGB8_ETC2",
    Go[Go.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = 37497] = "COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",
    Go[Go.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 37494] = "COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",
    Go[Go.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 37495] = "COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",
    Go[Go.COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 35840] = "COMPRESSED_RGB_PVRTC_4BPPV1_IMG",
    Go[Go.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 35842] = "COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",
    Go[Go.COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 35841] = "COMPRESSED_RGB_PVRTC_2BPPV1_IMG",
    Go[Go.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 35843] = "COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",
    Go[Go.COMPRESSED_RGB_ETC1_WEBGL = 36196] = "COMPRESSED_RGB_ETC1_WEBGL",
    Go[Go.COMPRESSED_RGB_ATC_WEBGL = 35986] = "COMPRESSED_RGB_ATC_WEBGL",
    Go[Go.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL = 35986] = "COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",
    Go[Go.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL = 34798] = "COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL";
    var jo = ((Fo = {})[rt.INTERNAL_FORMATS.COMPRESSED_RGB_S3TC_DXT1_EXT] = .5,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT] = .5,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT] = 1,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT] = 1,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_SRGB_S3TC_DXT1_EXT] = .5,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT] = .5,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT] = 1,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT] = 1,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_R11_EAC] = .5,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_SIGNED_R11_EAC] = .5,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_RG11_EAC] = 1,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_SIGNED_RG11_EAC] = 1,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_RGB8_ETC2] = .5,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_RGBA8_ETC2_EAC] = 1,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_SRGB8_ETC2] = .5,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC] = 1,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2] = .5,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2] = .5,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_4BPPV1_IMG] = .5,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG] = .5,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_2BPPV1_IMG] = .25,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG] = .25,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_RGB_ETC1_WEBGL] = .5,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_RGB_ATC_WEBGL] = .5,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL] = 1,
    Fo[rt.INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL] = 1,
    Fo)
      , Ho = function(t, e) {
        return (Ho = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    function __extends$g(t, e) {
        function __() {
            this.constructor = t
        }
        Ho(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
    function __generator(i, r) {
        var n, o, s, t, a = {
            label: 0,
            sent: function() {
                if (1 & s[0])
                    throw s[1];
                return s[1]
            },
            trys: [],
            ops: []
        };
        return t = {
            next: verb(0),
            throw: verb(1),
            return: verb(2)
        },
        "function" == typeof Symbol && (t[Symbol.iterator] = function() {
            return this
        }
        ),
        t;
        function verb(e) {
            return function(t) {
                return function step(e) {
                    if (n)
                        throw new TypeError("Generator is already executing.");
                    for (; a; )
                        try {
                            if (n = 1,
                            o && (s = 2 & e[0] ? o.return : e[0] ? o.throw || ((s = o.return) && s.call(o),
                            0) : o.next) && !(s = s.call(o, e[1])).done)
                                return s;
                            switch (o = 0,
                            s && (e = [2 & e[0], s.value]),
                            e[0]) {
                            case 0:
                            case 1:
                                s = e;
                                break;
                            case 4:
                                return a.label++,
                                {
                                    value: e[1],
                                    done: !1
                                };
                            case 5:
                                a.label++,
                                o = e[1],
                                e = [0];
                                continue;
                            case 7:
                                e = a.ops.pop(),
                                a.trys.pop();
                                continue;
                            default:
                                if (!(s = 0 < (s = a.trys).length && s[s.length - 1]) && (6 === e[0] || 2 === e[0])) {
                                    a = 0;
                                    continue
                                }
                                if (3 === e[0] && (!s || e[1] > s[0] && e[1] < s[3])) {
                                    a.label = e[1];
                                    break
                                }
                                if (6 === e[0] && a.label < s[1]) {
                                    a.label = s[1],
                                    s = e;
                                    break
                                }
                                if (s && a.label < s[2]) {
                                    a.label = s[2],
                                    a.ops.push(e);
                                    break
                                }
                                s[2] && a.ops.pop(),
                                a.trys.pop();
                                continue
                            }
                            e = r.call(i, a)
                        } catch (t) {
                            e = [6, t],
                            o = 0
                        } finally {
                            n = s = 0
                        }
                    if (5 & e[0])
                        throw e[1];
                    return {
                        value: e[0] ? e[1] : void 0,
                        done: !0
                    }
                }([e, t])
            }
        }
    }
    var qo, Yo = (__extends$g(BlobResource, qo = Xi),
    BlobResource.prototype.onBlobLoaded = function(t) {}
    ,
    BlobResource.prototype.load = function() {
        return function __awaiter(i, r, n, o) {
            return new (n = n || Promise)(function(t, e) {
                function fulfilled(t) {
                    try {
                        step(o.next(t))
                    } catch (t) {
                        e(t)
                    }
                }
                function rejected(t) {
                    try {
                        step(o.throw(t))
                    } catch (t) {
                        e(t)
                    }
                }
                function step(e) {
                    e.done ? t(e.value) : new n(function(t) {
                        t(e.value)
                    }
                    ).then(fulfilled, rejected)
                }
                step((o = o.apply(i, r || [])).next())
            }
            )
        }(this, void 0, Promise, function() {
            var e;
            return __generator(this, function(t) {
                switch (t.label) {
                case 0:
                    return [4, fetch(this.origin)];
                case 1:
                    return [4, t.sent().blob()];
                case 2:
                    return [4, t.sent().arrayBuffer()];
                case 3:
                    return e = t.sent(),
                    this.data = new Uint32Array(e),
                    this.buffer = new so(e),
                    this.loaded = !0,
                    this.onBlobLoaded(e),
                    this.update(),
                    [2, this]
                }
            })
        })
    }
    ,
    BlobResource);
    function BlobResource(t, e) {
        void 0 === e && (e = {
            width: 1,
            height: 1,
            autoLoad: !0
        });
        var i, r, n = this;
        return r = "string" == typeof t ? (i = t,
        new Uint8Array) : (i = null,
        t),
        (n = qo.call(this, r, e) || this).origin = i,
        n.buffer = r ? new so(r) : null,
        n.origin && !1 !== e.autoLoad && n.load(),
        r && r.length && (n.loaded = !0,
        n.onBlobLoaded(n.buffer.rawBinaryData)),
        n
    }
    var zo, Ko = (__extends$g(CompressedTextureResource, zo = Yo),
    CompressedTextureResource.prototype.upload = function(t, e, i) {
        var r = t.gl;
        if (!t.context.extensions[this._extension])
            throw new Error(this._extension + " textures are not supported on the current machine");
        if (!this._levelBuffers)
            return !1;
        for (var n = 0, o = this.levels; n < o; n++) {
            var s = this._levelBuffers[n]
              , a = s.levelID
              , l = s.levelWidth
              , c = s.levelHeight
              , u = s.levelBuffer;
            r.compressedTexImage2D(r.TEXTURE_2D, a, this.format, l, c, 0, u)
        }
        return !0
    }
    ,
    CompressedTextureResource.prototype.onBlobLoaded = function() {
        this._levelBuffers = CompressedTextureResource._createLevelBuffers(this.buffer.uint8View, this.format, this.levels, 4, 4, this.width, this.height)
    }
    ,
    CompressedTextureResource._formatToExtension = function(t) {
        if (33776 <= t && t <= 33779)
            return "s3tc";
        if (37488 <= t && t <= 37497)
            return "etc";
        if (35840 <= t && t <= 35843)
            return "pvrtc";
        if (36196 <= t)
            return "etc1";
        if (35986 <= t && t <= 34798)
            return "atc";
        throw new Error("Invalid (compressed) texture format given!")
    }
    ,
    CompressedTextureResource._createLevelBuffers = function(t, e, i, r, n, o, s) {
        for (var a = new Array(i), l = t.byteOffset, c = o, u = s, p = c + r - 1 & ~(r - 1), h = u + n - 1 & ~(n - 1), d = p * h * jo[e], _ = 0; _ < i; _++)
            a[_] = {
                levelID: _,
                levelWidth: 1 < i ? c : p,
                levelHeight: 1 < i ? u : h,
                levelBuffer: new Uint8Array(t.buffer,l,d)
            },
            l += d,
            d = (p = (c = c >> 1 || 1) + r - 1 & ~(r - 1)) * (h = (u = u >> 1 || 1) + n - 1 & ~(n - 1)) * jo[e];
        return a
    }
    ,
    CompressedTextureResource);
    function CompressedTextureResource(t, e) {
        var i = zo.call(this, t, e) || this;
        return i.format = e.format,
        i.levels = e.levels || 1,
        i._width = e.width,
        i._height = e.height,
        i._extension = CompressedTextureResource._formatToExtension(i.format),
        (e.levelBuffers || i.buffer) && (i._levelBuffers = e.levelBuffers || CompressedTextureResource._createLevelBuffers(t instanceof Uint8Array ? t : i.buffer.uint8View, i.format, i.levels, 4, 4, i.width, i.height)),
        i
    }
    var Xo, Wo, Jo = (CompressedTextureLoader.use = function(o, s) {
        var t = o.data;
        if (o.type === rt.LoaderResource.TYPE.JSON && t && t.cacheID && t.textures) {
            for (var e = t.textures, i = void 0, r = void 0, n = 0, a = e.length; n < a; n++) {
                var l = e[n]
                  , c = l.src
                  , u = l.format;
                if (u || (r = c),
                CompressedTextureLoader.textureFormats[u]) {
                    i = c;
                    break
                }
            }
            if (!(i = i || r))
                return void s(new Error("Cannot load compressed-textures in " + o.url + ", make sure you provide a fallback"));
            if (i === o.url)
                return void s(new Error("URL of compressed texture cannot be the same as the manifest's URL"));
            var p = {
                crossOrigin: o.crossOrigin,
                metadata: o.metadata.imageMetadata,
                parentResource: o
            }
              , h = Qt.resolve(o.url.replace(this.baseUrl, ""), i)
              , d = t.cacheID;
            this.add(d, h, p, function(t) {
                if (t.error)
                    s(t.error);
                else {
                    var e = t.texture
                      , i = void 0 === e ? null : e
                      , r = t.textures
                      , n = void 0 === r ? {} : r;
                    Object.assign(o, {
                        texture: i,
                        textures: n
                    }),
                    s()
                }
            })
        } else
            s()
    }
    ,
    Object.defineProperty(CompressedTextureLoader, "textureExtensions", {
        get: function() {
            if (!CompressedTextureLoader._textureExtensions) {
                var t = document.createElement("canvas").getContext("webgl");
                if (!t)
                    return console.warn("WebGL not available for compressed textures. Silently failing."),
                    {};
                var e = {
                    s3tc: t.getExtension("WEBGL_compressed_texture_s3tc"),
                    s3tc_sRGB: t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),
                    etc: t.getExtension("WEBGL_compressed_texture_etc"),
                    etc1: t.getExtension("WEBGL_compressed_texture_etc1"),
                    pvrtc: t.getExtension("WEBGL_compressed_texture_pvrtc") || t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),
                    atc: t.getExtension("WEBGL_compressed_texture_atc"),
                    astc: t.getExtension("WEBGL_compressed_texture_astc")
                };
                CompressedTextureLoader._textureExtensions = e
            }
            return CompressedTextureLoader._textureExtensions
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(CompressedTextureLoader, "textureFormats", {
        get: function() {
            if (!CompressedTextureLoader._textureFormats) {
                var t = CompressedTextureLoader.textureExtensions;
                for (var e in CompressedTextureLoader._textureFormats = {},
                t) {
                    var i = t[e];
                    i && Object.assign(CompressedTextureLoader._textureFormats, Object.getPrototypeOf(i))
                }
            }
            return CompressedTextureLoader._textureFormats
        },
        enumerable: !1,
        configurable: !0
    }),
    CompressedTextureLoader);
    function CompressedTextureLoader() {}
    function registerCompressedTextures(n, t, e) {
        var o = {
            textures: {},
            texture: null
        };
        return t && t.map(function(t) {
            return new Cr(new Qi(t,Object.assign({
                mipmap: rt.MIPMAP_MODES.OFF,
                alphaMode: rt.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA
            }, e)))
        }).forEach(function(t, e) {
            var i = t.baseTexture
              , r = n + "-" + (e + 1);
            Qi.addToCache(i, r),
            Cr.addToCache(t, r),
            0 === e && (Qi.addToCache(i, n),
            Cr.addToCache(t, n),
            o.texture = t),
            o.textures[r] = t
        }),
        o
    }
    rt.LoaderResource.setExtensionXhrType("dds", rt.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);
    var Qo, Zo, $o, ts, es = 3, is = 4, rs = 7, ns = 19, os = 2, ss = 0, as = 1, ls = 2, cs = 3;
    (Zo = Qo = Qo || {})[Zo.DXGI_FORMAT_UNKNOWN = 0] = "DXGI_FORMAT_UNKNOWN",
    Zo[Zo.DXGI_FORMAT_R32G32B32A32_TYPELESS = 1] = "DXGI_FORMAT_R32G32B32A32_TYPELESS",
    Zo[Zo.DXGI_FORMAT_R32G32B32A32_FLOAT = 2] = "DXGI_FORMAT_R32G32B32A32_FLOAT",
    Zo[Zo.DXGI_FORMAT_R32G32B32A32_UINT = 3] = "DXGI_FORMAT_R32G32B32A32_UINT",
    Zo[Zo.DXGI_FORMAT_R32G32B32A32_SINT = 4] = "DXGI_FORMAT_R32G32B32A32_SINT",
    Zo[Zo.DXGI_FORMAT_R32G32B32_TYPELESS = 5] = "DXGI_FORMAT_R32G32B32_TYPELESS",
    Zo[Zo.DXGI_FORMAT_R32G32B32_FLOAT = 6] = "DXGI_FORMAT_R32G32B32_FLOAT",
    Zo[Zo.DXGI_FORMAT_R32G32B32_UINT = 7] = "DXGI_FORMAT_R32G32B32_UINT",
    Zo[Zo.DXGI_FORMAT_R32G32B32_SINT = 8] = "DXGI_FORMAT_R32G32B32_SINT",
    Zo[Zo.DXGI_FORMAT_R16G16B16A16_TYPELESS = 9] = "DXGI_FORMAT_R16G16B16A16_TYPELESS",
    Zo[Zo.DXGI_FORMAT_R16G16B16A16_FLOAT = 10] = "DXGI_FORMAT_R16G16B16A16_FLOAT",
    Zo[Zo.DXGI_FORMAT_R16G16B16A16_UNORM = 11] = "DXGI_FORMAT_R16G16B16A16_UNORM",
    Zo[Zo.DXGI_FORMAT_R16G16B16A16_UINT = 12] = "DXGI_FORMAT_R16G16B16A16_UINT",
    Zo[Zo.DXGI_FORMAT_R16G16B16A16_SNORM = 13] = "DXGI_FORMAT_R16G16B16A16_SNORM",
    Zo[Zo.DXGI_FORMAT_R16G16B16A16_SINT = 14] = "DXGI_FORMAT_R16G16B16A16_SINT",
    Zo[Zo.DXGI_FORMAT_R32G32_TYPELESS = 15] = "DXGI_FORMAT_R32G32_TYPELESS",
    Zo[Zo.DXGI_FORMAT_R32G32_FLOAT = 16] = "DXGI_FORMAT_R32G32_FLOAT",
    Zo[Zo.DXGI_FORMAT_R32G32_UINT = 17] = "DXGI_FORMAT_R32G32_UINT",
    Zo[Zo.DXGI_FORMAT_R32G32_SINT = 18] = "DXGI_FORMAT_R32G32_SINT",
    Zo[Zo.DXGI_FORMAT_R32G8X24_TYPELESS = 19] = "DXGI_FORMAT_R32G8X24_TYPELESS",
    Zo[Zo.DXGI_FORMAT_D32_FLOAT_S8X24_UINT = 20] = "DXGI_FORMAT_D32_FLOAT_S8X24_UINT",
    Zo[Zo.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS = 21] = "DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",
    Zo[Zo.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT = 22] = "DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",
    Zo[Zo.DXGI_FORMAT_R10G10B10A2_TYPELESS = 23] = "DXGI_FORMAT_R10G10B10A2_TYPELESS",
    Zo[Zo.DXGI_FORMAT_R10G10B10A2_UNORM = 24] = "DXGI_FORMAT_R10G10B10A2_UNORM",
    Zo[Zo.DXGI_FORMAT_R10G10B10A2_UINT = 25] = "DXGI_FORMAT_R10G10B10A2_UINT",
    Zo[Zo.DXGI_FORMAT_R11G11B10_FLOAT = 26] = "DXGI_FORMAT_R11G11B10_FLOAT",
    Zo[Zo.DXGI_FORMAT_R8G8B8A8_TYPELESS = 27] = "DXGI_FORMAT_R8G8B8A8_TYPELESS",
    Zo[Zo.DXGI_FORMAT_R8G8B8A8_UNORM = 28] = "DXGI_FORMAT_R8G8B8A8_UNORM",
    Zo[Zo.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB = 29] = "DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",
    Zo[Zo.DXGI_FORMAT_R8G8B8A8_UINT = 30] = "DXGI_FORMAT_R8G8B8A8_UINT",
    Zo[Zo.DXGI_FORMAT_R8G8B8A8_SNORM = 31] = "DXGI_FORMAT_R8G8B8A8_SNORM",
    Zo[Zo.DXGI_FORMAT_R8G8B8A8_SINT = 32] = "DXGI_FORMAT_R8G8B8A8_SINT",
    Zo[Zo.DXGI_FORMAT_R16G16_TYPELESS = 33] = "DXGI_FORMAT_R16G16_TYPELESS",
    Zo[Zo.DXGI_FORMAT_R16G16_FLOAT = 34] = "DXGI_FORMAT_R16G16_FLOAT",
    Zo[Zo.DXGI_FORMAT_R16G16_UNORM = 35] = "DXGI_FORMAT_R16G16_UNORM",
    Zo[Zo.DXGI_FORMAT_R16G16_UINT = 36] = "DXGI_FORMAT_R16G16_UINT",
    Zo[Zo.DXGI_FORMAT_R16G16_SNORM = 37] = "DXGI_FORMAT_R16G16_SNORM",
    Zo[Zo.DXGI_FORMAT_R16G16_SINT = 38] = "DXGI_FORMAT_R16G16_SINT",
    Zo[Zo.DXGI_FORMAT_R32_TYPELESS = 39] = "DXGI_FORMAT_R32_TYPELESS",
    Zo[Zo.DXGI_FORMAT_D32_FLOAT = 40] = "DXGI_FORMAT_D32_FLOAT",
    Zo[Zo.DXGI_FORMAT_R32_FLOAT = 41] = "DXGI_FORMAT_R32_FLOAT",
    Zo[Zo.DXGI_FORMAT_R32_UINT = 42] = "DXGI_FORMAT_R32_UINT",
    Zo[Zo.DXGI_FORMAT_R32_SINT = 43] = "DXGI_FORMAT_R32_SINT",
    Zo[Zo.DXGI_FORMAT_R24G8_TYPELESS = 44] = "DXGI_FORMAT_R24G8_TYPELESS",
    Zo[Zo.DXGI_FORMAT_D24_UNORM_S8_UINT = 45] = "DXGI_FORMAT_D24_UNORM_S8_UINT",
    Zo[Zo.DXGI_FORMAT_R24_UNORM_X8_TYPELESS = 46] = "DXGI_FORMAT_R24_UNORM_X8_TYPELESS",
    Zo[Zo.DXGI_FORMAT_X24_TYPELESS_G8_UINT = 47] = "DXGI_FORMAT_X24_TYPELESS_G8_UINT",
    Zo[Zo.DXGI_FORMAT_R8G8_TYPELESS = 48] = "DXGI_FORMAT_R8G8_TYPELESS",
    Zo[Zo.DXGI_FORMAT_R8G8_UNORM = 49] = "DXGI_FORMAT_R8G8_UNORM",
    Zo[Zo.DXGI_FORMAT_R8G8_UINT = 50] = "DXGI_FORMAT_R8G8_UINT",
    Zo[Zo.DXGI_FORMAT_R8G8_SNORM = 51] = "DXGI_FORMAT_R8G8_SNORM",
    Zo[Zo.DXGI_FORMAT_R8G8_SINT = 52] = "DXGI_FORMAT_R8G8_SINT",
    Zo[Zo.DXGI_FORMAT_R16_TYPELESS = 53] = "DXGI_FORMAT_R16_TYPELESS",
    Zo[Zo.DXGI_FORMAT_R16_FLOAT = 54] = "DXGI_FORMAT_R16_FLOAT",
    Zo[Zo.DXGI_FORMAT_D16_UNORM = 55] = "DXGI_FORMAT_D16_UNORM",
    Zo[Zo.DXGI_FORMAT_R16_UNORM = 56] = "DXGI_FORMAT_R16_UNORM",
    Zo[Zo.DXGI_FORMAT_R16_UINT = 57] = "DXGI_FORMAT_R16_UINT",
    Zo[Zo.DXGI_FORMAT_R16_SNORM = 58] = "DXGI_FORMAT_R16_SNORM",
    Zo[Zo.DXGI_FORMAT_R16_SINT = 59] = "DXGI_FORMAT_R16_SINT",
    Zo[Zo.DXGI_FORMAT_R8_TYPELESS = 60] = "DXGI_FORMAT_R8_TYPELESS",
    Zo[Zo.DXGI_FORMAT_R8_UNORM = 61] = "DXGI_FORMAT_R8_UNORM",
    Zo[Zo.DXGI_FORMAT_R8_UINT = 62] = "DXGI_FORMAT_R8_UINT",
    Zo[Zo.DXGI_FORMAT_R8_SNORM = 63] = "DXGI_FORMAT_R8_SNORM",
    Zo[Zo.DXGI_FORMAT_R8_SINT = 64] = "DXGI_FORMAT_R8_SINT",
    Zo[Zo.DXGI_FORMAT_A8_UNORM = 65] = "DXGI_FORMAT_A8_UNORM",
    Zo[Zo.DXGI_FORMAT_R1_UNORM = 66] = "DXGI_FORMAT_R1_UNORM",
    Zo[Zo.DXGI_FORMAT_R9G9B9E5_SHAREDEXP = 67] = "DXGI_FORMAT_R9G9B9E5_SHAREDEXP",
    Zo[Zo.DXGI_FORMAT_R8G8_B8G8_UNORM = 68] = "DXGI_FORMAT_R8G8_B8G8_UNORM",
    Zo[Zo.DXGI_FORMAT_G8R8_G8B8_UNORM = 69] = "DXGI_FORMAT_G8R8_G8B8_UNORM",
    Zo[Zo.DXGI_FORMAT_BC1_TYPELESS = 70] = "DXGI_FORMAT_BC1_TYPELESS",
    Zo[Zo.DXGI_FORMAT_BC1_UNORM = 71] = "DXGI_FORMAT_BC1_UNORM",
    Zo[Zo.DXGI_FORMAT_BC1_UNORM_SRGB = 72] = "DXGI_FORMAT_BC1_UNORM_SRGB",
    Zo[Zo.DXGI_FORMAT_BC2_TYPELESS = 73] = "DXGI_FORMAT_BC2_TYPELESS",
    Zo[Zo.DXGI_FORMAT_BC2_UNORM = 74] = "DXGI_FORMAT_BC2_UNORM",
    Zo[Zo.DXGI_FORMAT_BC2_UNORM_SRGB = 75] = "DXGI_FORMAT_BC2_UNORM_SRGB",
    Zo[Zo.DXGI_FORMAT_BC3_TYPELESS = 76] = "DXGI_FORMAT_BC3_TYPELESS",
    Zo[Zo.DXGI_FORMAT_BC3_UNORM = 77] = "DXGI_FORMAT_BC3_UNORM",
    Zo[Zo.DXGI_FORMAT_BC3_UNORM_SRGB = 78] = "DXGI_FORMAT_BC3_UNORM_SRGB",
    Zo[Zo.DXGI_FORMAT_BC4_TYPELESS = 79] = "DXGI_FORMAT_BC4_TYPELESS",
    Zo[Zo.DXGI_FORMAT_BC4_UNORM = 80] = "DXGI_FORMAT_BC4_UNORM",
    Zo[Zo.DXGI_FORMAT_BC4_SNORM = 81] = "DXGI_FORMAT_BC4_SNORM",
    Zo[Zo.DXGI_FORMAT_BC5_TYPELESS = 82] = "DXGI_FORMAT_BC5_TYPELESS",
    Zo[Zo.DXGI_FORMAT_BC5_UNORM = 83] = "DXGI_FORMAT_BC5_UNORM",
    Zo[Zo.DXGI_FORMAT_BC5_SNORM = 84] = "DXGI_FORMAT_BC5_SNORM",
    Zo[Zo.DXGI_FORMAT_B5G6R5_UNORM = 85] = "DXGI_FORMAT_B5G6R5_UNORM",
    Zo[Zo.DXGI_FORMAT_B5G5R5A1_UNORM = 86] = "DXGI_FORMAT_B5G5R5A1_UNORM",
    Zo[Zo.DXGI_FORMAT_B8G8R8A8_UNORM = 87] = "DXGI_FORMAT_B8G8R8A8_UNORM",
    Zo[Zo.DXGI_FORMAT_B8G8R8X8_UNORM = 88] = "DXGI_FORMAT_B8G8R8X8_UNORM",
    Zo[Zo.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM = 89] = "DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",
    Zo[Zo.DXGI_FORMAT_B8G8R8A8_TYPELESS = 90] = "DXGI_FORMAT_B8G8R8A8_TYPELESS",
    Zo[Zo.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB = 91] = "DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",
    Zo[Zo.DXGI_FORMAT_B8G8R8X8_TYPELESS = 92] = "DXGI_FORMAT_B8G8R8X8_TYPELESS",
    Zo[Zo.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB = 93] = "DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",
    Zo[Zo.DXGI_FORMAT_BC6H_TYPELESS = 94] = "DXGI_FORMAT_BC6H_TYPELESS",
    Zo[Zo.DXGI_FORMAT_BC6H_UF16 = 95] = "DXGI_FORMAT_BC6H_UF16",
    Zo[Zo.DXGI_FORMAT_BC6H_SF16 = 96] = "DXGI_FORMAT_BC6H_SF16",
    Zo[Zo.DXGI_FORMAT_BC7_TYPELESS = 97] = "DXGI_FORMAT_BC7_TYPELESS",
    Zo[Zo.DXGI_FORMAT_BC7_UNORM = 98] = "DXGI_FORMAT_BC7_UNORM",
    Zo[Zo.DXGI_FORMAT_BC7_UNORM_SRGB = 99] = "DXGI_FORMAT_BC7_UNORM_SRGB",
    Zo[Zo.DXGI_FORMAT_AYUV = 100] = "DXGI_FORMAT_AYUV",
    Zo[Zo.DXGI_FORMAT_Y410 = 101] = "DXGI_FORMAT_Y410",
    Zo[Zo.DXGI_FORMAT_Y416 = 102] = "DXGI_FORMAT_Y416",
    Zo[Zo.DXGI_FORMAT_NV12 = 103] = "DXGI_FORMAT_NV12",
    Zo[Zo.DXGI_FORMAT_P010 = 104] = "DXGI_FORMAT_P010",
    Zo[Zo.DXGI_FORMAT_P016 = 105] = "DXGI_FORMAT_P016",
    Zo[Zo.DXGI_FORMAT_420_OPAQUE = 106] = "DXGI_FORMAT_420_OPAQUE",
    Zo[Zo.DXGI_FORMAT_YUY2 = 107] = "DXGI_FORMAT_YUY2",
    Zo[Zo.DXGI_FORMAT_Y210 = 108] = "DXGI_FORMAT_Y210",
    Zo[Zo.DXGI_FORMAT_Y216 = 109] = "DXGI_FORMAT_Y216",
    Zo[Zo.DXGI_FORMAT_NV11 = 110] = "DXGI_FORMAT_NV11",
    Zo[Zo.DXGI_FORMAT_AI44 = 111] = "DXGI_FORMAT_AI44",
    Zo[Zo.DXGI_FORMAT_IA44 = 112] = "DXGI_FORMAT_IA44",
    Zo[Zo.DXGI_FORMAT_P8 = 113] = "DXGI_FORMAT_P8",
    Zo[Zo.DXGI_FORMAT_A8P8 = 114] = "DXGI_FORMAT_A8P8",
    Zo[Zo.DXGI_FORMAT_B4G4R4A4_UNORM = 115] = "DXGI_FORMAT_B4G4R4A4_UNORM",
    Zo[Zo.DXGI_FORMAT_P208 = 116] = "DXGI_FORMAT_P208",
    Zo[Zo.DXGI_FORMAT_V208 = 117] = "DXGI_FORMAT_V208",
    Zo[Zo.DXGI_FORMAT_V408 = 118] = "DXGI_FORMAT_V408",
    Zo[Zo.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE = 119] = "DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",
    Zo[Zo.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE = 120] = "DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",
    Zo[Zo.DXGI_FORMAT_FORCE_UINT = 121] = "DXGI_FORMAT_FORCE_UINT",
    (ts = $o = $o || {})[ts.DDS_DIMENSION_TEXTURE1D = 2] = "DDS_DIMENSION_TEXTURE1D",
    ts[ts.DDS_DIMENSION_TEXTURE2D = 3] = "DDS_DIMENSION_TEXTURE2D",
    ts[ts.DDS_DIMENSION_TEXTURE3D = 6] = "DDS_DIMENSION_TEXTURE3D";
    var us, ps, hs, ds = ((Xo = {})[827611204] = rt.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,
    Xo[861165636] = rt.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,
    Xo[894720068] = rt.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,
    Xo), _s = ((Wo = {})[Qo.DXGI_FORMAT_BC1_TYPELESS] = rt.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,
    Wo[Qo.DXGI_FORMAT_BC1_UNORM] = rt.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,
    Wo[Qo.DXGI_FORMAT_BC2_TYPELESS] = rt.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,
    Wo[Qo.DXGI_FORMAT_BC2_UNORM] = rt.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,
    Wo[Qo.DXGI_FORMAT_BC3_TYPELESS] = rt.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,
    Wo[Qo.DXGI_FORMAT_BC3_UNORM] = rt.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,
    Wo[Qo.DXGI_FORMAT_BC1_UNORM_SRGB] = rt.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,
    Wo[Qo.DXGI_FORMAT_BC2_UNORM_SRGB] = rt.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,
    Wo[Qo.DXGI_FORMAT_BC3_UNORM_SRGB] = rt.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,
    Wo), ys = (DDSLoader.use = function(t, e) {
        if ("dds" === t.extension && t.data)
            try {
                Object.assign(t, registerCompressedTextures(t.name || t.url, DDSLoader.parse(t.data), t.metadata))
            } catch (t) {
                return void e(t)
            }
        e()
    }
    ,
    DDSLoader.parse = function(t) {
        var e = new Uint32Array(t);
        if (542327876 !== e[0])
            throw new Error("Invalid DDS file magic word");
        var i = new Uint32Array(t,0,124 / Uint32Array.BYTES_PER_ELEMENT)
          , r = i[es]
          , n = i[is]
          , o = i[rs]
          , s = new Uint32Array(t,ns * Uint32Array.BYTES_PER_ELEMENT,32 / Uint32Array.BYTES_PER_ELEMENT)
          , a = s[1];
        if (4 & a) {
            var l = s[os];
            if (808540228 !== l) {
                var c = ds[l]
                  , u = new Uint8Array(t,128);
                return [new Ko(u,{
                    format: c,
                    width: n,
                    height: r,
                    levels: o
                })]
            }
            var p = new Uint32Array(e.buffer,128,20 / Uint32Array.BYTES_PER_ELEMENT)
              , h = p[ss]
              , d = p[as]
              , _ = p[ls]
              , y = p[cs]
              , f = _s[h];
            if (void 0 === f)
                throw new Error("DDSLoader cannot parse texture data with DXGI format " + h);
            if (4 === _)
                throw new Error("DDSLoader does not support cubemap textures");
            if (d === $o.DDS_DIMENSION_TEXTURE3D)
                throw new Error("DDSLoader does not supported 3D texture data");
            var m = new Array;
            if (1 === y)
                m.push(new Uint8Array(t,148));
            else {
                for (var T = jo[f], g = 0, v = n, E = r, S = 0; S < o; S++)
                    g += Math.max(1, v + 3 & -4) * Math.max(1, E + 3 & -4) * T,
                    v >>>= 1,
                    E >>>= 1;
                var b = 148;
                for (S = 0; S < y; S++)
                    m.push(new Uint8Array(t,b,g)),
                    b += g
            }
            return m.map(function(t) {
                return new Ko(t,{
                    format: f,
                    width: n,
                    height: r,
                    levels: o
                })
            })
        }
        if (64 & a)
            throw new Error("DDSLoader does not support uncompressed texture data.");
        if (512 & a)
            throw new Error("DDSLoader does not supported YUV uncompressed texture data.");
        if (131072 & a)
            throw new Error("DDSLoader does not support single-channel (lumninance) texture data!");
        if (2 & a)
            throw new Error("DDSLoader does not support single-channel (alpha) texture data!");
        throw new Error("DDSLoader failed to load a texture file due to an unknown reason!")
    }
    ,
    DDSLoader);
    function DDSLoader() {}
    rt.LoaderResource.setExtensionXhrType("ktx", rt.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);
    var fs = [171, 75, 84, 88, 32, 49, 49, 187, 13, 10, 26, 10]
      , ms = 12
      , Ts = 16
      , gs = 24
      , vs = 28
      , Es = 36
      , Ss = 40
      , bs = 44
      , Is = 48
      , Cs = 52
      , Us = 56
      , As = 60
      , ws = ((us = {})[rt.TYPES.UNSIGNED_BYTE] = 1,
    us[rt.TYPES.UNSIGNED_SHORT] = 2,
    us[rt.TYPES.INT] = 4,
    us[rt.TYPES.UNSIGNED_INT] = 4,
    us[rt.TYPES.FLOAT] = 4,
    us[rt.TYPES.HALF_FLOAT] = 8,
    us)
      , Os = ((ps = {})[rt.FORMATS.RGBA] = 4,
    ps[rt.FORMATS.RGB] = 3,
    ps[rt.FORMATS.RG] = 2,
    ps[rt.FORMATS.RED] = 1,
    ps[rt.FORMATS.LUMINANCE] = 1,
    ps[rt.FORMATS.LUMINANCE_ALPHA] = 2,
    ps[rt.FORMATS.ALPHA] = 1,
    ps)
      , Rs = ((hs = {})[rt.TYPES.UNSIGNED_SHORT_4_4_4_4] = 2,
    hs[rt.TYPES.UNSIGNED_SHORT_5_5_5_1] = 2,
    hs[rt.TYPES.UNSIGNED_SHORT_5_6_5] = 2,
    hs)
      , Ps = (KTXLoader.use = function(t, e) {
        if ("ktx" === t.extension && t.data)
            try {
                var n = t.name || t.url
                  , i = KTXLoader.parse(n, t.data)
                  , r = i.compressed
                  , o = i.uncompressed;
                if (r)
                    Object.assign(t, registerCompressedTextures(n, r, t.metadata));
                else if (o) {
                    var s = {};
                    o.forEach(function(t, e) {
                        var i = new Cr(new Qi(t.resource,{
                            mipmap: rt.MIPMAP_MODES.OFF,
                            alphaMode: rt.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,
                            type: t.type,
                            format: t.format
                        }))
                          , r = n + "-" + (e + 1);
                        Qi.addToCache(i.baseTexture, r),
                        Cr.addToCache(i, r),
                        0 === e && (s[n] = i,
                        Qi.addToCache(i.baseTexture, n),
                        Cr.addToCache(i, n)),
                        s[r] = i
                    }),
                    Object.assign(t, {
                        textures: s
                    })
                }
            } catch (t) {
                return void e(t)
            }
        e()
    }
    ,
    KTXLoader.parse = function(t, e) {
        var i = new DataView(e);
        if (!KTXLoader.validate(t, i))
            return null;
        var r = 67305985 === i.getUint32(ms, !0)
          , n = i.getUint32(Ts, r)
          , o = i.getUint32(gs, r)
          , s = i.getUint32(vs, r)
          , a = i.getUint32(Es, r)
          , l = i.getUint32(Ss, r) || 1
          , c = i.getUint32(bs, r) || 1
          , u = i.getUint32(Is, r) || 1
          , p = i.getUint32(Cs, r)
          , h = i.getUint32(Us, r)
          , d = i.getUint32(As, r);
        if (0 === l || 1 !== c)
            throw new Error("Only 2D textures are supported");
        if (1 !== p)
            throw new Error("CubeTextures are not supported by KTXLoader yet!");
        if (1 !== u)
            throw new Error("WebGL does not support array textures");
        var _, y = a + 3 & -4, f = l + 3 & -4, m = new Array(u), T = a * l;
        if (0 === n && (T = y * f),
        void 0 === (_ = 0 !== n ? ws[n] ? ws[n] * Os[o] : Rs[n] : jo[s]))
            throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");
        for (var g = T * _, v = a, E = l, S = y, b = f, I = 64 + d, C = 0; C < h; C++) {
            for (var U = i.getUint32(I, r), A = I + 4, w = 0; w < u; w++) {
                var O = m[w];
                (O = O || (m[w] = new Array(h)))[C] = {
                    levelID: C,
                    levelWidth: 1 < h || 0 !== n ? v : S,
                    levelHeight: 1 < h || 0 !== n ? E : b,
                    levelBuffer: new Uint8Array(e,A,g)
                },
                A += g
            }
            I = (I += U + 4) % 4 != 0 ? I + 4 - I % 4 : I,
            g = (S = (v = v >> 1 || 1) + 4 - 1 & -4) * (b = (E = E >> 1 || 1) + 4 - 1 & -4) * _
        }
        return 0 !== n ? {
            uncompressed: m.map(function(t) {
                var e = t[0].levelBuffer
                  , i = !1;
                return n === rt.TYPES.FLOAT ? e = new Float32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength / 4) : n === rt.TYPES.UNSIGNED_INT ? (i = !0,
                e = new Uint32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength / 4)) : n === rt.TYPES.INT && (i = !0,
                e = new Int32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength / 4)),
                {
                    resource: new Xi(e,{
                        width: t[0].levelWidth,
                        height: t[0].levelHeight
                    }),
                    type: n,
                    format: i ? KTXLoader.convertFormatToInteger(o) : o
                }
            })
        } : {
            compressed: m.map(function(t) {
                return new Ko(null,{
                    format: s,
                    width: a,
                    height: l,
                    levels: h,
                    levelBuffers: t
                })
            })
        }
    }
    ,
    KTXLoader.validate = function(t, e) {
        for (var i = 0; i < fs.length; i++)
            if (e.getUint8(i) !== fs[i])
                return console.error(t + " is not a valid *.ktx file!"),
                !1;
        return !0
    }
    ,
    KTXLoader.convertFormatToInteger = function(t) {
        switch (t) {
        case rt.FORMATS.RGBA:
            return rt.FORMATS.RGBA_INTEGER;
        case rt.FORMATS.RGB:
            return rt.FORMATS.RGB_INTEGER;
        case rt.FORMATS.RG:
            return rt.FORMATS.RG_INTEGER;
        case rt.FORMATS.RED:
            return rt.FORMATS.RED_INTEGER;
        default:
            return t
        }
    }
    ,
    KTXLoader);
    function KTXLoader() {}
    var Ds = function(t, e) {
        return (Ds = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    function __extends$f(t, e) {
        function __() {
            this.constructor = t
        }
        Ds(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
    var Ls, Ns = (__extends$f(ParticleContainer, Ls = Ui),
    ParticleContainer.prototype.setProperties = function(t) {
        t && (this._properties[0] = "vertices"in t || "scale"in t ? !!t.vertices || !!t.scale : this._properties[0],
        this._properties[1] = "position"in t ? !!t.position : this._properties[1],
        this._properties[2] = "rotation"in t ? !!t.rotation : this._properties[2],
        this._properties[3] = "uvs"in t ? !!t.uvs : this._properties[3],
        this._properties[4] = "tint"in t || "alpha"in t ? !!t.tint || !!t.alpha : this._properties[4])
    }
    ,
    ParticleContainer.prototype.updateTransform = function() {
        this.displayObjectUpdateTransform()
    }
    ,
    Object.defineProperty(ParticleContainer.prototype, "tint", {
        get: function() {
            return this._tint
        },
        set: function(t) {
            hex2rgb(this._tint = t, this.tintRgb)
        },
        enumerable: !1,
        configurable: !0
    }),
    ParticleContainer.prototype.render = function(t) {
        var e = this;
        this.visible && !(this.worldAlpha <= 0) && this.children.length && this.renderable && (this.baseTexture || (this.baseTexture = this.children[0]._texture.baseTexture,
        this.baseTexture.valid || this.baseTexture.once("update", function() {
            return e.onChildrenChange(0)
        })),
        t.batch.setObjectRenderer(t.plugins.particle),
        t.plugins.particle.render(this))
    }
    ,
    ParticleContainer.prototype.onChildrenChange = function(t) {
        for (var e = Math.floor(t / this._batchSize); this._bufferUpdateIDs.length < e; )
            this._bufferUpdateIDs.push(0);
        this._bufferUpdateIDs[e] = ++this._updateID
    }
    ,
    ParticleContainer.prototype.dispose = function() {
        if (this._buffers) {
            for (var t = 0; t < this._buffers.length; ++t)
                this._buffers[t].destroy();
            this._buffers = null
        }
    }
    ,
    ParticleContainer.prototype.destroy = function(t) {
        Ls.prototype.destroy.call(this, t),
        this.dispose(),
        this._properties = null,
        this._buffers = null,
        this._bufferUpdateIDs = null
    }
    ,
    ParticleContainer);
    function ParticleContainer(t, e, i, r) {
        void 0 === t && (t = 1500),
        void 0 === i && (i = 16384),
        void 0 === r && (r = !1);
        var n = Ls.call(this) || this;
        return 16384 < i && (i = 16384),
        n._properties = [!1, !0, !1, !1, !1],
        n._maxSize = t,
        n._batchSize = i,
        n._buffers = null,
        n._bufferUpdateIDs = [],
        n._updateID = 0,
        n.interactiveChildren = !1,
        n.blendMode = rt.BLEND_MODES.NORMAL,
        n.autoResize = r,
        n.roundPixels = !0,
        n.baseTexture = null,
        n.setProperties(e),
        n._tint = 0,
        n.tintRgb = new Float32Array(4),
        n.tint = 16777215,
        n
    }
    var xs = (ParticleBuffer.prototype.initBuffers = function() {
        var t = this.geometry
          , e = 0;
        this.indexBuffer = new Pr(createIndicesForQuads(this.size),!0,!0),
        t.addIndex(this.indexBuffer);
        for (var i = this.dynamicStride = 0; i < this.dynamicProperties.length; ++i)
            (s = this.dynamicProperties[i]).offset = e,
            e += s.size,
            this.dynamicStride += s.size;
        var r = new ArrayBuffer(this.size * this.dynamicStride * 4 * 4);
        this.dynamicData = new Float32Array(r),
        this.dynamicDataUint32 = new Uint32Array(r),
        this.dynamicBuffer = new Pr(this.dynamicData,!1,!1);
        var n = 0;
        for (i = this.staticStride = 0; i < this.staticProperties.length; ++i)
            (s = this.staticProperties[i]).offset = n,
            n += s.size,
            this.staticStride += s.size;
        var o = new ArrayBuffer(this.size * this.staticStride * 4 * 4);
        for (this.staticData = new Float32Array(o),
        this.staticDataUint32 = new Uint32Array(o),
        this.staticBuffer = new Pr(this.staticData,!0,!1),
        i = 0; i < this.dynamicProperties.length; ++i) {
            var s = this.dynamicProperties[i];
            t.addAttribute(s.attributeName, this.dynamicBuffer, 0, s.type === rt.TYPES.UNSIGNED_BYTE, s.type, 4 * this.dynamicStride, 4 * s.offset)
        }
        for (i = 0; i < this.staticProperties.length; ++i)
            s = this.staticProperties[i],
            t.addAttribute(s.attributeName, this.staticBuffer, 0, s.type === rt.TYPES.UNSIGNED_BYTE, s.type, 4 * this.staticStride, 4 * s.offset)
    }
    ,
    ParticleBuffer.prototype.uploadDynamic = function(t, e, i) {
        for (var r = 0; r < this.dynamicProperties.length; r++) {
            var n = this.dynamicProperties[r];
            n.uploadFunction(t, e, i, n.type === rt.TYPES.UNSIGNED_BYTE ? this.dynamicDataUint32 : this.dynamicData, this.dynamicStride, n.offset)
        }
        this.dynamicBuffer._updateID++
    }
    ,
    ParticleBuffer.prototype.uploadStatic = function(t, e, i) {
        for (var r = 0; r < this.staticProperties.length; r++) {
            var n = this.staticProperties[r];
            n.uploadFunction(t, e, i, n.type === rt.TYPES.UNSIGNED_BYTE ? this.staticDataUint32 : this.staticData, this.staticStride, n.offset)
        }
        this.staticBuffer._updateID++
    }
    ,
    ParticleBuffer.prototype.destroy = function() {
        this.indexBuffer = null,
        this.dynamicProperties = null,
        this.dynamicBuffer = null,
        this.dynamicData = null,
        this.dynamicDataUint32 = null,
        this.staticProperties = null,
        this.staticBuffer = null,
        this.staticData = null,
        this.staticDataUint32 = null,
        this.geometry.destroy()
    }
    ,
    ParticleBuffer);
    function ParticleBuffer(t, e, i) {
        this.geometry = new Mr,
        this.indexBuffer = null,
        this.size = i,
        this.dynamicProperties = [],
        this.staticProperties = [];
        for (var r = 0; r < t.length; ++r) {
            var n = t[r];
            n = {
                attributeName: n.attributeName,
                size: n.size,
                uploadFunction: n.uploadFunction,
                type: n.type || rt.TYPES.FLOAT,
                offset: n.offset
            },
            e[r] ? this.dynamicProperties.push(n) : this.staticProperties.push(n)
        }
        this.staticStride = 0,
        this.staticBuffer = null,
        this.staticData = null,
        this.staticDataUint32 = null,
        this.dynamicStride = 0,
        this.dynamicBuffer = null,
        this.dynamicData = null,
        this.dynamicDataUint32 = null,
        this._updateID = 0,
        this.initBuffers()
    }
    var Ms, Vs, Bs, Fs = (__extends$f(ParticleRenderer, Ms = Kr),
    ParticleRenderer.prototype.render = function(t) {
        var e = t.children
          , i = t._maxSize
          , r = t._batchSize
          , n = this.renderer
          , o = e.length;
        if (0 !== o) {
            i < o && !t.autoResize && (o = i);
            var s = t._buffers;
            s = s || (t._buffers = this.generateBuffers(t));
            var a = e[0]._texture.baseTexture;
            this.state.blendMode = correctBlendMode(t.blendMode, a.alphaMode),
            n.state.set(this.state);
            var l = n.gl
              , c = t.worldTransform.copyTo(this.tempMatrix);
            c.prepend(n.globalUniforms.uniforms.projectionMatrix),
            this.shader.uniforms.translationMatrix = c.toArray(!0),
            this.shader.uniforms.uColor = premultiplyRgba(t.tintRgb, t.worldAlpha, this.shader.uniforms.uColor, a.alphaMode),
            this.shader.uniforms.uSampler = a,
            this.renderer.shader.bind(this.shader);
            for (var u = !1, p = 0, h = 0; p < o; p += r,
            h += 1) {
                var d = o - p;
                r < d && (d = r),
                h >= s.length && s.push(this._generateOneMoreBuffer(t));
                var _ = s[h];
                _.uploadDynamic(e, p, d);
                var y = t._bufferUpdateIDs[h] || 0;
                (u = u || _._updateID < y) && (_._updateID = t._updateID,
                _.uploadStatic(e, p, d)),
                n.geometry.bind(_.geometry),
                l.drawElements(l.TRIANGLES, 6 * d, l.UNSIGNED_SHORT, 0)
            }
        }
    }
    ,
    ParticleRenderer.prototype.generateBuffers = function(t) {
        for (var e = [], i = t._maxSize, r = t._batchSize, n = t._properties, o = 0; o < i; o += r)
            e.push(new xs(this.properties,n,r));
        return e
    }
    ,
    ParticleRenderer.prototype._generateOneMoreBuffer = function(t) {
        var e = t._batchSize
          , i = t._properties;
        return new xs(this.properties,i,e)
    }
    ,
    ParticleRenderer.prototype.uploadVertices = function(t, e, i, r, n, o) {
        for (var s = 0, a = 0, l = 0, c = 0, u = 0; u < i; ++u) {
            var p = t[e + u]
              , h = p._texture
              , d = p.scale.x
              , _ = p.scale.y
              , y = h.trim
              , f = h.orig;
            y ? (s = (a = y.x - p.anchor.x * f.width) + y.width,
            l = (c = y.y - p.anchor.y * f.height) + y.height) : (s = f.width * (1 - p.anchor.x),
            a = f.width * -p.anchor.x,
            l = f.height * (1 - p.anchor.y),
            c = f.height * -p.anchor.y),
            r[o] = a * d,
            r[o + 1] = c * _,
            r[o + n] = s * d,
            r[o + n + 1] = c * _,
            r[o + 2 * n] = s * d,
            r[o + 2 * n + 1] = l * _,
            r[o + 3 * n] = a * d,
            r[o + 3 * n + 1] = l * _,
            o += 4 * n
        }
    }
    ,
    ParticleRenderer.prototype.uploadPosition = function(t, e, i, r, n, o) {
        for (var s = 0; s < i; s++) {
            var a = t[e + s].position;
            r[o] = a.x,
            r[o + 1] = a.y,
            r[o + n] = a.x,
            r[o + n + 1] = a.y,
            r[o + 2 * n] = a.x,
            r[o + 2 * n + 1] = a.y,
            r[o + 3 * n] = a.x,
            r[o + 3 * n + 1] = a.y,
            o += 4 * n
        }
    }
    ,
    ParticleRenderer.prototype.uploadRotation = function(t, e, i, r, n, o) {
        for (var s = 0; s < i; s++) {
            var a = t[e + s].rotation;
            r[o] = a,
            r[o + n] = a,
            r[o + 2 * n] = a,
            r[o + 3 * n] = a,
            o += 4 * n
        }
    }
    ,
    ParticleRenderer.prototype.uploadUvs = function(t, e, i, r, n, o) {
        for (var s = 0; s < i; ++s) {
            var a = t[e + s]._texture._uvs;
            a ? (r[o] = a.x0,
            r[o + 1] = a.y0,
            r[o + n] = a.x1,
            r[o + n + 1] = a.y1,
            r[o + 2 * n] = a.x2,
            r[o + 2 * n + 1] = a.y2,
            r[o + 3 * n] = a.x3,
            r[o + 3 * n + 1] = a.y3) : (r[o] = 0,
            r[o + 1] = 0,
            r[o + n] = 0,
            r[o + n + 1] = 0,
            r[o + 2 * n] = 0,
            r[o + 2 * n + 1] = 0,
            r[o + 3 * n] = 0,
            r[o + 3 * n + 1] = 0),
            o += 4 * n
        }
    }
    ,
    ParticleRenderer.prototype.uploadTint = function(t, e, i, r, n, o) {
        for (var s = 0; s < i; ++s) {
            var a = t[e + s]
              , l = 0 < a._texture.baseTexture.alphaMode
              , c = a.alpha
              , u = c < 1 && l ? premultiplyTint(a._tintRGB, c) : a._tintRGB + (255 * c << 24);
            r[o] = u,
            r[o + n] = u,
            r[o + 2 * n] = u,
            r[o + 3 * n] = u,
            o += 4 * n
        }
    }
    ,
    ParticleRenderer.prototype.destroy = function() {
        Ms.prototype.destroy.call(this),
        this.shader && (this.shader.destroy(),
        this.shader = null),
        this.tempMatrix = null
    }
    ,
    ParticleRenderer);
    function ParticleRenderer(t) {
        var e = Ms.call(this, t) || this;
        return e.shader = null,
        e.properties = null,
        e.tempMatrix = new Ce,
        e.properties = [{
            attributeName: "aVertexPosition",
            size: 2,
            uploadFunction: e.uploadVertices,
            offset: 0
        }, {
            attributeName: "aPositionCoord",
            size: 2,
            uploadFunction: e.uploadPosition,
            offset: 0
        }, {
            attributeName: "aRotation",
            size: 1,
            uploadFunction: e.uploadRotation,
            offset: 0
        }, {
            attributeName: "aTextureCoord",
            size: 2,
            uploadFunction: e.uploadUvs,
            offset: 0
        }, {
            attributeName: "aColor",
            size: 1,
            type: rt.TYPES.UNSIGNED_BYTE,
            uploadFunction: e.uploadTint,
            offset: 0
        }],
        e.shader = Tn.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n", "varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}", {}),
        e.state = gn.for2d(),
        e
    }
    rt.LINE_JOIN = void 0,
    (Vs = rt.LINE_JOIN || (rt.LINE_JOIN = {})).MITER = "miter",
    Vs.BEVEL = "bevel",
    Vs.ROUND = "round",
    rt.LINE_CAP = void 0,
    (Bs = rt.LINE_CAP || (rt.LINE_CAP = {})).BUTT = "butt",
    Bs.ROUND = "round",
    Bs.SQUARE = "square";
    var Gs = {
        adaptive: !0,
        maxLength: 10,
        minSegments: 8,
        maxSegments: 2048,
        epsilon: 1e-4,
        _segmentsCount: function(t, e) {
            if (void 0 === e && (e = 20),
            !this.adaptive || !t || isNaN(t))
                return e;
            var i = Math.ceil(t / this.maxLength);
            return i < this.minSegments ? i = this.minSegments : i > this.maxSegments && (i = this.maxSegments),
            i
        }
    }
      , ks = (FillStyle.prototype.clone = function() {
        var t = new FillStyle;
        return t.color = this.color,
        t.alpha = this.alpha,
        t.texture = this.texture,
        t.matrix = this.matrix,
        t.visible = this.visible,
        t
    }
    ,
    FillStyle.prototype.reset = function() {
        this.color = 16777215,
        this.alpha = 1,
        this.texture = Cr.WHITE,
        this.matrix = null,
        this.visible = !1
    }
    ,
    FillStyle.prototype.destroy = function() {
        this.texture = null,
        this.matrix = null
    }
    ,
    FillStyle);
    function FillStyle() {
        this.color = 16777215,
        this.alpha = 1,
        this.texture = Cr.WHITE,
        this.matrix = null,
        this.visible = !1,
        this.reset()
    }
    var js = function(t, e) {
        return (js = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    function __extends$e(t, e) {
        function __() {
            this.constructor = t
        }
        js(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
    function fixOrientation(t, e) {
        var i, r;
        void 0 === e && (e = !1);
        var n = t.length;
        if (!(n < 6)) {
            for (var o = 0, s = 0, a = t[n - 2], l = t[n - 1]; s < n; s += 2) {
                var c = t[s]
                  , u = t[s + 1];
                o += (c - a) * (u + l),
                a = c,
                l = u
            }
            if (!e && 0 < o || e && o <= 0) {
                var p = n / 2;
                for (s = p + p % 2; s < n; s += 2) {
                    var h = n - s - 2
                      , d = n - s - 1
                      , _ = s
                      , y = s + 1;
                    i = [t[_], t[h]],
                    t[h] = i[0],
                    t[_] = i[1],
                    r = [t[y], t[d]],
                    t[d] = r[0],
                    t[y] = r[1]
                }
            }
        }
    }
    var Hs = {
        build: function(t) {
            t.points = t.shape.points.slice()
        },
        triangulate: function(t, e) {
            var i = t.points
              , r = t.holes
              , n = e.points
              , o = e.indices;
            if (6 <= i.length) {
                fixOrientation(i, !1);
                for (var s = [], a = 0; a < r.length; a++) {
                    var l = r[a];
                    fixOrientation(l.points, !0),
                    s.push(i.length / 2),
                    i = i.concat(l.points)
                }
                var c = _t(i, s, 2);
                if (!c)
                    return;
                var u = n.length / 2;
                for (a = 0; a < c.length; a += 3)
                    o.push(c[a] + u),
                    o.push(c[a + 1] + u),
                    o.push(c[a + 2] + u);
                for (a = 0; a < i.length; a++)
                    n.push(i[a])
            }
        }
    }
      , qs = {
        build: function(t) {
            var e, i, r, n, o, s, a = t.points;
            if (t.type === rt.SHAPES.CIRC) {
                var l = t.shape;
                e = l.x,
                i = l.y,
                o = s = l.radius,
                r = n = 0
            } else if (t.type === rt.SHAPES.ELIP) {
                var c = t.shape;
                e = c.x,
                i = c.y,
                o = c.width,
                s = c.height,
                r = n = 0
            } else {
                var u = t.shape
                  , p = u.width / 2
                  , h = u.height / 2;
                e = u.x + p,
                i = u.y + h,
                r = p - (o = s = Math.max(0, Math.min(u.radius, Math.min(p, h)))),
                n = h - s
            }
            var d = Math.ceil(2.3 * Math.sqrt(o + s))
              , _ = 8 * d + (r ? 4 : 0) + (n ? 4 : 0);
            if (0 != (a.length = _)) {
                if (0 === d)
                    return a.length = 8,
                    a[0] = a[6] = e + r,
                    a[1] = a[3] = i + n,
                    a[2] = a[4] = e - r,
                    void (a[5] = a[7] = i - n);
                var y = 0
                  , f = 4 * d + (r ? 2 : 0) + 2
                  , m = f
                  , T = _
                  , g = e + (C = r + o)
                  , v = e - C
                  , E = i + (U = n);
                if (a[y++] = g,
                a[y++] = E,
                a[--f] = E,
                a[--f] = v,
                n) {
                    var S = i - U;
                    a[m++] = v,
                    a[m++] = S,
                    a[--T] = S,
                    a[--T] = g
                }
                for (var b = 1; b < d; b++) {
                    var I = Math.PI / 2 * (b / d);
                    g = e + (C = r + Math.cos(I) * o),
                    v = e - C,
                    E = i + (U = n + Math.sin(I) * s),
                    S = i - U;
                    a[y++] = g,
                    a[y++] = E,
                    a[--f] = E,
                    a[--f] = v,
                    a[m++] = v,
                    a[m++] = S,
                    a[--T] = S,
                    a[--T] = g
                }
                var C, U;
                g = e + (C = r),
                v = e - C,
                E = i + (U = n + s),
                S = i - U;
                a[y++] = g,
                a[y++] = E,
                a[--T] = S,
                a[--T] = g,
                r && (a[y++] = v,
                a[y++] = E,
                a[--T] = S,
                a[--T] = v)
            }
        },
        triangulate: function(t, e) {
            var i, r, n = t.points, o = e.points, s = e.indices, a = o.length / 2, l = a;
            if (t.type !== rt.SHAPES.RREC) {
                var c = t.shape;
                i = c.x,
                r = c.y
            } else {
                var u = t.shape;
                i = u.x + u.width / 2,
                r = u.y + u.height / 2
            }
            var p = t.matrix;
            o.push(t.matrix ? p.a * i + p.c * r + p.tx : i, t.matrix ? p.b * i + p.d * r + p.ty : r),
            a++,
            o.push(n[0], n[1]);
            for (var h = 2; h < n.length; h += 2)
                o.push(n[h], n[h + 1]),
                s.push(a++, l, a);
            s.push(l + 1, l, a)
        }
    }
      , Ys = {
        build: function(t) {
            var e = t.shape
              , i = e.x
              , r = e.y
              , n = e.width
              , o = e.height
              , s = t.points;
            s.length = 0,
            s.push(i, r, i + n, r, i + n, r + o, i, r + o)
        },
        triangulate: function(t, e) {
            var i = t.points
              , r = e.points
              , n = r.length / 2;
            r.push(i[0], i[1], i[2], i[3], i[6], i[7], i[4], i[5]),
            e.indices.push(n, 1 + n, 2 + n, 1 + n, 2 + n, 3 + n)
        }
    };
    function getPt(t, e, i) {
        return t + (e - t) * i
    }
    function quadraticBezierCurve(t, e, i, r, n, o, s) {
        void 0 === s && (s = []);
        for (var a = s, l = 0, c = 0, u = 0, p = 0, h = 0, d = 0, _ = 0, y = 0; _ <= 20; ++_)
            l = getPt(t, i, y = _ / 20),
            c = getPt(e, r, y),
            u = getPt(i, n, y),
            p = getPt(r, o, y),
            h = getPt(l, u, y),
            d = getPt(c, p, y),
            0 === _ && a[a.length - 2] === h && a[a.length - 1] === d || a.push(h, d);
        return a
    }
    var zs = {
        build: function(t) {
            if (pa.nextRoundedRectBehavior)
                qs.build(t);
            else {
                var e = t.shape
                  , i = t.points
                  , r = e.x
                  , n = e.y
                  , o = e.width
                  , s = e.height
                  , a = Math.max(0, Math.min(e.radius, Math.min(o, s) / 2));
                i.length = 0,
                a ? (quadraticBezierCurve(r, n + a, r, n, r + a, n, i),
                quadraticBezierCurve(r + o - a, n, r + o, n, r + o, n + a, i),
                quadraticBezierCurve(r + o, n + s - a, r + o, n + s, r + o - a, n + s, i),
                quadraticBezierCurve(r + a, n + s, r, n + s, r, n + s - a, i)) : i.push(r, n, r + o, n, r + o, n + s, r, n + s)
            }
        },
        triangulate: function(t, e) {
            if (pa.nextRoundedRectBehavior)
                qs.triangulate(t, e);
            else {
                for (var i = t.points, r = e.points, n = e.indices, o = r.length / 2, s = _t(i, null, 2), a = 0, l = s.length; a < l; a += 3)
                    n.push(s[a] + o),
                    n.push(s[a + 1] + o),
                    n.push(s[a + 2] + o);
                for (a = 0,
                l = i.length; a < l; a++)
                    r.push(i[a], i[++a])
            }
        }
    };
    function square(t, e, i, r, n, o, s, a) {
        var l, c;
        c = s ? (l = r,
        -i) : (l = -r,
        i);
        var u = t - i * n + l
          , p = e - r * n + c
          , h = t + i * o + l
          , d = e + r * o + c;
        return a.push(u, p),
        a.push(h, d),
        2
    }
    function round(t, e, i, r, n, o, s, a) {
        var l = i - t
          , c = r - e
          , u = Math.atan2(l, c)
          , p = Math.atan2(n - t, o - e);
        a && u < p ? u += 2 * Math.PI : !a && p < u && (p += 2 * Math.PI);
        var h = u
          , d = p - u
          , _ = Math.abs(d)
          , y = Math.sqrt(l * l + c * c)
          , f = 1 + (15 * _ * Math.sqrt(y) / Math.PI >> 0)
          , m = d / f;
        if (h += m,
        a) {
            s.push(t, e),
            s.push(i, r);
            for (var T = 1, g = h; T < f; T++,
            g += m)
                s.push(t, e),
                s.push(t + Math.sin(g) * y, e + Math.cos(g) * y);
            s.push(t, e),
            s.push(n, o)
        } else {
            s.push(i, r),
            s.push(t, e);
            for (T = 1,
            g = h; T < f; T++,
            g += m)
                s.push(t + Math.sin(g) * y, e + Math.cos(g) * y),
                s.push(t, e);
            s.push(n, o),
            s.push(t, e)
        }
        return 2 * f
    }
    function buildLine(t, e) {
        t.lineStyle.native ? function buildNativeLine(t, e) {
            var i = 0
              , r = t.shape
              , n = t.points || r.points
              , o = r.type !== rt.SHAPES.POLY || r.closeStroke;
            if (0 !== n.length) {
                var s = e.points
                  , a = e.indices
                  , l = n.length / 2
                  , c = s.length / 2
                  , u = c;
                for (s.push(n[0], n[1]),
                i = 1; i < l; i++)
                    s.push(n[2 * i], n[2 * i + 1]),
                    a.push(u, u + 1),
                    u++;
                o && a.push(u, c)
            }
        }(t, e) : function buildNonNativeLine(t, e) {
            var i = t.shape
              , r = t.points || i.points.slice()
              , n = e.closePointEps;
            if (0 !== r.length) {
                var o = t.lineStyle
                  , s = new me(r[0],r[1])
                  , a = new me(r[r.length - 2],r[r.length - 1])
                  , l = i.type !== rt.SHAPES.POLY || i.closeStroke
                  , c = Math.abs(s.x - a.x) < n && Math.abs(s.y - a.y) < n;
                if (l) {
                    r = r.slice(),
                    c && (r.pop(),
                    r.pop(),
                    a.set(r[r.length - 2], r[r.length - 1]));
                    var u = .5 * (s.x + a.x)
                      , p = .5 * (a.y + s.y);
                    r.unshift(u, p),
                    r.push(u, p)
                }
                var h = e.points
                  , d = r.length / 2
                  , _ = r.length
                  , y = h.length / 2
                  , f = o.width / 2
                  , m = f * f
                  , T = o.miterLimit * o.miterLimit
                  , g = r[0]
                  , v = r[1]
                  , E = r[2]
                  , S = r[3]
                  , b = 0
                  , I = 0
                  , C = -(v - S)
                  , U = g - E
                  , A = 0
                  , w = 0
                  , O = Math.sqrt(C * C + U * U);
                C /= O,
                U /= O,
                C *= f,
                U *= f;
                var R = o.alignment
                  , P = 2 * (1 - R)
                  , D = 2 * R;
                l || (o.cap === rt.LINE_CAP.ROUND ? _ += round(g - C * (P - D) * .5, v - U * (P - D) * .5, g - C * P, v - U * P, g + C * D, v + U * D, h, !0) + 2 : o.cap === rt.LINE_CAP.SQUARE && (_ += square(g, v, C, U, P, D, !0, h))),
                h.push(g - C * P, v - U * P),
                h.push(g + C * D, v + U * D);
                for (var L = 1; L < d - 1; ++L) {
                    g = r[2 * (L - 1)],
                    v = r[2 * (L - 1) + 1],
                    E = r[2 * L],
                    S = r[2 * L + 1],
                    b = r[2 * (L + 1)],
                    I = r[2 * (L + 1) + 1],
                    C = -(v - S),
                    U = g - E,
                    C /= O = Math.sqrt(C * C + U * U),
                    U /= O,
                    C *= f,
                    U *= f,
                    A = -(S - I),
                    w = E - b,
                    A /= O = Math.sqrt(A * A + w * w),
                    w /= O,
                    A *= f,
                    w *= f;
                    var N = E - g
                      , x = v - S
                      , M = E - b
                      , V = I - S
                      , B = x * M - V * N
                      , F = B < 0;
                    if (Math.abs(B) < .1)
                        h.push(E - C * P, S - U * P),
                        h.push(E + C * D, S + U * D);
                    else {
                        var G = (-C + g) * (-U + S) - (-C + E) * (-U + v)
                          , k = (-A + b) * (-w + S) - (-A + E) * (-w + I)
                          , j = (N * k - M * G) / B
                          , H = (V * G - x * k) / B
                          , q = (j - E) * (j - E) + (H - S) * (H - S)
                          , Y = E + (j - E) * P
                          , z = S + (H - S) * P
                          , K = E - (j - E) * D
                          , X = S - (H - S) * D
                          , W = F ? P : D;
                        q <= Math.min(N * N + x * x, M * M + V * V) + W * W * m ? o.join === rt.LINE_JOIN.BEVEL || T < q / m ? (F ? (h.push(Y, z),
                        h.push(E + C * D, S + U * D),
                        h.push(Y, z),
                        h.push(E + A * D, S + w * D)) : (h.push(E - C * P, S - U * P),
                        h.push(K, X),
                        h.push(E - A * P, S - w * P),
                        h.push(K, X)),
                        _ += 2) : o.join === rt.LINE_JOIN.ROUND ? F ? (h.push(Y, z),
                        h.push(E + C * D, S + U * D),
                        _ += round(E, S, E + C * D, S + U * D, E + A * D, S + w * D, h, !0) + 4,
                        h.push(Y, z),
                        h.push(E + A * D, S + w * D)) : (h.push(E - C * P, S - U * P),
                        h.push(K, X),
                        _ += round(E, S, E - C * P, S - U * P, E - A * P, S - w * P, h, !1) + 4,
                        h.push(E - A * P, S - w * P),
                        h.push(K, X)) : (h.push(Y, z),
                        h.push(K, X)) : (h.push(E - C * P, S - U * P),
                        h.push(E + C * D, S + U * D),
                        o.join === rt.LINE_JOIN.BEVEL || T < q / m || (o.join === rt.LINE_JOIN.ROUND ? _ += F ? round(E, S, E + C * D, S + U * D, E + A * D, S + w * D, h, !0) + 2 : round(E, S, E - C * P, S - U * P, E - A * P, S - w * P, h, !1) + 2 : (F ? (h.push(K, X),
                        h.push(K, X)) : (h.push(Y, z),
                        h.push(Y, z)),
                        _ += 2)),
                        h.push(E - A * P, S - w * P),
                        h.push(E + A * D, S + w * D),
                        _ += 2)
                    }
                }
                g = r[2 * (d - 2)],
                v = r[2 * (d - 2) + 1],
                E = r[2 * (d - 1)],
                C = -(v - (S = r[2 * (d - 1) + 1])),
                U = g - E,
                C /= O = Math.sqrt(C * C + U * U),
                U /= O,
                C *= f,
                U *= f,
                h.push(E - C * P, S - U * P),
                h.push(E + C * D, S + U * D),
                l || (o.cap === rt.LINE_CAP.ROUND ? _ += round(E - C * (P - D) * .5, S - U * (P - D) * .5, E - C * P, S - U * P, E + C * D, S + U * D, h, !1) + 2 : o.cap === rt.LINE_CAP.SQUARE && (_ += square(E, S, C, U, P, D, !1, h)));
                var J = e.indices
                  , Q = Gs.epsilon * Gs.epsilon;
                for (L = y; L < _ + y - 2; ++L)
                    g = h[2 * L],
                    v = h[2 * L + 1],
                    E = h[2 * (L + 1)],
                    S = h[2 * (L + 1) + 1],
                    b = h[2 * (L + 2)],
                    I = h[2 * (L + 2) + 1],
                    Math.abs(g * (S - I) + E * (I - v) + b * (v - S)) < Q || J.push(L, L + 1, L + 2)
            }
        }(t, e)
    }
    var Ks = (ArcUtils.curveTo = function(t, e, i, r, n, o) {
        var s = o[o.length - 2]
          , a = o[o.length - 1] - e
          , l = s - t
          , c = r - e
          , u = i - t
          , p = Math.abs(a * u - l * c);
        if (p < 1e-8 || 0 === n)
            return o[o.length - 2] === t && o[o.length - 1] === e || o.push(t, e),
            null;
        var h = a * a + l * l
          , d = c * c + u * u
          , _ = a * c + l * u
          , y = n * Math.sqrt(h) / p
          , f = n * Math.sqrt(d) / p
          , m = y * _ / h
          , T = f * _ / d
          , g = y * u + f * l
          , v = y * c + f * a
          , E = l * (f + m)
          , S = a * (f + m)
          , b = u * (y + T)
          , I = c * (y + T);
        return {
            cx: g + t,
            cy: v + e,
            radius: n,
            startAngle: Math.atan2(S - v, E - g),
            endAngle: Math.atan2(I - v, b - g),
            anticlockwise: u * a < l * c
        }
    }
    ,
    ArcUtils.arc = function(t, e, i, r, n, o, s, a, l) {
        for (var c = s - o, u = Gs._segmentsCount(Math.abs(c) * n, 40 * Math.ceil(Math.abs(c) / _e)), p = c / (2 * u), h = 2 * p, d = Math.cos(p), _ = Math.sin(p), y = u - 1, f = y % 1 / y, m = 0; m <= y; ++m) {
            var T = p + o + h * (m + f * m)
              , g = Math.cos(T)
              , v = -Math.sin(T);
            l.push((d * g + _ * v) * n + i, (d * -v + _ * g) * n + r)
        }
    }
    ,
    ArcUtils);
    function ArcUtils() {}
    var Xs = (BezierUtils.curveLength = function(t, e, i, r, n, o, s, a) {
        for (var l = 0, c = 0, u = 0, p = 0, h = 0, d = 0, _ = 0, y = 0, f = 0, m = 0, T = 0, g = t, v = e, E = 1; E <= 10; ++E)
            m = g - (y = (_ = (d = (h = 1 - (c = E / 10)) * h) * h) * t + 3 * d * c * i + 3 * h * (u = c * c) * n + (p = u * c) * s),
            T = v - (f = _ * e + 3 * d * c * r + 3 * h * u * o + p * a),
            g = y,
            v = f,
            l += Math.sqrt(m * m + T * T);
        return l
    }
    ,
    BezierUtils.curveTo = function(t, e, i, r, n, o, s) {
        var a = s[s.length - 2]
          , l = s[s.length - 1];
        s.length -= 2;
        var c = Gs._segmentsCount(BezierUtils.curveLength(a, l, t, e, i, r, n, o))
          , u = 0
          , p = 0
          , h = 0
          , d = 0
          , _ = 0;
        s.push(a, l);
        for (var y = 1, f = 0; y <= c; ++y)
            h = (p = (u = 1 - (f = y / c)) * u) * u,
            _ = (d = f * f) * f,
            s.push(h * a + 3 * p * f * t + 3 * u * d * i + _ * n, h * l + 3 * p * f * e + 3 * u * d * r + _ * o)
    }
    ,
    BezierUtils);
    function BezierUtils() {}
    var Ws = (QuadraticUtils.curveLength = function(t, e, i, r, n, o) {
        var s = t - 2 * i + n
          , a = e - 2 * r + o
          , l = 2 * i - 2 * t
          , c = 2 * r - 2 * e
          , u = 4 * (s * s + a * a)
          , p = 4 * (s * l + a * c)
          , h = l * l + c * c
          , d = 2 * Math.sqrt(u + p + h)
          , _ = Math.sqrt(u)
          , y = 2 * u * _
          , f = 2 * Math.sqrt(h)
          , m = p / _;
        return (y * d + _ * p * (d - f) + (4 * h * u - p * p) * Math.log((2 * _ + m + d) / (m + f))) / (4 * y)
    }
    ,
    QuadraticUtils.curveTo = function(t, e, i, r, n) {
        for (var o = n[n.length - 2], s = n[n.length - 1], a = Gs._segmentsCount(QuadraticUtils.curveLength(o, s, t, e, i, r)), l = 0, c = 0, u = 1; u <= a; ++u) {
            var p = u / a;
            l = o + (t - o) * p,
            c = s + (e - s) * p,
            n.push(l + (t + (i - t) * p - l) * p, c + (e + (r - e) * p - c) * p)
        }
    }
    ,
    QuadraticUtils);
    function QuadraticUtils() {}
    var Js, Qs = (BatchPart.prototype.begin = function(t, e, i) {
        this.reset(),
        this.style = t,
        this.start = e,
        this.attribStart = i
    }
    ,
    BatchPart.prototype.end = function(t, e) {
        this.attribSize = e - this.attribStart,
        this.size = t - this.start
    }
    ,
    BatchPart.prototype.reset = function() {
        this.style = null,
        this.size = 0,
        this.start = 0,
        this.attribStart = 0,
        this.attribSize = 0
    }
    ,
    BatchPart);
    function BatchPart() {
        this.reset()
    }
    var Zs = ((Js = {})[rt.SHAPES.POLY] = Hs,
    Js[rt.SHAPES.CIRC] = qs,
    Js[rt.SHAPES.ELIP] = qs,
    Js[rt.SHAPES.RECT] = Ys,
    Js[rt.SHAPES.RREC] = zs,
    Js)
      , $s = []
      , ta = []
      , ea = (GraphicsData.prototype.clone = function() {
        return new GraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)
    }
    ,
    GraphicsData.prototype.destroy = function() {
        this.shape = null,
        this.holes.length = 0,
        this.holes = null,
        this.points.length = 0,
        this.points = null,
        this.lineStyle = null,
        this.fillStyle = null
    }
    ,
    GraphicsData);
    function GraphicsData(t, e, i, r) {
        void 0 === e && (e = null),
        void 0 === i && (i = null),
        void 0 === r && (r = null),
        this.points = [],
        this.holes = [],
        this.shape = t,
        this.lineStyle = i,
        this.fillStyle = e,
        this.matrix = r,
        this.type = t.type
    }
    var ia, ra = new me, na = new xe, oa = (__extends$e(GraphicsGeometry, ia = po),
    Object.defineProperty(GraphicsGeometry.prototype, "bounds", {
        get: function() {
            return this.boundsDirty !== this.dirty && (this.boundsDirty = this.dirty,
            this.calculateBounds()),
            this._bounds
        },
        enumerable: !1,
        configurable: !0
    }),
    GraphicsGeometry.prototype.invalidate = function() {
        this.boundsDirty = -1,
        this.dirty++,
        this.batchDirty++,
        this.shapeIndex = 0,
        this.points.length = 0,
        this.colors.length = 0,
        this.uvs.length = 0,
        this.indices.length = 0;
        for (var t = this.textureIds.length = 0; t < this.drawCalls.length; t++)
            this.drawCalls[t].texArray.clear(),
            ta.push(this.drawCalls[t]);
        for (t = this.drawCalls.length = 0; t < this.batches.length; t++) {
            var e = this.batches[t];
            e.reset(),
            $s.push(e)
        }
        this.batches.length = 0
    }
    ,
    GraphicsGeometry.prototype.clear = function() {
        return 0 < this.graphicsData.length && (this.invalidate(),
        this.clearDirty++,
        this.graphicsData.length = 0),
        this
    }
    ,
    GraphicsGeometry.prototype.drawShape = function(t, e, i, r) {
        void 0 === e && (e = null),
        void 0 === i && (i = null),
        void 0 === r && (r = null);
        var n = new ea(t,e,i,r);
        return this.graphicsData.push(n),
        this.dirty++,
        this
    }
    ,
    GraphicsGeometry.prototype.drawHole = function(t, e) {
        if (void 0 === e && (e = null),
        !this.graphicsData.length)
            return null;
        var i = new ea(t,null,null,e)
          , r = this.graphicsData[this.graphicsData.length - 1];
        return i.lineStyle = r.lineStyle,
        r.holes.push(i),
        this.dirty++,
        this
    }
    ,
    GraphicsGeometry.prototype.destroy = function() {
        ia.prototype.destroy.call(this);
        for (var t = 0; t < this.graphicsData.length; ++t)
            this.graphicsData[t].destroy();
        this.points.length = 0,
        this.points = null,
        this.colors.length = 0,
        this.colors = null,
        this.uvs.length = 0,
        this.uvs = null,
        this.indices.length = 0,
        this.indices = null,
        this.indexBuffer.destroy(),
        this.indexBuffer = null,
        this.graphicsData.length = 0,
        this.graphicsData = null,
        this.drawCalls.length = 0,
        this.drawCalls = null,
        this.batches.length = 0,
        this.batches = null,
        this._bounds = null
    }
    ,
    GraphicsGeometry.prototype.containsPoint = function(t) {
        for (var e = this.graphicsData, i = 0; i < e.length; ++i) {
            var r = e[i];
            if (r.fillStyle.visible && r.shape && (r.matrix ? r.matrix.applyInverse(t, ra) : ra.copyFrom(t),
            r.shape.contains(ra.x, ra.y))) {
                var n = !1;
                if (r.holes)
                    for (var o = 0; o < r.holes.length; o++)
                        if (r.holes[o].shape.contains(ra.x, ra.y)) {
                            n = !0;
                            break
                        }
                if (!n)
                    return !0
            }
        }
        return !1
    }
    ,
    GraphicsGeometry.prototype.updateBatches = function(t) {
        if (this.graphicsData.length) {
            if (this.validateBatching()) {
                this.cacheDirty = this.dirty;
                var e = this.uvs
                  , i = this.graphicsData
                  , r = null
                  , n = null;
                0 < this.batches.length && (n = (r = this.batches[this.batches.length - 1]).style);
                for (var o = this.shapeIndex; o < i.length; o++) {
                    this.shapeIndex++;
                    var s = i[o]
                      , a = s.fillStyle
                      , l = s.lineStyle;
                    Zs[s.type].build(s),
                    s.matrix && this.transformPoints(s.points, s.matrix),
                    (a.visible || l.visible) && this.processHoles(s.holes);
                    for (var c = 0; c < 2; c++) {
                        var u = 0 === c ? a : l;
                        if (u.visible) {
                            var p = u.texture.baseTexture
                              , h = this.indices.length
                              , d = this.points.length / 2;
                            p.wrapMode = rt.WRAP_MODES.REPEAT,
                            0 === c ? this.processFill(s) : this.processLine(s);
                            var _ = this.points.length / 2 - d;
                            0 != _ && (r && !this._compareStyles(n, u) && (r.end(h, d),
                            r = null),
                            r || ((r = $s.pop() || new Qs).begin(u, h, d),
                            this.batches.push(r),
                            n = u),
                            this.addUvs(this.points, e, u.texture, d, _, u.matrix))
                        }
                    }
                }
                var y = this.indices.length
                  , f = this.points.length / 2;
                if (r && r.end(y, f),
                0 !== this.batches.length) {
                    if (this.indicesUint16 && this.indices.length === this.indicesUint16.length)
                        this.indicesUint16.set(this.indices);
                    else {
                        var m = 65535 < f && t;
                        this.indicesUint16 = m ? new Uint32Array(this.indices) : new Uint16Array(this.indices)
                    }
                    this.batchable = this.isBatchable(),
                    this.batchable ? this.packBatches() : this.buildDrawCalls()
                } else
                    this.batchable = !0
            }
        } else
            this.batchable = !0
    }
    ,
    GraphicsGeometry.prototype._compareStyles = function(t, e) {
        return !(!t || !e) && t.texture.baseTexture === e.texture.baseTexture && t.color + t.alpha === e.color + e.alpha && !!t.native == !!e.native
    }
    ,
    GraphicsGeometry.prototype.validateBatching = function() {
        if (this.dirty === this.cacheDirty || !this.graphicsData.length)
            return !1;
        for (var t = 0, e = this.graphicsData.length; t < e; t++) {
            var i = this.graphicsData[t]
              , r = i.fillStyle
              , n = i.lineStyle;
            if (r && !r.texture.baseTexture.valid)
                return !1;
            if (n && !n.texture.baseTexture.valid)
                return !1
        }
        return !0
    }
    ,
    GraphicsGeometry.prototype.packBatches = function() {
        this.batchDirty++,
        this.uvsFloat32 = new Float32Array(this.uvs);
        for (var t = this.batches, e = 0, i = t.length; e < i; e++)
            for (var r = t[e], n = 0; n < r.size; n++) {
                var o = r.start + n;
                this.indicesUint16[o] = this.indicesUint16[o] - r.attribStart
            }
    }
    ,
    GraphicsGeometry.prototype.isBatchable = function() {
        if (131070 < this.points.length)
            return !1;
        for (var t = this.batches, e = 0; e < t.length; e++)
            if (t[e].style.native)
                return !1;
        return this.points.length < 2 * GraphicsGeometry.BATCHABLE_SIZE
    }
    ,
    GraphicsGeometry.prototype.buildDrawCalls = function() {
        for (var t = ++Qi._globalBatch, e = 0; e < this.drawCalls.length; e++)
            this.drawCalls[e].texArray.clear(),
            ta.push(this.drawCalls[e]);
        this.drawCalls.length = 0;
        var i = this.colors
          , r = this.textureIds
          , n = ta.pop();
        n || ((n = new no).texArray = new oo),
        n.texArray.count = 0,
        n.start = 0,
        n.size = 0,
        n.type = rt.DRAW_MODES.TRIANGLES;
        var o = 0
          , s = null
          , a = 0
          , l = !1
          , c = rt.DRAW_MODES.TRIANGLES
          , u = 0;
        for (this.drawCalls.push(n),
        e = 0; e < this.batches.length; e++) {
            var p = this.batches[e]
              , h = p.style
              , d = h.texture.baseTexture;
            l !== !!h.native && (c = (l = !!h.native) ? rt.DRAW_MODES.LINES : rt.DRAW_MODES.TRIANGLES,
            s = null,
            o = 8,
            t++),
            s !== d && (s = d)._batchEnabled !== t && (8 === o && (t++,
            (o = 0) < n.size && ((n = ta.pop()) || ((n = new no).texArray = new oo),
            this.drawCalls.push(n)),
            n.start = u,
            n.size = 0,
            n.texArray.count = 0,
            n.type = c),
            d.touched = 1,
            d._batchEnabled = t,
            d._batchLocation = o,
            d.wrapMode = rt.WRAP_MODES.REPEAT,
            n.texArray.elements[n.texArray.count++] = d,
            o++),
            n.size += p.size,
            u += p.size,
            a = d._batchLocation,
            this.addColors(i, h.color, h.alpha, p.attribSize, p.attribStart),
            this.addTextureIds(r, a, p.attribSize, p.attribStart)
        }
        Qi._globalBatch = t,
        this.packAttributes()
    }
    ,
    GraphicsGeometry.prototype.packAttributes = function() {
        for (var t = this.points, e = this.uvs, i = this.colors, r = this.textureIds, n = new ArrayBuffer(3 * t.length * 4), o = new Float32Array(n), s = new Uint32Array(n), a = 0, l = 0; l < t.length / 2; l++)
            o[a++] = t[2 * l],
            o[a++] = t[2 * l + 1],
            o[a++] = e[2 * l],
            o[a++] = e[2 * l + 1],
            s[a++] = i[l],
            o[a++] = r[l];
        this._buffer.update(n),
        this._indexBuffer.update(this.indicesUint16)
    }
    ,
    GraphicsGeometry.prototype.processFill = function(t) {
        t.holes.length ? Hs.triangulate(t, this) : Zs[t.type].triangulate(t, this)
    }
    ,
    GraphicsGeometry.prototype.processLine = function(t) {
        buildLine(t, this);
        for (var e = 0; e < t.holes.length; e++)
            buildLine(t.holes[e], this)
    }
    ,
    GraphicsGeometry.prototype.processHoles = function(t) {
        for (var e = 0; e < t.length; e++) {
            var i = t[e];
            Zs[i.type].build(i),
            i.matrix && this.transformPoints(i.points, i.matrix)
        }
    }
    ,
    GraphicsGeometry.prototype.calculateBounds = function() {
        var t = this._bounds
          , e = na
          , i = Ce.IDENTITY;
        this._bounds.clear(),
        e.clear();
        for (var r = 0; r < this.graphicsData.length; r++) {
            var n = this.graphicsData[r]
              , o = n.shape
              , s = n.type
              , a = n.lineStyle
              , l = n.matrix || Ce.IDENTITY
              , c = 0;
            if (a && a.visible && (c = a.width,
            s !== rt.SHAPES.POLY || n.fillStyle.visible ? c *= Math.max(0, a.alignment) : c *= Math.max(a.alignment, 1 - a.alignment)),
            i !== l && (e.isEmpty() || (t.addBoundsMatrix(e, i),
            e.clear()),
            i = l),
            s === rt.SHAPES.RECT || s === rt.SHAPES.RREC) {
                var u = o;
                e.addFramePad(u.x, u.y, u.x + u.width, u.y + u.height, c, c)
            } else if (s === rt.SHAPES.CIRC) {
                var p = o;
                e.addFramePad(p.x, p.y, p.x, p.y, p.radius + c, p.radius + c)
            } else if (s === rt.SHAPES.ELIP) {
                var h = o;
                e.addFramePad(h.x, h.y, h.x, h.y, h.width + c, h.height + c)
            } else {
                var d = o;
                t.addVerticesMatrix(i, d.points, 0, d.points.length, c, c)
            }
        }
        e.isEmpty() || t.addBoundsMatrix(e, i),
        t.pad(this.boundsPadding, this.boundsPadding)
    }
    ,
    GraphicsGeometry.prototype.transformPoints = function(t, e) {
        for (var i = 0; i < t.length / 2; i++) {
            var r = t[2 * i]
              , n = t[2 * i + 1];
            t[2 * i] = e.a * r + e.c * n + e.tx,
            t[2 * i + 1] = e.b * r + e.d * n + e.ty
        }
    }
    ,
    GraphicsGeometry.prototype.addColors = function(t, e, i, r, n) {
        void 0 === n && (n = 0);
        var o = premultiplyTint((e >> 16) + (65280 & e) + ((255 & e) << 16), i);
        t.length = Math.max(t.length, n + r);
        for (var s = 0; s < r; s++)
            t[n + s] = o
    }
    ,
    GraphicsGeometry.prototype.addTextureIds = function(t, e, i, r) {
        void 0 === r && (r = 0),
        t.length = Math.max(t.length, r + i);
        for (var n = 0; n < i; n++)
            t[r + n] = e
    }
    ,
    GraphicsGeometry.prototype.addUvs = function(t, e, i, r, n, o) {
        void 0 === o && (o = null);
        for (var s = 0, a = e.length, l = i.frame; s < n; ) {
            var c = t[2 * (r + s)]
              , u = t[2 * (r + s) + 1];
            if (o) {
                var p = o.a * c + o.c * u + o.tx;
                u = o.b * c + o.d * u + o.ty,
                c = p
            }
            s++,
            e.push(c / l.width, u / l.height)
        }
        var h = i.baseTexture;
        (l.width < h.width || l.height < h.height) && this.adjustUvs(e, i, a, n)
    }
    ,
    GraphicsGeometry.prototype.adjustUvs = function(t, e, i, r) {
        for (var n = e.baseTexture, o = i + 2 * r, s = e.frame, a = s.width / n.width, l = s.height / n.height, c = s.x / s.width, u = s.y / s.height, p = Math.floor(t[i] + 1e-6), h = Math.floor(t[i + 1] + 1e-6), d = i + 2; d < o; d += 2)
            p = Math.min(p, Math.floor(t[d] + 1e-6)),
            h = Math.min(h, Math.floor(t[d + 1] + 1e-6));
        for (c -= p,
        u -= h,
        d = i; d < o; d += 2)
            t[d] = (t[d] + c) * a,
            t[d + 1] = (t[d + 1] + u) * l
    }
    ,
    GraphicsGeometry.BATCHABLE_SIZE = 100,
    GraphicsGeometry);
    function GraphicsGeometry() {
        var t = ia.call(this) || this;
        return t.closePointEps = 1e-4,
        t.boundsPadding = 0,
        t.uvsFloat32 = null,
        t.indicesUint16 = null,
        t.batchable = !1,
        t.points = [],
        t.colors = [],
        t.uvs = [],
        t.indices = [],
        t.textureIds = [],
        t.graphicsData = [],
        t.drawCalls = [],
        t.batchDirty = -1,
        t.batches = [],
        t.dirty = 0,
        t.cacheDirty = -1,
        t.clearDirty = 0,
        t.shapeIndex = 0,
        t._bounds = new xe,
        t.boundsDirty = -1,
        t
    }
    var sa, aa = (__extends$e(LineStyle, sa = ks),
    LineStyle.prototype.clone = function() {
        var t = new LineStyle;
        return t.color = this.color,
        t.alpha = this.alpha,
        t.texture = this.texture,
        t.matrix = this.matrix,
        t.visible = this.visible,
        t.width = this.width,
        t.alignment = this.alignment,
        t.native = this.native,
        t.cap = this.cap,
        t.join = this.join,
        t.miterLimit = this.miterLimit,
        t
    }
    ,
    LineStyle.prototype.reset = function() {
        sa.prototype.reset.call(this),
        this.color = 0,
        this.alignment = .5,
        this.width = 0,
        this.native = !1
    }
    ,
    LineStyle);
    function LineStyle() {
        var t = null !== sa && sa.apply(this, arguments) || this;
        return t.width = 0,
        t.alignment = .5,
        t.native = !1,
        t.cap = rt.LINE_CAP.BUTT,
        t.join = rt.LINE_JOIN.MITER,
        t.miterLimit = 10,
        t
    }
    var la, ca = new Float32Array(3), ua = {}, pa = (__extends$e(Graphics, la = Ui),
    Object.defineProperty(Graphics.prototype, "geometry", {
        get: function() {
            return this._geometry
        },
        enumerable: !1,
        configurable: !0
    }),
    Graphics.prototype.clone = function() {
        return this.finishPoly(),
        new Graphics(this._geometry)
    }
    ,
    Object.defineProperty(Graphics.prototype, "blendMode", {
        get: function() {
            return this.state.blendMode
        },
        set: function(t) {
            this.state.blendMode = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Graphics.prototype, "tint", {
        get: function() {
            return this._tint
        },
        set: function(t) {
            this._tint = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Graphics.prototype, "fill", {
        get: function() {
            return this._fillStyle
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Graphics.prototype, "line", {
        get: function() {
            return this._lineStyle
        },
        enumerable: !1,
        configurable: !0
    }),
    Graphics.prototype.lineStyle = function(t, e, i, r, n) {
        return void 0 === t && (t = null),
        void 0 === e && (e = 0),
        void 0 === i && (i = 1),
        void 0 === r && (r = .5),
        void 0 === n && (n = !1),
        "number" == typeof t && (t = {
            width: t,
            color: e,
            alpha: i,
            alignment: r,
            native: n
        }),
        this.lineTextureStyle(t)
    }
    ,
    Graphics.prototype.lineTextureStyle = function(t) {
        t = Object.assign({
            width: 0,
            texture: Cr.WHITE,
            color: t && t.texture ? 16777215 : 0,
            alpha: 1,
            matrix: null,
            alignment: .5,
            native: !1,
            cap: rt.LINE_CAP.BUTT,
            join: rt.LINE_JOIN.MITER,
            miterLimit: 10
        }, t),
        this.currentPath && this.startPoly();
        var e = 0 < t.width && 0 < t.alpha;
        return e ? (t.matrix && (t.matrix = t.matrix.clone(),
        t.matrix.invert()),
        Object.assign(this._lineStyle, {
            visible: e
        }, t)) : this._lineStyle.reset(),
        this
    }
    ,
    Graphics.prototype.startPoly = function() {
        if (this.currentPath) {
            var t = this.currentPath.points
              , e = this.currentPath.points.length;
            2 < e && (this.drawShape(this.currentPath),
            this.currentPath = new Se,
            this.currentPath.closeStroke = !1,
            this.currentPath.points.push(t[e - 2], t[e - 1]))
        } else
            this.currentPath = new Se,
            this.currentPath.closeStroke = !1
    }
    ,
    Graphics.prototype.finishPoly = function() {
        this.currentPath && (2 < this.currentPath.points.length ? (this.drawShape(this.currentPath),
        this.currentPath = null) : this.currentPath.points.length = 0)
    }
    ,
    Graphics.prototype.moveTo = function(t, e) {
        return this.startPoly(),
        this.currentPath.points[0] = t,
        this.currentPath.points[1] = e,
        this
    }
    ,
    Graphics.prototype.lineTo = function(t, e) {
        this.currentPath || this.moveTo(0, 0);
        var i = this.currentPath.points
          , r = i[i.length - 2]
          , n = i[i.length - 1];
        return r === t && n === e || i.push(t, e),
        this
    }
    ,
    Graphics.prototype._initCurve = function(t, e) {
        void 0 === t && (t = 0),
        void 0 === e && (e = 0),
        this.currentPath ? 0 === this.currentPath.points.length && (this.currentPath.points = [t, e]) : this.moveTo(t, e)
    }
    ,
    Graphics.prototype.quadraticCurveTo = function(t, e, i, r) {
        this._initCurve();
        var n = this.currentPath.points;
        return 0 === n.length && this.moveTo(0, 0),
        Ws.curveTo(t, e, i, r, n),
        this
    }
    ,
    Graphics.prototype.bezierCurveTo = function(t, e, i, r, n, o) {
        return this._initCurve(),
        Xs.curveTo(t, e, i, r, n, o, this.currentPath.points),
        this
    }
    ,
    Graphics.prototype.arcTo = function(t, e, i, r, n) {
        this._initCurve(t, e);
        var o = this.currentPath.points
          , s = Ks.curveTo(t, e, i, r, n, o);
        if (s) {
            var a = s.cx
              , l = s.cy
              , c = s.radius
              , u = s.startAngle
              , p = s.endAngle
              , h = s.anticlockwise;
            this.arc(a, l, c, u, p, h)
        }
        return this
    }
    ,
    Graphics.prototype.arc = function(t, e, i, r, n, o) {
        if (void 0 === o && (o = !1),
        r === n)
            return this;
        if (!o && n <= r ? n += _e : o && r <= n && (r += _e),
        0 == n - r)
            return this;
        var s = t + Math.cos(r) * i
          , a = e + Math.sin(r) * i
          , l = this._geometry.closePointEps
          , c = this.currentPath ? this.currentPath.points : null;
        if (c) {
            var u = Math.abs(c[c.length - 2] - s)
              , p = Math.abs(c[c.length - 1] - a);
            u < l && p < l || c.push(s, a)
        } else
            this.moveTo(s, a),
            c = this.currentPath.points;
        return Ks.arc(s, a, t, e, i, r, n, o, c),
        this
    }
    ,
    Graphics.prototype.beginFill = function(t, e) {
        return void 0 === t && (t = 0),
        void 0 === e && (e = 1),
        this.beginTextureFill({
            texture: Cr.WHITE,
            color: t,
            alpha: e
        })
    }
    ,
    Graphics.prototype.beginTextureFill = function(t) {
        t = Object.assign({
            texture: Cr.WHITE,
            color: 16777215,
            alpha: 1,
            matrix: null
        }, t),
        this.currentPath && this.startPoly();
        var e = 0 < t.alpha;
        return e ? (t.matrix && (t.matrix = t.matrix.clone(),
        t.matrix.invert()),
        Object.assign(this._fillStyle, {
            visible: e
        }, t)) : this._fillStyle.reset(),
        this
    }
    ,
    Graphics.prototype.endFill = function() {
        return this.finishPoly(),
        this._fillStyle.reset(),
        this
    }
    ,
    Graphics.prototype.drawRect = function(t, e, i, r) {
        return this.drawShape(new ge(t,e,i,r))
    }
    ,
    Graphics.prototype.drawRoundedRect = function(t, e, i, r, n) {
        return this.drawShape(new be(t,e,i,r,n))
    }
    ,
    Graphics.prototype.drawCircle = function(t, e, i) {
        return this.drawShape(new ve(t,e,i))
    }
    ,
    Graphics.prototype.drawEllipse = function(t, e, i, r) {
        return this.drawShape(new Ee(t,e,i,r))
    }
    ,
    Graphics.prototype.drawPolygon = function() {
        for (var t, e = arguments, i = [], r = 0; r < arguments.length; r++)
            i[r] = e[r];
        var n = !0
          , o = i[0];
        t = o.points ? (n = o.closeStroke,
        o.points) : Array.isArray(i[0]) ? i[0] : i;
        var s = new Se(t);
        return s.closeStroke = n,
        this.drawShape(s),
        this
    }
    ,
    Graphics.prototype.drawShape = function(t) {
        return this._holeMode ? this._geometry.drawHole(t, this._matrix) : this._geometry.drawShape(t, this._fillStyle.clone(), this._lineStyle.clone(), this._matrix),
        this
    }
    ,
    Graphics.prototype.clear = function() {
        return this._geometry.clear(),
        this._lineStyle.reset(),
        this._fillStyle.reset(),
        this._boundsID++,
        this._matrix = null,
        this._holeMode = !1,
        this.currentPath = null,
        this
    }
    ,
    Graphics.prototype.isFastRect = function() {
        var t = this._geometry.graphicsData;
        return !(1 !== t.length || t[0].shape.type !== rt.SHAPES.RECT || t[0].matrix || t[0].holes.length || t[0].lineStyle.visible && t[0].lineStyle.width)
    }
    ,
    Graphics.prototype._render = function(t) {
        this.finishPoly();
        var e = this._geometry
          , i = t.context.supports.uint32Indices;
        e.updateBatches(i),
        e.batchable ? (this.batchDirty !== e.batchDirty && this._populateBatches(),
        this._renderBatched(t)) : (t.batch.flush(),
        this._renderDirect(t))
    }
    ,
    Graphics.prototype._populateBatches = function() {
        var t = this._geometry
          , e = this.blendMode
          , i = t.batches.length;
        this.batchTint = -1,
        this._transformID = -1,
        this.batchDirty = t.batchDirty,
        this.batches.length = i,
        this.vertexData = new Float32Array(t.points);
        for (var r = 0; r < i; r++) {
            var n = t.batches[r]
              , o = n.style.color
              , s = new Float32Array(this.vertexData.buffer,4 * n.attribStart * 2,2 * n.attribSize)
              , a = new Float32Array(t.uvsFloat32.buffer,4 * n.attribStart * 2,2 * n.attribSize)
              , l = {
                vertexData: s,
                blendMode: e,
                indices: new Uint16Array(t.indicesUint16.buffer,2 * n.start,n.size),
                uvs: a,
                _batchRGB: hex2rgb(o),
                _tintRGB: o,
                _texture: n.style.texture,
                alpha: n.style.alpha,
                worldAlpha: 1
            };
            this.batches[r] = l
        }
    }
    ,
    Graphics.prototype._renderBatched = function(t) {
        if (this.batches.length) {
            t.batch.setObjectRenderer(t.plugins[this.pluginName]),
            this.calculateVertices(),
            this.calculateTints();
            for (var e = 0, i = this.batches.length; e < i; e++) {
                var r = this.batches[e];
                r.worldAlpha = this.worldAlpha * r.alpha,
                t.plugins[this.pluginName].render(r)
            }
        }
    }
    ,
    Graphics.prototype._renderDirect = function(t) {
        var e = this._resolveDirectShader(t)
          , i = this._geometry
          , r = this.tint
          , n = this.worldAlpha
          , o = e.uniforms
          , s = i.drawCalls;
        o.translationMatrix = this.transform.worldTransform,
        o.tint[0] = (r >> 16 & 255) / 255 * n,
        o.tint[1] = (r >> 8 & 255) / 255 * n,
        o.tint[2] = (255 & r) / 255 * n,
        o.tint[3] = n,
        t.shader.bind(e),
        t.geometry.bind(i, e),
        t.state.set(this.state);
        for (var a = 0, l = s.length; a < l; a++)
            this._renderDrawCallDirect(t, i.drawCalls[a])
    }
    ,
    Graphics.prototype._renderDrawCallDirect = function(t, e) {
        for (var i = e.texArray, r = e.type, n = e.size, o = e.start, s = i.count, a = 0; a < s; a++)
            t.texture.bind(i.elements[a], a);
        t.geometry.draw(r, n, o)
    }
    ,
    Graphics.prototype._resolveDirectShader = function(t) {
        var e = this.shader
          , i = this.pluginName;
        if (!e) {
            if (!ua[i]) {
                for (var r = t.plugins[i].MAX_TEXTURES, n = new Int32Array(r), o = 0; o < r; o++)
                    n[o] = o;
                var s = {
                    tint: new Float32Array([1, 1, 1, 1]),
                    translationMatrix: new Ce,
                    default: jr.from({
                        uSamplers: n
                    }, !0)
                }
                  , a = t.plugins[i]._shader.program;
                ua[i] = new Tn(a,s)
            }
            e = ua[i]
        }
        return e
    }
    ,
    Graphics.prototype._calculateBounds = function() {
        this.finishPoly();
        var t = this._geometry;
        if (t.graphicsData.length) {
            var e = t.bounds
              , i = e.minX
              , r = e.minY
              , n = e.maxX
              , o = e.maxY;
            this._bounds.addFrame(this.transform, i, r, n, o)
        }
    }
    ,
    Graphics.prototype.containsPoint = function(t) {
        return this.worldTransform.applyInverse(t, Graphics._TEMP_POINT),
        this._geometry.containsPoint(Graphics._TEMP_POINT)
    }
    ,
    Graphics.prototype.calculateTints = function() {
        if (this.batchTint !== this.tint) {
            this.batchTint = this.tint;
            for (var t = hex2rgb(this.tint, ca), e = 0; e < this.batches.length; e++) {
                var i = this.batches[e]
                  , r = i._batchRGB
                  , n = (t[0] * r[0] * 255 << 16) + (t[1] * r[1] * 255 << 8) + (0 | t[2] * r[2] * 255);
                i._tintRGB = (n >> 16) + (65280 & n) + ((255 & n) << 16)
            }
        }
    }
    ,
    Graphics.prototype.calculateVertices = function() {
        var t = this.transform._worldID;
        if (this._transformID !== t) {
            this._transformID = t;
            for (var e = this.transform.worldTransform, i = e.a, r = e.b, n = e.c, o = e.d, s = e.tx, a = e.ty, l = this._geometry.points, c = this.vertexData, u = 0, p = 0; p < l.length; p += 2) {
                var h = l[p]
                  , d = l[p + 1];
                c[u++] = i * h + n * d + s,
                c[u++] = o * d + r * h + a
            }
        }
    }
    ,
    Graphics.prototype.closePath = function() {
        var t = this.currentPath;
        return t && (t.closeStroke = !0,
        this.finishPoly()),
        this
    }
    ,
    Graphics.prototype.setMatrix = function(t) {
        return this._matrix = t,
        this
    }
    ,
    Graphics.prototype.beginHole = function() {
        return this.finishPoly(),
        this._holeMode = !0,
        this
    }
    ,
    Graphics.prototype.endHole = function() {
        return this.finishPoly(),
        this._holeMode = !1,
        this
    }
    ,
    Graphics.prototype.destroy = function(t) {
        this._geometry.refCount--,
        0 === this._geometry.refCount && this._geometry.dispose(),
        this._matrix = null,
        this.currentPath = null,
        this._lineStyle.destroy(),
        this._lineStyle = null,
        this._fillStyle.destroy(),
        this._fillStyle = null,
        this._geometry = null,
        this.shader = null,
        this.vertexData = null,
        this.batches.length = 0,
        this.batches = null,
        la.prototype.destroy.call(this, t)
    }
    ,
    Graphics.nextRoundedRectBehavior = !1,
    Graphics._TEMP_POINT = new me,
    Graphics);
    function Graphics(t) {
        void 0 === t && (t = null);
        var e = la.call(this) || this;
        return e.shader = null,
        e.pluginName = "batch",
        e.currentPath = null,
        e.batches = [],
        e.batchTint = -1,
        e.batchDirty = -1,
        e.vertexData = null,
        e._fillStyle = new ks,
        e._lineStyle = new aa,
        e._matrix = null,
        e._holeMode = !1,
        e.state = gn.for2d(),
        e._geometry = t || new oa,
        e._geometry.refCount++,
        e._transformID = -1,
        e.tint = 16777215,
        e.blendMode = rt.BLEND_MODES.NORMAL,
        e
    }
    var ha = {
        buildPoly: Hs,
        buildCircle: qs,
        buildRectangle: Ys,
        buildRoundedRectangle: zs,
        buildLine: buildLine,
        ArcUtils: Ks,
        BezierUtils: Xs,
        QuadraticUtils: Ws,
        BatchPart: Qs,
        FILL_COMMANDS: Zs,
        BATCH_POOL: $s,
        DRAW_CALL_POOL: ta
    }
      , da = function(t, e) {
        return (da = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    var _a, ya = new me, fa = new Uint16Array([0, 1, 2, 0, 2, 3]), ma = (function __extends$d(t, e) {
        function __() {
            this.constructor = t
        }
        da(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }(Sprite, _a = Ui),
    Sprite.prototype._onTextureUpdate = function() {
        this._textureID = -1,
        this._textureTrimmedID = -1,
        this._cachedTint = 16777215,
        this._width && (this.scale.x = sign(this.scale.x) * this._width / this._texture.orig.width),
        this._height && (this.scale.y = sign(this.scale.y) * this._height / this._texture.orig.height)
    }
    ,
    Sprite.prototype._onAnchorUpdate = function() {
        this._transformID = -1,
        this._transformTrimmedID = -1
    }
    ,
    Sprite.prototype.calculateVertices = function() {
        var t = this._texture;
        if (this._transformID !== this.transform._worldID || this._textureID !== t._updateID) {
            this._textureID !== t._updateID && (this.uvs = this._texture._uvs.uvsFloat32),
            this._transformID = this.transform._worldID,
            this._textureID = t._updateID;
            var e = this.transform.worldTransform
              , i = e.a
              , r = e.b
              , n = e.c
              , o = e.d
              , s = e.tx
              , a = e.ty
              , l = this.vertexData
              , c = t.trim
              , u = t.orig
              , p = this._anchor
              , h = 0
              , d = 0
              , _ = 0
              , y = 0;
            if (_ = c ? (h = (d = c.x - p._x * u.width) + c.width,
            (y = c.y - p._y * u.height) + c.height) : (h = (d = -p._x * u.width) + u.width,
            (y = -p._y * u.height) + u.height),
            l[0] = i * d + n * y + s,
            l[1] = o * y + r * d + a,
            l[2] = i * h + n * y + s,
            l[3] = o * y + r * h + a,
            l[4] = i * h + n * _ + s,
            l[5] = o * _ + r * h + a,
            l[6] = i * d + n * _ + s,
            l[7] = o * _ + r * d + a,
            this._roundPixels)
                for (var f = pt.RESOLUTION, m = 0; m < l.length; ++m)
                    l[m] = Math.round((l[m] * f | 0) / f)
        }
    }
    ,
    Sprite.prototype.calculateTrimmedVertices = function() {
        if (this.vertexTrimmedData) {
            if (this._transformTrimmedID === this.transform._worldID && this._textureTrimmedID === this._texture._updateID)
                return
        } else
            this.vertexTrimmedData = new Float32Array(8);
        this._transformTrimmedID = this.transform._worldID,
        this._textureTrimmedID = this._texture._updateID;
        var t = this._texture
          , e = this.vertexTrimmedData
          , i = t.orig
          , r = this._anchor
          , n = this.transform.worldTransform
          , o = n.a
          , s = n.b
          , a = n.c
          , l = n.d
          , c = n.tx
          , u = n.ty
          , p = -r._x * i.width
          , h = p + i.width
          , d = -r._y * i.height
          , _ = d + i.height;
        e[0] = o * p + a * d + c,
        e[1] = l * d + s * p + u,
        e[2] = o * h + a * d + c,
        e[3] = l * d + s * h + u,
        e[4] = o * h + a * _ + c,
        e[5] = l * _ + s * h + u,
        e[6] = o * p + a * _ + c,
        e[7] = l * _ + s * p + u
    }
    ,
    Sprite.prototype._render = function(t) {
        this.calculateVertices(),
        t.batch.setObjectRenderer(t.plugins[this.pluginName]),
        t.plugins[this.pluginName].render(this)
    }
    ,
    Sprite.prototype._calculateBounds = function() {
        var t = this._texture.trim
          , e = this._texture.orig;
        !t || t.width === e.width && t.height === e.height ? (this.calculateVertices(),
        this._bounds.addQuad(this.vertexData)) : (this.calculateTrimmedVertices(),
        this._bounds.addQuad(this.vertexTrimmedData))
    }
    ,
    Sprite.prototype.getLocalBounds = function(t) {
        return 0 === this.children.length ? (this._localBounds || (this._localBounds = new xe),
        this._localBounds.minX = this._texture.orig.width * -this._anchor._x,
        this._localBounds.minY = this._texture.orig.height * -this._anchor._y,
        this._localBounds.maxX = this._texture.orig.width * (1 - this._anchor._x),
        this._localBounds.maxY = this._texture.orig.height * (1 - this._anchor._y),
        t || (this._localBoundsRect || (this._localBoundsRect = new ge),
        t = this._localBoundsRect),
        this._localBounds.getRectangle(t)) : _a.prototype.getLocalBounds.call(this, t)
    }
    ,
    Sprite.prototype.containsPoint = function(t) {
        this.worldTransform.applyInverse(t, ya);
        var e = this._texture.orig.width
          , i = this._texture.orig.height
          , r = -e * this.anchor.x
          , n = 0;
        return ya.x >= r && ya.x < r + e && (n = -i * this.anchor.y,
        ya.y >= n && ya.y < n + i)
    }
    ,
    Sprite.prototype.destroy = function(t) {
        if (_a.prototype.destroy.call(this, t),
        this._texture.off("update", this._onTextureUpdate, this),
        this._anchor = null,
        "boolean" == typeof t ? t : t && t.texture) {
            var e = "boolean" == typeof t ? t : t && t.baseTexture;
            this._texture.destroy(!!e)
        }
        this._texture = null
    }
    ,
    Sprite.from = function(t, e) {
        return new Sprite(t instanceof Cr ? t : Cr.from(t, e))
    }
    ,
    Object.defineProperty(Sprite.prototype, "roundPixels", {
        get: function() {
            return this._roundPixels
        },
        set: function(t) {
            this._roundPixels !== t && (this._transformID = -1),
            this._roundPixels = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Sprite.prototype, "width", {
        get: function() {
            return Math.abs(this.scale.x) * this._texture.orig.width
        },
        set: function(t) {
            var e = sign(this.scale.x) || 1;
            this.scale.x = e * t / this._texture.orig.width,
            this._width = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Sprite.prototype, "height", {
        get: function() {
            return Math.abs(this.scale.y) * this._texture.orig.height
        },
        set: function(t) {
            var e = sign(this.scale.y) || 1;
            this.scale.y = e * t / this._texture.orig.height,
            this._height = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Sprite.prototype, "anchor", {
        get: function() {
            return this._anchor
        },
        set: function(t) {
            this._anchor.copyFrom(t)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Sprite.prototype, "tint", {
        get: function() {
            return this._tint
        },
        set: function(t) {
            this._tint = t,
            this._tintRGB = (t >> 16) + (65280 & t) + ((255 & t) << 16)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Sprite.prototype, "texture", {
        get: function() {
            return this._texture
        },
        set: function(t) {
            this._texture !== t && (this._texture && this._texture.off("update", this._onTextureUpdate, this),
            this._texture = t || Cr.EMPTY,
            this._cachedTint = 16777215,
            this._textureID = -1,
            this._textureTrimmedID = -1,
            t && (t.baseTexture.valid ? this._onTextureUpdate() : t.once("update", this._onTextureUpdate, this)))
        },
        enumerable: !1,
        configurable: !0
    }),
    Sprite);
    function Sprite(t) {
        var e = _a.call(this) || this;
        return e._anchor = new Ie(e._onAnchorUpdate,e,t ? t.defaultAnchor.x : 0,t ? t.defaultAnchor.y : 0),
        e._texture = null,
        e._width = 0,
        e._height = 0,
        e._tint = null,
        e._tintRGB = null,
        e.tint = 16777215,
        e.blendMode = rt.BLEND_MODES.NORMAL,
        e._cachedTint = 16777215,
        e.uvs = null,
        e.texture = t || Cr.EMPTY,
        e.vertexData = new Float32Array(8),
        e.vertexTrimmedData = null,
        e._transformID = -1,
        e._textureID = -1,
        e._transformTrimmedID = -1,
        e._textureTrimmedID = -1,
        e.indices = fa,
        e.pluginName = "batch",
        e.isSprite = !0,
        e._roundPixels = pt.ROUND_PIXELS,
        e
    }
    var Ta, ga = function(t, e) {
        return (ga = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    rt.TEXT_GRADIENT = void 0,
    (Ta = rt.TEXT_GRADIENT || (rt.TEXT_GRADIENT = {}))[Ta.LINEAR_VERTICAL = 0] = "LINEAR_VERTICAL";
    var va = {
        align: "left",
        breakWords: !(Ta[Ta.LINEAR_HORIZONTAL = 1] = "LINEAR_HORIZONTAL"),
        dropShadow: !1,
        dropShadowAlpha: 1,
        dropShadowAngle: Math.PI / 6,
        dropShadowBlur: 0,
        dropShadowColor: "black",
        dropShadowDistance: 5,
        fill: "black",
        fillGradientType: rt.TEXT_GRADIENT.LINEAR_VERTICAL,
        fillGradientStops: [],
        fontFamily: "Arial",
        fontSize: 26,
        fontStyle: "normal",
        fontVariant: "normal",
        fontWeight: "normal",
        letterSpacing: 0,
        lineHeight: 0,
        lineJoin: "miter",
        miterLimit: 10,
        padding: 0,
        stroke: "black",
        strokeThickness: 0,
        textBaseline: "alphabetic",
        trim: !1,
        whiteSpace: "pre",
        wordWrap: !1,
        wordWrapWidth: 100,
        leading: 0
    }
      , Ea = ["serif", "sans-serif", "monospace", "cursive", "fantasy", "system-ui"]
      , Sa = (TextStyle.prototype.clone = function() {
        var t = {};
        return deepCopyProperties(t, this, va),
        new TextStyle(t)
    }
    ,
    TextStyle.prototype.reset = function() {
        deepCopyProperties(this, va, va)
    }
    ,
    Object.defineProperty(TextStyle.prototype, "align", {
        get: function() {
            return this._align
        },
        set: function(t) {
            this._align !== t && (this._align = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "breakWords", {
        get: function() {
            return this._breakWords
        },
        set: function(t) {
            this._breakWords !== t && (this._breakWords = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "dropShadow", {
        get: function() {
            return this._dropShadow
        },
        set: function(t) {
            this._dropShadow !== t && (this._dropShadow = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "dropShadowAlpha", {
        get: function() {
            return this._dropShadowAlpha
        },
        set: function(t) {
            this._dropShadowAlpha !== t && (this._dropShadowAlpha = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "dropShadowAngle", {
        get: function() {
            return this._dropShadowAngle
        },
        set: function(t) {
            this._dropShadowAngle !== t && (this._dropShadowAngle = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "dropShadowBlur", {
        get: function() {
            return this._dropShadowBlur
        },
        set: function(t) {
            this._dropShadowBlur !== t && (this._dropShadowBlur = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "dropShadowColor", {
        get: function() {
            return this._dropShadowColor
        },
        set: function(t) {
            var e = getColor(t);
            this._dropShadowColor !== e && (this._dropShadowColor = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "dropShadowDistance", {
        get: function() {
            return this._dropShadowDistance
        },
        set: function(t) {
            this._dropShadowDistance !== t && (this._dropShadowDistance = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "fill", {
        get: function() {
            return this._fill
        },
        set: function(t) {
            var e = getColor(t);
            this._fill !== e && (this._fill = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "fillGradientType", {
        get: function() {
            return this._fillGradientType
        },
        set: function(t) {
            this._fillGradientType !== t && (this._fillGradientType = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "fillGradientStops", {
        get: function() {
            return this._fillGradientStops
        },
        set: function(t) {
            !function areArraysEqual(t, e) {
                if (!Array.isArray(t) || !Array.isArray(e))
                    return !1;
                if (t.length !== e.length)
                    return !1;
                for (var i = 0; i < t.length; ++i)
                    if (t[i] !== e[i])
                        return !1;
                return !0
            }(this._fillGradientStops, t) && (this._fillGradientStops = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "fontFamily", {
        get: function() {
            return this._fontFamily
        },
        set: function(t) {
            this.fontFamily !== t && (this._fontFamily = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "fontSize", {
        get: function() {
            return this._fontSize
        },
        set: function(t) {
            this._fontSize !== t && (this._fontSize = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "fontStyle", {
        get: function() {
            return this._fontStyle
        },
        set: function(t) {
            this._fontStyle !== t && (this._fontStyle = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "fontVariant", {
        get: function() {
            return this._fontVariant
        },
        set: function(t) {
            this._fontVariant !== t && (this._fontVariant = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "fontWeight", {
        get: function() {
            return this._fontWeight
        },
        set: function(t) {
            this._fontWeight !== t && (this._fontWeight = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "letterSpacing", {
        get: function() {
            return this._letterSpacing
        },
        set: function(t) {
            this._letterSpacing !== t && (this._letterSpacing = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "lineHeight", {
        get: function() {
            return this._lineHeight
        },
        set: function(t) {
            this._lineHeight !== t && (this._lineHeight = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "leading", {
        get: function() {
            return this._leading
        },
        set: function(t) {
            this._leading !== t && (this._leading = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "lineJoin", {
        get: function() {
            return this._lineJoin
        },
        set: function(t) {
            this._lineJoin !== t && (this._lineJoin = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "miterLimit", {
        get: function() {
            return this._miterLimit
        },
        set: function(t) {
            this._miterLimit !== t && (this._miterLimit = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "padding", {
        get: function() {
            return this._padding
        },
        set: function(t) {
            this._padding !== t && (this._padding = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "stroke", {
        get: function() {
            return this._stroke
        },
        set: function(t) {
            var e = getColor(t);
            this._stroke !== e && (this._stroke = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "strokeThickness", {
        get: function() {
            return this._strokeThickness
        },
        set: function(t) {
            this._strokeThickness !== t && (this._strokeThickness = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "textBaseline", {
        get: function() {
            return this._textBaseline
        },
        set: function(t) {
            this._textBaseline !== t && (this._textBaseline = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "trim", {
        get: function() {
            return this._trim
        },
        set: function(t) {
            this._trim !== t && (this._trim = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "whiteSpace", {
        get: function() {
            return this._whiteSpace
        },
        set: function(t) {
            this._whiteSpace !== t && (this._whiteSpace = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "wordWrap", {
        get: function() {
            return this._wordWrap
        },
        set: function(t) {
            this._wordWrap !== t && (this._wordWrap = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "wordWrapWidth", {
        get: function() {
            return this._wordWrapWidth
        },
        set: function(t) {
            this._wordWrapWidth !== t && (this._wordWrapWidth = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    TextStyle.prototype.toFontString = function() {
        var t = "number" == typeof this.fontSize ? this.fontSize + "px" : this.fontSize
          , e = this.fontFamily;
        Array.isArray(this.fontFamily) || (e = this.fontFamily.split(","));
        for (var i = e.length - 1; 0 <= i; i--) {
            var r = e[i].trim();
            !/([\"\'])[^\'\"]+\1/.test(r) && Ea.indexOf(r) < 0 && (r = '"' + r + '"'),
            e[i] = r
        }
        return this.fontStyle + " " + this.fontVariant + " " + this.fontWeight + " " + t + " " + e.join(",")
    }
    ,
    TextStyle);
    function TextStyle(t) {
        this.styleID = 0,
        this.reset(),
        deepCopyProperties(this, t, t)
    }
    function getSingleColor(t) {
        return "number" == typeof t ? hex2string(t) : ("string" == typeof t && 0 === t.indexOf("0x") && (t = t.replace("0x", "#")),
        t)
    }
    function getColor(t) {
        if (Array.isArray(t)) {
            for (var e = 0; e < t.length; ++e)
                t[e] = getSingleColor(t[e]);
            return t
        }
        return getSingleColor(t)
    }
    function deepCopyProperties(t, e, i) {
        for (var r in i)
            Array.isArray(e[r]) ? t[r] = e[r].slice() : t[r] = e[r]
    }
    var ba = (TextMetrics.measureText = function(t, e, i, r) {
        void 0 === r && (r = TextMetrics._canvas),
        i = null == i ? e.wordWrap : i;
        var n = e.toFontString()
          , o = TextMetrics.measureFont(n);
        0 === o.fontSize && (o.fontSize = e.fontSize,
        o.ascent = e.fontSize);
        var s = r.getContext("2d");
        s.font = n;
        for (var a = (i ? TextMetrics.wordWrap(t, e, r) : t).split(/(?:\r\n|\r|\n)/), l = new Array(a.length), c = 0, u = 0; u < a.length; u++) {
            var p = s.measureText(a[u]).width + (a[u].length - 1) * e.letterSpacing;
            l[u] = p,
            c = Math.max(c, p)
        }
        var h = c + e.strokeThickness;
        e.dropShadow && (h += e.dropShadowDistance);
        var d = e.lineHeight || o.fontSize + e.strokeThickness
          , _ = Math.max(d, o.fontSize + e.strokeThickness) + (a.length - 1) * (d + e.leading);
        return e.dropShadow && (_ += e.dropShadowDistance),
        new TextMetrics(t,e,h,_,a,l,d + e.leading,c,o)
    }
    ,
    TextMetrics.wordWrap = function(t, e, i) {
        void 0 === i && (i = TextMetrics._canvas);
        for (var r = i.getContext("2d"), n = 0, o = "", s = "", a = Object.create(null), l = e.letterSpacing, c = e.whiteSpace, u = TextMetrics.collapseSpaces(c), p = TextMetrics.collapseNewlines(c), h = !u, d = e.wordWrapWidth + l, _ = TextMetrics.tokenize(t), y = 0; y < _.length; y++) {
            var f = _[y];
            if (TextMetrics.isNewline(f)) {
                if (!p) {
                    s += TextMetrics.addLine(o),
                    h = !u,
                    o = "",
                    n = 0;
                    continue
                }
                f = " "
            }
            if (u) {
                var m = TextMetrics.isBreakingSpace(f)
                  , T = TextMetrics.isBreakingSpace(o[o.length - 1]);
                if (m && T)
                    continue
            }
            var g = TextMetrics.getFromCache(f, l, a, r);
            if (d < g)
                if ("" !== o && (s += TextMetrics.addLine(o),
                o = "",
                n = 0),
                TextMetrics.canBreakWords(f, e.breakWords))
                    for (var v = TextMetrics.wordWrapSplit(f), E = 0; E < v.length; E++) {
                        for (var S = v[E], b = 1; v[E + b]; ) {
                            var I = v[E + b]
                              , C = S[S.length - 1];
                            if (TextMetrics.canBreakChars(C, I, f, E, e.breakWords))
                                break;
                            S += I,
                            b++
                        }
                        E += S.length - 1;
                        var U = TextMetrics.getFromCache(S, l, a, r);
                        d < U + n && (s += TextMetrics.addLine(o),
                        h = !1,
                        o = "",
                        n = 0),
                        o += S,
                        n += U
                    }
                else {
                    0 < o.length && (s += TextMetrics.addLine(o),
                    o = "",
                    n = 0);
                    var A = y === _.length - 1;
                    s += TextMetrics.addLine(f, !A),
                    h = !1,
                    o = "",
                    n = 0
                }
            else
                d < g + n && (h = !1,
                s += TextMetrics.addLine(o),
                o = "",
                n = 0),
                (0 < o.length || !TextMetrics.isBreakingSpace(f) || h) && (o += f,
                n += g)
        }
        return s += TextMetrics.addLine(o, !1)
    }
    ,
    TextMetrics.addLine = function(t, e) {
        return void 0 === e && (e = !0),
        t = TextMetrics.trimRight(t),
        t = e ? t + "\n" : t
    }
    ,
    TextMetrics.getFromCache = function(t, e, i, r) {
        var n = i[t];
        if ("number" != typeof n) {
            var o = t.length * e;
            n = r.measureText(t).width + o,
            i[t] = n
        }
        return n
    }
    ,
    TextMetrics.collapseSpaces = function(t) {
        return "normal" === t || "pre-line" === t
    }
    ,
    TextMetrics.collapseNewlines = function(t) {
        return "normal" === t
    }
    ,
    TextMetrics.trimRight = function(t) {
        if ("string" != typeof t)
            return "";
        for (var e = t.length - 1; 0 <= e; e--) {
            var i = t[e];
            if (!TextMetrics.isBreakingSpace(i))
                break;
            t = t.slice(0, -1)
        }
        return t
    }
    ,
    TextMetrics.isNewline = function(t) {
        return "string" == typeof t && 0 <= TextMetrics._newlines.indexOf(t.charCodeAt(0))
    }
    ,
    TextMetrics.isBreakingSpace = function(t, e) {
        return "string" == typeof t && 0 <= TextMetrics._breakingSpaces.indexOf(t.charCodeAt(0))
    }
    ,
    TextMetrics.tokenize = function(t) {
        var e = []
          , i = "";
        if ("string" != typeof t)
            return e;
        for (var r = 0; r < t.length; r++) {
            var n = t[r]
              , o = t[r + 1];
            TextMetrics.isBreakingSpace(n, o) || TextMetrics.isNewline(n) ? ("" !== i && (e.push(i),
            i = ""),
            e.push(n)) : i += n
        }
        return "" !== i && e.push(i),
        e
    }
    ,
    TextMetrics.canBreakWords = function(t, e) {
        return e
    }
    ,
    TextMetrics.canBreakChars = function(t, e, i, r, n) {
        return !0
    }
    ,
    TextMetrics.wordWrapSplit = function(t) {
        return t.split("")
    }
    ,
    TextMetrics.measureFont = function(t) {
        if (TextMetrics._fonts[t])
            return TextMetrics._fonts[t];
        var e = {
            ascent: 0,
            descent: 0,
            fontSize: 0
        }
          , i = TextMetrics._canvas
          , r = TextMetrics._context;
        r.font = t;
        var n = TextMetrics.METRICS_STRING + TextMetrics.BASELINE_SYMBOL
          , o = Math.ceil(r.measureText(n).width)
          , s = Math.ceil(r.measureText(TextMetrics.BASELINE_SYMBOL).width)
          , a = Math.ceil(TextMetrics.HEIGHT_MULTIPLIER * s);
        s = s * TextMetrics.BASELINE_MULTIPLIER | 0,
        i.width = o,
        i.height = a,
        r.fillStyle = "#f00",
        r.fillRect(0, 0, o, a),
        r.font = t,
        r.textBaseline = "alphabetic",
        r.fillStyle = "#000",
        r.fillText(n, 0, s);
        var l = r.getImageData(0, 0, o, a).data
          , c = l.length
          , u = 4 * o
          , p = 0
          , h = 0
          , d = !1;
        for (p = 0; p < s; ++p) {
            for (var _ = 0; _ < u; _ += 4)
                if (255 !== l[h + _]) {
                    d = !0;
                    break
                }
            if (d)
                break;
            h += u
        }
        for (e.ascent = s - p,
        h = c - u,
        d = !1,
        p = a; s < p; --p) {
            for (_ = 0; _ < u; _ += 4)
                if (255 !== l[h + _]) {
                    d = !0;
                    break
                }
            if (d)
                break;
            h -= u
        }
        return e.descent = p - s,
        e.fontSize = e.ascent + e.descent,
        TextMetrics._fonts[t] = e
    }
    ,
    TextMetrics.clearMetrics = function(t) {
        void 0 === t && (t = ""),
        t ? delete TextMetrics._fonts[t] : TextMetrics._fonts = {}
    }
    ,
    Object.defineProperty(TextMetrics, "_canvas", {
        get: function() {
            if (!TextMetrics.__canvas) {
                var e = void 0;
                try {
                    var t = new OffscreenCanvas(0,0)
                      , i = t.getContext("2d");
                    if (i && i.measureText)
                        return TextMetrics.__canvas = t;
                    e = document.createElement("canvas")
                } catch (t) {
                    e = document.createElement("canvas")
                }
                e.width = e.height = 10,
                TextMetrics.__canvas = e
            }
            return TextMetrics.__canvas
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextMetrics, "_context", {
        get: function() {
            return TextMetrics.__context || (TextMetrics.__context = TextMetrics._canvas.getContext("2d")),
            TextMetrics.__context
        },
        enumerable: !1,
        configurable: !0
    }),
    TextMetrics);
    function TextMetrics(t, e, i, r, n, o, s, a, l) {
        this.text = t,
        this.style = e,
        this.width = i,
        this.height = r,
        this.lines = n,
        this.lineWidths = o,
        this.lineHeight = s,
        this.maxLineWidth = a,
        this.fontProperties = l
    }
    ba._fonts = {},
    ba.METRICS_STRING = "|ÉqÅ",
    ba.BASELINE_SYMBOL = "M",
    ba.BASELINE_MULTIPLIER = 1.4,
    ba.HEIGHT_MULTIPLIER = 2,
    ba._newlines = [10, 13];
    var Ia, Ca = {
        texture: !0,
        children: !(ba._breakingSpaces = [9, 32, 8192, 8193, 8194, 8195, 8196, 8197, 8198, 8200, 8201, 8202, 8287, 12288]),
        baseTexture: !0
    }, Ua = (function __extends$c(t, e) {
        function __() {
            this.constructor = t
        }
        ga(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }(Text, Ia = ma),
    Text.prototype.updateText = function(t) {
        var e = this._style;
        if (this.localStyleID !== e.styleID && (this.dirty = !0,
        this.localStyleID = e.styleID),
        this.dirty || !t) {
            this._font = this._style.toFontString();
            var i, r, n = this.context, o = ba.measureText(this._text || " ", this._style, this._style.wordWrap, this.canvas), s = o.width, a = o.height, l = o.lines, c = o.lineHeight, u = o.lineWidths, p = o.maxLineWidth, h = o.fontProperties;
            this.canvas.width = Math.ceil(Math.ceil(Math.max(1, s) + 2 * e.padding) * this._resolution),
            this.canvas.height = Math.ceil(Math.ceil(Math.max(1, a) + 2 * e.padding) * this._resolution),
            n.scale(this._resolution, this._resolution),
            n.clearRect(0, 0, this.canvas.width, this.canvas.height),
            n.font = this._font,
            n.lineWidth = e.strokeThickness,
            n.textBaseline = e.textBaseline,
            n.lineJoin = e.lineJoin,
            n.miterLimit = e.miterLimit;
            for (var d = e.dropShadow ? 2 : 1, _ = 0; _ < d; ++_) {
                var y = e.dropShadow && 0 === _
                  , f = y ? Math.ceil(Math.max(1, a) + 2 * e.padding) : 0
                  , m = f * this._resolution;
                if (y) {
                    n.fillStyle = "black",
                    n.strokeStyle = "black";
                    var T = e.dropShadowColor
                      , g = hex2rgb("number" == typeof T ? T : string2hex(T))
                      , v = e.dropShadowBlur * this._resolution
                      , E = e.dropShadowDistance * this._resolution;
                    n.shadowColor = "rgba(" + 255 * g[0] + "," + 255 * g[1] + "," + 255 * g[2] + "," + e.dropShadowAlpha + ")",
                    n.shadowBlur = v,
                    n.shadowOffsetX = Math.cos(e.dropShadowAngle) * E,
                    n.shadowOffsetY = Math.sin(e.dropShadowAngle) * E + m
                } else
                    n.fillStyle = this._generateFillStyle(e, l, o),
                    n.strokeStyle = e.stroke,
                    n.shadowColor = "black",
                    n.shadowBlur = 0,
                    n.shadowOffsetX = 0,
                    n.shadowOffsetY = 0;
                var S = (c - h.fontSize) / 2;
                (!Text.nextLineHeightBehavior || c - h.fontSize < 0) && (S = 0);
                for (var b = 0; b < l.length; b++)
                    i = e.strokeThickness / 2,
                    r = e.strokeThickness / 2 + b * c + h.ascent + S,
                    "right" === e.align ? i += p - u[b] : "center" === e.align && (i += (p - u[b]) / 2),
                    e.stroke && e.strokeThickness && this.drawLetterSpacing(l[b], i + e.padding, r + e.padding - f, !0),
                    e.fill && this.drawLetterSpacing(l[b], i + e.padding, r + e.padding - f)
            }
            this.updateTexture()
        }
    }
    ,
    Text.prototype.drawLetterSpacing = function(t, e, i, r) {
        void 0 === r && (r = !1);
        var n = this._style.letterSpacing
          , o = Text.experimentalLetterSpacing && ("letterSpacing"in CanvasRenderingContext2D.prototype || "textLetterSpacing"in CanvasRenderingContext2D.prototype);
        if (0 === n || o)
            return o && (this.context.letterSpacing = n,
            this.context.textLetterSpacing = n),
            void (r ? this.context.strokeText(t, e, i) : this.context.fillText(t, e, i));
        for (var s = e, a = Array.from ? Array.from(t) : t.split(""), l = this.context.measureText(t).width, c = 0, u = 0; u < a.length; ++u) {
            var p = a[u];
            r ? this.context.strokeText(p, s, i) : this.context.fillText(p, s, i);
            for (var h = "", d = u + 1; d < a.length; ++d)
                h += a[d];
            s += l - (c = this.context.measureText(h).width) + n,
            l = c
        }
    }
    ,
    Text.prototype.updateTexture = function() {
        var t = this.canvas;
        if (this._style.trim) {
            var e = trimCanvas(t);
            e.data && (t.width = e.width,
            t.height = e.height,
            this.context.putImageData(e.data, 0, 0))
        }
        var i = this._texture
          , r = this._style
          , n = r.trim ? 0 : r.padding
          , o = i.baseTexture;
        i.trim.width = i._frame.width = t.width / this._resolution,
        i.trim.height = i._frame.height = t.height / this._resolution,
        i.trim.x = -n,
        i.trim.y = -n,
        i.orig.width = i._frame.width - 2 * n,
        i.orig.height = i._frame.height - 2 * n,
        this._onTextureUpdate(),
        o.setRealSize(t.width, t.height, this._resolution),
        i.updateUvs(),
        this._recursivePostUpdateTransform(),
        this.dirty = !1
    }
    ,
    Text.prototype._render = function(t) {
        this._autoResolution && this._resolution !== t.resolution && (this._resolution = t.resolution,
        this.dirty = !0),
        this.updateText(!0),
        Ia.prototype._render.call(this, t)
    }
    ,
    Text.prototype.getLocalBounds = function(t) {
        return this.updateText(!0),
        Ia.prototype.getLocalBounds.call(this, t)
    }
    ,
    Text.prototype._calculateBounds = function() {
        this.updateText(!0),
        this.calculateVertices(),
        this._bounds.addQuad(this.vertexData)
    }
    ,
    Text.prototype._generateFillStyle = function(t, e, i) {
        var r, n = t.fill;
        if (!Array.isArray(n))
            return n;
        if (1 === n.length)
            return n[0];
        var o = t.dropShadow ? t.dropShadowDistance : 0
          , s = t.padding || 0
          , a = this.canvas.width / this._resolution - o - 2 * s
          , l = this.canvas.height / this._resolution - o - 2 * s
          , c = n.slice()
          , u = t.fillGradientStops.slice();
        if (!u.length)
            for (var p = c.length + 1, h = 1; h < p; ++h)
                u.push(h / p);
        if (c.unshift(n[0]),
        u.unshift(0),
        c.push(n[n.length - 1]),
        u.push(1),
        t.fillGradientType === rt.TEXT_GRADIENT.LINEAR_VERTICAL) {
            r = this.context.createLinearGradient(a / 2, s, a / 2, l + s);
            var d = i.fontProperties.fontSize + t.strokeThickness;
            for (h = 0; h < e.length; h++) {
                var _ = i.lineHeight * (h - 1) + d
                  , y = i.lineHeight * h
                  , f = y;
                0 < h && y < _ && (f = (y + _) / 2);
                var m = y + d
                  , T = i.lineHeight * (h + 1)
                  , g = m;
                h + 1 < e.length && T < m && (g = (m + T) / 2);
                for (var v = (g - f) / l, E = 0; E < c.length; E++) {
                    var S = 0;
                    S = "number" == typeof u[E] ? u[E] : E / c.length;
                    var b = Math.min(1, Math.max(0, f / l + S * v));
                    b = Number(b.toFixed(5)),
                    r.addColorStop(b, c[E])
                }
            }
        } else {
            r = this.context.createLinearGradient(s, l / 2, a + s, l / 2);
            var I = c.length + 1
              , C = 1;
            for (h = 0; h < c.length; h++) {
                var U = void 0;
                U = "number" == typeof u[h] ? u[h] : C / I,
                r.addColorStop(U, c[h]),
                C++
            }
        }
        return r
    }
    ,
    Text.prototype.destroy = function(t) {
        "boolean" == typeof t && (t = {
            children: t
        }),
        t = Object.assign({}, Ca, t),
        Ia.prototype.destroy.call(this, t),
        this._ownCanvas && (this.canvas.height = this.canvas.width = 0),
        this.context = null,
        this.canvas = null,
        this._style = null
    }
    ,
    Object.defineProperty(Text.prototype, "width", {
        get: function() {
            return this.updateText(!0),
            Math.abs(this.scale.x) * this._texture.orig.width
        },
        set: function(t) {
            this.updateText(!0);
            var e = sign(this.scale.x) || 1;
            this.scale.x = e * t / this._texture.orig.width,
            this._width = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Text.prototype, "height", {
        get: function() {
            return this.updateText(!0),
            Math.abs(this.scale.y) * this._texture.orig.height
        },
        set: function(t) {
            this.updateText(!0);
            var e = sign(this.scale.y) || 1;
            this.scale.y = e * t / this._texture.orig.height,
            this._height = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Text.prototype, "style", {
        get: function() {
            return this._style
        },
        set: function(t) {
            t = t || {},
            this._style = t instanceof Sa ? t : new Sa(t),
            this.localStyleID = -1,
            this.dirty = !0
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Text.prototype, "text", {
        get: function() {
            return this._text
        },
        set: function(t) {
            t = String(null == t ? "" : t),
            this._text !== t && (this._text = t,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Text.prototype, "resolution", {
        get: function() {
            return this._resolution
        },
        set: function(t) {
            this._autoResolution = !1,
            this._resolution !== t && (this._resolution = t,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Text.nextLineHeightBehavior = !1,
    Text.experimentalLetterSpacing = !1,
    Text);
    function Text(t, e, i) {
        var r = this
          , n = !1;
        i || (i = document.createElement("canvas"),
        n = !0),
        i.width = 3,
        i.height = 3;
        var o = Cr.from(i);
        return o.orig = new ge,
        o.trim = new ge,
        (r = Ia.call(this, o) || this)._ownCanvas = n,
        r.canvas = i,
        r.context = r.canvas.getContext("2d"),
        r._resolution = pt.RESOLUTION,
        r._autoResolution = !0,
        r._text = null,
        r._style = null,
        r._styleListener = null,
        r._font = "",
        r.text = t,
        r.style = e,
        r.localStyleID = -1,
        r
    }
    pt.UPLOADS_PER_FRAME = 4;
    var Aa = function(t, e) {
        return (Aa = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    var wa = (CountLimiter.prototype.beginFrame = function() {
        this.itemsLeft = this.maxItemsPerFrame
    }
    ,
    CountLimiter.prototype.allowedToUpload = function() {
        return 0 < this.itemsLeft--
    }
    ,
    CountLimiter);
    function CountLimiter(t) {
        this.maxItemsPerFrame = t,
        this.itemsLeft = 0
    }
    function findMultipleBaseTextures(t, e) {
        var i = !1;
        if (t && t._textures && t._textures.length)
            for (var r = 0; r < t._textures.length; r++)
                if (t._textures[r]instanceof Cr) {
                    var n = t._textures[r].baseTexture;
                    -1 === e.indexOf(n) && (e.push(n),
                    i = !0)
                }
        return i
    }
    function findBaseTexture(t, e) {
        if (t.baseTexture instanceof Qi) {
            var i = t.baseTexture;
            return -1 === e.indexOf(i) && e.push(i),
            !0
        }
        return !1
    }
    function findTexture(t, e) {
        if (t._texture && t._texture instanceof Cr) {
            var i = t._texture.baseTexture;
            return -1 === e.indexOf(i) && e.push(i),
            !0
        }
        return !1
    }
    function drawText(t, e) {
        return e instanceof Ua && (e.updateText(!0),
        !0)
    }
    function calculateTextStyle(t, e) {
        if (e instanceof Sa) {
            var i = e.toFontString();
            return ba.measureFont(i),
            !0
        }
        return !1
    }
    function findText(t, e) {
        if (t instanceof Ua) {
            -1 === e.indexOf(t.style) && e.push(t.style),
            -1 === e.indexOf(t) && e.push(t);
            var i = t._texture.baseTexture;
            return -1 === e.indexOf(i) && e.push(i),
            !0
        }
        return !1
    }
    function findTextStyle(t, e) {
        return t instanceof Sa && (-1 === e.indexOf(t) && e.push(t),
        !0)
    }
    var Oa = (BasePrepare.prototype.upload = function(t, e) {
        "function" == typeof t && (e = t,
        t = null),
        t && this.add(t),
        this.queue.length ? (e && this.completes.push(e),
        this.ticking || (this.ticking = !0,
        Pi.system.addOnce(this.tick, this, rt.UPDATE_PRIORITY.UTILITY))) : e && e()
    }
    ,
    BasePrepare.prototype.tick = function() {
        setTimeout(this.delayedTick, 0)
    }
    ,
    BasePrepare.prototype.prepareItems = function() {
        for (this.limiter.beginFrame(); this.queue.length && this.limiter.allowedToUpload(); ) {
            var t = this.queue[0]
              , e = !1;
            if (t && !t._destroyed)
                for (var i = 0, r = this.uploadHooks.length; i < r; i++)
                    if (this.uploadHooks[i](this.uploadHookHelper, t)) {
                        this.queue.shift(),
                        e = !0;
                        break
                    }
            e || this.queue.shift()
        }
        if (this.queue.length)
            Pi.system.addOnce(this.tick, this, rt.UPDATE_PRIORITY.UTILITY);
        else {
            this.ticking = !1;
            var n = this.completes.slice(0);
            for (i = this.completes.length = 0,
            r = n.length; i < r; i++)
                n[i]()
        }
    }
    ,
    BasePrepare.prototype.registerFindHook = function(t) {
        return t && this.addHooks.push(t),
        this
    }
    ,
    BasePrepare.prototype.registerUploadHook = function(t) {
        return t && this.uploadHooks.push(t),
        this
    }
    ,
    BasePrepare.prototype.add = function(t) {
        for (var e = 0, i = this.addHooks.length; e < i && !this.addHooks[e](t, this.queue); e++)
            ;
        if (t instanceof Ui)
            for (e = t.children.length - 1; 0 <= e; e--)
                this.add(t.children[e]);
        return this
    }
    ,
    BasePrepare.prototype.destroy = function() {
        this.ticking && Pi.system.remove(this.tick, this),
        this.ticking = !1,
        this.addHooks = null,
        this.uploadHooks = null,
        this.renderer = null,
        this.completes = null,
        this.queue = null,
        this.limiter = null,
        this.uploadHookHelper = null
    }
    ,
    BasePrepare);
    function BasePrepare(t) {
        var e = this;
        this.limiter = new wa(pt.UPLOADS_PER_FRAME),
        this.renderer = t,
        this.uploadHookHelper = null,
        this.queue = [],
        this.addHooks = [],
        this.uploadHooks = [],
        this.completes = [],
        this.ticking = !1,
        this.delayedTick = function() {
            e.queue && e.prepareItems()
        }
        ,
        this.registerFindHook(findText),
        this.registerFindHook(findTextStyle),
        this.registerFindHook(findMultipleBaseTextures),
        this.registerFindHook(findBaseTexture),
        this.registerFindHook(findTexture),
        this.registerUploadHook(drawText),
        this.registerUploadHook(calculateTextStyle)
    }
    function uploadBaseTextures(t, e) {
        return e instanceof Qi && (e._glTextures[t.CONTEXT_UID] || t.texture.bind(e),
        !0)
    }
    function uploadGraphics(t, e) {
        if (!(e instanceof pa))
            return !1;
        var i = e.geometry;
        e.finishPoly(),
        i.updateBatches();
        for (var r = i.batches, n = 0; n < r.length; n++) {
            var o = r[n].style.texture;
            o && uploadBaseTextures(t, o.baseTexture)
        }
        return i.batchable || t.geometry.bind(i, e._resolveDirectShader(t)),
        !0
    }
    function findGraphics(t, e) {
        return t instanceof pa && (e.push(t),
        !0)
    }
    var Ra, Pa = (function __extends$b(t, e) {
        function __() {
            this.constructor = t
        }
        Aa(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }(Prepare, Ra = Oa),
    Prepare);
    function Prepare(t) {
        var e = Ra.call(this, t) || this;
        return e.uploadHookHelper = e.renderer,
        e.registerFindHook(findGraphics),
        e.registerUploadHook(uploadBaseTextures),
        e.registerUploadHook(uploadGraphics),
        e
    }
    var Da = (TimeLimiter.prototype.beginFrame = function() {
        this.frameStart = Date.now()
    }
    ,
    TimeLimiter.prototype.allowedToUpload = function() {
        return Date.now() - this.frameStart < this.maxMilliseconds
    }
    ,
    TimeLimiter);
    function TimeLimiter(t) {
        this.maxMilliseconds = t,
        this.frameStart = 0
    }
    var La = (Spritesheet.prototype._updateResolution = function(t) {
        void 0 === t && (t = null);
        var e = this.data.meta.scale
          , i = getResolutionOfUrl(t, null);
        return null === i && (i = void 0 !== e ? parseFloat(e) : 1),
        1 !== i && this.baseTexture.setResolution(i),
        i
    }
    ,
    Spritesheet.prototype.parse = function(t) {
        this._batchIndex = 0,
        this._callback = t,
        this._frameKeys.length <= Spritesheet.BATCH_SIZE ? (this._processFrames(0),
        this._processAnimations(),
        this._parseComplete()) : this._nextBatch()
    }
    ,
    Spritesheet.prototype._processFrames = function(t) {
        for (var e = t, i = Spritesheet.BATCH_SIZE; e - t < i && e < this._frameKeys.length; ) {
            var r = this._frameKeys[e]
              , n = this._frames[r]
              , o = n.frame;
            if (o) {
                var s = null
                  , a = null
                  , l = !1 !== n.trimmed && n.sourceSize ? n.sourceSize : n.frame
                  , c = new ge(0,0,Math.floor(l.w) / this.resolution,Math.floor(l.h) / this.resolution);
                s = n.rotated ? new ge(Math.floor(o.x) / this.resolution,Math.floor(o.y) / this.resolution,Math.floor(o.h) / this.resolution,Math.floor(o.w) / this.resolution) : new ge(Math.floor(o.x) / this.resolution,Math.floor(o.y) / this.resolution,Math.floor(o.w) / this.resolution,Math.floor(o.h) / this.resolution),
                !1 !== n.trimmed && n.spriteSourceSize && (a = new ge(Math.floor(n.spriteSourceSize.x) / this.resolution,Math.floor(n.spriteSourceSize.y) / this.resolution,Math.floor(o.w) / this.resolution,Math.floor(o.h) / this.resolution)),
                this.textures[r] = new Cr(this.baseTexture,s,c,a,n.rotated ? 2 : 0,n.anchor),
                Cr.addToCache(this.textures[r], r)
            }
            e++
        }
    }
    ,
    Spritesheet.prototype._processAnimations = function() {
        var t = this.data.animations || {};
        for (var e in t) {
            this.animations[e] = [];
            for (var i = 0; i < t[e].length; i++) {
                var r = t[e][i];
                this.animations[e].push(this.textures[r])
            }
        }
    }
    ,
    Spritesheet.prototype._parseComplete = function() {
        var t = this._callback;
        this._callback = null,
        this._batchIndex = 0,
        t.call(this, this.textures)
    }
    ,
    Spritesheet.prototype._nextBatch = function() {
        var t = this;
        this._processFrames(this._batchIndex * Spritesheet.BATCH_SIZE),
        this._batchIndex++,
        setTimeout(function() {
            t._batchIndex * Spritesheet.BATCH_SIZE < t._frameKeys.length ? t._nextBatch() : (t._processAnimations(),
            t._parseComplete())
        }, 0)
    }
    ,
    Spritesheet.prototype.destroy = function(t) {
        var e;
        for (var i in void 0 === t && (t = !1),
        this.textures)
            this.textures[i].destroy();
        this._frames = null,
        this._frameKeys = null,
        this.data = null,
        this.textures = null,
        t && (null === (e = this._texture) || void 0 === e || e.destroy(),
        this.baseTexture.destroy()),
        this._texture = null,
        this.baseTexture = null
    }
    ,
    Spritesheet.BATCH_SIZE = 1e3,
    Spritesheet);
    function Spritesheet(t, e, i) {
        void 0 === i && (i = null),
        this._texture = t instanceof Cr ? t : null,
        this.baseTexture = t instanceof Qi ? t : this._texture.baseTexture,
        this.textures = {},
        this.animations = {},
        this.data = e;
        var r = this.baseTexture.resource;
        this.resolution = this._updateResolution(i || (r ? r.url : null)),
        this._frames = this.data.frames,
        this._frameKeys = Object.keys(this._frames),
        this._batchIndex = 0,
        this._callback = null
    }
    var Na = (SpritesheetLoader.use = function(n, i) {
        var t, e, o = this, r = n.name + "_image";
        if (n.data && n.type === rt.LoaderResource.TYPE.JSON && n.data.frames && !o.resources[r]) {
            var s = null === (e = null === (t = n.data) || void 0 === t ? void 0 : t.meta) || void 0 === e ? void 0 : e.related_multi_packs;
            if (Array.isArray(s))
                for (var a = function(t) {
                    if ("string" != typeof t)
                        return "continue";
                    var e = t.replace(".json", "")
                      , i = Qt.resolve(n.url.replace(o.baseUrl, ""), t);
                    if (o.resources[e] || Object.values(o.resources).some(function(t) {
                        return Qt.format(Qt.parse(t.url)) === i
                    }))
                        return "continue";
                    var r = {
                        crossOrigin: n.crossOrigin,
                        loadType: rt.LoaderResource.LOAD_TYPE.XHR,
                        xhrType: rt.LoaderResource.XHR_RESPONSE_TYPE.JSON,
                        parentResource: n,
                        metadata: n.metadata
                    };
                    o.add(e, i, r)
                }, l = 0, c = s; l < c.length; l++)
                    a(c[l]);
            var u = {
                crossOrigin: n.crossOrigin,
                metadata: n.metadata.imageMetadata,
                parentResource: n
            }
              , p = SpritesheetLoader.getResourcePath(n, o.baseUrl);
            o.add(r, p, u, function onImageLoad(t) {
                if (t.error)
                    i(t.error);
                else {
                    var e = new La(t.texture,n.data,n.url);
                    e.parse(function() {
                        n.spritesheet = e,
                        n.textures = e.textures,
                        i()
                    })
                }
            })
        } else
            i()
    }
    ,
    SpritesheetLoader.getResourcePath = function(t, e) {
        return t.isDataUrl ? t.data.meta.image : Qt.resolve(t.url.replace(e, ""), t.data.meta.image)
    }
    ,
    SpritesheetLoader);
    function SpritesheetLoader() {}
    var xa = function(t, e) {
        return (xa = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    function __extends$a(t, e) {
        function __() {
            this.constructor = t
        }
        xa(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
    var Ma, Va = new me, Ba = (__extends$a(TilingSprite, Ma = ma),
    Object.defineProperty(TilingSprite.prototype, "clampMargin", {
        get: function() {
            return this.uvMatrix.clampMargin
        },
        set: function(t) {
            this.uvMatrix.clampMargin = t,
            this.uvMatrix.update(!0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TilingSprite.prototype, "tileScale", {
        get: function() {
            return this.tileTransform.scale
        },
        set: function(t) {
            this.tileTransform.scale.copyFrom(t)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TilingSprite.prototype, "tilePosition", {
        get: function() {
            return this.tileTransform.position
        },
        set: function(t) {
            this.tileTransform.position.copyFrom(t)
        },
        enumerable: !1,
        configurable: !0
    }),
    TilingSprite.prototype._onTextureUpdate = function() {
        this.uvMatrix && (this.uvMatrix.texture = this._texture),
        this._cachedTint = 16777215
    }
    ,
    TilingSprite.prototype._render = function(t) {
        var e = this._texture;
        e && e.valid && (this.tileTransform.updateLocalTransform(),
        this.uvMatrix.update(),
        t.batch.setObjectRenderer(t.plugins[this.pluginName]),
        t.plugins[this.pluginName].render(this))
    }
    ,
    TilingSprite.prototype._calculateBounds = function() {
        var t = this._width * -this._anchor._x
          , e = this._height * -this._anchor._y
          , i = this._width * (1 - this._anchor._x)
          , r = this._height * (1 - this._anchor._y);
        this._bounds.addFrame(this.transform, t, e, i, r)
    }
    ,
    TilingSprite.prototype.getLocalBounds = function(t) {
        return 0 === this.children.length ? (this._bounds.minX = this._width * -this._anchor._x,
        this._bounds.minY = this._height * -this._anchor._y,
        this._bounds.maxX = this._width * (1 - this._anchor._x),
        this._bounds.maxY = this._height * (1 - this._anchor._y),
        t || (this._localBoundsRect || (this._localBoundsRect = new ge),
        t = this._localBoundsRect),
        this._bounds.getRectangle(t)) : Ma.prototype.getLocalBounds.call(this, t)
    }
    ,
    TilingSprite.prototype.containsPoint = function(t) {
        this.worldTransform.applyInverse(t, Va);
        var e = this._width
          , i = this._height
          , r = -e * this.anchor._x;
        if (Va.x >= r && Va.x < r + e) {
            var n = -i * this.anchor._y;
            if (Va.y >= n && Va.y < n + i)
                return !0
        }
        return !1
    }
    ,
    TilingSprite.prototype.destroy = function(t) {
        Ma.prototype.destroy.call(this, t),
        this.tileTransform = null,
        this.uvMatrix = null
    }
    ,
    TilingSprite.from = function(t, e) {
        return new TilingSprite(t instanceof Cr ? t : Cr.from(t, e),e.width,e.height)
    }
    ,
    Object.defineProperty(TilingSprite.prototype, "width", {
        get: function() {
            return this._width
        },
        set: function(t) {
            this._width = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TilingSprite.prototype, "height", {
        get: function() {
            return this._height
        },
        set: function(t) {
            this._height = t
        },
        enumerable: !1,
        configurable: !0
    }),
    TilingSprite);
    function TilingSprite(t, e, i) {
        void 0 === e && (e = 100),
        void 0 === i && (i = 100);
        var r = Ma.call(this, t) || this;
        return r.tileTransform = new Ne,
        r._width = e,
        r._height = i,
        r.uvMatrix = r.texture.uvMatrix || new bn(t),
        r.pluginName = "tilingSprite",
        r.uvRespectAnchor = !1,
        r
    }
    var Fa, Ga = "#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n", ka = new Ce, ja = (__extends$a(TilingSpriteRenderer, Fa = Kr),
    TilingSpriteRenderer.prototype.contextChange = function() {
        var t = this.renderer
          , e = {
            globals: t.globalUniforms
        };
        this.simpleShader = Tn.from(Ga, "#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n", e),
        this.shader = 1 < t.context.webGLVersion ? Tn.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n", "#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n", e) : Tn.from(Ga, "#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n", e)
    }
    ,
    TilingSpriteRenderer.prototype.render = function(t) {
        var e = this.renderer
          , i = this.quad
          , r = i.vertices;
        r[0] = r[6] = t._width * -t.anchor.x,
        r[1] = r[3] = t._height * -t.anchor.y,
        r[2] = r[4] = t._width * (1 - t.anchor.x),
        r[5] = r[7] = t._height * (1 - t.anchor.y);
        var n = t.uvRespectAnchor ? t.anchor.x : 0
          , o = t.uvRespectAnchor ? t.anchor.y : 0;
        (r = i.uvs)[0] = r[6] = -n,
        r[1] = r[3] = -o,
        r[2] = r[4] = 1 - n,
        r[5] = r[7] = 1 - o,
        i.invalidate();
        var s = t._texture
          , a = s.baseTexture
          , l = t.tileTransform.localTransform
          , c = t.uvMatrix
          , u = a.isPowerOfTwo && s.frame.width === a.width && s.frame.height === a.height;
        u && (a._glTextures[e.CONTEXT_UID] ? u = a.wrapMode !== rt.WRAP_MODES.CLAMP : a.wrapMode === rt.WRAP_MODES.CLAMP && (a.wrapMode = rt.WRAP_MODES.REPEAT));
        var p = u ? this.simpleShader : this.shader
          , h = s.width
          , d = s.height
          , _ = t._width
          , y = t._height;
        ka.set(l.a * h / _, l.b * h / y, l.c * d / _, l.d * d / y, l.tx / _, l.ty / y),
        ka.invert(),
        u ? ka.prepend(c.mapCoord) : (p.uniforms.uMapCoord = c.mapCoord.toArray(!0),
        p.uniforms.uClampFrame = c.uClampFrame,
        p.uniforms.uClampOffset = c.uClampOffset),
        p.uniforms.uTransform = ka.toArray(!0),
        p.uniforms.uColor = premultiplyTintToRgba(t.tint, t.worldAlpha, p.uniforms.uColor, a.alphaMode),
        p.uniforms.translationMatrix = t.transform.worldTransform.toArray(!0),
        p.uniforms.uSampler = s,
        e.shader.bind(p),
        e.geometry.bind(i),
        this.state.blendMode = correctBlendMode(t.blendMode, a.alphaMode),
        e.state.set(this.state),
        e.geometry.draw(this.renderer.gl.TRIANGLES, 6, 0)
    }
    ,
    TilingSpriteRenderer);
    function TilingSpriteRenderer(t) {
        var e = Fa.call(this, t) || this;
        return t.runners.contextChange.add(e),
        e.quad = new Gr,
        e.state = gn.for2d(),
        e
    }
    var Ha = function(t, e) {
        return (Ha = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    function __extends$9(t, e) {
        function __() {
            this.constructor = t
        }
        Ha(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
    var qa = (MeshBatchUvs.prototype.update = function(t) {
        if (t || this._bufferUpdateId !== this.uvBuffer._updateID || this._textureUpdateId !== this.uvMatrix._updateID) {
            this._bufferUpdateId = this.uvBuffer._updateID,
            this._textureUpdateId = this.uvMatrix._updateID;
            var e = this.uvBuffer.data;
            this.data && this.data.length === e.length || (this.data = new Float32Array(e.length)),
            this.uvMatrix.multiplyUvs(e, this.data),
            this._updateID++
        }
    }
    ,
    MeshBatchUvs);
    function MeshBatchUvs(t, e) {
        this.uvBuffer = t,
        this.uvMatrix = e,
        this.data = null,
        this._bufferUpdateId = -1,
        this._textureUpdateId = -1,
        this._updateID = 0
    }
    var Ya, za = new me, Ka = new Se, Xa = (__extends$9(Mesh, Ya = Ui),
    Object.defineProperty(Mesh.prototype, "geometry", {
        get: function() {
            return this._geometry
        },
        set: function(t) {
            this._geometry !== t && (this._geometry && (this._geometry.refCount--,
            0 === this._geometry.refCount && this._geometry.dispose()),
            this._geometry = t,
            this._geometry && this._geometry.refCount++,
            this.vertexDirty = -1)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Mesh.prototype, "uvBuffer", {
        get: function() {
            return this.geometry.buffers[1]
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Mesh.prototype, "verticesBuffer", {
        get: function() {
            return this.geometry.buffers[0]
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Mesh.prototype, "material", {
        get: function() {
            return this.shader
        },
        set: function(t) {
            this.shader = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Mesh.prototype, "blendMode", {
        get: function() {
            return this.state.blendMode
        },
        set: function(t) {
            this.state.blendMode = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Mesh.prototype, "roundPixels", {
        get: function() {
            return this._roundPixels
        },
        set: function(t) {
            this._roundPixels !== t && (this._transformID = -1),
            this._roundPixels = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Mesh.prototype, "tint", {
        get: function() {
            return "tint"in this.shader ? this.shader.tint : null
        },
        set: function(t) {
            this.shader.tint = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Mesh.prototype, "texture", {
        get: function() {
            return "texture"in this.shader ? this.shader.texture : null
        },
        set: function(t) {
            this.shader.texture = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Mesh.prototype._render = function(t) {
        var e = this.geometry.buffers[0].data;
        this.shader.batchable && this.drawMode === rt.DRAW_MODES.TRIANGLES && e.length < 2 * Mesh.BATCHABLE_SIZE ? this._renderToBatch(t) : this._renderDefault(t)
    }
    ,
    Mesh.prototype._renderDefault = function(t) {
        var e = this.shader;
        e.alpha = this.worldAlpha,
        e.update && e.update(),
        t.batch.flush(),
        e.uniforms.translationMatrix = this.transform.worldTransform.toArray(!0),
        t.shader.bind(e),
        t.state.set(this.state),
        t.geometry.bind(this.geometry, e),
        t.geometry.draw(this.drawMode, this.size, this.start, this.geometry.instanceCount)
    }
    ,
    Mesh.prototype._renderToBatch = function(t) {
        var e = this.geometry
          , i = this.shader;
        i.uvMatrix && (i.uvMatrix.update(),
        this.calculateUvs()),
        this.calculateVertices(),
        this.indices = e.indexBuffer.data,
        this._tintRGB = i._tintRGB,
        this._texture = i.texture;
        var r = this.material.pluginName;
        t.batch.setObjectRenderer(t.plugins[r]),
        t.plugins[r].render(this)
    }
    ,
    Mesh.prototype.calculateVertices = function() {
        var t = this.geometry.buffers[0]
          , e = t.data
          , i = t._updateID;
        if (i !== this.vertexDirty || this._transformID !== this.transform._worldID) {
            this._transformID = this.transform._worldID,
            this.vertexData.length !== e.length && (this.vertexData = new Float32Array(e.length));
            for (var r = this.transform.worldTransform, n = r.a, o = r.b, s = r.c, a = r.d, l = r.tx, c = r.ty, u = this.vertexData, p = 0; p < u.length / 2; p++) {
                var h = e[2 * p]
                  , d = e[2 * p + 1];
                u[2 * p] = n * h + s * d + l,
                u[2 * p + 1] = o * h + a * d + c
            }
            if (this._roundPixels) {
                var _ = pt.RESOLUTION;
                for (p = 0; p < u.length; ++p)
                    u[p] = Math.round((u[p] * _ | 0) / _)
            }
            this.vertexDirty = i
        }
    }
    ,
    Mesh.prototype.calculateUvs = function() {
        var t = this.geometry.buffers[1]
          , e = this.shader;
        e.uvMatrix.isSimple ? this.uvs = t.data : (this.batchUvs || (this.batchUvs = new qa(t,e.uvMatrix)),
        this.batchUvs.update(),
        this.uvs = this.batchUvs.data)
    }
    ,
    Mesh.prototype._calculateBounds = function() {
        this.calculateVertices(),
        this._bounds.addVertexData(this.vertexData, 0, this.vertexData.length)
    }
    ,
    Mesh.prototype.containsPoint = function(t) {
        if (!this.getBounds().contains(t.x, t.y))
            return !1;
        this.worldTransform.applyInverse(t, za);
        for (var e = this.geometry.getBuffer("aVertexPosition").data, i = Ka.points, r = this.geometry.getIndex().data, n = r.length, o = 4 === this.drawMode ? 3 : 1, s = 0; s + 2 < n; s += o) {
            var a = 2 * r[s]
              , l = 2 * r[s + 1]
              , c = 2 * r[s + 2];
            if (i[0] = e[a],
            i[1] = e[1 + a],
            i[2] = e[l],
            i[3] = e[1 + l],
            i[4] = e[c],
            i[5] = e[1 + c],
            Ka.contains(za.x, za.y))
                return !0
        }
        return !1
    }
    ,
    Mesh.prototype.destroy = function(t) {
        Ya.prototype.destroy.call(this, t),
        this._cachedTexture && (this._cachedTexture.destroy(),
        this._cachedTexture = null),
        this.geometry = null,
        this.shader = null,
        this.state = null,
        this.uvs = null,
        this.indices = null,
        this.vertexData = null
    }
    ,
    Mesh.BATCHABLE_SIZE = 100,
    Mesh);
    function Mesh(t, e, i, r) {
        void 0 === r && (r = rt.DRAW_MODES.TRIANGLES);
        var n = Ya.call(this) || this;
        return n.geometry = t,
        n.shader = e,
        n.state = i || gn.for2d(),
        n.drawMode = r,
        n.start = 0,
        n.size = 0,
        n.uvs = null,
        n.indices = null,
        n.vertexData = new Float32Array(1),
        n.vertexDirty = -1,
        n._transformID = -1,
        n._roundPixels = pt.ROUND_PIXELS,
        n.batchUvs = null,
        n
    }
    var Wa, Ja = (__extends$9(MeshMaterial, Wa = Tn),
    Object.defineProperty(MeshMaterial.prototype, "texture", {
        get: function() {
            return this.uniforms.uSampler
        },
        set: function(t) {
            this.uniforms.uSampler !== t && (this.uniforms.uSampler = t,
            this.uvMatrix.texture = t)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(MeshMaterial.prototype, "alpha", {
        get: function() {
            return this._alpha
        },
        set: function(t) {
            t !== this._alpha && (this._alpha = t,
            this._colorDirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(MeshMaterial.prototype, "tint", {
        get: function() {
            return this._tint
        },
        set: function(t) {
            t !== this._tint && (this._tint = t,
            this._tintRGB = (t >> 16) + (65280 & t) + ((255 & t) << 16),
            this._colorDirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    MeshMaterial.prototype.update = function() {
        if (this._colorDirty) {
            this._colorDirty = !1;
            var t = this.texture.baseTexture;
            premultiplyTintToRgba(this._tint, this._alpha, this.uniforms.uColor, t.alphaMode)
        }
        this.uvMatrix.update() && (this.uniforms.uTextureMatrix = this.uvMatrix.mapCoord)
    }
    ,
    MeshMaterial);
    function MeshMaterial(t, e) {
        var i = this
          , r = {
            uSampler: t,
            alpha: 1,
            uTextureMatrix: Ce.IDENTITY,
            uColor: new Float32Array([1, 1, 1, 1])
        };
        return (e = Object.assign({
            tint: 16777215,
            alpha: 1,
            pluginName: "batch"
        }, e)).uniforms && Object.assign(r, e.uniforms),
        (i = Wa.call(this, e.program || mn.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n", "varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"), r) || this)._colorDirty = !1,
        i.uvMatrix = new bn(t),
        i.batchable = void 0 === e.program,
        i.pluginName = e.pluginName,
        i.tint = e.tint,
        i.alpha = e.alpha,
        i
    }
    var Qa, Za = (__extends$9(MeshGeometry, Qa = Mr),
    Object.defineProperty(MeshGeometry.prototype, "vertexDirtyId", {
        get: function() {
            return this.buffers[0]._updateID
        },
        enumerable: !1,
        configurable: !0
    }),
    MeshGeometry);
    function MeshGeometry(t, e, i) {
        var r = Qa.call(this) || this
          , n = new Pr(t)
          , o = new Pr(e,!0)
          , s = new Pr(i,!0,!0);
        return r.addAttribute("aVertexPosition", n, 2, !1, rt.TYPES.FLOAT).addAttribute("aTextureCoord", o, 2, !1, rt.TYPES.FLOAT).addIndex(s),
        r._updateId = -1,
        r
    }
    var $a = function(t, e) {
        return ($a = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    var tl = function BitmapFontData() {
        this.info = [],
        this.common = [],
        this.page = [],
        this.char = [],
        this.kerning = [],
        this.distanceField = []
    }
      , el = (TextFormat.test = function(t) {
        return "string" == typeof t && 0 === t.indexOf("info face=")
    }
    ,
    TextFormat.parse = function(t) {
        var e = t.match(/^[a-z]+\s+.+$/gm)
          , i = {
            info: [],
            common: [],
            page: [],
            char: [],
            chars: [],
            kerning: [],
            kernings: [],
            distanceField: []
        };
        for (var r in e) {
            var n = e[r].match(/^[a-z]+/gm)[0]
              , o = e[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm)
              , s = {};
            for (var a in o) {
                var l = o[a].split("=")
                  , c = l[0]
                  , u = l[1].replace(/"/gm, "")
                  , p = parseFloat(u)
                  , h = isNaN(p) ? u : p;
                s[c] = h
            }
            i[n].push(s)
        }
        var d = new tl;
        return i.info.forEach(function(t) {
            return d.info.push({
                face: t.face,
                size: parseInt(t.size, 10)
            })
        }),
        i.common.forEach(function(t) {
            return d.common.push({
                lineHeight: parseInt(t.lineHeight, 10)
            })
        }),
        i.page.forEach(function(t) {
            return d.page.push({
                id: parseInt(t.id, 10),
                file: t.file
            })
        }),
        i.char.forEach(function(t) {
            return d.char.push({
                id: parseInt(t.id, 10),
                page: parseInt(t.page, 10),
                x: parseInt(t.x, 10),
                y: parseInt(t.y, 10),
                width: parseInt(t.width, 10),
                height: parseInt(t.height, 10),
                xoffset: parseInt(t.xoffset, 10),
                yoffset: parseInt(t.yoffset, 10),
                xadvance: parseInt(t.xadvance, 10)
            })
        }),
        i.kerning.forEach(function(t) {
            return d.kerning.push({
                first: parseInt(t.first, 10),
                second: parseInt(t.second, 10),
                amount: parseInt(t.amount, 10)
            })
        }),
        i.distanceField.forEach(function(t) {
            return d.distanceField.push({
                distanceRange: parseInt(t.distanceRange, 10),
                fieldType: t.fieldType
            })
        }),
        d
    }
    ,
    TextFormat);
    function TextFormat() {}
    var il = (XMLFormat.test = function(t) {
        return t instanceof XMLDocument && t.getElementsByTagName("page").length && null !== t.getElementsByTagName("info")[0].getAttribute("face")
    }
    ,
    XMLFormat.parse = function(t) {
        for (var e = new tl, i = t.getElementsByTagName("info"), r = t.getElementsByTagName("common"), n = t.getElementsByTagName("page"), o = t.getElementsByTagName("char"), s = t.getElementsByTagName("kerning"), a = t.getElementsByTagName("distanceField"), l = 0; l < i.length; l++)
            e.info.push({
                face: i[l].getAttribute("face"),
                size: parseInt(i[l].getAttribute("size"), 10)
            });
        for (l = 0; l < r.length; l++)
            e.common.push({
                lineHeight: parseInt(r[l].getAttribute("lineHeight"), 10)
            });
        for (l = 0; l < n.length; l++)
            e.page.push({
                id: parseInt(n[l].getAttribute("id"), 10) || 0,
                file: n[l].getAttribute("file")
            });
        for (l = 0; l < o.length; l++) {
            var c = o[l];
            e.char.push({
                id: parseInt(c.getAttribute("id"), 10),
                page: parseInt(c.getAttribute("page"), 10) || 0,
                x: parseInt(c.getAttribute("x"), 10),
                y: parseInt(c.getAttribute("y"), 10),
                width: parseInt(c.getAttribute("width"), 10),
                height: parseInt(c.getAttribute("height"), 10),
                xoffset: parseInt(c.getAttribute("xoffset"), 10),
                yoffset: parseInt(c.getAttribute("yoffset"), 10),
                xadvance: parseInt(c.getAttribute("xadvance"), 10)
            })
        }
        for (l = 0; l < s.length; l++)
            e.kerning.push({
                first: parseInt(s[l].getAttribute("first"), 10),
                second: parseInt(s[l].getAttribute("second"), 10),
                amount: parseInt(s[l].getAttribute("amount"), 10)
            });
        for (l = 0; l < a.length; l++)
            e.distanceField.push({
                fieldType: a[l].getAttribute("fieldType"),
                distanceRange: parseInt(a[l].getAttribute("distanceRange"), 10)
            });
        return e
    }
    ,
    XMLFormat);
    function XMLFormat() {}
    var rl = (XMLStringFormat.test = function(t) {
        if ("string" == typeof t && -1 < t.indexOf("<font>")) {
            var e = (new globalThis.DOMParser).parseFromString(t, "text/xml");
            return il.test(e)
        }
        return !1
    }
    ,
    XMLStringFormat.parse = function(t) {
        var e = (new globalThis.DOMParser).parseFromString(t, "text/xml");
        return il.parse(e)
    }
    ,
    XMLStringFormat);
    function XMLStringFormat() {}
    var nl = [el, il, rl];
    function autoDetectFormat(t) {
        for (var e = 0; e < nl.length; e++)
            if (nl[e].test(t))
                return nl[e];
        return null
    }
    function drawGlyph(t, e, i, r, n, o, s) {
        var a = i.text
          , l = i.fontProperties;
        e.translate(r, n),
        e.scale(o, o);
        var c = s.strokeThickness / 2
          , u = -s.strokeThickness / 2;
        if (e.font = s.toFontString(),
        e.lineWidth = s.strokeThickness,
        e.textBaseline = s.textBaseline,
        e.lineJoin = s.lineJoin,
        e.miterLimit = s.miterLimit,
        e.fillStyle = function generateFillStyle(t, e, i, r, n, o) {
            var s, a = i.fill;
            if (!Array.isArray(a))
                return a;
            if (1 === a.length)
                return a[0];
            var l = i.dropShadow ? i.dropShadowDistance : 0
              , c = i.padding || 0
              , u = t.width / r - l - 2 * c
              , p = t.height / r - l - 2 * c
              , h = a.slice()
              , d = i.fillGradientStops.slice();
            if (!d.length)
                for (var _ = h.length + 1, y = 1; y < _; ++y)
                    d.push(y / _);
            if (h.unshift(a[0]),
            d.unshift(0),
            h.push(a[a.length - 1]),
            d.push(1),
            i.fillGradientType === rt.TEXT_GRADIENT.LINEAR_VERTICAL) {
                s = e.createLinearGradient(u / 2, c, u / 2, p + c);
                var f = 0
                  , m = (o.fontProperties.fontSize + i.strokeThickness) / p;
                for (y = 0; y < n.length; y++)
                    for (var T = o.lineHeight * y, g = 0; g < h.length; g++) {
                        var v = T / p + ("number" == typeof d[g] ? d[g] : g / h.length) * m
                          , E = Math.max(f, v);
                        E = Math.min(E, 1),
                        s.addColorStop(E, h[g]),
                        f = E
                    }
            } else {
                s = e.createLinearGradient(c, p / 2, u + c, p / 2);
                var S = h.length + 1
                  , b = 1;
                for (y = 0; y < h.length; y++) {
                    var I = void 0;
                    I = "number" == typeof d[y] ? d[y] : b / S,
                    s.addColorStop(I, h[y]),
                    b++
                }
            }
            return s
        }(t, e, s, o, [a], i),
        e.strokeStyle = s.stroke,
        s.dropShadow) {
            var p = s.dropShadowColor
              , h = hex2rgb("number" == typeof p ? p : string2hex(p))
              , d = s.dropShadowBlur * o
              , _ = s.dropShadowDistance * o;
            e.shadowColor = "rgba(" + 255 * h[0] + "," + 255 * h[1] + "," + 255 * h[2] + "," + s.dropShadowAlpha + ")",
            e.shadowBlur = d,
            e.shadowOffsetX = Math.cos(s.dropShadowAngle) * _,
            e.shadowOffsetY = Math.sin(s.dropShadowAngle) * _
        } else
            e.shadowColor = "black",
            e.shadowBlur = 0,
            e.shadowOffsetX = 0,
            e.shadowOffsetY = 0;
        s.stroke && s.strokeThickness && e.strokeText(a, c, u + i.lineHeight - l.descent),
        s.fill && e.fillText(a, c, u + i.lineHeight - l.descent),
        e.setTransform(1, 0, 0, 1, 0, 0),
        e.fillStyle = "rgba(0, 0, 0, 0)"
    }
    function splitTextToCharacters(t) {
        return Array.from ? Array.from(t) : t.split("")
    }
    function extractCharCode(t) {
        return t.codePointAt ? t.codePointAt(0) : t.charCodeAt(0)
    }
    var ol = (BitmapFont.prototype.destroy = function() {
        for (var t in this.chars)
            this.chars[t].texture.destroy(),
            this.chars[t].texture = null;
        for (var t in this.pageTextures)
            this._ownsTextures && this.pageTextures[t].destroy(!0),
            this.pageTextures[t] = null;
        this.chars = null,
        this.pageTextures = null
    }
    ,
    BitmapFont.install = function(t, e, i) {
        var r;
        if (t instanceof tl)
            r = t;
        else {
            var n = autoDetectFormat(t);
            if (!n)
                throw new Error("Unrecognized data format for font.");
            r = n.parse(t)
        }
        e instanceof Cr && (e = [e]);
        var o = new BitmapFont(r,e,i);
        return BitmapFont.available[o.font] = o
    }
    ,
    BitmapFont.uninstall = function(t) {
        var e = BitmapFont.available[t];
        if (!e)
            throw new Error("No font found named '" + t + "'");
        e.destroy(),
        delete BitmapFont.available[t]
    }
    ,
    BitmapFont.from = function(t, e, i) {
        if (!t)
            throw new Error("[BitmapFont] Property `name` is required.");
        var r = Object.assign({}, BitmapFont.defaultOptions, i)
          , n = r.chars
          , o = r.padding
          , s = r.resolution
          , a = r.textureWidth
          , l = r.textureHeight
          , c = function resolveCharacters(t) {
            "string" == typeof t && (t = [t]);
            for (var e = [], i = 0, r = t.length; i < r; i++) {
                var n = t[i];
                if (Array.isArray(n)) {
                    if (2 !== n.length)
                        throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got " + n.length + ".");
                    var o = n[0].charCodeAt(0)
                      , s = n[1].charCodeAt(0);
                    if (s < o)
                        throw new Error("[BitmapFont]: Invalid character range.");
                    for (var a = o, l = s; a <= l; a++)
                        e.push(String.fromCharCode(a))
                } else
                    e.push.apply(e, splitTextToCharacters(n))
            }
            if (0 === e.length)
                throw new Error("[BitmapFont]: Empty set when resolving characters.");
            return e
        }(n)
          , u = e instanceof Sa ? e : new Sa(e)
          , p = a
          , h = new tl;
        h.info[0] = {
            face: u.fontFamily,
            size: u.fontSize
        },
        h.common[0] = {
            lineHeight: u.fontSize
        };
        for (var d, _, y, f = 0, m = 0, T = 0, g = [], v = 0; v < c.length; v++) {
            d || ((d = document.createElement("canvas")).width = a,
            d.height = l,
            _ = d.getContext("2d"),
            y = new Qi(d,{
                resolution: s
            }),
            g.push(new Cr(y)),
            h.page.push({
                id: g.length - 1,
                file: ""
            }));
            var E = ba.measureText(c[v], u, !1, d)
              , S = E.width
              , b = Math.ceil(E.height)
              , I = Math.ceil(("italic" === u.fontStyle ? 2 : 1) * S);
            if (l - b * s <= m) {
                if (0 === m)
                    throw new Error("[BitmapFont] textureHeight " + l + "px is too small for " + u.fontSize + "px fonts");
                --v,
                y = _ = d = null,
                T = f = m = 0
            } else if (T = Math.max(b + E.fontProperties.descent, T),
            p <= I * s + f)
                --v,
                m += T * s,
                m = Math.ceil(m),
                T = f = 0;
            else {
                drawGlyph(d, _, E, f, m, s, u);
                var C = extractCharCode(E.text);
                h.char.push({
                    id: C,
                    page: g.length - 1,
                    x: f / s,
                    y: m / s,
                    width: I,
                    height: b,
                    xoffset: 0,
                    yoffset: 0,
                    xadvance: Math.ceil(S - (u.dropShadow ? u.dropShadowDistance : 0) - (u.stroke ? u.strokeThickness : 0))
                }),
                f += (I + 2 * o) * s,
                f = Math.ceil(f)
            }
        }
        v = 0;
        for (var U = c.length; v < U; v++)
            for (var A = c[v], w = 0; w < U; w++) {
                var O = c[w]
                  , R = _.measureText(A).width
                  , P = _.measureText(O).width
                  , D = _.measureText(A + O).width - (R + P);
                D && h.kerning.push({
                    first: extractCharCode(A),
                    second: extractCharCode(O),
                    amount: D
                })
            }
        var L = new BitmapFont(h,g,!0);
        return void 0 !== BitmapFont.available[t] && BitmapFont.uninstall(t),
        BitmapFont.available[t] = L
    }
    ,
    BitmapFont.ALPHA = [["a", "z"], ["A", "Z"], " "],
    BitmapFont.NUMERIC = [["0", "9"]],
    BitmapFont.ALPHANUMERIC = [["a", "z"], ["A", "Z"], ["0", "9"], " "],
    BitmapFont.ASCII = [[" ", "~"]],
    BitmapFont.defaultOptions = {
        resolution: 1,
        textureWidth: 512,
        textureHeight: 512,
        padding: 4,
        chars: BitmapFont.ALPHANUMERIC
    },
    BitmapFont.available = {},
    BitmapFont);
    function BitmapFont(t, e, i) {
        var r, n, o = t.info[0], s = t.common[0], a = t.page[0], l = t.distanceField[0], c = getResolutionOfUrl(a.file), u = {};
        this._ownsTextures = i,
        this.font = o.face,
        this.size = o.size,
        this.lineHeight = s.lineHeight / c,
        this.chars = {},
        this.pageTextures = u;
        for (var p = 0; p < t.page.length; p++) {
            var h = t.page[p]
              , d = h.id
              , _ = h.file;
            u[d] = e instanceof Array ? e[p] : e[_],
            (null == l ? void 0 : l.fieldType) && "none" !== l.fieldType && (u[d].baseTexture.alphaMode = rt.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA)
        }
        for (p = 0; p < t.char.length; p++) {
            var y = t.char[p]
              , f = (d = y.id,
            y.page)
              , m = t.char[p]
              , T = m.x
              , g = m.y
              , v = m.width
              , E = m.height
              , S = m.xoffset
              , b = m.yoffset
              , I = m.xadvance;
            g /= c,
            v /= c,
            E /= c,
            S /= c,
            b /= c,
            I /= c;
            var C = new ge((T /= c) + u[f].frame.x / c,g + u[f].frame.y / c,v,E);
            this.chars[d] = {
                xOffset: S,
                yOffset: b,
                xAdvance: I,
                kerning: {},
                texture: new Cr(u[f].baseTexture,C),
                page: f
            }
        }
        for (p = 0; p < t.kerning.length; p++) {
            var U = t.kerning[p]
              , A = U.first
              , w = U.second
              , O = U.amount;
            A /= c,
            w /= c,
            O /= c,
            this.chars[w] && (this.chars[w].kerning[A] = O)
        }
        this.distanceFieldRange = null == l ? void 0 : l.distanceRange,
        this.distanceFieldType = null !== (n = null === (r = null == l ? void 0 : l.fieldType) || void 0 === r ? void 0 : r.toLowerCase()) && void 0 !== n ? n : "none"
    }
    var sl, al = [], ll = [], cl = [], ul = (function __extends$8(t, e) {
        function __() {
            this.constructor = t
        }
        $a(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }(BitmapText, sl = Ui),
    BitmapText.prototype.updateText = function() {
        for (var t, e = ol.available[this._fontName], i = this._fontSize / e.size, r = new me, n = [], o = [], s = [], a = splitTextToCharacters(this._text.replace(/(?:\r\n|\r)/g, "\n") || " "), l = this._maxWidth * e.size / this._fontSize, c = "none" === e.distanceFieldType ? al : ll, u = null, p = 0, h = 0, d = 0, _ = -1, y = 0, f = 0, m = 0, T = 0, g = 0; g < a.length; g++) {
            var v = extractCharCode(G = a[g]);
            if (/(?:\s)/.test(G) && (_ = g,
            y = p,
            T++),
            "\r" !== G && "\n" !== G) {
                var E = e.chars[v];
                if (E) {
                    u && E.kerning[u] && (r.x += E.kerning[u]);
                    var S = cl.pop() || {
                        texture: Cr.EMPTY,
                        line: 0,
                        charCode: 0,
                        prevSpaces: 0,
                        position: new me
                    };
                    S.texture = E.texture,
                    S.line = d,
                    S.charCode = v,
                    S.position.x = r.x + E.xOffset + this._letterSpacing / 2,
                    S.position.y = r.y + E.yOffset,
                    S.prevSpaces = T,
                    n.push(S),
                    p = S.position.x + Math.max(E.xAdvance, E.texture.orig.width),
                    r.x += E.xAdvance + this._letterSpacing,
                    m = Math.max(m, E.yOffset + E.texture.height),
                    u = v,
                    -1 !== _ && 0 < l && r.x > l && (removeItems(n, 1 + _ - ++f, 1 + g - _),
                    g = _,
                    _ = -1,
                    o.push(y),
                    s.push(0 < n.length ? n[n.length - 1].prevSpaces : 0),
                    h = Math.max(h, y),
                    d++,
                    r.x = 0,
                    r.y += e.lineHeight,
                    u = null,
                    T = 0)
                }
            } else
                o.push(p),
                s.push(-1),
                h = Math.max(h, p),
                ++d,
                ++f,
                r.x = 0,
                r.y += e.lineHeight,
                u = null,
                T = 0
        }
        var b = a[a.length - 1];
        "\r" !== b && "\n" !== b && (/(?:\s)/.test(b) && (p = y),
        o.push(p),
        h = Math.max(h, p),
        s.push(-1));
        var I = [];
        for (g = 0; g <= d; g++) {
            var C = 0;
            "right" === this._align ? C = h - o[g] : "center" === this._align ? C = (h - o[g]) / 2 : "justify" === this._align && (C = s[g] < 0 ? 0 : (h - o[g]) / s[g]),
            I.push(C)
        }
        var U = n.length
          , A = {}
          , w = []
          , O = this._activePagesMeshData;
        for (g = 0; g < O.length; g++)
            c.push(O[g]);
        for (g = 0; g < U; g++) {
            var R = (j = n[g].texture).baseTexture.uid;
            if (!A[R]) {
                if (!(W = c.pop())) {
                    var P = new Za
                      , D = void 0
                      , L = void 0;
                    L = "none" === e.distanceFieldType ? (D = new Ja(Cr.EMPTY),
                    rt.BLEND_MODES.NORMAL) : (D = new Ja(Cr.EMPTY,{
                        program: mn.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n", "// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),
                        uniforms: {
                            uFWidth: 0
                        }
                    }),
                    rt.BLEND_MODES.NORMAL_NPM);
                    var N = new Xa(P,D);
                    N.blendMode = L,
                    W = {
                        index: 0,
                        indexCount: 0,
                        vertexCount: 0,
                        uvsCount: 0,
                        total: 0,
                        mesh: N,
                        vertices: null,
                        uvs: null,
                        indices: null
                    }
                }
                W.index = 0,
                W.indexCount = 0,
                W.vertexCount = 0,
                W.uvsCount = 0,
                W.total = 0;
                var x = this._textureCache;
                x[R] = x[R] || new Cr(j.baseTexture),
                W.mesh.texture = x[R],
                W.mesh.tint = this._tint,
                w.push(W),
                A[R] = W
            }
            A[R].total++
        }
        for (g = 0; g < O.length; g++)
            -1 === w.indexOf(O[g]) && this.removeChild(O[g].mesh);
        for (g = 0; g < w.length; g++)
            w[g].mesh.parent !== this && this.addChild(w[g].mesh);
        for (var g in this._activePagesMeshData = w,
        A) {
            var M = (W = A[g]).total;
            if (!((null === (t = W.indices) || void 0 === t ? void 0 : t.length) > 6 * M) || W.vertices.length < 2 * Xa.BATCHABLE_SIZE)
                W.vertices = new Float32Array(8 * M),
                W.uvs = new Float32Array(8 * M),
                W.indices = new Uint16Array(6 * M);
            else
                for (var V = W.total, B = W.vertices, F = 4 * V * 2; F < B.length; F++)
                    B[F] = 0;
            W.mesh.size = 6 * M
        }
        for (g = 0; g < U; g++) {
            var G, k = (G = n[g]).position.x + I[G.line] * ("justify" === this._align ? G.prevSpaces : 1);
            this._roundPixels && (k = Math.round(k));
            var j, H = k * i, q = G.position.y * i, Y = A[(j = G.texture).baseTexture.uid], z = j.frame, K = j._uvs, X = Y.index++;
            Y.indices[6 * X + 0] = 0 + 4 * X,
            Y.indices[6 * X + 1] = 1 + 4 * X,
            Y.indices[6 * X + 2] = 2 + 4 * X,
            Y.indices[6 * X + 3] = 0 + 4 * X,
            Y.indices[6 * X + 4] = 2 + 4 * X,
            Y.indices[6 * X + 5] = 3 + 4 * X,
            Y.vertices[8 * X + 0] = H,
            Y.vertices[8 * X + 1] = q,
            Y.vertices[8 * X + 2] = H + z.width * i,
            Y.vertices[8 * X + 3] = q,
            Y.vertices[8 * X + 4] = H + z.width * i,
            Y.vertices[8 * X + 5] = q + z.height * i,
            Y.vertices[8 * X + 6] = H,
            Y.vertices[8 * X + 7] = q + z.height * i,
            Y.uvs[8 * X + 0] = K.x0,
            Y.uvs[8 * X + 1] = K.y0,
            Y.uvs[8 * X + 2] = K.x1,
            Y.uvs[8 * X + 3] = K.y1,
            Y.uvs[8 * X + 4] = K.x2,
            Y.uvs[8 * X + 5] = K.y2,
            Y.uvs[8 * X + 6] = K.x3,
            Y.uvs[8 * X + 7] = K.y3
        }
        for (var g in this._textWidth = h * i,
        this._textHeight = (r.y + e.lineHeight) * i,
        A) {
            var W = A[g];
            if (0 !== this.anchor.x || 0 !== this.anchor.y)
                for (var J = 0, Q = this._textWidth * this.anchor.x, Z = this._textHeight * this.anchor.y, $ = 0; $ < W.total; $++)
                    W.vertices[J++] -= Q,
                    W.vertices[J++] -= Z,
                    W.vertices[J++] -= Q,
                    W.vertices[J++] -= Z,
                    W.vertices[J++] -= Q,
                    W.vertices[J++] -= Z,
                    W.vertices[J++] -= Q,
                    W.vertices[J++] -= Z;
            this._maxLineHeight = m * i;
            var tt = W.mesh.geometry.getBuffer("aVertexPosition")
              , et = W.mesh.geometry.getBuffer("aTextureCoord")
              , it = W.mesh.geometry.getIndex();
            tt.data = W.vertices,
            et.data = W.uvs,
            it.data = W.indices,
            tt.update(),
            et.update(),
            it.update()
        }
        for (g = 0; g < n.length; g++)
            cl.push(n[g])
    }
    ,
    BitmapText.prototype.updateTransform = function() {
        this.validate(),
        this.containerUpdateTransform()
    }
    ,
    BitmapText.prototype._render = function(t) {
        var e = ol.available[this._fontName]
          , i = e.distanceFieldRange
          , r = e.distanceFieldType
          , n = e.size;
        if ("none" !== r)
            for (var o = this.worldTransform, s = o.a, a = o.b, l = o.c, c = o.d, u = Math.sqrt(s * s + a * a), p = Math.sqrt(l * l + c * c), h = (Math.abs(u) + Math.abs(p)) / 2, d = this._fontSize / n, _ = 0, y = this._activePagesMeshData; _ < y.length; _++)
                y[_].mesh.shader.uniforms.uFWidth = h * i * d * t.resolution;
        sl.prototype._render.call(this, t)
    }
    ,
    BitmapText.prototype.getLocalBounds = function() {
        return this.validate(),
        sl.prototype.getLocalBounds.call(this)
    }
    ,
    BitmapText.prototype.validate = function() {
        this.dirty && (this.updateText(),
        this.dirty = !1)
    }
    ,
    Object.defineProperty(BitmapText.prototype, "tint", {
        get: function() {
            return this._tint
        },
        set: function(t) {
            if (this._tint !== t) {
                this._tint = t;
                for (var e = 0; e < this._activePagesMeshData.length; e++)
                    this._activePagesMeshData[e].mesh.tint = t
            }
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "align", {
        get: function() {
            return this._align
        },
        set: function(t) {
            this._align !== t && (this._align = t,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "fontName", {
        get: function() {
            return this._fontName
        },
        set: function(t) {
            if (!ol.available[t])
                throw new Error('Missing BitmapFont "' + t + '"');
            this._fontName !== t && (this._fontName = t,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "fontSize", {
        get: function() {
            return this._fontSize
        },
        set: function(t) {
            this._fontSize !== t && (this._fontSize = t,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "anchor", {
        get: function() {
            return this._anchor
        },
        set: function(t) {
            "number" == typeof t ? this._anchor.set(t) : this._anchor.copyFrom(t)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "text", {
        get: function() {
            return this._text
        },
        set: function(t) {
            t = String(null == t ? "" : t),
            this._text !== t && (this._text = t,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "maxWidth", {
        get: function() {
            return this._maxWidth
        },
        set: function(t) {
            this._maxWidth !== t && (this._maxWidth = t,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "maxLineHeight", {
        get: function() {
            return this.validate(),
            this._maxLineHeight
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "textWidth", {
        get: function() {
            return this.validate(),
            this._textWidth
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "letterSpacing", {
        get: function() {
            return this._letterSpacing
        },
        set: function(t) {
            this._letterSpacing !== t && (this._letterSpacing = t,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "roundPixels", {
        get: function() {
            return this._roundPixels
        },
        set: function(t) {
            t !== this._roundPixels && (this._roundPixels = t,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "textHeight", {
        get: function() {
            return this.validate(),
            this._textHeight
        },
        enumerable: !1,
        configurable: !0
    }),
    BitmapText.prototype.destroy = function(t) {
        var e = this._textureCache;
        for (var i in e)
            e[i].destroy(),
            delete e[i];
        this._textureCache = null,
        sl.prototype.destroy.call(this, t)
    }
    ,
    BitmapText.styleDefaults = {
        align: "left",
        tint: 16777215,
        maxWidth: 0,
        letterSpacing: 0
    },
    BitmapText);
    function BitmapText(t, e) {
        void 0 === e && (e = {});
        var i = sl.call(this) || this;
        i._tint = 16777215;
        var r = Object.assign({}, BitmapText.styleDefaults, e)
          , n = r.align
          , o = r.tint
          , s = r.maxWidth
          , a = r.letterSpacing
          , l = r.fontName
          , c = r.fontSize;
        if (!ol.available[l])
            throw new Error('Missing BitmapFont "' + l + '"');
        return i._activePagesMeshData = [],
        i._textWidth = 0,
        i._textHeight = 0,
        i._align = n,
        i._tint = o,
        i._fontName = l,
        i._fontSize = c || ol.available[l].size,
        i.text = t,
        i._maxWidth = s,
        i._maxLineHeight = 0,
        i._letterSpacing = a,
        i._anchor = new Ie(function() {
            i.dirty = !0
        }
        ,i,0,0),
        i._roundPixels = pt.ROUND_PIXELS,
        i.dirty = !0,
        i._textureCache = {},
        i
    }
    var pl = (BitmapFontLoader.add = function() {
        rt.LoaderResource.setExtensionXhrType("fnt", rt.LoaderResource.XHR_RESPONSE_TYPE.TEXT)
    }
    ,
    BitmapFontLoader.use = function(e, i) {
        var t = autoDetectFormat(e.data);
        if (t)
            for (var r = BitmapFontLoader.getBaseUrl(this, e), n = t.parse(e.data), o = {}, s = function(t) {
                o[t.metadata.pageFile] = t.texture,
                Object.keys(o).length === n.page.length && (e.bitmapFont = ol.install(n, o, !0),
                i())
            }, a = 0; a < n.page.length; ++a) {
                var l = n.page[a].file
                  , c = r + l
                  , u = !1;
                for (var p in this.resources) {
                    var h = this.resources[p];
                    if (h.url === c) {
                        h.metadata.pageFile = l,
                        h.texture ? s(h) : h.onAfterMiddleware.add(s),
                        u = !0;
                        break
                    }
                }
                if (!u) {
                    var d = {
                        crossOrigin: e.crossOrigin,
                        loadType: rt.LoaderResource.LOAD_TYPE.IMAGE,
                        metadata: Object.assign({
                            pageFile: l
                        }, e.metadata.imageMetadata),
                        parentResource: e
                    };
                    this.add(c, d, s)
                }
            }
        else
            i()
    }
    ,
    BitmapFontLoader.getBaseUrl = function(t, e) {
        var i = e.isDataUrl ? "" : BitmapFontLoader.dirname(e.url);
        return e.isDataUrl && ("." === i && (i = ""),
        t.baseUrl && i && "/" === t.baseUrl.charAt(t.baseUrl.length - 1) && (i += "/")),
        (i = i.replace(t.baseUrl, "")) && "/" !== i.charAt(i.length - 1) && (i += "/"),
        i
    }
    ,
    BitmapFontLoader.dirname = function(t) {
        var e = t.replace(/\\/g, "/").replace(/\/$/, "").replace(/\/[^\/]*$/, "");
        return e === t ? "." : "" === e ? "/" : e
    }
    ,
    BitmapFontLoader);
    function BitmapFontLoader() {}
    var hl = function(t, e) {
        return (hl = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    var dl, _l = (function __extends$7(t, e) {
        function __() {
            this.constructor = t
        }
        hl(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }(AlphaFilter, dl = En),
    Object.defineProperty(AlphaFilter.prototype, "alpha", {
        get: function() {
            return this.uniforms.uAlpha
        },
        set: function(t) {
            this.uniforms.uAlpha = t
        },
        enumerable: !1,
        configurable: !0
    }),
    AlphaFilter);
    function AlphaFilter(t) {
        void 0 === t && (t = 1);
        var e = dl.call(this, eo, "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n", {
            uAlpha: 1
        }) || this;
        return e.alpha = t,
        e
    }
    var yl = function(t, e) {
        return (yl = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    function __extends$6(t, e) {
        function __() {
            this.constructor = t
        }
        yl(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
    var fl = "\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }";
    var ml, Tl, gl, vl, El, Sl, bl, Il, Cl, Ul, Al, wl, Ol, Rl, Pl, Dl, Ll, Nl, xl, Ml, Vl, Bl, Fl, Gl, kl, jl, Hl, ql, Yl, zl, Kl, Xl, Wl, Jl, Ql, Zl, $l, tc, ec = {
        5: [.153388, .221461, .250301],
        7: [.071303, .131514, .189879, .214607],
        9: [.028532, .067234, .124009, .179044, .20236],
        11: [.0093, .028002, .065984, .121703, .175713, .198596],
        13: [.002406, .009255, .027867, .065666, .121117, .174868, .197641],
        15: [489e-6, .002403, .009246, .02784, .065602, .120999, .174697, .197448]
    }, ic = ["varying vec2 vBlurTexCoords[%size%];", "uniform sampler2D uSampler;", "void main(void)", "{", "    gl_FragColor = vec4(0.0);", "    %blur%", "}"].join("\n");
    (Tl = ml = ml || {})[Tl.WEBGL_LEGACY = 0] = "WEBGL_LEGACY",
    Tl[Tl.WEBGL = 1] = "WEBGL",
    Tl[Tl.WEBGL2 = 2] = "WEBGL2",
    (vl = gl = gl || {})[vl.UNKNOWN = 0] = "UNKNOWN",
    vl[vl.WEBGL = 1] = "WEBGL",
    vl[vl.CANVAS = 2] = "CANVAS",
    (Sl = El = El || {})[Sl.COLOR = 16384] = "COLOR",
    Sl[Sl.DEPTH = 256] = "DEPTH",
    Sl[Sl.STENCIL = 1024] = "STENCIL",
    (Il = bl = bl || {})[Il.NORMAL = 0] = "NORMAL",
    Il[Il.ADD = 1] = "ADD",
    Il[Il.MULTIPLY = 2] = "MULTIPLY",
    Il[Il.SCREEN = 3] = "SCREEN",
    Il[Il.OVERLAY = 4] = "OVERLAY",
    Il[Il.DARKEN = 5] = "DARKEN",
    Il[Il.LIGHTEN = 6] = "LIGHTEN",
    Il[Il.COLOR_DODGE = 7] = "COLOR_DODGE",
    Il[Il.COLOR_BURN = 8] = "COLOR_BURN",
    Il[Il.HARD_LIGHT = 9] = "HARD_LIGHT",
    Il[Il.SOFT_LIGHT = 10] = "SOFT_LIGHT",
    Il[Il.DIFFERENCE = 11] = "DIFFERENCE",
    Il[Il.EXCLUSION = 12] = "EXCLUSION",
    Il[Il.HUE = 13] = "HUE",
    Il[Il.SATURATION = 14] = "SATURATION",
    Il[Il.COLOR = 15] = "COLOR",
    Il[Il.LUMINOSITY = 16] = "LUMINOSITY",
    Il[Il.NORMAL_NPM = 17] = "NORMAL_NPM",
    Il[Il.ADD_NPM = 18] = "ADD_NPM",
    Il[Il.SCREEN_NPM = 19] = "SCREEN_NPM",
    Il[Il.NONE = 20] = "NONE",
    Il[Il.SRC_OVER = 0] = "SRC_OVER",
    Il[Il.SRC_IN = 21] = "SRC_IN",
    Il[Il.SRC_OUT = 22] = "SRC_OUT",
    Il[Il.SRC_ATOP = 23] = "SRC_ATOP",
    Il[Il.DST_OVER = 24] = "DST_OVER",
    Il[Il.DST_IN = 25] = "DST_IN",
    Il[Il.DST_OUT = 26] = "DST_OUT",
    Il[Il.DST_ATOP = 27] = "DST_ATOP",
    Il[Il.ERASE = 26] = "ERASE",
    Il[Il.SUBTRACT = 28] = "SUBTRACT",
    Il[Il.XOR = 29] = "XOR",
    (Ul = Cl = Cl || {})[Ul.POINTS = 0] = "POINTS",
    Ul[Ul.LINES = 1] = "LINES",
    Ul[Ul.LINE_LOOP = 2] = "LINE_LOOP",
    Ul[Ul.LINE_STRIP = 3] = "LINE_STRIP",
    Ul[Ul.TRIANGLES = 4] = "TRIANGLES",
    Ul[Ul.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP",
    Ul[Ul.TRIANGLE_FAN = 6] = "TRIANGLE_FAN",
    (wl = Al = Al || {})[wl.RGBA = 6408] = "RGBA",
    wl[wl.RGB = 6407] = "RGB",
    wl[wl.RG = 33319] = "RG",
    wl[wl.RED = 6403] = "RED",
    wl[wl.RGBA_INTEGER = 36249] = "RGBA_INTEGER",
    wl[wl.RGB_INTEGER = 36248] = "RGB_INTEGER",
    wl[wl.RG_INTEGER = 33320] = "RG_INTEGER",
    wl[wl.RED_INTEGER = 36244] = "RED_INTEGER",
    wl[wl.ALPHA = 6406] = "ALPHA",
    wl[wl.LUMINANCE = 6409] = "LUMINANCE",
    wl[wl.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA",
    wl[wl.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT",
    wl[wl.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL",
    (Rl = Ol = Ol || {})[Rl.TEXTURE_2D = 3553] = "TEXTURE_2D",
    Rl[Rl.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP",
    Rl[Rl.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY",
    Rl[Rl.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X",
    Rl[Rl.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X",
    Rl[Rl.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y",
    Rl[Rl.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y",
    Rl[Rl.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z",
    Rl[Rl.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z",
    (Dl = Pl = Pl || {})[Dl.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE",
    Dl[Dl.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT",
    Dl[Dl.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5",
    Dl[Dl.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4",
    Dl[Dl.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1",
    Dl[Dl.UNSIGNED_INT = 5125] = "UNSIGNED_INT",
    Dl[Dl.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV",
    Dl[Dl.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV",
    Dl[Dl.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8",
    Dl[Dl.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV",
    Dl[Dl.BYTE = 5120] = "BYTE",
    Dl[Dl.SHORT = 5122] = "SHORT",
    Dl[Dl.INT = 5124] = "INT",
    Dl[Dl.FLOAT = 5126] = "FLOAT",
    Dl[Dl.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV",
    Dl[Dl.HALF_FLOAT = 36193] = "HALF_FLOAT",
    (Nl = Ll = Ll || {})[Nl.FLOAT = 0] = "FLOAT",
    Nl[Nl.INT = 1] = "INT",
    Nl[Nl.UINT = 2] = "UINT",
    (Ml = xl = xl || {})[Ml.NEAREST = 0] = "NEAREST",
    Ml[Ml.LINEAR = 1] = "LINEAR",
    (Bl = Vl = Vl || {})[Bl.CLAMP = 33071] = "CLAMP",
    Bl[Bl.REPEAT = 10497] = "REPEAT",
    Bl[Bl.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT",
    (Gl = Fl = Fl || {})[Gl.OFF = 0] = "OFF",
    Gl[Gl.POW2 = 1] = "POW2",
    Gl[Gl.ON = 2] = "ON",
    Gl[Gl.ON_MANUAL = 3] = "ON_MANUAL",
    (jl = kl = kl || {})[jl.NPM = 0] = "NPM",
    jl[jl.UNPACK = 1] = "UNPACK",
    jl[jl.PMA = 2] = "PMA",
    jl[jl.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA",
    jl[jl.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD",
    jl[jl.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA",
    jl[jl.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA",
    (ql = Hl = Hl || {})[ql.NO = 0] = "NO",
    ql[ql.YES = 1] = "YES",
    ql[ql.AUTO = 2] = "AUTO",
    ql[ql.BLEND = 0] = "BLEND",
    ql[ql.CLEAR = 1] = "CLEAR",
    ql[ql.BLIT = 2] = "BLIT",
    (zl = Yl = Yl || {})[zl.AUTO = 0] = "AUTO",
    zl[zl.MANUAL = 1] = "MANUAL",
    (Xl = Kl = Kl || {}).LOW = "lowp",
    Xl.MEDIUM = "mediump",
    Xl.HIGH = "highp",
    (Jl = Wl = Wl || {})[Jl.NONE = 0] = "NONE",
    Jl[Jl.SCISSOR = 1] = "SCISSOR",
    Jl[Jl.STENCIL = 2] = "STENCIL",
    Jl[Jl.SPRITE = 3] = "SPRITE",
    (Zl = Ql = Ql || {})[Zl.NONE = 0] = "NONE",
    Zl[Zl.LOW = 2] = "LOW",
    Zl[Zl.MEDIUM = 4] = "MEDIUM",
    Zl[Zl.HIGH = 8] = "HIGH",
    (tc = $l = $l || {})[tc.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER",
    tc[tc.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER",
    tc[tc.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
    var rc, nc = (__extends$6(BlurFilterPass, rc = En),
    BlurFilterPass.prototype.apply = function(t, e, i, r) {
        if (i ? this.horizontal ? this.uniforms.strength = 1 / i.width * (i.width / e.width) : this.uniforms.strength = 1 / i.height * (i.height / e.height) : this.horizontal ? this.uniforms.strength = 1 / t.renderer.width * (t.renderer.width / e.width) : this.uniforms.strength = 1 / t.renderer.height * (t.renderer.height / e.height),
        this.uniforms.strength *= this.strength,
        this.uniforms.strength /= this.passes,
        1 === this.passes)
            t.applyFilter(this, e, i, r);
        else {
            var n = t.getFilterTexture()
              , o = t.renderer
              , s = e
              , a = n;
            this.state.blend = !1,
            t.applyFilter(this, s, a, Hl.CLEAR);
            for (var l = 1; l < this.passes - 1; l++) {
                t.bindAndClear(s, Hl.BLIT);
                var c = this.uniforms.uSampler = a;
                a = s,
                s = c,
                o.shader.bind(this),
                o.geometry.draw(5)
            }
            this.state.blend = !0,
            t.applyFilter(this, a, i, r),
            t.returnFilterTexture(n)
        }
    }
    ,
    Object.defineProperty(BlurFilterPass.prototype, "blur", {
        get: function() {
            return this.strength
        },
        set: function(t) {
            this.padding = 1 + 2 * Math.abs(t),
            this.strength = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BlurFilterPass.prototype, "quality", {
        get: function() {
            return this._quality
        },
        set: function(t) {
            this._quality = t,
            this.passes = t
        },
        enumerable: !1,
        configurable: !0
    }),
    BlurFilterPass);
    function BlurFilterPass(t, e, i, r, n) {
        void 0 === e && (e = 8),
        void 0 === i && (i = 4),
        void 0 === r && (r = pt.FILTER_RESOLUTION),
        void 0 === n && (n = 5);
        var o = this
          , s = function generateBlurVertSource(t, e) {
            var i, r = Math.ceil(t / 2), n = fl, o = "";
            i = e ? "vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);" : "vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";
            for (var s = 0; s < t; s++) {
                var a = i.replace("%index%", s.toString());
                o += a = a.replace("%sampleIndex%", s - (r - 1) + ".0"),
                o += "\n"
            }
            return n = (n = n.replace("%blur%", o)).replace("%size%", t.toString())
        }(n, t)
          , a = function generateBlurFragSource(t) {
            for (var e, i = ec[t], r = i.length, n = ic, o = "", s = 0; s < t; s++) {
                var a = "gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%", s.toString());
                r <= (e = s) && (e = t - s - 1),
                o += a = a.replace("%value%", i[e].toString()),
                o += "\n"
            }
            return n = (n = n.replace("%blur%", o)).replace("%size%", t.toString())
        }(n);
        return (o = rc.call(this, s, a) || this).horizontal = t,
        o.resolution = r,
        o._quality = 0,
        o.quality = i,
        o.blur = e,
        o
    }
    var oc, sc = (__extends$6(BlurFilter, oc = En),
    BlurFilter.prototype.apply = function(t, e, i, r) {
        var n = Math.abs(this.blurXFilter.strength)
          , o = Math.abs(this.blurYFilter.strength);
        if (n && o) {
            var s = t.getFilterTexture();
            this.blurXFilter.apply(t, e, s, Hl.CLEAR),
            this.blurYFilter.apply(t, s, i, r),
            t.returnFilterTexture(s)
        } else
            o ? this.blurYFilter.apply(t, e, i, r) : this.blurXFilter.apply(t, e, i, r)
    }
    ,
    BlurFilter.prototype.updatePadding = function() {
        this._repeatEdgePixels ? this.padding = 0 : this.padding = 2 * Math.max(Math.abs(this.blurXFilter.strength), Math.abs(this.blurYFilter.strength))
    }
    ,
    Object.defineProperty(BlurFilter.prototype, "blur", {
        get: function() {
            return this.blurXFilter.blur
        },
        set: function(t) {
            this.blurXFilter.blur = this.blurYFilter.blur = t,
            this.updatePadding()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BlurFilter.prototype, "quality", {
        get: function() {
            return this.blurXFilter.quality
        },
        set: function(t) {
            this.blurXFilter.quality = this.blurYFilter.quality = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BlurFilter.prototype, "blurX", {
        get: function() {
            return this.blurXFilter.blur
        },
        set: function(t) {
            this.blurXFilter.blur = t,
            this.updatePadding()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BlurFilter.prototype, "blurY", {
        get: function() {
            return this.blurYFilter.blur
        },
        set: function(t) {
            this.blurYFilter.blur = t,
            this.updatePadding()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BlurFilter.prototype, "blendMode", {
        get: function() {
            return this.blurYFilter.blendMode
        },
        set: function(t) {
            this.blurYFilter.blendMode = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BlurFilter.prototype, "repeatEdgePixels", {
        get: function() {
            return this._repeatEdgePixels
        },
        set: function(t) {
            this._repeatEdgePixels = t,
            this.updatePadding()
        },
        enumerable: !1,
        configurable: !0
    }),
    BlurFilter);
    function BlurFilter(t, e, i, r) {
        void 0 === t && (t = 8),
        void 0 === e && (e = 4),
        void 0 === i && (i = pt.FILTER_RESOLUTION),
        void 0 === r && (r = 5);
        var n = oc.call(this) || this;
        return n.blurXFilter = new nc(!0,t,e,i,r),
        n.blurYFilter = new nc(!1,t,e,i,r),
        n.resolution = i,
        n.quality = e,
        n.blur = t,
        n.repeatEdgePixels = !1,
        n
    }
    var ac = function(t, e) {
        return (ac = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    var lc, cc = (function __extends$5(t, e) {
        function __() {
            this.constructor = t
        }
        ac(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }(ColorMatrixFilter, lc = En),
    ColorMatrixFilter.prototype._loadMatrix = function(t, e) {
        void 0 === e && (e = !1);
        var i = t;
        e && (this._multiply(i, this.uniforms.m, t),
        i = this._colorMatrix(i)),
        this.uniforms.m = i
    }
    ,
    ColorMatrixFilter.prototype._multiply = function(t, e, i) {
        return t[0] = e[0] * i[0] + e[1] * i[5] + e[2] * i[10] + e[3] * i[15],
        t[1] = e[0] * i[1] + e[1] * i[6] + e[2] * i[11] + e[3] * i[16],
        t[2] = e[0] * i[2] + e[1] * i[7] + e[2] * i[12] + e[3] * i[17],
        t[3] = e[0] * i[3] + e[1] * i[8] + e[2] * i[13] + e[3] * i[18],
        t[4] = e[0] * i[4] + e[1] * i[9] + e[2] * i[14] + e[3] * i[19] + e[4],
        t[5] = e[5] * i[0] + e[6] * i[5] + e[7] * i[10] + e[8] * i[15],
        t[6] = e[5] * i[1] + e[6] * i[6] + e[7] * i[11] + e[8] * i[16],
        t[7] = e[5] * i[2] + e[6] * i[7] + e[7] * i[12] + e[8] * i[17],
        t[8] = e[5] * i[3] + e[6] * i[8] + e[7] * i[13] + e[8] * i[18],
        t[9] = e[5] * i[4] + e[6] * i[9] + e[7] * i[14] + e[8] * i[19] + e[9],
        t[10] = e[10] * i[0] + e[11] * i[5] + e[12] * i[10] + e[13] * i[15],
        t[11] = e[10] * i[1] + e[11] * i[6] + e[12] * i[11] + e[13] * i[16],
        t[12] = e[10] * i[2] + e[11] * i[7] + e[12] * i[12] + e[13] * i[17],
        t[13] = e[10] * i[3] + e[11] * i[8] + e[12] * i[13] + e[13] * i[18],
        t[14] = e[10] * i[4] + e[11] * i[9] + e[12] * i[14] + e[13] * i[19] + e[14],
        t[15] = e[15] * i[0] + e[16] * i[5] + e[17] * i[10] + e[18] * i[15],
        t[16] = e[15] * i[1] + e[16] * i[6] + e[17] * i[11] + e[18] * i[16],
        t[17] = e[15] * i[2] + e[16] * i[7] + e[17] * i[12] + e[18] * i[17],
        t[18] = e[15] * i[3] + e[16] * i[8] + e[17] * i[13] + e[18] * i[18],
        t[19] = e[15] * i[4] + e[16] * i[9] + e[17] * i[14] + e[18] * i[19] + e[19],
        t
    }
    ,
    ColorMatrixFilter.prototype._colorMatrix = function(t) {
        var e = new Float32Array(t);
        return e[4] /= 255,
        e[9] /= 255,
        e[14] /= 255,
        e[19] /= 255,
        e
    }
    ,
    ColorMatrixFilter.prototype.brightness = function(t, e) {
        var i = [t, 0, 0, 0, 0, 0, t, 0, 0, 0, 0, 0, t, 0, 0, 0, 0, 0, 1, 0];
        this._loadMatrix(i, e)
    }
    ,
    ColorMatrixFilter.prototype.tint = function(t, e) {
        var i = [(t >> 16 & 255) / 255, 0, 0, 0, 0, 0, (t >> 8 & 255) / 255, 0, 0, 0, 0, 0, (255 & t) / 255, 0, 0, 0, 0, 0, 1, 0];
        this._loadMatrix(i, e)
    }
    ,
    ColorMatrixFilter.prototype.greyscale = function(t, e) {
        var i = [t, t, t, 0, 0, t, t, t, 0, 0, t, t, t, 0, 0, 0, 0, 0, 1, 0];
        this._loadMatrix(i, e)
    }
    ,
    ColorMatrixFilter.prototype.blackAndWhite = function(t) {
        this._loadMatrix([.3, .6, .1, 0, 0, .3, .6, .1, 0, 0, .3, .6, .1, 0, 0, 0, 0, 0, 1, 0], t)
    }
    ,
    ColorMatrixFilter.prototype.hue = function(t, e) {
        t = (t || 0) / 180 * Math.PI;
        var i = Math.cos(t)
          , r = Math.sin(t)
          , n = (0,
        Math.sqrt)(1 / 3)
          , o = [i + 1 / 3 * (1 - i), 1 / 3 * (1 - i) - n * r, 1 / 3 * (1 - i) + n * r, 0, 0, 1 / 3 * (1 - i) + n * r, i + 1 / 3 * (1 - i), 1 / 3 * (1 - i) - n * r, 0, 0, 1 / 3 * (1 - i) - n * r, 1 / 3 * (1 - i) + n * r, i + 1 / 3 * (1 - i), 0, 0, 0, 0, 0, 1, 0];
        this._loadMatrix(o, e)
    }
    ,
    ColorMatrixFilter.prototype.contrast = function(t, e) {
        var i = (t || 0) + 1
          , r = -.5 * (i - 1)
          , n = [i, 0, 0, 0, r, 0, i, 0, 0, r, 0, 0, i, 0, r, 0, 0, 0, 1, 0];
        this._loadMatrix(n, e)
    }
    ,
    ColorMatrixFilter.prototype.saturate = function(t, e) {
        void 0 === t && (t = 0);
        var i = 2 * t / 3 + 1
          , r = -.5 * (i - 1)
          , n = [i, r, r, 0, 0, r, i, r, 0, 0, r, r, i, 0, 0, 0, 0, 0, 1, 0];
        this._loadMatrix(n, e)
    }
    ,
    ColorMatrixFilter.prototype.desaturate = function() {
        this.saturate(-1)
    }
    ,
    ColorMatrixFilter.prototype.negative = function(t) {
        this._loadMatrix([-1, 0, 0, 1, 0, 0, -1, 0, 1, 0, 0, 0, -1, 1, 0, 0, 0, 0, 1, 0], t)
    }
    ,
    ColorMatrixFilter.prototype.sepia = function(t) {
        this._loadMatrix([.393, .7689999, .18899999, 0, 0, .349, .6859999, .16799999, 0, 0, .272, .5339999, .13099999, 0, 0, 0, 0, 0, 1, 0], t)
    }
    ,
    ColorMatrixFilter.prototype.technicolor = function(t) {
        this._loadMatrix([1.9125277891456083, -.8545344976951645, -.09155508482755585, 0, 11.793603434377337, -.3087833385928097, 1.7658908555458428, -.10601743074722245, 0, -70.35205161461398, -.231103377548616, -.7501899197440212, 1.847597816108189, 0, 30.950940869491138, 0, 0, 0, 1, 0], t)
    }
    ,
    ColorMatrixFilter.prototype.polaroid = function(t) {
        this._loadMatrix([1.438, -.062, -.062, 0, 0, -.122, 1.378, -.122, 0, 0, -.016, -.016, 1.483, 0, 0, 0, 0, 0, 1, 0], t)
    }
    ,
    ColorMatrixFilter.prototype.toBGR = function(t) {
        this._loadMatrix([0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0], t)
    }
    ,
    ColorMatrixFilter.prototype.kodachrome = function(t) {
        this._loadMatrix([1.1285582396593525, -.3967382283601348, -.03992559172921793, 0, 63.72958762196502, -.16404339962244616, 1.0835251566291304, -.05498805115633132, 0, 24.732407896706203, -.16786010706155763, -.5603416277695248, 1.6014850761964943, 0, 35.62982807460946, 0, 0, 0, 1, 0], t)
    }
    ,
    ColorMatrixFilter.prototype.browni = function(t) {
        this._loadMatrix([.5997023498159715, .34553243048391263, -.2708298674538042, 0, 47.43192855600873, -.037703249837783157, .8609577587992641, .15059552388459913, 0, -36.96841498319127, .24113635128153335, -.07441037908422492, .44972182064877153, 0, -7.562075277591283, 0, 0, 0, 1, 0], t)
    }
    ,
    ColorMatrixFilter.prototype.vintage = function(t) {
        this._loadMatrix([.6279345635605994, .3202183420819367, -.03965408211312453, 0, 9.651285835294123, .02578397704808868, .6441188644374771, .03259127616149294, 0, 7.462829176470591, .0466055556782719, -.0851232987247891, .5241648018700465, 0, 5.159190588235296, 0, 0, 0, 1, 0], t)
    }
    ,
    ColorMatrixFilter.prototype.colorTone = function(t, e, i, r, n) {
        var o = ((i = i || 16770432) >> 16 & 255) / 255
          , s = (i >> 8 & 255) / 255
          , a = (255 & i) / 255
          , l = ((r = r || 3375104) >> 16 & 255) / 255
          , c = (r >> 8 & 255) / 255
          , u = (255 & r) / 255
          , p = [.3, .59, .11, 0, 0, o, s, a, t = t || .2, 0, l, c, u, e = e || .15, 0, o - l, s - c, a - u, 0, 0];
        this._loadMatrix(p, n)
    }
    ,
    ColorMatrixFilter.prototype.night = function(t, e) {
        var i = [-2 * (t = t || .1), -t, 0, 0, 0, -t, 0, t, 0, 0, 0, t, 2 * t, 0, 0, 0, 0, 0, 1, 0];
        this._loadMatrix(i, e)
    }
    ,
    ColorMatrixFilter.prototype.predator = function(t, e) {
        var i = [11.224130630493164 * t, -4.794486999511719 * t, -2.8746118545532227 * t, 0 * t, .40342438220977783 * t, -3.6330697536468506 * t, 9.193157196044922 * t, -2.951810836791992 * t, 0 * t, -1.316135048866272 * t, -3.2184197902679443 * t, -4.2375030517578125 * t, 7.476448059082031 * t, 0 * t, .8044459223747253 * t, 0, 0, 0, 1, 0];
        this._loadMatrix(i, e)
    }
    ,
    ColorMatrixFilter.prototype.lsd = function(t) {
        this._loadMatrix([2, -.4, .5, 0, 0, -.5, 2, -.4, 0, 0, -.4, -.5, 3, 0, 0, 0, 0, 0, 1, 0], t)
    }
    ,
    ColorMatrixFilter.prototype.reset = function() {
        this._loadMatrix([1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0], !1)
    }
    ,
    Object.defineProperty(ColorMatrixFilter.prototype, "matrix", {
        get: function() {
            return this.uniforms.m
        },
        set: function(t) {
            this.uniforms.m = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(ColorMatrixFilter.prototype, "alpha", {
        get: function() {
            return this.uniforms.uAlpha
        },
        set: function(t) {
            this.uniforms.uAlpha = t
        },
        enumerable: !1,
        configurable: !0
    }),
    ColorMatrixFilter);
    function ColorMatrixFilter() {
        var t = this
          , e = {
            m: new Float32Array([1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0]),
            uAlpha: 1
        };
        return (t = lc.call(this, io, "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n", e) || this).alpha = 1,
        t
    }
    cc.prototype.grayscale = cc.prototype.greyscale;
    var uc = function(t, e) {
        return (uc = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    var pc, hc = (function __extends$4(t, e) {
        function __() {
            this.constructor = t
        }
        uc(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }(DisplacementFilter, pc = En),
    DisplacementFilter.prototype.apply = function(t, e, i, r) {
        this.uniforms.filterMatrix = t.calculateSpriteMatrix(this.maskMatrix, this.maskSprite),
        this.uniforms.scale.x = this.scale.x,
        this.uniforms.scale.y = this.scale.y;
        var n = this.maskSprite.worldTransform
          , o = Math.sqrt(n.a * n.a + n.b * n.b)
          , s = Math.sqrt(n.c * n.c + n.d * n.d);
        0 !== o && 0 !== s && (this.uniforms.rotation[0] = n.a / o,
        this.uniforms.rotation[1] = n.b / o,
        this.uniforms.rotation[2] = n.c / s,
        this.uniforms.rotation[3] = n.d / s),
        t.applyFilter(this, e, i, r)
    }
    ,
    Object.defineProperty(DisplacementFilter.prototype, "map", {
        get: function() {
            return this.uniforms.mapSampler
        },
        set: function(t) {
            this.uniforms.mapSampler = t
        },
        enumerable: !1,
        configurable: !0
    }),
    DisplacementFilter);
    function DisplacementFilter(t, e) {
        var i = this
          , r = new Ce;
        return t.renderable = !1,
        (i = pc.call(this, "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n", "varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n", {
            mapSampler: t._texture,
            filterMatrix: r,
            scale: {
                x: 1,
                y: 1
            },
            rotation: new Float32Array([1, 0, 0, 1])
        }) || this).maskSprite = t,
        i.maskMatrix = r,
        null == e && (e = 20),
        i.scale = new me(e,e),
        i
    }
    var dc = function(t, e) {
        return (dc = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    var _c, yc = (function __extends$3(t, e) {
        function __() {
            this.constructor = t
        }
        dc(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }(FXAAFilter, _c = En),
    FXAAFilter);
    function FXAAFilter() {
        return _c.call(this, "\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n", 'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n') || this
    }
    var fc = function(t, e) {
        return (fc = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    var mc, Tc, gc, vc, Ec, Sc, bc, Ic, Cc, Uc, Ac, wc, Oc, Rc, Pc, Dc, Lc, Nc, xc, Mc, Vc, Bc, Fc, Gc, kc, jc, Hc, qc, Yc, zc, Kc, Xc, Wc, Jc, Qc, Zc, $c, tu, eu, iu = (function __extends$2(t, e) {
        function __() {
            this.constructor = t
        }
        fc(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }(NoiseFilter, mc = En),
    Object.defineProperty(NoiseFilter.prototype, "noise", {
        get: function() {
            return this.uniforms.uNoise
        },
        set: function(t) {
            this.uniforms.uNoise = t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(NoiseFilter.prototype, "seed", {
        get: function() {
            return this.uniforms.uSeed
        },
        set: function(t) {
            this.uniforms.uSeed = t
        },
        enumerable: !1,
        configurable: !0
    }),
    NoiseFilter);
    function NoiseFilter(t, e) {
        void 0 === t && (t = .5),
        void 0 === e && (e = Math.random());
        var i = mc.call(this, io, "precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n", {
            uNoise: 0,
            uSeed: 0
        }) || this;
        return i.noise = t,
        i.seed = e,
        i
    }
    (gc = Tc = Tc || {})[gc.WEBGL_LEGACY = 0] = "WEBGL_LEGACY",
    gc[gc.WEBGL = 1] = "WEBGL",
    gc[gc.WEBGL2 = 2] = "WEBGL2",
    (Ec = vc = vc || {})[Ec.UNKNOWN = 0] = "UNKNOWN",
    Ec[Ec.WEBGL = 1] = "WEBGL",
    Ec[Ec.CANVAS = 2] = "CANVAS",
    (bc = Sc = Sc || {})[bc.COLOR = 16384] = "COLOR",
    bc[bc.DEPTH = 256] = "DEPTH",
    bc[bc.STENCIL = 1024] = "STENCIL",
    (Cc = Ic = Ic || {})[Cc.NORMAL = 0] = "NORMAL",
    Cc[Cc.ADD = 1] = "ADD",
    Cc[Cc.MULTIPLY = 2] = "MULTIPLY",
    Cc[Cc.SCREEN = 3] = "SCREEN",
    Cc[Cc.OVERLAY = 4] = "OVERLAY",
    Cc[Cc.DARKEN = 5] = "DARKEN",
    Cc[Cc.LIGHTEN = 6] = "LIGHTEN",
    Cc[Cc.COLOR_DODGE = 7] = "COLOR_DODGE",
    Cc[Cc.COLOR_BURN = 8] = "COLOR_BURN",
    Cc[Cc.HARD_LIGHT = 9] = "HARD_LIGHT",
    Cc[Cc.SOFT_LIGHT = 10] = "SOFT_LIGHT",
    Cc[Cc.DIFFERENCE = 11] = "DIFFERENCE",
    Cc[Cc.EXCLUSION = 12] = "EXCLUSION",
    Cc[Cc.HUE = 13] = "HUE",
    Cc[Cc.SATURATION = 14] = "SATURATION",
    Cc[Cc.COLOR = 15] = "COLOR",
    Cc[Cc.LUMINOSITY = 16] = "LUMINOSITY",
    Cc[Cc.NORMAL_NPM = 17] = "NORMAL_NPM",
    Cc[Cc.ADD_NPM = 18] = "ADD_NPM",
    Cc[Cc.SCREEN_NPM = 19] = "SCREEN_NPM",
    Cc[Cc.NONE = 20] = "NONE",
    Cc[Cc.SRC_OVER = 0] = "SRC_OVER",
    Cc[Cc.SRC_IN = 21] = "SRC_IN",
    Cc[Cc.SRC_OUT = 22] = "SRC_OUT",
    Cc[Cc.SRC_ATOP = 23] = "SRC_ATOP",
    Cc[Cc.DST_OVER = 24] = "DST_OVER",
    Cc[Cc.DST_IN = 25] = "DST_IN",
    Cc[Cc.DST_OUT = 26] = "DST_OUT",
    Cc[Cc.DST_ATOP = 27] = "DST_ATOP",
    Cc[Cc.ERASE = 26] = "ERASE",
    Cc[Cc.SUBTRACT = 28] = "SUBTRACT",
    Cc[Cc.XOR = 29] = "XOR",
    (Ac = Uc = Uc || {})[Ac.POINTS = 0] = "POINTS",
    Ac[Ac.LINES = 1] = "LINES",
    Ac[Ac.LINE_LOOP = 2] = "LINE_LOOP",
    Ac[Ac.LINE_STRIP = 3] = "LINE_STRIP",
    Ac[Ac.TRIANGLES = 4] = "TRIANGLES",
    Ac[Ac.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP",
    Ac[Ac.TRIANGLE_FAN = 6] = "TRIANGLE_FAN",
    (Oc = wc = wc || {})[Oc.RGBA = 6408] = "RGBA",
    Oc[Oc.RGB = 6407] = "RGB",
    Oc[Oc.RG = 33319] = "RG",
    Oc[Oc.RED = 6403] = "RED",
    Oc[Oc.RGBA_INTEGER = 36249] = "RGBA_INTEGER",
    Oc[Oc.RGB_INTEGER = 36248] = "RGB_INTEGER",
    Oc[Oc.RG_INTEGER = 33320] = "RG_INTEGER",
    Oc[Oc.RED_INTEGER = 36244] = "RED_INTEGER",
    Oc[Oc.ALPHA = 6406] = "ALPHA",
    Oc[Oc.LUMINANCE = 6409] = "LUMINANCE",
    Oc[Oc.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA",
    Oc[Oc.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT",
    Oc[Oc.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL",
    (Pc = Rc = Rc || {})[Pc.TEXTURE_2D = 3553] = "TEXTURE_2D",
    Pc[Pc.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP",
    Pc[Pc.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY",
    Pc[Pc.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X",
    Pc[Pc.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X",
    Pc[Pc.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y",
    Pc[Pc.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y",
    Pc[Pc.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z",
    Pc[Pc.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z",
    (Lc = Dc = Dc || {})[Lc.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE",
    Lc[Lc.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT",
    Lc[Lc.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5",
    Lc[Lc.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4",
    Lc[Lc.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1",
    Lc[Lc.UNSIGNED_INT = 5125] = "UNSIGNED_INT",
    Lc[Lc.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV",
    Lc[Lc.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV",
    Lc[Lc.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8",
    Lc[Lc.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV",
    Lc[Lc.BYTE = 5120] = "BYTE",
    Lc[Lc.SHORT = 5122] = "SHORT",
    Lc[Lc.INT = 5124] = "INT",
    Lc[Lc.FLOAT = 5126] = "FLOAT",
    Lc[Lc.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV",
    Lc[Lc.HALF_FLOAT = 36193] = "HALF_FLOAT",
    (xc = Nc = Nc || {})[xc.FLOAT = 0] = "FLOAT",
    xc[xc.INT = 1] = "INT",
    xc[xc.UINT = 2] = "UINT",
    (Vc = Mc = Mc || {})[Vc.NEAREST = 0] = "NEAREST",
    Vc[Vc.LINEAR = 1] = "LINEAR",
    (Fc = Bc = Bc || {})[Fc.CLAMP = 33071] = "CLAMP",
    Fc[Fc.REPEAT = 10497] = "REPEAT",
    Fc[Fc.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT",
    (kc = Gc = Gc || {})[kc.OFF = 0] = "OFF",
    kc[kc.POW2 = 1] = "POW2",
    kc[kc.ON = 2] = "ON",
    kc[kc.ON_MANUAL = 3] = "ON_MANUAL",
    (Hc = jc = jc || {})[Hc.NPM = 0] = "NPM",
    Hc[Hc.UNPACK = 1] = "UNPACK",
    Hc[Hc.PMA = 2] = "PMA",
    Hc[Hc.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA",
    Hc[Hc.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD",
    Hc[Hc.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA",
    Hc[Hc.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA",
    (Yc = qc = qc || {})[Yc.NO = 0] = "NO",
    Yc[Yc.YES = 1] = "YES",
    Yc[Yc.AUTO = 2] = "AUTO",
    Yc[Yc.BLEND = 0] = "BLEND",
    Yc[Yc.CLEAR = 1] = "CLEAR",
    Yc[Yc.BLIT = 2] = "BLIT",
    (Kc = zc = zc || {})[Kc.AUTO = 0] = "AUTO",
    Kc[Kc.MANUAL = 1] = "MANUAL",
    (Wc = Xc = Xc || {}).LOW = "lowp",
    Wc.MEDIUM = "mediump",
    Wc.HIGH = "highp",
    (Qc = Jc = Jc || {})[Qc.NONE = 0] = "NONE",
    Qc[Qc.SCISSOR = 1] = "SCISSOR",
    Qc[Qc.STENCIL = 2] = "STENCIL",
    Qc[Qc.SPRITE = 3] = "SPRITE",
    ($c = Zc = Zc || {})[$c.NONE = 0] = "NONE",
    $c[$c.LOW = 2] = "LOW",
    $c[$c.MEDIUM = 4] = "MEDIUM",
    $c[$c.HIGH = 8] = "HIGH",
    (eu = tu = tu || {})[eu.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER",
    eu[eu.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER",
    eu[eu.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
    var ru = new Ce;
    Be.prototype._cacheAsBitmap = !1,
    Be.prototype._cacheData = null,
    Be.prototype._cacheAsBitmapResolution = null,
    Be.prototype._cacheAsBitmapMultisample = Zc.NONE;
    var nu = function CacheData() {
        this.textureCacheId = null,
        this.originalRender = null,
        this.originalRenderCanvas = null,
        this.originalCalculateBounds = null,
        this.originalGetLocalBounds = null,
        this.originalUpdateTransform = null,
        this.originalDestroy = null,
        this.originalMask = null,
        this.originalFilterArea = null,
        this.originalContainsPoint = null,
        this.sprite = null
    };
    Object.defineProperties(Be.prototype, {
        cacheAsBitmapResolution: {
            get: function() {
                return this._cacheAsBitmapResolution
            },
            set: function(t) {
                t !== this._cacheAsBitmapResolution && (this._cacheAsBitmapResolution = t,
                this.cacheAsBitmap && (this.cacheAsBitmap = !1,
                this.cacheAsBitmap = !0))
            }
        },
        cacheAsBitmapMultisample: {
            get: function() {
                return this._cacheAsBitmapMultisample
            },
            set: function(t) {
                t !== this._cacheAsBitmapMultisample && (this._cacheAsBitmapMultisample = t,
                this.cacheAsBitmap && (this.cacheAsBitmap = !1,
                this.cacheAsBitmap = !0))
            }
        },
        cacheAsBitmap: {
            get: function() {
                return this._cacheAsBitmap
            },
            set: function(t) {
                var e;
                this._cacheAsBitmap !== t && ((this._cacheAsBitmap = t) ? (this._cacheData || (this._cacheData = new nu),
                (e = this._cacheData).originalRender = this.render,
                e.originalRenderCanvas = this.renderCanvas,
                e.originalUpdateTransform = this.updateTransform,
                e.originalCalculateBounds = this.calculateBounds,
                e.originalGetLocalBounds = this.getLocalBounds,
                e.originalDestroy = this.destroy,
                e.originalContainsPoint = this.containsPoint,
                e.originalMask = this._mask,
                e.originalFilterArea = this.filterArea,
                this.render = this._renderCached,
                this.renderCanvas = this._renderCachedCanvas,
                this.destroy = this._cacheAsBitmapDestroy) : ((e = this._cacheData).sprite && this._destroyCachedDisplayObject(),
                this.render = e.originalRender,
                this.renderCanvas = e.originalRenderCanvas,
                this.calculateBounds = e.originalCalculateBounds,
                this.getLocalBounds = e.originalGetLocalBounds,
                this.destroy = e.originalDestroy,
                this.updateTransform = e.originalUpdateTransform,
                this.containsPoint = e.originalContainsPoint,
                this._mask = e.originalMask,
                this.filterArea = e.originalFilterArea))
            }
        }
    }),
    Be.prototype._renderCached = function _renderCached(t) {
        !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObject(t),
        this._cacheData.sprite.transform._worldID = this.transform._worldID,
        this._cacheData.sprite.worldAlpha = this.worldAlpha,
        this._cacheData.sprite._render(t))
    }
    ,
    Be.prototype._initCachedDisplayObject = function _initCachedDisplayObject(t) {
        var e;
        if (!this._cacheData || !this._cacheData.sprite) {
            var i = this.alpha;
            this.alpha = 1,
            t.batch.flush();
            var r = this.getLocalBounds(null, !0).clone();
            if (this.filters && this.filters.length) {
                var n = this.filters[0].padding;
                r.pad(n)
            }
            r.ceil(pt.RESOLUTION);
            var o = t.renderTexture.current
              , s = t.renderTexture.sourceFrame.clone()
              , a = t.renderTexture.destinationFrame.clone()
              , l = t.projection.transform
              , c = Ar.create({
                width: r.width,
                height: r.height,
                resolution: this.cacheAsBitmapResolution || t.resolution,
                multisample: null !== (e = this.cacheAsBitmapMultisample) && void 0 !== e ? e : t.multisample
            })
              , u = "cacheAsBitmap_" + uid();
            this._cacheData.textureCacheId = u,
            Qi.addToCache(c.baseTexture, u),
            Cr.addToCache(c, u);
            var p = this.transform.localTransform.copyTo(ru).invert().translate(-r.x, -r.y);
            this.render = this._cacheData.originalRender,
            t.render(this, {
                renderTexture: c,
                clear: !0,
                transform: p,
                skipUpdateTransform: !1
            }),
            t.framebuffer.blit(),
            t.projection.transform = l,
            t.renderTexture.bind(o, s, a),
            this.render = this._renderCached,
            this.updateTransform = this.displayObjectUpdateTransform,
            this.calculateBounds = this._calculateCachedBounds,
            this.getLocalBounds = this._getCachedLocalBounds,
            this._mask = null,
            this.filterArea = null,
            this.alpha = i;
            var h = new ma(c);
            h.transform.worldTransform = this.transform.worldTransform,
            h.anchor.x = -r.x / r.width,
            h.anchor.y = -r.y / r.height,
            h.alpha = i,
            h._bounds = this._bounds,
            this._cacheData.sprite = h,
            this.transform._parentID = -1,
            this.parent ? this.updateTransform() : (this.enableTempParent(),
            this.updateTransform(),
            this.disableTempParent(null)),
            this.containsPoint = h.containsPoint.bind(h)
        }
    }
    ,
    Be.prototype._renderCachedCanvas = function _renderCachedCanvas(t) {
        !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObjectCanvas(t),
        this._cacheData.sprite.worldAlpha = this.worldAlpha,
        this._cacheData.sprite._renderCanvas(t))
    }
    ,
    Be.prototype._initCachedDisplayObjectCanvas = function _initCachedDisplayObjectCanvas(t) {
        if (!this._cacheData || !this._cacheData.sprite) {
            var e = this.getLocalBounds(null, !0)
              , i = this.alpha;
            this.alpha = 1;
            var r = t.context
              , n = t._projTransform;
            e.ceil(pt.RESOLUTION);
            var o = Ar.create({
                width: e.width,
                height: e.height
            })
              , s = "cacheAsBitmap_" + uid();
            this._cacheData.textureCacheId = s,
            Qi.addToCache(o.baseTexture, s),
            Cr.addToCache(o, s);
            var a = ru;
            this.transform.localTransform.copyTo(a),
            a.invert(),
            a.tx -= e.x,
            a.ty -= e.y,
            this.renderCanvas = this._cacheData.originalRenderCanvas,
            t.render(this, {
                renderTexture: o,
                clear: !0,
                transform: a,
                skipUpdateTransform: !1
            }),
            t.context = r,
            t._projTransform = n,
            this.renderCanvas = this._renderCachedCanvas,
            this.updateTransform = this.displayObjectUpdateTransform,
            this.calculateBounds = this._calculateCachedBounds,
            this.getLocalBounds = this._getCachedLocalBounds,
            this._mask = null,
            this.filterArea = null,
            this.alpha = i;
            var l = new ma(o);
            l.transform.worldTransform = this.transform.worldTransform,
            l.anchor.x = -e.x / e.width,
            l.anchor.y = -e.y / e.height,
            l.alpha = i,
            l._bounds = this._bounds,
            this._cacheData.sprite = l,
            this.transform._parentID = -1,
            this.parent ? this.updateTransform() : (this.parent = t._tempDisplayObjectParent,
            this.updateTransform(),
            this.parent = null),
            this.containsPoint = l.containsPoint.bind(l)
        }
    }
    ,
    Be.prototype._calculateCachedBounds = function _calculateCachedBounds() {
        this._bounds.clear(),
        this._cacheData.sprite.transform._worldID = this.transform._worldID,
        this._cacheData.sprite._calculateBounds(),
        this._bounds.updateID = this._boundsID
    }
    ,
    Be.prototype._getCachedLocalBounds = function _getCachedLocalBounds() {
        return this._cacheData.sprite.getLocalBounds(null)
    }
    ,
    Be.prototype._destroyCachedDisplayObject = function _destroyCachedDisplayObject() {
        this._cacheData.sprite._texture.destroy(!0),
        this._cacheData.sprite = null,
        Qi.removeFromCache(this._cacheData.textureCacheId),
        Cr.removeFromCache(this._cacheData.textureCacheId),
        this._cacheData.textureCacheId = null
    }
    ,
    Be.prototype._cacheAsBitmapDestroy = function _cacheAsBitmapDestroy(t) {
        this.cacheAsBitmap = !1,
        this.destroy(t)
    }
    ,
    Be.prototype.name = null,
    Ui.prototype.getChildByName = function getChildByName(t, e) {
        for (var i = 0, r = this.children.length; i < r; i++)
            if (this.children[i].name === t)
                return this.children[i];
        if (e)
            for (i = 0,
            r = this.children.length; i < r; i++) {
                if (this.children[i].getChildByName) {
                    var n = this.children[i].getChildByName(t, !0);
                    if (n)
                        return n
                }
            }
        return null
    }
    ,
    Be.prototype.getGlobalPosition = function getGlobalPosition(t, e) {
        return void 0 === t && (t = new me),
        void 0 === e && (e = !1),
        this.parent ? this.parent.toGlobal(this.position, t, e) : (t.x = this.position.x,
        t.y = this.position.y),
        t
    }
    ;
    var ou = function(t, e) {
        return (ou = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    function __extends$1(t, e) {
        function __() {
            this.constructor = t
        }
        ou(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
    var su, au = (__extends$1(PlaneGeometry, su = Za),
    PlaneGeometry.prototype.build = function() {
        for (var t = this.segWidth * this.segHeight, e = [], i = [], r = [], n = this.segWidth - 1, o = this.segHeight - 1, s = this.width / n, a = this.height / o, l = 0; l < t; l++) {
            var c = l % this.segWidth
              , u = l / this.segWidth | 0;
            e.push(c * s, u * a),
            i.push(c / n, u / o)
        }
        var p = n * o;
        for (l = 0; l < p; l++) {
            var h = l % n
              , d = l / n | 0
              , _ = d * this.segWidth + h
              , y = d * this.segWidth + h + 1
              , f = (1 + d) * this.segWidth + h
              , m = (1 + d) * this.segWidth + h + 1;
            r.push(_, y, f, y, m, f)
        }
        this.buffers[0].data = new Float32Array(e),
        this.buffers[1].data = new Float32Array(i),
        this.indexBuffer.data = new Uint16Array(r),
        this.buffers[0].update(),
        this.buffers[1].update(),
        this.indexBuffer.update()
    }
    ,
    PlaneGeometry);
    function PlaneGeometry(t, e, i, r) {
        void 0 === t && (t = 100),
        void 0 === e && (e = 100),
        void 0 === i && (i = 10),
        void 0 === r && (r = 10);
        var n = su.call(this) || this;
        return n.segWidth = i,
        n.segHeight = r,
        n.width = t,
        n.height = e,
        n.build(),
        n
    }
    var lu, cu = (__extends$1(RopeGeometry, lu = Za),
    Object.defineProperty(RopeGeometry.prototype, "width", {
        get: function() {
            return this._width
        },
        enumerable: !1,
        configurable: !0
    }),
    RopeGeometry.prototype.build = function() {
        var t = this.points;
        if (t) {
            var e = this.getBuffer("aVertexPosition")
              , i = this.getBuffer("aTextureCoord")
              , r = this.getIndex();
            if (!(t.length < 1)) {
                e.data.length / 4 !== t.length && (e.data = new Float32Array(4 * t.length),
                i.data = new Float32Array(4 * t.length),
                r.data = new Uint16Array(6 * (t.length - 1)));
                var n = i.data
                  , o = r.data;
                n[0] = 0,
                n[1] = 0,
                n[2] = 0,
                n[3] = 1;
                for (var s = 0, a = t[0], l = this._width * this.textureScale, c = t.length, u = 0; u < c; u++) {
                    var p = 4 * u;
                    if (0 < this.textureScale) {
                        var h = a.x - t[u].x
                          , d = a.y - t[u].y
                          , _ = Math.sqrt(h * h + d * d);
                        a = t[u],
                        s += _ / l
                    } else
                        s = u / (c - 1);
                    n[p] = s,
                    n[p + 1] = 0,
                    n[p + 2] = s,
                    n[p + 3] = 1
                }
                var y = 0;
                for (u = 0; u < c - 1; u++)
                    p = 2 * u,
                    o[y++] = p,
                    o[y++] = p + 1,
                    o[y++] = p + 2,
                    o[y++] = p + 2,
                    o[y++] = p + 1,
                    o[y++] = p + 3;
                i.update(),
                r.update(),
                this.updateVertices()
            }
        }
    }
    ,
    RopeGeometry.prototype.updateVertices = function() {
        var t = this.points;
        if (!(t.length < 1)) {
            for (var e, i = t[0], r = 0, n = 0, o = this.buffers[0].data, s = t.length, a = 0; a < s; a++) {
                var l = t[a]
                  , c = 4 * a;
                n = -((e = a < t.length - 1 ? t[a + 1] : l).x - i.x),
                r = e.y - i.y;
                var u = Math.sqrt(r * r + n * n)
                  , p = 0 < this.textureScale ? this.textureScale * this._width / 2 : this._width / 2;
                r /= u,
                n /= u,
                r *= p,
                n *= p,
                o[c] = l.x + r,
                o[1 + c] = l.y + n,
                o[2 + c] = l.x - r,
                o[3 + c] = l.y - n,
                i = l
            }
            this.buffers[0].update()
        }
    }
    ,
    RopeGeometry.prototype.update = function() {
        0 < this.textureScale ? this.build() : this.updateVertices()
    }
    ,
    RopeGeometry);
    function RopeGeometry(t, e, i) {
        void 0 === t && (t = 200),
        void 0 === i && (i = 0);
        var r = lu.call(this, new Float32Array(4 * e.length), new Float32Array(4 * e.length), new Uint16Array(6 * (e.length - 1))) || this;
        return r.points = e,
        r._width = t,
        r.textureScale = i,
        r.build(),
        r
    }
    var uu, pu = (__extends$1(SimpleRope, uu = Xa),
    SimpleRope.prototype._render = function(t) {
        var e = this.geometry;
        !this.autoUpdate && e._width === this.shader.texture.height || (e._width = this.shader.texture.height,
        e.update()),
        uu.prototype._render.call(this, t)
    }
    ,
    SimpleRope);
    function SimpleRope(t, e, i) {
        void 0 === i && (i = 0);
        var r = this
          , n = new cu(t.height,e,i)
          , o = new Ja(t);
        return 0 < i && (t.baseTexture.wrapMode = rt.WRAP_MODES.REPEAT),
        (r = uu.call(this, n, o) || this).autoUpdate = !0,
        r
    }
    var hu, du = (__extends$1(SimplePlane, hu = Xa),
    SimplePlane.prototype.textureUpdated = function() {
        this._textureID = this.shader.texture._updateID;
        var t = this.geometry
          , e = this.shader.texture
          , i = e.width
          , r = e.height;
        !this.autoResize || t.width === i && t.height === r || (t.width = this.shader.texture.width,
        t.height = this.shader.texture.height,
        t.build())
    }
    ,
    Object.defineProperty(SimplePlane.prototype, "texture", {
        get: function() {
            return this.shader.texture
        },
        set: function(t) {
            this.shader.texture !== t && (this.shader.texture = t,
            this._textureID = -1,
            t.baseTexture.valid ? this.textureUpdated() : t.once("update", this.textureUpdated, this))
        },
        enumerable: !1,
        configurable: !0
    }),
    SimplePlane.prototype._render = function(t) {
        this._textureID !== this.shader.texture._updateID && this.textureUpdated(),
        hu.prototype._render.call(this, t)
    }
    ,
    SimplePlane.prototype.destroy = function(t) {
        this.shader.texture.off("update", this.textureUpdated, this),
        hu.prototype.destroy.call(this, t)
    }
    ,
    SimplePlane);
    function SimplePlane(t, e, i) {
        var r = this
          , n = new au(t.width,t.height,e,i)
          , o = new Ja(Cr.WHITE);
        return (r = hu.call(this, n, o) || this).texture = t,
        r.autoResize = !0,
        r
    }
    var _u, yu = (__extends$1(SimpleMesh, _u = Xa),
    Object.defineProperty(SimpleMesh.prototype, "vertices", {
        get: function() {
            return this.geometry.getBuffer("aVertexPosition").data
        },
        set: function(t) {
            this.geometry.getBuffer("aVertexPosition").data = t
        },
        enumerable: !1,
        configurable: !0
    }),
    SimpleMesh.prototype._render = function(t) {
        this.autoUpdate && this.geometry.getBuffer("aVertexPosition").update(),
        _u.prototype._render.call(this, t)
    }
    ,
    SimpleMesh);
    function SimpleMesh(t, e, i, r, n) {
        void 0 === t && (t = Cr.EMPTY);
        var o = this
          , s = new Za(e,i,r);
        s.getBuffer("aVertexPosition").static = !1;
        var a = new Ja(t);
        return (o = _u.call(this, s, a, null, n) || this).autoUpdate = !0,
        o
    }
    var fu, mu = (__extends$1(NineSlicePlane, fu = du),
    NineSlicePlane.prototype.textureUpdated = function() {
        this._textureID = this.shader.texture._updateID,
        this._refresh()
    }
    ,
    Object.defineProperty(NineSlicePlane.prototype, "vertices", {
        get: function() {
            return this.geometry.getBuffer("aVertexPosition").data
        },
        set: function(t) {
            this.geometry.getBuffer("aVertexPosition").data = t
        },
        enumerable: !1,
        configurable: !0
    }),
    NineSlicePlane.prototype.updateHorizontalVertices = function() {
        var t = this.vertices
          , e = this._getMinScale();
        t[9] = t[11] = t[13] = t[15] = this._topHeight * e,
        t[17] = t[19] = t[21] = t[23] = this._height - this._bottomHeight * e,
        t[25] = t[27] = t[29] = t[31] = this._height
    }
    ,
    NineSlicePlane.prototype.updateVerticalVertices = function() {
        var t = this.vertices
          , e = this._getMinScale();
        t[2] = t[10] = t[18] = t[26] = this._leftWidth * e,
        t[4] = t[12] = t[20] = t[28] = this._width - this._rightWidth * e,
        t[6] = t[14] = t[22] = t[30] = this._width
    }
    ,
    NineSlicePlane.prototype._getMinScale = function() {
        var t = this._leftWidth + this._rightWidth
          , e = this._width > t ? 1 : this._width / t
          , i = this._topHeight + this._bottomHeight
          , r = this._height > i ? 1 : this._height / i;
        return Math.min(e, r)
    }
    ,
    Object.defineProperty(NineSlicePlane.prototype, "width", {
        get: function() {
            return this._width
        },
        set: function(t) {
            this._width = t,
            this._refresh()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(NineSlicePlane.prototype, "height", {
        get: function() {
            return this._height
        },
        set: function(t) {
            this._height = t,
            this._refresh()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(NineSlicePlane.prototype, "leftWidth", {
        get: function() {
            return this._leftWidth
        },
        set: function(t) {
            this._leftWidth = t,
            this._refresh()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(NineSlicePlane.prototype, "rightWidth", {
        get: function() {
            return this._rightWidth
        },
        set: function(t) {
            this._rightWidth = t,
            this._refresh()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(NineSlicePlane.prototype, "topHeight", {
        get: function() {
            return this._topHeight
        },
        set: function(t) {
            this._topHeight = t,
            this._refresh()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(NineSlicePlane.prototype, "bottomHeight", {
        get: function() {
            return this._bottomHeight
        },
        set: function(t) {
            this._bottomHeight = t,
            this._refresh()
        },
        enumerable: !1,
        configurable: !0
    }),
    NineSlicePlane.prototype._refresh = function() {
        var t = this.texture
          , e = this.geometry.buffers[1].data;
        this._origWidth = t.orig.width,
        this._origHeight = t.orig.height;
        var i = 1 / this._origWidth
          , r = 1 / this._origHeight;
        e[0] = e[8] = e[16] = e[24] = 0,
        e[1] = e[3] = e[5] = e[7] = 0,
        e[6] = e[14] = e[22] = e[30] = 1,
        e[25] = e[27] = e[29] = e[31] = 1,
        e[2] = e[10] = e[18] = e[26] = i * this._leftWidth,
        e[4] = e[12] = e[20] = e[28] = 1 - i * this._rightWidth,
        e[9] = e[11] = e[13] = e[15] = r * this._topHeight,
        e[17] = e[19] = e[21] = e[23] = 1 - r * this._bottomHeight,
        this.updateHorizontalVertices(),
        this.updateVerticalVertices(),
        this.geometry.buffers[0].update(),
        this.geometry.buffers[1].update()
    }
    ,
    NineSlicePlane);
    function NineSlicePlane(t, e, i, r, n) {
        void 0 === e && (e = 10),
        void 0 === i && (i = 10),
        void 0 === r && (r = 10),
        void 0 === n && (n = 10);
        var o = fu.call(this, Cr.WHITE, 4, 4) || this;
        return o._origWidth = t.orig.width,
        o._origHeight = t.orig.height,
        o._width = o._origWidth,
        o._height = o._origHeight,
        o._leftWidth = e,
        o._rightWidth = r,
        o._topHeight = i,
        o._bottomHeight = n,
        o.texture = t,
        o
    }
    var Tu = function(t, e) {
        return (Tu = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                e.hasOwnProperty(i) && (t[i] = e[i])
        }
        )(t, e)
    };
    var gu, vu = (function __extends(t, e) {
        function __() {
            this.constructor = t
        }
        Tu(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }(AnimatedSprite, gu = ma),
    AnimatedSprite.prototype.stop = function() {
        this._playing && (this._playing = !1,
        this._autoUpdate && this._isConnectedToTicker && (Pi.shared.remove(this.update, this),
        this._isConnectedToTicker = !1))
    }
    ,
    AnimatedSprite.prototype.play = function() {
        this._playing || (this._playing = !0,
        this._autoUpdate && !this._isConnectedToTicker && (Pi.shared.add(this.update, this, rt.UPDATE_PRIORITY.HIGH),
        this._isConnectedToTicker = !0))
    }
    ,
    AnimatedSprite.prototype.gotoAndStop = function(t) {
        this.stop();
        var e = this.currentFrame;
        this._currentTime = t,
        e !== this.currentFrame && this.updateTexture()
    }
    ,
    AnimatedSprite.prototype.gotoAndPlay = function(t) {
        var e = this.currentFrame;
        this._currentTime = t,
        e !== this.currentFrame && this.updateTexture(),
        this.play()
    }
    ,
    AnimatedSprite.prototype.update = function(t) {
        if (this._playing) {
            var e = this.animationSpeed * t
              , i = this.currentFrame;
            if (null !== this._durations) {
                var r = this._currentTime % 1 * this._durations[this.currentFrame];
                for (r += e / 60 * 1e3; r < 0; )
                    this._currentTime--,
                    r += this._durations[this.currentFrame];
                var n = Math.sign(this.animationSpeed * t);
                for (this._currentTime = Math.floor(this._currentTime); r >= this._durations[this.currentFrame]; )
                    r -= this._durations[this.currentFrame] * n,
                    this._currentTime += n;
                this._currentTime += r / this._durations[this.currentFrame]
            } else
                this._currentTime += e;
            this._currentTime < 0 && !this.loop ? (this.gotoAndStop(0),
            this.onComplete && this.onComplete()) : this._currentTime >= this._textures.length && !this.loop ? (this.gotoAndStop(this._textures.length - 1),
            this.onComplete && this.onComplete()) : i !== this.currentFrame && (this.loop && this.onLoop && (0 < this.animationSpeed && this.currentFrame < i ? this.onLoop() : this.animationSpeed < 0 && this.currentFrame > i && this.onLoop()),
            this.updateTexture())
        }
    }
    ,
    AnimatedSprite.prototype.updateTexture = function() {
        var t = this.currentFrame;
        this._previousFrame !== t && (this._previousFrame = t,
        this._texture = this._textures[t],
        this._textureID = -1,
        this._textureTrimmedID = -1,
        this._cachedTint = 16777215,
        this.uvs = this._texture._uvs.uvsFloat32,
        this.updateAnchor && this._anchor.copyFrom(this._texture.defaultAnchor),
        this.onFrameChange && this.onFrameChange(this.currentFrame))
    }
    ,
    AnimatedSprite.prototype.destroy = function(t) {
        this.stop(),
        gu.prototype.destroy.call(this, t),
        this.onComplete = null,
        this.onFrameChange = null,
        this.onLoop = null
    }
    ,
    AnimatedSprite.fromFrames = function(t) {
        for (var e = [], i = 0; i < t.length; ++i)
            e.push(Cr.from(t[i]));
        return new AnimatedSprite(e)
    }
    ,
    AnimatedSprite.fromImages = function(t) {
        for (var e = [], i = 0; i < t.length; ++i)
            e.push(Cr.from(t[i]));
        return new AnimatedSprite(e)
    }
    ,
    Object.defineProperty(AnimatedSprite.prototype, "totalFrames", {
        get: function() {
            return this._textures.length
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(AnimatedSprite.prototype, "textures", {
        get: function() {
            return this._textures
        },
        set: function(t) {
            if (t[0]instanceof Cr)
                this._textures = t,
                this._durations = null;
            else {
                this._textures = [],
                this._durations = [];
                for (var e = 0; e < t.length; e++)
                    this._textures.push(t[e].texture),
                    this._durations.push(t[e].time)
            }
            this._previousFrame = null,
            this.gotoAndStop(0),
            this.updateTexture()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(AnimatedSprite.prototype, "currentFrame", {
        get: function() {
            var t = Math.floor(this._currentTime) % this._textures.length;
            return t < 0 && (t += this._textures.length),
            t
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(AnimatedSprite.prototype, "playing", {
        get: function() {
            return this._playing
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(AnimatedSprite.prototype, "autoUpdate", {
        get: function() {
            return this._autoUpdate
        },
        set: function(t) {
            t !== this._autoUpdate && (this._autoUpdate = t,
            !this._autoUpdate && this._isConnectedToTicker ? (Pi.shared.remove(this.update, this),
            this._isConnectedToTicker = !1) : this._autoUpdate && !this._isConnectedToTicker && this._playing && (Pi.shared.add(this.update, this),
            this._isConnectedToTicker = !0))
        },
        enumerable: !1,
        configurable: !0
    }),
    AnimatedSprite);
    function AnimatedSprite(t, e) {
        void 0 === e && (e = !0);
        var i = gu.call(this, t[0]instanceof Cr ? t[0] : t[0].texture) || this;
        return i._textures = null,
        i._durations = null,
        i._autoUpdate = e,
        i._isConnectedToTicker = !1,
        i.animationSpeed = 1,
        i.loop = !0,
        i.updateAnchor = !1,
        i.onComplete = null,
        i.onFrameChange = null,
        i.onLoop = null,
        i._currentTime = 0,
        i._playing = !1,
        i._previousFrame = null,
        i.textures = t,
        i
    }
    to.registerPlugin("accessibility", Oi),
    to.registerPlugin("extract", bo),
    to.registerPlugin("interaction", ki),
    to.registerPlugin("particle", Fs),
    to.registerPlugin("prepare", Pa),
    to.registerPlugin("batch", fo),
    to.registerPlugin("tilingSprite", ja),
    Mo.registerPlugin(pl),
    Mo.registerPlugin(Jo),
    Mo.registerPlugin(ys),
    Mo.registerPlugin(Ps),
    Mo.registerPlugin(Na),
    vo.registerPlugin(Di),
    vo.registerPlugin(Vo);
    var Eu = {
        AlphaFilter: _l,
        BlurFilter: sc,
        BlurFilterPass: nc,
        ColorMatrixFilter: cc,
        DisplacementFilter: hc,
        FXAAFilter: yc,
        NoiseFilter: iu
    };
    return rt.AbstractBatchRenderer = lo,
    rt.AbstractMultiResource = $i,
    rt.AbstractRenderer = Jn,
    rt.AccessibilityManager = Oi,
    rt.AnimatedSprite = vu,
    rt.AppLoaderPlugin = Vo,
    rt.Application = vo,
    rt.ArrayResource = er,
    rt.Attribute = Or,
    rt.BaseImageResource = rr,
    rt.BasePrepare = Oa,
    rt.BaseRenderTexture = Er,
    rt.BaseTexture = Qi,
    rt.BatchDrawCall = no,
    rt.BatchGeometry = po,
    rt.BatchPluginFactory = yo,
    rt.BatchRenderer = fo,
    rt.BatchShaderGenerator = co,
    rt.BatchSystem = Xr,
    rt.BatchTextureArray = oo,
    rt.BitmapFont = ol,
    rt.BitmapFontData = tl,
    rt.BitmapFontLoader = pl,
    rt.BitmapText = ul,
    rt.BlobResource = Yo,
    rt.Bounds = xe,
    rt.Buffer = Pr,
    rt.BufferResource = Xi,
    rt.CanvasResource = or,
    rt.Circle = ve,
    rt.CompressedTextureLoader = Jo,
    rt.CompressedTextureResource = Ko,
    rt.Container = Ui,
    rt.ContextSystem = Jr,
    rt.CountLimiter = wa,
    rt.CubeResource = ar,
    rt.DDSLoader = ys,
    rt.DEG_TO_RAD = fe,
    rt.DisplayObject = Be,
    rt.Ellipse = Ee,
    rt.Extract = bo,
    rt.FORMATS_TO_COMPONENTS = Os,
    rt.FillStyle = ks,
    rt.Filter = En,
    rt.FilterState = Hr,
    rt.FilterSystem = zr,
    rt.Framebuffer = gr,
    rt.FramebufferSystem = $r,
    rt.GLFramebuffer = Qr,
    rt.GLProgram = Fn,
    rt.GLTexture = Yn,
    rt.GRAPHICS_CURVES = Gs,
    rt.Geometry = Mr,
    rt.GeometrySystem = en,
    rt.Graphics = pa,
    rt.GraphicsData = ea,
    rt.GraphicsGeometry = oa,
    rt.IGLUniformData = Bec,
    rt.INSTALLED = Hi,
    rt.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL = jo,
    rt.ImageBitmapResource = yr,
    rt.ImageResource = cr,
    rt.InteractionData = Li,
    rt.InteractionEvent = xi,
    rt.InteractionManager = ki,
    rt.InteractionTrackingData = Mi,
    rt.KTXLoader = Ps,
    rt.LineStyle = aa,
    rt.Loader = Mo,
    rt.MaskData = rn,
    rt.MaskSystem = Un,
    rt.Matrix = Ce,
    rt.Mesh = Xa,
    rt.MeshBatchUvs = qa,
    rt.MeshGeometry = Za,
    rt.MeshMaterial = Ja,
    rt.NineSlicePlane = mu,
    rt.ObjectRenderer = Kr,
    rt.ObservablePoint = Ie,
    rt.PI_2 = _e,
    rt.ParticleContainer = Ns,
    rt.ParticleRenderer = Fs,
    rt.PlaneGeometry = au,
    rt.Point = me,
    rt.Polygon = Se,
    rt.Prepare = Pa,
    rt.Program = mn,
    rt.ProjectionSystem = Ln,
    rt.Quad = Br,
    rt.QuadUv = Gr,
    rt.RAD_TO_DEG = ye,
    rt.Rectangle = ge,
    rt.RenderTexture = Ar,
    rt.RenderTexturePool = wr,
    rt.RenderTextureSystem = Mn,
    rt.Renderer = to,
    rt.Resource = zi,
    rt.RopeGeometry = cu,
    rt.RoundedRectangle = be,
    rt.Runner = ji,
    rt.SVGResource = pr,
    rt.ScissorSystem = Rn,
    rt.Shader = Tn,
    rt.ShaderSystem = jn,
    rt.SimpleMesh = yu,
    rt.SimplePlane = du,
    rt.SimpleRope = pu,
    rt.Sprite = ma,
    rt.SpriteMaskFilter = Cn,
    rt.Spritesheet = La,
    rt.SpritesheetLoader = Na,
    rt.State = gn,
    rt.StateSystem = Hn,
    rt.StencilSystem = Dn,
    rt.System = ro,
    rt.TYPES_TO_BYTES_PER_COMPONENT = ws,
    rt.TYPES_TO_BYTES_PER_PIXEL = Rs,
    rt.TemporaryDisplayObject = Ii,
    rt.Text = Ua,
    rt.TextMetrics = ba,
    rt.TextStyle = Sa,
    rt.Texture = Cr,
    rt.TextureGCSystem = qn,
    rt.TextureLoader = Bo,
    rt.TextureMatrix = bn,
    rt.TextureSystem = zn,
    rt.TextureUvs = Sr,
    rt.Ticker = Pi,
    rt.TickerPlugin = Di,
    rt.TilingSprite = Ba,
    rt.TilingSpriteRenderer = ja,
    rt.TimeLimiter = Da,
    rt.Transform = Ne,
    rt.UniformGroup = jr,
    rt.VERSION = "6.3.2",
    rt.VideoResource = dr,
    rt.ViewableBuffer = so,
    rt.accessibleTarget = Ai,
    rt.autoDetectRenderer = autoDetectRenderer,
    rt.autoDetectResource = autoDetectResource,
    rt.checkMaxIfStatementsInShader = checkMaxIfStatementsInShader,
    rt.createUBOElements = createUBOElements,
    rt.defaultFilterVertex = io,
    rt.defaultVertex = eo,
    rt.filters = Eu,
    rt.generateProgram = generateProgram,
    rt.generateUniformBufferSync = generateUniformBufferSync,
    rt.getTestContext = getTestContext,
    rt.getUBOData = getUBOData,
    rt.graphicsUtils = ha,
    rt.groupD8 = Le,
    rt.interactiveTarget = Bi,
    rt.isMobile = ut,
    rt.resources = mo,
    rt.settings = pt,
    rt.systems = go,
    rt.uniformParsers = un,
    rt.utils = de,
    Object.defineProperty(rt, "__esModule", {
        value: !0
    }),
    rt
}({}), PixiApplicationOptions = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function PixiApplicationOptions() {
        var t = e.call(this) || this;
        return t.height = 0,
        t.width = 0,
        t.backgroundAlpha = 0,
        t.autoDensity = !1,
        t
    }
    return __extends(PixiApplicationOptions, e),
    PixiApplicationOptions
}(EAObject)), UTPackAnimationShineView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTPackAnimationShineView() {
        var t = e.call(this) || this;
        return t.creamYellow = "#FBF8DF",
        t.black = "rgba(255, 255, 255, 0.0)",
        t.shineSpriteY = -400,
        t.shineSpriteX = 0,
        t._setupPixiApplication(),
        t
    }
    return __extends(UTPackAnimationShineView, e),
    UTPackAnimationShineView.prototype._setupPixiApplication = function() {
        this.pixiApplicationOptions = new PixiApplicationOptions,
        this.pixiApplicationOptions.backgroundAlpha = 0,
        this.pixiApplicationOptions.autoDensity = !0,
        PIXI.utils.skipHello(),
        this.pixiApplication = new PIXI.Application(this.pixiApplicationOptions),
        this.shineSprite = new PIXI.Sprite(this._generateShineTexture()),
        this.__container.appendChild(this.pixiApplication.view),
        this._animateShineTexture()
    }
    ,
    UTPackAnimationShineView.prototype._generateShineTexture = function() {
        var t = document.createElement("canvas")
          , e = t.getContext("2d");
        if (t.width = 64,
        t.height = 1,
        e) {
            var i = e.createLinearGradient(0, 0, 64, 0);
            i.addColorStop(0, this.black),
            i.addColorStop(.4, this.creamYellow),
            i.addColorStop(.6, this.creamYellow),
            i.addColorStop(1, this.black),
            e.fillStyle = i,
            e.fillRect(0, 0, 64, 1)
        }
        return PIXI.Texture.from(t)
    }
    ,
    UTPackAnimationShineView.prototype.destroyApplication = function() {
        var t = this;
        setTimeout(function() {
            return t.pixiApplication.destroy(!0)
        }, 50)
    }
    ,
    UTPackAnimationShineView.prototype._animateShineTexture = function() {
        var e = this
          , i = this._getRandomArbitrary(2, 3);
        this.shineSprite.position.set(this.shineSpriteX, this.shineSpriteY),
        this.shineSprite.rotation = Math.PI / 7,
        this.shineSprite.width = 64,
        this.shineSprite.height = 500,
        this.shineSprite.alpha = .2,
        this.pixiApplication.stage.addChild(this.shineSprite),
        this.pixiApplication.ticker.add(function(t) {
            e.pixiApplication.resizeTo = e.__container,
            e.shineSprite.x += t * i,
            e.shineSprite.y += t * i,
            e.shineSprite.x > e.pixiApplication.view.width && e.shineSprite.y > e.pixiApplication.view.height && (e.shineSprite.x = e.shineSpriteX,
            e.shineSprite.y = e.shineSpriteY)
        })
    }
    ,
    UTPackAnimationShineView.prototype._getRandomArbitrary = function(t, e) {
        return Math.random() * (e - t) + t
    }
    ,
    UTPackAnimationShineView
}(UTView));
UTPackAnimationShineView.prototype._generate = function _generate() {
    this._generated || (this.__container = document.createElement("div"),
    this.__root = this.__container,
    this._generated = !0)
}
,
UTPackAnimationShineView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__container = null
}
,
UTPackAnimationShineView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPackGraphicView = function(t) {
    function UTPackGraphicView() {
        return t.call(this) || this
    }
    return __extends(UTPackGraphicView, t),
    UTPackGraphicView.prototype.dealloc = function() {
        t.prototype.dealloc.call(this)
    }
    ,
    UTPackGraphicView.prototype.getBackgroundImageView = function() {
        return this._packBackgroundImage
    }
    ,
    UTPackGraphicView.prototype.setPackBackground = function(t) {
        this._packBackgroundImage.setResource(AssetLocationUtils.getPackBackgroundImageUri(t))
    }
    ,
    UTPackGraphicView.prototype.setPackForeground = function(t) {
        if (PackUtils.hasForeground(t)) {
            var e = PackUtils.getForegroundId(t);
            this._packForegroundImage.setResource(AssetLocationUtils.getPackForegroundImageUri(t, e))
        }
    }
    ,
    UTPackGraphicView.prototype.setPromo = function(t, e) {
        if (DOMKit.toggleClass(this.__promoText, "limited", e),
        e)
            this.__promoText.textContent = services.Localization.localize("store.sale.limited"),
            DOMKit.toggleDisplayStyle(this.__promoText, !0);
        else
            switch (t) {
            case PurchaseDealType.DEAL:
                this.__promoText.textContent = services.Localization.localize("store.sale.deal"),
                DOMKit.toggleDisplayStyle(this.__promoText, !0);
                break;
            case PurchaseDealType.PROMO:
                this.__promoText.textContent = services.Localization.localize("store.sale.promo"),
                DOMKit.toggleDisplayStyle(this.__promoText, !0);
                break;
            case PurchaseDealType.BESTDEAL:
                this.__promoText.textContent = services.Localization.localize("store.sale.bestdeal"),
                DOMKit.toggleDisplayStyle(this.__promoText, !0);
                break;
            default:
                this.__promoText.textContent = "",
                DOMKit.toggleDisplayStyle(this.__promoText, !1)
            }
    }
    ,
    UTPackGraphicView
}(UTView);
UTPackGraphicView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("basePack"),
        t.classList.add("ut-pack-graphic-view"),
        this._packBackgroundImage = new UTImageView,
        this._packBackgroundImage.getRootElement().classList.add("ut-pack-graphic-view--background"),
        t.appendChild(this._packBackgroundImage.getRootElement()),
        this._packForegroundImage = new UTImageView,
        this._packForegroundImage.getRootElement().classList.add("ut-pack-graphic-view--foreground"),
        t.appendChild(this._packForegroundImage.getRootElement()),
        this.__promoText = document.createElement("div"),
        this.__promoText.classList.add("ut-pack-graphic-view--promo"),
        t.appendChild(this.__promoText),
        this.__root = t,
        this._generated = !0
    }
}
,
UTPackGraphicView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._packBackgroundImage.destroy(),
    this._packForegroundImage.destroy(),
    this.__promoText = null
}
,
UTPackGraphicView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTRewardsCarouselView = function(e) {
    function UTRewardsCarouselView() {
        var t = e.call(this) || this;
        return t.afterChangeCb = null,
        t.mobileTitle = "",
        t.packs = [],
        t.playerItems = [],
        t.rewardsCount = 0,
        t.visibleItems = 1,
        t
    }
    return __extends(UTRewardsCarouselView, e),
    UTRewardsCarouselView.prototype.dealloc = function() {
        this.playerItems.forEach(function(t) {
            return t.dealloc()
        }),
        this.packs.forEach(function(t) {
            return t.dealloc()
        }),
        this.playerItems = [],
        this.packs = [],
        this.afterChangeCb = null,
        this.reset(),
        e.prototype.dealloc.call(this)
    }
    ,
    UTRewardsCarouselView.prototype.reset = function() {
        this._tnsCarousel.teardown(this.getRootElement()),
        this.__tapAreaLeft = this.getRootElement().getElementsByClassName("tapLeft")[0],
        this.__tapAreaRight = this.getRootElement().getElementsByClassName("tapRight")[0]
    }
    ,
    UTRewardsCarouselView.prototype.setMobileTitle = function(t) {
        this.mobileTitle = t
    }
    ,
    UTRewardsCarouselView.prototype.setNumVisibleItems = function(t) {
        this.visibleItems = t
    }
    ,
    UTRewardsCarouselView.prototype.setAfterChangeFunction = function(t) {
        this.afterChangeCb = t
    }
    ,
    UTRewardsCarouselView.prototype.isOn = function() {
        return this._tnsCarousel.isOn()
    }
    ,
    UTRewardsCarouselView.prototype.getCurrentSlide = function() {
        return this._tnsCarousel.getCurrentSlide()
    }
    ,
    UTRewardsCarouselView.prototype.getTapAreaRight = function() {
        return this.__tapAreaRight
    }
    ,
    UTRewardsCarouselView.prototype.getTapAreaLeft = function() {
        return this.__tapAreaLeft
    }
    ,
    UTRewardsCarouselView.prototype.preSetup = function(t) {
        this._tnsCarousel.emptyCarousel(),
        this.toggleLeftArrow(!1),
        this.toggleRightArrow(!1),
        this.rewardsCount = t
    }
    ,
    UTRewardsCarouselView.prototype.setupRewards = function(t) {
        var c = this;
        this.preSetup(t.length);
        var u = document.createElement("p");
        DOMKit.addClass(u, "textField"),
        t.forEach(function(t) {
            var e, i, r;
            r = GameRewardStyle.REWARD;
            var n = document.createElement("p")
              , o = [];
            if (DOMKit.addClass(n, "textField"),
            isPhone() && 0 < c.mobileTitle.length && (u.textContent = c.mobileTitle,
            o.push(u)),
            t.isStadiumSlotUnlock)
                r += " " + GameRewardStyle.MYSTADIUM_SLOT,
                n.textContent = t.buildString();
            else if (t.isCoin)
                r += " " + GameRewardStyle.COIN,
                n.textContent = services.Localization.localizeNumber(t.value);
            else if (t.item)
                if (t.item.isCoinBoost() && (r += " " + GameRewardStyle.COIN_BOOST,
                n.textContent = services.Localization.localize("FUT_SCMP_COIN_BOOST_" + (null !== (e = t.item.definitionId) && void 0 !== e ? e : 0))),
                t.item.isCoinBoost())
                    r += " " + GameRewardStyle.COIN_BOOST,
                    n.textContent = services.Localization.localize("FUT_SCMP_COIN_BOOST_" + (null !== (i = t.item.definitionId) && void 0 !== i ? i : 0));
                else {
                    var s = c.generateItemView(t.item, !1);
                    o.push(s.getRootElement()),
                    c.playerItems.push(s),
                    n.textContent = t.buildString()
                }
            else if (t.isPack) {
                var a = c.generatePackGraphicView(t);
                o.push(a.getRootElement()),
                c.packs.push(a),
                n.textContent = t.buildString()
            } else if (t.isChampionQualificationPoints || t.isXP) {
                r += " " + (t.isXP ? GameRewardStyle.XP : GameRewardStyle.CHAMPION_POINTS);
                var l = services.Localization.localizeNumber(t.value);
                n.textContent = l + " " + t.buildString()
            } else
                t.isChampionStageEntry && (r += " " + GameRewardStyle.CHAMPION_STAGE_ENTRY,
                n.textContent = t.buildString());
            o.push(n),
            c._tnsCarousel.appendElem(o, r)
        }, this),
        isPhone() && DOMKit.addClass(u, GameRewardStyle.TITLE),
        1 < this.rewardsCount && this.instantiateCarousel()
    }
    ,
    UTRewardsCarouselView.prototype.instantiateCarousel = function() {
        this.__tapAreaLeft && this.toggleLeftArrow(!1),
        this.__tapAreaRight && this.toggleRightArrow(!0),
        this._tnsCarousel.setup(this.generateTNSPropertiesDTO()),
        this._tnsCarousel.afterChange(this.afterChange.bind(this))
    }
    ,
    UTRewardsCarouselView.prototype.generateTNSPropertiesDTO = function() {
        var t = new TNSPropertiesDTO;
        return t.nav = 1 === this.visibleItems,
        t.speed = 600,
        t.prevButton = this.__tapAreaLeft,
        t.nextButton = this.__tapAreaRight,
        t.items = this.visibleItems,
        t.container = this._tnsCarousel.getRootElement(),
        t
    }
    ,
    UTRewardsCarouselView.prototype.afterChange = function() {
        this.toggleArrows(this.getCurrentSlide()),
        this.afterChangeCb && this.afterChangeCb()
    }
    ,
    UTRewardsCarouselView.prototype.toggleArrows = function(t) {
        var e = 0 === t
          , i = !1;
        i = 1 === this.visibleItems ? t === this.rewardsCount - 1 : t >= this.rewardsCount - this.visibleItems,
        this.toggleLeftArrow(!e),
        this.toggleRightArrow(!i)
    }
    ,
    UTRewardsCarouselView.prototype.generateItemView = function(t, e) {
        var i = e ? factories.ItemView.createSmallItem(t) : factories.ItemView.createLargeItem(t);
        return i.init(),
        i.supportSecondaryViews = !1,
        i.render(t),
        i
    }
    ,
    UTRewardsCarouselView.prototype.generatePackGraphicView = function(t) {
        var e = new UTPackGraphicView;
        return e.setPackBackground(t.assetId),
        e.setPackForeground(t.assetId),
        e.setPromo(PurchaseDealType.REGULAR),
        e
    }
    ,
    UTRewardsCarouselView.prototype.toggleLeftArrow = function(t) {
        this.__tapAreaLeft.style.display = t ? "" : "none",
        this.__tapAreaLeft.style.opacity = t ? "1" : "0",
        DOMKit.toggleClass(this.__tapAreaLeft, "disabled", !t)
    }
    ,
    UTRewardsCarouselView.prototype.toggleRightArrow = function(t) {
        this.__tapAreaRight.style.display = t ? "" : "none",
        this.__tapAreaRight.style.opacity = t ? "1" : "0",
        DOMKit.toggleClass(this.__tapAreaRight, "disabled", !t)
    }
    ,
    UTRewardsCarouselView
}(UTView);
UTRewardsCarouselView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("section");
        t.classList.add("rewards-carousel"),
        this.__tapAreaLeft = document.createElement("a"),
        this.__tapAreaLeft.classList.add("btn-flat"),
        this.__tapAreaLeft.classList.add("tapLeft"),
        t.appendChild(this.__tapAreaLeft),
        this._tnsCarousel = new TNSContainerView,
        this._tnsCarousel.getRootElement().classList.add("rewards-slider-container"),
        t.appendChild(this._tnsCarousel.getRootElement()),
        this.__tapAreaRight = document.createElement("a"),
        this.__tapAreaRight.classList.add("btn-flat"),
        this.__tapAreaRight.classList.add("tapRight"),
        t.appendChild(this.__tapAreaRight),
        this.__root = t,
        this._generated = !0
    }
}
,
UTRewardsCarouselView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__tapAreaLeft = null,
    this._tnsCarousel.destroy(),
    this.__tapAreaRight = null
}
,
UTRewardsCarouselView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTGameRewardsView = function(t) {
    function UTGameRewardsView() {
        return t.call(this) || this
    }
    return __extends(UTGameRewardsView, t),
    UTGameRewardsView.prototype.init = function() {
        t.prototype.init.call(this),
        this._actionBtn.init(),
        this._actionBtn.addTarget(this, this.onButtonTapped, EventType.TAP)
    }
    ,
    UTGameRewardsView.prototype.setTitle = function(t) {
        this.__title.textContent = t
    }
    ,
    UTGameRewardsView.prototype.setDescription = function(t) {
        this.__description.textContent = t
    }
    ,
    UTGameRewardsView.prototype.setButtonText = function(t) {
        this._actionBtn.setText(t)
    }
    ,
    UTGameRewardsView.prototype.setupRewardsCarousel = function(t) {
        0 < t.length && this._rewardsCarousel.setupRewards(t)
    }
    ,
    UTGameRewardsView.prototype.resetRewardsCarousel = function() {
        this._rewardsCarousel.reset()
    }
    ,
    UTGameRewardsView.prototype.onButtonTapped = function(t, e, i) {
        this._triggerActions(EventType.TAP)
    }
    ,
    UTGameRewardsView
}(UTTargetActionView);
UTGameRewardsView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("game-rewards-view");
        var e = document.createElement("header");
        this.__title = document.createElement("h1"),
        e.appendChild(this.__title),
        t.appendChild(e);
        var i = document.createElement("div");
        i.classList.add("content-container"),
        this.__description = document.createElement("div"),
        this.__description.classList.add("description"),
        i.appendChild(this.__description);
        var r = document.createElement("section");
        r.classList.add("rewards-container"),
        this._rewardsCarousel = new UTRewardsCarouselView,
        r.appendChild(this._rewardsCarousel.getRootElement()),
        i.appendChild(r),
        t.appendChild(i);
        var n = document.createElement("footer");
        this._actionBtn = new UTStandardButtonControl,
        this._actionBtn.getRootElement().classList.add("call-to-action"),
        n.appendChild(this._actionBtn.getRootElement()),
        t.appendChild(n),
        this.__root = t,
        this._generated = !0
    }
}
,
UTGameRewardsView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this.__description = null,
    this._rewardsCarousel.destroy(),
    this._actionBtn.destroy()
}
,
UTGameRewardsView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTGameRewardsViewController = function(i) {
    function UTGameRewardsViewController(t) {
        var e = i.call(this) || this;
        return e.hasChampionsQualificationPoints = !1,
        e.hasCoinsReward = !1,
        e.hasItemReward = !1,
        e.hasPackReward = !1,
        e.rewards = t,
        e.rewardsCarouselSetup = !1,
        e.hasStadiumTierUnlock = !1,
        e.hasStadiumSlotUnlock = !1,
        e
    }
    return __extends(UTGameRewardsViewController, i),
    UTGameRewardsViewController.prototype.checkRewards = function(t) {
        var e = this;
        t.forEach(function(t) {
            e.hasCoinsReward = e.hasCoinsReward || t.isCoin,
            e.hasItemReward = e.hasItemReward || t.isItem,
            e.hasPackReward = e.hasPackReward || t.isPack,
            e.hasChampionsQualificationPoints = e.hasChampionsQualificationPoints || t.isChampionQualificationPoints,
            e.hasXpReward = e.hasXpReward || t.isXP,
            e.hasStadiumTierUnlock = e.hasStadiumTierUnlock || t.isStadiumTierUnlock,
            e.hasStadiumSlotUnlock = e.hasStadiumSlotUnlock || t.isStadiumSlotUnlock
        })
    }
    ,
    UTGameRewardsViewController.prototype.init = function() {
        i.prototype.init.call(this),
        this.getView().addTarget(this, this.onButtonTapped, EventType.TAP)
    }
    ,
    UTGameRewardsViewController.prototype.dealloc = function() {
        this.rewards = [],
        i.prototype.dealloc.call(this)
    }
    ,
    UTGameRewardsViewController.prototype._getViewInstanceFromData = function() {
        return new UTGameRewardsView
    }
    ,
    UTGameRewardsViewController.prototype.viewDidAppear = function() {
        i.prototype.viewDidAppear.call(this),
        !this.rewardsCarouselSetup && 0 < this.rewards.length && (this.getView().setupRewardsCarousel(this.rewards),
        this.checkRewards(this.rewards),
        this.rewardsCarouselSetup = !0)
    }
    ,
    UTGameRewardsViewController.prototype.setTitle = function(t) {
        this.getView().setTitle(t)
    }
    ,
    UTGameRewardsViewController.prototype.setDescription = function(t) {
        this.getView().setDescription(t)
    }
    ,
    UTGameRewardsViewController.prototype.setButtonText = function(t) {
        this.getView().setButtonText(t)
    }
    ,
    UTGameRewardsViewController.prototype.onButtonTapped = function(t, e, i) {
        var n = this;
        if (this.closePopup(),
        this.hasItemReward) {
            services.Notification.queue([services.Localization.localize("notification.item.added"), UINotificationType.POSITIVE]),
            repositories.Item.setDirty(ItemPile.PURCHASED);
            var r = this.rewards.reduce(function(t, e) {
                return e.item && t.push(e.item),
                t
            }, []);
            getDefaultDispatcher().notify(AppNotification.UNASSIGNED_ITEM_ADDED, this, {
                items: r
            })
        }
        if (this.hasPackReward) {
            services.Notification.queue([services.Localization.localize("notification.pack.added"), UINotificationType.POSITIVE]);
            var o = services.User.getUser();
            o && o.incrementNumUnopenedPacks()
        }
        this.hasCoinsReward && (services.Notification.queue([services.Localization.localize("notification.coins.added"), UINotificationType.POSITIVE]),
        services.User.requestCurrencies()),
        this.hasChampionsQualificationPoints && services.Notification.queue([services.Localization.localize("notification.championsPoints.added"), UINotificationType.POSITIVE]),
        this.hasXpReward && (services.Notification.queue([services.Localization.localize("notification.xp.added"), UINotificationType.POSITIVE]),
        services.Objectives.reset()),
        this.hasStadiumTierUnlock && services.Notification.queue([services.Localization.localize("notification.stadiumTier.unlocked"), UINotificationType.POSITIVE]),
        this.hasStadiumSlotUnlock && services.Notification.queue([services.Localization.localize("notification.stadiumSlot.unlocked"), UINotificationType.POSITIVE]),
        (this.hasStadiumSlotUnlock || this.hasStadiumTierUnlock) && services.MyStadium.getStadium().observe(this, function(t, e) {
            var i;
            if (t.unobserve(n),
            e.success) {
                var r = null === (i = e.data) || void 0 === i ? void 0 : i.stadium;
                r && r.isStadiumModified() ? r.saveStadium().observe(n, function(t, e) {
                    t.unobserve(n),
                    e.success || services.Notification.queue([services.Localization.localize("notification.stadium.saveFailed"), UINotificationType.NEGATIVE]),
                    services.MyStadium.reset()
                }) : services.MyStadium.reset()
            } else
                services.MyStadium.reset()
        })
    }
    ,
    UTGameRewardsViewController.prototype.handleKeyUpEvent = function(t) {
        t.key !== KeyboardKey.ESCAPE && t.key !== KeyboardKey.MS_ESCAPE && t.key !== KeyboardKey.ENTER || this.onExit.notify(enums.UIDialogOptions.OK)
    }
    ,
    UTGameRewardsViewController
}(BasePopupViewController)
  , UTPlayerPickOptionView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTPlayerPickOptionView() {
        var t = e.call(this) || this;
        return t.itemView = null,
        t
    }
    return __extends(UTPlayerPickOptionView, e),
    UTPlayerPickOptionView.prototype.init = function() {
        e.prototype.init.call(this),
        this.__ownershipText.textContent = services.Localization.localize("playerpicks.modal.option.owned")
    }
    ,
    UTPlayerPickOptionView.prototype.dealloc = function() {
        var t;
        null === (t = this.itemView) || void 0 === t || t.dealloc(),
        this.itemView = null,
        e.prototype.dealloc.call(this)
    }
    ,
    UTPlayerPickOptionView.prototype.getItemView = function() {
        return this.itemView
    }
    ,
    UTPlayerPickOptionView.prototype.setSelected = function(t) {
        DOMKit.toggleClass(this.__optionContainer, enums.UIState.SELECTED, t)
    }
    ,
    UTPlayerPickOptionView.prototype.createItem = function(t, e) {
        var i;
        JSUtils.isValid(this.itemView) && (null === (i = this.itemView) || void 0 === i || i.dealloc()),
        this.itemView = e ? factories.ItemView.createSmallItem(t) : factories.ItemView.createLargeItem(t),
        this.itemView.init(),
        this.itemView.render(t),
        this.addSubview(this.itemView, this.__optionContainer),
        this.layoutSubviews()
    }
    ,
    UTPlayerPickOptionView.prototype.toggleOwnership = function(t) {
        DOMKit.toggleDisplayStyle(this.__ownershipText, t)
    }
    ,
    UTPlayerPickOptionView.prototype._tapDetected = function(t) {
        e.prototype._tapDetected.call(this, t),
        this._triggerActions(EventType.TAP)
    }
    ,
    UTPlayerPickOptionView
}(UTTargetActionView));
UTPlayerPickOptionView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        this.__optionContainer = document.createElement("div"),
        this.__optionContainer.classList.add("player-pick-option"),
        t.appendChild(this.__optionContainer),
        this.__ownershipText = document.createElement("span"),
        t.appendChild(this.__ownershipText),
        this.__root = t,
        this._generated = !0
    }
}
,
UTPlayerPickOptionView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__optionContainer = null,
    this.__ownershipText = null
}
,
UTPlayerPickOptionView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPlayerPicksView = function(e) {
    function UTPlayerPicksView() {
        var t = e.call(this) || this;
        return t.playerPickViews = [],
        t.phoneLargeItem = null,
        t
    }
    return __extends(UTPlayerPicksView, e),
    UTPlayerPicksView.prototype.init = function() {
        e.prototype.init.call(this);
        var t = services.Localization;
        this.__title.textContent = t.localize("playerpicks.modal.title"),
        this.setDescription(t.localize("playerpicks.modal.description.default")),
        this._itemInfoSwitchBtn.init(),
        this._itemInfoSwitchBtn.setInteractionState(!0),
        this._actionBtn.init(),
        this._actionBtn.setInteractionState(!1),
        this._actionBtn.setText(t.localize("common.dialog.confirm")),
        this._actionBtn.addTarget(this, this.eBtnTapped, EventType.TAP)
    }
    ,
    UTPlayerPicksView.prototype.dealloc = function() {
        this.playerPickViews.forEach(function(t) {
            t.dealloc()
        }, this),
        this.phoneLargeItem && (this.phoneLargeItem.dealloc(),
        this.phoneLargeItem = null),
        e.prototype.dealloc.call(this)
    }
    ,
    UTPlayerPicksView.prototype.setDescription = function(t) {
        this.__description.textContent = t
    }
    ,
    UTPlayerPicksView.prototype.setItems = function(t, r) {
        var n = this
          , o = isPhone()
          , s = o ? this.__smallPicksContainer : this.__largePicksContainer;
        t.forEach(function(t, e) {
            var i = new UTPlayerPickOptionView;
            i.init(),
            i.createItem(t, o),
            i.toggleOwnership(!o && r[e]),
            i.addTarget(n, n.eSelectPlayerPickOption, EventType.TAP),
            i.setInteractionState(!0),
            n.playerPickViews.push(i),
            n.addSubview(i, s)
        }, this),
        DOMKit.toggleDisplayStyle(this.__smallPicksContainer, o),
        this._actionBtn.setInteractionState(!0),
        this.layoutSubviews()
    }
    ,
    UTPlayerPicksView.prototype.getItemInfoSwitchButton = function() {
        return this._itemInfoSwitchBtn
    }
    ,
    UTPlayerPicksView.prototype.selectPickOption = function(t, e, i) {
        if (this.playerPickViews[t].setSelected(!0),
        isPhone()) {
            if (this.phoneLargeItem) {
                var r = this.phoneLargeItem.getItemView();
                if (null == r ? void 0 : r.canRender(e))
                    return r.render(e),
                    void this.phoneLargeItem.toggleOwnership(i);
                this.phoneLargeItem.dealloc(),
                this.phoneLargeItem = null
            }
            this.phoneLargeItem = new UTPlayerPickOptionView,
            this.phoneLargeItem.init(),
            this.phoneLargeItem.createItem(e, !1),
            this.phoneLargeItem.toggleOwnership(i),
            this.__largePicksContainer.appendChild(this.phoneLargeItem.getRootElement())
        }
    }
    ,
    UTPlayerPicksView.prototype.eSelectPlayerPickOption = function(i, t, e) {
        var r = this;
        this.playerPickViews.forEach(function(t, e) {
            i === t ? r._triggerActions(UTPlayerPicksView.Event.SELECT_PICK, {
                index: e
            }) : t.setSelected(!1)
        }, this)
    }
    ,
    UTPlayerPicksView.prototype.eBtnTapped = function(t, e, i) {
        this._actionBtn.setInteractionState(!1),
        this._triggerActions(UTPlayerPicksView.Event.CONFIRM_PICK)
    }
    ,
    UTPlayerPicksView.Event = {
        SELECT_PICK: "UTPlayerPicksView.Event.SELECT_PICK",
        CONFIRM_PICK: "UTPlayerPicksView.Event.CONFIRM_PICK"
    },
    UTPlayerPicksView
}(UTTargetActionView);
UTPlayerPicksView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("player-picks-modal");
        var e = document.createElement("header")
          , i = document.createElement("strong");
        this.__title = document.createElement("h1"),
        i.appendChild(this.__title),
        e.appendChild(i),
        this._itemInfoSwitchBtn = new UTItemInfoChangeButtonControl,
        e.appendChild(this._itemInfoSwitchBtn.getRootElement()),
        t.appendChild(e),
        this.__description = document.createElement("div"),
        this.__description.classList.add("description"),
        t.appendChild(this.__description);
        var r = document.createElement("div");
        r.classList.add("content-container"),
        this.__smallPicksContainer = document.createElement("section"),
        this.__smallPicksContainer.classList.add("small-picks-container"),
        r.appendChild(this.__smallPicksContainer),
        this.__largePicksContainer = document.createElement("section"),
        this.__largePicksContainer.classList.add("large-picks-container"),
        r.appendChild(this.__largePicksContainer),
        t.appendChild(r);
        var n = document.createElement("footer");
        this._actionBtn = new UTStandardButtonControl,
        this._actionBtn.getRootElement().classList.add("call-to-action"),
        n.appendChild(this._actionBtn.getRootElement()),
        t.appendChild(n),
        this.__root = t,
        this._generated = !0
    }
}
,
UTPlayerPicksView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this._itemInfoSwitchBtn.destroy(),
    this.__description = null,
    this.__smallPicksContainer = null,
    this.__largePicksContainer = null,
    this._actionBtn.destroy()
}
,
UTPlayerPicksView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTPlayerPicksViewController = function(e) {
    function UTPlayerPicksViewController() {
        var t = e.call(this) || this;
        return t.index = 0,
        t.picks = [],
        t.ownership = [],
        t.isPendingSelection = !1,
        t.itemInfoStateViewModel = new UTItemInfoStateViewModel(services.UserSettings),
        t
    }
    return __extends(UTPlayerPicksViewController, e),
    UTPlayerPicksViewController.prototype.init = function() {
        if (!this.initialized) {
            DebugUtils.Assert(0 < this.picks.length, "UTPlayerPicksViewController expects at least one item.");
            var t = this.getView();
            t.addTarget(this, this.eConfirmSelection, UTPlayerPicksView.Event.CONFIRM_PICK),
            t.addTarget(this, this.eOnSelection, UTPlayerPicksView.Event.SELECT_PICK),
            t.getItemInfoSwitchButton().addTarget(this, this.eItemInfoSwitchButtonSelected, EventType.TAP),
            e.prototype.init.call(this)
        }
    }
    ,
    UTPlayerPicksViewController.prototype.initWithPicks = function(t) {
        this.initialized || (this.picks = t,
        this.init())
    }
    ,
    UTPlayerPicksViewController.prototype.dealloc = function() {
        this.picks = [],
        this.itemInfoStateViewModel = null,
        e.prototype.dealloc.call(this)
    }
    ,
    UTPlayerPicksViewController.prototype._getViewInstanceFromData = function() {
        return new UTPlayerPicksView
    }
    ,
    UTPlayerPicksViewController.prototype.viewDidAppear = function() {
        var n = this;
        var t = new UTSearchCriteriaDTO;
        t.type = SearchType.PLAYER,
        t.defId = this.picks.map(function(t) {
            return t.definitionId
        }),
        services.Club.search(t).observe(this, function(t, e) {
            var i = n.getView()
              , r = JSUtils.isObject(e.response) ? e.response.items : [];
            t.unobserve(n),
            n.ownership = function generateOwnershipArray(t) {
                var e = [];
                return 0 < t.length ? e = this.picks.map(function(e) {
                    return JSUtils.isValid(JSUtils.find(t, function(t) {
                        return t.definitionId === e.definitionId
                    }))
                }, this) : (e.length = this.picks.length,
                e.fill(!1, 0, this.picks.length)),
                e
            }
            .call(n, r),
            i.setItems(n.picks, n.ownership),
            i.selectPickOption(n.index, n.picks[n.index], n.ownership[n.index]),
            n.itemInfoStateViewModel && i.getItemInfoSwitchButton().setCurrentState(n.itemInfoStateViewModel.getState())
        }),
        e.prototype.viewDidAppear.call(this)
    }
    ,
    UTPlayerPicksViewController.prototype.isPendingSelectionContext = function() {
        return this.isPendingSelection
    }
    ,
    UTPlayerPicksViewController.prototype.setPendingSelectionContext = function() {
        this.isPendingSelection = !0,
        this.getView().setDescription(services.Localization.localize("playerpicks.modal.description.pending"))
    }
    ,
    UTPlayerPicksViewController.prototype.eItemInfoSwitchButtonSelected = function(t, e, i) {
        this.itemInfoStateViewModel && this.getView().getItemInfoSwitchButton().setCurrentState(this.itemInfoStateViewModel.nextState())
    }
    ,
    UTPlayerPicksViewController.prototype.eConfirmSelection = function(t, e, i) {
        var a = this;
        services.Item.confirmPlayerPickItemSelection(this.picks[this.index]).observe(this, function(t, e) {
            var i, r;
            t.unobserve(a);
            var n = services.Localization;
            if (e.success && (null === (i = e.data) || void 0 === i ? void 0 : i.reward)) {
                a.isPendingSelection || TelemetryManager.trackEvent(TelemetryManager.Sections.MISC, TelemetryManager.Categories.PLAYER_PICKS, "Claimed draft item and confirmed player selection.");
                var o = new UTGameRewardsViewController([e.data.reward])
                  , s = o.getView();
                o.init(),
                s.setTitle(n.localize("playerpicks.rewards.title")),
                s.setDescription(n.localize("playerpicks.rewards.description")),
                s.setButtonText(n.localize("playerpicks.rewards.claim")),
                o.modalDisplayDimensions.width = "24em",
                gPopupClickShield.setActivePopup(o)
            } else
                services.Notification.queue([n.localize("notification.playerpicks.confirmFailed"), UINotificationType.NEGATIVE]);
            null === (r = a.getParentViewController()) || void 0 === r || r.dismissViewController()
        })
    }
    ,
    UTPlayerPicksViewController.prototype.eOnSelection = function(t, e, i) {
        this.index = i.index,
        this.getView().selectPickOption(this.index, this.picks[this.index], this.ownership[this.index])
    }
    ,
    UTPlayerPicksViewController
}(UTViewController)
  , UTItemSectionListViewModel = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTItemSectionListViewModel(t) {
        var e = i.call(this, t) || this;
        return e.sections = new EAHashTable,
        e
    }
    return __extends(UTItemSectionListViewModel, i),
    UTItemSectionListViewModel.prototype.setSection = function(t, e, i) {
        this.sections.set(t, {
            filter: e,
            priority: i
        })
    }
    ,
    UTItemSectionListViewModel.prototype.getSectionItems = function(t) {
        var e = this.sections.get(t);
        return this.sections.has(t) && e ? this.values().filter(e.filter) : this.values()
    }
    ,
    UTItemSectionListViewModel.prototype.organizeItems = function() {
        var e = this;
        if (0 !== this.length && 0 !== this.sections.length) {
            var i = []
              , r = [];
            this.sections.forEach(function(t) {
                i[t.priority] = e.values().filter(t.filter)
            }),
            i.forEach(function(t) {
                t.sort(e.sortByType.bind(e)),
                r = r.concat(t)
            }),
            this.resetCollection(r)
        }
    }
    ,
    UTItemSectionListViewModel
}(UTItemListViewModel))
  , UTSquadSectionListViewModel = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(i) {
    function UTSquadSectionListViewModel(t) {
        var e = i.call(this, t) || this;
        return e.sections = new EAHashTable,
        e.setSection(UTSquadSectionListViewModel.SECTION.STARTING_ELEVEN, function(t) {
            return 0 <= t.index && t.index < UTSquadEntity.FIELD_PLAYERS
        }, UTSquadSectionListViewModel.SECTION.STARTING_ELEVEN),
        e.setSection(UTSquadSectionListViewModel.SECTION.SUBS, function(t) {
            return t.index >= UTSquadEntity.FIELD_PLAYERS && t.index < UTSquadEntity.FIELD_PLAYERS + UTSquadEntity.SUB_PLAYERS
        }, UTSquadSectionListViewModel.SECTION.SUBS),
        e.setSection(UTSquadSectionListViewModel.SECTION.RESERVES, function(t) {
            return t.index >= UTSquadEntity.FIELD_PLAYERS + UTSquadEntity.SUB_PLAYERS && t.index < UTSquadEntity.MANAGER_SLOT_INDEX
        }, UTSquadSectionListViewModel.SECTION.RESERVES),
        e
    }
    return __extends(UTSquadSectionListViewModel, i),
    UTSquadSectionListViewModel.prototype.setSection = function(t, e, i) {
        this.sections.set(t, {
            filter: e,
            priority: i
        })
    }
    ,
    UTSquadSectionListViewModel.prototype.getSectionSlots = function(t) {
        var e = this.sections.get(t);
        return this.sections.has(t) && e ? this.values().filter(e.filter) : this.values()
    }
    ,
    UTSquadSectionListViewModel.prototype.getStartingEleven = function() {
        return this.getSectionSlots(UTSquadSectionListViewModel.SECTION.STARTING_ELEVEN)
    }
    ,
    UTSquadSectionListViewModel.prototype.getSubs = function() {
        return this.getSectionSlots(UTSquadSectionListViewModel.SECTION.SUBS)
    }
    ,
    UTSquadSectionListViewModel.prototype.getReserves = function() {
        return this.getSectionSlots(UTSquadSectionListViewModel.SECTION.RESERVES)
    }
    ,
    UTSquadSectionListViewModel.SECTION = {
        STARTING_ELEVEN: 0,
        SUBS: 1,
        RESERVES: 2
    },
    UTSquadSectionListViewModel
}(EAIterator))
  , UTEmptySectionMessageView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTEmptySectionMessageView() {
        return t.call(this) || this
    }
    return __extends(UTEmptySectionMessageView, t),
    UTEmptySectionMessageView.prototype.render = function(t, e) {
        this.__header.textContent = t,
        this.__body.innerHTML = e
    }
    ,
    UTEmptySectionMessageView
}(UTView));
UTEmptySectionMessageView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("div");
        t.classList.add("ut-empty-section-view");
        var e = document.createElement("span");
        e.classList.add("icon_squad"),
        e.classList.add("fut_icon"),
        t.appendChild(e),
        this.__header = document.createElement("h1"),
        this.__header.classList.add("ut-empty-section-view--title"),
        t.appendChild(this.__header),
        this.__body = document.createElement("p"),
        this.__body.classList.add("ut-empty-section-view--body"),
        t.appendChild(this.__body),
        this.__root = t,
        this._generated = !0
    }
}
,
UTEmptySectionMessageView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__header = null,
    this.__body = null
}
,
UTEmptySectionMessageView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSectionedItemListView = function(e) {
    function UTSectionedItemListView() {
        var t = e.call(this) || this;
        return t.listRows = [],
        t.footerCallback = null,
        t._footerBtn = null,
        t.emptyHeaderMessage = services.Localization.localize("squads.setEmptyMessage.defaultHeader"),
        t.emptyBodyMessage = services.Localization.localize("squads.setEmptyMessage.defaultBody"),
        t.emptyMessage = null,
        t.selectedIndex = -1,
        t
    }
    return __extends(UTSectionedItemListView, e),
    UTSectionedItemListView.prototype.init = function() {
        e.prototype.init.call(this),
        this._header.init(),
        this._header.hideButton(),
        this.__buttonGroup && (this.__buttonGroup.style.display = "none")
    }
    ,
    UTSectionedItemListView.prototype.dealloc = function() {
        this.footerCallback = null,
        this.removeEmptyMessage(),
        this.clearList(),
        this.removeFooter(),
        e.prototype.dealloc.call(this)
    }
    ,
    UTSectionedItemListView.prototype.clearList = function() {
        this.listRows.forEach(function(t) {
            return t.dealloc()
        }),
        this.listRows = []
    }
    ,
    UTSectionedItemListView.prototype.showEmptyMessage = function() {
        this.emptyMessage || (this.emptyMessage = new UTEmptySectionMessageView),
        this.getRootElement().appendChild(this.emptyMessage.getRootElement()),
        this.emptyMessage.render(this.emptyHeaderMessage, this.emptyBodyMessage)
    }
    ,
    UTSectionedItemListView.prototype.removeEmptyMessage = function() {
        this.emptyMessage && (this.emptyMessage.dealloc(),
        this.emptyMessage = null)
    }
    ,
    UTSectionedItemListView.prototype.setHeader = function(t, e, i) {
        var r = this;
        this._header.setText(t),
        this._header.setButtonText(e),
        i && JSUtils.isFunction(i) && (this._header.getActions(this, EventType.TAP).forEach(function(t) {
            r._header.removeTarget(r, t, EventType.TAP)
        }),
        this._header.addTarget(this, i, EventType.TAP),
        this._header.showButton())
    }
    ,
    UTSectionedItemListView.prototype.setFooter = function(t, e, i, r) {
        this._footerBtn || (this._footerBtn = new UTGroupButtonControl,
        this._footerBtn.init(),
        this.__buttonGroup && this.__buttonGroup.appendChild(this._footerBtn.getRootElement())),
        DOMKit.toggleClass(this._footerBtn.getRootElement(), "ut-group-button cta", i),
        this._footerBtn.setText(t),
        this._footerBtn.setSubtext(e),
        this._footerBtn.displayCurrencyIcon(!0),
        this.footerCallback && this._footerBtn.removeTarget(this, this.footerCallback, EventType.TAP),
        this.footerCallback = r,
        this._footerBtn.addTarget(this, this.footerCallback, EventType.TAP),
        this.__buttonGroup && (this.__buttonGroup.style.display = "")
    }
    ,
    UTSectionedItemListView.prototype.removeFooter = function() {
        this._footerBtn && (this._footerBtn.dealloc(),
        this._footerBtn = null,
        this.__buttonGroup && (this.__buttonGroup.style.display = ""))
    }
    ,
    UTSectionedItemListView.prototype.setEmptyMessage = function(t, e) {
        this.emptyHeaderMessage = t,
        this.emptyBodyMessage = e,
        this.emptyMessage && this.emptyMessage.render(this.emptyHeaderMessage, this.emptyBodyMessage)
    }
    ,
    UTSectionedItemListView.prototype.addItems = function(t, e, i, r) {
        var n = this;
        return i = i || ListItemPriority.DEFAULT,
        t.forEach(function(t) {
            n.listRows.push(n.generateListRow(t, e, i, r))
        }),
        this.listRows
    }
    ,
    UTSectionedItemListView.prototype.removeItemsById = function(t) {
        var e = this;
        t.forEach(function(i) {
            var t = JSUtils.find(e.listRows, function(t) {
                var e;
                return (null === (e = t.getData()) || void 0 === e ? void 0 : e.id) === i
            });
            t && (t.dealloc(),
            e.listRows.splice(e.listRows.indexOf(t), 1))
        }, this),
        this.render()
    }
    ,
    UTSectionedItemListView.prototype.render = function() {
        var e = this;
        0 === this.listRows.length ? this.showEmptyMessage() : (this.removeEmptyMessage(),
        this.listRows.forEach(function(t) {
            t.render(),
            e.__list.appendChild(t.getRootElement())
        }))
    }
    ,
    UTSectionedItemListView.prototype.generateListRow = function(t, e, i, r) {
        var n = new UTItemTableCellView;
        return n.setData(t, void 0, i, r),
        e && n.setTapCallback(e),
        n
    }
    ,
    UTSectionedItemListView.prototype.toggleHeaderButtonEnabled = function(t) {
        this._header.toggleButtonEnabled(t)
    }
    ,
    UTSectionedItemListView.prototype.toggleHeaderButton = function(t) {
        this._header.toggleButton(t)
    }
    ,
    UTSectionedItemListView.prototype.selectRowByIndex = function(i) {
        var r = this
          , n = -1;
        0 <= i && i < this.listRows.length && this.listRows.forEach(function(t) {
            var e = t === r.listRows[i];
            t.setSelected(e),
            e && (n = i)
        }),
        this.selectedIndex = n
    }
    ,
    UTSectionedItemListView.prototype.selectRowByItemId = function(r) {
        var n = this
          , o = -1;
        this.listRows.forEach(function(t) {
            var e, i = (null === (e = t.getData()) || void 0 === e ? void 0 : e.id) === r;
            t.setSelected(i),
            i && (o = n.listRows.indexOf(t))
        }),
        this.selectedIndex = o
    }
    ,
    UTSectionedItemListView.prototype.getNumOfRows = function() {
        return this.listRows.length
    }
    ,
    UTSectionedItemListView.prototype.getSelectedRow = function() {
        return this.listRows[this.selectedIndex] || null
    }
    ,
    UTSectionedItemListView.prototype.onTimedUpdate = function() {
        this.listRows.forEach(function(t) {
            return t.onTimedUpdate()
        })
    }
    ,
    UTSectionedItemListView
}(UTView);
UTSectionedItemListView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("section");
        t.classList.add("sectioned-item-list"),
        this._header = new UTSectionedTableHeaderView,
        t.appendChild(this._header.getRootElement()),
        this.__list = document.createElement("ul"),
        this.__list.classList.add("itemList"),
        t.appendChild(this.__list),
        this.__buttonGroup = document.createElement("div"),
        this.__buttonGroup.classList.add("ut-button-group"),
        t.appendChild(this.__buttonGroup),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSectionedItemListView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._header.destroy(),
    this.__list = null,
    this.__buttonGroup = null
}
,
UTSectionedItemListView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSectionedSlotListView = function(o) {
    function UTSectionedSlotListView() {
        return o.call(this) || this
    }
    return __extends(UTSectionedSlotListView, o),
    UTSectionedSlotListView.prototype.addSlotItems = function(t, e, i, r) {
        var n = t.map(function(t) {
            return t.item
        });
        return o.prototype.addItems.call(this, n, e, i, r)
    }
    ,
    UTSectionedSlotListView
}(UTSectionedItemListView);
UTSectionedItemListView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("section");
        t.classList.add("sectioned-item-list"),
        this._header = new UTSectionedTableHeaderView,
        t.appendChild(this._header.getRootElement()),
        this.__list = document.createElement("ul"),
        this.__list.classList.add("itemList"),
        t.appendChild(this.__list),
        this.__buttonGroup = document.createElement("div"),
        this.__buttonGroup.classList.add("ut-button-group"),
        t.appendChild(this.__buttonGroup),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSectionedItemListView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._header.destroy(),
    this.__list = null,
    this.__buttonGroup = null
}
,
UTSectionedItemListView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSendToSquadView = function(i) {
    function UTSendToSquadView() {
        var t = i.call(this) || this;
        return t.pinnedRow = null,
        t.onSlotSelected = new EAObservable,
        t
    }
    return __extends(UTSendToSquadView, i),
    UTSendToSquadView.prototype.init = function() {
        i.prototype.init.call(this)
    }
    ,
    UTSendToSquadView.prototype.dealloc = function() {
        var t, e;
        null === (t = this.pinnedRow) || void 0 === t || t.dealloc(),
        this.pinnedRow = null,
        this.getSubviews().forEach(function(t) {
            return t.dealloc()
        }),
        null === (e = this.onSlotSelected) || void 0 === e || e.dealloc(),
        this.onSlotSelected = null,
        i.prototype.dealloc.call(this)
    }
    ,
    UTSendToSquadView.prototype.setPinnedItem = function(t) {
        var e, i = this;
        DOMKit.empty(this.__pinnedDiv),
        null === (e = this.pinnedRow) || void 0 === e || e.dealloc(),
        this.pinnedRow = new UTItemTableCellView,
        this.pinnedRow.setData(t),
        this.pinnedRow.render(),
        this.__pinnedDiv.appendChild(this.pinnedRow.getRootElement()),
        requestAnimationFrame(function() {
            i.__scrollerDiv.style.top = i.__pinnedDiv.offsetHeight + "px"
        })
    }
    ,
    UTSendToSquadView.prototype.renderSections = function(t, s) {
        var a = this;
        this.getSubviews().forEach(function(t) {
            return t.dealloc()
        }),
        t.forEach(function(r) {
            var t = new UTSectionedSlotListView
              , n = r.chemTotalValues
              , o = r.differencesTotal;
            t.init(),
            t.setHeader(r.sectionTitle, ""),
            t.addSlotItems(r.slots).forEach(function(t, e) {
                if (t instanceof UTItemTableCellView) {
                    if (t.slotData = r.slots[e],
                    a.pinnedRow && a.pinnedRow.data && t.setComparisonData(a.pinnedRow.data),
                    t.slotData && t.slotData.index === s && t.addClass("selectedSlot"),
                    n && o) {
                        var i = new UTListChemistryTagView;
                        i.setChemistryImpactString(n[e], o[e]),
                        t.setChemistryTagComponent(i)
                    }
                    t.setAction(t.data ? enums.UIRowActionClass.SWAP : enums.UIRowActionClass.ADD, a.onActionCB.bind(a, t.slotData.index))
                }
            }),
            t.render(),
            a.addSubview(t, a.__scrollerDiv)
        }),
        this.layoutSubviews()
    }
    ,
    UTSendToSquadView.prototype.onActionCB = function(t) {
        var e;
        null === (e = this.onSlotSelected) || void 0 === e || e.notify(t)
    }
    ,
    UTSendToSquadView
}(UTView);
UTSendToSquadView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("article");
        t.setAttribute("id", "SendToActiveSquad"),
        t.classList.add("ut-pinned-list-container"),
        this.__pinnedDiv = document.createElement("ul"),
        this.__pinnedDiv.classList.add("ut-pinned-item"),
        t.appendChild(this.__pinnedDiv),
        this.__scrollerDiv = document.createElement("div"),
        this.__scrollerDiv.classList.add("ut-pinned-list"),
        t.appendChild(this.__scrollerDiv),
        this.__root = t,
        this._generated = !0
    }
}
,
UTSendToSquadView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__pinnedDiv = null,
    this.__scrollerDiv = null
}
,
UTSendToSquadView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}();
var UTSendToSquadViewController = function(i) {
    function UTSendToSquadViewController() {
        var t = i.call(this) || this;
        return t.defaultedToActiveSquad = !1,
        t.chemCalculator = new UTSquadChemCalculatorUtils(repositories.Chemistry),
        t.pinnedItem = null,
        t.selectedSlotIndex = -1,
        t.squad = null,
        t.viewModel = null,
        t
    }
    return __extends(UTSendToSquadViewController, i),
    UTSendToSquadViewController.prototype.init = function() {
        var t;
        this.initialized || (i.prototype.init.call(this),
        null === (t = this.getView().onSlotSelected) || void 0 === t || t.observe(this, this.eAddSwap))
    }
    ,
    UTSendToSquadViewController.prototype.initWithItem = function(t) {
        this.initialized || (this.pinnedItem = t,
        this.init())
    }
    ,
    UTSendToSquadViewController.prototype.dealloc = function() {
        i.prototype.dealloc.call(this),
        this.viewModel = null
    }
    ,
    UTSendToSquadViewController.prototype._getViewInstanceFromData = function() {
        return new UTSendToSquadView
    }
    ,
    UTSendToSquadViewController.prototype.getNavigationTitle = function() {
        return this.squad && this.squad.isSBC() ? services.Localization.localize("navbar.label.SBCSquad") : this.squad ? this.squad.getName() : services.Localization.localize("navbar.label.activesquad")
    }
    ,
    UTSendToSquadViewController.prototype.viewDidAppear = function() {
        var t, u = this;
        i.prototype.viewDidAppear.call(this);
        var n = this.getView()
          , p = services.Localization;
        if (null === (t = this.getNavigationController()) || void 0 === t || t.setNavigationVisibility(!0, !0),
        this.pinnedItem && n.setPinnedItem(this.pinnedItem),
        this.squad) {
            this.viewModel = new UTSquadSectionListViewModel(this.squad.getPlayers());
            var e = [];
            this.viewModel.getStartingEleven().forEach(function(t) {
                t.isBrick() || e.push(t)
            }),
            this.squad.isSBC() ? n.renderSections([{
                sectionTitle: p.localize("dock.label.startingeleven"),
                slots: e.reverse()
            }, {
                sectionTitle: p.localize("dock.label.workArea"),
                slots: this.viewModel.getSubs().concat(this.viewModel.getReserves())
            }], this.selectedSlotIndex) : n.renderSections([{
                sectionTitle: p.localize("dock.label.startingeleven"),
                slots: e.reverse()
            }, {
                sectionTitle: p.localize("dock.label.substitutes"),
                slots: this.viewModel.getSubs()
            }, {
                sectionTitle: p.localize("dock.label.reserves"),
                slots: this.viewModel.getReserves()
            }], this.selectedSlotIndex)
        } else
            services.Squad.requestSquadByType("active").observe(this, function(t, e) {
                var i;
                t.unobserve(u);
                var o = e.success ? null === (i = e.data) || void 0 === i ? void 0 : i.squad : null;
                u.defaultedToActiveSquad = !0,
                o && u.setSquad(o);
                var s = []
                  , a = []
                  , r = o ? o.getPlayers() : [];
                if (u.viewModel = new UTSquadSectionListViewModel(r),
                o && u.pinnedItem) {
                    var l = u.pinnedItem
                      , c = u.viewModel.getStartingEleven();
                    c.forEach(function(e) {
                        var t = c.map(function(t) {
                            return e.index === t.index ? l : t.item
                        })
                          , i = o.getFormation()
                          , r = o.getManager().item
                          , n = 0;
                        i && (n = u.chemCalculator.calculate(i, t, r).chemistry,
                        s.push(n),
                        a.push(n - o.getChemistry()))
                    })
                }
                n.renderSections([{
                    sectionTitle: p.localize("dock.label.startingeleven"),
                    slots: u.viewModel.getStartingEleven().reverse(),
                    chemTotalValues: s.reverse(),
                    differencesTotal: a.reverse()
                }, {
                    sectionTitle: p.localize("dock.label.substitutes"),
                    slots: u.viewModel.getSubs()
                }, {
                    sectionTitle: p.localize("dock.label.reserves"),
                    slots: u.viewModel.getReserves()
                }], u.selectedSlotIndex)
            });
        TelemetryManager.trackPage(TelemetryManager.Sections.SQUADS, "MyClubSquadSwap")
    }
    ,
    UTSendToSquadViewController.prototype.setSquad = function(t) {
        t instanceof UTSquadEntity && (this.squad = t)
    }
    ,
    UTSendToSquadViewController.prototype.setSelectedSlotIndex = function(t) {
        this.selectedSlotIndex = t
    }
    ,
    UTSendToSquadViewController.prototype.eAddSwap = function(t, o) {
        function J2d(t, e) {
            var i;
            t.unobserve(s),
            e.success ? s.defaultedToActiveSquad ? services.Notification.queue([a.localize("notification.item.toActiveSquad"), UINotificationType.NEUTRAL]) : (TelemetryManager.trackEvent(TelemetryManager.Sections.SQUADS, TelemetryManager.Categories.BUTTON_PRESS, "Squad Slot Detail View - Sent to Current Squad"),
            services.Notification.queue([a.localize("notification.item.toCurrentSquad"), UINotificationType.NEUTRAL])) : (u && (null === (i = s.squad) || void 0 === i || i.addItemToSlot(o, u)),
            services.Notification.queue(c)),
            null == l || l.popViewController()
        }
        var e, i, r, n, s = this, a = services.Localization, l = this.getNavigationController(), c = new UINotificationDTO(a.localize("notification.item.toActiveSquadFailed"),UINotificationType.NEGATIVE), u = null, p = null === (e = this.squad) || void 0 === e ? void 0 : e.getSlot(o).item;
        if (this.getView().setInteractionState(!1),
        p && this.pinnedItem) {
            var h = null === (i = this.squad) || void 0 === i ? void 0 : i.containsVariationOfCard(this.pinnedItem)
              , d = p.compareDream(this.pinnedItem) || h && p.compareResourceTo(this.pinnedItem);
            if (!h || d)
                if (this.pinnedItem.pile !== ItemPile.CLUB)
                    services.Item.move(this.pinnedItem, ItemPile.CLUB).observe(this, function(t, e) {
                        var i, r, n;
                        t.unobserve(s),
                        e.success && s.pinnedItem ? (u = null !== (r = null === (i = s.squad) || void 0 === i ? void 0 : i.addItemToSlot(o, s.pinnedItem)) && void 0 !== r ? r : null,
                        null === (n = s.squad) || void 0 === n || n.save().observe(s, J2d)) : (services.Notification.queue(c),
                        NetworkErrorManager.handleStatus(e.status),
                        null == l || l.popViewController())
                    });
                else {
                    var _ = null === (r = this.squad) || void 0 === r ? void 0 : r.addItemToSlot(o, this.pinnedItem);
                    u = _ || null,
                    null === (n = this.squad) || void 0 === n || n.save().observe(this, J2d)
                }
        } else
            utils.PopupManager.showAlert(utils.PopupManager.Alerts.DUPLICATE_ITEM),
            null == l || l.popViewController()
    }
    ,
    UTSendToSquadViewController
}(UTViewController)
  , UTSquadMarketSearchViewModel = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTSquadMarketSearchViewModel() {
        var t = e.call(this) || this;
        return t.squad = null,
        t.slotIndex = 0,
        t
    }
    return __extends(UTSquadMarketSearchViewModel, e),
    UTSquadMarketSearchViewModel.prototype.setSquad = function(t) {
        this.squad = t
    }
    ,
    UTSquadMarketSearchViewModel.prototype.setCurrentSlotIndex = function(t) {
        this.slotIndex = t
    }
    ,
    UTSquadMarketSearchViewModel.prototype.getSquad = function() {
        return this.squad
    }
    ,
    UTSquadMarketSearchViewModel.prototype.getCurrentSlot = function() {
        return this.squad ? this.squad.getSlot(this.slotIndex) : null
    }
    ,
    UTSquadMarketSearchViewModel.prototype.isActiveSquad = function() {
        return !!this.squad && this.squad.getId() === services.Squad.getActiveSquadId()
    }
    ,
    UTSquadMarketSearchViewModel
}(EAObject))
  , UTTransferMarketPaginationViewModel = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(e) {
    function UTTransferMarketPaginationViewModel() {
        var t = e.call(this) || this;
        return t.paginationList = new UTPaginatedItemListViewModel([],t.getNumItemsPerPage()),
        t.pageIndex = 1,
        t
    }
    return __extends(UTTransferMarketPaginationViewModel, e),
    UTTransferMarketPaginationViewModel.prototype.dealloc = function() {
        e.prototype.dealloc.call(this),
        this.paginationList && (this.paginationList.stopAuctionUpdates(),
        this.paginationList.dataUpdated.clearObservers())
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getIterator = function() {
        return this.paginationList
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.setPageItems = function(t) {
        this.paginationList.resetCollection(t)
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.setPinnedItem = function(t) {
        this.paginationList.setPinnedItem(t)
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.addAuctionUpdateObserver = function(t, e) {
        this.paginationList.dataUpdated.observe(t, e)
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.removeAuctionUpdateObserver = function(t, e) {
        var i;
        null === (i = this.paginationList) || void 0 === i || i.dataUpdated.unobserve(t, e)
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.startAuctionUpdates = function() {
        var t;
        null === (t = this.paginationList) || void 0 === t || t.startAuctionUpdates()
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.stopAuctionUpdates = function() {
        this.paginationList.stopAuctionUpdates()
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getIndexByItemId = function(e) {
        return this.paginationList.indexOf(function(t) {
            return t.id === e
        })
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getCurrentPageItems = function() {
        return this.paginationList.values()
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getCurrentItem = function() {
        return this.paginationList.current()
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getItemCount = function() {
        return this.paginationList.length
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getCurrentPageIndex = function() {
        return this.pageIndex
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getNextPageIndex = function() {
        return this.pageIndex + 1
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getPrevPageIndex = function() {
        return Math.max(this.pageIndex - 1, 1)
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.setPageIndex = function(t) {
        JSUtils.isNumber(t) && (this.pageIndex = 1 <= t ? t : 1)
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.setIndex = function(t) {
        this.paginationList.setIndex(t)
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getIndex = function() {
        return this.paginationList.getIndex()
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getNumItemsPerPage = function() {
        var t = getAppMain().getConfigRepository().getConfigObject(EAConfigurationRepository.KEY_ITEMS_PER_PAGE);
        return t ? t[EAConfigurationRepository.ITEMS_PER_PAGE.TRANSFER_MARKET] : 20
    }
    ,
    UTTransferMarketPaginationViewModel
}(UTViewModel))
  , UTMarketSearchView = (__extends = this && this.__extends || function() {
    var i = function(t, e) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var i in e)
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i])
        }
        )(t, e)
    };
    return function(t, e) {
        function __() {
            this.constructor = t
        }
        i(t, e),
        t.prototype = null === e ? Object.create(e) : (__.prototype = e.prototype,
        new __)
    }
}(),
function(t) {
    function UTMarketSearchView() {
        return t.call(this) || this
    }
    return __extends(UTMarketSearchView, t),
    UTMarketSearchView.prototype.init = function() {
        t.prototype.init.call(this),
        this._list.init(),
        this._list.addTarget(this, this.bubbleEvent, enums.UIListEvent.ROW_SELECT),
        this._list.addTarget(this, this.bubbleEvent, enums.UIPaginationEvent.NEXT),
        this._list.addTarget(this, this.bubbleEvent, enums.UIPaginationEvent.PREVIOUS),
        this.setInteractionState(!0)
    }
    ,
    UTMarketSearchView.prototype.dealloc = function() {
        this.pinnedItemView = null,
        t.prototype.dealloc.call(this)
    }
    ,
    UTMarketSearchView.prototype.updateListTopPosition = function() {
        var t, e, i = null === (t = this.pinnedItemView) || void 0 === t ? void 0 : t.getRootElement(), r = this._list.getRootElement(), n = (null !== (e = null == i ? void 0 : i.offsetHeight) && void 0 !== e ? e : 0) + "px";
        requestAnimationFrame(function() {
            return r.style.top = n
        })
    }
    ,
    UTMarketSearchView.prototype.setItems = function(t, e) {
        0 < t.length ? (this._list.setItems(t, e),
        this._list.renderItems(),
        this._list.setRowTapCallback()) : this.setEmptyListMessage(JSUtils.isValid(this.pinnedItemView))
    }
    ,
    UTMarketSearchView.prototype.setItemsWithChemDiff = function(i, r, n, o, s) {
        var a = this;
        0 < i.length ? (this._list.setItems(i).forEach(function(t, e) {
            a.setChemistryData(!i[e].isManager(), t, r[e], n[e], o[e], s[e])
        }),
        this._list.renderItems(),
        this._list.setRowTapCallback()) : this.setEmptyListMessage(JSUtils.isValid(this.pinnedItemView))
    }
    ,
    UTMarketSearchView.prototype.setChemistryData = function(t, e, i, r, n, o) {
        var s = new UTListChemistryTagView;
        if (s.setChemistryImpactString(i, r),
        t) {
            e.setChemistryTagComponent(s);
            var a = UTSquadSlotChemistryPointsView.State.NEUTRAL;
            0 < o ? a = UTSquadSlotChemistryPointsView.State.POSITIVE : o < 0 && (a = UTSquadSlotChemistryPointsView.State.NEGATIVE);
            var l = new UTSquadSlotChemistryPointsView;
            l.isItemView(),
            l.render(n),
            l.setState(a),
            e.setChemistryPointsComponent(l)
        }
    }
    ,
    UTMarketSearchView.prototype.removeItemsById = function(t) {
        this._list.removeItemsById(t)
    }
    ,
    UTMarketSearchView.prototype.setEmptyListMessage = function(t) {
        var e = services.Localization.localize(t ? "popup.error.searchauctions.retrysearchfromsquad" : "popup.error.searchauctions.retrysearch");
        this._list.appendEmptyListMessage(e)
    }
    ,
    UTMarketSearchView.prototype.setRowTapCallback = function(t) {
        this._list.setRowTapCallback(t)
    }
    ,
    UTMarketSearchView.prototype.setPaginationState = function(t, e) {
        this._list.setPaginationState(t, e)
    }
    ,
    UTMarketSearchView.prototype.appendPinnedItemView = function(t) {
        this.pinnedItemView = t;
        var e = this.getRootElement();
        e.insertBefore(t.getRootElement(), e.firstChild),
        this.updateListTopPosition()
    }
    ,
    UTMarketSearchView.prototype.onTimedUpdate = function() {
        var t;
        this._list.onTimedUpdate(),
        null === (t = this.pinnedItemView) || void 0 === t || t.onTimedUpdate()
    }
    ,
    UTMarketSearchView.prototype.selectListRow = function(t) {
        this._list.selectRow(t)
    }
    ,
    UTMarketSearchView.prototype.bubbleEvent = function(t, e, i) {
        this.isInteractionEnabled() && this._triggerActions(e, i)
    }
    ,
    UTMarketSearchView
}(UTTargetActionView));
UTMarketSearchView.prototype._generate = function _generate() {
    if (!this._generated) {
        var t = document.createElement("section");
        t.classList.add("ut-pinned-list-container"),
        t.classList.add("SearchResults"),
        this.__pinnedDiv = document.createElement("ul"),
        this.__pinnedDiv.classList.add("ut-pinned-item"),
        t.appendChild(this.__pinnedDiv),
        this._list = new UTPaginatedItemListView,
        this._list.getRootElement().classList.add("ut-pinned-list"),
        t.appendChild(this._list.getRootElement()),
        this.__root = t,
        this._generated = !0
    }
}
,
UTMarketSearchView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__pinnedDiv = null,
    this._list.destroy()
}
,
UTMarketSearchView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
